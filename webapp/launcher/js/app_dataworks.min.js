var IRm$={locale:[],r1:function(e,n,a){var t;if(!IRm$.currentLocale)for(IRm$.currentLocale=IRm$.locale[0],t=0;t<IRm$.locale.length;t++)if(IRm$.locale[t].name==window.useLocale){IRm$.currentLocale=IRm$.locale[t];break}var c=e;if((c=IRm$.currentLocale&&IRm$.currentLocale.data[e]?1==ig$.vmode?e+"*":IRm$.currentLocale.data[e]:(1==ig$.vmode?"x ":"")+(a||e))&&n)if("string"==typeof n&&(n=[n]),1==n.length)c=c.replace("@",n[0]);else for(t=0;t<n.length;t++)c=c.replace("@"+(t+1),n[t]);return c},r2_d:function(e){e&&e.func&&e.func.call(e.scope)},r2:function(e,n){var a=null,t=new IG$._rpc$,c=window.useLocale;IRm$.r3(),t.init(a,{ack:"content",payload:{uid:"/SYS_Config/locale/"+c},mbody:{},mts:"ROOT"},a,(function(t){var c,o,l=t;if(l&&l.data){for(o={name:l.name,data:{}},c=0;c<l.data.length;c++)o.data[l.data[c].name]=l.data[c].value;IRm$.locale.push(o)}if(!1===n)e&&e.func&&e.func.call(e.scope);else{var i=new IG$._rpc$;i.init(a,{ack:"content",payload:{uid:"/SYS_Config/ui_config"},mbody:{},mts:window.m$mts||"ROOT"},a,(function(n){n.config&&$.each(n.config,(function(e,n){"report_script"==e||"sheet_toolbar"==e||"application_title"==e||"application_title_html"==e?ig$[e]=IG$._decodeVal(n):("helper"==e&&$.each(n,(function(e,n){n.value=IG$._decodeVal(n.value)})),ig$[e]=n)})),e&&e.func&&e.func.call(e.scope)}),(function(){e&&e.func&&e.func.call(e.scope)})),i.send(1)}}),(function(){e&&e.func&&e.func.call(e.scope)})),t.send(1)},r3:function(){var e=new IG$._rpc$;e.init(null,{ack:"collaborate",payload:{cmd:"request_channel",istest:"T"},mbody:{},mts:"ROOT"},null,(function(e){if(!e||e&&(!e.channel||!e.instance))return;if($("#robo_wrap").length){let e=$("#robo_wrap").show().draggable({containment:"parent"}),n=e.parent().width(),a=e.parent().height();e.css({top:a-e.height()-20,left:n-e.width()-20-170});let t=$("#robo_main");t.draggable({containment:"parent",handle:$(".robo_area > .robo_title",t)}).resizable({containment:"parent",helper:"ui-resizable-helper",maxHeight:800,maxWidth:700,minHeight:300,minWidth:200}),t.css({top:a-e.height()-20-t.height()-20,left:n-t.width()-20})}}),(function(){$("#robo_wrap").hide()})),e.showerror=!1,e.send(1)}};
var dbits,canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);function BigInteger(t,i,o){null!=t&&("number"==typeof t?this.fromNumber(t,i,o):null==i&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,i))}function nbi(){return new BigInteger(null)}function am1(t,i,o,r,n,e){for(;--e>=0;){var s=i*this[t++]+o[r]+n;n=Math.floor(s/67108864),o[r++]=67108863&s}return n}function am2(t,i,o,r,n,e){for(var s=32767&i,h=i>>15;--e>=0;){var p=32767&this[t],a=this[t++]>>15,f=h*p+a*s;n=((p=s*p+((32767&f)<<15)+o[r]+(1073741823&n))>>>30)+(f>>>15)+h*a+(n>>>30),o[r++]=1073741823&p}return n}function am3(t,i,o,r,n,e){for(var s=16383&i,h=i>>14;--e>=0;){var p=16383&this[t],a=this[t++]>>14,f=h*p+a*s;n=((p=s*p+((16383&f)<<14)+o[r]+n)>>28)+(f>>14)+h*a,o[r++]=268435455&p}return n}j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array;function int2char(t){return BI_RM.charAt(t)}function intAt(t,i){var o=BI_RC[t.charCodeAt(i)];return null==o?-1:o}function bnpCopyTo(t){for(var i=this.t-1;i>=0;--i)t[i]=this[i];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0}function nbv(t){var i=nbi();return i.fromInt(t),i}function bnpFromString(t,i){var o;if(16==i)o=4;else if(8==i)o=3;else if(256==i)o=8;else if(2==i)o=1;else if(32==i)o=5;else{if(4!=i)return void this.fromRadix(t,i);o=2}this.t=0,this.s=0;for(var r=t.length,n=!1,e=0;--r>=0;){var s=8==o?255&t[r]:intAt(t,r);s<0?"-"==t.charAt(r)&&(n=!0):(n=!1,0==e?this[this.t++]=s:e+o>this.DB?(this[this.t-1]|=(s&(1<<this.DB-e)-1)<<e,this[this.t++]=s>>this.DB-e):this[this.t-1]|=s<<e,(e+=o)>=this.DB&&(e-=this.DB))}8==o&&0!=(128&t[0])&&(this.s=-1,e>0&&(this[this.t-1]|=(1<<this.DB-e)-1<<e)),this.clamp(),n&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var i;if(16==t)i=4;else if(8==t)i=3;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return this.toRadix(t);i=2}var o,r=(1<<i)-1,n=!1,e="",s=this.t,h=this.DB-s*this.DB%i;if(s-- >0)for(h<this.DB&&(o=this[s]>>h)>0&&(n=!0,e=int2char(o));s>=0;)h<i?(o=(this[s]&(1<<h)-1)<<i-h,o|=this[--s]>>(h+=this.DB-i)):(o=this[s]>>(h-=i)&r,h<=0&&(h+=this.DB,--s)),o>0&&(n=!0),n&&(e+=int2char(o));return n?e:"0"}function bnNegate(){var t=nbi();return BigInteger.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var i=this.s-t.s;if(0!=i)return i;var o=this.t;if(0!=(i=o-t.t))return i;for(;--o>=0;)if(0!=(i=this[o]-t[o]))return i;return 0}function nbits(t){var i,o=1;return 0!=(i=t>>>16)&&(t=i,o+=16),0!=(i=t>>8)&&(t=i,o+=8),0!=(i=t>>4)&&(t=i,o+=4),0!=(i=t>>2)&&(t=i,o+=2),0!=(i=t>>1)&&(t=i,o+=1),o}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,i){var o;for(o=this.t-1;o>=0;--o)i[o+t]=this[o];for(o=t-1;o>=0;--o)i[o]=0;i.t=this.t+t,i.s=this.s}function bnpDRShiftTo(t,i){for(var o=t;o<this.t;++o)i[o-t]=this[o];i.t=Math.max(this.t-t,0),i.s=this.s}function bnpLShiftTo(t,i){var o,r=t%this.DB,n=this.DB-r,e=(1<<n)-1,s=Math.floor(t/this.DB),h=this.s<<r&this.DM;for(o=this.t-1;o>=0;--o)i[o+s+1]=this[o]>>n|h,h=(this[o]&e)<<r;for(o=s-1;o>=0;--o)i[o]=0;i[s]=h,i.t=this.t+s+1,i.s=this.s,i.clamp()}function bnpRShiftTo(t,i){i.s=this.s;var o=Math.floor(t/this.DB);if(o>=this.t)i.t=0;else{var r=t%this.DB,n=this.DB-r,e=(1<<r)-1;i[0]=this[o]>>r;for(var s=o+1;s<this.t;++s)i[s-o-1]|=(this[s]&e)<<n,i[s-o]=this[s]>>r;r>0&&(i[this.t-o-1]|=(this.s&e)<<n),i.t=this.t-o,i.clamp()}}function bnpSubTo(t,i){for(var o=0,r=0,n=Math.min(t.t,this.t);o<n;)r+=this[o]-t[o],i[o++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;o<this.t;)r+=this[o],i[o++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;o<t.t;)r-=t[o],i[o++]=r&this.DM,r>>=this.DB;r-=t.s}i.s=r<0?-1:0,r<-1?i[o++]=this.DV+r:r>0&&(i[o++]=r),i.t=o,i.clamp()}function bnpMultiplyTo(t,i){var o=this.abs(),r=t.abs(),n=o.t;for(i.t=n+r.t;--n>=0;)i[n]=0;for(n=0;n<r.t;++n)i[n+o.t]=o.am(0,r[n],i,n,0,o.t);i.s=0,i.clamp(),this.s!=t.s&&BigInteger.ZERO.subTo(i,i)}function bnpSquareTo(t){for(var i=this.abs(),o=t.t=2*i.t;--o>=0;)t[o]=0;for(o=0;o<i.t-1;++o){var r=i.am(o,i[o],t,2*o,0,1);(t[o+i.t]+=i.am(o+1,2*i[o],t,2*o+1,r,i.t-o-1))>=i.DV&&(t[o+i.t]-=i.DV,t[o+i.t+1]=1)}t.t>0&&(t[t.t-1]+=i.am(o,i[o],t,2*o,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,i,o){var r=t.abs();if(!(r.t<=0)){var n=this.abs();if(n.t<r.t)return null!=i&&i.fromInt(0),void(null!=o&&this.copyTo(o));null==o&&(o=nbi());var e=nbi(),s=this.s,h=t.s,p=this.DB-nbits(r[r.t-1]);p>0?(r.lShiftTo(p,e),n.lShiftTo(p,o)):(r.copyTo(e),n.copyTo(o));var a=e.t,f=e[a-1];if(0!=f){var u=f*(1<<this.F1)+(a>1?e[a-2]>>this.F2:0),g=this.FV/u,m=(1<<this.F1)/u,c=1<<this.F2,b=o.t,l=b-a,v=null==i?nbi():i;for(e.dlShiftTo(l,v),o.compareTo(v)>=0&&(o[o.t++]=1,o.subTo(v,o)),BigInteger.ONE.dlShiftTo(a,v),v.subTo(e,e);e.t<a;)e[e.t++]=0;for(;--l>=0;){var T=o[--b]==f?this.DM:Math.floor(o[b]*g+(o[b-1]+c)*m);if((o[b]+=e.am(0,T,o,l,0,a))<T)for(e.dlShiftTo(l,v),o.subTo(v,o);o[b]<--T;)o.subTo(v,o)}null!=i&&(o.drShiftTo(a,i),s!=h&&BigInteger.ZERO.subTo(i,i)),o.t=a,o.clamp(),p>0&&o.rShiftTo(p,o),s<0&&BigInteger.ZERO.subTo(o,o)}}}function bnMod(t){var i=nbi();return this.abs().divRemTo(t,null,i),this.s<0&&i.compareTo(BigInteger.ZERO)>0&&t.subTo(i,i),i}function Classic(t){this.m=t}function cConvert(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,i,o){t.multiplyTo(i,o),this.reduce(o)}function cSqrTo(t,i){t.squareTo(i),this.reduce(i)}function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var i=3&t;return(i=(i=(i=(i=i*(2-(15&t)*i)&15)*(2-(255&t)*i)&255)*(2-((65535&t)*i&65535))&65535)*(2-t*i%this.DV)%this.DV)>0?this.DV-i:-i}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var i=nbi();return t.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),t.s<0&&i.compareTo(BigInteger.ZERO)>0&&this.m.subTo(i,i),i}function montRevert(t){var i=nbi();return t.copyTo(i),this.reduce(i),i}function montReduce(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var i=0;i<this.m.t;++i){var o=32767&t[i],r=o*this.mpl+((o*this.mph+(t[i]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[o=i+this.m.t]+=this.m.am(0,r,t,i,0,this.m.t);t[o]>=t.DV;)t[o]-=t.DV,t[++o]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function montSqrTo(t,i){t.squareTo(i),this.reduce(i)}function montMulTo(t,i,o){t.multiplyTo(i,o),this.reduce(o)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(t,i){if(t>4294967295||t<1)return BigInteger.ONE;var o=nbi(),r=nbi(),n=i.convert(this),e=nbits(t)-1;for(n.copyTo(o);--e>=0;)if(i.sqrTo(o,r),(t&1<<e)>0)i.mulTo(r,n,o);else{var s=o;o=r,r=s}return i.revert(o)}function bnModPowInt(t,i){var o;return o=t<256||i.isEven()?new Classic(i):new Montgomery(i),this.exp(t,o)}!function(){var t,i;for(t="0".charCodeAt(0),i=0;i<=9;++i)BI_RC[t++]=i;for(t="a".charCodeAt(0),i=10;i<36;++i)BI_RC[t++]=i;for(t="A".charCodeAt(0),i=10;i<36;++i)BI_RC[t++]=i}(),Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1);
function parseBigInt(n,t){return new BigInteger(n,t)}function linebrk(n,t){for(var e="",r=0;r+t<n.length;)e+=n.substring(r,r+t)+"\n",r+=t;return e+n.substring(r,n.length)}function byte2Hex(n){return n<16?"0"+n.toString(16):n.toString(16)}function pkcs1pad2(n,t){if(t<n.length+11)return null;for(var e=new Array,r=n.length-1;r>=0&&t>0;){var i=n.charCodeAt(r--);i<128?e[--t]=i:i>127&&i<2048?(e[--t]=63&i|128,e[--t]=i>>6|192):(e[--t]=63&i|128,e[--t]=i>>6&63|128,e[--t]=i>>12|224)}e[--t]=0;for(var l=new SecureRandom,u=new Array;t>2;){for(u[0]=0;0==u[0];)l.nextBytes(u);e[--t]=u[0]}return e[--t]=2,e[--t]=0,new BigInteger(e)}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(n,t){null!=n&&null!=t&&n.length>0&&t.length>0&&(this.n=parseBigInt(n,16),this.e=parseInt(t,16))}function RSADoPublic(n){return n.modPowInt(this.e,this.n)}function RSAEncrypt(n){var t=pkcs1pad2(n,this.n.bitLength()+7>>3);if(null==t)return null;var e=this.doPublic(t);if(null==e)return null;var r=e.toString(16);return 0==(1&r.length)?r:"0"+r}RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt;
function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(i){var t,s,h;for(t=0;t<256;++t)this.S[t]=t;for(s=0,t=0;t<256;++t)s=s+this.S[t]+i[t%i.length]&255,h=this.S[t],this.S[t]=this.S[s],this.S[s]=h;this.i=0,this.j=0}function ARC4next(){var i;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,i=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=i,this.S[i+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_psize=256;
var rng_state,rng_pool,rng_pptr;function rng_seed_int(r){rng_pool[rng_pptr++]^=255&r,rng_pool[rng_pptr++]^=r>>8&255,rng_pool[rng_pptr++]^=r>>16&255,rng_pool[rng_pptr++]^=r>>24&255,rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),(rng_state=prng_newstate()).init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(r){var n;for(n=0;n<r.length;++n)r[n]=rng_get_byte()}function SecureRandom(){}!function(){if(null==rng_pool){var r;if(rng_pool=new Array,rng_pptr=0,"Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var n=window.crypto.random(32);for(r=0;r<n.length;++r)rng_pool[rng_pptr++]=255&n.charCodeAt(r)}for(;rng_pptr<rng_psize;)r=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=r>>>8,rng_pool[rng_pptr++]=255&r;rng_pptr=0,rng_seed_time()}}(),SecureRandom.prototype.nextBytes=rng_get_bytes;
window.IG$||(window.IG$={})
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2006, 2014 Klaus Hartl
 * Released under the MIT license
 */,function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}((function(e){var n=/\+/g;function t(e){return r.raw?e:encodeURIComponent(e)}function o(e){return t(r.json?JSON.stringify(e):String(e))}function i(t,o){var i=r.raw?t:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(n," ")),r.json?JSON.parse(e):e}catch(e){}}(t);return e.isFunction(o)?o(i):i}var r=e.cookie=function(n,c,s){if(arguments.length>1&&!e.isFunction(c)){if("number"==typeof(s=e.extend({},r.defaults,s)).expires){var u=s.expires,a=s.expires=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*u)}return document.cookie=[t(n),"=",o(c),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var f,l=n?void 0:{},d=document.cookie?document.cookie.split("; "):[],p=0,m=d.length;p<m;p++){var w=d[p].split("="),x=(f=w.shift(),r.raw?f:decodeURIComponent(f)),g=w.join("=");if(n===x){l=i(g,c);break}n||void 0===(g=i(g))||(l[x]=g)}return l};r.defaults={},e.removeCookie=function(n,t){return e.cookie(n,"",e.extend({},t,{expires:-1})),!e.cookie(n)}})),function(e){e.fn=e.fn,e.fn.dselect=function(){return this.each((function(){e(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each((function(){this.onselectstart=function(){return!1}}))}))}}(jQuery),jQuery.fn.selText=function(){var e=this[0],n=window.bowser;if(n.msie)(t=e.offsetParent.createTextRange()).moveToElementText(e),t.select();else if(n.mozilla||n.opera){var t,o=e.ownerDocument.defaultView.getSelection();(t=e.ownerDocument.createRange()).selectNodeContents(e),o.removeAllRanges(),o.addRange(t)}else if(n.safari){(o=e.ownerDocument.defaultView.getSelection()).setBaseAndExtent(e,0,e,1)}return this};
var gsequence=0;window.IG$||(window.IG$={}),IG$.__chartoption=IG$.__chartoption||{},IG$.__chartoption.chartext=IG$.__chartoption.chartext||{},IG$._canvasSupported=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},IG$.UNDEFINED,IG$.L_SPPL=null,IG$.msgint=-1,IG$._markInvalid="Field necessary",IG$.level=0,IG$.clipboard=null,IG$._separator="|",IG$.i$0="initComponent",IG$.msvg=window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),IG$.mcanvas=!IG$.msvg,IG$.hEEq={regex:/[<'"]/gim,map:{"<":"&lt;","&":"&amp;","'":"&apos;",'"':"&quot;","&#x":"&#x"},fasl:/(&#x2f;)/g,metakey:/[- &#'"]/gim},IG$.getMetaKey=function(e){return e=e.replace(IG$.hEEq.metakey,(function(e){return"_"}))},IG$.hEE=function(e){return e&&(e=(""+e).replace(IG$.hEEq.regex,(function(e){return IG$.hEEq.map[e]}))),e},IG$.hEE2=function(e){return e&&(e=e.replace(IG$.hEEq.fasl,(function(e){return"/"}))),e},IG$.hEE3=function(e){return e.indexOf("/")>-1&&(e=(e=e.split("/")).join("&#x2f;")),e},IG$.mcanvas&&!IG$._canvasSupported()&&(IG$.mcanvas=!1),IG$.dbp={},IG$.ps={},IG$.loadExtend={rcsloaded:!1,items:[]},IG$.checkTimeout=function(e,t){var n;t&&e&&1!==e&&(n=t+(new Date).getTime(),clearTimeout(IG$.Dtimer),clearTimeout(IG$.Wtimer),IG$.Wtimer=setTimeout((function(){(new Date).getTime()-300>=n-10&&IG$.alertmsg(ig$.appname,"Your session is going to be end by 5 min, Please click OK to continue.",null,null,0,"")}),1e3*(t-300)),IG$.Dtimer=setTimeout((function(){(new Date).getTime()>=n-10&&IG$.showLogin(e,null,2)}),1e3*t))},IG$.extend=function(e,t,n){IG$.loadExtend.rcsloaded?e=IG$.extend(t,n):IG$.loadExtend.items.push({name:e,base:t,option:n})},IG$.callBackObj||(IG$.callBackObj=function(e,t,n){var r=this;r.p1=e,r.p2=t,r.p3=n},IG$.callBackObj.prototype={execute:function(){var e,t,n=this,r=arguments,a=[];if(n.p2){for(e=0;e<r.length;e++)a.push(r[e]);n.p3&&a.push(n.p3),t=n.p2.apply(n.p1||null,a)}return t}}),IG$._rrcsv=function(e){return e&&e.length>1&&"@"==e.charAt(0)&&(e=IRm$.r1(e)),e},IG$._rrcs=function(e,t,n,r){return t&&t.length>1&&"@"==t.charAt(0)&&(e._rcs=e._rcs||[],e._rcs.push({t:t,h:n,dobj:e,t:r}),t=IRm$.r1(t)),t},IG$.$lbg=function(e,t){!t&&IG$.___mtimer||(IG$.___mtimer=(new Date).getTime());(new Date).getTime()},IG$.override=function(e,t){if(e.$isClass)e.override(t);else if("function"==typeof e)IG$.apply(e.prototype,t);else{var n,r,a=e.self;if(a&&a.$isClass)for(n in t)t.hasOwnProperty(n)&&("function"==typeof(r=t[n])&&(a.$className&&(r.displayName=a.$className+"#"+n),r.$name=n,r.$owner=a,r.$previous=e.hasOwnProperty(n)?e[n]:callOverrideParent),e[n]=r);else IG$.apply(e,t)}return e},IG$.extend=function(){var e=Object.prototype.constructor,t=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])};return function(n,r,a){IG$.isObject(r)&&(a=r,r=n,n=a.constructor!==e?a.constructor:function(){return r.apply(this,arguments)});var o,i=function(){},s=r.prototype;return i.prototype=s,(o=n.prototype=new i).constructor=n,n.superclass=s,s.constructor===e&&(s.constructor=r),n.override=function(e){IG$.override(n,e)},o.override=t,o.proto=o,n.override(a),n.extend=function(e){return IG$.extend(n,e)},n}}(),IG$.microChartType=function(e,t){switch(e.mctype){case 0:t.type="bullet";break;case 2:t.type="line",t.lineColor=e.linecolor||"#5151FF",t.fillColor=e.fillcolor||"#c0d0f0",t.lineWidth=1;break;case 3:t.type="line",t.lineColor=e.linecolor||"#5151FF",t.fillColor=null,t.lineWidth=1;break;case 4:t.type="bar",t.barColor=e.linecolor||"#5151FF",t.negBarColor=e.linecolor||"#FF5151";break;case 6:t.type="box";break;case 7:t.type="tristate",t.posBarColor=e.linecolor||"#5151FF",t.negBarColor=e.linecolor||"#FF5151";break;case 8:t.type="pie";break;case 9:t.type="box",t.boxFillColor=e.linecolor||"#5151FF",t.medianColor=e.linecolor||"#FF5151";break;default:t.type="line",t.lineColor=e.linecolor||"#5151FF",t.fillColor=e.fillcolor||"#fff"}},IG$.apply=function(e,t,n,r){return e&&t&&"object"==typeof t&&$.each(t,(function(t,a){var o;!1===(o=n&&n.apply(null,[t]))||void 0!==e[t]&&!1===r||(e[o&&"string"==typeof o?o:t]=a)})),e},IG$.defaults=function(e,t){var n;if(e&&t&&"object"==typeof t)for(n in t)void 0===e[n]&&(e[n]=t[n]);return e},IG$.copyObject=function(e,t){var n,r={};for(n in e)t&&IG$.isObject(e[n])||(r[n]=e[n]);return r},IG$.isObject=function(e){return null!==e&&"object"==typeof e},IG$.isString=function(e){return"string"==typeof e},IG$.getMetaItemCache={itemicon:{},foldertype:{}},IG$.getLicenseTag=function(e){var t,n;return e.dlgLogin&&e.dlgLogin.logininfo&&(n=e.dlgLogin.logininfo.l3.substring(1)),"1"==n&&(t=["COMMUNITY EDITION","http://www.amplixbi.com"]),t},IG$.formatUID=function(e){if(e&&e.indexOf("-")>-1){var t,n=e.substring(0,e.indexOf("-")),r=e.substring(e.indexOf("-")+1);if(n.length<8)for(t=n.length;t<8;t++)n="0"+n;if(r.length<8)for(t=r.length;t<8;t++)r="0"+r;return n+"-"+r}return e},IG$.checkUID=function(e){var t=!1;return e&&17==e.length&&"-"==e.charAt(8)&&(t=!0),t},IG$.formatName=function(e){return e.length>17&&"_"==e.charAt(17)?e=e.substring(18):e.length>15&&"_"==e.charAt(15)&&(e=e.substring(16)),e},IG$.trim12=function(e){if(!e)return e;for(var t=/\s/,n=(e=e.replace(/^\s\s*/,"")).length;t.test(e.charAt(--n)););return e.slice(0,n+1)},IG$.drawLicenseTag=function(e,t){var n,r,a,o=IG$.getLicenseTag(e);if(o)for(r=$("<div></div>").css({position:"absolute",bottom:10,left:10,backgroundImage:"url(./images/75p_white.png)",backgroundRepeat:"repeat",padding:ig$.padding}).appendTo(t),n=0;n<o.length;n++)a=n>0?"<br>":"","http"==o[n].substring(0,4)?a+="<a href='"+o[n]+"' target='_new'>"+o[n]+"</a>":a+="<span>"+o[n]+"</span>",r.append(a)},IG$.tooltip=function(e,t){var n=IG$._tooltipInstance;n||(n=IG$._tooltipInstance=$("<div class='mto'></div>").css({position:"absolute",zIndex:999}).hide()).appendTo($(body)),n.text(text),n.show()},IG$.typeOfValue=function(e){var t=typeof e;return"object"===t&&(e?e instanceof Array&&(t="array"):t="null"),t},IG$.findSubDivClass=function(e,t){var n,r=null;if(null!=e.childNodes&&e.childNodes.length>0)for(n=0;n<e.childNodes.length;n++){var a=e.childNodes[n].className,o=e.childNodes[n].id;if(a&&"string"==typeof a&&a.indexOf(t)>-1||o==t)return e.childNodes[n];var i=e.childNodes[n].nodeName?e.childNodes[n].nodeName:e.childNodes[n].localName;if(("div"==i.toLowerCase()||"span"==i.toLowerCase())&&null!=(r=IG$.findSubDivClass(e.childNodes[n],t)))return r}return r},IG$.isFolder=function(e){var t=5,n=IG$.getMetaItemCache.foldertype;return n[e]?t=n[e]:(1==/(parent|folder|rfolder|javapackage)/.test(e)?t=1:1==/(cube|mcube|metrics|dataset)/.test(e)&&"cubemodel"!=e?t=2:"datemetric"==e&&(t=3),n[e]=t),t},IG$._sortTypeOrder={parent:1,folder:2,cube:3,cubemodel:4,javapackage:5,mcube:6,mdbcube:7},IG$._nsort=/(\.\d+)|(\d+(\.\d+)?)|([^\d.]+)|(\.\D+)|(\.$)/g,IG$.sortMeta=function(e){},IG$.sortMeta_old=function(e){var t,n=IG$._sortTypeOrder;for(t=0;t<e.length;t++)e[t].ltype=e[t].type.toLowerCase(),e[t].lfd=IG$.isFolder(e[t].ltype);e.sort((function(e,t){var r,a,o,i,s,l,c,u=0,d=e.lfd,p=t.lfd,f=e.ltype,h=t.ltype,g=e.nodepath||"",m=t.nodepath||"",$=n[f]||99,y=n[h]||99;if(g=e.locale_name||e.name,m=t.locale_name||t.name,$!=y)u=$-y;else if(g!=m)for(r=g.toLowerCase().match(IG$._nsort),a=m.toLowerCase().match(IG$._nsort),o=r.length,i=0;i<o;){if(!a[i]){u=1;break}if((l=r[i])!==(c=a[i++])){s=l-c,u=isNaN(s)?l>c?1:-1:s;break}}else if(d==p&&$==y)for(g=e.lname||e.name,m=t.lname||t.name,r=g.toLowerCase().match(IG$._nsort),a=m.toLowerCase().match(IG$._nsort),o=r.length,i=0;i<o;){if(!a[i]){u=1;break}if((l=r[i])!==(c=a[i++])){s=l-c,u=isNaN(s)?l>c?1:-1:s;break}}else u=d==p?$>y?-1:1:d>p?-1:1;return u}))},IG$.get_datatype=function(e){var t=null;switch(e){case"12":case"1":case"-1":case"-15":t="VARCHAR";break;case"5":case"4":case"-5":case"-6":case"-7":case"7":case"8":case"3":case"-2":case"-3":case"-4":case"2":t="NUMERIC";break;case"91":case"92":case"93":t="DATE";break;case"2004":case"2005":t="LOB";break;default:t="OTHER"}return t},IG$.get_metatype_icon=function(e,t){var n="",r=IG$.getMetaItemCache.itemicon,a=e;"link"==e&&t&&!t.rawtype&&t.attributes&&t.attributes.attrb2&&(t.rawtype=t.attributes.attrb2);var o=t?(t.datatype||"")+"_"+(t.rawtype||""):"";if(r[e+"_"+o])n=r[e+"_"+o];else{switch("link"==e&&t&&t.rawtype&&(a=t.rawtype.toLowerCase()),a){case"metrics":n="icon-folder";break;case"datacube":n="icon-excel";break;default:n="icon-"+a,"metric"==a&&t&&t.datatype&&(n+="_"+t.datatype)}"link"==e&&(n="icon-link-disp "+n),r[e+"_"+o]=n}return n},IG$.findSubNode=function(e,t,n){var r,a=null;if(null!=e.childNodes&&e.childNodes.length>0)for(r=0;r<e.childNodes.length;r++){var o=e.childNodes[r].getAttribute?e.childNodes[r].getAttribute(t):null;if(o&&o==n)return e.childNodes[r];if(e.childNodes[r].childNodes&&e.childNodes[r].childNodes.length>0&&null!=(a=IG$.findSubNode(e.childNodes[r],t,n)))return a}return a},IG$.loadXML=function(e){var t;return 10==e.charAt(0).charCodeAt(0)&&(e=e.substring(1)),"<"!=e.charAt(0)&&(e=Base64.decode(e)),window.DOMParser?t=(new DOMParser).parseFromString(e,"application/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e)),t},IG$.loadMapData=function(e){$.ajax({type:"GET",url:(window.mapurl||"./data/map.json")+"?uniquekey="+IG$.getUniqueKey(),dataType:"json",timeout:1e4,success:function(e){IG$.mLU=e},error:function(e,t,n){}})},IG$.lDF=function(e,t){$.ajax({type:"GET",url:e+"?uniquekey="+IG$.getUniqueKey(),dataType:"json",timeout:1e4,success:function(e){t&&t.execute(e)},error:function(e,t,n){}})},IG$.getKeyName=function(e){return e.toLowerCase()},IG$.interpolateColor=function(e,t,n,r){function a(e){return parseInt(e,16)}if(0==r)return e;if(r==n)return t;var o,i,s,l,c="#";for(l=1;l<=6;l+=2){for(i=(o=Number(a(e.substr(l,2))))+r/n*(Number(a(t.substr(l,2)))-o),s=Math.floor(i).toString(16);s.length<2;)s="0"+s;c+=s}return c},IG$._pcolor=function(e){var t,n,r=[];for(t=1;t<=6;t+=2)r.push(Number((n=e.substr(t,2),parseInt(n,16))));return r},IG$._interpolate_color=function(e,t,n){var r,a,o,i,s=[];for(i=0;i<3;i++)a=(r=e[i])+(t[i]-r)*n,o=Math.floor(a),s.push(o);return s},IG$.placeHolder=function(e){var t=window.bowser,n=e.attr("placeholder");t.msie&&n&&e.bind({focus:function(e){var t=$(this);t.val()==t.attr("placeholder")&&(t.val(""),t.removeClass("placeholder"))},blur:function(e){var t=$(this);""==t.val()||t.val()==t.attr("placeholder")?(t.addClass("placeholder"),t.val(t.attr("placeholder"))):t.removeClass("placeholder")},keyup:function(e){var t=$(this);""==t.val()&&t.blur()}}).blur()},IG$.CopyObject=function(e,t,n){var r;for(r in n=n?";"+n+";":n,t=t||{},e)n&&n.indexOf(";"+r+";")>-1?t[r]=e[r]:n||(t[r]=e[r]);return t},IG$.CloneObject=function(e){var t,n={};for(t in e)n[t]=e[t];return n},IG$.XGetInfo=function(e,t,n,r,a){var o,i,s,l=n.split(";"),c=IG$.XGetAttrProp(t);for(o=0;o<l.length;o++)if(s=l[o]){switch(r){case"i":i=null!=c[s]&&void 0!==c[s]?Number(c[s]):null;break;case"b":i="T"==c[s]||"F"!=c[s]&&null;break;default:i=null!=c[s]&&void 0!==c[s]?c[s]:null}a&&"cdata_"==s.substring(0,6)&&(i=IG$.XGetSubNodeText(t,s)),null!=i&&(e[s]=i)}},IG$.XUpdateInfo=function(e){var t,n="";for(t in e)v=e[t],null!=v&&"string"==typeof v&&(n+=" "+t+"='",n+=IG$.escapeXMLString(v),n+="'");return n},IG$.XSetAttr=function(e,t,n){e.setAttribute(t,n)},IG$.XGetTextVal=function(e){var t,n,r,a="",o=window.bowser;if(e){if(e.hasChildNodes()){for(t=e.childNodes,r=0;r<t.length;r++)if("4"==t[r].nodeType){n=t[r];break}if(n)return a=n.nodeValue||n.textContent}if(o.msie)a=e.text||e.textContent||"";else if(null!=e&&void 0!==e.textContent)return e.textContent}return a},IG$.toXMLString=function(e){return window.XMLSerializer?(new XMLSerializer).serializeToString(e):e.documentElement?e.documentElement.xml:e.xml},IG$.XGetChildNodes=function(e,t){var n=[];if(null!=e&&1==e.hasChildNodes())for(var r=0;r<e.childNodes.length;r++)"1"==e.childNodes[r].nodeType&&"parseerror"!=e.childNodes[r].nodeName&&(t&&t!=IG$.XGetNodeName(e.childNodes[r])||n.push(e.childNodes[r]));return n},IG$.getErrorCode=function(e){return e.errorcode},IG$.getTabTitle=function(e){var t=e;return t.length>16&&(t=t.substring(0,14)+".."),t},IG$.XGetNodeName=function(e){return e.nodeName},IG$.getFirstChild=function(e){var t=IG$.getChildNodes(e);return null!=t&&t.length>0?t[0]:null},IG$.XGetNode=function(e,t){var n=t.split("/"),r=0,a=e;""==n[0]&&(a=e.getElementsByTagName(n[1])[0],r=2);for(let e=r;e<n.length&&(null!=(a=IG$.getSubNode(a,n[e]))&&null!=a);e++);return a},IG$.getSubNode=function(e,t){var n,r=null,a=null;if(null!=e&&1==e.hasChildNodes())for(a=IG$.getChildNodes(e),n=0;n<a.length;n++)if(a[n].nodeName==t){r=a[n];break}return r},IG$.getSubNodeText=function(e,t){var n=IG$.getSubNode(e,t);return n?IG$.getTextContent(n):null},IG$.XGetAttrProp=function(e){for(var t={},n=window.bowser,r=0;r<e.attributes.length;r++)t[n.msie?e.attributes[r].nodeName:e.attributes[r].localName]=e.attributes[r].value;return t},IG$.parseValueList=function(e){var t,n,r,a,o,i,s,l=[];if(e)for(n=0;n<e.length;n++){if(o=(a=e[n]).headers,i=a.inline_data,(r=a).data=[],a&&o&&i)for(a.delimiter,a.codefield,a.sortfield,a.cols-1,o.length,t=0;t<i.length;t++)s=i[t],r.data.push({code:s[0],disp:s[1],sdisp:s[2]});r&&l.push(r)}return l},IG$.getFstChld=function(e){var t=IG$.XGetChildNodes(e);return null!=t&&t.length>0?t[0]:null},IG$.getFieldValue=function(e,t,n){var r=e.down.call(e,"[name="+t+"]"),a=null;if(r&&"s"===n)a=r.getValue();return a},IG$.setFieldValue=function(e,t,n,r){var a=e.down.call(e,"[name="+t+"]");if(a)switch(n){case"s":a.setValue(r);break;case"dg":a.store.loadData(r)}},IG$.applyOptions=function(e,t,n,r){$.each(n,(function(n,a){var o=e.down("[name="+a+"]");o&&(r?"checkbox"==o.xtype?t[a]=o.getValue()?"T":"F":t[a]=o.getValue():"checkbox"==o.xtype?o.setValue("T"==t[a]):o.setValue(t[a]))}))},IG$._I30=function(e){var t,n="";for(t in e)"string"!=typeof e[t]&&"number"!=typeof e[t]||(n+=" "+t+"='"+IG$.escapeXMLString(e[t])+"'");return n},IG$.XHasElement=function(e,t){var n,r=!1;if(e&&e.children)for(n=0;n<e.children.length;n++){if(e.children[n]==t)return!0;if(e.children[n].children&&e.children[n].children.length>0&&1==(r=IG$.XHasElement(e.children[n],t)))return!0}return r},IG$.chartTypeMenu=[{label:"Column",lcs:"L_CH_COLUMN",charttype:"cartesian",subtype:"column",img:"column"},{label:"Line",lcs:"L_CH_LINE",charttype:"cartesian",subtype:"line",img:"line"},{label:"Area",lcs:"L_CH_AREA",charttype:"cartesian",subtype:"area",img:"area"},{label:"Bar",lcs:"L_CH_BAR",charttype:"cartesian",subtype:"bar",img:"bar"},{label:"Pie",lcs:"L_CH_PIE",charttype:"pie",subtype:"pie",img:"pie"},{label:"Doughnut",lcs:"L_CH_DOUGHNUT",charttype:"pie",subtype:"doughnut",img:"pie"},{label:"Bubble",lcs:"L_CH_BUBBLE",charttype:"bubble",subtype:"bubble",img:"bubble"},{label:"Scatter",lcs:"L_CH_SCATTER",charttype:"scatter",subtype:"scatter",img:"bubble"}],IG$.getPrintXML=function(e){return window.bowser.msie?e.outerHTML:(new XMLSerializer).serializeToString(e)},IG$.isNumericType=function(e){var t=!1;switch(e=e?e.toLowerCase():""){case"numeric":case"number":case"int":case"bigint":case"decimal":t=!0}return t},IG$.FormatNumber=function(e){x=(e+="").split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},IG$.NumberFormat=function(e,t){var n,r,a,o,i,s,l,c,u,d,p,f,h,g,m,$,y=0,b="",I="",G="",_="",v=0;if(e){var w=0;for(e.indexOf(";")>-1&&(G=e.substring(e.indexOf(";")+1),e=e.substring(0,e.indexOf(";"))),a=e.length-1;a>=0&&("#"!=(o=e.charAt(a))&&"0"!=o);a--)","==o&&w++;if(w>0)t/=Math.pow(1e3,w);else if(G&&"UNIT,"==G.substring(0,5)){G=(G=G.substring(5)).split(",");var T,x=[];for(a=0;a<G.length;a++){var M,N,S=G[a];S.indexOf("=")>-1&&(M=S.substring(0,S.indexOf("=")),N=S.substring(S.indexOf("=")+1),N=Number(N),M&&!isNaN(N)&&x.push({s1:M,s2:N}))}if(x.length){for(a=x.length-1;a>=0;a--)if(t>=x[a].s2){T=x[a];break}T&&(t/=T.s2,e+=T.s1)}}for(a=0;a<e.length;a++)o=e.charAt(a),d=0,c&&"."==o?(l=1,g=i):"#"==o||"0"==o||"-"==o?(c&&l&&"-"!=o&&y++,c=1):","==o?c?i==o?(v++,f=a,p||(p=a-1)):h=o:d=1:c&&!l&&a>0&&a+1<e.length&&("#"==e.charAt(a+1)||"0"==e.charAt(a+1))?h=o:h&&o==h&&c||(d=1,c&&!u&&(u=1)),d&&(c||u?("%"==o&&("'"==i&&b.length&&"'"==b.charAt(b.length-1)?b=b.substring(0,b.length-1):t*=100),b+=o," "!=o&&o):I+=o),i=o;(n=b.indexOf("&permil;"))>-1&&(n>0&&"'"==b.charAt(n-1)?(b=b.substring(0,n-1)+b.substring(n),n--):t*=1e3,b=b.substring(0,n)+"â€°"+b.substring(n+8)),v>0&&(e=e.substring(0,p)+e.substring(f+1),t/=Math.pow(1e3,v)),G=e.substring(I.length,e.length-I.length-b.length)}if(s=parseFloat(Math.round(t+"e"+y)+"e-"+y).toFixed(y),G){if(n=s.indexOf("."),m=s,n>-1&&(m=s.substring(0,n),$=s.substring(n+1)),h){for(a=n=m.length-3;a>=0;a-=3)a>0&&(m=m.substring(0,a)+h+m.substring(a));"0"==g&&0==n&&(m="0")}if((r=G.indexOf("."))>0&&(_=G.substring(r+1)),_){var k=[];for(a=0;a<_.length;a++)"0"==_.charAt(a)?k.push($.length>a?$.charAt(a):"0"):"#"==_.charAt(a)&&k.push($.length>a&&"0"!=$.charAt(a)?$.charAt(a):"");$=k.join("")}s=m+($?"."+$:"")}return I+s+b},IG$.getSeriesType=function(e){var t="column";switch(e){case"column":t="column";break;case"line":t="line";break;case"spline":t="spline";break;case"area":t="area";break;case"bar":t="bar";break;case"pie":case"doughnut":t="pie";break;case"bubble":t="bubble";break;case"scatter":t="scatter";break;case"parallel":t="parallel";break;case"waterfall":t="waterfall";break;case"areaspline":t="areaspline"}return t},IG$.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},IG$.stripNonNumeric=function(e){e+="";for(var t=/^\d|\.|-$/,n="",r=0;r<e.length;r++)t.test(e.charAt(r))&&("."==e.charAt(r)&&-1!=n.indexOf(".")||"-"==e.charAt(r)&&0!=n.length||(n+=e.charAt(r)));return n},IG$.rsa_kinfo=null,IG$.encryptUtil={base64ToArrayBuffer:function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),a=0;a<n;a++)r[a]=t.charCodeAt(a);return r.buffer},arrayBufferToBase64:function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,a=0;a<r;a++)t+=String.fromCharCode(n[a]);return window.btoa(t)},importPublicKey:async function(e,t){function n(e){return e=(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function r(e){return btoa(e.match(/\w{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""))}const a={kty:"RSA",e:n(r(e)),n:n(r(t)),alg:"RSA-OAEP-256",ext:!0};await window.crypto.subtle.importKey("jwk",a,{name:"RSA-OAEP",hash:{name:"sha-256"}},!0,["encrypt"]);return await window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:512,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])},encryptData:async function(e,t){let n=(new TextEncoder).encode(e);var r=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},t.publicKey,n);return IG$.encryptUtil.arrayBufferToBase64(r)}},IG$.encryptKey=function(e,t){if(e.rsaPublicKeyModules){var n,r=new RSAKey;for(r.setPublic(e.rsaPublicKeyModules,e.rsaPublicKeyExpoenent),n=0;n<t.length;n++)t[n]=r.encrypt(t[n])}return t},IG$._rpc$=function(){this.stoploading=!0},IG$._rpc$.prototype={init:function(e,t,n,r,a,o){var i=this;i.panel=e,i.params=t,i.caller=n,i.rsSuccess=r,i.rsFail=a,i.rsParams=o,i.showerror=!0,i.stoploading=!0,i.sccall=new IG$.callBackObj(i.caller,i.rsSuccess,i.rsParams),i.scfail=new IG$.callBackObj(i.caller,i.rsFail,i.rsParams)},_sproc:function(e,t,n,r){var a=this;window.Pace&&window.Pace.stop();var o=(t=t||{errorcode:"0xffff",errormsg:"Server incorrect responding"}).errorcode,i=!1;if(IG$.checkTimeout(e,t.session_timeout),"0x1300"!=o&&window.use_session_key&&!ig$._session_key&&t.session_key&&(ig$._session_key=t.session_key,IG$.psst_set(1,t.session_key)),a.panel&&a.panel.setLoading&&(0!=a.stoploading?a.panel.setLoading(!1):i=!0),"0x1300"==o){if(IG$.psst_set(0),1==i&&a.panel.setLoading(!1),1==a.scfail.execute(o)||0==a.showerror)return;IG$.showLogin(e,a.panel?new IG$.callBackObj(a.panel,a.panel.entryLogin):null,"loginstatus"==a.params.ack?5:2)}else if(null!=o&&o.length>0){1==i&&a.panel.setLoading(!1);var s=a.scfail.execute(t);!1!==a.showerror&&0!=s&&IG$.ShowErrorMessage(t,a.panel,a.params)}else a.sccall.execute(t.result)},cancel:function(){var e=this;e._abrt=1,e._ldr&&e._ldr.abort()},send:function(e){var t,n,r=this;r.params._mts_=IG$._g$a||r.params.mts||"",r.params._share_uid_=IG$._share_uid_,window.use_session_key&&(t=$.cookie("amp_auth"),r.params.session_key=ig$._session_key||t||"empty"),r.params.uniquekey=IG$.getUniqueKey(),window.Pace&&window.Pace.start(),r.panel&&r.panel.setLoading&&1!==r._ld&&r.panel.setLoading(!0),!e&&r.panel&&(e=r.panel.instance),r.params.get_params&&"GET"==r._rmethod&&(n=r.params.get_params),r._ldr=$.ajax({url:r.servlet$||ig$.servlet+"/"+(n&&n.sreq?n.sreq:r.params.ack),data:r._rmethod&&!0!==r._rparam?n||"":JSON.stringify(r.params),dataType:"json",type:r._rmethod||"POST",async:!0,contentType:"application/json; charset=UTF-8",timeout:0,beforeSend:function(e,t){},cache:!1,crossDomain:!1,processData:!0,success:function(t,n,a){r._ldr=null,r._abrt=null,r._sproc(e,t,n,a)},error:function(t,n,a){var o=t.responseJSON;if(o||(o=401==t.status?{errorcode:"0x1300",errormsg:"UnAuthorized Access"}:400==t.status?{errorcode:"0x3840",errormsg:"400 Invalid Request"}:{errorcode:"0x9999",errormsg:"Server URL Connection Failed"}),"0x9999"!=o.errorcode)r._sproc(e,o,n,t);else{if(window.Pace&&window.Pace.stop(),r.panel&&r.panel.setLoading&&r.panel.setLoading(!1),r._abrt)return r._abrt=null,void IG$.ShowWarning(IRm$.r1("E_CANCEL"),r);r._ldr=null,r._abrt=null,!1!==r.showerror&&IG$.ShowConnectionError(r.panel),r.scfail.execute(o)}}})}},$.download=function(e,t,n){if(e&&t){var r,a=[];for(r=0;r<t.length;r++)a.push("<input type='hidden' name='"+t[r].name+"' value='"+t[r].value+"' />");window.use_session_key&&a.push("<input type='hidden' name='session_key' value='"+ig$._session_key+"' />"),$("<form action='"+e+"' method='"+(n||"post")+"'>"+a.join("")+"</form>").appendTo("body").submit().remove()}},IG$._load_html=function(e,t){window.Pace&&window.Pace.start(),$.ajax({type:"GET",url:e+"&uniquekey="+IG$.getUniqueKey(),dataType:"text",timeout:1e4,success:function(e){window.Pace&&window.Pace.stop(),t&&t.execute(e)},error:function(e,t,n){window.Pace&&window.Pace.stop()}})},IG$.measureText=function(e,t){var n=this.sensorDiv;return n||(n=$("<div style='margin:0px;padding:0px;display:inline-block;top:-100px'></div>"),$("body").append(n),this.sensorDiv=n),n.css({fontSize:e}),n.text(t),{width:IG$.j$ext._w(n)||0,height:IG$.j$ext._h(n)||0}},IG$.getDateParse=function(e){return{y:e.substr(0,4),M:e.substr(4,2),d:e.substr(6,2),h:e.substr(8,2),m:e.substr(10,2)}},IG$.formatDate=function(e){return e?e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2):e},IG$.dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,r=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(a,o,i){var s=IG$.dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(a)||/\d/.test(a)||(o=a,a=void 0),a=a?new Date(a):new Date,isNaN(a))throw SyntaxError("invalid date");"UTC:"==(o=String(s.masks[o]||o||s.masks.default)).slice(0,4)&&(o=o.slice(4),i=!0);var l=i?"getUTC":"get",c=a[l+"Date"](),u=a[l+"Day"](),d=a[l+"Month"](),p=a[l+"FullYear"](),f=a[l+"Hours"](),h=a[l+"Minutes"](),g=a[l+"Seconds"](),m=a[l+"Milliseconds"](),$=i?0:a.getTimezoneOffset(),y={d:c,dd:r(c),ddd:s.i18n.dayNames[u],dddd:s.i18n.dayNames[u+7],m:d+1,mm:r(d+1),mmm:s.i18n.monthNames[d],mmmm:s.i18n.monthNames[d+12],yy:String(p).slice(2),yyyy:p,h:f%12||12,hh:r(f%12||12),H:f,HH:r(f),M:h,MM:r(h),s:g,ss:r(g),l:r(m,3),L:r(m>99?Math.round(m/10):m),t:f<12?"a":"p",tt:f<12?"am":"pm",T:f<12?"A":"P",TT:f<12?"AM":"PM",Z:i?"UTC":(String(a).match(t)||[""]).pop().replace(n,""),o:($>0?"-":"+")+r(100*Math.floor(Math.abs($)/60)+Math.abs($)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]};return o.replace(e,(function(e){return e in y?y[e]:e.slice(1,e.length-1)}))}}(),IG$.dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},IG$.dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},IG$.getString=function(e,t,n){var r=e.substr(t,n);return"0"==r.charAt(0)&&(r=r.substr(1)),parseInt(r)},IG$.getFormattedDate=function(e,t){var n=e;if(e&&e.length>8){var r,a=IG$.getString(e,0,4),o=IG$.getString(e,4,2),i=IG$.getString(e,6,2),s=0,l=0,c=0;e.length>13&&(s=IG$.getString(e,8,2),l=IG$.getString(e,10,2),c=IG$.getString(e,12,2)),r=new Date(a,o,i,s,l,c),n=IG$.dateFormat(r,1==t?"mmm d yyyy, TThh:MM":"mmm d yyyy")}return n},IG$.lineInterpolate=function(e,t,n){var r,a=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y),i=t.x-e.x,s=t.y-e.y,l=(Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),i/n),c=s/n,u=0,d=0,p=new Array;for(r=0;r<n;r++)u=e.x+l*r,d=e.y+c*r,p.push({x:u,y:d});return p},IG$.generateUniqueTest=function(e){var t,n,r="",a=["ABCDEFGHIJKLMNOPQRSTUVWXTZ","abcdefghiklmnopqrstuvwxyz","0123456789","@#$%^&+="];for(t=0;t<e;t++){var o;o=0==t?a[0]:3==t?a[3]:5==t?a[1]:7==t?a[2]:a[Math.floor(Math.random()*a.length)],n=Math.floor(Math.random()*o.length),r+=o.substring(n,n+1)}return r},IG$.replaceAll=function(e,t,n){for(var r=e;-1!=r.indexOf(t);)r=r.replace(t,n);return r},IG$.selectAll=function(e){var t=e[0],n=window.bowser;if(n.msie)(r=document.body.createTextRange()).moveToElementText(t),r.select();else if(n.mozilla||n.opera){var r,a=window.getSelection();(r=document.createRange()).selectNodeContents(t),a.removeAllRanges(),a.addRange(r)}else if(n.safari){(a=window.getSelection()).setBaseAndExtent(t,0,t,1)}},IG$.escapeXMLString=function(e){var t,n,r,a=e;if(a&&"string"==typeof a)for(t=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"]],r=0;r<t.length;r++)n=t[r],a=a.replace(n[0],n[1]);return a},IG$.clipboardCopy=function(e){window.clipboardData?window.clipboardData.setData("Text",e):(IG$._cboard||(IG$._cboard=$("<textarea style='position:absolute;top:-400px;left:-400px;width:100px;height:100px'></textarea>").appendTo($("body"))),IG$._cboard.val(e),IG$._cboard.focus(),IG$._cboard.select(),document.execCommand("copy"))},IG$.getUniqueKey=function(){var e=new Date;return""+e.getFullYear()+(1+e.getMonth())+e.getDate()+e.getHours()+e.getMinutes()+e.getSeconds()},IG$.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},IG$.majorDateformat=[{name:"YYYY",rname:"YEAR"},{name:"QUARTER"},{name:"MM"},{name:"DD",rname:"DAY"},{name:"WM",rname:"WEEKMONTH"},{name:"WEEK"},{name:"AMPM"},{name:"HH",rname:"HOUR"},{name:"MI",rname:"MINUTE"},{name:"CUSTOM"}],IG$.sqlDateFormat={yyyy:"$DATE(_date_, 'YYYY')",quarter:"$DATE(_date_, 'QUARTER')",mm:"$DATE(_date_, 'MM')",dd:"$DATE(_date_, 'DD')",wm:"$DATE(_date_, 'WM')",week:"$DATE(_date_, 'WEEK')",ampm:"$DATE(_date_, 'AMPM')",hh:"$DATE(_date_, 'HH')",mi:"$DATE(_date_, 'MINUTE')",custom:"$DATE(_date_, _format)"},Date.prototype.format=function(e){for(var t="",n=Date.replaceChars,r=0;r<e.length;r++){var a=e.charAt(r);r-1>=0&&"\\"==e.charAt(r-1)?t+=a:n[a]?t+=n[a].call(this):"\\"!=a&&(t+=a)}return t},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10==1&&11!=this.getDate()?"st":this.getDate()%10==2&&12!=this.getDate()?"nd":this.getDate()%10==3&&13!=this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil((this-e)/864e5)},W:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),0).getDate()},L:function(){var e=this.getFullYear();return e%400==0||e%100!=0&&e%4==0},o:function(){var e=new Date(this.valueOf());return e.setDate(e.getDate()-(this.getDay()+6)%7+3),e.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},u:function(){var e=this.getMilliseconds();return(e<10?"00":e<100?"0":"")+e},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":00"},T:function(){var e=this.getMonth();this.setMonth(0);var t=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return this.setMonth(e),t},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}},IG$.showScheduler=function(e,t,n,r,a,o){var i=new IG$.dlgScheduleList({instance:e.instance,runner:e,uid:t,itemtype:n,req:r,reportoption:a,opt:o});IG$.showDlg(e,i)},IG$.applyFormOptions=function(e,t,n){var r,a,o;for(r=0;r<t.length;r++)a=this.down("[name="+(t[r].c||t[r].n)+"]"),n?(o=(o=t[r].m?e.settings[t[r].n]:e[t[r].n])==IG$.UNDEFINED||null==o?o||t[r].s:o,a.setValue(o)):(o=t[r].d?a.getValue()||t[r].d:a.getValue(),t[r].m?e.settings[t[r].n]=o:e[t[r].n]=o)},IG$.readSystemConf=function(e){var t;(t=new IG$._rpc$).showerror=!1,t.init(null,{ack:"content",payload:{uid:"/SYS_Config/systemconfig"},mbody:{}},null,(function(t){var n,r,a=t?t.items:null;if(a)for(IG$._sysconfig={},n=0;n<a.length;n++)r=a[n],IG$._sysconfig[r.name]=r;e&&e.execute()}),(function(){return e&&e.execute(),!1})),t.send()},IG$.checkValues=function(e,t){var n,r,a,o={b:!0,v:{}};for(n=0;n<t.length;n++)(r=e.down("[name="+t[n]+"]"))&&(r.clearInvalid(),(a=r.getValue())?o.v[t[n]]=a:(r.markInvalid(IRm$.r1("B_REQ")),o.b=!1));return o},IG$.fillFormValues=function(e,t,n){var r,a,o;for(r=0;r<n.length;r++)(a=e.down("[name="+n[r]+"]"))&&(o=t[n[r]],a.setValue(o))},IG$.j$ext={_w:function(e,t){var n=e&&e.length?e[0]:null,r=0;return n&&(void 0===t?(r=n.offsetWidth||n.clientWidth||n.innerWidth,r=isNaN(r)?0:r):e.width(t)),r},_h:function(e,t){var n=e&&e.length?e[0]:null,r=0;return n&&(void 0===t?(r=n.offsetHeight||n.innerHeight||n.clientHeight,r=isNaN(r)?0:r):e.height(t)),r}},IG$.checkFields=function(e,t){var n=1;return $.each(t,(function(t,r){var a=e.down("[name="+r+"]");a.clearInvalid(),a.getValue()||(a.markInvalid("Required field"),n=0)})),n||IG$.alertmsg(ig$.appname,"Select data connector!",null,null,0,""),n},IG$.dateUtil={datePartsRe:/^(?:(\d{1,4})|(\w{3,}))[/\-.\\\s](?:(\d{1,2})|(\w{3,}))[/\-.\\\s](\d{1,4})$/,monthCodes:[{JAN:0,FEB:1,MAR:2,APR:3,MAY:4,JUN:5,JUL:6,AUG:7,SEP:8,OCT:9,NOV:10,DEC:11},{JANUARY:0,FEBRUARY:1,MARCH:2,APRIL:3,MAY:4,JUNE:5,JULY:6,AUGUST:7,SEPTEMBER:8,OCTOBER:9,NOVEMBER:10,DECEMBER:11}],getMonthCode:function(e){var t,n=e.toUpperCase(),r=IG$.dateUtil.monthCodes;for(t=0;t<r.length;t++)if(void 0!==r[t][n])return r[t][n];return-1},guessDate:function(e){var t,n,r,a,o,i=[],s=[],l=IG$.dateUtil.datePartsRe.exec(e);if(l){if(o=l[0].indexOf("-")>0?"-":"/",l[2]||l[4]){if(l[2]&&l[4])return null;if(l[2]){if(l[5].length<4)return;n=IG$.dateUtil.getMonthCode(l[2]),t=parseInt(l[3]),r=parseInt(l[5]),i=["M","dd"],s=["mon","dd"]}else{if(l[5].length<4)return;t=parseInt(l[1]),n=IG$.dateUtil.getMonthCode(l[4]),r=parseInt(l[5]),i=["dd","M"],s=["dd","mon"]}if(2==l[5].length)r<50?r+=2e3:r<100&&(r+=1900),i.push("y"),s.push("yy");else{if(4!=l[5].length)return;i.push("yy"),s.push("yyyy")}}else l[1]>12&&l[1]<32&&l[3]<13?(t=parseInt(l[1]),n=parseInt(l[3])-1,r=parseInt(l[5]),i=["dd","mm","yy"],s=["dd","mm","yyyy"]):l[3]>12&&l[3]<32&&l[1]<13?(n=parseInt(l[1])-1,t=parseInt(l[3]),r=parseInt(l[5]),i=["mm","dd","yy"],s=["mm","dd","yyyy"]):(r=parseInt(l[1]),n=parseInt(l[3])-1,t=parseInt(l[5]),i=["yy","mm","dd"],s=["yyyy","mm","dd"]);if(!(isNaN(r)||isNaN(n)||isNaN(t)||n<0||n>11||t<1||t>31))return a=new Date(r,n,t,0,0,0),{format:i.join(o),placeholder:s.join(o),date:a}}},createDatePicker:function(e,t,n,r){var a;return IG$.dateUtil.updateDatePicker(t,r),(t.startYear||t.finalYear)&&(a=t.startYear?""+t.startYear:"-10",a+=":"+(t.finalYear?t.finalYear:"+10")),t.datepicker({monthNames:$.datepicker._defaults.monthNamesShort,showButtonPanel:!0,closeText:"Clear",buttonImageOnly:!0,constrainInput:!1,changeMonth:!0,changeYear:!0,dateFormat:IG$.calendar_locale.c1format,defaultDate:0,yearRange:a,onSelect:function(t,r){n&&n.apply(e,[t,r])},beforeShow:function(e){setTimeout((function(){var t=$(e).datepicker("widget").find(".ui-datepicker-close");t.unbind("click"),t.bind("click",(function(t){t.stopPropagation(),t.preventDefault(),$.datepicker._clearDate(e)}))}),1)}}),t},updateDatePicker:function(e,t){var n=e;n.on("keydown keyup",(function(e){var n,r=$(this),a=t?t.value:r.val();if(13==e.keyCode){if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),"keyup"==e.type&&(n=IG$.dateUtil.guessDate(a))){t?t.placeholder=n.placeholder:r.attr("placeholder",n.placeholder),r.datepicker("option","dateFormat",n.format),r.datepicker("setDate",n.date);var o=$.datepicker._getInst(r[0]);o.settings.onSelect.apply(r,[a,o])}return!1}})),n.on("click",(function(e){$(this).datepicker("show")}))}},IG$.guid=function(){var e,t;if(IG$._guid_lut)e=IG$._guid_lut;else for(e=IG$._guid_lut=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);var n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,a=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return e[255&n]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]+"-"+e[255&r]+e[r>>8&255]+"-"+e[r>>16&15|64]+e[r>>24&255]+"-"+e[63&a|128]+e[a>>8&255]+"-"+e[a>>16&255]+e[a>>24&255]+e[255&o]+e[o>>8&255]+e[o>>16&255]+e[o>>24&255]},IG$._inpEdt$=function(e,t){var n,r=$("textarea",e.body.dom),a=e.getRawValue(),o=-1;if(n="["+t+"]",r.focus(),a.length>0){var i=IG$._inpEd$pos(r[0]),s=-1!=i&&i?i.start:-1;s<0&&(s=a.length),a=a.substring(0,s)+n+a.substring(s),o=s+n.length}else o=(a=n).length;e.setValue(a),o&&(r.prop("selectionEnd",o),setTimeout((function(){e.focus(),IG$._inpEd$sep(r[0],o,o)}),100))},IG$._inpEd$pos=function(e){if("selectionStart"in e&&document.activeElement==e)return{start:e.selectionStart,end:e.selectionEnd};if(e.createTextRange){var t=document.selection.createRange();if(t.parentElement()===e){var n=e.createTextRange();n.moveToBookmark(t.getBookmark());for(var r=0;n.compareEndPoints("EndToStart",n)>0;n.moveEnd("character",-1))r++;n.setEndPoint("StartToStart",e.createTextRange());for(var a={start:0,end:r};n.compareEndPoints("EndToStart",n)>0;n.moveEnd("character",-1))a.start++,a.end++;return a}}return-1},IG$._inpEd$sep=function(e,t,n){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,n);else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r.select()}},IG$._ws=function(e){this._init(e)},IG$._ws.prototype={_init:function(e){e.protocol=e.protocol||"ws";var t,n=this,r=e.url,a=e.protocol+"://"+r+"/websocket/endpoint";n._userdetail=e.userdetail;try{(t=n.__ws=new WebSocket(a)).onopen=function(e){n.onopen(e)},t.onmessage=function(e){n.onmessage(e)},t.onclosed=function(e){n.onclosed(e)},t.onclosing=function(e){n.onclosing(e)}}catch(e){}},onopen:function(e){var t=this._userdetail;this.send("_main_","login",{email:t.email,name:t.name,id:t.id})},onmessage:function(e){var t,n=JSON.parse(e.data);if("_main_"==n.application)switch(n.action){case"login":t="Logged in user <ul><li>"+n.content.name+" ("+n.content.id+")</li><li>"+n.content.email+"</li></ul>";break;case"writecontent":t="Content updated on server! <ul><li>"+n.content.nodepath+"</li></li>By: "+n.content.username+"</li></ul>"}else if(n.parent_header&&n.parent_header.csession){var r,a=IG$._ipt_location;a&&a[n.parent_header.csession]&&(r=a[n.parent_header.csession]).applyPython.call(r,n)}t&&IG$.alertmsg(ig$.appname,t,null,null,0,"info")},send:function(e,t,n){var r=this.__ws,a=this._userdetail,o={application:e,action:t,sid:a.sid,gid:a.gid,mts:a.mts,token:a.token,id:IG$.guid(),content:n};r.send(JSON.stringify(o))}},IG$._menu_button=function(e,t,n){var r,a,o=this,i=$(document);if(o._menus=t,IG$._menu_btns=IG$._menu_btns||[],IG$._menu_btns.push(o),r="<ul class='dropdown-menu animated",n.btn_styles)for(a=0;a<n.btn_styles.length;a++)r+=" "+n.btn_styles[a];r+=" m-t-xs'></ul>",o._b_html=$(r).appendTo("body"),e.bind("click",(function(e){e.stopPropagation(),e.preventDefault(),$.each(IG$._menu_btns,(function(e,t){t!=o&&t._g_unbind()})),o._b_html.css(n.menu_position),o._b_html.toggle(),IG$._menu_btn=o,i.bind("click",o._g_unbind)}))},IG$._gitemname=function(e){var t="";return e&&(t="<span class='igc-itemname' title='"+e+"'> ("+e+")</span>"),t},IG$._menu_button.prototype={_g_unbind:function(e){var t=$(document),n=(IG$._menu_btns,IG$._menu_btn);n&&(n._b_html.hide(),t.unbind("click",n._g_unbind)),IG$._menu_btn=null},create:function(){var e=this;e._b_html.empty(),$.each(e._menus,(function(t,n){var r="<li><a class='btn_button'>"+n.text+"</a></li>",a=$(r).appendTo(e._b_html);n.style&&$.each(n.style,(function(e,t){a.addClass(t)})),a.bind("click",(function(t){t.preventDefault(),t.stopPropagation(),n.handler&&n.handler.apply(null),e._b_html.hide(),e._g_unbind()}))}))},setMenus:function(e){this._menus=e,this.create()}},IG$.__chartoption.chartext.$export_echart=function(){var e,t,n=this.customchart,r={};if(n)return e=IG$.getFstChld(n.getDom()),"DIV"==IG$.XGetNodeName(e).toUpperCase()&&(e=IG$.getFstChld(e),"SVG"==IG$.XGetNodeName(e).toUpperCase()?(IG$.XSetAttr(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),IG$.XSetAttr(e,"xmlns","http://www.w3.org/2000/svg"),IG$.XSetAttr(e,"version","1.1"),t=IG$.toXMLString(e),r.image_type="svg",r.image_data=Base64.encode(t)):(t=n.getConnectedDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"}),r.image_type="png",r.image_data=t)),r},IG$.__chartoption.chartext.$export_html=function(e,t){var n=this.owner.container,r={logging:!1,useCORS:!0,imageTimeout:0},a=function(){html2canvas(n,r).then((function(e){document.body.appendChild(e);var n={image_type:"png",image_data:e.toDataURL("image/png")};t.execute(n)}))};return window.html2canvas?a():IG$.getScriptCache(["./js/html2canvas.min.js"],new IG$.callBackObj(this,(function(){a()}))),!1},IG$._decodeVal=function(e){return e&&"{enc}"==e.substring(0,5)&&(e=Base64.decode(e.substring(5))),e},IG$._encodeVal=function(e){return e&&"{enc}"!=e.substring(0,5)&&(e="{enc}"+Base64.encode(e)),e},IG$.setScrRect=function(e,t){var n={axis:"y",theme:"minimal-dark",autoHideScrollbar:!0,autoExpandScrollbar:!0,scrollbarPosition:"outside",autoDraggerLength:!0};return t&&IG$.apply(n,t),e.IGmCustomScrollbar(n)},IG$.showIntro=function(e){var t;for(t=e.length-1;t>=0;t--)e[t].element||e.splice(t,1);introJs().setOptions({dontShowAgain:!1,nextLabel:IRm$.r1("B_NEXT"),prevLabel:IRm$.r1("B_PREV"),skipLabel:"x",doneLabel:IRm$.r1("B_CLOSE"),exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,showBullets:!0,showProgress:!1,steps:e}).start()},IG$.testVal=function(e,t){var n,r=e.split("|");for(n=0;n<r.length;n++)if(r[n]==t)return!0;return!1},IG$.setScrRectM=function(e,t,n,r){e.IGmCustomScrollbar(t,n,r)},IG$.ace_edit=function(e,t){var n=ace.edit(e,{mode:"ace/mode/"+(t||"java"),enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0}),r=IG$.$snippet[t];if(r&&r.length){var a,o=[];$.each(r,(function(e,t){var r={};t.snippet?(r.text=t.text,r.handler=function(){n.session.insert(n.getCursorPosition(),t.snippet.join("\n"))}):r=t,o.push(r)})),a=new $s.menu({margin:"0 0 10 0",floating:!0,items:o}),$(n.container).on("contextmenu",(function(e){e.preventDefault(),e.stopImmediatePropagation();var t=e.originalEvent;t?a.showAt(t.pageX,t.pageY):a.showBy(target)}))}return n},IG$.jsonPath=function(obj,expr,arg){var P={resultType:arg&&arg.resultType||"VALUE",result:[],normalize:function(e){var t=[];return e.replace(/[\['](\??\(.*?\))[\]']|\['(.*?)'\]/g,(function(e,n,r){return"[#"+(t.push(n||r)-1)+"]"})).replace(/'?\.'?|\['?/g,";").replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").replace(/#([0-9]+)/g,(function(e,n){return t[n]}))},asPath:function(e){for(var t=e.split(";"),n="$",r=1,a=t.length;r<a;r++)n+=/^[0-9*]+$/.test(t[r])?"["+t[r]+"]":"['"+t[r]+"']";return n},store:function(e,t){return e&&(P.result[P.result.length]="PATH"==P.resultType?P.asPath(e):t),!!e},trace:function(e,t,n){if(""!==e){var r=e.split(";"),a=r.shift();if(r=r.join(";"),t&&t.hasOwnProperty(a))P.trace(r,t[a],n+";"+a);else if("*"===a)P.walk(a,r,t,n,(function(e,t,n,r,a){P.trace(e+";"+n,r,a)}));else if(".."===a)P.trace(r,t,n),P.walk(a,r,t,n,(function(e,t,n,r,a){"object"==typeof r[e]&&P.trace("..;"+n,r[e],a+";"+e)}));else if(/^\(.*?\)$/.test(a))P.trace(P.eval(a,t,n.substr(n.lastIndexOf(";")+1))+";"+r,t,n);else if(/^\?\(.*?\)$/.test(a))P.walk(a,r,t,n,(function(e,t,n,r,a){P.eval(t.replace(/^\?\((.*?)\)$/,"$1"),r instanceof Array?r[e]:r,e)&&P.trace(e+";"+n,r,a)}));else if(/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(a))P.slice(a,r,t,n);else if(/,/.test(a))for(var o=a.split(/'?,'?/),i=0,s=o.length;i<s;i++)P.trace(o[i]+";"+r,t,n)}else P.store(n,t)},walk:function(e,t,n,r,a){if(n instanceof Array)for(var o=0,i=n.length;o<i;o++)o in n&&a(o,e,t,n,r);else if("object"==typeof n)for(var s in n)n.hasOwnProperty(s)&&a(s,e,t,n,r)},slice:function(e,t,n,r){if(n instanceof Array){var a=n.length,o=0,i=a,s=1;e.replace(/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,(function(e,t,n,r){o=parseInt(t||o),i=parseInt(n||i),s=parseInt(r||s)})),o=o<0?Math.max(0,o+a):Math.min(a,o),i=i<0?Math.max(0,i+a):Math.min(a,i);for(var l=o;l<i;l+=s)P.trace(l+";"+t,n,r)}},eval:function(x,_v,_vname){try{return $&&_v&&eval(x.replace(/(^|[^\\])@/g,"$1_v").replace(/\\@/g,"@"))}catch(e){throw new SyntaxError("jsonPath: "+e.message+": "+x.replace(/(^|[^\\])@/g,"$1_v").replace(/\\@/g,"@"))}}},$=obj;if(expr&&obj&&("VALUE"==P.resultType||"PATH"==P.resultType))return P.trace(P.normalize(expr).replace(/^\$;?/,""),obj,"$"),!!P.result.length&&P.result};
window.IG$||(window.IG$={}),IG$._wcollab_data={msg_template:{cls:"kiwi-messagelist-item",items:[{cls:"kiwi-messagelist-message kiwi-messagelist-message--modern kiwi-messagelist-message--authorfirst kiwi-messagelist-message-notice",items:[{cls:"kiwi-messagelist-modern-left",id:"avatar"},{cls:"kiwi-messagelist-modern-right",items:[{items:[{cls:"kiwi-messagelist-top",items:[{cls:"kiwi-messagelist-nick",items:[{cls:"kiwi-messagelist-nick-prefix",type:"span",innerHtml:"{actor.nick}"}]},{cls:"kiwi-messagelist-time"}]},{cls:"kiwi-messagelist-body",innerHtml:"{message}"}]}]},{cls:"kiwi-messagelist-modern-right-pad"}]}]},workspace_template:{cls:"kiwi-workspace",items:[{cls:"kiwi-container kiwi-container--sidebar-open",items:[{cls:"kiwi-header kiwi-theme-bg",items:[{cls:"kiwi-header-name"},{cls:"kiwi-header-options"}]},{cls:"kiwi-container-content",id:"messagecontainer",items:[{cls:"kiwi-messagelist",id:"messagelist",items:[{cls:"kiwi-messagelist-inner",id:"messagelist-inner"}]}]}]},{cls:"kiwi-controlinput kiwi-theme-bg",items:[{cls:"kiwi-controlinput-selfuser"},{cls:"kiwi-controlinput-inner",items:[{cls:"kiwi-controlinput-form",type:"form",items:[{cls:"kiwi-typinguserslist"},{cls:"kiwi-controlinput-input-wrap",items:[{cls:"kiwi-ircinput kiwi-controlinput-input",items:[{cls:"kiwi-ircinput-editor",id:"ircinput",attr:{placeholder:"Send a message...",contenteditable:"true",role:"textbox",spellcheck:"true"}}]}]},{cls:"kiwi-controlinput-send fa fa-paper-plane",type:"button",id:"btn_send"}]}]}]}]},welcome_template:{cls:"kiwi-wrap kiwi-theme-bg",items:[{cls:"kiwi-startup-common kiwi-welcome-simple kiwi-welcome-simple--recaptcha",items:[{cls:"kiwi-startup-common-section kiwi-startup-common-section-connection",items:[{cls:"u-form u-form--big kiwi-welcome-simple-form",type:"form",items:[{type:"h2"},{cls:"u-input-text",id:"robo_form1",items:[{type:"label",attr:{for:"txt_nick"},innerHtml:"{nick}"},{cls:"u-input-text-inputs",items:[{type:"input",id:"txt_nick",cls:"u-input"}]}]},{type:"button",id:"robo_form2",cls:"u-button u-button-primary u-submit kiwi-welcome-simple-start",innerHtml:"{start}",handler:function(e){e.preventDefault(),e.stopPropagation();this._connect_channel()}},{items:[{cls:"fn-sponsor",innerHtml:"{sponsor}"}]}]}]},{cls:"kiwi-startup-common-section kiwi-startup-common-section-info",items:[{cls:"kiwi-startup-common-section-info-content",innerHtml:"{startup}"}]}]}]}},IG$._wcollab=function(e){this._settings=e||{},e._container&&this._render(),e._container||(e._container=e._html);var t=$("#popup_error",e._container);$("#btn_close",t).bind("click",(function(){t.fadeOut()}))},IG$._wcollab.prototype={_render:function(){var e=this,t=e._settings,i=t._container,s=e._html={},n=window.location.href.split("/");t._embeded_html=!0,t.message=t.message||{start:"Start",nick:"Nick",startup:"<p>Welcome to your AI Data Explorer.<br/><br/> <a href='http://www.amplixbi.com'>amplixbi</a> robo assist are here for help you.<br> To learn more about intelligent helper for your business, please visit <a href='https://amplixbi.com'>our website</a>.</p>",sponsor:"<span>AI Data Explorer<br></span>Created by <a href='http://www.amplixbi.com/'>amplixbi.com</a>"},s.app_cuddle=$('<div id="app_cuddle"></div>').appendTo(i),s.loading=$(['<div id="loading" class="loading">','    <div class="loading_bg"></div>','    <div class="loading-msg"><img src="./images/ico_loading_circle.png" width="30" height="30" alt="" /></div>',"</div>"].join("")).appendTo(i),s.main_loading=$(['<div class="mainLoadingWrap" id="main_loading">','<div class="mainLoading">',"    <p>Calling agent to help you.<br/>I am more then happy to serve you!<br/><span>Please wait a moment.</span></p>",'    <div class="progressWrap">','        <p class="line"></p>','        <img src="./images/ico_mainloading.png" width="18" height="14" alt="" />',"    </div>","</div>","</div>"].join("")).appendTo(i),s.popup_error=$(['<div id="popup_error" class="popupContainer">','<div class="popupWrap">','    <div class="popupContentWrap">','        <div class="popupImgWrap">','            <img src="./images/img_alert.png" width="80" height="80" alt="" />',"        </div>",'        <div id="msg_area" class="popupContent">','            <p id="msg_title" class="title"></p>','            <p id="msg_content"></p>',"        </div>",'        <div class="popupBtnWrap">','            <a id="btn_close" class="btn close">Close</a>',"        </div>","    </div>","</div>",'<div class="popupDimmed"></div>',"</div>"].join("")).appendTo(i),t.html=s.app_cuddle,e._init_setting();let a="";for(let e=3;e<n.length&&"launcher"!=n[e];e++)a+="/"+n[e];t.ws_path||(t.ws_path=a+"/websocket/collaborate"),t.request_url||(t.request_url=a+"/krcp");var o=s.popup_error;$("#btn_close",o).bind("click",(function(){o.fadeOut()}))},_init_setting:function(){var e=this._settings,t=window.location.href.split("/");e.protocol||(e.protocol="https:"==t[0]?"wss":"ws"),e.url||(e.url=t[2])},_init:function(){var e,t=this;e=t._settings,t._init_setting();var i,s=e.protocol+"://"+e.url+e.ws_path;t._userdetail=e.userdetail;try{(i=t.__ws=new WebSocket(s)).onopen=function(e){t.onopen(e)},i.onmessage=function(e){t.onmessage(e)},i.onclosed=function(e){t.onclosed(e)},i.onclosing=function(e){t.onclosing(e)}}catch(e){}},onopen:function(e){this._send_ws("_call_","login",{})},onmessage:function(e){var t,i=this,s=JSON.parse(e.data),n=i._settings,a={};if("_irc_"==s.application){switch(s.action){case"login":t="Logged in user <ul><li>"+s.content.name+" ("+s.content.id+")</li><li>"+s.content.email+"</li></ul>";break;case"writecontent":t="Content updated on server! <ul><li>"+s.content.nodepath+"</li></li>By: "+s.content.username+"</li></ul>";break;case"message":if($("#main_loading",n._container).fadeOut(),(a=s.content).nlp_entities&&a.nlp_entities.length){var o=a.message;for(let e=0;e<a.nlp_entities.length;e++){let t=a.nlp_entities[e],i=t.entity,s=t.utteranceText||t.sourceText,n=o.indexOf("{"+i+"}");for(;n>-1;){let e=o.indexOf("}",n);n=(o=o.substring(0,n)+s+o.substring(e+1)).indexOf("{"+i+"}")}}a.before_message=t,a.message=o}if((t=a.message)&&t.startsWith("#ACT")&&n.instance)return void n.instance.requestRoboAction.apply(n.instance,[i,a,function(e,s){a.orig_message=t,a.message=e.toString(),a.visual_data=s,i._appendMsg(a)}]);if(t&&t.indexOf("@")>-1&&n.instance)return void n.instance.requestRoboFormat.apply(n.instance,[i,a,function(e){a.orig_message=t,a.message=e,i._appendMsg(a)}]);t||(a.message=IRm$.r1("ROBO_ERR_PROCESSING"))}i._appendMsg(a)}},_appendMsg:function(e){var t,i,s=this,n=s._settings,a=($("#messagecontainer",n._container),s.messagelist),o=s.messagelist_inner;function r(){s.theight=theight=o.height(),a.animate({scrollTop:theight},"slow");var i=$("a",t);$.each(i,(function(t,i){var a=$(i);a.bind("click",(function(t){t.preventDefault(),t.stopPropagation();var i=a.attr("amp_reply");""===i&&(i=a.text()),i&&(i.startsWith("#ACT_")?n.instance.requestRoboAction.apply(n.instance,[s,{message:i,actor:{nick:"me",self:!0}},function(t){e.orig_message=e.message,e.message=t.toString()}]):s._send_ws("_call_","message",{message:i,actor:{nick:"me",self:!0}},!0),$("#ircinput",n._container).focus())}))}))}theight=s.theight||0,s._ttimer&&(clearTimeout(s._ttimer),s._ttimer=-1,s._ttimer_c&&(s._ttimer_c.html.html(s._ttimer_c.message.join(" ")),s._ttimer_c.html.trigger("animation_finished"),s._ttimer_c=null)),t=$("<div></div>").appendTo(o),i=s.draw_area(t,IG$._wcollab_data.msg_template,e,!e.actor.self&&!e.visual_data),e.actor&&e.actor.self?i.addClass("igc_self_msg"):i.addClass("igc_bot_msg"),e.visual_data?(e._html=i,s._appendChart(e)):e.actor.self?r():i.bind("animation_finished",(function(e){r()}))},_appendChart:function(e){var t=$(".kiwi-messagelist-body",e._html),i=$("<div class='robo-chart'></div>").appendTo(t),s=e.visual_data;echarts.init(i[0]).setOption(s)},closeSession:function(){var e=this.__ws;e&&e.close(),this.__ws=null},_send_ws:function(e,t,i,s){var n,a=this,o=a.__ws,r=a._channel_info,c={application:e,action:t,instance:r.instance,channel:r.channel,id:a.guid(),content:i};if(n=c.content.message,s&&n&&n.indexOf(";")>0&&(c.content.message=n.substring(0,n.indexOf(";"))),1!==o.readyState&&0!==o.readyState)return a._appendMsg({actor:{},message:"Socket closed! Reconnect to bot"}),void a._init();if(o.send(JSON.stringify(c)),s&&n&&n.indexOf(";")>0&&(i.message=n.substring(n.indexOf(";")+1)),"message"===t)a._appendMsg(i)},load_app:function(){var e=this,t=e._settings,i=t.instance,s=t.html;e._loaded?$("#ircinput",t._container).focus():(e._loaded=!0,e.rootdiv=s,e.rootdiv.empty(),e._pages={},setTimeout((function(){if($("#main_loading",t._container).fadeOut(),t.html.fadeIn(),e._load_page("welcome_template"),i&&i.dlgLogin&&i.dlgLogin.logininfo){$("#txt_nick",t._container).val(i.dlgLogin.logininfo.username),$("#robo_form1",t._container).hide(),$("#robo_form2",t._container).hide(),setTimeout((function(){$("#robo_form2",t._container).trigger("click")}),800)}}),800))},_load_page:function(e){var t,i=this,s=i._settings;$.each(i._pages,(function(t,i){t==e?i.region.show():i.region.hide()})),i._pages[e]||(t=i.draw_area(i.rootdiv,IG$._wcollab_data[e],s.message),i._pages[e]={pname:e,region:t})},draw_area:function(e,t,i,s){return this._draw_sub(e,t,i,s)},setLoading:function(e){var t=this._settings;$("#loading",t._container)[e?"show":"fadeOut"]()},showErrorMessage:function(e,t){var i=this._settings,s=$("#popup_error",i._container);msg_title=$("#msg_title",s),msg_content=$("#msg_content",s),msg_title.html(e),msg_content.html(t),s.fadeIn()},_send_ajax:function(e,t){var i=this,s=i._settings;e.uniquekey=i._get_uniquekey(),window.Pace&&window.Pace.start(),i.setLoading(!0),$.ajax({url:s.request_url+"/"+e.ack,data:JSON.stringify(e),dataType:"json",type:"POST",async:!0,contentType:"application/json; charset=UTF-8",timeout:6e5,beforeSend:function(e,t){},cache:!1,crossDomain:!1,processData:!0,success:function(e,s,n){window.Pace&&window.Pace.stop();var a=(e=e||{errorcode:"0xffff",errormsg:"Server incorrect responding"}).errorcode;if(i.setLoading(!1),null!=a&&a.length>0){var o=!0;t&&(o=t.func.apply(t.scope||i,[e,!0])),!1!==o&&i.showErrorMessage("Error!",e.errormsg)}else t&&t.func.apply(t.scope||i,[e,!1])},error:function(e,t,s){window.Pace&&window.Pace.stop(),i.setLoading(!1);i.showErrorMessage("Error!","Server URL Connection Failed")}})},_get_uniquekey:function(){var e=new Date;return""+e.getFullYear()+(1+e.getMonth())+e.getDate()+e.getHours()+e.getMinutes()+e.getSeconds()},_draw_sub:function(e,t,i,s){var n,a,o,r=this,c=t.type||"div",l=["<"+c];if(t.cls&&l.push(" class='"+t.cls+"'"),t.name&&l.push(" name='"+t.name+"'"),t.id&&l.push(" id='"+t.id+"'"),t.attr&&$.each(t.attr,(function(e,t){l.push(" "+e+"='"+t+"'")})),l.push("></"+c+">"),l=$(l.join("")).appendTo(e),t.handler&&l.bind("click",(function(e){t.handler.apply(t.scope||r,[e])})),t.items)$.each(t.items,(function(e,t){r._draw_sub(l,t,i,s)}));else if(t.innerHtml)if(i&&"{"==t.innerHtml.charAt(0)&&"}"==t.innerHtml.charAt(t.innerHtml.length-1))if((n=t.innerHtml.substring(1,t.innerHtml.length-1)).indexOf(".")>-1){for(n=n.split("."),a=i,o=0;o<n.length;o++){if(!a[n[o]]){a=null;break}a=a[n[o]]}l.append(a||"")}else if("message"==n&&s)if(i[n].indexOf("<a")<0){let e=i[n].split(" "),t=0,s=5+Math.floor(50*Math.random()),a="";!function i(){if(t<e.length){let n=e[t];a+=" "+n,t++,l.html(a),t%40==0&&r.messagelist.animate({scrollTop:r.messagelist_inner.height()},"slow"),s=(" "==n||"."==n?60:5)+Math.floor(120*Math.random()),r._ttimer_c={html:l,message:e},r._ttimer=setTimeout(i,s)}else r._ttimer=-1}()}else l.append(i[n]||""),setTimeout((function(){l.trigger("animation_finished")}),10);else l.append(i[n]||"");else l.append(t.innerHtml);return l},_connect_channel:function(){var e=this,t=e._settings,i=$("#txt_nick",t._container);if(!i.val())return i.addClass("required_field"),void e.showErrorMessage("Field Input","Nick name is required!");i.removeClass("required_field"),e._send_ajax({ack:"collaborate",payload:{cmd:"request_channel"},mbody:e._settings.channel_name?{channel_name:"#"+e._settings.channel_name,nick:i.val()}:{nick:i.val()},_mts_:e._settings._mts_||IG$._g$a},{func:function(i,s){s||(e._channel_info=i.result,e._load_page("workspace_template"),e.messagelist=$("#messagelist",e._settings._container),e.messagelist_inner=$("#messagelist-inner",e.messagelist),e._init_ws(),e._init(),$("#ircinput",t._container).focus())}})},_init_ws:function(){var e=this,t=e._pages.workspace_template,i=$("#ircinput",t.region);e._msg_hist=e._msg_hist||[],e._msg_hist_back=e._msg_hist_back||0,i.keydown((function(t){13==t.which?(t.preventDefault(),t.stopPropagation(),e._send_msg()):38==t.which?e._msg_hist.length>e._msg_hist_back&&(e._msg_hist_back++,i.html(e._msg_hist[e._msg_hist.length-e._msg_hist_back])):40==t.which&&e._msg_hist_back>0&&e._msg_hist.length>e._msg_hist_back-1&&(e._msg_hist_back--,i.html(e._msg_hist[e._msg_hist.length-e._msg_hist_back]))})),$("#btn_send",t.region).bind("click",(function(t){t.preventDefault(),t.stopPropagation(),e._send_msg()}))},_send_msg:function(){var e=this,t=e._pages.workspace_template,i=$("#ircinput",t.region),s=i.html();s&&(i.empty(),e._msg_hist=e._msg_hist||[],e._msg_hist_back=0,e._msg_hist.push(s),e._send_ws("_call_","message",{message:s,actor:{nick:"me",self:!0}}))},guid:function(){var e,t;if(IG$._guid_lut)e=IG$._guid_lut;else for(e=IG$._guid_lut=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);var i=4294967295*Math.random()|0,s=4294967295*Math.random()|0,n=4294967295*Math.random()|0,a=4294967295*Math.random()|0;return e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]+"-"+e[255&s]+e[s>>8&255]+"-"+e[s>>16&15|64]+e[s>>24&255]+"-"+e[63&n|128]+e[n>>8&255]+"-"+e[n>>16&255]+e[n>>24&255]+e[255&a]+e[a>>8&255]+e[a>>16&255]+e[a>>24&255]}};
window.ig$&&(ig$.padding=ig$.padding||4),webix.DataDriver.ildr={toObject:function(e){return e},getRecords:function(e){return e},getDetails:function(e){return e.data},getOptions:function(){return!1},getInfo:function(e){return{size:0,from:0}},child:function(e){return e.children}};var $s={__hh:34};webix.ready((function(){IG$._ready$&&IG$._ready$.length&&($.each(IG$._ready$,(function(e,t){t.apply(null)})),IG$._ready$=null)})),$s.ready=function(e){webix.ready(e)},$s.getBlank=function(e){return{view:"layout",autowidth:!0,autoheight:!0,adjust:!0,_mblank:1,borderless:!0,hidden:e,rows:[{borderless:!0,padding:0,template:""}]}},$s.getEvent=function(e){return new $s.event(e)},$s.event=function(e){this.browserEvent=e,e&&void 0!==e.x&&void 0!==e.y&&(this.xy=[e.x,e.y])},$s.event.prototype={getX:function(){return this.browserEvent.pageX},getY:function(){return this.browserEvent.pageY}},$s.extend=IG$.extend,$s.apply=IG$.apply,$s.defaults=IG$.defaults,$s.body=function(e,t){var i=this;i._c=e,i.dom=null,i.is_el=t},$s.body.prototype={updateDom:function(){var e=this,t=e._c.$dx;e._c.$ex;e.dom=t?t.$view:null}},$s.object=function(e){var t=this;return t.base_constructor.apply(t,arguments),t},$s.__suspendLayouts$=0,$s.object.prototype={__mbase:1,_adjust:function(e,t){!0!==$s.__suspendLayouts&&0==$s.__suspendLayouts$&&(e&&e.resizeChildren&&e.resizeChildren(!0),"panel"!=this.xtype&&"viewport"!=this.xtype||e&&e.adjust&&e.adjust())},suspendLayouts(){$s.__suspendLayouts$++,$s.__suspendLayouts=!0},resumeLayouts(){$s.__suspendLayouts$--,$s.__suspendLayouts=!1},base_constructor:function(){var e,t=this,i=Array.prototype.slice.call(arguments);if("dropzone"==t.xtype&&i.length>1&&i[0]){var o=i[0];i.splice(0,1),i[0].targetEl=o,e=i[0]}else e=i[0];e=e||{},IG$.apply(t,e,null,!0),t._iconfig=e,t.initComponent.apply(t,i)},initComponent:function(){var e=this,t=e.listeners;e._listeners=e._listeners||{},t&&$.each(t,(function(i,o){e.on(i,o,t.scope)}))},on:function(e,t,i){var o,n=this;((o=n._listeners=n._listeners||{})[e]=o[e]||[]).push({f:t,scope:i||n})},un:function(e){(this._listeners=this._listeners||{})[e]=[]},chlidProcessEvents:function(){var e=this,t=Array.prototype.slice.call(arguments),i=t[t.length-1],o=i.name,n=e._listeners;if("resize"===o){var a=e.$ex.$width,s=e.$ex.$height,r=e.$width,l=e.$height;a==r&&s==l||(n&&n[o]&&$.each(n[o],(function(e,i){t.splice(0,1,i.scope),i.f.apply(i.scope,t)})),e._dockedItems&&e._dockedItems.length&&$.each(e._dockedItems,(function(e,t){t.$ex&&t.chlidProcessEvents.call(t,t,t.$ex.$width,t.$ex.height,i)})),e._items&&e._items.length&&$.each(e._items,(function(e,t){t.$ex&&t.chlidProcessEvents.call(t,t,t.$ex.$width,t.$ex.$height,i)}))),e.$width=a,e.$height=s}},processEvents:function(){var e,t,i=this,o=Array.prototype.slice.call(arguments),n=o[o.length-1],a=n.name,s=i._listeners;if(!n._stopPropagation)return"afterrender"!=a&&"resize"!=a&&"beforeadd"!=a||(n._stopPropagation=!0,"afterrender"==a&&i.store&&i.store._refreshGrid.call(i.store)),s&&s[a]&&$.each(s[a],(function(t,i){var n=i.f.apply(i.scope,o);void 0!==n&&(e=n)})),!1!==e&&i.ownerCt&&void 0!==(t=i.processEvents.apply(i.ownerCt,o))&&(e=t),e},suspendEvents:function(){},resumeEvents:function(){},fireEvent:function(){var e=this,t=Array.prototype.slice.call(arguments),i=t[0];return t.splice(0,1),t.push(e._createEvent(i)),e.processEvents.apply(e,t)},_createEvent:function(e,t){var i=t||{};return $s.apply(i,{name:e,_stopPropagation:!1,_preventDefault:!1,owner:this,getTarget:function(){return t.srcElement||t.target||t.currentTarget},stopEvent:function(){this.stopPropagation(),this.preventDefault()}},null,!0),i},addEvents:function(){}},$s.selModel=function(e){this.selected={items:[],map:{},length:0},$s.apply(this,e,null,!0),this.checkSelector=".x-grid-cell"==this.checkSelector?"cell":this.checkSelector},$s.selModel.prototype={focus:function(e,t){var i,o=this.ownerCt;"number"==typeof e&&(e=o.store&&o.store.data.items[e]||null),e&&(i=e.data,o.$dx&&(o.$dx.select&&o.$dx.select(i.id),o.$dx.updateItem(i.id,e.data)),o.fireEvent.call(o,"cellclick",o,null,t||0,e,o.store?o.store.indexOf(e):-1))},select:function(e,t){var i,o,n=this,a=n.ownerCt,s=n.selected,r="MULTI"==n.mode,l=a.$dx;if("number"==typeof e&&(e=a.store&&a.store.data.items[e]||null),e){if((i=e.data).checked=i.selected=!r||(void 0===t||t),r){if(s.map[i.id]&&!i.selected){for(s.map[i.id]=0,o=0;o<s.items.length;o++)if(s.items[o].data.id==i.id){s.items.splice(o,1);break}}else!s.map[i.id]&&i.selected&&(s.map[i.id]=1,s.items.push(e));l&&(l.select&&l.select(i.id),l.updateItem(i.id,i))}else s.length&&s.map[i.id]&&!i.selected?(delete s.map[i.id],s.items.splice(0,s.items.length)):i.selected&&!s.map[i.id]&&(s.length&&(s.items[0].set("selected",!1),s.items[0].set("checked",!1),delete s.map[s.items[0].data.id],s.items.splice(0,s.items.length)),s.items.push(e),s[0]=e,s.map[i.id]=1,l&&(l.select&&l.select(i.id),l.updateItem(i.id,i)));s.length=s.items.length,a.fireEvent.call(a,"selectionchange",a,s)}},clear:function(){var e,t,i=this,o=i.ownerCt.$dx,n=i.selected;for(i.$f=null,n.map={},t=0;t<n.length;t++)(e=n.items[t].data).selected=!1,e.checked=!1,o&&o.getItem(e.id)&&o.updateItem(e.id,e);n.items=[],n.length=0},isFocused:function(e){return e.data.id==this.$f},getSelection:function(){return this.selected.items},$validate:function(){var e,t,i=this.selected,o=i.items;for(e=o.length-1;e>=0;e--)t=o[e],i.map[t.data.id]||o.splice(e,1);i.length=o.length}},$s.record=function(e,t,i){var o=this;o.store=i,o.data=e,o.__rec=1,o.firstChild=null,o.childNodes=[]},$s.record.prototype={get:function(e){return this.$r&&this.$r[e]||this.data[e]},set:function(e,t){var i=this,o=i.data,n=i.store.grid,a=n.$dx;o&&(o[e]=t,"combobox"==n.xtype?i.$r&&(i.$r[e]=t):(record=a.getItem(o.id),record&&(record[e]=t,a.updateItem(o.id,record.data))))},refresh:function(){var e=this.data;this.store.grid.$dx.updateItem(e.id,e)},updatePull:function(e){e[this.data.id]=this},expand:function(e,t,i){var o=this,n=o.store.grid.$dx,a=t?new IG$.callBackObj(i,t):0,s=o.data.$count,r=1,l=o.childNodes;0==o.data.$count&&(o.data.$count=-1),o.store._did!=o.data.id&&(o.store._did=o.data.id,n.isBranchOpen(o.data.id)&&(s<1?n.close(o.data.id):(r=0,a&&a.execute())),r&&(l&&l.length&&"load"!=l[0].data.type?(n.open(o.data.id,!0),a&&a.execute()):(o.store.__cb=a,n.open(o.data.id,!0))),e&&l&&l.length&&$.each(l,(function(o,n){n.childNodes&&n.childNodes.length&&n.expand(e,t,i)})),o.store._did=null)},_doexp:function(){var e=this,t=e,i=0,o=e.data.id,n=e.store.grid;(-1===t.$count||1==t.$count&&e.childNodes[0].data._loading)&&(i=1),i&&(n.store&&(n.store._clearChild(e),delete t._loading,!1!==n.fireEvent.call(n,"beforeitemexpand",e)&&n.store.proxy&&"ajax"==n.store.proxy.type&&n.store._loadNodeData.call(n.store,e)),t.webix_kids=!1,n.updateItem(o,t.data))},collapse:function(){this.store.grid.$dx.close(this.data.id)},isExpanded:function(){return this.store.grid.$dx.isBranchOpen(this.data.id)},isRoot:function(){return this.root||!1},isLeaf:function(){return this.data.leaf},removeAll:function(){var e=this.data,t=this.store.grid.$dx;this.store.grid.$dx.getItem(e.id),$.each(this.childNodes,(function(e,i){t.remove(i.data.id)})),this.childNodes=[],this.firstChild=this.childNodes[0]},insertChild:function(e,t){var i=this,o=[],n=i.store;"object"==typeof t&&t.length?$.each(t,(function(e,t){var i=null;i=t.__rec?t:new $s.record(t,null,n),o.push(i)})):t.__rec?(t.store=n,o.push(t)):(r=new $s.record(t,null,n),o.push(r)),n._insertNode.call(n,o,i,e),i.firstChild=i.childNodes[0],i.data.leaf=!1},appendChild:function(e){var t,i=this,o=[],n=i.store;i.childNodes&&i.childNodes[0]&&i.childNodes[0].data._loading&&i.removeChild(i.childNodes[0]),"object"==typeof e&&e.length?$.each(e,(function(e,t){var i=null;i=t.__rec?t:new $s.record(t,null,n),o.push(i)})):e.__rec?(e.store=n,o.push(e)):(t=new $s.record(e,null,n),o.push(t)),n._appendNode.call(n,o,i),i.firstChild=i.childNodes[0],i.data.leaf=!1},indexOf:function(e){var t,i=-1,o=this.childNodes;if(o&&o.length)for(t=0;t<o.length;t++)if(o[t].data.id==e.data.id){i=t;break}return i},removeChild:function(e){var t,i=this,o=i.store.grid.$dx,n=i.childNodes;for(o.remove(e.data.id),t=0;t<n.length;t++)if(n[t].data.id==e.data.id){n.splice(t,1);break}i.firstChild=n[0]},hasChildNodes:function(){return!!this.store.grid.$dx.getFirstChildId(this.get("id"))},$init:function(){var e=this.data;delete e.id,delete e.selected}},$s.dstore=$s.extend($s.object,{initComponent:function(){var e=this,t=e.data;e.$data=t,e.data={items:[],length:0},e.model=$s.record,$s.dstore.superclass.initComponent.call(e)},_record:function(e){return new $s.record(e,null,this)},loadData:function(e){var t,i,o,n=this,a=n.grid,s=[];if(n._pull={},e&&("combobox"==a.xtype?(i=a.displayField,o=a.valueField,$.each(e,(function(e,t){var a=IG$.copyObject(t),r=n._record(a);r.$r=IG$.copyObject(t),r.data.id||(r.data.id=t[o]),r.data.value=a[i],delete r.data.label,s.push(r)}))):$.each(e,(function(e,t){var i=n._record(t);s.push(i)}))),a&&a.$dx){if(t=a.$dx,"combobox"==a.xtype){var r=[];$.each(s,(function(e,t){r.push(t.data)})),t.define("options",r),t.refresh()}else t.clearAll(),a.selModel.clear(),t.parse(s,"ildr");n._$d=null}else n._$d=e;$.each(s,(function(e,t){n._pull[t.data.id]=t,"combobox"!=a.xtype&&t.data.selected&&(a.selModel.selected.map[t.data.id]=1,a.selModel.selected.items.push(t),a.selModel.selected.length++)})),n.data={items:s,length:s.length}},add:function(e){var t=this;t.grid;return t.insert(t.data.items.length,e)},insert:function(e,t){var i,o,n,a,s=this;if(s._pull=s._pull||{},!t.__rec&&"object"==typeof t&&t.length)$.each(t,(function(t,i){var o=i.__rec?i:s._record(i);o.$init(),o.store=s,s.grid.$dx.add(o.data,e+t),s.data.items.splice(e+t,0,o),s._pull[o.data.id]=o}));else{if(t.__rec?(delete(o=IG$.copyObject(t.data)).id,delete o.checked,delete o.selected):o=t,n=s.grid.$dx,(i=s._record(o)).$init(),i.store=s,s.data.items.splice(e,0,i),"combobox"==s.grid.xtype){i.$r=IG$.copyObject(o),a=s.data.items;var r=[];$.each(a,(function(e,t){r.push(t.data)})),n.define("options",r),n.refresh()}else n.add(i.data,e);s._pull[i.data.id]=i}return s.$validate(),i},indexOf:function(e){var t,i=-1,o=me.data?me.data.items:null;if(o)for(t=0;t<o.length;t++)if(o[t]==e){i=t;break}return i},_$filters:[],filter:function(){var e,t=arguments;2==t.length&&(e={dataIndex:t[0],operator:"=",value:t[1]},this.addFilter(e))},removeFilter:function(e){var t,i,o,n;for(t=0;t<this._$filters.length;t++){if(n=0,(o=this._$filters[t]).operator==e.operator)if("string"==typeof o.dataIndex&&o.dataIndex==e.dataIndex)n=1;else if("object"==typeof o.dataIndex&&"object"==typeof e.dataIndex&&o.dataIndex.length==e.dataIndex.length)for(n=1,i=0;i<o.dataIndex.length;i++)if(o.dataIndex[i]!=e.dataIndex[i]){n=0;break}if(n){this._$filters.splice(t,1);break}}this._updateFilter()},addFilter:function(e){var t=this;t.removeFilter(e),t._$filters.push(e),t._updateFilter()},clearFilter:function(){var e=this,t=e.grid;e._$filters=[],"combobox"==t.xtype?e._updateFilter():t.$dx.filter("")},_updateFilter:function(){var e=this,t=e.grid,i=t.$dx;if("combobox"==t.xtype){var o=e.data.items,n=[];$.each(o,(function(t,i){var o,a,s,r,l,d=i.data,c=!1;if(e._$filters.length)for(o=0;o<e._$filters.length;o++){for(r="string"==typeof(s=e._$filters[o]).dataIndex?[s.dataIndex]:s.dataIndex,a=0;a<r.length;a++){switch(l=d[r[a]],s.operator){case"=":c=l!=s.value;break;case"like":c=!(l&&"string"==typeof l&&l.toLowerCase().indexOf(fval.toLowerCase())>-1)}if(c)break}if(c)break}0==c&&n.push(d)})),i.define("options",n),i.refresh()}else i.filter((function(t){var i,o,n,a,s,r,l,d=!1;if(!e._$filters.length)return!0;for(i=0;i<e._$filters.length;i++){for(r="string"==typeof(n=e._$filters[i]).dataIndex?[n.dataIndex]:n.dataIndex,l=0,s=n.value||"",o=0;o<r.length;o++){switch(a=t[r[o]],n.operator){case"=":l=a==n.value;break;case"like":l=!(!a||"string"!=typeof a)&&a.toLowerCase().indexOf(s.toLowerCase())>-1}if(l)break}if(!(d=l))break}return d}))},remove:function(e){var t,i=this,o=i.data.items,n=i.grid;for(t=0;t<o.length;t++)if(o[t].data.id==e.data.id){o.splice(t,1);break}"combobox"==n.xtype?n.$dx.getList().remove(e.data.id):n.$dx.remove(e.data.id),delete i._pull[e.data.id],delete n.getSelectionModel().selected.map[e.data.id],n.$validSel(),this.$validate()},removeAt:function(e){var t=this,i=t.grid.$dx,o=t.data.items,n=i.getIdByIndex(e);for(let e=0;e<o.length;e++)if(o[e].data.id==n){rec=o[e];break}rec&&t.remove(rec)},indexOf:function(e){return this.grid.$dx.getIndexById(e.data.id)},getCount:function(){return this.data.items.length},getNode:function(e){var t=this.data.items[e];return this.grid.$dx.getItemNode(t.data.id)},getAt:function(e){var t=this.grid.$dx.getIdByIndex(e);return this._pull[t]},getRootNode:function(){return this.root},setRootNode:function(e){var t=this;return t.root=t._record(e),t.root.webix_kids=!0,t.root.data.webix_kids=!0,t.root.root=t.root.data.root=!0,t.root.data.id=0,t.root.data.iconcls&&(t.root.data.icon=" "+t.root.data.iconcls),t._pull={},t._refreshGrid(),t.root},_refreshGrid:function(){var e,t=this,i=t.grid;i&&i.$dx&&t.root?((e=t.grid.$dx).clearAll(),e.parse([t.root],"ildr"),t.root.updatePull(t._pull),t.root.data.children&&t.root.data.children.length&&t._buildChild(t.root.data.children,t.root)):i&&t._$d&&t.loadData(t._$d),t.$validate()},_buildChild:function(e,t){var i=this,o=[];$.each(e,(function(e,t){var n=new $s.record(t,null,i);o.push(n)})),delete t.children,i._appendNode(o,t)},clearData:function(){this.loadData([])},removeAll:function(){this.clearData()},_loadNodeData:function(e){var t,i,o=this,n=o.proxy;if(i=o.fireEvent("beforeload",o,{node:e}),t=n.extraParams,0!=i){var a=new IG$._rpc$;a.init(o,{ack:t.ack,payload:t.payload,mbody:t.mbody},o,(function(t){var i,o=this,n={node:e,setCompleted:function(){},setSuccessful:function(){}};o.proxy.processResponse(!0,n,null,t),i=n.resultSet.records,o._appendNode(i,e),o.fireEvent("itemexpand",e,{node:e}),o.__cb&&(o.__cb.execute(),o.__cb=null)}),!1),a.send()}},_clearChild:function(e){var t=this,i=t.grid.$dx;e.data;$.each(e.childNodes,(function(e,o){i.remove(o.data.id),delete t._pull[o.data.id]})),e.childNodes=[],e.firstChild=null},_appendNode:function(e,t){var i,o,n,a,s=this,r=s.grid.$dx;for(delete t.webix_kids,delete t.data.webix_kids,t.childNodes=t.childNodes||[],o=e.length-1;o>=0;o--){if(e[o].store||(e[o].store=s),!e[o].store)throw"store bind error";e[o].parentNode=t,(e[o].data.iconcls||e[o].data.iconCls)&&(e[o].data.icon=" "+(e[o].data.iconcls||e[o].data.iconCls)),e[o].data.expanded&&(s.grid&&(a=s.grid.fireEvent.call(s.grid,"beforeitemexpand",s.root)),!1!==a&&(e[o].data.open=!0)),r.add(e[o].data,0,t.data.id),e[o].data.children?(n=[],$.each(e[o].data.children,(function(e,t){var i=new $s.record(t,null,s);n.push(i)})),delete e[o].data.children,s._appendNode(n,e[o])):0==e[o].data.leaf&&(i=new $s.record({is_loading:1}),e[o].childNodes=[i],i.data._loading=1,r.add(e[o].childNodes[0].data,0,e[o].data.id)),s._pull[e[o].data.id]=e[o],t.childNodes.splice(0,0,e[o]),e[o].data.open&&!1!==a&&s.grid&&s.grid.fireEvent.call(s.grid,"itemexpand",e[o],{node:t})}t.firstChild=t.childNodes[0],t.data.leaf=!1},_insertNode:function(e,t,i){var o,n,a,s=this,r=s.grid.$dx,l=0;for(delete t.webix_kids,delete t.data.webix_kids,t.childNodes=t.childNodes||[],n=e.length-1;n>=0;n--){if(e[n].store||(e[n].store=s),!e[n].store)throw"store bind error";e[n].parentNode=t,(e[n].data.iconcls||e[n].data.iconCls)&&(e[n].data.icon=" "+(e[n].data.iconcls||e[n].data.iconCls)),r.add(e[n].data,i+l++,t.data.id),e[n].data.children?(a=[],$.each(e[n].data.children,(function(e,t){var i=new $s.record(t,null,s);a.push(i)})),delete e[n].data.children,s._appendNode(a,e[n])):0==e[n].data.leaf&&(o=new $s.record({is_loading:1}),e[n].childNodes=[o],o.data._loading=1,r.add(e[n].childNodes[0].data,0,e[n].data.id)),s._pull[e[n].data.id]=e[n],t.childNodes.splice(i,0,e[n])}t.firstChild=t.childNodes[0],t.data.leaf=!1},getReader:function(){var e=this;return e.__reader||(e.__reader=new $s.reader(e.proxy.reader),e.__reader.model=$s.record),e.__reader},extractResponseData:function(e){return{responseXML:e}},afterRequest:function(e,t){},filterBy:function(e){var t=this;t.grid.$dx.filter((function(i){var o=t._pull[i.id];return e.apply(t,[o])}))},$validate:function(){this.grid;var e=this.data;e.length=e.items.length}}),$s.column=$s.extend($s.object,{show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},setVisible:function(e){var t,i=this,o=i.$g.$dx;o&&(-1==(t=o.getColumnIndex(i.$col.id))&&e||t>-1&&!e)&&o[e?"showColumn":"hideColumn"](i.$col.id)},setText:function(e){}}),$s.tabbutton=$s.extend($s.object,{show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},setVisible:function(e){var t=this.tabbar.$mt;t&&t[e?"showOption":"hideOption"](this.tabid)}}),$s.base=$s.extend($s.object,{initComponent:function(){var e=this;if(e.body=new $s.body(e),e.el=new $s.body(e,1),e.createComponent(),$s.base.superclass.initComponent.call(e),e.renderTo){var t,i=e.updateViewProp(e);i.container=e.renderTo&&e.renderTo.length&&!e.renderTo.tagName?e.renderTo[0]:e.renderTo,i.__container=e.renderTo,i.autofit=e.autofit,i.resize=!1,i.gravity=1,i.autofocus=!1,i.modal=!1,i.zIndex="auto",i.move=e.move,i.head=e.title||!1,(t=webix.ui(i))&&"string"==typeof t&&(t=$$(t)),e._postAddView(e,t,null,!0,null,0,0,0,null)}},getView:function(){return this},refresh:function(){},getNode:function(e){return this.store.getNode(e)},addDock:function(e){var t=this["$dc"+("top"==e.dock?1:2)];this.add(e,1,t)},addMenu:function(e,t){e.__mbase||(e=this.updateComponentClass(e)),t&&this._dMenu(e)},_dMenu:function(e){var t;"string"==typeof(t=e._createMenuUI.call(e,1))&&(t=$$(t)),t&&(this.$pm={$dx:t,comp:e})},callParent:function(){var e=this.callParent.caller;return e.$owner=e.$owner||this.constructor(),e&&(e.$previous||(e=e.$owner?e:e.caller)&&e.$owner.superclass[e.$name]).apply(this,args||noArgs)},onAdd:function(e,t){var i,o,n,a,s=this,r=s.getTabBar();if(r)r.validate();else if("tabpanel"==s.xtype&&(o=s.$mt)){for(s.$tid=s.$tid||0,a=s._items,i=0;i<a.length;i++)a[i].tab||!0===a[i].hidden||(n={id:s.$tid++,name:a[i].title,value:"<span>"+IG$.hEE(a[i].title)+"</span>",close:a[i].closable,$c:a[i]},a[i].iconCls&&(n.icon=" icon-c-fix "+a[i].iconCls),a[i].tab=new $s.tabbutton({tabbar:s,ownerCt:a[i],tabid:n.id}),o.addOption(n,0==i));o.refresh()}},onRemove:function(e,t){this.remove(e,t)},add:function(e,t,i){var o=this;if("object"==typeof e&&e.length)return o.suspendLayouts(),$.each(e,(function(e,n){o.add(n,t,i,!0)})),o.resumeLayouts(),void(o.$dx&&o._adjust(o._dx,!0));var n=i||o.$dx;return e.ownerCt=o,o.fireEvent("beforeadd",o,e),e.__mbase||(e=o.updateComponentClass(e)),o.instance&&!e.instance&&(e.instance=o.instance),t?o._dockedItems.push(e):o._items.push(e),e.parent&&"toolbar"==e.parent.xtype&&e.parent.show(!0),o.items.length=o._items.length,i?(i.show(),o.addViewItem(e,o,1,i)):n&&o.addViewItem(e,o,void 0,void 0),e},remove:function(e,t,i){var o,n=this,a=(n.ownerCt,n._items);if(!1!==n.fireEvent("beforeclose",n)){for(o=0;o<a.length;o++)if(a[o]==e){a.splice(o,1);break}n.items.length=a.length,!1!==t&&"tabpanel"==n.xtype&&n.$dx?n.$dx.removeView(e.$sx||e.$ex):!1!==t&&n.$dx&&e.$ex?e.$ex._parent_cell==n.$dx?n.$dx.removeView(e.$ex):e.$ex._parent_cell.removeView(e.$ex):e.hide(),e.fireEvent.call(e,"close",e,i)}},removeAll:function(){var e,t=this._items;for(e=t.length-1;e>=0;e--)t[e].hide(),t.splice(e,1);this.items.length=t.length},getValue:function(){var e,t=this,i=t.xtype;return"radiogroup"==i?e=t.getRadioGroupValue():"checkboxgroup"==i?e=t.getCheckGroupValue():"combobox"==i?e=t.getComboValue():"htmleditor"==i?e=t.sview[1].getValue():"checkbox"==i?(e=!!t.$dx&&t.$dx.getValue(),e=!(t.inputValue!==e&&!e)):e="textarea"==i?t.$txtarea&&t.$txtarea.getValue?t.$txtarea.getValue():null:t.$dx&&t.$dx.getValue?t.$dx.getValue():null,t._fasl&&(e=IG$.hEE3(e)),e},getGroupValue:function(){var e,t=this;return"radiogroup"==t.xtype&&(e=t.getRadioGroupValue())&&(e=e[t.$options[0].name]),e},getHTMLValue:function(){var e=null;return"htmleditor"==this.xtype&&(e=this.sview[2].getValue()),e},getComboValue:function(){var e,t,i,o=this,n=o.$dx.getValue();for(t=0;t<o.store.data.items.length;t++)if((i=o.store.data.items[t]).data.value==n||i.data.id==n){e=i.$r[o.valueField];break}return e},getRadioGroupValue:function(e){var t,i=this.$dx,o=e||i.getValue(),n=this.$options;e={};for(t=0;t<n.length;t++)if(n[t].value==o){e[n[t].name]=n[t].inputValue;break}return e},getCheckGroupValue:function(){var e,t,i,o={},n=this._items;for(e=0;e<n.length;e++)i=n[e].name,t=n[e].inputValue,n[e].$dx.getValue()&&(o[i]=o[i]||[],o[i].push(t));return o},setReadOnly:function(e){this.$dx[e?"disable":"enable"]()},setValue:function(e){var t=this;t.$dx&&(t._fasl&&(e=IG$.hEE2(e)),"combobox"==t.xtype?t.setComboValue(e):"checkboxgroup"==t.xtype?t.setCheckGroupValue(e):"radiogroup"==t.xtype?t.setRadioGroupValue(e):"htmleditor"==t.xtype?t.sview[1].setValue(e):"checkbox"==t.xtype?(t.inputValue?t.$dx.setValue(t.inputValue==e||!0===e):t.$dx.setValue(e),t.$dx.refresh()):"textarea"==t.xtype?t.$txtarea&&(t.$txtarea.setValue(void 0===e||null==e?"":e),t.$txtarea.refresh()):(t.$dx.setValue(void 0===e||null==e?"":e),t.$dx.refresh()))},setHTMLValue:function(e){var t=null;return"htmleditor"==this.xtype&&(t=this.sview[2].setValue(e)),t},setComboValue:function(e){var t,i,o,n=this,a=n.valueField;for(t=0;t<n.store.data.items.length;t++)if((o=n.store.data.items[t]).data.value==e||o.$r[a]==e){i=o;break}i&&(n.$dx.setValue(i.get("id")),n.$dx.refresh())},setCheckGroupValue:function(e){var t,i,o,n,a,s,r=this._items;for(t=0;t<r.length;t++){if(s=r[t].name,n=r[t].inputValue,o=!1,a=e[s])for(i=0;i<a.length;i++)if(a[i]==n){o=!0;break}r[t].$dx.setValue(o)}},setRadioGroupValue:function(e){var t,i,o,n,a,s=this,r=s.$options;for(t=0;t<r.length;t++)if(a=r[t].name,o=r[t].inputValue,i=!1,n=e[a],(e==o||n&&n==o)&&(i=!0),i){s.$dx.setValue(r[t].value),s.$dx.refresh();break}},getStore:function(){return this.store},getSelectionModel:function(){return this.selModel||(this.selModel=new $s.selModel({})),this.selModel.ownerCt=this,this.selModel},$validSel:function(){var e=this;setTimeout((function(){var t=e.getSelectionModel.call(e);t.$validate.call(t)}),0)},select:function(e){var t=this,i=t.$dx;t.store;i&&("combobox"==t.xtype?t.setComboValue(e):e.get&&i.select(e.get("id")))},clearInvalid:function(){var e=this.$dx;$(e.$view).removeClass("igc-invalid")},markInvalid:function(e){var t=this,i=t.$dx;$(i.$view).addClass("igc-invalid"),clearTimeout(t.__mtimer);for(var o,n=t.ownerCt;n;){if(n.autoScroll){o=n;break}n=n.ownerCt}if(o&&o.$sx&&o.$sx.scrollTo){var a=$(i.$view).offset(),s=$(o.$sx.$view).offset();o.$sx.scrollTo(0,a.top-s.top)}t.__mtimer=setTimeout((function(){t.clearInvalid()}),5e3)},setInvalid:function(e){this.markInvalid(e)},isvalid:function(){var e=this,t=!0;return(e.required||0==e.allowBlank)&&(e.clearInvalid(),e.getValue()||(t=!1,e.markInvalid())),1==t&&e.items&&e.items.items&&$.each(e.items.items,(function(e,i){i.isvalid()||(t=!1)})),t},setTitle:function(e){var t,i,o,n=this;"window"==n.xtype||"popup"==n.xtype?(t=(o=n.$ex.getHead()).getChildViews())&&t.length&&t[0].setHTML(e):n.ownerCt&&n.ownerCt.tabBar?(n.title=e,n.ownerCt.tabBar.validate()):n.$ex&&(n.title=e,(i=n.$ex.getChildViews())&&i.length>1&&(o=i[0].getChildViews())&&o.length&&"label"==o[0].config.view&&(o[0].show(),o[0].setValue(e),o[0].refresh()))},hideTitle:function(){this.$ex&&(views=this.$ex.getChildViews(),views&&views.length>1&&(h=views[0].getChildViews(),h&&h.length&&"label"==h[0].config.view&&(h[0].hide(),h[0].refresh())))},getHeader:function(){var e,t,i=this;return"window"==i.xtype||"popup"==i.xtype?t=i.$ex.getHead():i.$ex&&(e=i.$ex.getChildViews())&&e.length>1&&(t=e[0]),t},setFieldLabel:function(e){var t=this.$dx;"fieldcontainer"==this.xtype||t&&t.define&&t.refresh&&(t.define("label",e),t.refresh())},setFieldLabelStyle:function(e){var t,i=this,o=i.$dx.$view,n=".webix_inp_label",a=i._fstyle,s=i.xtype;if(o){switch(s){case"checkboxgroup":case"fieldcontainer":n=".webix_el_label"}0==(t=$(n,o)).length?setTimeout((function(){i.setFieldLabelStyle(e)}),100):(a&&t.removeClass(a),e&&t.addClass(e),i._fstyle=e)}},setText:function(e){var t=this,i=t.$dx;i&&("button"==t.xtype?(i.define("label",e),t.$w?i.refresh():(i.define("autowidth",!0),i.refresh(),i.resize())):(i.setValue(e),i.refresh(),i.resize()))},setIconCls:function(e){var t=this.$dx;t&&"button"==this.xtype&&(t.define("icon"," icon-c-fix "+e),t.refresh())},focus:function(){var e,t=this,i=t.$dx;"textarea"==t.xtype&&(i=t.$txtarea),i&&i.focus&&(i.focus(),i.getInputNode&&(e=i.getInputNode())&&e.focus&&e.focus())},$define:function(e,t){var i=this.$dx;i&&i.define&&(i.define(e,t),i.refresh())},toggle:function(e){var t=this,i=t.$dx;i&&i.toggle&&(t._btn_state&&!e||!t._btn_state&&e)&&(t._btn_state=e,i.toggle())},setTooltip:function(e){},setLoading:function(e){IG$.v$pnl.prototype.setLoading.call(this,e)},updateComponentClass:function(e){var t=this;return"-"==e||" "==e?e={xtype:"split"}:"->"==e&&(e={xtype:"spacer"}),e.defaults&&e.items&&$.each(e.items,(function(t,i){$s.defaults(i,e.defaults,null,!1)})),e.xtype||(t.defaultType?e.xtype=t.defaultType:t.defaults&&t.defaults.xtype?e.xtype=t.defaults.xtype:e.autoLoad&&e.autoLoad.url?e.xtype="html":e.ownerCt&&"toolbar"==e.ownerCt.xtype?e.xtype="button":e.ownerCt&&"menu"==e.ownerCt.xtype?e.xtype="menuitem":e.ownerCt&&"checkboxgroup"==e.ownerCt.xtype&&(e.xtype="checkbox")),e.xtype=e.xtype||"container","grid"==e.xtype?e.xtype="gridpanel":"form"==e.xtype&&(e.xtype="formpanel"),t.instance&&(e.instance=t.instance),(e=t.createClassComp(e)).ownerCt=t,e},createComponent:function(){var e,t,i,o,n=this,a=n.items,s=[];if(n._items=[],n.items={items:n._items},n._dockedItems=[],n.tbar)if("object"==typeof n.tbar&&n.tbar.length){let e=n.tbar[0];"toolbar"==e.xtype?(e.dock="top",e.tb_type="t_top",e.border=0,e.layout={type:"hbox"},s.push(e)):s.push({xtype:"toolbar",dock:"top",tb_type:"t_top",border:0,layout:{type:"hbox"},items:n.tbar})}else $s.apply(n.tbar,{xtype:"toolbar",border:0,tb_type:"t_top",layout:{type:"hbox"},dock:"top"},null,!0),s.push(n.tbar);if(n.bbar)if("object"==typeof n.bbar&&n.bbar.length){let e=n.bbar[0];"toolbar"==e.xtype?(e.dock="bottom",e.border=0,e.tb_type="t_bottom",e.layout={type:"hbox"},s.push(e)):s.push({xtype:"toolbar",dock:"bottom",tb_type:"t_bottom",items:n.bbar})}else $s.apply(n.bbar,{xtype:"toolbar",tb_type:"t_bottom",dock:"botton"},null,!0),s.push(n.bbar);if(n.buttons&&n.buttons.length){var r=0;for(i=0;i<n.buttons.length;i++)if("->"==n.buttons[i]){r=1;break}r||n.buttons.splice(0,0,"->");var l={xtype:"toolbar",dock:"bottom",tb_type:"buttons",items:n.buttons};s.push(l)}if(n.dockedItems&&n.dockedItems.length)for(i=0;i<n.dockedItems.length;i++)n.dockedItems[i]&&(n.dockedItems[i].layout={type:"hbox"},s.push(n.dockedItems[i]));if(n.dockedItems={items:n._dockedItems},n.layout&&"string"==typeof n.layout?n.layout={type:n.layout}:n.layout||("checkboxgroup"==n.xtype?n.layout={type:n.vertical?"vbox":"hbox"}:n.layout={type:"fit"}),n.store&&(n.store.__mbase||(n._store=n.store,n._store.xtype=n._store.xtype||"store",n._store.grid=n,n.store=n.createClassComp(n._store)),n.store.root?n.store.setRootNode(n.store.root):n.root&&n.store.setRootNode(n.root)),n.html&&(n.xtype="html"),"viewport"===n.xtype){t={type:"line",padding:0,margin:0,autowidth:!0,autoheight:!0},n.id&&document.getElementById(n.id)?t.container=n.id:n.container&&(t.container=n.container);var d,c,u=$(document);u.width(),u.height();webix.ui.fullScreen(),t=n.updateViewProp(n,t),e=webix.ui(t),webix.event(window,"resize",(function(){n.validateLayout()})),n._resizeObserver=new ResizeObserver((function(){var e=t.container.clientWidth,i=t.container.clientHeight;e==d&&c==i||n.validateLayout(),d=e,c=i})).observe(t.container),n._adjust(e),n.$ex=e,n.updateViewElement(e),n.rendered=1}if(a&&a.length&&(n.suspendLayouts(),$.each(a,(function(e,t){n.add(t,void 0,void 0)})),n.resumeLayouts()),"window"!=n.xtype&&"popup"!=n.xtype&&"panel"!=n.xtype&&"gridpanel"!=n.xtype&&"treepanel"!=n.xtype||!s.length||$.each(s,(function(e,t){n.instance&&(t.instance=n.instance),n.addDock(t)})),(n.ownerCt&&n.ownerCt.$dx&&t||"window"==n.xtype||"popup"==n.xtype)&&n.addViewItem(n,n.ownerCt,!1,null),("gridpanel"==n.xtype||"treepanel"==n.xtype||"dataview"==n.xtype)&&(o=n.selModel,(o=n.selModel=o?new $s.selModel(o):n.getSelectionModel()).selType=o.selType||n.selType,o.ownerCt=n,n.instance&&(o.instance=n.instance),!o.mode)){if(n.store&&n.store.fields&&n.store.fields.length)for(i=0;i<n.store.fields.length;i++)if("selected"==n.store.fields[i]){o.mode="MULTI";break}if(!o.mode)switch(o.selType){case"checkboxmodel":o.mode="MULTI";break;case"treemodel":o.mode="SINGLE"}}n.menu&&("menuitem"!=n.xtype?n.addMenu(n.menu,0):(n.submenu=[],"object"==typeof n.menu&&"menu"==n.menu.xtype?n.menu=n.updateComponentClass(n.menu):n.menu=n.updateComponentClass({xtype:"menu",items:n.menu})))},createClassComp:function(e){var t=$s[e.xtype];if(!t)throw"xtype error : "+e.xtype;return e=new t(e)},setPosition:function(e,t){var i=this,o=i.$ex;o&&(o.setPosition?o.setPosition(e,t):(o.define("top",t),o.define("left",e),o.refresh())),i.fireEvent("move",i,e,t,null)},isVisible:function(){return!(!this.$ex||!this.$ex.isVisible)&&this.$ex.isVisible()},$$getroot:function(e){for(var t=e.ownerCt;t&&t.ownerCt;)t=t.ownerCt;return t},$$do_adj:function(e,t){var i=this;t||(i._adjust(i.$ex,!0),i.$sx&&i._adjust(i.$sx,!0))},setVisible:function(e,t){var i,o,n,a=this,s=e?"show":"hide";if(!(!t&&!a.hidden&&e||a.hidden&&!e)&&(a.hidden=!e,a.$ex&&a.$ex.isVisible&&(n=a.$ex.isVisible()),a.$sx&&a.$sx.isVisible&&(n=a.$sx.isVisible()),n!=e||!0===t)){if(i=a.ownerCt){a.$ex&&a.$ex[s](void 0,void 0,void 0,!0),a.$sx&&a.$sx[s](void 0,void 0,void 0,!0),i.$$do_adj(e,t);var r=a.$$getroot(i);r&&r.$$do_adj(e,t)}else a.$ex&&a.$ex[s](void 0,void 0,void 0),a.$sx&&a.$sx[s](void 0,void 0,void 0);if(i&&("menu"==i.xtype||"menuitem"==i.xtype)&&(o=i.$px)){var l=o.getMenu(a._menukey);l&&l[m.hidden?"hide":"show"]()}i&&i.$ex&&i._vsize.call(i,0,0,1)}},expand:function(){var e=this;"fieldset"==e.xtype&&e.checkboxCmp&&e.checkboxCmp.setValue(!0)},collapse:function(){var e=this;"fieldset"==e.xtype&&e.checkboxCmp&&e.checkboxCmp.setValue(!1)},setDisabled:function(e){this.$dx&&this.$dx[e?"disable":"enable"]()},setEnabled:function(e){this.$dx&&this.$dx[e?"enable":"disable"]()},show:function(e,t){var i=this;"window"==i.xtype||"popup"==i.xtype?setTimeout((function(){if(i.hidden=!1,i.$ex.show(),t){var e,o,n,a,s,r=i.$ex,l=t.x,d=t.y,c=t.ctrl?$(t.ctrl):null,u=i.width,p=i.height;c&&(n=c.offset(),e=c.width(),o=c.height(),a=$(document).width(),s=$(document).height(),l=n.left+e+u<a?n.left+e:n.left-u>0?n.left-u:(a-e)/2,d=n.top+o+p<s?n.top+o:n.top-p>0?n.top-p:(s-o)/2),r.setPosition(l,d)}i.rendered=1,i.body.updateDom.call(i.body),i.el.updateDom.call(i.el),i.fireEvent("afterrender",i),"window"==i.xtype&&i._setFocus()}),10):i.setVisible(!0,e)},_setFocus:function(){var e,t,i=this;if(i._items&&i._items.length)for(e=0;e<i._items.length;e++)if(!(t=i._items[e]).hidden){if("textfield"==t.xtype||"combobox"==t.xtype||"textarea"==t.xtype)return t.focus.call(t),!0;if(("fieldset"==t.xtype||"panel"==t.xtype||"container"==t.xtype||"form"==t.xtype||"tabpanel"==t.xtype)&&t._setFocus.call(t))return t.focus&&t.focus(),!0}},hide:function(e){this.setVisible(!1,e)},getWidth:function(){return this.$width},getHeight:function(){return this.$height},setWidth:function(e){this.changeSize(e,"width")},setHeight:function(e){this.changeSize(e,"height")},setSize:function(e,t){var i,o=this,n=o.$dx,a=o.$ex,s=0;n&&(a.$width,a.$height,a.define("width",e),a.define("height",t),a.resize(),o.title&&a.getChildViews&&(i=o.$ex.getChildViews())&&i.length>1&&(t=i[0].getChildViews())&&t.length&&"label"==t[0].config.view&&(s=t[0].$height||0),"window"!=o.xtype&&(n.define("width",e),n.define("height",t-s),n.resize()),o.ownerCt?o.ownerCt._vsize.call(o.ownerCt):o._vsize())},changeSize:function(e,t){var i=this,o=i.$dx,n=i.$ex;if(o){n.define(t,e),n.resize();var a,s,r=0;"window"!=i.xtype&&"height"==t&&i.title&&n.getChildViews&&(s=i.$ex.getChildViews())&&s.length>1&&(a=s[0].getChildViews())&&a.length&&"label"==a[0].config.view&&(r=a[0].$height||0),o.define(t,e-r),o.resize(),i.ownerCt&&i.ownerCt._vsize.call(i.ownerCt)}},close:function(e){var t,i=this,o=i.$ex;if(o)if(i.ownerCt&&i.ownerCt.tabBar&&"tabbar"==i.ownerCt.tabBar.xtype&&i.tab)(t=i.ownerCt.tabBar).removeTab.call(t,i.tab.tabid,!0);else{if(!1===i.fireEvent("beforeclose",i))return;o.close&&o.close(),o.destructor(),i.$ex=null,i.fireEvent("close",i,e)}},doLayout:function(){this._adjust(this.$ex)},doComponentLayout:function(){},getColumnIndex:function(e){var t,i=-1,o=this;if("selected"==e.column&&o.$7f)i=0;else{for(t=0;t<o.columns.length;t++)if(o.columns[t].dataIndex==e.column){i=t;break}i>-1&&o.$7f&&(i+=1)}return i},updateViewProp:function(e,t){var i,o,n,a,s,r,l,d,c,u,p=e;e._iconfig;if(t=t||{},!e.accl||!1===ig$.features[e.accl]){switch(e.width&&0==isNaN(e.width)?t.width=e.width:e.$w&&0==isNaN(e.$w)&&(t.width=e.$w),e.height&&0==isNaN(e.height)?t.height=e.height:e.$h&&0==isNaN(e.$h)&&(t.height=e.$h),e.$v&&$s.apply(t,e.$v,null,!0),e.minHeight&&(t.minHeight=e.minHeight),e.flex&&(t.gravity=e.flex),t.hidden=e.hidden,e.bodyCls&&(t.css=e.bodyCls),e.autoScroll&&(t.scroll=!0),i=t,o=t,e.xtype){case"fieldcontainer":t.adjust=!0;case"container":a=1,t.borderless=!0;break;case"panel":case"formpanel":t.view="form",t.borderless=!0,l=1;case"viewport":t.borderless=!0,a=1,"panel"==e.xtype&&e.renderTo&&!1!==e.frameHeader&&(0,a=1,t.view="wpanel",t.modal=!1,t.move=!0,t.resize=!0,t.autofocus=!0,e._window=1,t.container=e.renderTo,t.position=function(t){t.top=e.y,t.left=e.x},t.on=t.on||{},t.on.onViewMoveStart=function(){return e.fireEvent("startmove",e)},t.on.onViewMove=function(t,i){var o=e.$ex.getNode().offsetTop,n=e.$ex.getNode().offsetLeft;e.fireEvent.call(e,"move",e,n,o,i)},t.on.onViewMoveEnd=function(){},t.on.onViewResize=function(){});break;case"window":case"popup":a=1,l=1,t.view=e.xtype,t.modal=void 0===e.modal||e.modal,t.move=void 0===e.move||e.move,t.resize=void 0===e.resize||e.resize,t.autofocus=!0,t.autofit=!1,e.position?(t.top=e.position.top,t.left=e.position.left):t.position="center",t.on=t.on||{},t.on.onHide=function(t){e.fireEvent.call(e,"hide",e,t)};break;case"treepanel":r=1,l=1,t.type=e.border?"line":"clear",t.rows=[{type:"header",height:$s.__hh,padding:0,hidden:!p._headerVisible(),template:e.title,borderless:!0},{view:"layout",animate:!1,rows:[{view:"treetable",_mx:1,select:!0,tooltip:!0===e.tooltip,resizeColumn:{size:6,headerOnly:!0},multiselect:!(!e.selModel||"MULTI"!=e.selModel.mode),padding:0,margin:0,scrollX:!0,columns:[],css:"igc-treeview",hover:"igc-grid-row-hover",dragscroll:!0,borderless:!e.border,header:!e.hideHeaders}]}],n=t.rows[1],o=i=t.rows[1].rows[0];break;case"gridpanel":r=1,l=1,t.rows=[{type:"header",height:$s.__hh,padding:0,hidden:!p._headerVisible(),css:"igc-"+e.xtype+" igc-wb-header",cols:[{view:"label",label:e._getHeader()}]},{view:"layout",animate:!1,flex:1,rows:[{view:"datatable",_mx:1,tooltip:!0===e.tooltip,resizeColumn:{size:6,headerOnly:!0},select:!0,multiselect:!(!e.selModel||"MULTI"!=e.selModel.mode),padding:0,margin:0,flex:1,columns:[],hover:"igc-grid-row-hover",dragscroll:!0,header:!e.hideHeaders}]}],n=t.rows[1],o=i=t.rows[1].rows[0];break;case"propertygrid":l=1,t.rows=[{type:"header",height:$s.__hh,padding:0,hidden:!p._headerVisible(),template:e.title},{view:"layout",animate:!1,padding:0,borderless:!0,margin:0,flex:1,gravity:1,rows:[{view:"property",_mx:1,elements:[],padding:0,margin:0,flex:1,gravity:1,borderless:!0,scroll:!0,on:{onAfterEditStop:function(t,i,o){e.fireEvent.call(e,"propertychange",e)},onCheck:function(){e.fireEvent.call(e,"propertychange",e)}}}]}],n=t.rows[1],o=i=t.rows[1].rows[0];break;case"dataview":var h,f,m,x="",b=e.tpl;if(b&&b.length){for(c=0;c<b.length;c++)if(b[c].indexOf("<tpl")>-1||b[c].indexOf("</tpl>")>-1)b[c]="";else for(h=b[c].indexOf("{");h>-1&&(b[c]=b[c].substring(0,h)+"#"+b[c].substring(h+1),f=b[c].indexOf("{",h+1),m=b[c].indexOf("}",h+1),!((h=Math.min(f>-1?f:99999,m>-1?m:99999))>9999)););x=b.join("")}t.rows=[{type:"header",height:$s.__hh,hidden:!p._headerVisible(),padding:0,template:e.title},{view:"dataview",_mx:1,select:!0,template:x,padding:0,margin:0,columns:[],header:!e.hideHeaders,type:{width:e.iconwidth||100,height:e.iconheight||100},on:{onSelectChange:function(t){var i,o,n,a=this.getSelectedId(!0),s=e.__frec,r=-1;if(a&&a.length&&(i=Number(a[0]),(!s||s&&s.id!=i)&&(e.selModel.$f=i,o=e.store._pull[i]))){for(e.selModel.select(o,!0),n=0;n<e.store.data.items.length;n++)if(e.store.data.items[n]==o){r=n;break}r>-1&&e.fireEvent.call(e,"itemclick",e,o,undefined,r,t)}}}}];break;case"hiddenfield":t.hidden=!0;case"textfield":t.view="text",t._mx=1,s=1,t.on=t.on||{},e.enableKeyEvents&&(t.on.onKeyPress=function(t,i){e.fireEvent.call(e,"keydown",e,i),e.fireEvent.call(e,"keypress",e,i),e.fireEvent.call(e,"keyup",e,i)}),e.inputType&&(t.type=e.inputType),t.value=e.value||"",t.readonly=e.readOnly||e.readonly,t.placeholder=e.emptyText||e.placeholder;break;case"numberfield":t.view="counter",t._mx=1,s=1,t.step=e.step||1,t.min=e.minValue||0,t.max=e.maxValue||Number.MAX_VALUE,t.readonly=e.readOnly,e.value&&(t.value=e.value);break;case"button":case"splitbutton":e.enableToggle?t.view="toggle":t.view="button",t._mx=1,t.type="htmlbutton",t.borderless=!0,e.iconCls?(t.type="iconButton",t.icon=" icon-c-fix "+e.iconCls,e.text&&!e.$w?t.autowidth=!0:t.width=e.$w||30):e.$w?(t.autowidth=!1,t.width=e.$w):t.autowidth=!0,t.tooltip=e.tooltip,t.label=e.text||"",t.on=t.on||{},e.border?t.borderless=!1:t.borderless=!0,t.on.onItemClick=function(t){e._btn_state=!e._btn_state,e.menu&&e._dMenu.call(e,e.menu),e.$pm&&e.$pm.$dx.show(e.$dx.getNode()),e.handler&&e.handler.call(e.scope||e,t)},e.cls&&(t.on.onAfterRender=function(){this.$view.className+=" "+e.cls});break;case"toolbar":let d="pivot-toolbar-set";switch(e.tb_type){case"t_top":d="igc-toolbar-top";break;case"t_bottom":d="igc-toolbar-bottom";break;case"buttons":d="igc-button-bar"}$s.apply(t,{view:"toolbar",_mx:1,elements:[],scroll:!1,css:d},null,!0);break;case"html":t.view="template",t._mx=1,t.adjust=!0,e.scroll&&t.scroll&&(t.scroll=e.scroll),t.borderless=!e.border,t.type="clean",t.autoheight=e.autoHeight,t.on=t.on||{};break;case"tabbar":t.view="tabbar",t._mx=1,t.borderless=!0,t.optionWidth=160,t.options=[],t.on=t.on||{},t.on.onBeforeTabClose=function(t,i){return e.removeTab.call(e,t)},t.on.onChange=function(t,i){var o,n=0,a=parseInt(t),s=e.tabPanel._items;for(o=0;o<s.length;o++)if(s[o].tab&&s[o].tab.tabid==a){n=o;break}e.tabPanel.setActiveItem.call(e.tabPanel,n,!0)},t.on.onBeforeTabClick=function(t,i){e.fireEvent.call(e,"tabclick",e,t)};break;case"tabpanel":a=!0;break;case"fieldset":t.view="fieldset",s=2,a=1,t.label=e.title;break;case"checkboxgroup":t.view="layout",s=2,a=1;break;case"checkbox":t.view="checkbox",s=1,e.boxLabel&&(t.labelRight=e.boxLabel),t.on=t.on||{},!0!==e.checked&&!0!==e.value||(t.value=!0),t.on.onChange=function(t,i){var o=e.getValue(),n=e.$value;o!==n&&(e.fireEvent.call(e,"change",e,o,n),e.$value=o)};break;case"radiogroup":t.view="radio",s=1,t.vertical=e.vertical,t.options=e.$options,t.adjust=!0,t.name=e.name,e.value&&(t.value=e.value),t.on=t.on||{},t.on.onChange=function(t,i){if(i!=t){var o=e.getRadioGroupValue(t),n=e.$value;e.fireEvent.call(e,"change",e,o,n),e.$value=o}};break;case"combobox":t.view="combo",s=1,t.options=[],t.on=t.on||{},t.readonly=e.readOnly,t.on.onChange=function(t,i){var o=e.getComboValue(),n=e.$value;o!==n&&(e.fireEvent.call(e,"change",e,o,n),e.fireEvent.call(e,"select",e,o,n),e.$value=o)};break;case"htmleditor":t.view="layout",t._mx=1,t.rows=[{type:"header",height:$s.__hh,padding:0,template:"Markup text",borderless:!0},{view:"textarea",_h1:1,attributes:{wrap:"soft"}},{view:"toolbar",cols:[{view:"button",value:"Refresh Markup to HTML",autowidth:!0,on:{onItemClick:function(e){var t=new IG$._rpc$,i={option:"downmark",value:p.sview[1].getValue()};t.init(p,{ack:"helpcontent",payload:{},mbody:i},p,(function(e){p.sview[2].setValue(e.content),$("#m_preview",p.sview[3].$view).html(e.content)})),t.send()}}}]},{view:"resizer"},{view:"layout",cols:[{view:"layout",rows:[{type:"header",height:$s.__hh,padding:0,template:"Preview",borderless:!0},{view:"template",_h1:3,template:"<div id='m_preview' class='idv-pnl-html'></div>"}]},{view:"resizer"},{view:"layout",rows:[{type:"header",height:$s.__hh,padding:0,template:"HTML Source",borderless:!0},{view:"textarea",readonly:!0,_h1:2,attributes:{wrap:"soft"}}]}]}];break;case"textarea":t.view="textarea",s=1,t.readonly=e.readOnly,t.value=e.value||"",t.attributes={wrap:"soft"},t.placeholder=e.emptyText||e.placeholder;break;case"colorpicker":t.view="button",t.on=t.on||{},t.width=18,t.on.onItemClick=function(t){e._pui||(e._pui=webix.ui({view:"popup",width:300,height:300,body:{view:"colorboard",cols:6,rows:6,width:500,height:500,template:"<div class='value_cell'><div>{obj.val}</div><div class='color_block' style='background:{obj.val};'></div></div>",on:{onSelect:function(t){e._pui.close(),e._pui=null,$("button",e.$dx.$view).css({backgroundColor:t}),t.length>1&&"#"==t.charAt(0)&&(t=t.substring(1)),e.fireEvent.call(e,"select",e,t)}}},on:{onHide:function(){e._pui&&e._pui.close(),e._pui=null}}})),e._pui.show(e.$dx.$view,{pos:"bottom"})},s=1;break;case"datefield":t.view="datepicker",t.timepicker=!1,t.on=t.on||{},s=1;break;case"displayfield":t.borderless=!0,t.autowidth=0!=e.autowidth;case"tbtext":t.view="label","displayfield"!=e.xtype&&(t.autowidth=!t.width),s=1,t.height=26,t.label=e.value||e.text;break;case"view":case"dropzone":a=1;break;case"spacer":t.gravity=1,t.view="spacer",t._mx=1,t.borderless=!0,t.type="clear";break;case"split":case"splitter":case"tbseparator":case"menuseparator":t.$template="Separator",t._mx=1,t.width=3,u=1;break;case"fileuploadfield":t.view="layout",t._mx=1,s=1,t.cols=[{view:"label",label:e.fieldLabel,width:e.labelWidth||115,hidden:!e.fieldLabel},{view:"text",readonly:!0,_t:"text"},{view:"uploader",_t:"button",value:e.buttonText||"Upload",multiple:!1,autosend:!1,autowidth:!0,on:{onAfterFileAdd:function(t){var i,o,n,a=e.$dx;if(a){if(e._s=e._s||{},!(i=e._s.text)){for(o=a.getChildViews(),n=0;n<o.length;n++)o[n].config._t&&(e._s[o[n].config._t]=o[n]);i=e._s.text}return e.$$f=t.file,i.setValue(t.name),e.fireEvent.call(e,"change",e,t.name)}}}}];break;default:throw"xtype error : "+e.xtype}if(u||(void 0===t.borderless&&(t.borderless=!1),t.margin=0),s){if("textfield"===e.xtype)t.label=t.label||e.fieldLabel||"";else t.label=t.label||e.fieldLabel||e.text||"";t.label||"button"!=e.xtype&&"displayfield"!=e.xtype||!t.value||(t.label=t.value),e.labelPosition&&(t.labelPosition=e.labelPosition),e.labelAlign&&(t.labelAlign=e.labelAlign),1==s&&(t._mx=1,t.disabled=e.disable),t.label?t.labelWidth=e.labelWidth||115:e.labelWidth&&(t.labelWidth=e.labelWidth),t.borderless=!0}if(1!=s&&"button"!=e.xtype&&"splitbutton"!=e.xtype||!e.ownerCt||"hbox"!=e.ownerCt.layout.type&&"vbox"!=e.ownerCt.layout.type||"stretch"==e.ownerCt.layout.align||t.width||("combobox"==e.xtype?(t.width=260,delete t.autowidth):"numberfield"==e.xtype?(t.width=240,delete t.autowidth):"checkbox"==e.xtype?(t.width=120,delete t.autowidth,t.label?t.width+=80:t.labelWidth=20):"colorpicker"==e.xtype&&e.hideInput?(t.width=40,delete t.label):"textfield"==e.xtype?(t.width=160,delete t.autowidth):e.flex?delete t.autowidth:t.autowidth=!0),a?"viewport"==e.xtype?i=t:"window"==t.view||"popup"==t.view||e._window?(t.fitBiggest=!1,t.borderless=!0,!1!==e.title&&!1!==e.header&&(t.head={view:"toolbar",borderless:!0,css:"ig-strut-header",cols:[{view:"label",gravity:1,label:e._getHeader()}]},e.headerButtons&&e.headerButtons.length&&$.each(e.headerButtons,(function(i,o){var n={view:"button",type:"htmlbutton",borderless:!0,autowidth:!0,css:o.bodyCls,label:o.text||o.value,on:{onItemClick:function(t){o.handler&&o.handler.call(o.scope||e)}}};o.iconCls&&(n.type="iconButton",n.icon=" icon-c-fix "+o.iconCls),t.head.cols.push(n)})),t.head.cols.push({view:"button",icon:" icon-c-fix fa fa-times",type:"iconButton",hidden:0==e.closable,width:25,on:{onItemClick:function(t){e.close.call(e)}}})),t.body={view:"layout",animate:!1,padding:0,margin:0,borderless:!0,rows:[{view:"layout",animate:!1,borderless:!0,padding:0,margin:0}]},i=t.body.rows[0]):"fieldset"==e.xtype?(t.adjust=!0,t.label=e.title||e.text||e.label||"",e.checkboxToggle&&(t.label="<div><input type='checkbox' id='igc_fs_toggle' class='igc_btn_toggle'></input><span>"+t.label+"</span></div>"),t.body={view:"layout",animate:!1,padding:0,margin:0,borderless:!0},i=t.body):("fieldcontainer"==e.xtype||"container"==e.xtype?t.borderless=0===e.border||!1===e.border:t.borderless=!e.border,t.rows=[{type:"header",height:$s.__hh,css:"igc-"+e.xtype+" igc-wb-header",hidden:!p._headerVisible(),cols:[{view:"label",label:e._getHeader()}]},{view:"layout",adjust:!0,animate:!1,borderless:!0,css:"igc-"+e.xtype+" igc-wb-body",padding:0,margin:0}],i=t.rows[1]):r&&((e.enabledrag||e.enableDragDrop)&&(i.drag=!0),(d=e.viewConfig)&&($.each(d,(function(t,i){"plugins"!=t&&"listeners"!=t&&(e[t]=i)})),d.plugins&&"gridviewdragdrop"==d.plugins.ptype&&(i.drag=!0)),1==i.drag&&(i.on=i.on||{},i.on.onBeforeDrop=function(t,i){var o,n,a,s,r,l,c,u=!0;for(d&&(d.panel=e,d.store=e.store),(n=e.$_dd=e.$_dd||{}).view=t.from.$comp,n.records=[],l=0;l<t.source.length;l++)c=n.view.store._pull[t.source[l]],n.records.push(c);return t.to&&(r=t.to.$comp)&&t.target&&(a=r.store._pull[t.target[0]||t.target.row]),!a&&r.store.data.items.length&&(a=r.store.data.items[r.store.data.items.length-1],s="after"),!1===e.enabledrop?u=!1:d&&d.listeners&&d.listeners.beforedrop&&(o=n.records&&n.records.length?n.records[0]:null,u=d.listeners.beforedrop.call(d,o,n,a,s,undefined)),u},i.on.onAfterDrop=function(t,i){var o,n,a,s,r,l,c,u;if(o=e.$_dd){for(u=o.view.store,r=0;r<o.records.length;r++)if(c=o.records[r],0==o.copy)for(delete u._pull[c.data.id],l=0;l<u.data.items.length;l++)if(u.data.items[l].data.id==c.data.id){u.data.items.splice(l,1);break}if(t.to)for((s=t.to.$comp)&&t.target&&(n=s.store._pull[t.target[0]||t.target.row]),r=0;r<o.records.length;r++)c=o.records[r],s.store._pull[c.data.id]=c,l=s.store.indexOf(c),c.store=s.store,s.store.data.items.splice(l,0,c);!n&&s.store.data.items.length&&(n=s.store.data.items[s.store.data.items.length-1],a="after"),d&&d.listeners&&d.listeners.drop?d.listeners.drop.call(d,undefined,o,n,a):"treepanel"==e.xtype&&s&&s==e&&e._rebuild_treenode()}}),e.columns&&(e.columns=e.configColumns.call(e,e.columns,i.columns,i),i.editable=e.editable,i.editaction=e.editaction),i.on=i.on||{},i.on.onBeforeOpen=function(t){var i,o=this.getItem(t),n=0;return i=e.store._pull[t],(-1===o.$count||1==o.$count&&i.childNodes[0].data._loading)&&(n=1),n?(e.store&&(e.store._clearChild(i),delete o._loading,!1!==e.fireEvent.call(e,"beforeitemexpand",i)&&e.store.proxy&&"ajax"==e.store.proxy.type&&e.store._loadNodeData.call(e.store,i)),o.webix_kids=!1,this.updateItem(t,o.data)):!1!==e.fireEvent.call(e,"beforeitemexpand",i)&&e.fireEvent.call(e,"itemexpand",i),!0},i.on.onAfterScroll=function(){e.afterScroll&&e.afterScroll.call(e)},i.on.onItemClick=function(t,i,o){clearTimeout(e.$Lc1),e.$Lc1=setTimeout((function(){var n,a,s;n=e.getColumnIndex(t),s=e.$dx.getIndexById(t.row),a=e.store._pull[t.row],e.fireEvent.call(e,"itemclick",e,a,o,s,i),e.fireEvent.call(e,"cellclick",e,o,n,a,s,i),e.$selected_cell=a;var r=e.getSelectionModel.call(e);"cell"==r.checkSelector&&"checkboxmodel"==r.selType?r.select.call(r,a,!a.data.selected):r.selType}),e.editable?300:0)},i.on.onItemDblClick=function(t,i,o){clearTimeout(e.$Lc1);var n,a;e.getColumnIndex(t),a=e.$dx.getIndexById(t.row),n=e.store._pull[t.row],0!=e.fireEvent.call(e,"itemdblclick",e,n,o,a,i,t.column)&&e.$dx.editCell(t.row,t.column,!0,!0)},i.on.onBeforeContextMenu=function(t,i,o){var n,a,s,r=e._listeners,l=!0;return r.beforeitemcontextmenu&&(s=r.beforeitemcontextmenu[0])&&(n=e.$dx.getIndexById(t.row),e.getColumnIndex(t),rec=e.store._pull[t.row],a=e._createEvent.call(e,"beforeitemcontextmenu",i),l=s.f.call(s.scope||e,e,rec,o,n,a)),l},i.on.onAfterEditStop=function(t,i,o){if(t.value!=t.old){var n,a,s=e.store._pull[i.row];s.data.edited=!0,n=e.$dx.getIndexById(i.row),a=e.getColumnIndex({column:i.column}),e.fireEvent.call(e,"edit",i,{record:s,value:i.getValue(),oldvalue:t.old,column:a,dataIndex:i.column,row:n})}},i.on.onSelectChange=function(){var t,i,o,n=e.$dx.getSelectedId(!0),a=e.__frec,s=e.selModel,r=s.selected,l="MULTI"==s.mode;if(n&&n.length)if(l&&"checkboxmodel"!=e.selModel.selType){for(o=r.length-1;o>=0;o--)t=r.items[o],r.map[t.data.id]=0,t.data.selected=t.data.checked=0,r.items.splice(o,1);$.each(n,(function(t,i){var o=e.store._pull[i.row];o&&(r.map[o.id]=1,r.items.push(o),o.data.selected=o.data.checked=1,"checkboxmodel"==e.selModel.selType&&e.$dx&&e.$dx.updateItem(i.id,o.data))})),r.length=r.items.length,e.fireEvent.call(e,"selectionchange",e,r)}else i=n[0],(!a||a&&a.id!=i.id)&&(e.selModel.$f=i.id,(t=e.store._pull[i.row])&&"checkboxmodel"!=e.selModel.selType&&e.selModel.select(t,!0))},i.on.onCheck=function(t,i,o){e.$dx;var n,a,s=e.store._pull[t],r=e.getSelectionModel(),l="MULTI"==r.mode;if(s){if("treepanel"==e.xtype)for(a=0;a<e.columns.length;a++)if(e.columns[a].dataIndex==i&&"treecolumn"==e.columns[a].xtype){n=1;break}if("selected"==i||n){if(!l){if(r.selected&&r.selected.items.length){var d=r.selected.items[0];d.set("selected",!1),d.set("checked",!1),r.select(d,!1)}return s.set("selected",!0),s.set("checked",!0),void r.select(s,!0)}s.set("selected",!!o),s.set("checked",!!o),r.select(s,o)}else s.set(i,!!o);e.fireEvent.call(e,"checkchange",s,o,i)}},i.on.onAfterSort=function(t,i,o){let n=e.$dx,a=e.store.data.length,s=[];for(let t=0;t<a;t++){let i=n.getIdByIndex(t);rec=e.store._pull[i],s.push(rec)}e.store.data.items=s}),e.tools&&(a||r)&&t.rows[0].cols&&(e._tools=[],$.each(e.tools,(function(i,o){var n,a,s="";switch(o.type){case"collapse":s="icon-toolbar-collapse icon-toolbar-collapse-right";break;case"close":s="fa-times";break;case"refresh":s="fa-refresh";break;case"minimize":s="fa-minimize";break;case"maximize":s="fa-maximize";break;case"clear":s="fa-times-circle-o"}a=new $s.button(o),e._tools.push(a),n={view:"button",tooltip:o.tooltip,hidden:o.hidden,width:26,_ts:i+1,on:{onItemClick:function(){"collapse"==o.type?e.setVisible(!1):o.handler&&o.handler.call(o.scope||e,e)}}},s&&(n.type="iconButton",n.icon=" icon-c-fix fa "+s),t.rows[0].cols.push(n)}))),u||(t.padding=0,t.margin=t.margin||0,o.on=o.on||{},o.on.onViewResize=function(e,t){p._vsize()},o.on.onLayoutResize=function(e,t){p._vsize()},o.on.onResize=function(e,t){p._vsize()}),a&&"tabpanel"==e.xtype)i.rows=[{view:"tabbar",segmented:!0,multiview:!0,optionWidth:120,_mt:1,options:[],on:{onBeforeTabClose:function(t,i){e.removeTab.call(e,t)},onChange:function(t,i){var o,n=e.items.items;for(o=0;o<n.length;o++)if(n[o].tab&&n[o].tab.tabid==t){n[o].$ex.show();break}}}},{view:"layout",adjust:!0,padding:0,margin:0,borderless:!0,animate:!1,rows:[{view:"multiview",_mx:1,adjust:!0,animate:!1,fitBiggest:!0,keepViews:!0,hidemode:e.hidemode,padding:0,margin:0,cells:[$s.getBlank(!1)]}]}],vprop=i.rows[1].rows[0];else if(a){switch(e.layout.type){case"border":i._mx=1,i.rows=[{view:"layout",animate:!1,adjust:!0,padding:0,_bd:1,margin:0,hidden:!0,borderless:!0,rows:[$s.getBlank(!0)]},{view:"layout",animate:!1,adjust:!0,_bd:2,padding:0,margin:0,borderless:!0,cols:[$s.getBlank(!1)]},{view:"layout",animate:!1,adjust:!0,_bd:3,padding:0,margin:0,hidden:!0,borderless:!0,rows:[$s.getBlank(!0)]}],i;break;case"hbox":i.adjust=!0,i.rows=[{view:"layout",animate:!1,adjust:!0,_mx:1,padding:0,margin:e.margin||0,borderless:!0,cols:[$s.getBlank(!1)]}],e.autoScroll?(i.rows[0].view="scrollview",i.rows[0].scroll="x",delete i.rows[0].cols,delete i.rows[0]._mx,i.rows[0].body={_mx:1,padding:0,margin:0,borderless:!0,cols:[$s.getBlank(!1)]},vprop=i.rows[0].body):vprop=i.rows[0];break;case"vbox":case"anchor":i.borderless=!0,"checkboxgroup"==e.xtype?i.rows=[{view:"layout",animate:!1,adjust:!0,padding:0,margin:0,borderless:!0,cols:[{view:"layout",animate:!1,adjust:!0,_mx:1,padding:0,borderless:!0,margin:0,rows:[$s.getBlank(!1)]}]}]:i.rows=[{view:"layout",animate:!1,adjust:!0,_mx:1,padding:0,borderless:!0,margin:e.margin||0,rows:[$s.getBlank(!1)]}],e.autoScroll?(i.rows[0].view="scrollview",i.rows[0].scroll="y",i.rows[0]._sx=1,delete i.rows[0].rows,delete i.rows[0]._mx,i.rows[0].body={_mx:1,padding:0,margin:0,borderless:!0,rows:[$s.getBlank(!1)]},vprop=i.rows[0].body):vprop=i.rows[0];break;case"fit":case"card":i.rows=[{view:"multiview",_mx:1,animate:!1,borderless:!0,fitBiggest:!0,keepViews:!0,adjust:!0,hidemode:e.hidemode,padding:0,margin:0,cells:[$s.getBlank()]}],vprop=i.rows[0].cells[0];break;case"accordion":"vertical"==e.layout.direction?i.rows=[{view:"accordion",type:"head",borderless:!0,_mx:1,cols:[$s.getBlank(!1)]}]:i.rows=[{view:"accordion",type:"head",borderless:!0,_mx:1,rows:[$s.getBlank(!1)]}],vprop=i.rows[0];break;case"absolute":i.rows=[{view:"abslayout",borderless:!0,padding:0,margin:0,keepViews:!0,adjust:!0,_mx:1,cells:[$s.getBlank(!1)]}],vprop=i.rows[0];break;default:throw"layout type error : "+e.xtype+":"+e.layout}}if(a&&(e.bodyPadding||e.padding)){var g=vprop;if("border"==e.layout.type&&(g=vprop),g){var v=typeof(w=e.bodyPadding||e.padding);"fieldset"!=e.xtype&&("string"==v?2==(v=w.split(" ")).length?(delete g.padding,g.paddingX=2*(Number(v[0])||0),g.paddingY=2*(Number(v[1])||0)):g.padding=2*(Number(v[0])||0):g.padding=2*w)}}if(("checkboxgroup"==e.xtype||"fieldcontainer"==e.xtype)&&e.fieldLabel){var w=null;"checkboxgroup"==e.xtype&&"vbox"==e.layout.type?(w=i.rows[0].cols).splice(0,0,{view:"label",width:e.labelWidth||115,label:e.fieldLabel}):(w="vbox"==e.layout.type||"anchor"==e.layout.type?i.rows[0].rows:i.rows[0].cols).push({view:"label",width:e.labelWidth||115,label:e.fieldLabel})}return l&&((i=n||i).rows.splice(0,0,{view:"layout",animate:!1,_d1:1,hidden:!0,autowidth:!1,padding:0,margin:0,borderless:!0,rows:[$s.getBlank(!0)]}),i.rows.splice(i.rows.length,0,{view:"layout",animate:!1,_d2:1,hidden:!0,autowidth:!1,padding:0,margin:0,borderless:!0,rows:[$s.getBlank(!0)]})),u||i.rows||i.cols||i.cells||"property"==i.view||(i.rows=[$s.getBlank(!0)]),"textarea"==e.xtype&&(t={view:"layout",_mx:1,cols:[t,{view:"layout",hidden:!e.popup_editor,autowidth:!0,rows:[{view:"button",autowidth:!0,value:e.buttonText||"..",on:{onItemClick:function(t){var i=new IG$._cdedtor({instance:e.instance,component:e});IG$.showDlg(p,i)}}},{borderless:!0,padding:0,template:""}]}]}),t}},configColumns:function(e,t,i){var o,n=this,a=[];n.$7f=0,"checkboxmodel"==n.selModel.selType&&e.length&&(o={xtype:"checkcolumn",text:"",$cm:1,dataIndex:"selected",width:40},n.$7f=1);var s=function(o,s){s.dataIndex=s.dataIndex||"__dc"+o;var r,l,d=new $s.column(s);s.$cm||a.push(d),"selected"!=s.dataIndex||"checkcolumn"!=s.xtype||n.selModel.mode||(n.selModel.mode="MULTI");var c={header:s.text||s.header||"",id:s.dataIndex};if(s.width?c.width=s.width:s.minWidth?(c.minWidth=s.minWidth,c.fillspace=s.flex||1):c.fillspace=s.flex||1,s.hidden&&(c.hidden=!0),"checkcolumn"==s.xtype)c.editor="checkbox",c.template=function(e,t){return t.checkbox(e,t,"selected"==s.dataIndex&&(e.selected||e.checked)||e[s.dataIndex]?1:0,{checkValue:1})},"MULTI"!=n.selModel.mode||s.text||(c.header={title:c.header,content:"masterCheckbox"});else if("treecolumn"==s.xtype)c.template=function(t,i){var o,a="treecheckbox"!=n.selModel.selType,r=n.store&&t.id?n.store._pull[t.id]:null,l=n.store;if(r||(r=new $s.record(t,l)),o=i.treetable(t,i)+(a?"":i.checkbox(t,i,t.selected||t.checked?1:0,{checkValue:1}))+" "+t[s.dataIndex],1==e.length&&!r.__tm__){$s.__col_measure||($s.__col_measure=$("<div></div>").appendTo($("body")),$s.__col_measure.css({position:"absolute",top:"-200px",overflow:"visible",padding:"0px"}));var c,u;$s.__col_measure.html(o);if(c=$s.__col_measure.width(),u=Math.max(n.$width||0,c,n.__cw||0),!n.__cw||val.width<u){n.__cw=u;var p=d.$g.$dx;p&&(p.getColumnIndex(d.$col.id),p.setColumnWidth(d.$col.id,n.__cw))}r.__tm__=1}return o},1==e.length&&(c.adjust="data",delete c.fillspace);else if("templatecolumn"==s.xtype)r=(r=s.tpl||"").replace(/\{|\}/g,"#"),c.template=r,c.sort="string";else if("actioncolumn"==s.xtype){c.css="igc-actioncolumn",c.template="";var u={};i&&(i.onClick=i.onClick||{}),$.each(s.items,(function(e,t){if(!0!==t.hidden){c.template+="<div class='actionitem_"+o+"_"+e+" igc-actionitem "+t.iconCls+"' ></div>";var a=function(e,i,a){if(t.handler){var s=n.$dx.getIndexById(i),r=o,l=n.store._pull[i.row],d=l;t.handler.call(t.scope||n,n,s,r,d,e,l)}return!1};i?i.onClick["actionitem_"+o+"_"+e]=a:u["actionitem_"+o+"_"+e]=a}})),i||n.$dx._mouse_action_extend(u,"on_click")}else c.sort="string",s.align?c.css={"text-align":s.align}:"number"==s.dataType&&(c.css={"text-align":"right"});if(s.tdCls&&(c.css=s.tdCls),s.renderer?c.template=function(t,i,o,a){var r=n.store._pull[t.id],l=n.store;if(r||(r=new $s.record(t,l)),o=s.renderer.call(n,o,null,r,null,null,l),"treecolumn"==s.xtype&&(o=i.treetable(t,i)+o,1==e.length&&!r.__tm__)){$s.__col_measure||($s.__col_measure=$("<div></div>").appendTo($("body")),$s.__col_measure.css({position:"absolute",top:"-200px",overflow:"visible",padding:"0px"}));var c,u;$s.__col_measure.html(o);if(c=$s.__col_measure.width(),u=Math.max(n.$width||0,c,n.__cw||0),!n.__cw||a.width<u){n.__cw=u;var p=d.$g.$dx;p&&(p.getColumnIndex(d.$col.id),p.setColumnWidth(d.$col.id,n.__cw))}r.__tm__=1}return o}:"checkcolumn"!=s.xtype&&"actioncolumn"!=s.xtype&&(c.template=function(t,i,o,a){if(o="<span title='"+IG$.hEE(o)+"'>"+IG$.hEE(o)+"</span>","treecolumn"==s.xtype){o=i.treetable(t,i)+o;var r=n.store&&t.id?n.store._pull[t.id]:null,l=n.store;if(r||(r=new $s.record(t,l)),1==e.length&&!r.__tm__){$s.__col_measure||($s.__col_measure=$("<div></div>").appendTo($("body")),$s.__col_measure.css({position:"absolute",top:"-200px",overflow:"visible",padding:"0px"}));var c,u;$s.__col_measure.html(o);if(c=$s.__col_measure.width(),u=Math.max(n.$width||0,c,n.__cw||0),!n.__cw||a.width<u){n.__cw=u;var p=d.$g.$dx;p&&(p.getColumnIndex(d.$col.id),p.setColumnWidth(d.$col.id,n.__cw))}r.__tm__=1}}return o}),s.editor&&("combobox"==s.editor.xtype&&(s.editor.type="select"),c.editor=s.editor.type||"text",n.editable=!0,n.editaction="custom",c.editAction="custom",i&&(i.editable=!0),"select"==c.editor||"combo"==c.editor)){l=s.editor.store,s.editor._store=l,s.editor.store=l?n.createClassComp(l):null,c.options=[];var p=s.editor.displayField,h=s.editor.valueField;s.editor.store&&$.each(s.editor.store.$data,(function(e,t){c.options.push({id:t[h],value:t[p]})}))}s.tooltip&&(c.tooltip=s.tooltip),t.push(c),d.$col=c,d.$g=n};return o&&s(0,o),$.each(e,s),a},_headerVisible:function(){var e=this,t=!1;return e.title&&!1!==e.header&&(t=!0,e.ownerCt&&("tabpanel"==e.ownerCt.xtype||e.ownerCt.tabBar)&&(t=!1)),t},_tafterrender:function(){var e=this;"combobox"==e.xtype&&e.store.$data&&e.store.loadData(e.store.$data),e.rendered=1,e.fireEvent.call(e,"afterrender",e),e.ownerCt&&e.ownerCt.onAdd&&e.ownerCt.onAdd.call(e.ownerCt,e,e.ownerCt._items.lengt-1),setTimeout((function(){e._vsize.call(e,1,1)}),1)},_getHeader:function(){return this.title},_vsize:function(e,t,i){var o,n,a,s,r=this,l=r.$dx;if(l&&r.rendered&&!r.hidden){if(o=l.$width,n=l.$height,void 0===o||void 0===n)return;(r.$width!=o||r.$height!=n||t)&&(r.width&&(r.width=r.$width),r.height&&(r.height=r.$height),a=r.$width,s=r.$height,r.$width=o,r.$height=n,r.fireEvent("resize",r,o,n,a,s)),e&&!i||$.each(r._items,(function(o,n){n._vsize.call(n,e,t,i)}))}},addViewItem:function(e,t,i,o,n){var a,s,r,l,d,c,u,p=t?t.$dx:null,h=0,f=0,m=!!t&&("card"==t.layout.type||"tab"==t.xtype),x="window"==e.xtype||"popup"==e.xtype,b=t?t._items:null,g=0,$=t&&("border"==t.layout.type||"absolute"==t.layout.type)&&e.slide&&e.slide.enabled?e.slide:null;if(i&&(o||(o=t["$dc"+("top"==e.dock?1:2)]),a=p=o),e.$dx||(r=e.updateViewProp.call(e,e)),i&&o)o.show();else if(p){for(u=0;u<b.length;u++)if(b[u]==e){h=u;break}if(p.getChildViews)switch(s=p.getChildViews(),a=p,t.layout.type){case"fit":case"card":for(r&&(r.borderless=!0),t.selectedIndex=t.selectedIndex||0,u=b.length-1;u>=0;u--)"card"==t.layout.type&&t.selectedIndex==u?b[u].show(!0):t.layout.type;f=-1;break;case"accordion":f=b.length;break;case"border":switch(bs=0,e.region){case"center":a=t.layout.$r2,$=null;break;case"west":case"east":a=t.layout.$r2;break;case"north":a=t.layout.$r1;break;case"south":a=t.layout.$r3}for($&&($.direction="east"==e.region||"west"==e.region?"width":"height"),u=0;u<t._items.length;u++)(c=t._items[u])==e||c.$ex&&(d=a.index(c.$ex),e.region==c.region?f=Math.max(d+1,f):"west"!=e.region||"center"!=c.region&&"east"!=c.region?"east"!=e.region||"center"!=c.region&&"west"!=c.region?"center"==e.region&&"east"==c.region?f=Math.min(d,f):"center"==e.region&&"west"==c.region&&(f=Math.max(d+1,f)):f=Math.max(d+1,f):f=Math.min(d,f));a&&a.show();break;case"vbox":case"anchor":case"hbox":f=s.length;break;case"absolute":if(r)switch(e.region){case"north":case"west":r.top=0,r.left=0;break;case"south":r.bottom=0,r.left=0;break;case"east":r.top=0,r.right=0;break;default:r.top=e.y||0,r.left=e.x||0,e.flex&&(r.right=0,r.bottom=0)}f=s.length,$&&($.direction="east"==e.region||"west"==e.region?"width":"height")}}if(a&&a.addView&&e.$dx&&e.$dx.getParentView&&e.$dx.getParentView()!=a)a.addView(e.$dx,f),e.$cx=a;else if(a&&a.addView&&r){if(g=1,$&&($.target=r[$.direction],r[$.direction]=1),l=f>-1?a.addView(r,f):a.addView(r,void 0),e.$cx=a,$){$.duration=$.duration||1e3,$.step=$.step||10,$._curr=0,l&&"string"==typeof l&&(l=$$(l));var v,w=$.duration/$.step,_=Math.ceil($.target/$.step);return v=function(){if($._curr>=$.target){if(a&&!i){var o=a.getChildViews();if(o&&o.length)for(u=o.length-1;u>=0;u--)"card"==t.layout.type||"fit"==t.layout.type?o[0].config._mblank:o[u].config._mblank&&a.removeView(o[u])}e._postAddView(e,l,t,g,p,i,m,h,a)}else{var n=$._curr+_;n=Math.min($.target,n),l.define($.direction,n),l.resize(),$._curr=n,setTimeout((function(){v()}),w)}},void setTimeout((function(){v()}),w)}}else x&&(l=webix.ui(r));if(l&&"string"==typeof l&&(l=$$(l)),a&&!i){var y=a.getChildViews();if(y&&y.length)for(u=y.length-1;u>=0;u--)"card"==t.layout.type||"fit"==t.layout.type?y[0].config._mblank:y[u].config._mblank&&a.removeView(y[u])}e._postAddView(e,l,t,g,p,i,m,h,a)},_postAddView:function(e,t,i,o,n,a,s,r,l){if(t)if(e.$ex=t,e.$dx=t,e.$dx.$comp=e,e.updateViewElement(t),a)l.show();else if(!i||"card"!=i.layout.type&&"tabpanel"!=i.xtype)s&&e.$ex?r==e.ownerCt.selectedIndex&&e.show(!0):i&&"fit"==i.layout.type&&!e.hidden&&e.show(!0);else for(i.selectedIndex=i.selectedIndex||0,u=i._items.length-1;u>=0;u--)if(i.selectedIndex==u){i._items[u].show(!0);break}if(t&&(e._items&&e._items.length&&("tabpanel"!=e.xtype&&"card"!=e.layout.type||(e.selectedIndex=e.selectedIndex||0),e.suspendLayouts(),$.each(e._items,(function(e,t){t.ownerCt&&t.addViewItem(t,t.ownerCt,void 0,void 0)})),e.resumeLayouts(),e.$ex&&e._adjust(e.$ex,!0)),"fieldset"==e.xtype&&(e.checkboxCmp=$("#igc_fs_toggle",t.$view),e.checkboxCmp.getValue=function(){return this.is(":checked")},e.checkboxCmp.setValue=function(e){e?this.attr("checked","checked"):this.removeAttr("checked")}),("window"==e.xtype||"popup"==e.xtype||"panel"==e.xtype||"gridpanel"==e.xtype||"treepanel"==e.xtype||"fieldset"==e.xtype)&&e._dockedItems&&e._dockedItems.length&&$.each(e._dockedItems,(function(e,t){t.ownerCt&&t.addViewItem(t,t.ownerCt,1)}))),o){e.body.updateDom.call(e.body),e.el.updateDom.call(e.el);var d=$(e.body.dom);if(e.data_intro&&d.attr("data-intro",e.data_intro),"html"==e.xtype&&e.html)d.css("position","relative"),d.empty(),d.append(e.html),e.$ex._igc_content=d.children();else if("container"==e.xtype&&e.contentEl)d.empty(),d.append($(e.contentEl));else if("textarea"==e.xtype){var c=$("textarea",e.body.dom);e.$txtarea.attachEvent("onKeyPress",(function(e,t){if(9==(t.keyCode||t.which)){t.preventDefault();var i=$("textarea",this.$view),o=i[0],n=o.selectionStart,a=o.selectionEnd,s=i.val();this.setValue(s.substring(0,n)+"\t"+s.substring(a)),o.selectionStart=o.selectionEnd=n+1}})),c.length&&(e.inputEl.dom=c[0])}}if(t&&e.postAddViewItem.call(e),n&&("border"==i.layout.type&&i.updateBorderRegion.call(i),"fieldcontainer"==e.xtype&&e._adjust(n),"border"==e.layout.type)){var u,p,h,f,m,x={view:"resizer",borderless:!0},b={north:0,west:1,center:2,east:3,south:4};for(e._items.sort((function(e,t){var i=0;return e.region!=t.region&&(i=b[e.region]-b[t.region]),i})),u=e._items.length-1;u>=0;u--)if((h=e._items[u]).$cx&&1==h.split&&!h.$sx){for(mlist=h.$cx.getChildViews(),m=0,p=0;p<mlist.length;p++)mlist[p].isVisible()&&m++;f=h.$cx.index(h.$ex),mlist.length>1&&f<mlist.length-1&&!h.hidden&&(x.ownerCt=h.$cx,x.hidden=!(m>1||!h.hidden),h.$sx=h.$cx.addView(x,f+1),"string"==typeof h.$sx&&(h.$sx=$$(h.$sx)))}}},getAreaBySelector:function(e){var t,i,o,n,a=0,s=this,r=s.body.dom;if("object"==typeof e)return e;for(o=(i=e.split(" ")).length;a<o&&("self"==(n=i[a])?r=s.body.dom:"$"==n.charAt(0)?(sm=this.down("[name="+n.substring(1)+"]"),sm&&sm.isVisible()?(r=sm.body.dom,s=sm):r=null):(m=$(n,r),r=m.length?m[0]:null),r);)++a==o&&(t=r);return t},updateBorderRegion:function(){var e,t,i,o=this.layout,n=o.$r1,a=(o.$r2,o.$r3),s=this._items;if(n&&a){for(i=0;i<s.length;i++)if(!s[i].hidden)switch(s[i].region){case"north":e=1;break;case"south":t=1}n[e?"show":"hide"](),a[t?"show":"hide"]()}},_loopCDX:function(e){var t,i,o,n,a=this;if((t=e.getChildViews?e.getChildViews():null)&&t.length)for(n=0;n<t.length;n++)if(t[n].config._d1&&(a.$dc1=t[n]),t[n].config._d2&&(a.$dc2=t[n]),t[n].config._mt&&(a.$mt=t[n]),t[n].config._sx&&(a.$sx=t[n]),t[n].config._mx)i=t[n],"border"==a.layout.type&&a._loopCDX(i);else if(t[n].config._ts)a._tools[t[n].config._ts-1].$dx=t[n];else if(o=a._loopCDX(t[n])){i=o;break}return i},updateViewElement:function(e){var t,i,o,n,a=this,s=a.type,r=a.layout;r&&r.type;if(t=e.getChildViews?e.getChildViews():null,("window"==s||"popup"==s||"fieldset"==s||a._window)&&(e=e.getBody()),e.config._mx?i=e:(n=a._loopCDX(e))&&(i=n),!i)throw"error on view element";if(a.$dx=i,a.$dx.$comp=a,1==a.disabled&&a.$dx.disable(),t&&t.length&&"header"==t[0].config.type&&(a.$tx=t[0]),a.layout&&"border"==a.layout.type)for(t=i.getChildViews(),o=0;o<t.length;o++)t[o].config._bd&&(a.layout["$r"+t[o].config._bd]=t[o]);if("htmleditor"==a.xtype)for(t=i.getChildViews(),a.sview={},o=0;o<t.length;o++)a._updateHtag(t[o],a);"textarea"==a.xtype&&(t=i.getChildViews())&&t.length>0&&(a.$txtarea=t[0])},_updateHtag:function(e,t){var i;if(e.config._h1)t.sview[e.config._h1]=e;else if(e.getChildViews){var o=e.getChildViews();if(o)for(i=0;i<o.length;i++)this._updateHtag(o[i],t)}},postAddViewItem:function(){var e,t=this,i=t.$dx;switch(!t.instance&&t.ownerCt&&t.ownerCt.instance&&(t.instance=t.ownerCt.instance),t.xtype){case"html":if((e=t.autoLoad)&&e.url){var o="?";e.url.indexOf("?")>0&&(o="&"),$.ajax({type:"GET",url:e.url+o+"uniquekey="+IG$.getUniqueKey(),dataType:"text",timeout:1e4,success:function(o){if(i){var n=$(i.$view);n.empty(),n.append(o)}e.callback&&(e.scope?e.callback.apply(e.scope):e.callback.apply(t))},error:function(e,t,i){}})}break;case"window":case"popup":t.hide(!0)}t._tafterrender()},_isAfterRender:function(){return/(gridpanel|html)/.test(this.xtype)},down:function(e){var t,i,o,n=this;if("["==e[0]&&"]"==e[e.length-1]&&(o=(e=e.substring(1,e.length-1)).split("="),e=o[1]),n._dockedItems&&n._dockedItems.length){for(t=0;t<n._dockedItems.length;t++)if(n._dockedItems[t].name==e){i=n._dockedItems[t];break}if(!i)for(t=0;t<n._dockedItems.length&&!(i=n._dockedItems[t].down.call(n._dockedItems[t],e));t++);}if(!i&&n._tools)for(t=0;t<n._tools.length;t++)if(n._tools[t].name==e){i=n._tools[t];break}if(!i&&n.menu&&n.menu._items)for(t=0;t<n.menu._items.length;t++)if(n.menu._items[t].name==e){i=n.menu._items[t];break}if(!i&&n._items&&n._items.length){for(t=0;t<n._items.length;t++)if(n._items[t].name==e){i=n._items[t];break}if(!i)for(t=0;t<n._items.length&&!(i=n._items[t].down.call(n._items[t],e));t++);}if(!i&&n.columns&&n.columns.length)for(t=0;t<n.columns.length;t++)if(n.columns[t].name==e){i=n.columns[t];break}if(!i&&"radiogroup"==n.xtype&&n.$options)for(t=0;t<n.$options.length;t++)if(n.$options[t].name==e){i=n;break}if(!i&&"button"==n.xtype&&n.menu&&n.menu.items&&n.menu.items.length)for(t=0;t<n.menu.items.length;t++)if(n.menu.items.items[t].name==e){i=n.menu.items.items[t];break}return i},getRootNode:function(){var e,t=this.store;return t&&(e=t.getRootNode()),e},setRootNode:function(e){return this.store.setRootNode.call(this.store,e)},reconfigure:function(e,t){var i=this,o=i.$dx,n=[];e&&e!==i.store&&(i.store?$s.apply(i.store,e,null,!0):(i._store=e,e.xtype=e.xtype||"store",e.grid=i,i.store=i.createClassComp(e)),$s.apply(e,i.store,null,!0)),i.columns=i.configColumns.call(i,t,n),o.config.columns=n,o.refreshColumns(),i.store.loadData.call(i.store,i.store.$data)},getLayout:function(){return this},getComponent:function(e){var t,i,o=this._items;for(t=0;t<o.length;t++)if(o[t].id==e){i=o[t];break}return i},setActiveItem:function(e,t){var i,o=this,n=e;if("object"==typeof e)for(n=0,i=0;i<o._items.length;i++)if(o._items[i]==e){n=i;break}(o.selectedIndex||0)!=n?(o.selectedIndex=Math.min(n,o._items.length-1),o._items[o.selectedIndex]&&o._items[o.selectedIndex].show(!0)):1==t&&(o.selectedIndex=n,o._items[o.selectedIndex]&&o._items[o.selectedIndex].show(!0))},getActiveItem:function(){return this._items[this.selectedIndex]},getTabBar:function(){return this.tabBar},getAllValues:function(e,t,i){var o,n,a,s,r,l,d,c=this;for(/(checkbox|checkboxgroup|radiogroup|combobox|htmleditor|textfield|textarea|numberfield|datefield)/.test(c.xtype)&&c.getValue&&(a=c.getValue(),t&&"checkbox"==c.xtype?a=!0===a?"T":"F":t&&"numberfield"==c.xtype&&void 0!==a&&(a=""+a),c.mapname?e[c.mapname]=a:c.name&&(e[c.name]=a)),o=0;o<c.items.items.length;o++)if(n=c.items.items[o],/(panel|container|window|fieldset)/.test(n.xtype)){if(n.name&&i&&i.excludes&&i.excludes[n.name])continue;if(d=n.getAllValues(e,t,i))break}else if(/(checkbox|checkboxgroup|radiogroup|combobox|htmleditor|textfield|textarea|numberfield|datefield)/.test(n.xtype)&&n.getValue){if(n.clearInvalid&&n.clearInvalid(),a=n.getValue(),l=0,"radiogroup"==n.xtype){if(a)for(r in a){s=a[r];break}a=s}else t&&"checkbox"==n.xtype?a=!0===a?"T":"F":t&&"numberfield"==n.xtype&&void 0!==a&&(a=""+a);if(t||"numberfield"!=n.xtype||void 0===a||(l=1),n.required&&!a&&!l){d=1,n.markInvalid&&n.markInvalid("Required");break}n.mapname?e[n.mapname]=a:n.name&&(e[n.name]=a)}return d},setAllValues:function(e,t,i){var o,n={};for(o in e)n[o]=1;this._setAllValues(e,n,t,i)},_setAllValues:function(e,t,i,o){var n,a,s,r;for(n=0;n<this.items.items.length;n++)a=this.items.items[n],/(panel|container|window|fieldset)/.test(a.xtype)?a._setAllValues(e,t,i,o):a.setValue&&/(checkbox|checkboxgroup|radiogroup|combobox|htmleditor|textfield|textarea|numberfield|datefield)/.test(a.xtype)&&(s=null,r=0,a.mapname&&t[a.mapname]?(s=e[a.mapname],r=1):a.name&&t[a.name]&&(s=e[a.name],r=1),(r||!0===o)&&(i&&"checkbox"==a.xtype?s="T"===s:i&&"numberfield"==a.xtype&&s&&(s=Number(s)),a.setValue(s)))}}),$s.tabbar=$s.extend($s.base,{xtype:"tabbar",validate:function(){var e,t,i,o=this,n=o.tabPanel,a=o.$dx;if(n&&a){for(o.$tid=o.$tid||0,e=0;e<n._items.length;e++)if(n._items[e].$ex)if(i={name:n._items[e].title,value:"<span>"+IG$.hEE(n._items[e].title)+"</span>",close:!0},n._items[e].iconCls&&(i.value="<div class='igc-tab-label'><span class='webix_icon icon-c-fix "+n._items[e].iconCls+"'></span><span class='igc-tab-text'>"+IG$.hEE(n._items[e].title)+"</span></div>"),n._items[e].tab){for(t=0;t<a.data.options.length;t++)if(n._items[e].tab&&a.data.options[t].id==n._items[e].tab.tabid){a.data.options[t].value=i.value;break}}else!0!==n._items[e].hidden&&(i.id=o.$tid++,n._items[e].tab=new $s.tabbutton({tabbar:o,ownerCt:n._items[e],tabid:i.id}),a.addOption(i,!0));a.refresh()}},setActiveTab:function(e){var t=this.$dx;t&&e.tab&&t.setValue(""+e.tab.tabid)},getActiveTab:function(){var e=this.tabPanel._items,t=parseInt(this.$dx.getValue());for(let i=0;i<e.length;i++)if(e[i].tab&&e[i].tab.tabid==t)return e[i];return null},removeTab:function(e,t){var i,o,n,a=parseInt(e),s=this.tabPanel,r=s._items,l=s.selectedIndex,d=-1;for(i=0;i<r.length;i++)if(r[i].tab&&r[i].tab.tabid==a){o=r[i],d=i;break}if(o){if(!0===t){var c=s.getTabBar();c&&c.$ex&&c.$ex.removeOption(e)}else if(!1===(n=o.fireEvent.call(o,"beforeclose",o)))return n;d<l&&s.selectedIndex--,s.onRemove.call(s,o,!0),o.fireEvent.call(o,"close",o)}}}),$s.panel=$s.extend($s.base,{xtype:"panel"}),$s.tabpanel=$s.extend($s.base,{xtype:"tabpanel",setActiveTab:function(e){var t=this.tabBar;t&&t.setActiveTab.call(t,e)},getActiveTab:function(){var e=this.tabBar.$dx,t=parseInt(e.getValue()),i=this._items;for(let e=0;e<i.length;e++)if(i[e].tab&&i[e].tab.tabid==t)return i[e];return null},removeTab:function(e){var t,i,o=parseInt(e),n=this._items;for(t=0;t<n.length;t++)if(n[t].tab&&n[t].tab.tabid==o){i=n[t];break}if(i){if(!1===i.fireEvent.call(i,"beforeclose",i))return;this.onRemove(i,!0),i.fireEvent.call(i,"close",i)}}}),$s.window=$s.extend($s.base,{xtype:"window",isWindow:!0,initComponent:function(){var e=this,t=$(document),i=t.width(),o=t.height();e.width&&e.width>i&&(e.width=i-20),e.height&&e.height>o&&(e.height=o-20),$s.window.superclass.initComponent.call(e)},showAt:function(e,t){this.show(null,{x:e,y:t})},showBy:function(e){this.show(null,{ctrl:e})}}),$s.popup=$s.extend($s.base,{xtype:"popup",isWindow:!0,showAt:function(e,t){this.show(null,{x:e,y:t})},showBy:function(e){this.show(null,{ctrl:e})}}),$s.container=$s.extend($s.base,{xtype:"container"}),$s.treepanel=$s.extend($s.base,{xtype:"treepanel",_rebuild_treenode:function(){var e=this,t=e.store._pull,i=e.$dx,o=i.getFirstId();e._rebuild_node(i,t,o,t[o])},_rebuild_node:function(e,t,i,o){o.childNodes=[],o.data.children=[],o.firstChild=null;var n=e.getFirstChildId(i);if(n){o.firstChild=t[n],o.childNodes.push(o.firstChild),o.data.children.push(o.firstChild.data),o.firstChild.parentNode=o,this._rebuild_node(e,t,n,o.firstChild);for(var a=e.getNextSiblingId(n);a;){var s=t[a];o.childNodes.push(s),s.parentNode=o,o.data.children.push(s.data),this._rebuild_node(e,t,a,s),a=e.getNextSiblingId(a)}}}}),$s.treestore=$s.extend($s.dstore,{xtype:"treestore"}),$s.reader=$s.extend($s.base,{xtype:"reader"}),$s.formpanel=$s.extend($s.base,{xtype:"formpanel",getForm:function(){return this},isValid:function(){this.$ex;var e,t=this.items,i=!0;for(e=0;e<t.items.length;e++)0==t.items[e].isvalid()&&(i=!1);return i},submit:function(e){var t=this,i=(t.$ex,new FormData);t.getValues(i),$.ajax({url:e.url,type:"POST",data:i,cache:!1,dataType:"json",processData:!1,contentType:!1,timeout:6e5,success:function(i,o,n){e.success&&(t.errorReader.jsonData=i,e.success(t))},error:function(e,t,i){}})},getValues:function(e){var t,i,o=this.items;for(let n=0;n<o.items.length;n++)"fileuploadfield"==(t=o.items[n]).xtype?t.$$f&&e.append(t.name,t.$$f,t.getRawValue()):t.getValue&&t.name&&(i=t.getValue())&&e.append(t.name,i)}}),$s.store=$s.extend($s.dstore,{xtype:"store"}),$s.menu=$s.extend($s.base,{xtype:"menu",_createMenuUI:function(e){var t=this;t.$px&&(t.$px.close(),t.$px=null);var i={view:"contextmenu",hidden:!0,autoheight:!0,borderless:!0,data:[],on:{onMenuItemClick:function(e){var i=t.$px.getMenuItem(e).key;t._processItem(t._items,i)},onHide:function(){e&&(t.$px.close(),t.$px=null)}}};return t._updateMenuItem(i.data,t._items,0),t.$px=webix.ui(i),t.$px},_processItem:function(e,t){var i,o;for(i=0;i<e.length;i++){if(e[i]._menukey==t){o=1,e[i].handler&&e[i].handler.call(e[i].scope||e[i]);break}if(e[i].menu&&(o=this._processItem(e[i].menu._items,t)))break}return o},_updateMenuItem:function(e,t,i){var o,n;for(o=0;o<t.length;o++)(n="split"==t[o].xtype||"splitter"==t[o].xtype?{$template:"Separator",key:++i}:{value:t[o].text,key:++i}).hidden=t[o].hidden,t[o].ownerCt=this,t[o]._menukey=n.key,this.instance&&(t[o].instance=this.instance),t[o].menu&&(n.submenu=[],i=this._updateMenuItem(n.submenu,t[o].menu._items,i)),n.hidden||e.push(n);return i},showBy:function(e){var t,i,o,n,a,s=$("body"),r=s.width(),l=s.height(),d=$(e).offset();t=this._createMenuUI(1),i=d.left+40,o=d.top+10,t.setPosition(i,o),t.show(),n=t.$width||200,a=t.$height||200,(i+n>r||o+a>l)&&(i+n>r&&(i=r-a-40),o+a>l&&(o=l-a-10),t.setPosition(i,o))},showAt:function(e,t){var i=this._createMenuUI(1);i.setPosition(e,t),i.show()}}),$s.menuitem=$s.extend($s.base,{xtype:"menuitem"}),$s.toolbar=$s.extend($s.base,{xtype:"toolbar"}),$s.textfield=$s.extend($s.base,{xtype:"textfield"}),$s.numberfield=$s.extend($s.base,{xtype:"numberfield"}),$s.button=$s.extend($s.base,{xtype:"button",initComponent:function(){var e=this;e.menu&&("object"==typeof e.menu&&e.menu.length&&(e.menu={xtype:"menu",items:e.menu}),e.menu.items&&e.menu.items.length&&(e.menu.xtype||(e.menu.xtype="menu"),e._menu=e.menu,e.instance&&(e.menu.instance=e.instance),e.menu=e.createClassComp(e.menu))),$s.button.superclass.initComponent.call(e)}}),$s.splitbutton=$s.extend($s.button,{xtype:"splitbutton",initComponent:function(){var e,t=this,i=t.menu,o=0;if(i&&i.items&&i.items.length){for(e=0;e<i.items.length;e++)if("colorpicker"==i.items[e].xtype){o=i.items[e];break}o&&($s.apply(t,o,null,!0),t.xtype="colorpicker",t.hideInput=!0)}$s.splitbutton.superclass.initComponent.call(t)}}),$s.baseCSSPrefix="",$s.viewport=$s.extend($s.panel,{xtype:"viewport",isviewport:!0,validateLayout:function(){var e=this,t=$(document),i=t.width(),o=t.height(),n=e.$ex;e._adjust(n),e.chlidProcessEvents(e,i,o,e.$width,e.$height,{name:"resize",_stopPropagation:!1,_preventDefault:!1,owner:e,down:!0})}}),$s.gridpanel=$s.extend($s.panel,{xtype:"gridpanel",clearSelection:function(){},edit_cell:function(e,t,i,o,n){var a=e.data.id;this.$dx.getColumnConfig(i),this.$dx.editCell(a,i,o,n)}}),$s.dataview=$s.extend($s.panel,{xtype:"dataview"}),$s.html=$s.extend($s.base,{xtype:"html"}),$s.split=$s.extend($s.base,{xtype:"split"}),$s.spacer=$s.extend($s.base,{xtype:"spacer"}),$s.splitter=$s.extend($s.split,{xtype:"splitter"}),$s.colorpicker=$s.extend($s.base,{xtype:"colorpicker"}),$s.datefield=$s.extend($s.base,{xtype:"datefield"}),$s.fieldcontainer=$s.extend($s.base,{xtype:"fieldcontainer"}),$s.fieldset=$s.extend($s.base,{xtype:"fieldset",initComponent:function(){var e=this;e.layout||(e.layout={type:"anchor"}),$s.fieldset.superclass.initComponent.call(e)}}),$s.checkboxgroup=$s.extend($s.base,{xtype:"checkboxgroup"}),$s.radiogroup=$s.extend($s.base,{xtype:"radiogroup",initComponent:function(){var e,t,i=this,o=i.items;if(i.$options=[],o)for(e=0;e<o.length;e++)(t=new $s.radio(o[e])).name=t.name,t.value=t.boxLabel||t.name||t.inputValue,t.checked&&(i.value=t.value),i.$options.push(t);delete i.items,$s.radiogroup.superclass.initComponent.call(i)}}),$s.radio=$s.extend($s.object,{xtype:"radio"}),$s.checkbox=$s.extend($s.base,{xtype:"checkbox"}),$s.combobox=$s.extend($s.base,{xtype:"combobox"}),$s.displayfield=$s.extend($s.base,{xtype:"displayfield"}),$s.tbtext=$s.extend($s.base,{xtype:"tbtext"}),$s.textarea=$s.extend($s.base,{xtype:"textarea",initComponent:function(){var e=this;e.inputEl=new $s.body(e,1),$s.textarea.superclass.initComponent.call(e)},getRawValue:function(){return this.getValue()},selectText:function(e,t){var i=this.inputEl.dom;i&&(i.setSelectionRange?(i.focus(),i.setSelectionRange(e,t)):i.createTextRange?(range=i.createTextRange(),range.collapse(!0),range.moveEnd("character",t),range.moveStart("character",e),range.select()):i.selectionStart&&(i.selectionStart=e,i.selectionEnd=t))}}),$s.view=$s.extend($s.base,{xtype:"view"}),$s.htmleditor=$s.extend($s.base,{xtype:"htmleditor"}),$s.propertygrid=$s.extend($s.base,{xtype:"propertygrid",setSource:function(e,t){var i=this,o=(i.$ex,i.$dx),n=[];i._pvalue=e,$.each(i._pvalue,(function(e,i){var o,a,s,r={id:e,label:e,type:"text",value:i};if(t[e]&&(o=t[e].editor))if("combobox"==o.xtype&&o.store&&o.store.data&&o.store.data.length)for(r.type="select",r.options=[],s=o.valueField,a=0;a<o.store.data.length;a++)r.options.push(o.store.data[a][s]);else"checkbox"==o.xtype?r.type="checkbox":"color"==o.xtype&&(r.type="color");n.push(r)})),o.define("elements",n),o.refresh(),$(i.el.dom).height(i.$height||100)},getSource:function(){var e,t=this.$dx;return t&&(e=t.getValues()),e},initComponent:function(){$s.propertygrid.superclass.initComponent.call(this)}}),$s.dropzone=$s.extend($s.base,{xtype:"dropzone",initComponent:function(){var e=this,t=Array.prototype.slice.call(arguments),i=t[0];i&&(e.$config=i,e.initDrop(i)),$s.dropzone.superclass.initComponent.apply(e,t)},initDrop:function(e){var t=this;if(e.targetEl){var i=function(e){var i=$s.getEvent(e);t.onNodeOver&&t._dinfo&&t.onNodeOver(t._dinfo.t,t._dinfo.dd,i,t._dinfo.data)};webix.DragControl.addDrop(e.targetEl,{$dragIn:function(e,o,n){var a,s=webix.DragControl.getContext(),r=o,l=s.from.$comp,d={records:[]},c=$s.getEvent(n);return t.getTargetFromEvent&&(r=t.getTargetFromEvent({browserEvent:n})),l&&l.store&&s.source&&s.source.length&&$.each(s.source,(function(e,t){var i=l.store._pull[t];i&&d.records.push(i)})),t.onNodeEnter&&t.onNodeEnter(r,a,c,d),t.onNodeOver&&(t._dinfo={t:r,dd:a,data:d},$("body").bind("mousemove",i)),o},$dragOut:function(e,t,o,n){$("body").unbind("mousemove",i)},$drop:function(e,o,n){var a=webix.DragControl.getContext(),s=o,r=a.from.$comp,l={records:[]},d=$s.getEvent(n);$("body").unbind("mousemove",i),t.getTargetFromEvent&&(s=t.getTargetFromEvent({browserEvent:n})),r&&r.store&&a.source&&a.source.length&&$.each(a.source,(function(e,t){var i=r.store._pull[t];i&&l.records.push(i)})),t.onNodeDrop&&t.onNodeDrop(s,undefined,d,l)},$drag:function(e,t,i){},$dragCreate:function(e,t){},$dragDestroy:function(e,t){}})}}}),$s.menuseparator=$s.extend($s.base,{xtype:"menuseparator"}),$s.tbseparator=$s.extend($s.base,{xtype:"tbseparator"}),$s.fileuploadfield=$s.extend($s.base,{xtype:"fileuploadfield",getRawValue:function(){var e=this;return e._s&&e._s.text?e._s.text.getValue():null},clearValue:function(){var e=this;e._s&&e._s.text&&e._s.text.setValue("")},getValue:function(){var e;return this.$$f&&(e=this._s.text.getValue()),e}}),$s.hiddenfield=$s.extend($s.base,{xtype:"hiddenfield"}),$s.create=function(){var e,t,i,o,n=Array.prototype.slice.call(arguments);function t(){}return o=n[0],n.splice(0,1),"string"==typeof o?(e=o.split("."),i=$s[e[1]]):i=o,t.prototype=i.prototype,t=new t,i.apply(t,n),t},IG$._cdedtor=$s.extend($s.window,{modal:!1,region:"center",layout:"fit",closable:!1,resizable:!1,width:800,height:600,init_f:function(){var e=this.component;this.down("[name=tarea]").setValue(e.getValue())},initComponent:function(){this.title=this.component.fieldLabel||"Editor",$s.apply(this,{items:[{xtype:"panel",layout:{type:"fit"},padding:ig$.padding,items:[{xtype:"textarea",name:"tarea",flex:1,hidezoom:!0}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){var e=this,t=e.component;t.setValue(e.down("[name=tarea]").getValue()),e.close(),setTimeout((function(){t.focus()}),10)},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$._cdedtor.superclass.initComponent.apply(this,arguments)}});
IG$._berr=0,IG$.ShowErrorMessage=function(e,t,n){var r=e.errorcode,a=e.errormsg,i=e.detail||null,s=e.stacktrace||null,o=!1;switch(r){case"0x7500":case"0x6d00":o=!0;break;case"0x8f00":if(i){var c=i.split("|"),l=["<br/><p>"];$.each(c,(function(e,t){var n;t&&(t.indexOf("L_PWD_F_SPEC_CHAR_")>-1?(n=t.substring(18),t="L_PWD_F_SPEC_CHAR"):t.indexOf("L_PWD_F_LEN_")>-1&&(n=t.substring(12),t="L_PWD_F_LEN"),l.push(IRm$.r1(t,n)+"<br/>"))})),l.push("</p>"),i=l.join("")}}0==o&&(i||s||n)?IG$.alertmsg(ig$.appname,a+"<br/>\n\n"+(i||""),null,t,1,"error",null,{errdesc:a,errmsg:i,errstack:s,params:n},null,1):IG$.alertmsg(ig$.appname,a+"\n\n"+(i||""),null,t,1,"error",null,null,null,1)},IG$._dofilter=function(e,t,n,r){var a,i=e.down("[name="+t+"]")||e;r||(r=i.down("[name=_filter]")),(a=r?r.getValue():null)?(r&&r.clearInvalid(),i.store.addFilter({dataIndex:n,operator:"like",value:a})):(r&&r.markInvalid("Required!"),i.store.removeFilter({dataIndex:n,operator:"like"}))},IG$.ShowWarning=function(e,t,n){IG$.alertmsg(ig$.appname,e,null,t,"info"==n?0:1,n||"warning",null,null,null,1)},IG$.ShowError=function(e,t,n,r){IG$.alertmsg(ig$.appname,e,null,t,1,"error",n,r,null,1)},IG$.ShowConnectionError=function(e){IG$.alertmsg(ig$.appname,IRm$.r1("M_ERR_CONNECT"),null,e,1,"error",null,null,null,1)},IG$.showDlg=function(e,t){var n=e?e.instance:t.instance||null;n&&(n._popupDlgs=n._popupDlgs||[],n._popupDlgs.push(t)),t.instance=n,t.show()},IG$.checkLogin=function(e,t,n,r,a){var i=new IG$._rpc$;i.checklogin=!0,e&&e.setLoading&&e.setLoading(!0),(a=a||(e?e.instance:null)||(t?t.instance:null))&&(a._popupDlgs=a._popupDlgs||[]),i.init(e,{ack:"ping",payload:{},mbody:{}},e,(function(i){e&&e.setLoading&&e.setLoading(!1),t&&(a&&a._popupDlgs.push(t),t.show(null,r)),n&&n.call(e)})),i.send(a)},IG$.alertmsg=function(e,t,n,r,a,i,s,o,c,l){if(2==a&&(c=1),l&&IG$._berr)return IG$._berr.err.push({mtype:i,stack:s,parent:r,messagecontent:o}),void $(".cnt",IG$._berr.h).text(IG$._berr.err.length).show();var d,p,u,m,g,h=$("body"),_=$("<div class='igc-alert-cnt'>"+(a?"<div class='igc-alert-bg'></div>":"")+"<div class='igc-alert-body'></div></div>").appendTo(h),f=$(".igc-alert-body",_),v=IRm$.r1("M_UNKNOWN"),I="",b="",k=window.bowser;switch(l&&(IG$._berr={h:_,err:[{mtype:i,stack:s,parent:r,messagecontent:o}]}),i=i||"warning"){case"error":v=IRm$.r1("M_ERROR");break;case"warning":v=IRm$.r1("M_WARNING");break;case"info":v=IRm$.r1("M_INFO");break;case"success":v=IRm$.r1("M_SUCCESS")}if(o){if(o.params){for(m in o.params)I&&(I+="\n"),I+=m+": "+o.params[m];I+="\n\n",o.errstack&&(I+="stacktrace :"+o.errstack+"\n")}else I="stacktrace : "+o.errstack+"\n";if(k){for(g in k)"function"!=typeof k[g]&&(b+=g+": "+k[g]+"\n");I=b+"\n\n"+I,o.binfo=b}}if(d=$("<div class='igc-alert'><a class='close'>&#215;</a><div class='detail' style='display: none'>"+IRm$.r1("M_DETAIL")+"</div><div class='cnt' style='display:none'></div><h4 class='alert-heading'>"+v+"</h4><span>"+t+"</span></div>").appendTo(f),p=$(".close",d)[c?"hide":"show"](),u=$(".detail",d),I&&u.show(),IG$.ErrorDialog||u.hide(),d.addClass("igc-alert-"+i),u.bind("click",(function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(document),n=t.width(),r=t.height(),a=Math.min(n-20,600),i=Math.min(r-20,520),s=new IG$.ErrorDialog({messagecontent:o,width:a,height:i,renderTo:_[0]});s.setPosition((_.width()-(s.width||s.$width))/2,(_.height()-(s.height||s.$height))/2),s.show()})),p.bind("click",(function(e){e.preventDefault(),e.stopImmediatePropagation(),_.fadeOut((function(){n&&n.call(r),_.remove(),l&&(IG$._berr=0)}))})),c){var G,w,E=[];6==c||14==c?(E.push({text:IRm$.r1("B_YES"),bseq:2,dlg:"yes"}),E.push({text:IRm$.r1("B_NO"),bseq:4,dlg:"no"}),14==c&&E.push({text:IRm$.r1("B_CANCEL"),bseq:8,dlg:"cancel"})):1!=c&&9!=c||(E.push({text:IRm$.r1("B_OK"),bseq:1,dlg:"ok"}),9==c&&E.push({text:IRm$.r1("B_CANCEL"),bseq:8,dlg:"cancel"})),G=$("<div class='igc-alert-buttons'><ul></ul></div>").appendTo(d),w=$("ul",G),$.each(E,(function(e,t){var a=$("<li></li>").appendTo(w);$("<div class='igc-button'>"+t.text+"</div>").appendTo(a).bind("click",(function(e){e.preventDefault(),e.stopImmediatePropagation(),_.fadeOut((function(){n&&n.call(r,t.dlg),_.remove(),l&&(IG$._berr=0)}))}))}))}else d.bind("click",(function(e){e.preventDefault(),e.stopImmediatePropagation(),_.fadeOut((function(){n&&n.call(r),_.remove(),l&&(IG$._berr=0)}))}));a||(_.addClass("igc-no-modal"),setTimeout((function(){_.fadeOut((function(){n&&n.call(r),_.remove(),l&&(IG$._berr=0)}))}),1500))},IG$.confirmMessages=function(e,t,n,r,a,i){IG$.alertmsg(e||IRm$.r1("L_SAVE_CHANGES"),t||IRm$.r1("L_SAVE_C_MSG"),n,a,1,"info",null,null,i||6)},IG$.checkLock=function(e,t){var n=new IG$._rpc$;n.init(e,{ack:"helpcontent",payload:{uid:e.uid},mbody:{option:"lock",detail:"check"}},e,(function(n){if(n){new IG$.LockWindow({lparam:n,callback:new IG$.callBackObj(e,(function(n){t.call(e,n)}))}).show(e)}else{var r=new IG$._rpc$;r.init(e,{ack:"helpcontent",payload:{uid:e.uid},mbody:{option:"lock",detail:"set"}},e,(function(e){}),!1),r.send()}}),!1),n.send()},window.$s&&(IG$.v$pnl=$s.extend($s.panel,{frameHeader:!1,initComponent:function(){this.on("destroy",(function(e,t){e.__dx=!0})),IG$.v$pnl.superclass.initComponent.call(this)},destroy:function(){var e=this;e.__dx=!0,setTimeout((function(){IG$.v$pnl.superclass.destroy.call(e)}),10)},setLoading:function(e,t,n){var r=this,a={};return clearTimeout(r.__etimer),r.rendered&&0==e&&(r.__etimer=setTimeout((function(){r.customLoad&&!0!==n&&r.customLoad(!1),r.loadMask&&r.loadMask.destroy(),r.rendermask=null,r.loadMask=null}),100)),r.rendered&&!1!==e&&(IG$.isObject(e)?IG$.apply(a,e):IG$.isString(e)&&(a.msg=e),a.dom=$(r.el.dom),a.target=r,r.loadMask||(r.loadMask=new IG$._mask(a),r.loadMask.show())),r.loadMask}}),IG$.LockWindow=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:300,height:180,callback:null,_closedlg:function(e){this.callback&&this.callback.execute(e),this.close()},initComponent:function(){var e=this;e.title=IRm$.r1("M_LOCK_TITLE"),$s.apply(this,{items:[{xtype:"html",name:"txtlock",padding:ig$.padding,html:"<div class='igc-lockinfo'></div>"}],buttons:[{text:IRm$.r1("B_UNLOCK"),handler:function(){var t=new IG$._rpc$;t.init(e,{ack:"helpcontent",payload:{uid:e.uid},mbody:{option:"lock",detail:"unlock"}},e,(function(t){e._closedlg("unlock")}),!1),t.send()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this._closedlg("close")},scope:this}],listeners:{afterrender:function(e){var t,n=this.down("[name=txtlock]"),r=this.lparam||{},a=Number(r.date),i="<br/><span class='igc-lock-date'>"+new Date(a).format("Y-m-d H:i;s")+"</span>";this.uid=r.uid,t=IRm$.r1("M_LOCK_MSG",["<span class='igc-lock-user'>"+r.username+"("+r.userid+")</span>",i]),$(".igc-lockinfo",$(n.body.dom)).html(t)}}}),IG$.LockWindow.superclass.initComponent.apply(this,arguments)}}),IG$.ErrorDialog=$s.extend($s.panel,{modal:!0,layout:"fit",closable:!1,resizable:!1,callback:null,_cerr:0,showError:function(e){var t,n=this,r=[];if(e.params){for(t in e.params)r.push(t+": "+e.params[t]);r.push("","")}var a=n.down("[name=m_msg]"),i=$(".ing-error-dlg",$(a.body.dom));i.empty(),IG$._berr&&IG$._berr.err.length>1&&$("<div class='ing-error-cnt'>("+(n._cerr+1)+"/"+IG$._berr.err.length+" messages)</div>").appendTo(i),i.append("<div class='ing-error-desc'>"+(e.errcode||"")+":"+e.errdesc+"</div>"),i.append("<div class='ing-error-msg'>"+(e.errmsg||"")+"</div>"),$("<div class='ing-error-stack'></div>").appendTo(i).text(e.errstack||""),$("<div class='ing-error-stack'></div>").appendTo(i).text(r.join("\n")||""),$("<div class='ing-error-stack'></div>").appendTo(i).text(e.binfo||""),n.cboard=$("<textarea class='ing-error-cboard'></textarea>").appendTo(i).hide()},initComponent:function(){var e=this;$s.apply(this,{title:IRm$.r1("L_SERVER_MESSAGE"),items:[{xtype:"html",name:"m_msg",border:0,html:"<div class='ing-error-dlg'></div>"}],buttons:[{text:IRm$.r1("B_CLIPBOARD"),handler:function(){e.cboard.show();var t=function(e){var t,n=[];if(n.push(e.errdesc||"no description"),e.params){for(t in e.params)n.push(t+": "+e.params[t]);n.push("","")}else n.push("stacktrace : "+(e.errstack||""));return n.join("\n")},n=[];IG$._berr&&IG$._berr.err.length?$.each(IG$._berr.err,(function(e,r){n.push(t(r.messagecontent))})):n.push(t(e.messagecontent));var r="",a=window.bowser;if(a){for(bk in a)"function"!=typeof a[bk]&&(r+=bk+": "+a[bk]+"\n");n.push(r)}e.cboard.text(n.join("\n\n")),e.cboard.select();try{document.execCommand("copy")}catch(e){}},scope:this},"-",{text:IRm$.r1("B_PREVIOUS"),hidden:!(IG$._berr&&IG$._berr.err.length>1),handler:function(){var e=this,t=IG$._berr.err,n=e._cerr-1>-1?t[e._cerr--]:null;n&&e.showError(n.messagecontent)},scope:this},{text:IRm$.r1("B_NEXT"),hidden:!(IG$._berr&&IG$._berr.err.length>1),handler:function(){var e=this,t=IG$._berr.err,n=t.length,r=e._cerr+1<n?t[e._cerr++]:null;r&&e.showError(r.messagecontent)},scope:this},"-",{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(t){var n=e.messagecontent;e.showError(n)}}}),IG$.ErrorDialog.superclass.initComponent.apply(this,arguments)}})),IG$._scrshot=function(e,n,r,a){var i,s,o,c,l,d,p=$("body"),u=p.width(),m=p.height();!1!==ig$.report_screenshot&&((i=IG$.__scrs=IG$.__scrs||{})._close_timer&&clearTimeout(i._close_timer),i._close_timer=-1,r?(i.container||(i.container=$("<div class='igc-screenshot-cont'><div class='igc-screenshot-img'></div></div>").appendTo($("body")),i.img=$(".igc-screenshot-img",i.container),i.container.bind("click",(function(){clearTimeout(i._close_timer),i._close_timer=-1,i.container.hide()})),i._w=i.container.width(),i._h=i.container.height(),$("body").bind("click",(function(){i.container.hide()}))),i.container.show(),o=n.indexOf(":"),t=n.substring(0,o),s=n.substring(o+1),i.__curuid!=s&&(c=$(e).offset(),i._curuid=s,i.img.css({backgroundImage:"url('"+ig$.servlet+"/screenshot?sreq=screenshot&uid="+s+"&uniquekey="+IG$.getUniqueKey()+"')"}),(d=c.top)+i._h>m&&(d=c.top-i._h),(l=c.left+$(e).width())+i._w>u&&(l=c.left-i._w),i.container[0].style.top=d+"px",i.container[0].style.left=l+"px"),i._close_timer=setTimeout((function(){i.container&&i.container.hide()}),2e3)):a?i.container&&i.container.hide():i._close_timer=setTimeout((function(){i.container&&i.container.hide()}),2e3))},IG$.m2ER=function(){},IG$._mask=function(e){var t,n=this;n.owner=e.target,n.mask=$("<div class='igc-loading'></div>"),t=n.make_dom(n.mask),$(".igc-loading-msg",t).append(e.msg||IRm$.r1("L_LOADING")),n.owner.rendermask=n.mask,e.dom?e.dom.append(n.mask):n.owner._el.dom.append(n.mask)},IG$._mask.prototype={make_dom:function(e){var t;return $("<div class='igc-loading-mask'></div>").appendTo(e),t=$("<table class='igc-loading-body'><tr><td></td></tr></table>").appendTo(e),$("<div class='igc-loading-box'><table><tr><td><div class='igc-loading-proc'><div class='spinner'><div class='rect1'></div><div class='rect2'></div><div class='rect3'></div><div class='rect4'></div><div class='rect5'></div></div></div></td><td><span class='igc-loading-msg'></span></td></tr></table></div>").appendTo($("td",t))},show:function(){this.mask.show()},destroy:function(){var e=this;e.mask&&(e.mask.remove(),e.mask=null)}},IG$.$snippet={sql:[{text:"IF Condition",snippet:['\n@IF ${param}="value"','@ELSEIF ${param}="value"',"@ELSE","@END IF\n"]}],java:[{text:"Query - SELECT",snippet:["\n@SQL_START=arrayoutputname","SELECT","\tcolumns","FROM","\ttablename","WHERE","\tcolumn=:param","@SQL_END\n"]},{text:"Query - INSERT",snippet:["\n@SQL_START","INSERT INTO tablename (","\tcolumn1",,") VALUES (","\t:param",")","@SQL_END\n"]},{text:"Query - UPDATE",snippet:["\n@SQL_START","UPDATE tablename ","SET","\tcolumn=:param","WHERE","\tcolumn=:param","@SQL_END\n"]},{text:"Input parameter",snippet:['params.get("paramname");\n']},{text:"Output parameter",snippet:['this.set("paramname", value);\n']},{text:"Output Tabulardata",snippet:["\nList<String> header = new ArrayList<String>();","List<List<Object>> data = new ArrayList<List<Object>>();","//set header and data","GridOutputModel gparam = new GridOutputModel();","gparam.setHeaders(header);","gparam.setData(data);",'this.oparam.put("outputparam", gparam);\n']}],javascript:[{text:"Method",snippet:["\nmethod_name: function(action) {","\tvar me = this,","\t\tparameters = me.parameters,","\t\tctrl = action ? action.ctrl : null;","","}\n\n"]}]},IG$._ctxtmn=function(e,t,n,r){var a,i=[];!n||n&&!n.length||($.each(n,(function(e,t){var n={};t.snippet?(n.text=t.text,n.handler=function(){r.execute(t)}):n=t,i.push(n)})),a=new $s.menu({instance:e,margin:"0 0 10 0",floating:!0,items:i}),t.on("contextmenu",(function(e){e.preventDefault(),e.stopImmediatePropagation();var n=e.originalEvent;n?a.showAt(n.pageX,n.pageY):a.showBy(t)})))},IG$._apndT=function(e,t){e.focus();var n=e.prop("selectionStart"),r=e.val(),a=r.substring(0,n),i=r.substring(n,r.length);e.val(a+t+i)},IG$._moveG=function(e,t){var n=e.getSelectionModel().getSelection(),r=n&&n.length?n[0]:null;if(r){var a=e.getStore().indexOf(r);if(t<0){if(--a<0)return}else if(++a>=e.getStore().getCount())return;e.getStore().remove(r),r=e.getStore().insert(a,r),e.getSelectionModel().select(r,!0)}};
IG$.dockingWidget=function(e,t,i){var o=this;o.owner=e,e.editmode=1,o.container=!1,o.showtitle=!0,o._v=!0,o.visible=!0,o.x=i&&i.x?i.x:null,o.y=i&&i.y?i.y:null,o.width=i&&i.width?i.width:null,o.height=i&&i.height?i.height:null,o.fixed_width=!1,o.fixed_height=!1,o.fit_content_h=!1,o.hidetitle=!1,o.docid=t,o.activeTab=0,o.dragging=!1,o.box=$("<div class='idv-dk-main' "+t+"></div>").css({position:"relative",width:"100%",height:"100%"}),o.binner=$("<div class='ibox float-e-margins'></div>").css({position:"relative",width:"100%",height:"100%"}).appendTo(o.box),o.bcollapse=$("<div class='dock_collpase_indicator'></div>").appendTo(o.box).hide(),o.box_title=$("<div class='ibox-title'></div>").appendTo(o.binner).dselect(),o.box_sizer=$("<div class='ibox-sizer'></div>").appendTo(o.binner),o.box_sizer_helper=$("<div class='ui-resizable-helper'></div>").appendTo(o.box_sizer),o.box_container=$("<div class='ibox-content ibox-widget-container'></div>").appendTo(o.box_sizer).css({width:"100%",height:"100%"}),$("<h5><div class='dock_title_icon'></div><span id='dock_title_text'>&nbsp;</span></h5>").appendTo(o.box_title),o.btnarea=$("<div class='ibox-tools'></div>").appendTo(o.box_title),o.measure_selector=$("<select class='dock_measure_selector'></select>").appendTo(o.box_title),o.measure_selector.bind("change",(function(e){var t,i=o.measure_selector.val(),l=-1;if(i&&o._measures_sel){for(t=0;t<o._measures_sel.length;t++)if(o._measures_sel[t]==i){l=t;break}l>-1&&o.view._refreshMeasureGroup.call(o.view,l)}})),o.btnmap={},0!=(i=i||{}).draggable&&o.box.draggable({handle:o.box_title,revert:!0,delay:300,distance:5,start:function(t,i){if(!e.editmode&&(!o.is_float||o.is_float&&!o.fl_moveable))return!1;o.dragging=!0,e.editmode&&e.showDropProxy.call(e,t,i,o.is_float)},drag:function(t,i){e.editmode&&e.dragOver.call(e,t,i,o.is_float)},stop:function(t,i){(e.editmode||o.is_float&&o.fl_moveable)&&e.dragStop.call(e,t,i,o.is_float),o.dragging=!1}}),o.box_sizer.resizable({helper:"ui-resizable-helper",maxHeight:2e3,maxWidth:o.owner.getMaxWidth(),start:function(e,t){o._bsizer_size={w:o.box_sizer.width(),h:o.box_sizer.height()}},stop:function(e,t){var i,l=o.box.width(),s=o.box_sizer.width(),n=o._bsizer_size.w-s,a=o.owner.getMaxWidth(),_=o._pc,d=l-n;i=_&&_.parent&&1==_.parent.d?12:Math.round(d/a*12),o.$box.removeClass(o.$box_class),o.$box_class="col-lg-"+i,o.$box.addClass(o.$box_class),o.box_sizer.css({width:"100%"}),o.resizeH()}}),o.box_sizer.bind("resize",(function(){o.__collapsed||o.resizeH()})),o.bcollapse.bind("click",(function(){o.set_collapse(!1)})),o._dzid=o.owner._dzid+"_"+o.docid,o.resizeH(),i&&(o.fixed_width=void 0!==i.fixed_width?i.fixed_width:o.fixed_width,o.fixed_height=void 0!==i.fixed_height?i.fixed_height:o.fixed_height,o.fit_content_h=void 0!==i.fit_content_h?i.fit_content_h:o.fit_content_h,o.showtitle=!i.hidetitle,o.showTitle(o.showtitle),o.setTitle(i.title),o.setPanelCss(i.panel_css),o.fl_resizable=i.fl_resizable,o.fl_moveable=i.fl_moveable,o.hide_maximize=i.hide_maximize,o.fl_collapsed=i.fl_collapsed,o.fl_collapsible=i.is_float&&!0===i.fl_collapsible,o.fl_collapse_css=i.fl_collapse_css,o.setFloat(i.is_float),o.objtype=o.objtype||i.objtype),o.init()},IG$.dockingWidget.prototype={validateProperty:function(e){var t=this;switch(t.objtype){case"SHEET":case"FILTER":case"TEXT":case"RPT_VIEW":t.container=!1,t.children=[];break;case"PANEL":case"_dc":case"TAB":t.container=!0,t._direction=0,t.children=[]}if("_dc"!=t.objtype&&t._pc){for(var i=t._pc.parent;i&&"PANEL"!=i.objtype;)i=i.parent;i&&i.lt&&i.lt.ubody.panel_css&&i.lt.ubody.panel_css.indexOf("no_border_children")>-1?(t.panel_css=t.panel_css||"",t.panel_css.indexOf("no_border")<0&&(t.panel_css+=";no_border",t.setPanelCss(t.panel_css))):i&&i.lt&&t.panel_css&&t.panel_css.indexOf(";no_border")>-1&&(t.panel_css=t.panel_css.replace(";no_border",""),t.setPanelCss(t.panel_css))}e&&t._pc&&t._pc.children&&$.each(t._pc.children,(function(t,i){i.lt&&i.lt.ubody&&i.lt.ubody.validateProperty(e)})),"SHEET"==t.objtype&&t.view&&!t._bind_event&&(t.view.on("_view_changed",(function(e){var i=t.view.sheetoption;i&&i.model&&t.btnmap.selchart.el[i.model.tb_chart&&1==t.view.activeView?"show":"hide"]()})),t._bind_event=1)},$upd_exec:function(){var e=this;e.get_sop();"_dc"!=e.objtype&&e.box_sizer.resizable("enable")},setToolButtons:function(e){var t,i=this,o=e||[],l=(i.owner,i.btnarea),s=ig$.sheet_toolbar$;t=i.btnmap={},l.empty(),"SHEET"==i.objtype&&(o.push({name:"viewgrid",tooltip:IRm$.r1("L_VIEW_GRID"),hidden:!0,cls:"idv-dk-btn-vgrid",handler:function(e){this.view.updateViewMode.call(this.view,"grid")},scope:i}),o.push({name:"viewchart",tooltip:IRm$.r1("L_VIEW_CHART"),hidden:!0,cls:"idv-dk-btn-vchart",handler:function(e){this.view.updateViewMode.call(this.view,"chart")},scope:i}),o.push({name:"selchart",tooltip:IRm$.r1("L_CHART_SEL"),hidden:!0,cls:"idv-dk-btn-chartsel",handler:function(e){var t=this,i=t.view.sheetoption;i&&i.model&&t.owner.configDock(t.docid,"config_selchart")},scope:i}),o.push({name:"viewrstat",hidden:!0,tooltip:IRm$.r1("L_VIEW_RSTAT"),cls:"idv-dk-btn-vrstat",handler:function(e){this.view.updateViewMode.call(this.view,"r")},scope:i})),o.push({name:"exp_excel",tooltip:IRm$.r1("L_EXPORT_EXCEL"),hidden:!0,cls:"idv-dk-btn-e-xls",handler:function(e){this.view.exportSheet.call(this.view,"EXCEL")},scope:i}),o.push({name:"exp_pdf",hidden:!0,tooltip:IRm$.r1("L_EXPORT_PDF"),cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"PDF")},scope:i}),o.push({name:"jasper_excel",hidden:!0,tooltip:IRm$.r1("L_EXPORT_JASPER_EXCEL"),cls:"idv-dk-btn-e-xls",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_EXCEL")},scope:i}),o.push({name:"jasper_pdf",hidden:!0,tooltip:IRm$.r1("L_EXPORT_JASPER_PDF"),cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_PDF")},scope:i}),o.push({name:"jasper_ppt",hidden:!0,tooltip:IRm$.r1("L_EXPORT_JASPER_PPT"),cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_PPT")},scope:i}),o.push({name:"jasper_docx",hidden:!0,tooltip:IRm$.r1("L_EXPORT_JASPER_DOCX"),cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_DOCX")},scope:i}),o.push({name:"jasper_rtf",hidden:!0,tooltip:IRm$.r1("L_EXPORT_JASPER_RTF"),cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_RTF")},scope:i}),o.push({name:"jasper_html",hidden:!0,tooltip:IRm$.r1("L_EXPORT_JASPER_HTML"),cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_HTML")},scope:i}),o.push({name:"office_0",hidden:!0,tooltip:IRm$.r1("L_EXPORT_OFFICE_0"),cls:"idv-dk-btn-e-off-0",handler:function(e){this.view.exportSheet.call(this.view,"OFFICE_0")},scope:i}),o.push({name:"office_1",hidden:!0,tooltip:IRm$.r1("L_EXPORT_OFFICE_1"),cls:"idv-dk-btn-e-off-1",handler:function(e){this.view.exportSheet.call(this.view,"OFFICE_1")},scope:i}),o.push({name:"office_2",hidden:!0,tooltip:IRm$.r1("L_EXPORT_OFFICE_2"),cls:"idv-dk-btn-e-off-1",handler:function(e){this.view.exportSheet.call(this.view,"OFFICE_2")},scope:i}),o.push({name:"office_3",hidden:!0,tooltip:IRm$.r1("L_EXPORT_OFFICE_3"),cls:"idv-dk-btn-e-off-1",handler:function(e){this.view.exportSheet.call(this.view,"OFFICE_3")},scope:i}),o.push({name:"exp_csv",hidden:!0,tooltip:IRm$.r1("L_EXPORT_CSV"),cls:"idv-dk-btn-e-csv",handler:function(e){this.view.downloadAllCSV.call(this.view,"CSV")},scope:i}),ig$.features&&!1===ig$.features.ml&&"SHEET"==i.objtype&&o.push({name:"ml_learn",cls:"ig_ml_learn",tooltip:IRm$.r1("L_ML"),hidden:!0,handler:function(e){this.view.mlLearn.call(this.view)}}),s&&s.length&&$.each(s,(function(e,t){o.push({name:t.key,label:t.label,tooltip:t.tooltip,hidden:!0,cls:t.cls,handler:function(e){try{t.handler&&t.handler.call(t.scope||i.view,i.view,t.key)}catch(e){}},scope:i})})),o.push({name:"pivot",hidden:!0,tooltip:IRm$.r1("L_PIVOT"),cls:"icon-toolbar-pivot",handler:function(e){var t=this.owner;t.configDock.call(t,e.docid,"config_pivot")},scope:i}),o.push({name:"config",hidden:!0,tooltip:IRm$.r1("L_WIDGET_OPTION"),cls:"icon-grid-config",handler:function(e){var t=this.owner;t.configDock.call(t,e.docid,"config_doc")},scope:i}),o.push({name:"collapse",hidden:!0,tooltip:IRm$.r1("B_COLLAPSE"),cls:"dock_collapse_button",handler:function(e){var t=this.owner;i.set_collapse(!0),t.collapseWidget.call(t,e.docid)},scope:i}),o.push({name:"maximize",tooltip:IRm$.r1("L_MAXIMIZE"),hidden:i.hide_maximize,cls:"dock_maximize_button",handler:function(e){var t=this.owner;t.maximizeWidget.call(t,e.docid)},scope:i}),o.push({name:"close",hidden:!0,tooltip:IRm$.r1("B_CLOSE"),cls:"dock_close_button",handler:function(e){var t=this.owner;t.closeWidget.call(t,e.docid)},scope:i}),$.each(o,(function(e,o){var s=$("<a class='dock_button "+(o.cls||"")+"'></a>").appendTo(l).dselect();o.el=s,o.tooltip&&s.attr("title",o.tooltip),o.label&&s.append("<span>"+o.label+"</span>"),o.hidden&&o.el.hide(),t[o.name||"btn_"+e]=o,s.bind("click",(function(e){o.handler?o.handler.call(o.scope||i,i):i.box.trigger("buttonclick",{panel:i,button:o})}))}))},dropIn:function(e){var t=this,i=t.owner,o=t.binner,l=5,s=5,n=IG$.j$ext._w(o)-10,a=IG$.j$ext._h(o)-10;switch(e){case"right":l=n/2;case"left":n/=2;break;case"bottom":s=a/2;case"top":"top"==e&&(s+=20),a/=2}i.showDrop.call(i,t,{top:s,left:l,width:n,height:a},e)},dropOut:function(){var e=this;e.owner.hideDropProxy.call(e.owner,e)},dropHit:function(e,t,i,o,l){var s,n,a,_,d,h,c,r,p=this,f=p._pc,b=e.x+o.left,v=e.y+o.top,w=0,m=0,x=p.bbox;if(x.x<b&&b<x.x+x.w&&x.y<v&&v<x.y+x.h&&(n="none",t&&"_dc"!=p.objtype)){for(s=f.parent;s&&("PANEL"!=s.objtype&&"TAB"!=s.objtype||(w+=20),!(s=s.parent)||s!=s.parent););m=2*w*.3,"PANEL"==p.objtype||"TAB"==p.objtype?(m=l?10:20,d=x.x+w,c=x.x+w+20,h=x.y+w+20,r=x.y+x.h-2*w-20,h<v&&v<r?d<b&&b<c?n="left":x.x+x.w-2*w-20<b&&b<x.x+x.w-2*w&&(n="right"):d<b&&b<x.x+x.w-2*w&&(x.y+w<v&&v<h?n="top":x.y+x.h-2*w-20<v&&v<x.y+x.h-2*w&&(n="bottom")),"TAB"==p.objtype&&"none"==n?(p._pc.children=p._pc.children||[],p._pc.children.length>0?x.x<b&&b<x.x+x.w&&x.y+20<v&&v<x.y+40&&(n="inner"):n="inner"):"PANEL"==p.objtype&&"none"==n&&(n=p._pc.children.length>0&&"_dc"==p._pc.children[0].objtype&&p._pc.children[0].children.length?"_panel_":"inner")):(m=l?.1:.3,a=x.h-2*w,_=x.w-2*w,d=x.x+w,h=x.y+w+a*m,c=x.x+w+_*m,r=x.y+x.h-a*m-w,h<v&&v<r?d<b&&b<c?n="left":x.x+x.w-_*m-w<b&&b<x.x+x.w-w&&(n="right"):c<b&&b<x.x+x.w-_*m-w&&(x.y+w<v&&v<x.y+w+a*m?n="top":x.y+x.h-a*m-w<v&&v<x.y+x.h-w&&(n="bottom")))}return n},init:function(){var e=this;e.setToolButtons();var t=e.btnmap,i=t.pivot.el,o=t.config.el,l=t.collapse.el,s=t.maximize.el;e.__collapsed=!0===e.is_float&&!0===e.fl_collapsible&&!0===e.fl_collapsed,e.set_collapse(e.__collapsed),e.box_title.bind({click:function(){var t="FILTER"==e.objtype||"SHEET"==e.objtype;e._editmode?(o.show(),t&&i.show()):t&&e._show_pivot&&i.show(),s[e.hide_maximize?"hide":"show"](),l[!0===e.fl_collapsible?"show":"hide"]()},mouseover:function(){var t="FILTER"==e.objtype||"SHEET"==e.objtype;e._editmode?(o.show(),t&&i.show()):t&&e._show_pivot&&i.show(),s[e.hide_maximize?"hide":"show"](),l[!0===e.fl_collapsible?"show":"hide"]()},mouseout:function(){var t="FILTER"==e.objtype||"SHEET"==e.objtype;e._editmode?(o.fadeOut(2e3,(function(){o.hide()})),t&&!e._show_pivot&&i.fadeOut(2e3,(function(){i.hide()}))):t&&e._show_pivot&&i.show(),s[e.hide_maximize?"hide":"show"](),l[!0===e.fl_collapsible?"show":"hide"]()}})},resizeH:function(e,t){var i=this;i._resizeHtmr&&clearTimeout(i._resizeHtmr),i._resizeHtmr=setTimeout((function(){i._resizeH(e,t)}),10)},_resizeH:function(e,t){var i=this,o=IG$.j$ext._w(i.binner),l=IG$.j$ext._h(i.binner),s=i.box_container,n=i.box_sizer,a=s.children(":first");if(o>0&&l>0&&("_dc"!=i.objtype&&(i.showtitle||i.owner.editmode)?i.box_title.show():i.box_title.hide(),i.view)){var _=Math.floor(IG$.j$ext._w(n)),d=Math.floor(IG$.j$ext._h(n)),h=(Math.floor(IG$.j$ext._w(s)),Math.floor(IG$.j$ext._h(s)),_),c=d;if(_&&d&&(_!=i._vw||d!=i._vh)&&(i._vw=_,i._vh=d,a&&a.length&&(h=IG$.j$ext._w(a),c=IG$.j$ext._h(a),i._frender||(c=i.height,i._frender=1)),i._pc.width=h,i._pc.height=c,"_dc"!=i.objtype))if("FILTER"==i.objtype){var r=a.children(":first");r&&r.length&&r.width(h-6).height(c-4)}else i.view.setSize(h,c,!0),s.hide().show(0)}},setTitle:function(e){this.title=e,this.applyFlt()},getTitle:function(){return $("#dock_title_text",this.box_title).text().trim()},_title:function(e){var t=this,i=$("#dock_title_text",t.box_title);i.html(e||"&nbsp;"),e&&"<"!=e.charAt(0)?i.attr("title",e):i.removeAttr("title"),t.box.trigger("titlechange",{panel:t})},formatTitle:function(e){var t,i,o,l,s,n=this._param;for(t=(e=IG$._rrcs(this,e))?e.lastIndexOf("${"):-1;t>-1&&(i=e.indexOf("}",t))>-1;)s="",(o=e.substring(t+2,i))&&n&&(n[o]?s=n[o]:o.indexOf(";")>0&&(s=n[(l=o.split(";"))[0]]||l[1]||"")),t=(e=e.substring(0,t)+s+e.substring(i+1)).lastIndexOf("${",t+2);return e},applyFlt:function(){var e,t=this,i=t.title;e=t.formatTitle(i),t.title_disp=e,t._title(e)},showTitle:function(e,t){if(void 0!==e){var i=this;1!=t&&(i.showtitle=e),!i.showtitle&&i.owner.editmode&&"PANEL"!=i.objtype?i.box_title.addClass("dock_title_floating"):i.box_title.removeClass("dock_title_floating"),e!=i._v&&(i._v=!!i.owner.editmode||e,i.box_title[i._v?"show":"hide"](),i.resizeH())}},setPanelCss:function(e){var t,i=this;if(i.$pcss){var o=i.$pcss.split(";");for(t=0;t<o.length;t++)o[t]&&i.box.removeClass(o[t])}if(e){var l=e.split(";");for(t=0;t<l.length;t++)l[t]&&i.box.addClass(l[t])}i.panel_css=e,i.$pcss=e},setFloat:function(e,t){var i=this,o=i.get_sop();i.is_float=e,o&&(i.fl_resizable=o.fl_resizable,i.fl_moveable=o.fl_moveable,i.hide_maximize=o.hide_maximize,i.fl_collapsed=!0===o.fl_collapsed,i.fl_collapsible=!0===i.is_float&&!0===o.fl_collapsible,i.fl_collapse_css=o.fl_collapse_css,i.set_collapse(!0===i.is_float&&!0===i.fl_collapsed)),i.is_float||i.set_collapse(!1),i.is_float&&i.fl_resizable&&i.box_sizer.resizable("enable"),t&&o&&(o.is_float=e)},set_collapse:function(e){var t=this;if(void 0===e&&(e=!t.__collapsed),t.__collapsed=e,e){if(t.box.addClass("dock_collapsed"),t.fl_collapse_css){var i=t._fl_css,o=t.fl_collapse_css.indexOf(",")>-1?t.fl_collapse_css.split(","):t.fl_collapse_css.split(";");i&&$.each(i,(function(e,i){i&&t.bcollapse.removeClass(i)})),$.each(o,(function(e,i){i&&t.bcollapse.addClass(i)})),t._fl_css=o}t.bcollapse.fadeIn(),t.box.css({width:"auto",height:"auto"})}else t.box.removeClass("dock_collapsed"),t.bcollapse.hide(),t._ps&&t.box.css({width:t._ps.width,height:t._ps.height}),setTimeout((function(){t.resizeH()}),10)},get_sop:function(){var e,t=this;return t.view&&t.view.sheetoption&&t.view.sheetoption.model&&(e=t.view.sheetoption.model),e},val_fl_size:function(){var e,t=this,i=t.get_sop(),o=$(t.owner.body_container);if(!t.__collapsed&&i){e=t.box.offset(),boffset=o.offset();var l=Math.round(e.top-boffset.top),s=Math.round(e.left-boffset.left),n=Math.round(o.width()),a=Math.round(o.height()),_=Math.round(t.box.width()),d=Math.round(t.box.height());i.fl_top&&"%"==i.fl_top[i.fl_top.length-1]?i.fl_top=Math.round(l/a*100)+"%":i.fl_top=""+l,i.fl_left&&"%"==i.fl_left[i.fl_left.length-1]?i.fl_left=Math.round(s/n*100)+"%":i.fl_left=""+s,i.fl_right&&"%"==i.fl_right[i.fl_right.length-1]?i.fl_right=Math.round((n-s-_)/n*100)+"%":i.fl_right=""+(n-s-_),i.fl_bottom&&"%"==i.fl_bottom[i.fl_bottom.length-1]?i.fl_bottom=Math.round((a-l-d)/a*100)+"%":i.fl_bottom=""+(a-l-d),i.fl_width&&"%"==i.fl_width[i.fl_width.length-1]?i.fl_width=Math.round(_/n*100)+"%":i.fl_width=""+_,i.fl_height&&"%"==i.fl_height[i.fl_height.length-1]?i.fl_height=Math.round(d/a*100)+"%":i.fl_height=""+d}},showMeasureSelector:function(e,t){var i,o,l=this,s=l.measure_selector,n=-1;if(e&&t.length>1)for(l._measures_sel=t,s.show(),(o=s.val())||(o=t[0]),s.empty(),i=0;i<t.length;i++)t[i]==o&&(n=i),$("<option"+(t[i]==o?" selected":"")+">"+t[i]+"</option>").appendTo(s);else l.measures_sel=null,s.hide();return n},hide:function(){this.box.hide()},show:function(){this.box.show()},viewchange:function(e,t){var i=this;i.btnmap.viewgrid&&i.btnmap.viewgrid.el[e?"show":"hide"](),i.btnmap.viewchart&&i.btnmap.viewchart.el[e?"show":"hide"](),i.btnmap.viewrstat&&i.btnmap.viewrstat.el[e&&t?"show":"hide"]()},setReportOption:function(e){var t,i,o,l,s,n=this,a=ig$.sheet_toolbar$,_={},d=e.model,h=[],c=n.btnmap,r=c.ml_learn?c.ml_learn.el:null;if(c.exp_excel.el.hide(),c.exp_pdf.el.hide(),c.exp_csv.el.hide(),c.jasper_excel.el.hide(),c.jasper_pdf.el.hide(),c.jasper_docx.el.hide(),c.jasper_html.el.hide(),c.jasper_ppt.el.hide(),c.jasper_rtf.el.hide(),c.office_0.el.hide(),c.office_1.el.hide(),c.office_2.el.hide(),c.office_3.el.hide(),r&&r[d&&d.tb_ml_learn?"show":"hide"](),d&&d.tb_prt_i)for(l=d.tb_prt_i.split(";"),s=d.tb_prt_s?d.tb_prt_s.split(";"):[],o=0;o<l.length;o++)_[l[o]]={icon:s[o]};if(a)for(o=0;o<a.length;o++)t=a[o],(i=n.btnmap[t.key])&&i.el.hide(),_[t.key]&&n.btnmap[t.key].el.show();d&&(n.viewchange(d.tb_vch),n._show_pivot=d.tb_pivot,n._show_chart=d.tb_chart,n._show_pivot&&n.btnmap.pivot.el.show(),d.tb_prt&&d.tb_prt_i&&(h=[{n:"excel",m:"exp_excel"},{n:"pdf",m:"exp_pdf"},{n:"csv",m:"exp_csv"},{n:"jasper_excel",m:"jasper_excel"},{n:"jasper_pdf",m:"jasper_pdf"},{n:"jasper_ppt",m:"jasper_ppt"},{n:"jasper_docx",m:"jasper_docx"},{n:"jasper_rtf",m:"jasper_rtf"},{n:"jasper_html",m:"jasper_html"},{n:"office_0",m:"office_0"},{n:"office_1",m:"office_1"},{n:"office_2",m:"office_2"},{n:"office_3",m:"office_3"}],$.each(h,(function(e,t){_[t.n]&&(n.btnmap[t.m].el.show(),_[t.n].icon&&n.btnmap[t.m].el.addClass(_[t.n].icon))}))))},showDropProxy:function(e){var t=this;t.owner.drawDropProxy.call(t.owner,t,e),t.$sizeDropProxy(e)},hideDropProxy:function(){var e=this;e.owner.removeDropProxy.call(e.owner,e)},$sizeDropProxy:function(){var e=this,t=$(e.owner.body_container),i=e.box.offset(),o=IG$.j$ext._w(e.box),l=IG$.j$ext._h(e.box),s=e.drop_proxy;e.bbox={x:i.left+t.scrollLeft(),y:i.top+t.scrollTop(),w:o,h:l},IG$.j$ext._w(s,o),IG$.j$ext._h(s,l)},setActive:function(e){var t=this,i=t.box_title,o=t.box_container;t._active=e,1==e?(i.removeClass("doc_title_normal").addClass("doc_title_selected"),o.removeClass("doc_normal").addClass("doc_active"),t.owner.editmode&&!t.showtitle&&t.box_title.show()):(i.removeClass("doc_title_selected").addClass("doc_title_normal"),o.removeClass("doc_active").addClass("doc_normal"),t.showtitle||t.owner.editmode||t.box_title.hide())},_measureContainer:function(){var e=this._pc;return{fixed:{w:e._fw,h:e._fh},flex:{w:e._w,h:e._h},m:{w:e._mw,h:e._mh}}}};
IG$.boDockZone=function(e,t,i){var o=this;o.instance=e,o.items=[],o.splitters=[],o.editmode=!1,o.cobj=i,o.docid=0,o.invalidate=-1,o.sizeapplied=0,o.el_container=t,o._el={dom:t},o.$openmode=i.$openmode,o.body_container=$("<div class='wrapper wrapper-content idv-doc-base igc_design_mode'></div>").appendTo(t).css({position:"relative",minHeight:500}),o.box=$("<div></div>").appendTo(o.body_container),o.init(),o.draggable=null},IG$.boDockZone.prototype={init:function(){var e=this;(e.drop_proxy=$("<div class='dock-inside-wrap'></div>").css({position:"absolute",top:0,left:0}).appendTo(e.body_container).dselect()).hide(),e.dockinsg=$("<div class='dock-inside-guide'></div>").css({position:"absolute"}).appendTo(e.body_container).hide().dselect(),e.bodylist={},e._root={type:"mondrian",draggable:!1,objtype:"_dc",_direction:0,width:null,height:null,children:[],children_float:[]}},getMaxWidth:function(){return this.body_container.width()},configDropZone:function(){var e=this,t=e.body_container[0];$s.create&&$s.dropzone&&(e.dropZone=$s.create($s.dropzone,t,{ddGroup:"_I$RD_G_",nodeouttimer:-1,notifyOut:function(e,t,i){var o=this;o.lastOverNode&&(o.onNodeOut(o.lastOverNode,e,t,i),o.lastOverNode=null),grid.isDragging=!1,grid.hideDropFeedback&&(grid.hideDropFeedback.call(grid,t),1==o.accept&&1==o.pivotmove&&grid.sheetobj&&(o.nodeouttimer>-1&&clearTimeout(o.nodeouttimer),o.nodeouttimer=setTimeout((function(){grid.hideDropFeedback.call(grid,t)}),100)))},onNodeEnter:function(t,i,o,d){var n=!1;d.records&&d.records.length>0?"Report"==d.records[0].get("type")&&(n=!0):d.cellData&&(d.cellData,n=!0),n&&e.showDropProxy.call(e,o,undefined),this.accept=n},onNodeOut:function(e,t,i,o){},onNodeOver:function(t,i,o,d){var n,l=this;return n=window.Ext?1==l.accept?Ext.dd.DropZone.prototype.dropAllowed:Ext.dd.DropZone.prototype.dropNotAllowed:l.accept,1==l.accept&&(d.records&&d.records.length>0?d.records[0].data:d.cellData,e.dragOver.call(e,o.browserEvent,undefined)),n},onNodeDrop:function(e,t,i,o){var d;return 1==this.accept&&(o.records&&o.records.length>0?(d=o.records[0].data,grid.sobj.onDropRecord.call(grid.sobj,i,d)):d=o.cellData),this.accept=!1,!0}}))},customLoad:function(e,t){if(1==e){var i,o,d,n=this;if(n._ldo=n._ldo||[],t)for(d=0;d<n._ldo.length;d++)if(n._ldo[d]==t)return;n._ldo.push(t),o={msg:IRm$.r1("B_PROC")+" <button id='m-mec-loader'>"+IRm$.r1("B_PROC_CANCEL")+"</button>"},n._$setLoading(o),i=$(n.rendermask),$("#m-mec-loader",i).bind("click",(function(){var e=n._ldo.length;$.each(n._ldo,(function(t,i){i&&i.cancelQuery&&i.cancelQuery(new IG$.callBackObj(n,(function(){0==--e&&(n._ldo=[],n.setLoading(!1,void 0,!0))})))}))}))}},setLoading:function(e,t){var i,o=this;if(o._ldo){for(i=o._ldo.length-1;i>=0;i--)o._ldo[i]==t&&(o._ldo.splice(i,1),1);0==o._ldo.length&&o._$setLoading(!1)}},_$setLoading:function(e,t){var i=this,o={target:i};return i._el.dom&&(i.loadMask&&i.loadMask.destroy(),o.target.rendermask=null,i.loadMask=null,!1!==e&&(IG$.isObject(e)?IG$.apply(o,e):IG$.isString(e)&&(o.msg=e),i.loadMask=new IG$._mask(o),i.loadMask.show())),i.loadMask},processLayoutWidget:function(e,t,i,o){var d,n,l,r=this;l=(n=o[e.docid]||new IG$.sheetfiltercomp(null)).model,d=r.appendWidgetBox(e.docid,{width:e.width?parseInt(e.width):null,height:e.height?parseInt(e.height):null,title:l.name||"",close:l.close,hidetitle:l.hidetitle,fixed_width:l.fixed_width,fixed_height:l.fixed_height,panel_css:l.panel_css,is_float:l.is_float,fl_moveable:l.fl_moveable,fl_resizable:l.fl_resizable,hide_maximize:l.hide_maximize,fl_collapsed:l.fl_collapsed,fl_collapsible:l.fl_collapsible,fl_collapse_css:l.fl_collapse_css,showtab:!l.tab_option||"F"!=l.tab_option.showtab,draggable:r.draggable},e.objtype),e.docid=d.docid,d.objtype=e.objtype,n.objtype=d.objtype,n.docid=d.docid,o[d.docid]=n,e.lt={pos:{x:0,y:0,w:0,h:0},ubody:d},d._pc=e,d.validateProperty.call(d),$.each(e.children,(function(e,t){r.processLayoutWidget(t,!1,i,o)})),e.children_float&&$.each(e.children_float,(function(e,t){r.processLayoutWidget(t,!1,i,o)}))},processLayoutView:function(e){var t=this,i=t.ctrls,o=[];t._async={c:0,f:0,bd:[]},$.each(t.items,(function(e,i){if(i._loaded=0,t._async.bd.push(i),"FILTER"===i.objtype)t._async.f++,o.push(i);else t._async.c++})),$.each(t.items,(function(d,n){i[n.docid];n.box_container.bind("i_ready",(function(e){var i;if(e.stopPropagation(),!n._loaded){if(n._loaded=1,"FILTER"===n.objtype)t._async.f--;else t._async.c--;0==t._async.c&&0==t._async.f&&0==t.cmode&&(o.length?1==o.length?(i=o[0]).view&&i.view.updateFilterValues.call(i.view,!0,!0):($.each(o,(function(e,t){var o,d,n=t.view;n&&((d=!!(o=n.sheetoption.model.filter_options)&&o.showbutton&&o.f_b_trg?1:0)&&o.f_b_trg_all?1:0,d&&(i=t))})),$.each(o,(function(e,t){t.view&&t.view.updateFilterValues.call(t.view,!0,!0)}))):t.cobj.toolbarHandler.call(t.cobj,"cmd_run",null,null,null,1))}})),t.createWidgetView(n,e)})),$.each(t.items,(function(e,t){"FILTER"==t.objtype&&t.view.init_f.call(t.view,!0)}))},createWidgetView:function(e,t){var i,o=this,d=o.instance,n=o.ctrls[e.docid];"FILTER"==e.objtype?(t.__dreg&&t.__dreg[n.docid]?((i=t.__dreg[n.docid].fobj).report=t,i.sheetoption=n,i.dzone=o,i.init_f.call(i),e.hidden=!0):i=new IG$.dynFilterView(o.instance,e.box_container,n,t),i.callback=new IG$.callBackObj(t,t.onFilterUpdate)):"TEXT"==e.objtype?(i=new IG$.rfText(d,e.box_container,n,t),e.box_container.trigger("i_ready")):"NAVI"==e.objtype?(i=new IG$.rfNavi(d,e.box_container,n),e.box_container.trigger("i_ready")):"PANEL"==e.objtype||""==e.objtype?(i=new IG$.rfBlankPanel(d,e.box_container,n),e.box_container.trigger("i_ready")):"TAB"==e.objtype?(i=new IG$.rfTabPanel(d,e.box_container,n,o,t),e.box_container.trigger("i_ready")):"RPT_VIEW"==e.objtype?(i=new IG$.rfReportViewer(d,e.box_container,n,o,t)).validateItems.call(i,void 0,!0):"SHEET"==e.objtype?i=null:(i=null,e.box_container.trigger("i_ready")),e.objtype&&(e.box.addClass("igc-"+e.objtype.toLowerCase()+"-cnt"),e.box_container.addClass("igc-"+e.objtype.toLowerCase()+"-cnt-inner")),i&&(i.sheetoption=n,e.view=i,"FILTER"==e.objtype&&(e.setReportOption.call(e,n),e.box_container.bind("export_sheet",(function(e,t,i){var d=o.cobj;d.exportToFile.call(d,i.filetype.toUpperCase(),!1,t)}))))},isContainer:function(e){return"TAB"==e||"PANEL"==e||"_dc"==e},getNodeSize:function(e){var t,i,o=0,d=0;for(t=0;t<e.children.length;t++)(i=e.children[t]).width&&i.height&&(0==e._direction?(o+=i.width,d=Math.max(d,i.height)):(o=Math.max(o,i.width),d+=i.height));e.width=o,e.height=d},_clean_dc:function(e,t){var i,o,d,n=this,l=n._root;if("_dc"==e.objtype&&e.children)if(1==e.children.length&&"_dc"==e.children[0].objtype){for(d=e.children[0],e._direction=d._direction,e.children.splice(0,1),i=0;i<d.children.length;i++)e.children.push(d.children[i]),d.children[i].parent=e;if(delete t[d.docid],l.items)for(i=0;i<l.items.length;i++)if(l.items[i].docid==d.docid){l.items.splice(o,1);break}n._clean_dc(e,t)}else for(i=e.children.length-1;i>=0;i--)if("_dc"==(d=e.children[i]).objtype&&(n._clean_dc(e.children[i],t),d.children&&0==d.children.length&&(e.children.splice(i,1),delete t[d.docid],l&&l.items)))for(o=0;o<l.items.length;o++)if(l.items[o].docid==d.docid){l.items.splice(o,1);break}},makeLayout:function(e,t,i,o){var d=this;d._root=t,d._root_bs=o,d.ctrls=i,t&&(d._clean_dc(t,i),d.gdoc_id(t),d.processLayoutWidget(t,!0,e,i,o),d.updateDisplay(!1,!0),d.processLayoutView(e))},gdoc_id:function(e){var t=this;t.doc_id(e.docid),e.children&&$.each(e.children,(function(e,i){t.gdoc_id(i)})),e.children_float&&$.each(e.children_float,(function(e,i){t.gdoc_id(i)}))},doc_id:function(e){var t;e&&e.indexOf("_")>-1&&(t=parseInt(e.substring(e.indexOf("_")+1))+1,this.docid=Math.max(this.docid,t))},showDrop:function(e,t,i){var o=this,d=(o.docitems[e.docid],e.binner),n=IG$.j$ext._w(d),l=IG$.j$ext._h(d),r=o.drop_proxy;o.drawDropProxy(e),IG$.j$ext._w(r,n),IG$.j$ext._h(r,l),t.top+=o.__mpos?o.__mpos.top:0,t.left+=o.__mpos?o.__mpos.left:0,o.dockinsg.css(t),o.dockinsg.show()},drawDropProxy:function(e,t){var i=this,o=i.drop_proxy,d=i.dockinsg,n=e.binner.offset(),l=$(i.body_container),r=l.offset();i.__mpos={top:n.top-r.top+l.scrollTop(),left:n.left-r.left+l.scrollLeft()},o.css({top:i.__mpos.top,left:i.__mpos.left,zIndex:120}),o.show(),d.css({zIndex:122}),d.show()},removeDropProxy:function(e){var t=this.drop_proxy,i=this.dockinsg;t.hide(),i.hide()},titleChangeHandler:function(){$.each(this.items,(function(e,t){"TAB"==t.objtype&&t.view.validateItems.call(t.view)}))},appendWidgetBox:function(e,t,i){var o,d,n,l=this;return e?e.indexOf("_")>-1&&(d=parseInt(e.substring(e.indexOf("_")+1))+1,l.docid=Math.max(l.docid,d)):(e="dock_"+l.docid++,n=!0),l.bodylist[e]?o=l.bodylist[e]:(t&&(t.objtype=t.objtype||i),(o=new IG$.dockingWidget(l,e,t)).box.css({position:"relative"}),l.items.push(o),l.bodylist[e]=o),o.box.bind("titlechange",(function(){l.titleChangeHandler()})),n||l.updateDisplay(),o},_updLnode:function(e){var t,i,o=this,d=o._root;for(d.items=d.items||[],t=0;t<d.items.length;t++)if(d.items[t].docid==e.docid)return;var n=o.getLayout(),l=o._get_layout(n,e.docid);if(i={},$s.defaults(i,{objtype:l.objtype,d:l.d,r:l.r,_direction:l.d,_r:l.r,docid:l.docid,width:l.width,height:l.height,p:l.p,children:[]}),i.lt=e._pc.lt,e._pc.parent)for(t=0;t<d.items.length;t++)if(d.items[t].docid==e._pc.parent.docid){i.p=d.items[t];break}d.items.push(i)},_get_layout:function(e,t){var i=this,o=null;return e.children&&$.each(e.children,(function(d,n){return n.docid==t?(n.p=e,o=n,!1):(!n.children&&!n.children_float||!(o=i._get_layout(n,t)))&&void 0})),e.children_float&&$.each(e.children_float,(function(d,n){return n.docid==t?(n.p=e,o=n,!1):(!n.children&&!n.children_float||!(o=i._get_layout(n,t)))&&void 0})),o},getBox:function(e){var t,i=this.items,o=null;for(t=0;t<i.length;t++)if(i[t].docid==e){o=i[t];break}return o},clearAll:function(){var e,t=this,i=t.items;for(e=i.length-1;e>=0;e--)i[e].box.remove(),i.splice(e,1);t.bodylist={},t.docitems={},t.updateDisplay()},floatWidget:function(e){var t,i,o,d,n,l=this;l.items;if((i=l.docitems[e])&&(d=(n=i.lt.ubody).get_sop(),n&&d))if(n.setFloat(d.is_float),n.is_float){if(i.parent){for(i.parent.node,o=i.parent.children,t=0;t<o.length;t++)if(o[t].docid==i.docid){o.splice(t,1);break}i.r=l._root.docid,i._r=i.r,i.parent!=l._root&&"_dc"==i.parent.objtype&&0==i.parent.children.length&&l.removeWidget(i.parent.docid,!0),i.parent=l._root,l._add_float(l._root.children_float,i)}}else{var r;for(t=0;t<l._root.children_float.length;t++)if(l._root.children_float[t].docid==i.docid){r=l._root.children_float[t],l._root.children_float.splice(t,1);break}r&&(l._add_float(l._root.children,r),i._direction=l._root._direction,i.r=l._root.docid,i._r=i.r,i.parent=l._root)}},_add_float:function(e,t){var i,o=0;for(i=0;i<e.length;i++)if(e[i].docid==t.docid){o=1;break}o||e.push(t)},removeWidget:function(e,t,i){var o,d,n,l=this,r=l.items;for(o=0;o<r.length;o++)if(r[o].docid==e){r[o].box.remove(),r.splice(o,1);break}if((d=l.docitems[e])&&d.children&&d.children.length)for(o=d.children.length-1;o>=0;o--)l.removeWidget(d.children[o].docid,1,1);if(!i&&d&&d.parent){for(d.parent.node,n=d.parent.children,o=0;o<n.length;o++)if(n[o].docid==d.docid){n.splice(o,1);break}if(d.parent.children_float)for(o=0;o<d.parent.children_float.length;o++)if(d.parent.children_float[o].docid==d.docid){d.parent.children_float.splice(o,1);break}"_dc"==d.parent.objtype&&0==d.parent.children.length&&l.removeWidget(d.parent.docid,t)}l.box.trigger("remove_widget",e),delete l.bodylist[e],delete l.docitems[e],t||l.updateDisplay()},closeWidget:function(e){var t,i=this;(1!=(t=i.docitems[e]).container||t.parent)&&IG$.confirmMessages(ig$.appname,IRm$.r1("M_CONFIRM_DELETE"),(function(t){if("yes"==t){var o=!0;i.closeDockNoti&&(o=i.closeDockNoti.f.call(i.closeDockNoti.s,e)),1==o&&i.removeWidget(e)}}))},maximizeWidget:function(e){var t,i=this,o=!0,d=i.bodylist;i.maximizeDockNotify&&(o=i.maximizeDockNotify.f.call(i.closeDockNotify.s,e)),1==o&&($.each(d,(function(e,t){t._invalidate=1})),(t=d[e]).status="max"==t.status?null:"max",t.btnmap.maximize.el.attr("title","max"==t.status?IRm$.r1("L_MINIMIZE"):IRm$.r1("L_MAXIMIZE")),t.btnmap.maximize.el["max"==t.status?"addClass":"removeClass"]("dock_minimize"),i.updateDisplay(!0))},collapseWidget:function(e){},configDock:function(e,t){this.box.trigger(t,e)},setLayout:function(e){this.processLayout(e,null)},processLayout:function(e,t){var i,o,d;if(e&&e.length>0)for(i=0;i<e.length;i++)(d=e[i]).draggable=this.draggable,(o=this.appendWidgetBox(d.docid||null,d,d.objtype)).objtype=d.objtype,d.items&&this.processLayout(d.items,o)},getLayout:function(){var e,t=this,i=t._root;return(e={type:"mondrian",children:[],children_float:[]}).children=t.$doLayout(i,null),i.children_float&&$.each(i.children_float,(function(i,o){var d=t.$doLayout(o,null);d&&d.length&&e.children_float.push(d[0])})),e},$doLayout:function(e,t){var i,o=this,d=[];return i={docid:e.docid,objtype:e.objtype,width:e.width,height:e.height,r:t?t.docid:null,p:null,d:e._direction},d.push(i),e.children&&(i.children=[],$.each(e.children,(function(t,d){var n,l;for(l=o.$doLayout(d,e),n=0;n<l.length;n++)i.children.push(l[n])}))),d},setActive:function(e){var t,i,o=this.items;for(i=0;i<o.length;i++)(t=o[i]).setActive.call(t,e==t);this.box.trigger("activechanged",e)},clearSplitters:function(){},updateDisplay:function(e,t){var i=this;i.invalidate>-1&&clearTimeout(i.invalidate),1==t?(i.validateNow(e),e||i.box.trigger("updatecomplete"),i.updateScale()):i.invalidate=setTimeout((function(){i.validateNow(e),e||i.box.trigger("updatecomplete"),i.updateScale()}),50)},validateNow:function(e){var t,i,o,d,n,l,r,a=this,c=IG$.j$ext._w(a.body_container)-2,s=IG$.j$ext._h(a.body_container)-2,h=null,p={};a.clearSplitters();var _=function(e){$.each(e.children,(function(e,t){p[t.docid]=1,t.children&&_(t)}))};if(a._root&&a._root.lt){for(d in a.bodylist)if("max"==(l=a.bodylist[d]).status&&0!=l.visible){h=d,p[d]=1,"TAB"==l.objtype?(l.activeTab=l.activeTab||0,(r=l._pc&&l._pc.children?l._pc.children[l.activeTab]:null)&&(p[r.docid]=1)):"PANEL"==l.objtype&&l._pc&&l._pc.children&&_(l._pc);break}for(d in(t=a._root).lt.ubody,t.lt.pos.x=0,t.lt.pos.y=0,t.lt.pos.w=c,t.lt.pos.h=s,a.docitems={},a.updateLayout(t,0,null,!1),a.docitems)o=a.docitems[d],a.bodylist[d]?(i=(0==(i=a.bodylist[d].visible)||1!=a.bodylist[d].hidden)&&i,n=o.lt.ubody.box,o.visible=!h&&0!=i||p[d],o.visible?(n.show(),n.trigger("resize"),e||o.lt.ubody.$upd_exec()):n.hide()):delete a.docitems[d]}},updateScale:function(){},showTabButton:function(e,t){e.view&&e.view.tabarea&&(e.view.editmode=this.editmode,e.view.tabarea[t?"show":"hide"]())},updateLayout:function(e,t,i,o){var d,n,l,r,a,c,s,h,p,_=this,f=e.lt.ubody,b=0,u="TAB"==f.objtype,g=(f.objtype,f.status,!(1==u&&f.view&&f.view.sheetoption&&f.view.sheetoption.model&&f.view.sheetoption.model.tab_option&&"F"==f.view.sheetoption.model.tab_option.showtab)),y=0,m=f.hidden,v=_.editmode?"show":"hide",w=f.btnmap;f.is_float;for(f.view&&f.view.sheetoption&&f.view.sheetoption.model&&(d=f.view.sheetoption.model.tb_pivot,f.view.sheetoption.model.tb_chart),"FILTER"==f.objtype||"SHEET"==f.objtype?w.pivot.el[d?"show":v]():w.pivot.el.hide(),w.config.el[v](),w.close.el[v](),c=e.parent;c&&!m;){if(c.hidden){m=1;break}if(0==c.visible){m=1;break}if((s=c.parent)&&"TAB"==s.objtype&&s.active!=c.docid){m=1;break}c=c.parent}if(_.bodylist[f.docid]&&_.bodylist[f.docid].view&&(_.bodylist[f.docid].view._editmode=_.editmode),_.docitems[e.docid]=e,e.fixed_width,e.fixed_height,f.is_float)if(p=f.get_sop()){var x={};$.each(["left","right","width","top","bottom","height"],(function(e,t){var i,o=p["fl_"+t];o&&(i=x[t+"_pct"]="%"==o[o.length-1],x[t]=parseInt(i?o.substring(0,o.length-1):o),!isNaN(x[t])&&i&&(x[t]=Math.floor((e<3?tw:th)*x[t]/100)))})),p.fl_en_width?(p.fl_en_left||p.fl_en_right||(p.fl_en_left=!0),p.fl_en_left?(l.x=x.left,l.w=x.width):p.fl_en_right&&(l.x=tw-x.right-x.width,l.w=x.width)):(l.x=x.left,l.w=tw-x.left-x.right),p.fl_en_height?(p.fl_en_top||p.fl_en_bottom||(p.fl_en_top=!0),p.fl_en_top?(l.y=x.top,l.h=x.height):p.fl_en_bottom&&(l.y=th-x.bottom-x.height,l.h=x.height)):(l.y=x.top,l.h=th-x.top-x.bottom),l.x=isNaN(l.x)?10:l.x,l.y=isNaN(l.y)?10:l.y,l.w=isNaN(l.w)?200:l.w,l.h=isNaN(l.h)?300:l.h,l.x=l.x<0?0:l.x,l.x=l.x>tw?tw-l.w:l.x,l.y=l.y<0?0:l.y,l.y=l.y>th?th-l.h:l.y}else l.x=10,l.y=10,l.w=200,l.h=300;else!i||"PANEL"!=i.objtype&&"TAB"!=i.objtype?i&&"_dc"==i.objtype&&(i.lt.ubody.$container||(i.lt.ubody.$container=$("<div></div>").appendTo(i.lt.ubody.box_container))):(a=0,i.__box_off&&(i.lt.ubody.showtitle||i.__tabh)&&(a+=i.__box_off),i.__titleh&&("PANEL"==i.objtype||"TAB"==i.objtype)&&(i.lt.ubody.showtitle||"PANEL"==i.objtype&&_.editmode)&&(a+=i.__titleh),i.__tabh&&"TAB"==i.objtype&&(y=i.__tabh||0),l.x=xx,l.y=yy+a+y,l.w=tw,l.h=th-(a+y));if(r=f._measureContainer.call(f),e._g=0,n=f.box,_.isContainer(f.objtype),e.lt.ubody.$box||(e.lt.ubody.$box=$("<div></div>"),n.appendTo(e.lt.ubody.$box)),i){i.lt.ubody.$container.addClass("row wrapper"),e.lt.ubody.$box.appendTo(i.lt.ubody.$container);var j,k=i.children.length,L=12;k>1&&1!==i._direction&&(L=12/k),j="col-lg-"+L,e.lt.ubody.$box_class&&e.lt.ubody.$box_class==j||(e.lt.ubody.$box_class&&e.lt.ubody.$box.removeClass(e.lt.ubody.$box_class),e.lt.ubody.$box_class=j,e.lt.ubody.$box.addClass(e.lt.ubody.$box_class))}else _.box.addClass("row wrapper"),e.lt.ubody.$box.appendTo(_.box);if(e.lt.ubody.resizeH(),(f._invalidate||!n.__ps||n.__ps&&(n.__ps.top!=h.top||n.__ps.left!=h.left||n.__ps.width!=h.width||n.__ps.height!=h.height))&&(f._invalidate=0,f._ps=h,f.__collapsed,m?n.hide():n.show(),n.__ps=h,n._invl=1),_.editmode?(f.showTitle.call(f,!0,!0),u&&_.showTabButton(f,!0)):(f.showTitle.call(f,f.showtitle,!0),u&&g?_.showTabButton(f,!0):u&&_.showTabButton(f,!1)),"_dc"!=f.objtype){var I=f.box.offset(),T=f.binner.offset();e.__box_off=T.top-I.top}f._v&&"_dc"!=f.objtype&&(b=IG$.j$ext._h(f.box_title)),"TAB"==f.objtype&&(_.editmode||g?e.__tabh=f.view?f.view.tabHeight():0:e.__tabh=0),e.__titleh=b,$.each(e.children,(function(t,i){f.lt,i.lt.ubody;_.updateLayout(i,t,e,o)})),e.children_float&&$.each(e.children_float,(function(t,i){var o=f.lt;i.lt.ubody;_.updateLayout(i,o.x,o.y,o.w,o.h,t,r,rect,e,!0),e._g+=0==e._direction?i.lt.pos.w:i.lt.pos.h}))},validateSplitter:function(){},showDropProxy:function(e,t,i){var o,d,n=this;IG$.j$ext._w(n.box),IG$.j$ext._h(n.box),n.drop_proxy;for(o=0;o<n.items.length;o++)(d=n.items[o]).showDropProxy.call(d,i)},hideDropProxy:function(){var e,t,i=this;for(i.drop_proxy&&i.drop_proxy.hide(),i.dockinsg&&i.dockinsg.hide(),e=0;e<i.items.length;e++)(t=i.items[e]).hideDropProxy.call(t)},dragOver:function(e,t,i){var o,d,n,l,r,a,c,s=this,h={x:e.pageX,y:e.pageY},p=$(s.body_container),_={top:p.scrollTop(),left:p.scrollLeft()};for(d=0;d<s.items.length;d++)(c=s.items[d]).dropOut.call(c),1==c.dragging&&(r=c);for(d=0;d<s.items.length;d++)if((o=(c=s.items[d]).dropHit(h,!0,null,_,i))&&"none"!=o&&0==c.dragging){for(l=(n=s.docitems[c.docid]).parent;l;){if("inner"==l.loc&&l.docid==r.docid){o="none";break}l=l.parent}if("_panel_"==o){if(n&&(a=s.getSubHit(n,h,0))&&a.dhit&&"none"!=a.dhit){r.docid!=a.ditem.docid&&a.ditem.dropIn.call(a.ditem,a.dhit);break}}else if("none"!=o){r.docid!=c.docid&&c.dropIn.call(c,o);break}}},getSubHit:function(e,t,i){var o,d,n,l,r=this,a={dhit:null,ditem:null},c=$(r.body_container),s={top:c.scrollTop(),left:c.scrollLeft()};if(!e.children)return a;for(o=0;o<e.children.length;o++){if("_dc"==(l=e.children[o]).objtype)a=r.getSubHit(l,t,1);else{if((n=(d=l.lt.ubody).dropHit.call(d,t,!0,!0,s))&&"none"!=n&&"_panel_"!=n){a.dhit=n,a.ditem=d;break}a=r.getSubHit(l,t,1)}if(a.dhit)break}return a},dragStop:function(e,t,i){var o,d,n,l,r,a,c,s,h,p,_,f,b=this,u={x:e.pageX,y:e.pageY},g=$(b.body_container),y={top:g.scrollTop(),left:g.scrollLeft()},m=0;for(o=0;o<b.items.length;o++)if(1==b.items[o].dragging){l=b.items[o],o;break}if(l&&(l._invalidate=1),b.editmode)for(o=0;o<b.items.length;o++)if((n=b.items[o].dropHit(u,!0,null,y,i))&&"none"!=n&&0==b.items[o].dragging){if("_panel_"!=n){d=b.items[o];break}if((a=b.docitems[b.items[o].docid])&&(c=b.getSubHit(a,u,0))&&c.dhit&&"none"!=c.dhit){n=c.dhit,d=c.ditem;break}}if(b.hideDropProxy(),b.editmode&&d&&"none"!=n){switch(r=b.docitems[d.docid],a=b.docitems[l.docid],n){case"top":case"bottom":h=1;break;case"left":case"right":h=0}if("TAB"==a.objtype||"PANEL"==a.objtype)for(s=r.parent;s;){if(s.docid==a.docid)return void b.updateDisplay();s=s.parent}if("top"!=n&&"left"!=n||(m=1),"inner"==n){for(o=0;o<a.parent.children.length;o++)if(a.parent.children[o].docid==a.docid){a.parent.children.splice(o,1);break}if(a.parent.children_float)for(o=0;o<a.parent.children_float.length;o++)if(a.parent.children_float[o].docid==a.docid){a.parent.children_float.splice(o,1),a.lt.ubody&&a.lt.ubody.setFloat(!1,!0);break}"PANEL"==r.objtype?(0==r.children.length?(p={objtype:"_dc",docid:null,iscontainer:!0,_direction:0,children:[],width:0,height:0,parent:r},b.processLayoutWidget(p,!0,null,b.ctrls),r.children.push(p)):p=r.children[0],a.parent=p,p.children.push(a)):"TAB"==r.objtype&&(a.parent=r,r.children.push(a))}else if("TAB"==r.parent.objtype){for(p={objtype:"PANEL",docid:null,iscontainer:!0,_direction:0,children:[],width:0,height:0,parent:r.parent},b.processLayoutWidget(p,!0,null,b.ctrls),b.createWidgetView(p.lt.ubody,null),o=0;o<r.parent.children.length;o++)if(r.parent.children[o].docid==r.docid){r.parent.children.splice(o,1,p);break}for(_={objtype:"_dc",docid:null,iscontainer:!0,_direction:h,children:[],width:0,height:0,parent:p},b.processLayoutWidget(_,!0,null,null),p.children.push(_),o=0;o<a.parent.children.length;o++)if(a.parent.children[o].docid==a.docid){a.parent.children.splice(o,1);break}if(a.parent.children_float)for(o=0;o<a.parent.children_float.length;o++)if(a.parent.children_float[o].docid==a.docid){a.parent.children_float.splice(o,1),a.lt.ubody&&a.lt.ubody.setFloat(!1,!0);break}0==a.parent.children.length&&b.removeWidget(a.parent.docid,1),r.parent=_,a.parent=_,m?(_.children.push(a),_.children.push(r)):(_.children.push(r),_.children.push(a))}else if(r.parent._direction==h){for(o=0;o<a.parent.children.length;o++)if(a.parent.children[o].docid==a.docid){a.parent.children.splice(o,1);break}if(a.parent.children_float)for(o=a.parent.children_float.length-1;o>=0;o--)a.parent.children_float[o].docid==a.docid&&(a.parent.children_float.splice(o,1),a.lt.ubody&&a.lt.ubody.setFloat(!1,!0));for(o=0;o<r.parent.children.length;o++)if(r.parent.children[o].docid==r.docid){r.parent.children.splice(m?o:o+1,0,a);break}"TAB"!=a.parent.objtype&&0==a.parent.children.length&&b.removeWidget(a.parent.docid,1),a.parent=r.parent}else if(r.parent.docid==a.parent.docid&&"_dc"==r.parent.objtype&&r.parent.children.length<3){for(r.parent._direction=h,o=0;o<r.parent.children.length;o++)if(r.parent.children[o].docid==a.docid){r.parent.children.splice(o,1);break}for(o=0;o<r.parent.children.length;o++)if(r.parent.children[o].docid==r.docid){r.parent.children.splice(m?o:o+1,0,a);break}}else{for(p={objtype:"_dc",docid:null,iscontainer:!0,_direction:h,children:[],width:0,height:0,parent:r.parent},b.processLayoutWidget(p,!0,null,b.ctrls),o=0;o<a.parent.children.length;o++)if(a.parent.children[o].docid==a.docid){a.parent.children.splice(o,1);break}if(a.parent.children_float)for(o=0;o<a.parent.children_float.length;o++)if(a.parent.children_float[o].docid==a.docid){a.parent.children_float.splice(o,1),a.lt.ubody&&a.lt.ubody.setFloat(!1,!0);break}for(f=r.parent,o=0;o<f.children.length;o++)if(f.children[o]==r){f.children.splice(o,1,p);break}"TAB"!=a.parent.objtype&&0==a.parent.children.length&&b.removeWidget(a.parent.docid,1),r.parent=p,a.parent=p,0==h?a.lt.ubody.width=r.lt.ubody.width:a.lt.ubody.height=r.lt.ubody.height,m?(p.children.push(a),p.children.push(r)):(p.children.push(r),p.children.push(a))}}else i&&(a=b.docitems[l.docid]).lt.ubody&&a.lt.ubody.val_fl_size();this.updateDisplay()},resizeContainer:function(e){var t=this;$.each(e,(function(e,i){t.changeContainer(i,i.lt.pos.w,i.lt.pos.h)}))},changeContainer:function(e,t,i){var o,d,n,l,r=this,a=e.objtype,c=e.children,s=0,h=0,p=0,_=0;if(r.setSize(e,t,i),"_dc"==a){for(o=0;o<c.length;o++)d=c[o],e._direction?(s=t,d.fixed_height?_+=d.lt.pos.h:h+=d.lt.pos.h):(d.fixed_width?p+=d.lt.pos.w:s+=d.lt.pos.w,h=i);for(o=0;o<c.length;o++)d=c[o],n=0,l=0,e._direction?(n=s,d.fh?l=d._fh:i&&h&&d.lt.pos.h&&(l=d.lt.pos.h/h*(i-_))):(d.fixed_width?n=d._fw:t&&s&&d.lt.pos.w&&(n=d.lt.pos.w/s*(t-p)),l=h),r.changeContainer(c[o],t>0?n:0,i>0?l:0)}else if("PANEL"==a){if(c&&c.length)for(o=0;o<c.length;o++)r.changeContainer(c[o],t,i)}else if("TAB"==a&&c&&c.length)for(o=0;o<c.length;o++)r.changeContainer(c[o],t,i)},setSize:function(e,t,i){t>0&&(e.lt.pos.w=t,e.lt.ubody.width=t),i>0&&(e.lt.pos.h=i,e.lt.ubody.height=i)}};
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(r){var t,e,o,a,h,n,c,d="",C=0;for(r=Base64._utf8_encode(r);C<r.length;)a=(t=r.charCodeAt(C++))>>2,h=(3&t)<<4|(e=r.charCodeAt(C++))>>4,n=(15&e)<<2|(o=r.charCodeAt(C++))>>6,c=63&o,isNaN(e)?n=c=64:isNaN(o)&&(c=64),d=d+this._keyStr.charAt(a)+this._keyStr.charAt(h)+this._keyStr.charAt(n)+this._keyStr.charAt(c);return d},decode:function(r){if(!r)return"";var t,e,o,a,h,n,c="",d=0;for(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<r.length;)t=this._keyStr.indexOf(r.charAt(d++))<<2|(a=this._keyStr.indexOf(r.charAt(d++)))>>4,e=(15&a)<<4|(h=this._keyStr.indexOf(r.charAt(d++)))>>2,o=(3&h)<<6|(n=this._keyStr.indexOf(r.charAt(d++))),c+=String.fromCharCode(t),64!=h&&(c+=String.fromCharCode(e)),64!=n&&(c+=String.fromCharCode(o));return c=Base64._utf8_decode(c)},_utf8_encode:function(r){r=r.replace(/\r\n/g,"\n");for(var t="",e=0;e<r.length;e++){var o=r.charCodeAt(e);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},_utf8_decode:function(r){for(var t="",e=0,o=c1=c2=0;e<r.length;)(o=r.charCodeAt(e))<128?(t+=String.fromCharCode(o),e++):o>191&&o<224?(c2=r.charCodeAt(e+1),t+=String.fromCharCode((31&o)<<6|63&c2),e+=2):(c2=r.charCodeAt(e+1),c3=r.charCodeAt(e+2),t+=String.fromCharCode((15&o)<<12|(63&c2)<<6|63&c3),e+=3);return t}};
var clsscript={},fnglobal={},__jsmod={};IG$.cDynScript=function(t,r){this.uid=t,this.base_class=r,this.lastError=null},IG$.cDynScript.prototype={loadScript:function(t){var r,i,s=this,e=(document,$("head")),a=window.bowser;if((r=__jsmod[s.uid])||((r=document.createElement("script")).id="clsscript",r.type="text/javascript",e[0].appendChild(r),__jsmod[s.uid]=r),delete clsscript[s.uid],i=0===s.base_class?t:s.base_class?"clsscript['"+s.uid+"'] = IG$.extend("+s.base_class+", {\n"+t+"\n});":"function "+this.uid+"() {}; "+this.uid+".prototype={"+t+"}; clsscript['"+this.uid+"'] = "+this.uid+";",a.msie?r.text=i:r.innerHTML=i,delete fnglobal[s.uid],e[0].removeChild(r),delete __jsmod[s.uid],0!==s.base_class){var n={};try{n=new(0,clsscript[s.uid])}catch(t){IG$.ShowError(IRm$.r1("E_SC_LD"),null,null,{errstack:t.stack})}fnglobal[this.uid]=n}},preparePrototype:function(t,r){var i=fnglobal[this.uid];i&&(i.controls=t,i.ptr_main=r,i.parameters=r.framecontent.page_param_map)},executeScript:function(t){var r=fnglobal[this.uid],i=arguments,s=!0;i=Array.prototype.slice.call(i,1),this.lastError=null;try{if(!r[t])return this.lastError="Function call: "+t+" not found",!1;s=r[t].apply(r,i)}catch(r){return this.lastError="Error: "+t+"\n"+this.printStackTrace().join("\n\n"),!1}return s},getFunctionList:function(){var t,r=fnglobal[this.uid],i=[];if(r)for(t in r)"function"==typeof r[t]&&"$"!=t.charAt(0)&&"override"!=t&&i.push(t);return i},printStackTrace:function(){var t=[],r=!1;try{i.dont.exist+=0}catch(n){if(n.stack){for(var i=0,s=(e=n.stack.split("\n")).length;i<s;i++)e[i].match(/^\s*[A-Za-z0-9\-_\$]+\(/)&&t.push(e[i]);t.shift(),r=!0}else if(window.opera&&n.message){var e;for(i=0,s=(e=n.message.split("\n")).length;i<s;i++)if(e[i].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var a=e[i];e[i+1]&&(a+=" at "+e[i+1],i++),t.push(a)}t.shift(),r=!0}}if(!r)for(var n=arguments.callee.caller;n;){var c=n.toString(),l=c.substring(c.indexOf("function")+8,c.indexOf(""))||"anonymous";t.push(l),n=n.caller}return t}};
IG$.geoDatas=[],IG$._app_module_={report:{name:"ReportView",opt:{itemtype:"Report"}},sqlreport:{name:"SQLReportView",opt:{itemtype:"SQLReport"}},bobject:{name:"tableManager",modetype:"igcn"},sheet:{name:"ReportView",opt:{itemtype:"Sheet",iconCls:"icon-report"}},dashboard:{name:"DashboardView"},dashboardedit:{name:"DashboardEdit",modetype:"igc7"},cubemodel:{name:"CubeModel",modetype:"igcn"},dataset:{name:"p$DataMgr",modetype:["igcm","igcn"]},cube:{name:"cubeeditor",opt:{iconCls:"icon-cube",itemtype:"Cube"}},metric:{name:"metricEditor"},multimetric:{name:"multimetric"},multimeasure:{name:"multimeasure"},measure:{name:"measureEditor"},hierarchy:{name:"HierarchyEditor"},formulameasure:{name:"formulaEditor"},custommetric:{name:"custommetric"},udg:{name:"_udgeditor"},chartmeasure:{name:"cellwizard"},datemetric:{name:"datemetric"},measuregroup:{name:"measureGroupEditor"},measuregroupdimension:{name:"measureGroupEditor"},uipage:{name:"uipage"},bigdata:{name:"flowEditor",opt:{itemtype:"BigData"},modetype:"igc9"},mongodata:{name:"flowEditor",opt:{itemtype:"MongoData"},modetype:"igc9"},bayesnet:{opt:{iconCls:"icon-bigdata",itemtype:"BayesNet"},modetype:"igc9",name:"_IB9b"},javaclass:{iconCls:"icon-javaclass",name:"mr_javaeditor",modetype:"igc9"},codemap:{name:"codemapping"},classmodule:{modetype:"igcm",name:"classmodule",opt:{iconCls:"icon-javaclass"}},nlp:{opt:{iconCls:"icon-nlp",itemtype:"BayesNet"},modetype:"igcm",name:"nlpEd"},bpmn:{opt:{iconCls:"icon-bpmn",itemtype:"BPMN"},modetype:"bpmn_model",name:"bpmnModeler"},restservice:{opt:{iconCls:"icon-rest"},modetype:"igcm",name:"mgrRestItem"},metaeditor:{name:"MetaEditorPanel"}},IG$.createAppPanel=function(e,a,r,t,i,n,o,m){var _,c,s,d,l,p,I,M=null,D={uid:a,writable:n,instance:e};if(o)for(_ in o)D[_]=o[_];if((l=IG$._app_module_[r])&&l.opt)for(_ in l.opt)D[_]=l.opt[_];if(c=l.name,s=l.modetype||"igcn",c)if(IG$[c])M=new IG$[c](D);else{if("object"==typeof s&&s.length)for(d=[],p=0;p<s.length;p++){var b=ig$.bootconfig.scmap[s[p]];for(I=0;I<b.length;I++)d.push(b[I])}else d=ig$.bootconfig.scmap[s];IG$.getScriptCache(d,new IG$.callBackObj(this,(function(){IG$[c]?m&&m.execute():IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))})))}return M},IG$.showHelp=function(e,a,r,t){var i=new IG$.helpWindow({uid:e,instance:t,modal:!1!==a,dm:r||null});"report"!=r?IG$.loadHelp(e,i):i.show()},IG$.showHideAllWindow=function(e,a){var r;if(e.mainPanel)for(r=e.mainPanel.items.length-1;r>=0;r--)e.mainPanel.items.items[r].close()},IG$.create_meta=function(e){var a=new IG$.metaSelectDlg({instance:e,mode:"newitem",initpath:null,callback:new IG$.callBackObj(this,(function(a){var r="business_object",t=e.mainPanel,i=new IG$._rpc$;i.init(this,{ack:"writecontent",payload:{address:a.nodepath+"/"+a.name,name:a.name,type:"Bobject",pid:a.uid},mbody:{meta_type:r},meta_type:r},this,(function(e){var a=e;t&&t.navigateApp.call(t,a.uid,a.type.toLowerCase(),a.name,a.uid,!0,a.writable,{opt_editmode:a.writable})})),i.send()}))});IG$.checkLogin(this,a)},IG$.procMenuCommand=function(e,a,r,t){var i,n,o,m,_,c,s=a.toLowerCase(),d={},l="igcm",p=e.mainPanel||null;switch(a){case"CMD_PASSWORD_CHANGE":i=new IG$.passwordMgr({instance:e}),IG$.checkLogin(null,i);break;case"CMD_PREF":i=new IG$.userpref({instance:e}),IG$.checkLogin(null,i);break;case"CMD_MAKE_WORKSPACE":i=new IG$.makeItem({instance:e,itemtype:"Folder",parentnodepath:"/",parentuid:"/"}),IG$.checkLogin(null,i);break;case"CMD_SW_APP":i=new IG$.workspace_switcher({instance:e}),IG$.checkLogin(null,i);break;case"CMD_SERVER_CONFIG":break;case"CMD_HELP_MGR":_="helpManage",m=s,o=IRm$.r1("I_HELP_MGR");break;case"CMD_LOCALE":_="resourcemgr",m=s,o=IRm$.r1("I_LOC_MGR");break;case"CMD_DLOCALE":_="resourcemgr",m=s,d.dicmode=1,o=IRm$.r1("I_DLOC_MGR");break;case"CMD_META_IMP":_="metaImport",m=s,o=IRm$.r1("I_META_IMP");break;case"CMD_META_EDIT":_="MetaEditorPanel",m=s,o=IRm$.r1("I_META_EDIT"),d.uid=r.uid;break;case"CMD_META_MIG":_="mgr_deploy",m=s,o=IRm$.r1("I_META_MIG");break;case"CMD_RELATION_VIEW":m=s,_="relationMgr",o=IRm$.r1("L_RELATION_VIEW");break;case"CMD_TABLE_REGISTER":m=s,_="tableManager",o=IRm$.r1("L_MGR_DATABASE"),l="igcn";break;case"CMD_LOOKUP":m=s,_="systemlookup",o=IRm$.r1("L_S_LK");break;case"CMD_CONNECT_DB":m=s,_="mgrdb_config",o=IRm$.r1("L_REG_DATABASE");break;case"CMD_DATASET":m=s,_="p$DataMgr",o=IRm$.r1("L_REG_DATASET");break;case"CMD_ABOUT":i=new IG$.aboutApp({instance:e}),IG$.checkLogin(null,i,null,null,e);break;case"CMD_USER_MANAGER":m=s,_="mgrUser",o=IRm$.r1("L_MGR_USER");break;case"CMD_SYS_CONFIG":m=s,_="mgrSysCfg",o=IRm$.r1("L_SYS_CONFIG");break;case"CMD_ASSIST_ROBO":m=s,_="mgrColab",o=IRm$.r1("L_ASSIST_ROBO");break;case"CMD_VAR":case"CMD_BD_CONFIG":m=s,_="hadoop_config",l="igc9",o=IRm$.r1("I_BD_CONFIG");break;case"CMD_JMOD":m=s,_="mgr_jmod",o=IRm$.r1("I_MGR_DBD");break;case"CMD_DBD_MGR":m=s,_="mgr_dashboard",o=IRm$.r1("I_MGR_DBD");break;case"CMD_FEATURES":m=s,_="mgrFeatures";break;case"CMD_REPORT_STYLE":m=s,d.title=IRm$.r1("T_GLOBAL_REPORT_STYLE"),d.styletype="g",_="styleWizard";break;case"CMD_RSN":i=new IG$.rsn_editor({instance:e}),IG$.checkLogin(null,i);break;case"CMD_SYSMON":_="sysmon",m=s,d.title=IRm$.r1("L_SYS_LOG");break;case"CMD_SYSRES":_="sys_resource",m=s;break;case"CMD_SCHEDULE":m=s,_="scheduler",o=IRm$.r1("I_SCHEDULE");break;case"CMD_SCH_PROG":m=s,_="sch_prog",o=IRm$.r1("I_SCHEDULE_MOD"),d.mod_type=r,"single_sign_on"==r&&(o="SingleSignOn");break;case"CMD_CHART_DSGN":m=s,_="chart_dsgn",o="Chart Coder";break;case"CMD_HOME":IG$.changeApp(e,0);break;case"CMD_BROWSER":var I=e.viewport.down("[name=mexplorer]");I&&!I.isVisible()&&IG$.changeApp(e,1);break;case"CMD_TABPANEL":IG$.changeApp(e,2);break;case"CMD_WIZARD":case"CMD_APP_WIZARD":IG$.changeApp(e,3),IG$.app_wizard||(IG$.app_wizard=new IG$.smartwizard(e,{dwizard:IG$.dwizard.dwizard,dwizard_bar:IG$.dwizard.dwizard_bar},IG$.ltW));break;case"CMD_SYNC_USER":m=s,d.uid=r,_="sync_user",o=IRm$.r1("T_SYNC_USER");break;case"CMD_MN_MENUS":IG$.changeApp(e,4,r);break;case"CMD_HD_BFLOW":case"CMD_MONG_DATA":c="CMD_HD_BFLOW"==a?"BigData":"MongoData",p&&p.navigateApp(null,c.toLowerCase(),c,null,null,!0);break;case"CMD_MONG_MAPR":m=s,_="mongoJobs",o=IRm$.r1("L_MONGO_DPROC"),l="mongo";break;case"CMD_MONG_SCH":m=s,_="scheduler",o=IRm$.r1("I_SCHEDULE"),(d=d||{}).mod_type="mapreduce";break;case"CMD_HD_MAPR":m=s,_="relationMgr",d._cmode=2,o=IRm$.r1("L_HD_BFLOW");break;case"CMD_ML_BAYES":var M=IG$._app_module_.bayesnet;if(_=M.name,l=M.modetype,o=o||M.opt.itemtype,M.opt)for(k in M.opt)d[k]=M.opt[k];break;case"CMD_D_MENU":m=s,_="dashboardmenu",o=s;break;case"CMD_REVISION":m=s,d.uid=r,_="mgrRevision",o=IRm$.r1("T_REVISION");break;case"CMD_TRASHBIN":m=s,d.uid=r,_="mgr_trashbin",o=IRm$.r1("L_TRASHBIN");break;case"CMD_MG_DISCO":m=s,d.uid=r,_="mg_disco",l="mg_disco",o=IRm$.r1("T_MIG_DISCO");break;case"CMD_MG_UPGRADE":itemuid=s,d.uid=r,_="mg_meta",l="mg_meta",o=IRm$.r1("T_MIG_META_UPGRADE");break;case"CMD_NEW_REPORT":m=s,_="ReportView",o="Report",(d=d||{}).writable=!0,d.opt_editmode=!0;break;case"CMD_NEW_SQL_REPORT":m=s,_="SQLReportView",o="SQLReport",(d=d||{}).writable=!0,d.opt_editmode=!0;break;case"CMD_NEW_DASHBOARD":m=s,_="DashboardEdit",l="igc7",o="Dashboard";break;case"CMD_MANUAL_AUTH":m=s,_="MgrManual",l="mg_meta",o=IRm$.r1("T_MGR_MANUAL");break;case"CMD_MGR_BBS":m=s,_="mgrBBS",l="igcm",o=IRm$.r1("L_BBS");break;case"CMD_MGR_NOTICE":m=s,_="mgrNotice",l="igcm",o=IRm$.r1("L_NOTICE");break;case"CMD_BPMN_MODELER":itemuid=s,_="bpmnModeler",l="bpmn",o=IRm$.r1("L_BPMN_MODELER");break;case"CMD_BPMN_TASKS":itemuid=s,_="bpmnTasks",l="bpmn",o=IRm$.r1("L_BPMN_TASKS");break;case"CMD_REST_MGR":m=s,_="mgrRest",o=IRm$.r1("L_REST_MGR");break;case"CMD_NEW_BOBJECT":return void IG$.create_meta(e);case"CMD_APP_HELP":var D="en";return"ko_KR"==window.useLocale&&(D="ko"),void window.open("../manual/"+D+"/","_blank")}if(_&&e.mainPanel){var b=e.mainPanel.getComponent(m);if(b)e.mainPanel.setActiveTab(b),"cmd_revision"==s&&b.loadUID(r);else if(d.instance=e,IG$[_]?(n=new IG$[_](d),o||(o=n.title)):(scripts=ig$.bootconfig.scmap[l],IG$.getScriptCache(scripts,new IG$.callBackObj(this,(function(){if(IG$[_])if(n=new IG$[_](d),o||(o=n.title),n.id=m,n.address=m,n.title=IG$.getTabTitle(o),1==n.isWindow)IG$.checkLogin(null,n);else{var a=e.mainPanel.add(n);e.mainPanel.setActiveTab(a)}else IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))})))),n)if(n.id=m,n.address=m,n.title=IG$.getTabTitle(o),1==n.isWindow)IG$.checkLogin(null,n);else{var R=e.mainPanel.add(n);e.mainPanel.setActiveTab(R)}}};
IG$.sessionUtils=function(e){this.instance=e.instance},IG$.sessionUtils.prototype={doStartSession:function(){var e=this.instance,i=e.dlgLogin,t=$("#loginform"),n=t.items.items[0].getValue(),a=t.items.items[1].getValue();i.initProcLogin(e,n,a)},getKeyPairFunc:function(e,i,t){var n=this;e&&e.show();var a=(n=this).instance,s=new IG$._rpc$;s.init(n,{ack:"security",payload:{mts:i||""},mbody:{}},n,(function(i){var n=i.p1,s=i.p2;n&&s?(a.rsaPublicKeyModules=n,a.rsaPublicKeyExpoenent=s,a.rsa_kinfo=i.p3,IG$._g$a=i.mts,t&&t.execute(1)):e&&(t&&t.execute(),e.hide())}),(function(i){i.errormsg;return e&&e.hide(),t&&t.execute(),!1})),s.send()},getKeyPair:function(e,i,t,n,a,s){var o=this;o.getKeyPairFunc(t,n,new IG$.callBackObj(o,(function(l){l&&setTimeout((function(){o.initProcLogin(o.instance,e,i,t,n,a,s)}),10)})))},initProcLogin:function(e,i,t,n,a,s,o){var l=this,r=(e=l.instance,new IG$._rpc$),u=IG$.encryptKey(e,[i,t]);r.init(l,{ack:"login",payload:{userid:u[0],passwd:u[1],sso_module:o,keyvar:e.rsa_kinfo},mbody:{lang:useLocale,mts:a||"",app:"",session_expire:""+ig$.session_expire||"0"}},l,l.rdoStartSession,(function(e){var i;return s&&(i=s.execute(e)),n&&n.hide(),i}),n),r.send()},rdoStartSession:function(e,i){var t=this,n=e,a=n.token,s=t.instance,o=n.uid,l=!1,r=n;if(IG$._g$a||(IG$._g$a=e.mts),s.dlgLogin&&(s.dlgLogin.lastLogin=r,s.mainPanel&&s.mainPanel.updateLoginInfo&&s.mainPanel.updateLoginInfo()),i&&i.hide(),"T"==e.twoway_auth)return $("#login_path").hide(),void $("#twoway_form").show();t.uuid&&t.uuid.length>0&&o&&t.uuid!=o&&(l=!0),l?window.location.reload(!1):(t.uuid=o,a&&t.uuid&&t.closeLoginProc(l))},closeLoginProc:function(e){this.getUserDetail(e)},finalLoginProc:function(){var e=this,i=e.logininfo.l3.substring(1),t=$("#mechanlevel");t&&t[0]&&setTimeout((function(){switch(i){case"1":t.attr("title","Your license is limited using all features."),t.animate({width:45},2e3),t.bind("click",(function(){window.open("http://www.amplixbi.com/","_new")}));break;case"2":t.attr("title","Your license is limited using all features."),t.animate({width:60},2e3),t.css({backgroundColor:"#0000ff"}),t.bind("click",(function(){window.open("http://www.amplixbi.com/","_new")}));break;case"3":case"4":t.attr("title","Currently using full feature and unlimited version."),t.animate({width:100},2e3),t.css({backgroundColor:"#00ff00"})}}),200),IG$._amplix_ready$&&IG$._amplix_ready$.length&&($.each(IG$._amplix_ready$,(function(e,i){i.apply(null)})),IG$._amplix_ready$=null),e.callback&&setTimeout((function(){e.callback.execute()}),100)},getUserDetail:function(e){var i=this,t=new IG$._rpc$;t.init(i,{ack:"usercontent",payload:{address:"/user"},mbody:{option:"_gi_",uid:i.uuid,tmpl:IG$.__ep?"sys_print_mode":IG$.__ep_||""}},i,i.rs_getUserDetail,null,[e]),t.send()},rs_getUserDetail:function(e,i){var t=this,n=t.instance,a=i[0],s=new IG$._c$session(e.userdetail);if(t.logininfo=s,t.jS2=t.logininfo.hasDutyUID(IG$.dutymap[1],"A"),t.desktopsetting=e.desktopinfo,IG$.__websocket||(IG$.__websocket=null),!IG$.__websocket&&ig$.$l_m&&"framework"==IG$._source&&ig$.enable_websocket){var o,l=window.location.href.split("/"),r="",u="ws";for("https:"==l[0].toLowerCase()&&(u="wss"),o=2;o<l.length-1&&"launcher"!=l[o];o++)r+=(o>2?"/":"")+l[o];IG$.__websocket=new IG$._ws({protocol:u,url:r,userdetail:e.userdetail})}ig$.features=s.features,$.cookie("lui",s.userid,{expires:7,path:"/"}),IG$.$loadApp(t.instance,s.tmpl,s.fm),1==a&&(IG$.showHideAllWindow(t.instance,!0),$("#win-mask").css({display:"none"}),n.mainPanel&&n.mainPanel.initRecentVisit()),n.mainPanel&&n.mainPanel.updateLoginInfo(),t.finalLoginProc()}},IG$.dutymap={1:"4fce8d2e-6d5144d0",2:"0122483f-0155fb4d",3:"0125a1a8-01d413a0"},IG$._c$session=function(e){var i,t,n,a,s,o,l=this,r=[],u=IG$.calendar_locale;if(n=e,l.sid=n.sid,l.gid=n.gid,l.userid=n.id,l.username=n.name,l.l3=n.l3,l.l4="Y"==n.l4,l.auth=[],l.authmap={},l.authmap_uid={},l.features={},l.pdffonts=[],l.mts=n.mts,l.mts_name=n.mts_name,l.tmpl={},l.dfrm=n.dfrm,u.c1disp=n.c1disp,u.c1format=n.c1format,u.c2disp=n.c2disp,u.c2format=n.c2format,l.dfrm&&l.dfrm.indexOf(" ")>0?l.dfrm_short=l.dfrm.substring(0,l.dfrm.indexOf(" ")):l.dfrm_short="yyyy-mm-dd",n.a2&&!ig$.theme_id&&(ig$.theme_id=n.a2),a=n.template,ig$.application_title&&(document.title=ig$.application_title),$("#logo_txt").html(ig$.application_title_html||ig$.application_title),a&&a.view)for(child=a.view,l.tmpl.mainview={},t=0;t<child.length;t++){if((s=child[t]).html){var c="&copy; 2005-"+(new Date).getFullYear()+" amplixbi.com. <br />ALL RIGHTS RESERVED. <br />amplix. Confidential Information";s.html=IG$.replaceAll(s.html,"$APP_NAME",ig$.application_title_html||ig$.application_title||ig$.appname),s.html=IG$.replaceAll(s.html,"$APP_COPY",c)}l.tmpl.mainview[s.name]=s}for(n.duties=n.duties||[],l.auth=n.duties,t=0;t<n.duties.length;t++)(o=n.duties[t]).uid=o.uid||o.sid,l.authmap[o.name.toLowerCase()]=o,l.authmap_uid[o.uid.toLowerCase()]=o;if(i=!!l.authmap_uid[IG$.dutymap[1]],n.features)for(t in n.features)l.features[t]=!0===n.features[t].hide;if(n.fonts)for(t=0;t<n.fonts.length;t++)l.pdffonts.push(n.fonts[t]+";");if(ig$.fmcss&&ig$.fmcss.remove(),r.push("<style type='text/css'>"),$.each(l.features,(function(e,t){"ig_mngr"==e||"ig_ft"==e?i||r.push("."+e+" { display: none; }"):1==t&&r.push("."+e+" { display: none; }")})),r.push("</style>"),ig$.fmcss=$(r.join("")).appendTo($("head")),l.themes=[],n.themes){for(t=0;t<n.themes.length;t++)l.themes.push({name:n.themes[t]});if(window.app_themes)try{window.app_themes(l.themes)}catch(e){}}},IG$._c$session.prototype={hasDutyUID:function(e,i){var t,n=this;for(t=0;t<n.auth.length;t++)if((!i||i&&n.auth[t].dutytype==i)&&n.auth[t].uid.toLowerCase()==e)return!0;return!1},hasDutyName:function(e,i){var t,n=this;for(t=0;t<n.auth.length;t++)if((!i||i&&n.auth[t].dutytype==i)&&n.auth[t].name.toLowerCase()==e)return!0;return!1}};
IG$.chkSess=function(i,e,s){var n,o=this;o.instance=i,IG$._g$a||(n=IG$._parse_url().params.mts);var t=function(){var i=new IG$._rpc$;i.init(o,{ack:"loginstatus",payload:{},mbody:{lang:useLocale,app:loadingApp}},o,(function(i){i.token,i.uid;var s=i.redirect;e?(window.$sso_try_count=0,e.call()):s&&s.length>0&&(window.$sso_try_count=0,window.location.replace(s))}),(function(i){return s&&s.call(),!1})),i.send()};if(n&&n.length){var a=new IG$._rpc$;a.init(o,{ack:"security",payload:{mts:n||""},mbody:{}},o,(function(e){var s=e.p1,n=e.p2;s&&n?(i.rsaPublicKeyModules=s,i.rsaPublicKeyExpoenent=n,i.rsa_kinfo=e.p3,IG$._g$a=e.mts,t()):t()}),(function(){t()})),a.send()}else t()},IG$._parse_url=function(i){var e,s,n,o=i||$(location).attr("href"),t=[],a={},l={};return e=o,o.indexOf("#")>-1&&(s=o.substring(o.lastIndexOf("#")+1),e=o=o.substring(0,o.lastIndexOf("#")),t=s.split("&"),$.each(t,(function(i,e){var s,n;e&&e.indexOf("=")>0&&(s=e.substring(0,e.indexOf("=")),n=e.substring(e.indexOf("=")+1),n=decodeURIComponent(n),l[s]=n)}))),o&&o.indexOf("?")>0&&(e=o.substring(0,o.indexOf("?")),t=(o=o.substring(o.indexOf("?")+1)).split("&"),$.each(t,(function(i,e){var s,n;e.indexOf("=")>0&&(s=e.substring(0,e.indexOf("=")),n=e.substring(e.indexOf("=")+1),n=decodeURIComponent(n),a[s]=n)}))),e&&e.indexOf(".")>-1&&(n=e.substring(e.lastIndexOf(".")+1)),{doctype:n,url:e,params:a,params_tag:l}},IG$._unstrip_url=function(i){var e=i.url,s=0;return i.params&&$.each(i.params,(function(i,n){e+=0==s?"?":"&",e+=i+"="+(n||""),s++})),i.params_tag&&(s=0,$.each(i.params_tag,(function(i,n){e+=0==s?"#":"&",e+=i+"="+(n||""),s++}))),e},IG$.doStartSession=function(i,e,s,n,o,t,a){n&&n.show();var l=$("#il_err");l.hide();var r=new IG$._rpc$;r.init(this,{ack:"security",payload:{mts:o},mbody:{}},this,(function(l){var r,d;r=l.p1,d=l.p2,r&&d?(IG$.rsaPublicKeyModules=r,IG$.rsaPublicKeyExpoenent=d,IG$.rsa_kinfo=l.p3,IG$._g$a=l.mts,setTimeout((function(){IG$.pLoginRSA(i,e,s,n,o,t,a)}),10)):n&&n.hide()}),(function(i){var e=i.errorcode,s=i.errormsg;if(n&&n.hide(),"0x6d00"==e)return l.unbind("click"),l.bind("click",(function(){l.hide()})),l.show(),$(".igc-errorinfo-msg",l).html(s),!1})),r.send()},IG$.psst_set=function(i,e){i&&window.use_session_key&&e?$.cookie("amp_auth",e):($.removeCookie("amp_auth"),ig$._session_key=null)},IG$.pLoginRSA=function(i,e,s,n,o,t,a){var l=IG$.encryptKey(i,[e,s]),r=$("#il_err");r.hide(),IG$.psst_set(0);var d=new IG$._rpc$,p={userid:l[0],passwd:l[1],keyvar:i.rsa_kinfo};a&&a.sso_module&&(p.sso_module=a.sso_module),d.init(this,{ack:"login",payload:p,mbody:{lang:useLocale,app:loadingApp,theme:ig$.theme_id,session_expire:""+(ig$.session_expire||0),mts:o||""}},this,(function(i){var e;n&&n.hide(),i.token,i.uid,(e=i.redirect)&&e.length>0&&window.location.replace(e)}),(function(i){var e=i.errormsg,s=i.errorcode;return n&&n.hide(),"0x6d00"==s?(r.unbind("click"),r.bind("click",(function(){r.hide()})),r.show(),$(".igc-errorinfo-msg",r).html(e),t&&t.execute(),!1):t?(t.execute(),!1):void 0})),d.send()},IG$.chkSvrInfo=function(i,e){var s=new IG$._rpc$;s._rmethod="GET",s.init(this,{get_params:{sreq:"version"}},this,(function(i,s){ig$.appInfo=ig$.appInfo||{},ig$.appInfo.appversion=ig$.appInfo.appversion$||i.version||"0.0",ig$.appInfo.apprelease=ig$.appInfo.apprelease$||i.release||"0.00",ig$.appInfo.licensed=i.licensed||"xxx",e&&e.call()}),(function(i){return ig$.appInfo=ig$.appInfo||{},ig$.appInfo.appversion="_._",ig$.appInfo.apprelease="_._.___",ig$.appInfo.licensed="",e&&e.call(),!1})),s.send(i)},IG$.createLoginPanel=function(i,e,s,n){var o,t,a,l=$("<div id='loginWindow' class='loginWindow'></div>"),r=$("<div class='login-container'></div>").appendTo(l),d=ig$.lang,p=ig$.themes;if(window.bowser.msie&&(l.css({width:"100%",height:"100%"}),ig$.appbg)){var c=$("<img src='./images/"+ig$.appbg+"' class='background'/>");c.css({width:"100%",height:"100%",position:"absolute",top:0,left:0}),r.append(c)}if(d)for(o=0;o<d.length;o++)if(d[o].code==useLocale){t=d[o];break}if(a=["<div class='login-mc bounceInDown animated'>","<div class='login-ic'>","<img class='login-logo' src='./images/logo_7186.png'>","<div id='login_locale'><div class='locale_button'><span>Language</span>","<select id='b_loc"+i.id+"'>"],d)for(o=0;o<d.length;o++)a.push("<option value='"+d[o].code+"'"+(useLocale==d[o].code?" selected":"")+">"+d[o].disp+"</option>");if(a.push("</select></div></div>"),p){for(a.push("<div id='login_theme'><div class='locale_button'><span>Theme</span>"),a.push("<select id='b_theme"+i.id+"'>"),o=0;o<p.length;o++)a.push("<option value='"+p[o].code+"'"+(ig$.theme_id==p[o].code?" selected":"")+">"+p[o].disp+"</option>");a.push("</select></div></div>")}a.push("<form name='login_form' class='login_form' id='login_form"+i.id+"' rel='nofollow' target='temp' action=''>"),a.push(" <ul id='login_path'>"),a.push("   <li>"),a.push("\t<div id='user_lbl' class='login-lbl user_lbl'>"+(t&&t.l1?t.l1:"User ID")+"</div>"),a.push("\t<input id='userid"+i.id+"' class='userid' type='text' name='userid' value='"+(e||"")+"'>"),a.push("   </li>"),a.push("   <li>"),a.push("\t<div id='pass_lbl' class='login-lbl pass_lbl'>"+(t&&t.l2?t.l2:"Password")+"</div>"),a.push("\t<input id='userpassword"+i.id+"' class='userpassword' type='password' name='userpassword' value='"+(s||"")+"'>"),a.push("   </li>"),a.push("   <li>"),a.push("\t<div class='login-lbl'>&nbsp;</div>"),a.push("\t<input id='login_btn"+i.id+"' class='login_btn' type='button' value='"+(t&&t.l3?t.l3:"Login")+"'>"),a.push("   </li>"),a.push(" </ul>"),a.push(" <ul id='twoway_form' style='display:none;'>"),a.push("   <li>"),a.push("\t<div id='user_lbl' class='login-lbl'>"+(t&&t.l5?t.l5:"2 way key")+"</div>"),a.push("\t<input id='twoway_key"+i.id+"' type='text' name='twoway_key' value=''>"),a.push("   </li>"),a.push("   <li>"),a.push("\t<div class='login-lbl'>&nbsp;</div>"),a.push("\t<input id='twoway_validate"+i.id+"' type='button' value='"+(t&&t.l6?t.l6:"Validate")+"'>"),a.push("   </li>"),a.push("   <li>"),a.push("\t<div class='login-lbl'>&nbsp;</div>"),a.push("\t<input id='twoway_retry"+i.id+"' type='button' value='"+(t&&t.l7?t.l7:"Retry")+"'>"),a.push("   </li>"),a.push(" </ul>"),a.push("</form>"),a.push("<div id='license'>Licensed to: "+(ig$.appInfo?ig$.appInfo.licensed||"xxx":"...")+"</div>"),a.push("</div>"),a.push("</div>"),loginForm=$(a.join("")).appendTo(r).addClass("loginForm");$("<div class='legal'><table border='0' cellpadding='0' cellspacing='0'>  <tr>\t<td width='78'>&nbsp;</td>\t<td width='*' valign='top'><div align='left'>\t  <p class='style2'>"+ig$.copy+"</p>\t  <p class='style1'><span class='style4'>For support please contact</span>\t  <a href='https://amplixbi.com' target='_new'>amplixbi.com</a></p>\t</div></td>  </tr></table></div>").appendTo(r);var u=$("<div class='build'><div align='right'><span class='style6'>Build Id: <span id='app_release'"+(ig$.appInfo&&ig$.appInfo.apprelease)+"</span></span></div></div>").appendTo(r);$("<div id='il_err' class='igc-alert-cnt'><div class='igc-alert-bg'></div><div class='igc-alert-body'><div class='igc-alert igc-alert-error'><a class='close'>x</a><h4 class='alert-heading'></h4><span class='igc-errorinfo-msg'></span></div></div></div>").appendTo(r).hide();var g=$("<div id='login-progress' class='login-progress'></div>").css({position:"absolute",width:"100%",height:"100%",top:0,left:0,right:0,bottom:0}).hide().appendTo(r);return window.IG$.cLogin&&window.IG$.cLogin(l),i.target?i.target.append(l):$(document.body).append(l),IG$.chkSvrInfo(i,(function(){$("#app_release",u).text(ig$.appInfo.apprelease),$("#license",l).text("Licensed to: "+(ig$.appInfo.licensed||"xxx"))})),setTimeout((function(){e?$("#userpassword"+i.id,l).focus():$("#userid"+i.id,l).focus()}),200),$("#userpassword"+i.id,l).bind("focus",(function(){$("#userpassword"+i.id,l).select()})),$("#userid"+i.id,l).bind("focus",(function(){$("#userid"+i.id,l).select()})),$("#userpassword"+i.id,l).bind("mouseup",(function(){setTimeout((function(){$("#userpassword"+i.id,l).select()}),80)})),$("#userid"+i.id,l).bind("mouseup",(function(){setTimeout((function(){$("#userid"+i.id,l).select()}),80)})),!1!==n&&($("#b_loc"+i.id,l).bind("change",(function(e){var s,n=$("#b_loc"+i.id,l),o=$("option:selected",n).val(),t=$(location).attr("href");o&&o!=window.useLocale&&($.removeCookie("lang"),$.cookie("lang",o,{path:"/"}),"html"==(s=IG$._parse_url(t)).doctype?s.params_tag.lang=o:s.params.lang=o,s.params_tag.source="app",t=IG$._unstrip_url(s),g.show(),setTimeout((function(){window.location.replace(t),"html"==s.doctype&&window.location.reload()}),100))})),$("#b_theme"+i.id,l).bind("change",(function(e){var s=$("#b_theme"+i.id,l),n=$("option:selected",s).val(),o=$(location).attr("href");n!=ig$.theme_id&&($.removeCookie("theme"),$.cookie("theme",n,{path:"/"}),urlinfo=IG$._parse_url(o),"html"==urlinfo.doctype?urlinfo.params_tag.theme=n:urlinfo.params.theme=n,urlinfo.params_tag.source="app",o=IG$._unstrip_url(urlinfo),g.show(),setTimeout((function(){window.location.replace(o),"html"==urlinfo.doctype&&window.location.reload()}),100))})),$("#login_btn"+i.id,l).bind("click",(function(e){e.preventDefault(),e.stopPropagation();var s=$("#userid"+i.id,l).val(),n=$("#userpassword"+i.id,l).val();return $("#userpassword"+i.id,l).val(""),$(this).blur(),s?n?(i.dlgLogin.getKeyPair(s,n,g,window.m$mts),!1):(IG$.ShowError(IRm$.r1("L_BLANK_PASSWORD")),!1):(IG$.ShowError(IRm$.r1("L_BLANK_USERID")),!1)})),$("#userpassword"+i.id,l).bind("keypress",(function(e){if(13==e.keyCode){var s=$("#userid"+i.id,l).val(),n=$("#userpassword"+i.id,l).val();return $("#userpassword"+i.id,l).val(""),$(this).blur(),s?n?(i.dlgLogin.getKeyPair(s,n,g,window.m$mts),!1):(IG$.ShowError(IRm$.r1("L_BLANK_PASSWORD")),!1):(IG$.ShowError(IRm$.r1("L_BLANK_USERID")),!1)}return!0}))),l},IG$.showLogin=function(i,e,s){$("#idv-mnu-pnl",i.target).hide(),i.dlgLogin&&(i.dlgLogin.callback=new IG$.callBackObj(this,(function(){i.dlgLogin.tl=-1,IG$.showLoginProc(i)}))),window.hist&&window.hist.addHistory(""),i._popupDlgs&&($.each(i._popupDlgs,(function(i,e){try{e&&e.close&&e.close()}catch(i){}})),i._popupDlgs=[]),$("#robo_close","#robo_main").trigger("click");var n=$("#loginWindow",i.target),o=window.bowser;$("#license",n).html("Licensed to: "+(ig$.appInfo?ig$.appInfo.licensed||"xxx":"...")),n.css({zIndex:99}),o.msie&&n.css({position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",margin:0,padding:0}),n.show()},IG$.showLogout=function(i){IG$.msgint>-1&&(clearInterval(IG$.msgint),IG$.msgint=-1),IG$.confirmMessages(IRm$.r1("B_CONFIRM"),IRm$.r1("L_T_LOUT"),(function(e){if("yes"==e){IG$.psst_set(0);var s=new IG$._rpc$;s.init(null,{ack:"logout",payload:{},mbody:{}},null,(function(i){IG$.psst_set(0)}),(function(){return!0})),s.send(),IG$.showLogin(i,1)}}))};
IG$.prepareCustomMenu=function(e,t){var n,i=this,a=i.instance,r=i.customMenu,c=e.data,s=c.type.toLowerCase(),o=c.locale_name||c.name,d=c.nodepath||"/",_=c.uid,h=c.type,l=!(!c.writable&&!c.manage),u=!!c.manage,m=c.issubcube,p=c.isrfolder,f=c.isbo,I=i.isdatasource,g=a.mainPanel,b=!1,E=c.is_priv,M=c.is_dept,R=i.meta_type;switch(r.removeAll(),s){case"root":(n={text:IRm$.r1("L_WORKSPACE"),hidden:!1!==ig$.features.ig_n_cw,handler:function(){this._createMetaObject("Folder",_,d,e)},scope:this}).hidden||(r.add(n),b=!0);break;case"folder":case"rfolder":case"javapackage":var L;"javapackage"==s&&(f=s),f?L=[{text:IRm$.r1("B_FOLDER"),hidden:!1!==ig$.features.ig_n_f_f,handler:function(){this._createMetaObject("Folder",_,d,e)},scope:this},{text:IRm$.r1("B_JAVA_CLASS"),hidden:!1!==ig$.features.ig_n_jc,handler:function(){this._createMetaObject("JavaClass",_,d,e)},scope:this}]:"codemap"==t?L=[{text:IRm$.r1("B_FOLDER"),hidden:!1!==ig$.features.ig_n_f_f,handler:function(){this._createMetaObject("Folder",_,d,e)},scope:this},{text:IRm$.r1("L_CODEMAPPING"),hidden:!1!==ig$.features.ig_n_lk,handler:function(){this._createMetaObject("CodeMap",_,d,e)},scope:this}]:"NLP"==t?L=[{text:IRm$.r1("B_FOLDER"),hidden:!1!==ig$.features.ig_n_f_f,handler:function(){this._createMetaObject("Folder",_,d,e)},scope:this},{text:IRm$.r1("L_NLP"),handler:function(){this._createMetaObject("NLP",_,d,e)},scope:this}]:I?(L=[{text:IRm$.r1("L_IMP_TABLES"),handler:function(){this.raiseCustomEvent("toolbar","import_object",e)},scope:this},{text:IRm$.r1("L_INLINE_VIEW"),handler:function(){this.raiseCustomEvent("toolbar","cmd_inlineview",e)},scope:this},{text:IRm$.r1("B_FOLDER"),iconCls:"icon-folder",hidden:!1!==ig$.features.ig_n_f_f,handler:function(){this._createMetaObject("Folder",_,d,e)},scope:this}]).push({text:IRm$.r1("B_DATASET"),handler:function(){this._createMetaObject("DataSet",_,d,e)},scope:this}):null==m?L=[{text:IRm$.r1("B_FOLDER"),iconCls:"icon-folder",hidden:!1!==ig$.features.ig_n_f_f,handler:function(){this._createMetaObject("Folder",_,d,e)},scope:this},{text:IRm$.r1("L_REPORT"),iconCls:"icon-report",hidden:!1!==ig$.features.ig_n_rpt,handler:function(){this._createMetaObject("Report",_,d,e)},scope:this},{text:IRm$.r1("L_SQL_REPORT"),iconCls:"icon-sqlreport",hidden:!1!==ig$.features.ig_n_sqlrpt,handler:function(){this._createMetaObject("SQLReport",_,d,e)},scope:this},{text:IRm$.r1("L_UIPAGE"),hidden:!0,handler:function(){this._createMetaObject("UIPage",_,d,e)},scope:this},{text:IRm$.r1("L_DASHBOARD"),iconCls:"icon-dashboard",hidden:!1!==ig$.features.ig_n_dbd,handler:function(){this._createMetaObject("Dashboard",_,d,e)},scope:this},{text:IRm$.r1("L_BOBJ"),hidden:!1!==ig$.features.ig_n_bobj,handler:function(){this._createMetaObject("Bobject",_,d,e)},scope:this},{text:IRm$.r1("L_HD_BPROC"),hidden:!1!==ig$.features.ig_n_hb,handler:function(){this._createMetaObject("BigData",_,d,e)},scope:this},{text:IRm$.r1("L_BPMN_MODELER"),hidden:!1!==ig$.features.ig_bpmn_modeler,handler:function(){this._createMetaObject("BPMN",_,d,e)},scope:this}]:"cube"==m?L=[{text:IRm$.r1("B_FOLDER"),hidden:!1!==ig$.features.ig_n_f_f,handler:function(){this._createMetaObject("Folder",_,d,e)},scope:this},{text:IRm$.r1("L_CUSTOM_METRIC"),hidden:!1!==ig$.features.ig_n_cm,handler:function(){this._createMetaObject("CustomMetric",_,d,e)},scope:this},{text:IRm$.r1("L_HIERARCHY"),hidden:!1!==ig$.features.ig_n_hm,handler:function(){this._createMetaObject("Hierarchy",_,d,e)},scope:this},{text:IRm$.r1("L_DATE_METRIC"),hidden:!1!==ig$.features.ig_n_dm,handler:function(){this._createMetaObject("DateMetric",_,d,e)},scope:this},{text:IRm$.r1("L_MEASURE"),hidden:!1!==ig$.features.ig_n_ms,handler:function(){this._createMetaObject("Measure",_,d,e)},scope:this},{text:IRm$.r1("L_FORMULA"),hidden:!1!==ig$.features.ig_n_fm,handler:function(){this._createMetaObject("FormulaMeasure",_,d,e)},scope:this},{text:IRm$.r1("L_CHART_MEASURE"),hidden:!1!==ig$.features.ig_n_cms,handler:function(){this._createMetaObject("ChartMeasure",_,d,e)},scope:this},{text:IRm$.r1("L_GROUP_MEASURE"),hidden:!1!==ig$.features.ig_n_gm,hidden:"mcube"!=m,handler:function(){this._createMetaObject("MeasureGroup",_,d,e)},scope:this}]:p&&(L=[{text:IRm$.r1("B_FOLDER"),hidden:!1!==ig$.features.ig_n_f_f,handler:function(){this._createMetaObject("Folder",_,d,e)},scope:this},{text:IRm$.r1("B_RSCRIPT"),hidden:!1!==ig$.features.ig_n_f_r,handler:function(){this._createMetaObject("RScript",_,d,e)},scope:this}]),1==l&&r.add({text:IRm$.r1("L_MAKEITEM_G"),hidden:!1!==ig$.features.ig_n_f,menu:L,scope:this}),1==a.dlgLogin.jS2&&r.add({text:IRm$.r1("L_EXPORT_META"),hidden:!1!==ig$.features.ig_n_exp,handler:function(){this.exportMeta({uid:_,name:o,nodepath:d,type:s})},scope:this}),"folder"!=s&&"rfolder"!=s&&"javapackage"!=s&&(r.add({text:IRm$.r1(1==l?"L_EDIT_ITEM":"L_VIEW_ITEM",o),handler:function(){g&&g.navigateApp(_,s,o,d,!0,l,{opt_editmode:l})},scope:this}),"report"==s&&!1===ig$.features.ig_n_cp&&r.add({text:IRm$.r1("L_COPY_ITEM",o),handler:function(){IG$.clipboard={uid:_,name:o,nodepath:d,type:s}},scope:this})),"folder"!=s||1!=l&&1!=u||null==IG$.clipboard||r.add({text:IRm$.r1("L_PASTE_ITEM"),handler:function(){this.pasteMetaObject(e)},scope:this}),b=!0;break;case"table":case"inlineview":1!=l&&1!=u||r.add({text:IRm$.r1("B_FOLDER"),hidden:!1!==ig$.features.ig_n_f_f,handler:function(){this._createMetaObject("Folder",_,d,e)},scope:this});break;case"bobject":0!=c.leaf||1!=l&&1!=u||r.add({text:IRm$.r1("B_FOLDER"),hidden:!1!==ig$.features.ig_n_f_f,handler:function(){this._createMetaObject("Folder",_,d,e)},scope:this}),1==c.leaf&&r.add({text:IRm$.r1("L_BROWSE_ITEM",o),handler:function(){var t=e;t.data.leaf=!1,t.dirty=!0,t.appendChild({type:"load",name:"Loading"}),t.expand()},scope:this}),r.add({text:IRm$.r1(1==l?"L_EDIT_ITEM":"L_VIEW_ITEM",o),handler:function(){g&&g.navigateApp(_,s,o,d,!0,l,{opt_editmode:l})},scope:this}),b=!0;break;case"report":case"bigdata":case"javaclass":case"uipage":case"cubemodel":case"dataset":case"bpmn":r.add({text:IRm$.r1(1==l?"L_EDIT_ITEM":"L_VIEW_ITEM",o),handler:function(){g.navigateApp(_,s,o,d,!0,l,{opt_editmode:l})},scope:this});break;case"dashboard":r.add({text:IRm$.r1(1==l?"L_EDIT_ITEM":"L_VIEW_ITEM",o),handler:function(){g&&g.navigateApp(_,l?"dashboardedit":"dashboard",o,d,!0,!0)},scope:this}),b=!0;break;case"measure":case"hierarchy":r.add({text:IRm$.r1(1==l?"L_EDIT_ITEM":"L_VIEW_ITEM",o),handler:function(){if(IG$.measureEditor){var e=new IG$.measureEditor({instance:i.instance,uid:_,name:o});IG$.checkLogin(i,e)}else IG$.getScriptCache(ig$.bootconfig.scmap.igcn,new IG$.callBackObj(this,(function(){if(IG$.measureEditor){var e=new IG$.measureEditor({instance:i.instance,uid:_,name:o});IG$.checkLogin(i,e)}else IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))})))}});break;case"formulameasure":r.add({text:IRm$.r1(1==l?"L_EDIT_ITEM":"L_VIEW_ITEM",o),handler:function(){var e=new IG$.formulaEditor({instance:i.instance,uid:_,name:o});IG$.checkLogin(i,e)}});break;case"chartmeasure":r.add({text:IRm$.r1(1==l?"L_EDIT_ITEM":"L_VIEW_ITEM",o),handler:function(){var e=new IG$.cellwizard({instance:i.instance,uid:_,name:o});IG$.checkLogin(i,e)}});break;case"datemetric":r.add({text:IRm$.r1(1==l?"L_EDIT_ITEM":"L_VIEW_ITEM",o),handler:function(){var t=e.get("type").toLowerCase(),n=e.get("name"),i=e.get("nodepath"),a=e.get("uid"),r="T"==e.get("writable")||"T"==e.get("manage");e.get("manage"),e.get("issubcube");g&&g.navigateApp(a,t,n,i,!0,r)}});break;case"custommetric":r.add({text:IRm$.r1(1==l?"L_EDIT_ITEM":"L_VIEW_ITEM",o),handler:function(){if(IG$.custommetric){var e=new IG$.custommetric({instance:i.instance,uid:_,name:o});IG$.checkLogin(i,e)}else IG$.getScriptCache(ig$.bootconfig.scmap.igcn,new IG$.callBackObj(this,(function(){if(IG$.custommetric){var e=new IG$.custommetric({instance:i.instance,uid:_,name:o});IG$.checkLogin(i,e)}else IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))})))}});break;case"metric":r.add({text:IRm$.r1(1==l?"L_EDIT_ITEM":"L_VIEW_ITEM",o),handler:function(){var t,n=i.rptptr;if("sql_report"==R){var a,r,c,s=n.reportoption._mc;for(a=0;a<s.inlineview_sql_objects.length;a++)if((c=s.inlineview_sql_objects[a]).sql_id==e.get("sql_id")){for(r=0;r<c.meta_dimensions.length;r++)if(c.meta_dimensions[r].uid==_){(t=c.meta_dimensions[r]).writable=!0;break}break}if(!t)return void IG$.alertmsg(ig$.appname,IRm$.r1("M_NOTFOUND_IN_DIM"),null,null,0,"error")}var d=function(){t&&(e.set("name",t.name),e.set("description",t.description),i.fireEvent&&i.fireEvent("node_rename",i,e))};if(IG$.metricEditor){var h=new IG$.metricEditor({instance:i.instance,rpt_meta_type:i.meta_type,uid:_,name:o,dmode_cnt:t,callback:new IG$.callBackObj(i,(function(){d()}))});IG$.checkLogin(i,h)}else IG$.getScriptCache(ig$.bootconfig.scmap.igcn,new IG$.callBackObj(this,(function(){if(IG$.metricEditor){var e=new IG$.metricEditor({instance:i.instance,rpt_meta_type:i.meta_type,uid:_,name:o,dmode_cnt:t,callback:new IG$.callBackObj(i,(function(){d()}))});IG$.checkLogin(i,e)}else IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))})))}}),b=!0;break;case"qicustom":var O,G=e.get("stype");G&&window.qicustom_menus.popupmenu&&window.qicustom_menus.popupmenu[G]&&(O=window.qicustom_menus.popupmenu[G]).length>0&&($.each(O,(function(t,n){r.add({text:n.text,handler:function(){if(window.qicustom_menus.popupmenu.handler){var t=window.qicustom_menus.menuitems[e.get("uid")];window.qicustom_menus.popupmenu.handler.call(window,t,n)}}})})),b=!0)}a.dlgLogin.jS2;return"qicustom"==s||1!=l&&1!=u||E||M||"sql_report"==R||(r.add({text:IRm$.r1("L_RENAME_ITEM",IG$._gitemname(o)),hidden:!1!==ig$.features.ig_n_ren,handler:function(){this._renameMetaObject(c.name,_,d,e)},scope:this}),r.add({text:IRm$.r1("L_DELETE_ITEM",IG$._gitemname(o)),hidden:!1!==ig$.features.ig_n_del,handler:function(){this.deleteMetaObject(_,e)},scope:this}),b=!0),"qicustom"!=s&&"folder"!=s&&(!e.isRoot||e.isRoot&&0==e.isRoot())&&("report"==s&&(r.add({text:IRm$.r1("L_COPY_ITEM",o),handler:function(){IG$.clipboard={uid:_,name:o,nodepath:d,type:s}},scope:this}),b=!0),1==a.dlgLogin.jS2&&(!1!==ig$.features.ig_n_e_meta||E||M||"sql_report"==R||r.add({text:IRm$.r1("L_EDIT_META"),handler:function(){this.editMeta&&this.editMeta({uid:_,name:o,nodepath:d,type:s})},scope:this}))),"qicustom"!=s&&1==u&&"sql_report"!=R&&(r.add({text:IRm$.r1("L_OBJECT_AUTH"),hidden:!1!==ig$.features.ig_n_oauth,handler:function(){var e;e=new IG$.objectAuth({instance:i.instance,uid:_,itemtype:h}),IG$.checkLogin(this,e)},scope:this}),r.add({text:IRm$.r1("L_SUBSCRIBE"),hidden:!1!==ig$.features.ig_n_osubscr,handler:function(){var e;e=new IG$.objectSubscribe({instance:i.instance,uid:_,itemtype:h}),IG$.checkLogin(this,e)},scope:this}),r.add({text:IRm$.r1("L_REVISION"),hidden:!1!==ig$.features.ig_n_rev,handler:function(){IG$.procMenuCommand(a,"CMD_REVISION",_)},scope:this}),b=!0),"qicustom"==s||"folder"!=s&&0!=c.leaf||r.add({text:IRm$.r1("L_REFRESH"),handler:function(){this.refreshNode(e)},scope:this}),"qicustom"!=s&&1==u&&r.add({text:IRm$.r1("L_MGR_FD"),hidden:!1!==ig$.features.ig_n_mgf,handler:function(){this.manageFolder(e)},scope:this}),b},IG$.deleteMetaObject=function(e,t,n){var i=this;IG$.confirmMessages(ig$.appname,IRm$.r1("M_CONFIRM_DELETE"),(function(a){if("yes"==a){var r,c=new IG$._rpc$,s=[];if("object"==typeof e&&e.length){for(r=0;r<e.length;r++)s.push({uid:e[r],option:"delete"});c.init(i,{ack:"batchcontent",payload:s,mbody:{}},i,i.rdeleteMetaObject,null,[t,n])}else c.init(i,{ack:"deletecontent",payload:{uid:e},mbody:{}},i,i.rdeleteMetaObject,null,[t,n]);c.send()}}),i,i)},IG$.rdeleteMetaObject=function(e,t){var n=this,i=t[0],a=t[1];if(n.selectedNode=[],IG$.alertmsg(ig$.appname,IRm$.r1("M_DELETED"),null,n,0,"success"),n.fireEvent){if(n.fireEvent("refreshTree",n,i))return}a?a.execute():i&&n.refreshNode&&n.refreshNode(i.parentNode)},IG$._itemEditCtrlMap={measure:"measureEditor",hierarchy:"HierarchyEditor",custommetric:"custommetric",datemetric:"datemetric",formulameasure:"formulaEditor",chartmeasure:"cellwizard",udg:"_udgeditor"},IG$._createMetaObject=function(e,t,n,i,a){var r,c=this,s=IG$._itemEditCtrlMap[e.toLowerCase()];r=s?new IG$[s]({instance:c.instance,parentnodepath:n,itemtype:e,parentuid:t,callback:c.r_createMetaObject?new IG$.callBackObj(c,c.r_createMetaObject,[i,a]):a}):new IG$.makeItem({instance:c.instance,parentnodepath:n,itemtype:e,parentuid:t,callback:c.r_createMetaObject?new IG$.callBackObj(c,c.r_createMetaObject,[i,a]):a}),IG$.checkLogin(this,r)},IG$.r_createMetaObject=function(e,t){var n,i=this,a=i.instance,r=t[0],c=t[1],s=a.mainPanel;e&&s&&("Bobject"==e.type||"Report"==e.type||"SQLReport"==e.type)&&(n=e,s.navigateApp(n.uid,n.type.toLowerCase(),n.name,n.uid,!0,n.writable,{opt_editmode:n.writable})),i.fireEvent&&i.fireEvent("refreshTree",i,r)||(r&&i.refreshNode&&i.refreshNode(r),!r&&i.refreshCurrent&&i.refreshCurrent(),c&&c.execute())},IG$.editMeta=function(e){var t=this.instance;IG$.procMenuCommand(t,"CMD_META_EDIT",e)},IG$._renameMetaObject=function(e,t,n,i,a){var r=this,c=new IG$.makeItemEditor({instance:r.instance,itemname:e,uid:t,nodepath:n,itemtype:i.data.itemtype||i.data.type,memo:i.data.memo||"",callback:new IG$.callBackObj(r,a||r.r_renameMetaObject,i)});IG$.checkLogin(r,c)},IG$.r_renameMetaObject=function(e,t){var n=this;n.fireEvent&&n.fireEvent("refreshTree",n,t)||(t&&t.parentNode&&n.refreshNode(t.parentNode),!t&&n.refreshCurrent())},IG$.pasteMetaObject=function(e){var t=this,n=new IG$._rpc$;n.init(t,{ack:"writecontent",payload:{pid:e.get("uid"),address:IG$.clipboard.uid},mbody:{option:"copy"}},t,t.rpasteMetaObject,null,e),n.send()},IG$.rpasteMetaObject=function(e,t){var n=this;n.fireEvent&&(r=n.fireEvent("refreshTree",n,node),r)||this.refreshNode(t)},IG$.load_content=function(e,t,n){var i,a=this,r=new IG$._rpc$,c="helpcontent";switch(e){case 0:case 5:c="content";break;case 1:c="content",t="~/";break;case 2:i="favorites";break;case 3:i="recent";break;case 4:i="trashbin"}r.init(a,{ack:c,payload:{uid:t,type:"/"==t?"Folder":undefined},mbody:n||{option:i,subfolder:"T"}},a,a.rload_content,null,e),r.send()},IG$.getParentCube=function(e,t,n){var i=this,a=new IG$._rpc$;a.init(i,{ack:"helpcontent",payload:{uid:e||t,parenttype:"Bobject",read:"F"},mbody:{option:"parentcontent"}},i,(function(a){if(a&&a.length)n.execute(a);else{var r=new IG$._rpc$;r.init(i,{ack:"helpcontent",payload:{uid:e||t,parenttype:"DataSet",read:"F"},mbody:{option:"parentcontent"}},i,(function(e){n.execute(e)}),null),r.send()}}),null),a.send()},IG$.dlg_tmpl_hlp=$s.extend($s.window,{width:400,height:380,layout:"fit",modal:!0,bodyPadding:ig$.padding,_init:function(){var e,t,n=this,i=(n.mtype,[]),a=n.mvalueset,r=n.down("[name=grd_helper]");if(a)i=a;else if(ig$.helper)for(e=0;e<ig$.helper.length;e++)if((t=ig$.helper[e]).type==n.mtype){if("dateformat"==n.mtype&&t.issql&&(0==t.issql||!n.moption))continue;i.push({name:t.name,value:t.value})}r.store.loadData(i)},_confirm:function(e){var t=this;t.callback&&t.callback.execute(e.get("value")),t.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_HELPER_TMPL"),items:[{xtype:"panel",flex:1,layout:{type:"fit"},defaults:{padding:ig$.padding},items:[{xtype:"panel",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grd_helper",store:{},flex:1,columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",tdCls:"igc-td-link",width:200},{text:IRm$.r1("B_VALUE"),dataIndex:"value",flex:1,minWidth:300}],listeners:{cellclick:function(e,t,n,i,a,r){if(0==n){this._confirm(i)}},scope:this}}]}]}],buttons:[{xtype:"button",text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){e._init()}}}),IG$.dlg_tmpl_hlp.superclass.initComponent.call(this)}}),IG$.show_tmpl_hlp=function(e,t,n,i,a){var r=e,c=new IG$.dlg_tmpl_hlp({instance:e.instance,mtype:t,moption:i,mvalueset:a,callback:new IG$.callBackObj(e,(function(t){e.down("[name="+n+"]").setValue(t)}))});IG$.showDlg(r,c)};
IG$.explorerSearch=$s.extend($s.window,{modal:!0,resizable:!1,width:400,autoHeight:!0,bodyPadding:ig$.padding,layout:{type:"vbox",align:"stretch"},init_f:function(){var e,t,a=this,l=a.searchOption,d=a.down("[name=fltsetdate]"),n=a.down("[name=fltfromdate]"),o=a.down("[name=flttodate]"),i=a.down("[name=fltypegrid]"),s={},r=[{name:IRm$.r1("D_FOLDER"),type:"Folder"},{name:IRm$.r1("D_BOBJECT"),type:"BObject"},{name:IRm$.r1("D_REPORT"),type:"Report"},{name:IRm$.r1("D_METRIC"),type:"Dimension"},{name:IRm$.r1("D_MEASURE"),type:"Measure"}];if(i.store.loadData(r),l&&(a.down("[name=keyword]").setValue(l.keyword),d.setValue(l.fltsetdate),l.fltfromdate&&n.setValue(l.fltfromdate),l.flttodate&&o.setValue(l.flttodate),l.typelist&&l.typelist.length>0)){for(t=0;t<l.typelist.length;t++)s[l.typelist[t]]=1;for(t=0;t<i.store.data.items.length;t++)1==s[(e=i.store.data.items[t]).get("type")]&&e.set("selected",!0)}},_confirm:function(){var e,t=this,a=t.searchOption,l=t.down("[name=fltsetdate]").getValue(),d=t.down("[name=fltfromdate]").getValue(),n=t.down("[name=flttodate]").getValue(),o=t.down("[name=fltypegrid]"),i=[];for(e=0;e<o.store.data.items.length;e++)1==o.store.data.items[e].get("selected")&&i.push(o.store.data.items[e].get("type"));a.fltsetdate=l,a.fltfromdate=d?d.getTime():null,a.flttodate=n?n.getTime():null,a.typelist=i,a.keyword=t.down("[name=keyword]").getValue(),t.callback&&t.callback.execute(),t.close()},initComponent:function(){this.title=IRm$.r1("I_EXP_SCH"),$s.apply(this,{items:[{xtype:"fieldset",title:IRm$.r1("L_FLT_COND"),collapsible:!1,autoHeight:!0,collapsed:!1,defaults:{labelWidth:80,anchor:"100%",layout:"anchor",defaults:{anchor:"100%"}},items:[{xtype:"textfield",name:"keyword",fieldLabel:IRm$.r1("L_KEYWORD")},{xtype:"combobox",name:"fltypegroup",queryMode:"local",displayField:"name",valueField:"gcode",editable:!1,store:{fields:["name","gcode"],data:[{name:IRm$.r1("L_QUICK_SELECT"),gcode:""},{name:IRm$.r1("B_ALL"),gcode:"all"},{name:IRm$.r1("D_FOLDER"),gcode:"folder"},{name:1==IG$.level?"Report or dashboard":IRm$.r1("D_REPORT"),gcode:"report"},{name:IRm$.r1("L_ANAL_ITEMS"),gcode:"dimensions"}]},listeners:{select:function(e,t,a){var l,d,n=e.getValue(),o=this.down("[name=fltypegrid]").store,i=null,s=null;switch(n){case"all":i=null;break;case"report":i="Report|Dashboard";break;case"folder":i="Folder";break;case"dimensions":i="Dimension|Measure"}for(null!=i&&(s=new RegExp(i)),l=0;l<o.data.items.length;l++)d=o.data.items[l].get("type"),null==i||null!=s&&1==s.test(d)?o.data.items[l].set("selected",!0):o.data.items[l].set("selected",!1)},afterrender:function(e){e.setValue("")},scope:this}},{xtype:"gridpanel",name:"fltypegrid",region:"center",layout:"fit",hideHeaders:!0,flex:1,height:140,scroll:"vertical",stateful:!1,store:{fields:["selected","name","type","nodepath","uid","iconimg"]},columns:[{xtype:"checkcolumn",dataIndex:"selected",width:30,editor:{xtype:"checkbox",cls:"x-grid-checkheader-editor"}},{header:"",dataIndex:"iconimg",sortable:!1,hideable:!1,width:20},{header:IRm$.r1("B_NAME"),dataIndex:"name",sortable:!1,hideable:!1,flex:1}],listeners:{afterrender:function(e){}}}],listeners:{}},{xtype:"fieldset",title:IRm$.r1("L_FLT_DATE_PERIOD"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",name:"fltsetdate",fieldLabel:"",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e,t,a,l){var d=e.getValue(),n=this.down("[name=fltfromdate]"),o=this.down("[name=flttodate]");n.setDisabled(!d),o.setDisabled(!d)},scope:this}},{xtype:"datefield",name:"fltfromdate",disabled:!0,labelWidth:70,fieldLabel:IRm$.r1("B_FROM"),maxValue:new Date,format:"Y-m-d",value:new Date},{xtype:"datefield",name:"flttodate",disabled:!0,labelWidth:70,fieldLabel:IRm$.r1("B_TO"),maxValue:new Date,format:"Y-m-d",value:new Date}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]}),IG$.explorerSearch.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(e){this.init_f()}}});
IG$.explorer=$s.extend($s.panel,{bodyPadding:0,layout:"border",border:0,searchOption:{},deleteContent:function(e){var t=this;IG$.confirmMessages(IRm$.r1("B_CONFIRM"),IRm$.r1("B_CD_CHS"),(function(n){"yes"==n&&t._deleteContent(e)}))},getSelected:function(e){var t,n={items:[],length:0};for(t=0;t<e.store.data.items.length;t++)rec=e.store.data.items[t],1==rec.get("selected")&&n.items.push(rec);return n.length=n.items.length,n},_deleteContent:function(e){var t,n=this,a=n.down("[name=mg]"),o=[],r=n.getSelected(a),s=0,c=new IG$._rpc$;if(r.length>0){for(i=0;i<r.length;i++)if(".."!=(t=r.items[i]).get("name")&&(t.get("manage")||t.get("writable")))o.push({uid:t.get("uid"),option:"delete"}),s++;else if(".."!=t.get("name")){s=0,IG$.ShowError(IRm$.r1("E_PV_L",t.get("name")),n);break}s>0&&(c.init(n,{ack:"batchcontent",payload:o,mbody:{option:"delete"}},n,n.rdeleteContent,null,e),c.send())}},rdeleteContent:function(e,t){this.refreshCurrent()},deleteMetaObject:function(e,t){var n=this,a=new IG$._rpc$;a.init(n,{ack:"deletecontent",payload:{uid:e},mbody:{}},n,n.rdeleteMetaObject,null,t),a.send()},rdeleteMetaObject:function(e,t){t&&t.store.remove(t),IG$.alertmsg(ig$.appname,IRm$.r1("M_DELETED"),null,this,0,"success")},processMenu:function(e,t){var n,a=this,i=a.openItem,o=a.mainPanel,r=a.instance;switch(e){case"cmd_c_workspace":IG$.procMenuCommand(r,"CMD_MAKE_WORKSPACE");break;case"cmd_c_folder":i&&a._createMetaObject("Folder",i.uid,i.nodepath,t);break;case"cmd_c_reports":i&&a._createMetaObject("Report",i.uid,i.nodepath,t);break;case"cmd_c_sql_reports":i&&a._createMetaObject("SQLReport",i.uid,i.nodepath,t);break;case"cmd_c_dbd":i&&a._createMetaObject("Dashboard",i.uid,i.nodepath,t);break;case"cmd_c_upload":i&&a._createMetaObject("DataCube",i.uid,i.nodepath,t);break;case"cmd_c_cube":i&&a._createMetaObject("Cube;SQLCube;NoSQL;MDBCube",i.uid,i.nodepath,t);break;case"cmd_c_dbmodel":i&&a._createMetaObject("CubeModel",i.uid,i.nodepath,t);break;case"cmd_c_metrics":t&&i&&a._createMetaObject(t,i.uid,i.nodepath,t);break;case"cmd_c_workflow":i&&a._createMetaObject("BigData",i.uid,i.nodepath,t);break;case"cmd_c_java":i&&a._createMetaObject("JavaClass",i.uid,i.nodepath,t);break;case"cmd_up":a._breadcrumbitems&&a._breadcrumbitems.length>1&&a.load_content(0,a._breadcrumbitems[a._breadcrumbitems.length-2].cpath);break;case"cmd_moveto":a.moveTo();break;case"cmd_remove":a.deleteContent(t);break;case"cmd_open":if(i&&o&&IG$.testVal("cube|datacube|sqlcube|nosql|mcube|mdbcube",i.type.toLowerCase()))o.navigateApp(i.uid,i.type.toLowerCase(),i.name,i.nodepath,!0,i.writable);else{var s=(c=a.down("[name=mg]")).getSelectionModel();for(n=0;n<c.store.data.items.length;n++)if(l=c.store.data.items[n],s.isFocused(l)){d=l;break}d&&IG$.testVal("cube|datacube|sqlcube|nosql|mcube|mdbcube",d.get("type").toLowerCase())&&o.navigateApp(d.get("uid"),d.get("type").toLowerCase(),d.get("name"),d.get("nodepath"),!0,d.get("writable"))}break;case"cmd_edit":var c,l,d;s=(c=a.down("[name=mg]")).getSelectionModel();for(n=0;n<c.store.data.items.length;n++)if(l=c.store.data.items[n],s.isFocused(l)){d=l;break}d&&o.navigateApp(d.get("uid"),d.get("type").toLowerCase(),d.get("name"),d.get("nodepath"),!0,d.get("writable"));break;case"cmd_recover":a.trashbinAction(!1);break;case"cmd_delete":a.trashbinAction(!0);break;case"cmd_detail":a.down("[name=pnl_detail]").show(),a._pnl_detail=1,a._update_detail()}},moveTo:function(){var e=this,t=new IG$.metaSelectDlg({instance:e.instance,visibleItems:"folder",targetobj:"folder",tree_options:{cubebrowse:!1,rootuid:null},callback:new IG$.callBackObj(e,e.m_moveTo)});IG$.checkLogin(this,t)},m_moveTo:function(e){var t=this;e&&IG$.confirmMessages(IRm$.r1("B_CONFIRM"),IRm$.r1("B_CD_MHS",e.name),(function(n){"yes"==n&&t.r_moveTo(e)}))},r_moveTo:function(e){var t,n=this.down("[name=mg]"),a=this.getSelected(n);if(a&&a.length>0){var i,o,r="<smsg>",s=this,c=0;for(o=0;o<a.length;o++)"T"!=(t=a.items[o]).get("writable")&&"T"!=t.get("manage")||(r+="<item uid='"+t.get("uid")+"'/>",c++);r+="</smsg>",c>0&&((i=new IG$._rpc$).init(s,{ack:"helpcontent",payload:r,mbody:{option:"move",target:e.uid}},s,s.s_moveTo,null,null),i.send())}},s_moveTo:function(e){this.refreshCurrent()},trashbinAction:function(e){var t,n=this,a="<smsg>",i=new IG$._rpc$,o=0,r=n.down("[name=mg]"),s=n.getSelected(r).items;for(t=0;t<s.length;t++)a+="<item"+IG$.XUpdateInfo({uid:s[t].get("uid")},"uid","s")+"/>",o++;a+="</smsg>",o>0&&(i.init(n,{ack:"helpcontent",payload:a,mbody:{option:e?"remove_trash":"recover_trash"}},n,n.rtrashbinAction,null,null),i.send())},rtrashbinAction:function(e){this.refreshCurrent()},initData:function(){var e,t,n,a,i=this,o=i.down("[name=pl1]"),r=[];for($(o.body.dom).empty(),i.toolbarbuttons={items:[{name:"btn_refresh"},{name:"btn_moveto",fcls:"ig_n_mv"},{name:"btn_remove",fcls:"ig_n_del"},{name:"btn_recover"},{name:"btn_open"},{name:"btn_up"},{name:"btn_delete"},{name:"btn_edit"},{name:"btn_create",cls:"ig_n_f"}],c_menu:[]},t=0;t<i.toolbarbuttons.items.length;t++){if((e=i.toolbarbuttons.items[t]).obj=i.down("[name="+e.name+"]"),e.obj.setVisible(!1),e.ltype=e.obj.ltype,e.ctype=e.obj.ctype,e.sroot=e.obj.sroot,e.fcls=e.cls,"btn_create"==e.name)for(n=0;n<e.obj.menu.items.length;n++)a=e.obj.menu.items.items[n],i.toolbarbuttons.c_menu.push({obj:a,name:a.name,ltype:a.ltype,mtype:a.mtype,sroot:a.sroot,fcls:a.fcls});i.toolbarbuttons[e.name]=e}!1===ig$.features.ig_m_prv_ws&&r.push({text:IRm$.r1("L_C_PR"),cls:"ig_n_p",handler:function(){i.load_content(1)}}),r=r.concat([{text:IRm$.r1("L_C_AL"),cls:"ig_n_a",handler:function(){i.load_content(0,"/")}},{text:IRm$.r1("L_C_FC"),cls:"ig_n_fav",handler:function(){i.load_content(2)}},{text:IRm$.r1("L_C_MW"),cls:"ig_n_mw",handler:function(){i.load_content(5,"/")}},{text:IRm$.r1("L_C_LC"),cls:"ig_n_rcnt",handler:function(){i.load_content(3)}}])},load_content:IG$.load_content,isVisibleItem:function(e,t,n,a){var i=e.ltype.indexOf(t+";")>-1,o=this.openItem&&"/"==this.openItem.nodepath;return i&&e.fcls&&!1!==ig$.features[e.fcls]&&(i=!1),(i=(0!=e.sroot||1!=o)&&i)&&e.ctype&&n&&(i=e.ctype.indexOf(n+";")>-1),i&&"btn_up"==e.name&&(!a||a&&a.split("/").length<2)&&(i=!1),i},isVisibleCreate:function(e,t,n){var a,i,o=this,r=o.instance,s=e.ltype.indexOf(t+";")>-1,c=o.openItem&&"/"==o.openItem.nodepath;return s=!(!s||!1!==ig$.features[e.fcls]),1==(s=(1!=c||0!=e.sroot)&&s)&&e.mtype&&("nvl"==e.mtype&&n?s=!1:"nvl"==e.mtype||n?n&&(i=(a=n.indexOf(";"))>-1?n.substring(a+1).toLowerCase():"formaterror",s=!!(n&&e.mtype.indexOf(i+";")>-1)):s=!1),"c_workspace"!=e.name||!c||1!=r.dlgLogin.jS2&&!1!==ig$.features[e.fcls]||(s=!0),s},navigateTree:function(e){var t=this.mtree.getRootNode();this.ntritem=e,this.ntrnode=t,this.ntrseq=1,this.navigateTreeOpen()},navigateTreeOpen:function(){var e,t,n,a=this.mtree,i=this.ntritem.nodepath||this.ntritem,o=i.split("/"),r=this.ntrseq,s=this.ntrnode;if(s&&o.length>r){for(e=o[r],t=0;t<s.childNodes.length;t++)if((n=s.childNodes[t]).data.name==e){o.length>r+1&&0==n.isLeaf()?(this.ntrnode=n,this.ntrseq++,n.expand(!1,this.navigateTreeOpen,this),n.get("nodepath")==i&&a.getSelectionModel().select(n)):(this.ntrnode=null,this.ntrseq=0,a.getSelectionModel().select(n),a.store.__cb=null);break}}else a.store.__cb=null},rload_content:function(e,t){var n,a,i,o,r,s,c,l=this,d=l.down("[name="+("tree"==l.vmode?"mg_t":"mg")+"]"),m=e.children||[],p=[],u=l.toolbarbuttons.items,_=l.toolbarbuttons.c_menu;for(l.mtree.cacheSet=l.mtree.cacheSet||{},s=l.mtree.cacheSet,e.length?(l.openItem=null,m=e):(l.openItem=e,l.openItem.name,o=l.openItem.nodepath,r=l.openItem.uid,n=l.openItem.type.toLowerCase()),a=0;a<_.length;a++)c=l.isVisibleCreate(_[a],n,l.openItem?l.openItem.subcube:null),_[a].obj.setVisible(c);for(a=0;a<u.length;a++)c=l.isVisibleItem(u[a],t,n,o),u[a].obj.setVisible(c);for(l._update_toolbar(l.openItem),l.setBreadCrumb(o,r),a=0;a<m.length;a++)(i=m[a]).ltype=i.type.toLowerCase(),i.iconcls=IG$.get_metatype_icon(i.ltype,i),p.push(i);IG$.sortMeta(p),l.openItem&&(s[l.openItem.uid]={datas:p,item:l.openItem}),d.store.loadData(p)},setBreadCrumb:function(e,t){var n,a,i,o,r,s=this,c=s.down("[name=bc]"),l=$(c.body.dom),d=[];if(l.empty(),s.bcuid=t,s._breadcrumbitems=[],e){for(n=e.split("/"),i=1;i<n.length;i++){for(a={name:n[i],cpath:""},o=1;o<i+1;o++)a.cpath+="/"+n[o];d.push(a)}r=$("<ul class='ig-navi-breadcrumb'></ul>").appendTo(l),$.each(d,(function(e,t){var n,a=e<d.length-1;"SYS_Config"!=t.name&&(s._breadcrumbitems.length&&$("<li class='ig-navi-breadcrumb-sep'>&gt;</li>").appendTo(r),(n=$("<li class='"+(a?"qlink":"")+"'>"+t.name+"</li>").appendTo(r)).appendTo(r),s._breadcrumbitems.push(t),a&&n.bind("click",(function(){s.load_content(0,t.cpath)})))}))}},_update_toolbar:function(e){var t,n,a,i,o=this,r=o.toolbarbuttons,s=r?r.items:null,c=r?r.c_menu:null;if(r&&e){for(e.name,a=e.type.toLowerCase(),i=e.nodepath,t=0;t<c.length;t++)n=o.isVisibleCreate(c[t],a,e?e.subcube:null),c[t].obj.setVisible(n);for(t=0;t<s.length;t++)n=o.isVisibleItem(s[t],0,a,i),s[t].obj.setVisible(n)}},updateGridContent:function(e){var t=this,n=t.down("[name=mg]"),a=e?e.get("nodepath"):null,i=e?e.get("uid"):null,o=new IG$._rpc$;t.ltype=0,(t.openItem=e?e.data:null)&&(t.openItem.name,t.openItem.type.toLowerCase()),t._update_toolbar(t.openItem),t.setBreadCrumb(a,i),!i&&e.isRoot()&&(i="/"),i?(o.init(t,{ack:"content",payload:{uid:i},mbody:{subfolder:"T"}},t,(function(e){var a,i,o,r,s=e?e.children:null,c=[],l=t._visibleItems;!l&&t.visibleItems&&t.visibleItems.split(";");if(s)for(a=0;a<s.length;a++)(i=s[a]).text=i.name,i.address=i.uid,o=i.type.toLowerCase(),i.memo?i.memo.toLowerCase():null,(r=!l||l&&l[o]?0:1)&&t.cubebrowse&&i.is_sub&&("metric"==o||"datemetric"==o)&&(r=!1),!r&&t.hiddenItems&&t.hiddenItems[o]&&(r=!0),r||(1==IG$.testVal("metrics|table|inlineview|folder|rfolder|datemetric|javapackage|dataset|userdb",o)?(IG$.testVal("table|inlineview",o)&&t._fitem&&!t._fitem[i.uid]&&(i.disabled=!0),i.leaf=!1):(i.leaf=!0,i.allowDrag=!0),i.leaf&&i.is_sub&&"metric"==o&&(i.leaf=!1),i.iconcls=IG$.get_metatype_icon(o,i),c.push(i));IG$.sortMeta(c),n.store.loadData(c)})),o.send()):n.store.loadData([])},refreshCurrent:function(e){var t,n=this,a=e||n.bcuid;n.mtree.cacheSet=n.mtree.cacheSet||{},t=n.mtree.cacheSet,a&&t[a]&&delete t[a],n.load_content(n.ltype,a)},prepareCustomMenu:IG$.prepareCustomMenu,_createMetaObject:IG$._createMetaObject,r_createMetaObject:IG$.r_createMetaObject,_renameMetaObject:IG$._renameMetaObject,r_renameMetaObject:IG$.r_renameMetaObject,editMeta:IG$.editMeta,pasteMetaObject:IG$.pasteMetaObject,rpasteMetaObject:IG$.rpasteMetaObject,refreshNode:function(e){this.refreshCurrent(e.get("uid"))},doSearch:function(e,t){var n,a=this,i=a.down("[name=kword]"),o=a.down("[name=pl2]"),r=a.down("[name=b_csch]"),s=i.getValue(),c=(new IG$._rpc$,a.searchOption);t&&(e=c.keyword),e&&(i.setValue(e),s=e),i.clearInvalid(),"tree"==a.vmode&&(o.getLayout().setActiveItem(e||t?1:0),r.setVisible(e)),s||1==c.fltsetdate?(n={option:"search",name:s},c.fltsetdate&&(n.fromdate=c.fltfromdate,n.todate=c.flttodate),c.typelist&&c.typelist.length>0&&(n.typelist=c.typelist.join(";")),a.load_content(6,null,n)):i.markInvalid("Required!")},showSearchOption:function(){var e,t=this,n=t.down("[name=kword]");t.searchOption.keyword=n.getValue(),e=new IG$.explorerSearch({instance:t.instance,searchOption:t.searchOption,callback:new IG$.callBackObj(this,(function(){this.doSearch(null,!0)}))}),IG$.checkLogin(this,e)},exportMeta:function(e){this.mtree.exportMeta(e)},editMeta:function(e){},_close_detail:function(){var e=this.down("[name=pnl_detail]");this._pnl_detail=0,e.hide()},_update_detail:function(){var e=this,t=e._grid_sel,n=e.down("[name=grd_rev_hist]");e.down("[name=d_name]").clearInvalid(),$.each(["name","description","nodepath","owner","modifier","updatedatefm"],(function(n,a){var i=e.down("[name=d_"+a+"]");t?i.setValue(t.get(a)):i.setValue("")})),t?(e.loadRelation(t.get("uid"),"grd_rel_sub"),e.loadRevision(t.get("uid"),t.get("revision"),n)):(e.down("[name=grd_rel_sub]").store.loadData([]),n.store.loadData([]))},_save_detail_item:function(){var e=this,t=e._grid_sel;if(t){var n=new IG$._rpc$,a=e.down("[name=d_name]"),i=e.down("[name=d_description]");if(a.clearInvalid(),!a.getValue())return void a.markInvalid("Required!");n.init(e,{ack:"writecontent",payload:{uid:t.get("uid"),name:a.getValue(),description:i.getValue()},mbody:{option:"rename"}},e,(function(n){t.set("name",a.getValue()),t.set("description",i.getValue()),t.set("locale_name",a.getValue()),IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,e,0,"success")}),!1),n.send()}},loadRelation:function(e,t){var n=this,a=new IG$._rpc$,i=n.down("[name=cb_rel_isdown]").getGroupValue();a.init(n,{ack:"helpcontent",payload:{uid:e||n.uid},mbody:{option:"relations",isdown:i,detail:"info"}},n,(function(n){var a,i,o=this.down("[name="+(t||"grd_rel")+"]"),r=n&&n.children?n.children:[],s=this.down("[name=txtrel]"),c=[];for(e||s.setValue("Relations : "+n.name+"("+n.nodepath+")"),a=0;a<r.length;a++)(i=r[a]).iconcls=IG$.get_metatype_icon(i.type.toLowerCase(),i),c.push(i);o.store.loadData(c)}),!1),a.send()},loadRevision:function(e,t,n){var a=new IG$._rpc$;a.init(this,{ack:"revision",payload:{uid:e},mbody:{option:"get"}},this,(function(a){var i,o,r=a.revisions,s=[];if(r)for(o=0;o<r.length;o++)(i=r[o]).uid=e,i.iscurrent=t==i.revision?"YES":"",s.push(i);n.store.loadData(s)}),!1),a.send()},initComponent:function(){var e,t=this,n=t.instance,a=t.vmode;t.mainPanel=n.mainPanel,t.customMenu=new $s.menu({instance:n,items:[]}),e=new IG$.n$navTreeCom({instance:n,_meta_move:t._meta_move,gridupdate:"tree"==a?null:new IG$.callBackObj(t,t.updateGridContent),request_override:t.request_override,nav_options:t.nav_options,custom_click_func:t.custom_click_func||new IG$.callBackObj(t,(function(e,t){var a=e.get("uid"),i=e.get("type").toLowerCase(),o="root"==i||IG$.isFolder(i)<5,r=ig$.c_menus;if("c_menu"==i){var s=r&&r.menuitems?r.menuitems[a]:null;s&&s.handler&&s.handler.call(window,s)}else this.custom_click_func?this.custom_click_func.execute(e):0==o?n.mainPanel.navigateApp(a,i,e.get("locale_name")||e.get("name"),e.get("nodepath"),!0,e.get("writable")):e.isExpanded()||e.expand()})),custom_expand_func:t.custom_expand_func||new IG$.callBackObj(t,t.custom_expand_func),show_tree_items:t.show_tree_items}),t.mtree=e,ig$.uiconfig=ig$.uiconfig||{},ig$.uiconfig.navigator=ig$.uiconfig.navigator||{},t.items=[{xtype:"panel",region:"tree"==a?"center":"west",layout:"border",border:0,width:"tree"==a?null:300,collapsible:!0,split:"tree"!=a,titleCollapse:!1,header:!1,collapseMode:"mini",items:[{xtype:"panel",border:0,hidden:ig$.uiconfig.navigator.list_hidden||"tree"==a||!1,region:ig$.uiconfig.navigator.list_pos||"north",name:"pl1",hidden:!0,height:180,margin:"0 0 0 0",title:"List",cls:"igc-f-dec"},{xtype:"panel",flex:1,border:0,margin:"0 0 0 0",bodyPadding:0,region:"center",title:IRm$.r1("B_FOLDER"),layout:"card",cls:"igc-f-dec",name:"pl2",tools:[{type:"close",name:"b_csch",tooltip:IRm$.r1("B_CLOSE"),hidden:!0,handler:function(e,t,n){this.doSearch()},scope:this},{type:"refresh",tooltip:IRm$.r1("B_REFRESH"),handler:function(e,t,n){this.mtree.refreshTree()},scope:this}],items:[e,{xtype:"grid",flex:1,name:"mg_t",store:{xtype:"store",fields:["selected","uid","nodepath","name","type","description","iconcls","updatedate","owner","modifier","updatedatefm","writable","manage"]},tbar:{xtype:"toolbar",items:["->",{text:IRm$.r1("B_ADVANCED"),handler:function(){this.showSearchOption()},scope:this},{iconCls:"icon-toolbar-close",handler:function(){this.down("[name=pl2]").setActiveItem(0)},scope:this}]},viewConfig:{plugins:[{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_",enableDrop:!1,enableDrag:!0}]},columns:[{xtype:"templatecolumn",text:IRm$.r1("B_NAME"),menuDisabled:!0,flex:1,minWidth:100,tdCls:"ig-navi-namecol",renderer:function(e,t,n){var a=n.get("locale_name")||n.get("name");return n.get("locale_name")&&(a+="("+n.get("locale_name")+")"),a+="\n==>"+(n.get("nodepath")||""),"<div class='ig-navi-itemicon "+(n.get("iconcls")||"")+"'></div><span title='"+IG$.hEE(a)+"'>"+IG$.hEE(n.get("locale_name")||n.get("name"))+"</span>"}},{xtype:"gridcolumn",text:IRm$.r1("B_LOC"),minWidth:200,menuDisabled:!0,flex:1,dataIndex:"nodepath"}],listeners:{cellclick:function(e,t,a,i,o,r){var s=this,c=s.down("[name=pl2]"),l=(s.toolbarbuttons,i.get("type").toLowerCase()),d=IG$.isFolder(l),m=i.get("uid"),p=(i.get("type"),s.down("[name=b_csch]"));1==a||0==a&&d<5?(c.getLayout().setActiveItem(0),p.hide(),s.navigateTree({nodepath:i.get("nodepath")})):d>4&&IG$.navigateMenu(n,m)},beforeitemcontextmenu:function(e,t,n,a,i){i.stopEvent();i.pageX,i.pageY;var o=i.getTarget();return 1==this.prepareCustomMenu(t)&&4!=this.ltype&&this.customMenu.showBy(o),!1},scope:this}}]}]},{xtype:"panel",region:"tree"==a?"east":"center",hidden:"tree"==a,flex:1,border:"tree"==a?0:1,layout:"border",items:[{xtype:"panel",border:0,region:"center",flex:1,layout:"border",items:[{xtype:"container",region:"north",layout:{type:"hbox",align:"stretch"},height:32,items:[{xtype:"container",name:"bc",flex:1},{xtype:"textfield",name:"kword",fieldLabel:IRm$.r1("L_BTN_SEARCH"),labelPosition:"right",enableKeyEvents:!0,emptyText:IRm$.r1("L_SEARCH_KWD"),width:300,labelWidth:60,listeners:{keyup:function(e,t,n){13==t.keyCode&&this.doSearch()},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){this.showSearchOption()},scope:this},{xtype:"button",text:IRm$.r1("B_GO"),handler:function(){this.doSearch()},scope:this}]},{xtype:"gridpanel",flex:1,region:"center",name:"mg",store:{xtype:"store",fields:["selected","uid","nodepath","name","type","description","iconcls","updatedate","owner","modifier","updatedatefm","writable","manage"]},viewConfig:{plugins:[{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_",enableDrop:!1,enableDrag:!0}]},selType:"checkboxmodel",selModel:{mode:"MULTI"},tbar:[{xtype:"toolbar",defaults:{xtype:"button",scope:this},items:[{xtype:"button",text:IRm$.r1("B_CR"),ltype:"0;1;2;3;5;",ctype:"folder;cube;sqlcube;datacube;javapackage;",sroot:!0,name:"btn_create",menu:{xtype:"menu",defaults:{scope:this,sroot:!1},items:[{text:IRm$.r1("B_WORKSPACE"),name:"c_workspace",fcls:"ig_n_cw",sroot:!0,ltype:";",mtype:"nvl",handler:function(){this.processMenu("cmd_c_workspace")},scope:this},{text:IRm$.r1("B_FOLDER"),name:"c_folder",fcls:"ig_n_f_f",ltype:"folder;cube;sqlcube;datacube;javapackage;",handler:function(){this.processMenu("cmd_c_folder")},scope:this},{text:IRm$.r1("L_REPORT"),name:"c_report",fcls:"ig_n_rpt",ltype:"folder;",mtype:"nvl",handler:function(){this.processMenu("cmd_c_reports")},scope:this},{text:IRm$.r1("L_SQL_REPORT"),name:"c_sql_report",fcls:"ig_n_sqlrpt",ltype:"folder;",mtype:"nvl",handler:function(){this.processMenu("cmd_c_sql_reports")},scope:this},{text:IRm$.r1("L_DASHBOARD"),name:"c_dashboard",fcls:"ig_n_dbd",ltype:"folder;",mtype:"nvl",handler:function(){this.processMenu("cmd_c_dbd")},scope:this},{text:IRm$.r1("L_B_ADC"),name:"c_dcube",fcls:"ig_n_c_lc",ltype:"folder;",mtype:"nvl",handler:function(){this.processMenu("cmd_c_upload")},scope:this},{text:IRm$.r1("L_B_CM"),name:"c_metrics",fcls:"ig_n_cm",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this.processMenu("cmd_c_metrics","CustomMetric")},scope:this},{text:IRm$.r1("D_MEASURE"),name:"c_measure",fcls:"ig_n_ms",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this.processMenu("cmd_c_metrics","Measure")},scope:this},{text:IRm$.r1("D_FORMULA"),name:"c_fmr",fcls:"ig_n_fm",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this.processMenu("cmd_c_metrics","FormulaMeasure")},scope:this},{text:IRm$.r1("D_DATEMETRIC"),name:"c_dmetric",fcls:"ig_n_dm",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this.processMenu("cmd_c_metrics","DateMetric")},scope:this},{text:IRm$.r1("D_CHARTMEASURE"),name:"c_cmeasure",fcls:"ig_n_cms",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this.processMenu("cmd_c_metrics","ChartMeasure")},scope:this},{text:IRm$.r1("D_UDG"),name:"c_udg",fcls:"ig_n_udg",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this.processMenu("cmd_c_metrics","UDG")},scope:this},{text:IRm$.r1("L_B_BW"),name:"c_workflow",fcls:"ig_n_hb",ltype:"folder;",mtype:"nvl",handler:function(){this.processMenu("cmd_c_workflow")},scope:this},{text:IRm$.r1("L_B_JV"),name:"c_javaclass",fcls:"ig_n_jc",ltype:"folder;javapackage;",mtype:"nvl",handler:function(){this.processMenu("cmd_c_java")},scope:this}]}},{text:IRm$.r1("L_REFRESH"),ltype:"0;1;2;3;5;",sroot:!0,name:"btn_refresh",handler:function(){this.refreshCurrent()},scope:this},"-",{text:IRm$.r1("L_B_U"),ltype:"0;1;2;3;5;",sroot:!1,name:"btn_up",handler:function(){this.processMenu("cmd_up")},scope:this},{text:IRm$.r1("L_B_MVT"),sroot:!1,ltype:"0;1;2;3;5;6;",name:"btn_moveto",fcls:"ig_n_mv",handler:function(){this.processMenu("cmd_moveto")},scope:this},{text:IRm$.r1("L_REMOVE"),sroot:!0,ltype:"0;1;2;3;5;6;",name:"btn_remove",fcls:"ig_n_del",handler:function(){this.processMenu("cmd_remove")},scope:this},{name:"btn_recover",ltype:"4;",sroot:!1,text:IRm$.r1("L_RECOVER"),handler:function(){this.processMenu("cmd_recover")},scope:this},{name:"btn_open",ltype:"0;1;2;3;5;6;",ctype:"cube;sqlcube;datacube;nosql;mcube;mdbcube",sroot:!1,text:IRm$.r1("L_E_CB"),handler:function(){this.processMenu("cmd_open")},scope:this},{name:"btn_edit",ltype:";",sroot:!1,text:IRm$.r1("L_E_IT"),handler:function(){this.processMenu("cmd_edit")},scope:this},{name:"btn_delete",ltype:"4;",sroot:!1,fcls:"ig_n_del",text:IRm$.r1("L_E_DEL"),handler:function(){this.processMenu("cmd_delete")},scope:this},"->",{text:IRm$.r1("L_SHOW_DETAIL"),sroot:!1,handler:function(){this.processMenu("cmd_detail")},scope:this}]}],columns:[{xtype:"templatecolumn",text:IRm$.r1("B_NAME"),menuDisabled:!0,flex:1,minWidth:160,tdCls:"ig-navi-namecol",renderer:function(e,t,n){var a=n.get("locale_name")||n.get("name"),i=n.get("type")?n.get("type").toLowerCase():"";return["<div class='ig-navi-itemicon-p'>","<div class='ig-navi-itemicon "+(n.get("iconcls")||"")+"'></div>","</div>","<span class='ig-navi-text'"+("report"==i||"dashboard"==i?" amp-bind='"+i+":"+n.get("uid")+"'":"")+">"+a+"</span>"].join("")}},{xtype:"gridcolumn",text:IRm$.r1("B_DESC"),minWidth:120,menuDisabled:!0,flex:1,dataIndex:"description"},{xtype:"gridcolumn",text:IRm$.r1("B_LOC"),minWidth:200,menuDisabled:!0,flex:1,dataIndex:"nodepath"},{xtype:"gridcolumn",text:IRm$.r1("B_LASTUPD"),menuDisabled:!0,width:130,dataIndex:"updatedatefm"},{xtype:"gridcolumn",text:IRm$.r1("B_OWNER"),menuDisabled:!0,width:80,dataIndex:"owner"},{xtype:"gridcolumn",text:IRm$.r1("B_MODI"),menuDisabled:!0,width:80,dataIndex:"modifier"}],listeners:{afterrender:function(e){var t=e;t.body&&t.body.dom&&$(t.body.dom).mousemove((function(e){var t=e.target;if(t.getAttribute&&t.getAttribute("amp-bind")){var n=t.getAttribute("amp-bind");IG$._scrshot(t,n,!0)}else IG$._scrshot(t,null,!1)})).mouseleave((function(e){var t=e.target;IG$._scrshot(t,null,!1,!0)}))},cellclick:function(e,t,a,i,o,r){var s,c=this,l=c.toolbarbuttons,d=!1,m=!1,p=i.get("type").toLowerCase(),u=IG$.isFolder(p),_=i.get("uid");i.get("type");return m=!(!c.openItem||!IG$.testVal("cube|datacube|sqlcube|nosql|mcube|mdbcube",c.openItem.type.toLowerCase())),c._grid_sel=i,c._pnl_detail&&c._update_detail(),0==a?s:4!=c.ltype?(1==a?(s=!1,u<5?this.load_content(0,_):IG$.navigateMenu(n,_)):u>4?d=!0:2==u&&(m=!0),l.btn_edit.obj.setVisible(d),l.btn_open.obj.setVisible(m),s):void 0},beforeitemcontextmenu:function(e,t,n,a,i){i.stopEvent();i.pageX,i.pageY;var o=i.getTarget();return 1==this.prepareCustomMenu(t)&&4!=this.ltype&&this.customMenu.showBy(o),!1},selectionchange:function(e,t){if(t&&t.length){var n=t.items[t.length-1],a=this,i=a.down("[name=mg]"),o=a.toolbarbuttons,r=!1,s=!1,c=n.get("type").toLowerCase(),l=IG$.isFolder(c);n.get("uid"),n.get("type"),i.getView();if(s=!(!a.openItem||!IG$.testVal("cube|datacube|sqlcube|nosql|mcube|mdbcube",a.openItem.type.toLowerCase())),4==a.ltype)return;l>4?r=!0:2==l&&(s=!0),o.btn_edit.obj.setVisible(r),o.btn_open.obj.setVisible(s)}},scope:this}},{xtype:"panel",border:0,width:280,title:IRm$.r1("B_DETAIL"),region:"east",hidden:!0,name:"pnl_detail",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},defaults:{labelPosition:"top"},autoScroll:!0,items:[{xtype:"textfield",fieldLabel:IRm$.r1("B_NAME"),name:"d_name"},{xtype:"textarea",fieldLabel:IRm$.r1("B_DESC"),name:"d_description",height:80},{xtype:"textfield",fieldLabel:IRm$.r1("B_LOC"),name:"d_nodepath",readOnly:!0},{xtype:"textfield",fieldLabel:IRm$.r1("B_OWNER"),readOnly:!0,name:"d_owner"},{xtype:"textfield",fieldLabel:IRm$.r1("B_MODI"),readOnly:!0,name:"d_modifier"},{xtype:"textfield",fieldLabel:IRm$.r1("B_LASTUPD"),readOnly:!0,name:"d_updatedatefm"},{xtype:"container",height:30},{xtype:"container",layout:{type:"hbox",align:"stretuch"},items:[{xtype:"container",flex:1},{xtype:"button",text:IRm$.r1("B_SAVE"),handler:function(){t._save_detail_item()},scope:this},{xtype:"button",text:IRm$.r1("B_CLOSE"),handler:function(){t._close_detail()},scope:this}]},{xtype:"container",height:30},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_REVISION")},{xtype:"container",flex:1}]},{xtype:"gridpanel",height:300,name:"grd_rev_hist",store:{fields:[]},columns:[{text:IRm$.r1("L_REVISION"),dataIndex:"revision",width:60},{text:IRm$.r1("B_LASTUPD"),dataIndex:"updatedatefm",width:150},{text:IRm$.r1("B_MODI"),dataIndex:"username",width:120},{text:IRm$.r1("L_CURRENT"),dataIndex:"iscurrent",width:80}]},{xtype:"container",height:30},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",name:"txtrel",value:"Relation"},{xtype:"container",flex:1}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"radiogroup",name:"rel_isdown",plain:!0,items:[{boxLabel:IRm$.r1("L_IS_DOWN"),name:"cb_rel_isdown",inputValue:"T",checked:!0},{boxLabel:IRm$.r1("L_IS_UP"),name:"cb_rel_isdown",inputValue:"F"}],listeners:{change:function(){var e=this._grid_sel;e&&this.loadRelation(e.get("uid"),"grd_rel_sub")},scope:this}}]},{xtype:"gridpanel",height:300,store:{fields:[]},name:"grd_rel_sub",columns:[{xtype:"templatecolumn",text:IRm$.r1("B_NAME"),menuDisabled:!0,flex:1,minWidth:160,tdCls:"ig-navi-namecol",renderer:function(e,t,n){return["<div class='ig-navi-itemicon "+(n.get("iconcls")||"")+"'></div>","<span title='"+n.get("name")+"("+n.get("type")+")'>"+n.get("name")+"</span>"].join("")}},{text:IRm$.r1("L_LOCATION"),flex:1,minWidth:200,dataIndex:"nodepath"}]}]}]}]}],IG$.explorer.superclass.initComponent.call(this)},listeners:{afterrender:function(e){this.rendered=!0,e.initData()}}});
IG$.folderManager=$s.extend($s.gridpanel,{loadRoot:function(e){var t,n,a=this;a.root=e,a.mpath=[a.root],n=a.root,(t=new IG$._rpc$).init(a,{ack:"content",payload:{uid:n.uid,nodepath:n.nodepath,name:n.name,type:n.type},mbody:{}},a,a.rs_loadRoot,null),t.send()},topWS:function(){this.loadRoot({uid:"/",nodepath:"/",name:"Workspace",type:"Folder"})},naviFolder:function(e){var t,n=this,a=e.get("type").toLowerCase();IG$.testVal("folder|cube|parent|table",a)&&(meta={uid:e.get("uid"),type:e.get("type"),nodepath:e.get("nodepath"),name:e.get("oname")||e.get("name"),manage:e.get("manage"),writable:e.get("writable")},".."==e.get("name")&&(delete meta.type,delete meta.name,delete meta.nodepath,null==meta.uid&&(meta.uid="/")),(t=new IG$._rpc$).init(n,{ack:"content",payload:{uid:meta.uid,nodepath:meta.nodepath,name:meta.name,type:meta.type},mbody:{subfolder:"T"}},n,n.rs_loadRoot,null),t.send())},rs_loadRoot:function(e){var t,n,a=e,o=e.children||[],i=[],r={},d=a.nodepath.split("/");if(this.cpath={uid:a.uid,name:a.name,nodepath:a.nodepath,type:a.type,writable:a.writable,manage:a.manage},d.length>1&&d[1]&&(r.oname=a.name,r.name="..",r.uid=a.uid==a.pid?null:a.pid,r.type="parent",i.push(r)),o){for(t=0;t<o.length;t++)(n=o[t]).iconcls=IG$.get_metatype_icon(n.type.toLowerCase(),n),i.push(n);IG$.sortMeta(i)}this.store.loadData(i)},refresh:function(){var e,t=this,n=t.cpath;(e=new IG$._rpc$).init(t,{ack:"content",payload:{uid:n.uid,nodepath:n.nodepath,name:n.name,type:n.type},mbody:{}},t,t.rs_loadRoot,null),e.send()},_createMetaObject:function(e,t,n,a){var o=new IG$.makeItem({instance:this.instance,parentnodepath:n,itemtype:e,parentuid:t});o.callback=new IG$.callBackObj(this,this.r_createMetaObject,a),IG$.checkLogin(this,o)},r_createMetaObject:function(e){this.refresh()},_renameMetaObject:function(e,t,n,a){var o=this,i=new IG$.makeItemEditor({instance:o.instance,itemname:e,uid:t,nodepath:n,itemtype:a,callback:new IG$.callBackObj(o,o.r_renameMetaObject,null)});IG$.checkLogin(o,i)},r_renameMetaObject:function(e){this.refresh()},toolbarHandler:function(e){var t=this;switch(e){case"cmd_new_folder":t._createMetaObject("Folder",t.cpath.uid,t.cpath.nodepath,null);break;case"cmd_refresh":t.refresh();break;case"cmd_gotop":t.loadRoot(t.root);break;case"cmd_top_ws":t.topWS();break;case"cmd_delete":t.deleteMetaObject();break;case"cmd_rename":var n,a=t.getSelectionModel();a.selected.items.length>0&&".."!=(n=a.selected.items[0]).get("name")&&(n.get("writable")||n.get("manage"))&&t._renameMetaObject(n.get("name"),n.get("uid"),n.get("nodepath"),n.get("type"))}},deleteMetaObject:function(){var e,t,n=this,a=[],o=0;if((t=n.getChecked()).length>0){for(e=0;e<t.length;e++)if(".."!=t[e].name&&(t[e].manage||t[e].writable))a.push({uid:t[e].uid,option:"delete"}),o++;else if(".."!=t[e].name){o=0,IG$.ShowError(IRm$.r1("E_PRIV_ERR")+t[e].name,n);break}o>0&&(req=new IG$._rpc$,req.init(n,{ack:"batchcontent",payload:a,mbody:{option:"delete"}},n,n.rdeleteMetaObject,null),req.send())}},rdeleteMetaObject:function(e){this.refresh()},getChecked:function(){var e,t,n=this,a=[];for(e=0;e<n.store.data.items.length;e++)n.store.data.items[e].get("selected")&&(t=n.store.data.items[e],a.push({uid:t.get("uid"),type:t.get("type"),nodepath:t.get("nodepath"),name:t.get("name"),manage:t.get("manage"),writable:t.get("writable")}));return a},initComponent:function(){var e=this;$s.apply(this,{name:"grd",store:{xtype:"store",fields:["uid","name","oname","nodepath","type","writable","manage","updatedate","updatedatafm","selected","iconcls"]},selType:"checkboxmodel",selModel:{mode:"MULTI",checkSelector:"cell"},columns:[{xtype:"templatecolumn",text:"",dataIndex:"iconcls",width:28,renderer:function(e){return"<div class='igc_g_icon "+e+"'></div>"}},{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1,tdCls:"igc-td-link",minWidth:200},{text:IRm$.r1("B_TYPE"),dataIndex:"type",width:60},{text:IRm$.r1("L_LAST_UPD"),dataIndex:"updatedatefm",width:140}],dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"textfield",flex:1,name:"_filter",emptyText:IRm$.r1("L_SEARCH_KWD"),enableKeyEvents:!0,listeners:{keyup:function(e,t,n){13==t.keyCode&&IG$._dofilter(this,"grd",["name"])},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){IG$._dofilter(this,"grd",["name"])},scope:this}]},{xtype:"toolbar",dock:"top",items:[{xtype:"splitbutton",text:IRm$.r1("B_NEW"),menu:[{text:IRm$.r1("B_FOLDER"),handler:function(){this.toolbarHandler("cmd_new_folder")},scope:this}]},{text:IRm$.r1("L_RENAME"),handler:function(){this.toolbarHandler("cmd_rename")},scope:this},{iconCls:"icon-toolbar-remove",handler:function(){var e=this;IG$.confirmMessages(IRm$.r1("B_CONFIRM"),IRm$.r1("B_CD_CHS"),(function(t){"yes"==t&&e.toolbarHandler("cmd_delete")}))},scope:this},"->",{iconCls:"icon-tb-refresh",handler:function(){this.toolbarHandler("cmd_refresh")},scope:this},{xtype:"button",name:"t_btn",text:IRm$.r1("B_SHORTCUR"),disabled:!0,menu:{xtype:"menu",items:[{text:IRm$.r1("L_GO_TOP"),handler:function(){this.toolbarHandler("cmd_gotop")},scope:this},{text:IRm$.r1("L_WORKSPACE"),handler:function(){this.toolbarHandler("cmd_top_ws")},scope:this}]}}]}],listeners:{cellclick:function(t,n,a,o,i,r){2==a&&e.naviFolder(o)}}}),IG$.folderManager.superclass.initComponent.apply(this,arguments)}}),IG$.dlgFolderMgr=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:950,autoHeight:!0,dbscan:1,_init:function(){var e=this,t=e.grd_l,n=e.grd_r;t.loadRoot(e.root),n.loadRoot(e.root)},moveChecked:function(e,t){var n,a=this.grd_l,o=this.grd_r;if(n=e?a.getChecked():o.getChecked(),a.cpath.uid!=o.cpath.uid){if(n&&n.length>0){var i,r,d=[],l=this,s=0;for(r=0;r<n.length;r++)".."!=n[r].name&&(n[r].writable||n[r].manage)&&(d.push({uid:n[r].uid}),s++);s>0&&((i=new IG$._rpc$).init(l,{ack:"helpcontent",payload:d,mbody:{option:1==t?"copy":"move",target:e?o.cpath.uid:a.cpath.uid}},l,l.r_moveSelItems,null,null),i.send())}}else IG$.alertmsg(ig$.appname,IRm$.r1("E_DUP_FOLDER"),null,null,1,"error")},r_moveSelItems:function(e){var t=this,n=t.grd_l,a=t.grd_r;IG$.alertmsg(ig$.appname,IRm$.r1("M_SUCCESS"),null,t,0,"success"),n.refresh(),a.refresh()},initComponent:function(){var e=this;e.title=IRm$.r1("T_MGR_FOLDER"),e.grd_l=new IG$.folderManager({instance:e.instance,name:"grd_l",height:500,flex:1}),e.grd_r=new IG$.folderManager({instance:e.instance,name:"grd_r",height:500,flex:1});$s.apply(this,{layout:"fit",items:[{xtype:"panel",layout:{type:"hbox",align:"stretch"},border:0,padding:ig$.padding,items:[e.grd_l,{width:60,layout:{type:"vbox",align:"stretch",pack:"center"},items:[{xtype:"container",flex:1},{xtype:"displayfield",value:"Move"},{xtype:"button",text:">>",$w:60,tooltip:"Move items",handler:function(){this.moveChecked(!0,!1)},scope:this},{xtype:"button",text:"<<",$w:60,tooltip:"Move items",handler:function(){this.moveChecked(!1,!1)},scope:this},{xtype:"container",height:10},{xtype:"displayfield",value:"Copy"},{xtype:"button",text:">",$w:60,tooltip:"Copy items",handler:function(){this.moveChecked(!0,!0)},scope:this},{xtype:"button",text:"<",$w:60,tooltip:"Copy items",handler:function(){this.moveChecked(!1,!0)},scope:this},{xtype:"container",flex:1}]},e.grd_r]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.dlgFolderMgr.superclass.initComponent.apply(this,arguments)}});
IG$.chartSeries=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:340,autoHeight:!0,_init:function(){var e=this,a=e.down("[name=seriestype]"),l=e.down("[name=dl_marker]"),t=e.down("[name=dl_marker_type]"),n=e.down("[name=dl_marker_size]"),i=e.down("[name=dl_enable]"),o=e.down("[name=dl_linewidth]"),m=e.down("[name=dl_linetype]"),d=e.down("[name=dl_position]"),r=e.cell_record;a.setValue(r.get("seriestype")),l.setValue(r.get("dl_marker")),t.setValue(r.get("dl_marker_type")),n.setValue(r.get("dl_marker_size")),i.setValue(r.get("dl_enable")),o.setValue(r.get("dl_linewidth")||1),m.setValue(r.get("dl_linetype")||""),d.setValue(r.get("dl_position")),e.down("[name=dl_c_range]").setAllValues(r.get("dl_c_range")||{},!0)},_confirm:function(){var e=this;e.seriestype=e.down("[name=seriestype]").getValue(),e.dl_marker=e.down("[name=dl_marker]").getValue(),e.dl_marker_type=e.down("[name=dl_marker_type]").getValue(),e.dl_marker_size=e.down("[name=dl_marker_size]").getValue(),e.dl_enable=e.down("[name=dl_enable]").getValue(),e.dl_linetype=e.down("[name=dl_linetype]").getValue(),e.dl_linewidth=""+e.down("[name=dl_linewidth]").getValue(),e.dl_position=e.down("[name=dl_position]").getValue(),e.dl_c_range={},e.down("[name=dl_c_range]").getAllValues(e.dl_c_range,!0),e.callback&&e.callback.execute(e),e.close()},initComponent:function(){var e=this;$s.apply(this,{title:IRm$.r1("T_CHART_SERIES"),items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:ig$.padding,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_SERIES"),defaultType:"textfield",items:[{name:"seriestype",xtype:"combobox",fieldLabel:IRm$.r1("L_SERIES_TYPE"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:IRm$.r1("B_DEFAULT"),value:""},{name:IRm$.r1("L_CH_COLUMN"),value:"column"},{name:IRm$.r1("L_CH_LINE"),value:"line"},{name:IRm$.r1("L_CH_SPLINE"),value:"spline"},{name:IRm$.r1("L_CH_AREA"),value:"area"},{name:IRm$.r1("L_CH_BAR"),value:"Bar"},{name:IRm$.r1("L_CH_SPLINE_AREA"),value:"areaspline"},{name:IRm$.r1("L_CH_CUST_XLABEL"),value:"custxlabel"}]}},{name:"dl_linetype",xtype:"combobox",fieldLabel:IRm$.r1("L_LINE_TYPE"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:IRm$.r1("B_DEFAULT"),value:""},{name:"Solid",value:"solid"},{name:"Dashed",value:"dashed"},{name:"Dotted",value:"dotted"},{name:"Hide",value:"hide"}]}},{name:"dl_linewidth",xtype:"numberfield",fieldLabel:IRm$.r1("L_LINE_WIDTH"),value:1},{name:"dl_marker",xtype:"combobox",fieldLabel:IRm$.r1("L_MARKER"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:IRm$.r1("B_DEFAULT"),value:""},{name:IRm$.r1("B_ENABLED"),value:"T"},{name:IRm$.r1("B_DISABLED"),value:"F"}]}},{name:"dl_marker_type",fieldLabel:IRm$.r1("L_MARKER_TYPE"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("B_DEFAULT"),value:""},{name:IRm$.r1("L_M_CIRCLE"),value:"circle"},{name:IRm$.r1("L_M_RECT"),value:"rect"},{name:IRm$.r1("L_M_ROUND_RECT"),value:"roundRect"},{name:IRm$.r1("L_M_TRIANGLE"),value:"triangle"},{name:IRm$.r1("L_M_DIAMOND"),value:"diamond"},{name:IRm$.r1("L_M_PIN"),value:"pin"},{name:IRm$.r1("L_M_ARROW"),value:"arrow"}]}},{name:"dl_marker_size",fieldLabel:IRm$.r1("L_MARKER_SIZE"),xtype:"numberfield"},{name:"dl_enable",xtype:"combobox",fieldLabel:IRm$.r1("L_DATA_LABEL"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:IRm$.r1("B_DEFAULT"),value:""},{name:IRm$.r1("B_ENABLED"),value:"T"},{name:IRm$.r1("B_DISABLED"),value:"F"}]}},{name:"dl_position",xtype:"combobox",fieldLabel:IRm$.r1("L_POSITION"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("B_DEFAULT"),value:""},{name:IRm$.r1("B_TOP"),value:"top"},{name:IRm$.r1("B_BOTTOM"),value:"bottom"},{name:IRm$.r1("B_INSIDE"),value:"inside"},{name:IRm$.r1("B_INSIDE")+" "+IRm$.r1("B_TOP"),value:"insideTop"},{name:IRm$.r1("B_INSIDE")+" "+IRm$.r1("B_BOTTOM"),value:"insideBottom"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_RANGE"),defaultType:"textfield",name:"dl_c_range",items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_HIDDEN"),boxLabel:IRm$.r1("B_ENABLED"),name:"dl_c_hidden"},{xtype:"textfield",fieldLabel:IRm$.r1("L_MINIMUM"),name:"dl_c_min"},{xtype:"textfield",fieldLabel:IRm$.r1("L_MAXIMUM"),name:"dl_c_max"},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_MIN_COLOR"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"mincolor",width:120},{xtype:"splitter"},{fieldLabel:"..",xtype:"splitbutton",menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,a){this.down("[name=mincolor]").setValue("#"+a)},scope:e}},"-"]}},{xtype:"container",flex:1}]},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_MID_COLOR"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"midcolor",width:120},{xtype:"splitter"},{fieldLabel:"..",xtype:"splitbutton",menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,a){this.down("[name=midcolor]").setValue("#"+a)},scope:e}},"-"]}},{xtype:"container",flex:1}]},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_MAX_COLOR"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"maxcolor",width:120},{xtype:"splitter"},{fieldLabel:"..",xtype:"splitbutton",menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,a){this.down("[name=maxcolor]").setValue("#"+a)},scope:e}},"-"]}},{xtype:"container",flex:1}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){e._init()}}}),IG$.chartSeries.superclass.initComponent.apply(this,arguments)}}),IG$.chartPlotband=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:380,autoHeight:!0,callback:null,_init:function(){var e=this.ditem;e&&this.setAllValues(e._content)},_confirm:function(){var e,a=this,l=a.ditem;l&&(e=a.getAllValues(l._content)),e||(a.callback&&a.callback.execute(a.ditem),a.close())},initComponent:function(){$s.apply(this,{defaults:{padding:ig$.padding},title:IRm$.r1("T_CHART_PLOTBAND"),items:[{xtype:"panel",layout:"anchor",defaults:{anchor:"100%"},padding:ig$.padding,items:[{xtype:"fieldset",title:IRm$.r1("T_CHART_PLOTBAND"),items:[{xtype:"textfield",name:"name",fieldLabel:IRm$.r1("B_NAME")},{name:"type",xtype:"combobox",fieldLabel:IRm$.r1("L_BAND_TYPE"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:"Line",value:"line"},{name:"Band",value:"band"},{name:"CurveFit",value:"curvefit"}]},listeners:{change:function(e){var a=e.getValue(),l=this.down("[name=t_1]"),t=this.down("[name=t_2]");l.setVisible("line"==a||"band"==a),t.setVisible("curvefit"==a)},scope:this}},{xtype:"fieldcontainer",layout:"anchor",name:"t_1",hidden:!0,items:[{xtype:"textfield",name:"value_1",fieldLabel:IRm$.r1("L_BAND_VALUE_1")},{xtype:"textfield",name:"value_2",fieldLabel:IRm$.r1("L_BAND_VALUE_2")},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_BAND_COLOR"),layout:{type:"hbox"},items:[{xtype:"textfield",name:"color",width:120},{xtype:"splitter"},{xtype:"splitbutton",width:30,menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,a){this.down("[name=color]").setValue("#"+a)},scope:this}},"-"]}}]},{xtype:"combobox",name:"cf_lc",fieldLabel:IRm$.r1("L_CFIT_LC"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:"Solid",value:"Solid"},{name:"ShortDash",value:"ShortDash"},{name:"ShortDot",value:"ShortDot"},{name:"ShortDashDot",value:"ShortDashDot"},{name:"ShortDashDotDot",value:"ShortDashDotDot"},{name:"Dot",value:"Dot"},{name:"Dash",value:"Dash"},{name:"LongDash",value:"LongDash"},{name:"DashDot",value:"DashDot"},{name:"LongDashDot",value:"LongDashDot"},{name:"LongDashDotDot",value:"LongDashDotDot"}]}},{xtype:"numberfield",name:"borderwidth",fieldLabel:IRm$.r1("L_BAND_BORDER"),minValue:0,maxValue:10},{xtype:"checkbox",name:"isxaxis",fieldLabel:IRm$.r1("L_ON_X_AXIS"),boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldcontainer",layout:"anchor",name:"t_2",hidden:!0,items:[{name:"rtype",xtype:"combobox",fieldLabel:IRm$.r1("L_CFIT_TYPE"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:"Linear",value:"linear"},{name:"Polynomial",value:"polynomial"},{name:"Exponential",value:"exponential"},{name:"Logarithmic",value:"logarithmic"},{name:"Power",value:"power"}]},listeners:{change:function(e){var a=e.getValue();this.down("[name=order]").setDisabled("polynomial"!=a)},scope:this}},{xtype:"numberfield",name:"order",disabled:!0,fieldLabel:IRm$.r1("L_CFIT_PORD"),minValue:2,maxValue:5},{xtype:"checkbox",name:"showfitexp",fieldLabel:IRm$.r1("L_CFIT_FOR"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"numberfield",name:"cfitfcs",fieldLabel:IRm$.r1("L_CFIT_FCS"),minValue:0,step:.1,value:0},{xtype:"checkbox",name:"cfitallseries",fieldLabel:IRm$.r1("L_CFIT_AS"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",name:"cfitshowsum",fieldLabel:IRm$.r1("L_CFIT_SS"),boxLabel:IRm$.r1("B_ENABLED")}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.chartPlotband.superclass.initComponent.apply(this,arguments)}});
IG$.d$RsWiz=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:320,height:280,_confirm:function(){var e,t=this,a=t.down("[name=gridparams]").getSelectionModel();if(0!=a.selected.items.length){if(e=a.selected.items[0],t.rec){var n=e.get("name");n=IG$.replaceAll(n," ","_"),t.rec.set("value",n)}t.callback&&t.callback.execute(t),t.close()}else IG$.alertmsg(ig$.appname,"Select field name to set as a parameter value.",null,null,0,"error")},_init:function(){var e,t=this.dc,a=this.down("[name=gridparams]"),n=[];if(t)for(e=0;e<t.length;e++)n.push({name:t[e].name,cindex:t[e].cindex,isdata:t[e].isdata});a.store.loadData(n)},items:[{xtype:"gridpanel",name:"gridparams",selType:"rowmodel",store:{sortInfo:{},fields:["name","isdata","cindex"]},columns:[{text:IRm$.r1("L_FIELD_NAME"),flex:1,sortable:!1,dataIndex:"name"},{text:IRm$.r1("L_IS_MEASURE"),flex:1,sortable:!1,dataIndex:"isdata"},{text:IRm$.r1("L_COLUMN_INDEX"),flex:1,sortable:!1,dataIndex:"cindex"}]}],initComponent:function(){$s.apply(this,{title:IRm$.r1("T_R_WIZARD"),buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.d$RsWiz.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(e){this._init()}}}),IG$.r_wizard_u=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:500,height:460,_confirm:function(){var e=this;e.callback&&e.callback.execute(e.m),e.close()},cardNav:function(e){var t=this,a=this.down("[name=mainpanel]"),n=a.getLayout(),r=a.getActiveItem().id.split("card-")[1],i=parseInt(r,10)+e;if("0"==r&&i>0){t.down("[name=rtypeview]");var o,s=t.down("[name=rname]"),l=t.down("[name=rcontent]"),d=t.down("[name=rprompt]");if(1==t.newitem&&!t.ufolder)return;if(0==t.newitem&&(!t.ufolder||t.ufolder&&"RScript"!=t.ufolder.get("type")))return void IG$.alertmsg(ig$.appname,"Select script template to continue.",null,null,0,"error");if(1==t.newitem)s.setValue(""),l.setValue(""),d.setValue(""),s.enable(),o=(o=t.ufolder.get("nodepath")).substring(0,o.lastIndexOf("/")),t.m={uid:null,content:"",manage:"T",name:null,isnew:"T",parentcontentpath:o};else if(t.ufolder){var m=t.ufolder,p=new IG$._rpc$;m.get("manage")?s.enable():s.disable(),t.m={uid:m.get("uid"),manage:m.get("manage"),content:"",name:m.get("name")},p.init(t,{ack:"content",payload:{uid:m.get("uid"),type:m.get("type")},mbody:{}},t,t.rs_loadRsCnt,null),p.send()}}else if("1"==r&&2==i){!0;s=t.down("[name=rname]"),l=t.down("[name=rcontent]"),d=t.down("[name=rprompt]");if(""==s.getValue())return void IG$.alertmsg(ig$.appname,"Please fill template name to continue.",null,null,0,"error")}else if("2"==r&&3==i){!0;var c,u;s=t.down("[name=rname]"),l=t.down("[name=rcontent]"),d=t.down("[name=rprompt]");if(""==s.getValue())return void IG$.alertmsg(ig$.appname,"Please fill template name to continue.",null,null,0,"error");if(1==t.newitem)return t.m.name=s.getValue(),t.m.content=l.getValue(),t.m.prompt=d.getValue(),"RFolder"==t.ufolder.get("type")||"blank"==t.ufolder.get("type")?(u=t.ufolder.get("uid"),c=t.ufolder.get("nodepath")):(u=t.ufolder.get("pid"),c=(c=t.ufolder.get("nodepath")).substring(0,c.lastIndexOf("/"))),(p=new IG$._rpc$).init(t,{ack:"writecontent",payload:{address:c+"/"+s.getValue(),name:s.getValue(),type:"RScript",pid:u,description:""},mbody:{rscript:Base64.encode(l.getValue()),prompt:Base64.encode(d.getValue())}},t,t.rs_saveNewTmpl),void p.send();if("T"!=t.m.isnew&&""!=s.getValue()&&"T"==t.m.manage&&(t.m.content!=l.getValue()||t.m.name!=s.getValue()))return t.m.content=l.getValue(),t.m.prompt=d.getValue(),t.m.name=s.getValue(),void IG$.confirmMessages("R Wizard","Template content is changed and not saved. Would you save this content on the template?",t.doCloseSave,t,t);t.updateParams()}else if("3"==r&&4==i&&0==t.validateParams())return;n.setActiveItem(i),t.down("[name=card-prev]").setDisabled(0===i),t.down("[name=card-next]").setDisabled(4===i),t.down("[name=btnconfirm]").setDisabled(4!==i)},updateParams:function(){for(var e,a,n,r,i=[],o={},s=this.m.content,l=this.down("[name=rparamview]"),d=0;!((e=s.indexOf("@",d))<0||(t=s.indexOf("@",e+1),t<0));)a=s.substring(e+1,t),pobj={param:a,name:a},a.indexOf(":")>-1&&(pobj.name=a.substring(0,a.indexOf(":")),pobj.desc=a.substring(a.indexOf(":")+1)),pobj.name.indexOf("_")>-1&&(r=pobj.name.substring(0,pobj.name.indexOf("_")).toLowerCase(),n=pobj.name.substring(pobj.name.indexOf("_")+1),"column"!=r&&"dimension"!=r||1!=IG$.isNumber(n)||(pobj.p=!0,n=Number(n),"column"!=r||pobj.desc?pobj.desc||(pobj.desc=n+"th column starting from 0"):pobj.desc=n+"th column of starting from numeric")),o[pobj.name]||(o[pobj.name]=pobj,i.push(pobj)),d=t+1;l.store.loadData(i)},validateParams:function(){var e,t,a=!0,n=this,r=[],i=n.m.content,o=n.down("[name=rparamview]").store;for(e=0;e<o.data.items.length;e++)t=o.data.items[e],r.push({param:t.get("param"),name:t.get("name"),value:t.get("value"),p:t.get("p")});for(e=0;e<r.length;e++)if(!0!==r[e].p){if(!r[e].value){IG$.alertmsg(ig$.appname,"Fill or set parameter ["+r[e].name+"] value to continue.",null,null,0,"error"),a=!1;break}i=IG$.replaceAll(i,"@"+r[e].param+"@",r[e].value)}return n.m.vcontent=i,a},doCloseSave:function(e){var t,a=this,n=this.down("[name=mainpanel]").getLayout();"yes"==e&&((t=new IG$._rpc$).init(a,{ack:"writecontent",payload:{name:a.m.name,type:"RScript",uid:a.m.uid},mbody:"<smsg><item><Content><rscript><![CDATA["+Base64.encode(a.m.content)+"]]></rscript><prompt><![CDATA["+Base64.encode(a.m.prompt)+"]]></prompt></Content></item></smsg>"},a,a.rs_saveNewTmpl),t.send()),a.updateParams(),n.setActiveItem(2)},rs_saveNewTmpl:function(e){var t=this,a=IG$.XGetNode(e,"/smsg/item");a&&(t.m.uid=IG$.XGetAttr(a,"uid"),t.m.name=IG$.XGetAttr(a,"name"),t.newitem=!1),t.loadRsList()},rs_loadRsCnt:function(e){var t,a,n,r=this,i=r.down("[name=rname]"),o=r.down("[name=rcontent]"),s=r.down("[name=rprompt]"),l=IG$.XGetNode(e,"/smsg/item");l&&(r.m.name=IG$.XGetAttr(l,"name"),r.m.content="",r.m.prompt="",i.setValue(r.m.name),(t=IG$.XGetNode(l,"Content"))&&((n=IG$.XGetNode(t,"rscript"))&&(a=IG$.XGetTextVal(n),a=Base64.decode(a),r.m.content=a),(n=IG$.XGetNode(t,"prompt"))&&(a=IG$.XGetTextVal(n),a=Base64.decode(a),r.m.prompt=a)),o.setValue(r.m.content),s.setValue(r.m.prompt))},_init:function(){this.loadRsList()},loadRsList:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"content",payload:{uid:"/RScripts",type:"RFolder",depth:"5"},mbody:{}},e,e.rs_loadRsList,null),t.send()},rs_loadRsList:function(e){var t=this.down("[name=rtypeview]"),a=[];e&&this.parseRscr(e,a),t.store.loadData(a)},toolbarHandler:function(e){var t,a=this;switch(e){case"cmd_add_group":(t=new IG$.makeItem({parentnodepath:"/RScripts",itemtype:"RFolder",parentuid:a.rootuid})).callback=new IG$.callBackObj(this,this.rs_createFolderGrp),t.show(a);break;case"cmd_add_template":a.appendTmpl()}},appendTmpl:function(){var e=this,t=e.down("[name=rtypeview]").getSelectionModel();t.selected.items.length>0?(e.ufolder=t.selected.items[0],e.newitem=!0,e.cardNav(1)):IG$.ShowError(IRm$.r1("E_SEL_ITEM_TO_ADD"),e)},rs_createFolderGrp:function(e){this.loadRsList()},parseRscr:function(e,t){var a,n,r,i,o=IG$.XGetChildNodes(e);for(a=0;a<o.length;a++)"folder"==(n=(r=IG$.XGetAttrProp(o[a])).type.toLowerCase())||"rfolder"==n?0==o[a].hasChildNodes()?(r.groupname=r.nodepath,r.name="No item is defined!",r.type="blank",t.push(r)):this.parseRscr(o[a],t):"rscript"==n&&((i=r.nodepath.split("/")).splice(i.length-1,1),r.groupname=i.join("/"),t.push(r))},loadDataSet:function(e){var t=this,a=this.down("[name=rtypeview]").store.data.items[e];a&&"RScript"==a.get("type")&&(t.ufolder=a,t.newitem=!1,t.cardNav(1))},removeDataSet:function(e){var t=this,a=this.down("[name=rtypeview]").store.data.items[e];a&&("T"!=a.get("manage")?IG$.alertmsg(ig$.appname,"The content is not removeable.",null,null,1,"error"):(t.mrec=a,IG$.confirmMessages("R Wizard","Click yes to remove item or folder.",t.doClose,t,t)))},updateParam:function(e){var t=this.down("[name=rparamview]").store.data.items[e];if(t){if(1==t.get("p"))return void IG$.alertmsg(ig$.appname,"Predefined parameters could not be mapped with result.");new IG$.d$RsWiz({dc:this.dc,rec:t,callback:new IG$.callBackObj(this,this.rs_updateParam)}).show(this)}},rs_updateParam:function(e){},doClose:function(e){if("yes"==e){var t=this,a=new IG$._rpc$;a.init(t,{ack:"batchcontent",payload:{uid:t.mrec.get("uid")},mbody:{option:"delete"}},t,t.rs_removeDataSet,null),a.send()}},rs_removeDataSet:function(e){this.loadRsList()},initComponent:function(){var e=this;e.title=IRm$.r1("T_R_WIZARD"),$s.apply(this,{items:[{xtype:"panel",name:"mainpanel",layout:"card",activeItem:0,bodyPadding:ig$.padding,items:[{id:"card-0",xtype:"panel",layout:{type:"vbox",align:"stretch"},border:0,padding:ig$.padding,items:[{xtype:"gridpanel",name:"rtypeview",selType:"rowmodel",features:[{ftype:"grouping",groupHeaderTpl:'RScript: {name} ({rows.length} Item{[values.rows.length > 1 ? "s" : ""]})'}],store:{sortInfo:{},groupField:"groupname",fields:["name","uid","nodepath","groupname","description","type","manage"]},columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:!1,dataIndex:"name"},{text:IRm$.r1("B_DESC"),flex:1,sortable:!1,dataIndex:"description"},{xtype:"actioncolumn",width:50,sortable:!1,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("B_CONFIG_ITEM"),handler:function(t,a,n){e.loadDataSet(a)},scope:e},{iconCls:"icon-grid-delete",tooltip:IRm$.r1("B_DELETE_ITEM"),handler:function(t,a,n){e.removeDataSet(a)},scope:e}]}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",plain:!0,text:IRm$.r1("L_ADD_GROUP"),handler:function(){this.toolbarHandler("cmd_add_group")},scope:this},{xtype:"button",text:"Or click here to create new template",handler:function(){this.toolbarHandler("cmd_add_template")},scope:this}]}]},{id:"card-1",xtype:"panel",border:!1,padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_RSCRIPT"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"textfield",name:"rname",fieldLabel:IRm$.r1("B_NAME"),labelWidth:60},{xtype:"textarea",height:240,name:"rcontent"}]}]},{id:"card-2",xtype:"panel",padding:ig$.padding,border:!1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_RPROMPT"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"textarea",height:260,name:"rprompt"}]}]},{id:"card-3",xtype:"panel",padding:ig$.padding,border:!1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_R_PARAM"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"gridpanel",name:"rparamview",height:270,store:{sortInfo:{},fields:["name","desc","param","value","p"]},columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:!1,dataIndex:"name"},{text:IRm$.r1("B_VALUE"),flex:1,sortable:!1,dataIndex:"value"},{text:IRm$.r1("B_DESC"),flex:1,sortable:!1,dataIndex:"desc"},{xtype:"actioncolumn",width:50,sortable:!1,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("B_CONFIG_ITEM"),handler:function(t,a,n){e.updateParam(a)},scope:e}]}]}]}]},{id:"card-4",padding:ig$.padding,xtype:"panel",border:!1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("B_SUMMARY"),defaults:{width:280},items:[{html:"Parameters are mapped with report result and ready to run. <BR> Click confirm to get Revolution results on the sheet",border:0}]}]}]}],buttons:[{name:"card-prev",text:"&laquo; "+IRm$.r1("B_PREVIOUS"),handler:function(){this.cardNav(-1)},scope:this,disabled:!0},{name:"card-next",text:IRm$.r1("B_NEXT")+" &raquo;",handler:function(){var e=this,t=this.down("[name=mainpanel]"),a=e.down("[name=rtypeview]").getSelectionModel();"card-0"==t.getLayout().activeItem.id&&(e.ufolder=a.selected&&a.selected.length>0?a.selected.items[0]:null,e.newitem=!1),this.cardNav(1)},scope:this},"->",{name:"btnconfirm",text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.r_wizard_u.superclass.initComponent.apply(this,arguments)}});
IG$.chartwizard=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!1,width:620,height:520,_confirm:function(e){var a=this;this.down("[name=_a]");1==a._updateSetting()&&(a.callback&&a.callback.execute(),!e&&a.close())},_cardNav:function(e){var a,t,l=this,i=l.down("[name=_a]"),n=i.getLayout(),d=n.getActiveItem(),o=-1,r=i.items;for(a=0;a<r.length;a++)if(r.items[a]==d){o=a;break}o>-1&&o<r.length&&(t=o+e,n.setActiveItem(t),l.down("[name=card_prev]").setDisabled(0===t),l.down("[name=card_next]").setDisabled(t===r.length-1))},_changeGroup:function(e){var a,t,l,i=this,n=i.down("[name=chartgroup]"),d=i.down("[name=m_keyword]").getValue(),o=i.charttypelist,r=i.down("[name=_b]"),s=n.getValue(),m=this.sheetoption.model.chart_option,_=r.selModel.selected.items,p=_&&_.length>0?_[0].data.subtype:m.subtype,c=[];if(s!=i.charttype||e){for(t=0;t<o.length;t++)if(a=o[t],"all"==s||a.grp==s||p==a.subtype){if(d&&a.label.toLowerCase().indexOf(d.toLowerCase())<0)continue;c.push(a)}for(r.store.loadData(c),t=0;t<r.store.data.items.length;t++)if((l=r.store.data.items[t]).data.subtype==p){setTimeout((function(){r.select(l)}),100);break}i.charttype=s}},_init:function(){var e,a=this;if(a.reportoption&&a.sheetoption){var t,l,i,n=a.sheetoption.model.chart_option,d=a.down("[name=_b]"),o=a.down("[name=relation_group]"),r=a.down("[name=colorset]"),s=a.down("[name=echart_theme]"),m=[],_=[],p=[],c=[{name:IRm$.r1("B_DEFAULT"),value:""}],u=a.sheetoption.model;for(ig$.ec_theme_list=ig$.ec_theme_list||["amplix","dark","DarkBrown","DesertLight","infographic","macarons","roma","shine","vintage"].join(","),i=ig$.ec_theme_list.split(","),n.settings=n.settings||{},e=0;e<d.store.data.items.length;e++)if((t=d.store.data.items[e]).data.subtype==n.subtype){setTimeout((function(){d.select(t)}),100);break}for(_.push({name:"Not use",uid:""}),e=0;e<u.rows.length;e++)l=IG$.CloneObject(u.rows[e]),m.push(l),_.push(l);if(0==u.cols.length)for(e=0;e<u.measures.length;e++)l=IG$.CloneObject(u.measures[e]),p.push(l);else for(e=0;e<10;e++)l={name:"column "+(e+1),value:e},p.push(l);a.down("[name=anderson_species]").store.loadData(m),a.down("[name=nat_timefield]").store.loadData(m),a.down("[name=nat_datafield]").store.loadData(m),a.down("[name=nat_groupfield]").store.loadData(m),a.down("[name=nat_xdata]").store.loadData(p),a.down("[name=nat_ydata]").store.loadData(p),a.down("[name=nat_vdata]").store.loadData(p),a.down("[name=timeseriesfield]").store.loadData(_),a.down("[name=bmapsizeaxisfield]").store.loadData(p),a.down("[name=bmapyaxisfield]").store.loadData(p);var b=[],x=n.relationgroups||[];for(e=0;e<u.measures.length;e++)b.push({seq:""+e,name:u.measures[e].name,groupindex:x.length>e&&""!=x[e]?parseInt(x[e]):e});o.store.loadData(b);var L,I=[{name:IRm$.r1("B_DEFAULT"),value:""}];for(L in IG$.__chartoption.chartcolors)I.push({name:L,value:L});for(r.store.loadData(I),r.setValue(""),e=0;e<i.length;e++)i[e].trim()&&c.push({name:i[e].trim(),value:i[e].trim()});s.store.loadData(c),s.setVisible(!!window.echart),s.setValue(""),a.setAllValues(n),a.down("[name=opt_chord]").setAllValues(n.settings),a.down("[name=piedatalabel]").setValue(n.piedatalabel),a.down("[name=bands]").store.loadData(n.bands),a._upd_series_grid()}},_upd_series_grid:function(){var e,a=this,t=a.sheetoption.model.chart_option,l=a.down("[name=renderbymeasures]").getValue(),i=a.down("[name=grid_seriestype]"),n=[],d=a.sheetoption.model.measures,o=l?d.length:Math.max(5,d.length);for(let a=0;a<o;a++)(e={}).index=a+1,e.name=d.length>a?d[a].name:"",e.m_name=l?d.length>a?d[a].name:"N/A":"series "+e.index,e.seriestype=t.renderas&&t.renderas.length>a?t.renderas[a]:"",e.y2axis=!!(t.dualaxisitem&&t.dualaxisitem.length>a)&&"T"==t.dualaxisitem[a],e.dl_enable=t.dl_enable_l&&t.dl_enable_l.length>a?t.dl_enable_l[a]:"",e.dl_marker=t.dl_marker_l&&t.dl_marker_l.length>a?t.dl_marker_l[a]:"",e.dl_marker_type=t.dl_marker_type_l&&t.dl_marker_type_l.length>a?t.dl_marker_type_l[a]:"",e.dl_marker_size=t.dl_marker_size_l&&t.dl_marker_size_l.length>a?t.dl_marker_size_l[a]:0,e.dl_linetype=t.dl_linetype_l&&t.dl_linetype_l.length>a?t.dl_linetype_l[a]:"",e.dl_linewidth=t.dl_linewidth_l&&t.dl_linewidth_l.length>a?t.dl_linewidth_l[a]:"",e.dl_position=t.dl_position_l&&t.dl_position_l.length>a?t.dl_position_l[a]:"",e.dl_c_range=t.dl_c_range_l&&t.dl_c_range_l.length>a?t.dl_c_range_l[a]:{},n.push(e);i.store.loadData(n)},_validate:function(){var e,a,t=this,l=t.down("[name=_b]").selModel.selected.items,i={},n=[],d=t.sheetoption&&t.sheetoption.model?t.sheetoption.model.chart_option:null,o=t.down("[name=dl_position]");if(i=l&&l.length?{charttype:l[0].get("charttype"),subtype:l[0].get("subtype")}:{charttype:"cartesian",subtype:"column"},n=[],IG$.testVal("pie|bubble|scatter|cartesian|radar|sunburst",i.charttype)&&(n=IG$.testVal("pie|doughnut|funnel|pyramid|sunburst",i.subtype)?[{name:IRm$.r1("B_INSIDE"),value:"inside"},{name:IRm$.r1("B_OUTSIDE"),value:"outside"},{name:IRm$.r1("B_CENTER"),value:"center"},{name:IRm$.r1("B_EDGE"),value:"edge"}]:[{name:IRm$.r1("B_TOP"),value:"top"},{name:IRm$.r1("B_BOTTOM"),value:"bottom"},{name:IRm$.r1("B_INSIDE"),value:"inside"},{name:IRm$.r1("B_INSIDE")+" "+IRm$.r1("B_TOP"),value:"insideTop"},{name:IRm$.r1("B_INSIDE")+" "+IRm$.r1("B_BOTTOM"),value:"insideBottom"}]),o.store.loadData(n),o.setValue(d?d.dl_position:""),t._custPnls&&t._custPnls.length>0)for(a=0;a<t._custPnls.length;a++)(e=t._custPnls[a]).invalidateFields&&e.invalidateFields(i)},_updateSetting:function(){var e,a,t,l,i,n=this,d=n.sheetoption.model.chart_option,o=n.down("[name=_b]").selModel.selected.items,r=n.down("[name=relation_group]").store.data.items,s=[],m=n.down("[name=grid_seriestype]").store.data.items,_=n.down("[name=bands]");for(o&&o.length>0&&(d.charttype=o[0].data.charttype,d.subtype=o[0].data.subtype),e=0;e<r.length;e++)a=r[e].data.groupindex,a=parseInt(a),0==isNaN(a)&&s.push(a);for(d.bands=[],e=0;e<_.store.data.items.length;e++)l=_.store.data.items[e],(i=new IG$.chartPlotbandObject({})).getRecords(l),d.bands.push(i._content);if(d.relationgroups=s,this.getAllValues(d,null,{excludes:{_cust_options:1}}),n.down("[name=opt_chord]").getAllValues(d.settings),d.piedatalabel=n.down("[name=piedatalabel]").getValue(),d.renderas=[],d.dualaxisitem=[],d.dl_marker_l=[],d.dl_marker_type_l=[],d.dl_marker_size_l=[],d.dl_enable_l=[],d.dl_linetype_l=[],d.dl_linewidth_l=[],d.dl_position_l=[],d.dl_c_range_l=[],m)for(e=0;e<m.length;e++)d.renderas.push(m[e].data.seriestype||""),d.dualaxisitem.push(m[e].data.y2axis?"T":""),d.dl_marker_l.push(m[e].data.dl_marker||""),d.dl_marker_type_l.push(m[e].data.dl_marker_type||""),d.dl_marker_size_l.push(m[e].data.dl_marker_size||0),d.dl_enable_l.push(m[e].data.dl_enable||""),d.dl_linetype_l.push(m[e].data.dl_linetype||""),d.dl_linewidth_l.push(m[e].data.dl_linewidth||""),d.dl_position_l.push(m[e].data.dl_position||""),d.dl_c_range_l.push(m[e].data.dl_c_range||{});if(n._custPnls&&n._custPnls.length>0)for(e=0;e<n._custPnls.length;e++)(t=n._custPnls[e]).updateOptionValues&&t.updateOptionValues();return!0},_setAdvOpt:function(){var e,a,t,l,i=this,n=i.down("[name=_a]").getLayout(),d=(n.selectedIndex,n.getActiveItem()),o=i.down("[name=_b]").selModel.selected.items,r=o&&o.length?o[0].data.charttype:null;o&&o.length&&o[0].data.subtpye;if(e={optview:["opt_anderson","opt_relation","opt_range","opt_series","opt_nations","opt_series","opt_chord"],matrix:["opt_comparison"],anderson:["opt_anderson"],matrixdiagram:["opt_relation","opt_range"],networkdiagram_pos:["opt_relation","opt_range"],networkdiagram_neg:["opt_relation","opt_range"],forcelayout:["opt_relation","opt_range"],nation:["opt_nations"],chord:["opt_chord","opt_range"],defaults:["opt_series"]},d){for((l=d.down("[name=timeoption]"))&&l.setVisible("nation"==r),(l=d.down("[name=tm_opt]"))&&l.setVisible("treemap"==r),(l=d.down("[name=bubblemapoption]"))&&l.setVisible("bubblemap"==r),(l=d.down("[name=tm_sunburst]"))&&l.setVisible("sunburst"==r),(l=d.down("[name=pieoption]"))&&l.setVisible("pie"==r||"funnel"==r||"pyramid"==r),t=e[r]||e.defaults,a=0;a<e.optview.length;a++)(l=d.down("[name="+e.optview[a]+"]"))&&l.hide();for(a=0;a<t.length;a++)(l=d.down("[name="+t[a]+"]"))&&l.show();i._validate()}},_chage3dOpt:function(e){var a=this;a.down("[name=e3d_al]")&&(a.down("[name=e3d_al]").setValue(e?45:15),a.down("[name=e3d_be]").setValue(e?0:15),a.down("[name=e3d_de]").setValue(e?35:50),a.down("[name=e3d_vd]").setValue(e?0:25))},initComponent:function(){var e=this,a=IG$.__chartoption.charttype;e.title=IRm$.r1("T_CHART_WIZARD"),e.charttypelist=a,e._custPnls=[],$.each(IG$.__chartoption.chartcateg,(function(e,a){a.lcs&&(a.name=IRm$.r1(a.lcs),delete a.lcs)})),$.each(a,(function(e,a){a.lcs&&(a.label=IRm$.r1(a.lcs),delete a.lcs)})),$s.apply(e,{items:[{xtype:"panel",layout:{type:"hbox",align:"stretch"},border:0,items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},padding:2,width:95,items:[{xtype:"container",name:"_c",layout:{type:"vbox",align:"stretch"}},{xtype:"container",flex:1}]},{xtype:"panel",name:"_a",flex:1,layout:"card",activeItem:0,border:0,defaults:{header:!1,hideHeaders:!0},items:[{xtype:"panel",title:IRm$.r1("L_CSTEP_1"),border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{name:"chartgroup",fieldLabel:IRm$.r1("L_CHART_GROUP"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,width:320,store:{xtype:"store",fields:["name","value"],data:IG$.__chartoption.chartcateg},listeners:{afterrender:function(e){e.setValue("all")},change:function(e,a,t,l){this._changeGroup()},scope:this}},{xtype:"textfield",fieldLabel:IRm$.r1("B_KEYWORD"),name:"m_keyword",labelWidth:60,emptyText:IRm$.r1("L_SEARCH_KWD"),enableKeyEvents:!0,listeners:{keyup:function(e,a,t){13==a.keyCode&&this._changeGroup(1)},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){var e=this.down("[name=m_keyword]");e.clearInvalid(),e.getValue()||(e.markInvalid(IRm$.r1("B_REQ")),setTimeout((function(){e.clearInvalid()}),3e3)),this._changeGroup(1)},scope:this}]},{xtype:"panel",border:1,flex:1,layout:"fit",items:[{xtype:"dataview",name:"_b",store:{fields:["label","charttype","subtype","img","grp"],sortInfo:{},data:a},tpl:['<tpl for=".">','<div class="thumb-wrap" id="{subtype}">','<div class="thumb"><div class="ig-chart-base ig-chart-{img}" title="{label}"><span class="chart-icon"></span></div></div>','<span class="x-editable">{label}</span>',"</div>","</tpl>",'<div class="x-clear"></div>'],overItemCls:"x-item-over",itemSelector:"div.thumb-wrap",overItemCls:"phone-hover",multiSelect:!1,autoScroll:!0,trackOver:!0,listeners:{beforecontainerclick:function(e,a){return!1},itemclick:function(e,a,t,l,i,n){var d=a.get("subtype");"pie"==d||"doughnut"==d?this._chage3dOpt(1):this._chage3dOpt(0)},scope:this}}]}]},{xtype:"panel",title:IRm$.r1("L_CSTEP_2"),border:!1,autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_DATA_OPTION"),defaults:{width:280},items:[{name:"useformula",fieldLabel:IRm$.r1("L_USE_FORMULA"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLE"),checked:!1},{name:"swapaxis",fieldLabel:IRm$.r1("L_SWAP_AXIS"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLE"),checked:!1},{name:"maxchartresult",fieldLabel:IRm$.r1("L_MAX_CHART_ELEMENT"),xtype:"numberfield",value:0,minValue:0,maxValue:1e6,allowDecimals:!1,decimalPrecision:0,step:1},{name:"cunittext",xtype:"textfield",fieldLabel:IRm$.r1("L_UNIT_TEXT")}]},{xtype:"fieldset",title:IRm$.r1("L_DATA_LABEL"),items:[{name:"dl_enable",xtype:"checkbox",fieldLabel:IRm$.r1("B_ENABLED"),boxLabel:IRm$.r1("B_SHOW"),checked:!1},{name:"useformatvalue",xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),fieldLabel:IRm$.r1("L_C_FMT_VAL")},{name:"dl_tooltip",xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),fieldLabel:IRm$.r1("L_C_TIP_EN")},{name:"dl_marker",xtype:"checkbox",fieldLabel:IRm$.r1("L_MARKER"),boxLabel:IRm$.r1("B_SHOW"),checked:!1},{name:"dl_marker_type",fieldLabel:IRm$.r1("L_MARKER_TYPE"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_M_CIRCLE"),value:"circle"},{name:IRm$.r1("L_M_RECT"),value:"rect"},{name:IRm$.r1("L_M_ROUND_RECT"),value:"roundRect"},{name:IRm$.r1("L_M_TRIANGLE"),value:"triangle"},{name:IRm$.r1("L_M_DIAMOND"),value:"diamond"},{name:IRm$.r1("L_M_PIN"),value:"pin"},{name:IRm$.r1("L_M_ARROW"),value:"arrow"}]}},{name:"dl_marker_size",fieldLabel:IRm$.r1("L_MARKER_SIZE"),xtype:"numberfield"},{name:"dl_align",fieldLabel:IRm$.r1("L_LABEL_ALIGN"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("B_CENTER"),value:"center"},{name:IRm$.r1("B_RIGHT"),value:"right"},{name:IRm$.r1("B_LEFT"),value:"Left"}]}},{name:"dl_position",xtype:"combobox",fieldLabel:IRm$.r1("L_POSITION"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}}]},{xtype:"fieldset",title:IRm$.r1("L_CHART_OPTION"),defaults:{width:280},items:[{name:"enablepivot",fieldLabel:IRm$.r1("L_ENABLE_PIVOT"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),hidden:!0,checked:!1},{name:"enabledrill",fieldLabel:IRm$.r1("L_ENABLE_DRILL"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"datazoom",fieldLabel:IRm$.r1("B_DATA_ZOOM"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1,hidden:!window.echarts},{name:"enablezoom",fieldLabel:IRm$.r1("B_ZOOM"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1,listeners:{change:function(e){var a=this.down("[name=enabledragselect]"),t=e.getValue();a.setDisabled(t),t&&a.setValue(!1)},scope:this}},{name:"enabledragselect",fieldLabel:IRm$.r1("L_DRAG_SELECT"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1,listeners:{change:function(e){var a=this.down("[name=enablezoom]"),t=e.getValue();a.setDisabled(t),t&&a.setValue(!1)},scope:this}}]}]},{xtype:"panel",title:IRm$.r1("L_CSTEP_3"),border:!1,autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_VIEW_OPTION"),items:[{name:"showlegend",xtype:"checkbox",fieldLabel:IRm$.r1("L_SHOW_LEGEND"),boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"legendposition",fieldLabel:IRm$.r1("L_LEGEND_POSITION"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_BTM_LEFT"),value:"BOTTOM_LEFT"},{name:IRm$.r1("L_BTM_CENTER"),value:"BOTTOM_CENTER",selected:!0},{name:IRm$.r1("L_BTM_RIGHT"),value:"BOTTOM_RIGHT"},{name:IRm$.r1("L_TOP_LEFT"),value:"TOP_LEFT"},{name:IRm$.r1("L_TOP_CENTER"),value:"TOP_CENTER"},{name:IRm$.r1("L_TOP_RIGHT"),value:"TOP_RIGHT"},{name:IRm$.r1("L_RIGHT_TOP"),value:"RIGHT_TOP"},{name:IRm$.r1("L_RIGHT_CENTER"),value:"RIGHT_CENTER"},{name:IRm$.r1("L_RIGHT_BTM"),value:"RIGHT_BOTTOM"},{name:IRm$.r1("L_LEFT_TOP"),value:"LEFT_TOP"},{name:IRm$.r1("L_LEFT_CENTER"),value:"LEFT_CENTER"},{name:IRm$.r1("L_LEFT_BTM"),value:"LEFT_BOTTOM"}]}},{name:"lgndfloating",fieldLabel:IRm$.r1("L_FLOATING"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldset",title:IRm$.r1("L_TITLE_OPTION"),layout:{type:"vbox",align:"stretch"},$w:350,items:[{name:"showtitle",$w:350,boxLabel:IRm$.r1("B_ENABLED"),fieldLabel:IRm$.r1("B_SHOW"),xtype:"checkbox"},{name:"title",$w:350,xtype:"textfield",fieldLabel:IRm$.r1("L_TITLE")},{name:"titleposition",fieldLabel:IRm$.r1("L_TITLE_POSITION"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:"Bottom Left",value:"BOTTOM_LEFT"},{name:"Bottom Center",value:"BOTTOM_CENTER",selected:!0},{name:"Bottom Right",value:"BOTTOM_RIGHT"},{name:"Top Left",value:"TOP_LEFT"},{name:"Top Center",value:"TOP_CENTER"},{name:"Top Right",value:"TOP_RIGHT"}]}},{xtype:"displayfield",value:"Ex) {SERIES}",$w:230}]}]},{xtype:"panel",title:IRm$.r1("L_CSTEP_4"),border:!1,autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_PLOT_STYLES"),items:[{xtype:"combobox",queryMode:"local",name:"colorset",fieldLabel:IRm$.r1("L_CLR_SET"),editable:!1,autoSelect:!1,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"]}},{xtype:"combobox",queryMode:"local",name:"echart_theme",fieldLabel:IRm$.r1("L_THEME"),editable:!1,autoSelect:!1,valueField:"value",displayField:"name",store:{}}]},{xtype:"fieldset",title:IRm$.r1("L_BB_OPT"),name:"bubblemapoption",hidden:!0,defaults:{width:280},items:[{xtype:"checkbox",name:"bmaprow",fieldLabel:IRm$.r1("L_BB_SL"),boxLabel:IRm$.r1("L_BB_SL_RDR")},{xtype:"checkbox",name:"bmapyaxis",fieldLabel:IRm$.r1("L_BB_YA")},{xtype:"combobox",name:"bmapsizeaxisfield",queryMode:"local",fieldLabel:IRm$.r1("L_BB_SA"),editable:!1,autoSelect:!1,valueField:"uid",displayField:"name",store:{xtype:"store",fields:["name","uid","nodepath","type"]}},{xtype:"combobox",queryMode:"local",name:"bmapyaxisfield",fieldLabel:IRm$.r1("L_BB_CA"),valueField:"uid",displayField:"name",editable:!1,autoSelect:!1,store:{xtype:"store",fields:["name","uid","nodepath","type"]}},{xtype:"numberfield",name:"bmapsize",fieldLabel:IRm$.r1("L_BB_MS"),minValue:10,maxValue:300}]},{xtype:"fieldset",title:IRm$.r1("L_TIME_OPTION"),name:"timeoption",hidden:!0,defaults:{width:280},items:[{name:"timeseriesfield",fieldLabel:IRm$.r1("L_TC_TA"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"uid",editable:!1,autoSelect:!1,store:{xtype:"store",fields:["name","uid","nodepath","type"]}},{name:"timeseriesduration",fieldLabel:IRm$.r1("L_TC_DU"),xtype:"numberfield",value:.3,minValue:.3,maxValue:8e3}]},{xtype:"fieldset",title:IRm$.r1("L_PADDING"),name:"plotpadding",defaults:{width:280,value:0,minValue:0,maxValue:80},items:[{fieldLabel:IRm$.r1("L_PAD_TOP"),name:"paddingtop",xtype:"numberfield"},{fieldLabel:IRm$.r1("L_PAD_LEFT"),name:"paddingleft",xtype:"numberfield"},{fieldLabel:IRm$.r1("L_PAD_BOTTOM"),name:"paddingbottom",xtype:"numberfield"},{fieldLabel:IRm$.r1("L_PAD_RIGHT"),name:"paddingright",xtype:"numberfield"}]},{xtype:"fieldset",title:IRm$.r1("L_PIE_OPTION"),name:"pieoption",defaults:{width:280},items:[{name:"pieinnerradius",fieldLabel:IRm$.r1("L_INNER_RADIUS"),xtype:"numberfield",value:0,minValue:0,maxValue:80},{name:"pieouterradius",fieldLabel:IRm$.r1("L_OUTER_RADIUS"),xtype:"numberfield",value:75,minValue:30,maxValue:100},{name:"pielabeldist",fieldLabel:IRm$.r1("L_LABEL_DIST"),xtype:"numberfield",value:0,minValue:-50,maxValue:50},{name:"pielayout",fieldLabel:IRm$.r1("L_SERIES_LAYOUT"),xtype:"combobox",editable:!1,queryMode:"local",displayField:"name",valueField:"value",store:{fields:["name","value"],data:[{name:"Only One Circle",value:""},{name:IRm$.r1("L_HORIZONTAL"),value:"h"},{name:IRm$.r1("L_VERTICAL"),value:"v"},{name:IRm$.r1("L_FLEX"),value:"f"}]}},{name:"pieflex_width",fieldLabel:IRm$.r1("L_FLEX_MIN_WIDTH"),xtype:"numberfield"},{name:"piedatalabel",fieldLabel:IRm$.r1("L_DATA_LABEL_FMT"),xtype:"textfield"},{xtype:"displayfield",value:"Ex) <b>{name}</b>: {value} ({percent} %)"},{xtype:"numberfield",value:2,minValue:0,maxValue:2,fieldLabel:IRm$.r1("L_PCT_PREC"),name:"piepctprec"}]},{xtype:"fieldset",title:"Sunburst",name:"tm_sunburst",hidden:!0,defaults:{width:200},items:[{name:"sb_l_min",fieldLabel:"Ignore value under",xtype:"numberfield"}]},{xtype:"fieldset",title:IRm$.r1("L_TREEM_OPTION"),name:"tm_opt",hidden:!0,defaults:{width:280},items:[{name:"tm_l_alg",fieldLabel:IRm$.r1("L_TM_ALG"),xtype:"combobox",editable:!1,queryMode:"local",displayField:"name",valueField:"value",store:{fields:["name","value"],data:[{name:IRm$.r1("B_DEFAULT"),value:""},{name:"sliceAndDice",value:"sliceAndDice"},{name:"stripes",value:"stripes"},{name:"squarified",value:"squarified"},{name:"strip",value:"strip"}]}},{name:"tm_l_cl",fieldLabel:IRm$.r1("L_TM_CL"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldset",name:"opt_anderson",title:IRm$.r1("L_ADVANCED"),hidden:!0,items:[{xtype:"combobox",name:"anderson_species",fieldLabel:IRm$.r1("L_SPECIES"),queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}}]},{xtype:"fieldset",name:"opt_range",title:IRm$.r1("L_RELATION_RANGES"),hidden:!0,items:[{xtype:"numberfield",name:"rel_range1",fieldLabel:IRm$.r1("L_FRM_RANGE"),minValue:-1,value:0,maxValue:1,step:.01},{xtype:"numberfield",name:"rel_range2",fieldLabel:IRm$.r1("L_END_RANGE"),minValue:-1,value:1,maxValue:1,step:.01}]},{xtype:"fieldset",name:"opt_relation",title:IRm$.r1("L_GROUP_MAPPING"),hidden:!0,items:[{xtype:"grid",name:"relation_group",hideHeaders:!1,stateful:!0,store:{fields:["name","groupindex","seq"]},height:80,plugins:[{ptype:"cellediting",clicksToEdit:1}],columns:[{text:IRm$.r1("B_SEQUENCE"),flex:1,sortable:!1,dataIndex:"seq"},{text:IRm$.r1("L_GROUP_INDEX"),flex:1,sortable:!1,dataIndex:"groupindex",editor:{allowBlank:!1}},{text:IRm$.r1("B_NAME"),flex:1,sortable:!1,dataIndex:"name"}]}]},{xtype:"fieldset",name:"opt_series",title:IRm$.r1("L_SERIES_TYPE"),hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{name:"usedualaxis",fieldLabel:IRm$.r1("L_DUAL_AXIS"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e){var a=this,t=a.down("[name=usedualaxis]").getValue();a.down("[name=usedualaxis2]").setValue(t),a.down("[name=y2axis]").setDisabled(!t)},scope:this}},{name:"renderbymeasures",fieldLabel:IRm$.r1("L_RENDER_BY_MEA"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e){this._upd_series_grid()},scope:this}},{xtype:"grid",name:"grid_seriestype",hideHeaders:!1,stateful:!0,store:{fields:["name","m_name","seriestype","y2axis","dl_marker","dl_enable"]},height:120,columns:[{text:IRm$.r1("B_INDEX"),flex:1,tdCls:"igc-td-link",sortable:!1,dataIndex:"index"},{text:IRm$.r1("B_NAME"),flex:2,sortable:!1,tdCls:"igc-td-link",dataIndex:"m_name"},{text:IRm$.r1("L_SERIES_TYPE"),flex:1,sortable:!1,tdCls:"igc-td-link",dataIndex:"seriestype"},{xtype:"checkcolumn",text:IRm$.r1("L_Y2_AXIS"),flex:1,sortable:!1,tdCls:"igc-td-link",dataIndex:"y2axis"}],listeners:{itemclick:function(t,l,i,n,d,o){var r=new IG$.chartSeries({instance:e.instance,modal:!0,charttype:a,cell_record:l,cell_item:i,cell_index:n,callback:new IG$.callBackObj(this,(function(e){var a=e.cell_record;a&&(a.set("seriestype",e.seriestype||""),a.set("dl_marker",e.dl_marker||""),a.set("dl_marker_type",e.dl_marker_type||""),a.set("dl_marker_size",e.dl_marker_size||0),a.set("dl_enable",e.dl_enable||""),a.set("dl_linetype",e.dl_linetype||""),a.set("dl_linewidth",e.dl_linewidth||""),a.set("dl_position",e.dl_position||""),a.set("dl_c_range",e.dl_c_range||{}))}))});IG$.showDlg(e,r)},scope:this}},{name:"custxlabeltype",xtype:"combobox",fieldLabel:IRm$.r1("L_CUST_XLABEL_TYPE"),editable:!1,valueField:"value",displayField:"name",queryMode:"local",autoSelect:!0,store:{fields:["name","value"],data:[{name:IRm$.r1("B_DEFAULT"),value:""},{name:IRm$.r1("L_VERTICAL"),value:"vertical"}]}}]},{xtype:"fieldset",name:"opt_comparison",title:IRm$.r1("L_COMP_MATRIX"),hidden:!0,items:[{xtype:"numberfield",name:"comp_range0",fieldLabel:IRm$.r1("L_RED_COLOR_RANGE"),minValue:-1,value:0,maxValue:.8,step:.01},{xtype:"numberfield",name:"comp_range1",fieldLabel:IRm$.r1("L_BLUE_COLOR_RANGE"),minValue:-.8,value:0,maxValue:1,step:.01},{xtype:"displayfield",value:"Middle range is colored in gray"}]},{xtype:"fieldset",name:"opt_chord",title:IRm$.r1("L_CHORD_CHART"),hidden:!0,items:[{xtype:"combobox",name:"chd_method",fieldLabel:IRm$.r1("CHORD_DATA"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:"Calculate Relations",value:"relations"},{name:"Table Result Matrix",value:"tablematrix"}]}},{xtype:"displayfield",value:"Relations calculates coefficient."},{xtype:"displayfield",value:"Table matrix need same name on column and row metrics"}]},{xtype:"fieldset",name:"opt_nations",title:IRm$.r1("L_TIMESERIES_CHART"),hidden:!0,items:[{xtype:"combobox",name:"nat_timefield",fieldLabel:IRm$.r1("L_TIME_FIELD"),queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}},{xtype:"combobox",name:"nat_datafield",fieldLabel:IRm$.r1("L_DATA_FIELD"),queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}},{xtype:"combobox",name:"nat_groupfield",fieldLabel:IRm$.r1("L_GROUP_FIELD"),queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}},{xtype:"combobox",name:"nat_xdata",fieldLabel:IRm$.r1("L_X_AXIS"),queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}},{xtype:"combobox",name:"nat_ydata",fieldLabel:IRm$.r1("L_Y_AXIS"),queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}},{xtype:"combobox",name:"nat_vdata",fieldLabel:IRm$.r1("L_VOLUME"),queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[]}}]}]},{xtype:"panel",title:IRm$.r1("L_CSTEP_5"),border:!1,autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_XAXIS_SETTINGS"),items:[{name:"xlabel",fieldLabel:IRm$.r1("L_SHOW_LABEL"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"xaxisrot",fieldLabel:IRm$.r1("L_AUTO_ROT"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e){var a=this,t=e.getValue(),l=a.down("[name=xstagl]"),i=a.down("[name=xstep]"),n=a.down("[name=xaxisrotang]");l.setDisabled(t),i.setDisabled(t),n.setVisible(t)},scope:this}},{name:"xaxisrotang",fieldLabel:IRm$.r1("L_ROT_ANGLE"),xtype:"numberfield",minValue:-180,maxValue:180,step:1,value:0,hidden:!0},{name:"xstagl",fieldLabel:IRm$.r1("L_STG_LINE"),xtype:"numberfield",value:0,minValue:0,maxValue:5,step:1},{name:"xstep",fieldLabel:IRm$.r1("L_L_STEP"),xtype:"numberfield",value:0,minValue:0,maxValue:5,step:1},{xtype:"combobox",name:"xaxissep",fieldLabel:IRm$.r1("L_CHART_SEP"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:"Default",value:""},{name:"Line",value:"|"},{name:"New Line",value:"nl"},{name:"Comma",value:","},{name:"Colon",value:":"}]}},{xtype:"checkbox",fieldLabel:IRm$.r1("L_MULTI_LINE"),name:"xaxismline",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"numberfield",fieldLabel:IRm$.r1("L_MAX_CHAR"),name:"xaxislbllen",value:0},{xtype:"checkbox",fieldLabel:IRm$.r1("L_HIDE_OVERLAP"),name:"xaxishideoverlap",boxLabel:IRm$.r1("B_ENABLED")},{name:"xgroupcategory",fieldLabel:IRm$.r1("L_GROUP_CATEG"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldset",title:IRm$.r1("L_YAXIS_SETTINGS"),items:[{name:"yaxisformat",fieldLabel:IRm$.r1("L_YAXIS_FORMAT"),xtype:"textfield"},{name:"yaxismin",fieldLabel:IRm$.r1("L_YAXIS_MIN"),xtype:"textfield"},{name:"yaxismax",fieldLabel:IRm$.r1("L_YAXIS_MAX"),xtype:"textfield"},{name:"precision",fieldLabel:IRm$.r1("L_NUMBER_PRECISION"),xtype:"numberfield",value:0,minValue:0,maxValue:10,allowDecimals:!1,decimalPrecision:0,step:1},{name:"yaxistitle",fieldLabel:IRm$.r1("L_YAXIS_TITLE"),xtype:"textfield"},{name:"ytickint",fieldLabel:IRm$.r1("L_TK_INTVL"),xtype:"numberfield",value:0,minValue:0,maxValue:1e8,allowDecimals:!0,decimalPrecision:2},{name:"yaxisline",xtype:"checkbox",fieldLabel:IRm$.r1("L_HIDE_LINE"),boxLabel:IRm$.r1("B_ENABLED")},{name:"yaxislog",xtype:"checkbox",fieldLabel:IRm$.r1("L_YAXIS_LOG"),boxLabel:IRm$.r1("B_ENABLED")},{name:"yaxislogbase",xtype:"numberfield",fieldLabel:IRm$.r1("L_YAXIS_LOGBASE"),value:10}]},{name:"usedualaxis2",fieldLabel:IRm$.r1("L_DUAL_AXIS"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1,listeners:{change:function(e){var a=this.down("[name=usedualaxis2]").getValue();this.down("[name=usedualaxis]").setValue(a)},scope:this}},{xtype:"fieldset",name:"y2axis",disabled:!0,title:IRm$.r1("L_SEC_YAXIS_SETTINGS"),items:[{name:"yaxishide2",fieldLabel:IRm$.r1("L_HIDDEN"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"yaxisformat2",fieldLabel:IRm$.r1("L_YAXIS_FORMAT"),xtype:"textfield"},{name:"yaxismin2",fieldLabel:IRm$.r1("L_YAXIS_MIN"),xtype:"textfield"},{name:"yaxismax2",fieldLabel:IRm$.r1("L_YAXIS_MAX"),xtype:"textfield"},{name:"yaxistitle2",fieldLabel:IRm$.r1("L_RIGHT_YAXIS_TITLE"),xtype:"textfield"},{name:"yaxisline2",fieldLabel:IRm$.r1("L_HIDE_LINE"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"yaxislog2",xtype:"checkbox",fieldLabel:IRm$.r1("L_YAXIS_LOG"),boxLabel:IRm$.r1("B_ENABLED")},{name:"yaxislogbase2",xtype:"numberfield",fieldLabel:IRm$.r1("L_YAXIS_LOGBASE"),value:10}]},{xtype:"fieldset",title:IRm$.r1("L_DATA_SERIES"),items:[{name:"stack",fieldLabel:IRm$.r1("L_STACK_VALUE"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1,listeners:{change:function(e){var a=e.getValue();this.down("[name=stackperc]").setVisible(a)},scope:this}},{name:"stackperc",fieldLabel:IRm$.r1("L_STACK_PERCENT"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1}]},{xtype:"fieldset",title:IRm$.r1("L_RANGE"),defaultType:"textfield",name:"dl_x_range",items:[{xtype:"checkbox",fieldLabel:IRm$.r1("B_ENABLED"),boxLabel:IRm$.r1("B_ENABLED"),name:"dl_xr_enabled"},{xtype:"checkbox",fieldLabel:IRm$.r1("L_HIDDEN_SELECTOR"),boxLabel:IRm$.r1("B_ENABLED"),name:"dl_xr_hidden"},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_MIN_COLOR"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"dl_xr_minc",width:120},{xtype:"splitter"},{fieldLabel:"..",xtype:"splitbutton",menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,a){this.down("[name=dl_xr_minc]").setValue("#"+a)},scope:e}},"-"]}},{xtype:"container",flex:1}]},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_MID_COLOR"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"dl_xr_midc",width:120},{xtype:"splitter"},{fieldLabel:"..",xtype:"splitbutton",menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,a){this.down("[name=dl_xr_midc]").setValue("#"+a)},scope:e}},"-"]}},{xtype:"container",flex:1}]},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_MAX_COLOR"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"dl_xr_maxc",width:120},{xtype:"splitter"},{fieldLabel:"..",xtype:"splitbutton",menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,a){this.down("[name=dl_xr_maxc]").setValue("#"+a)},scope:e}},"-"]}},{xtype:"container",flex:1}]}]}]},{xtype:"panel",title:IRm$.r1("L_CSTEP_6"),border:!1,autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",flex:1,value:"Defines PlotLine and PlotBand for Cartesian Charts"},{xtype:"button",text:IRm$.r1("L_ADD_NEW"),handler:function(){var e=this,a=new IG$.chartPlotbandObject({enabled:!0}),t=new IG$.chartPlotband({instance:e.instance,ditem:a,callback:new IG$.callBackObj(e,(function(e){this.down("[name=bands]").store.add(e._content)}))});IG$.showDlg(e,t)},scope:this}]},{xtype:"gridpanel",name:"bands",flex:1,store:{fields:["name","color","borderwidth","type","value_1","value_2","value_desc","enabled","rtype","porder","showfitexp","cfitallseries","cfitshowsum","cfitfcs","cf_lc"]},columns:[{text:IRm$.r1("B_NAME"),flex:1,tdCls:"igc-td-link",dataIndex:"name"},{text:IRm$.r1("B_VALUE"),flex:1,tdCls:"igc-td-link",dataIndex:"value_desc"},{xtype:"checkcolumn",text:IRm$.r1("B_STATUS"),width:60,dataIndex:"enabled"},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(e,a,t){e.store.getAt(a);e.store.removeAt(a)}}]}],listeners:{cellclick:function(e,a,t,l,i,n){if(2!=t&&3!=t){var d,o=this,r=new IG$.chartPlotbandObject({});r.getRecords(l),d=new IG$.chartPlotband({instance:o.instance,ditem:r,callback:new IG$.callBackObj(o,(function(e){e.updateRecords(l)}))}),IG$.showDlg(o,d)}},scope:this}}]}],listeners:{afterrender:function(e){this._init()},scope:this}}]}],buttons:[{name:"card_prev",text:"&laquo; "+IRm$.r1("B_PREVIOUS"),handler:function(){this._cardNav(-1)},scope:this,disabled:!0},{name:"card_next",text:IRm$.r1("B_NEXT")+" &raquo;",handler:function(){this._cardNav(1)},scope:this},"->",{text:IRm$.r1("B_APPLY"),handler:function(){this._confirm(1)},scope:this},{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){var e=this,a=e.down("[name=_a]"),t=e.down("[name=_c]");window.IG$.makeCustomChartOption&&(e._custPnls=window.IG$.makeCustomChartOption(e,e.down("[name=_a]"))),$.each(a.items.items,(function(l,i){t.add({xtype:"button",p:e,pu:a,p1:l,$w:80,margin:"0 0 3",text:i.title,handler:function(){a.getLayout().setActiveItem(l),e._setAdvOpt()}})}))}}}),IG$.chartwizard.superclass.initComponent.apply(this,arguments)}});
IG$.jasper_template=$s.extend($s.window,{modal:!0,width:460,autoHeight:!0,layout:{type:"vbox",align:"stretch"},_confirm:function(){var e=this,t=e.down("[name=grdmain]").getSelectionModel().selected;t&&t.length&&(e.callback&&e.callback.execute(t),e.close())},load_content:function(){var e,t,a,l=this,n=new IG$._rpc$,o=l.down("[name=tmpl_type]").getValue(),i=l.down("[name=grdmain]");o?("file"==o?(e="helpcontent",t={},a={option:l._fopt||"jasper"}):(e="content",t={uid:"/DashboardResources"},a={option:"folder"}),n.init(l,{ack:e,payload:t,mbody:a},l,(function(e){var t,a,n,d="file"==o?e:e.children,p=[],r=l._fopt||"jasper";if(d){for(t=0;t<d.length;t++)a=d[t],"resources"==o?(n=a.name,a.type="resource",n.indexOf(".")>-1&&(n=n.substring(n.lastIndexOf(".")+1),"jasper"==r?"jrxml"==n&&p.push(a):"office_files"==r&&/(xls|xlsx|doc|docx|ppt|pptx)/.test(n)&&p.push(a))):(a.type="file",p.push(a));i.store.loadData(p)}}),!1),n.send()):i.store.loadData([])},initComponent:function(){this.instance;this.title=IRm$.r1("T_JASP_TMPL"),$s.apply(this,{padding:ig$.padding,items:[{xtype:"panel",bodyPadding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{fieldLabel:IRm$.r1("B_TEMPLATE"),name:"tmpl_type",xtype:"combobox",queryMode:"local",valueField:"value",displayField:"name",editable:!1,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("B_SELECT"),value:""},{name:"Resources",value:"resources"},{name:"File",value:"file"}]},listeners:{change:function(e){this.load_content()},scope:this}},{xtype:"gridpanel",height:200,name:"grdmain",store:{xtype:"store",fields:["uid","name","contentfullpath","type","ext"]},selType:"checkboxmodel",selModel:{mode:"SINGLE"},columns:[{dataIndex:"name",flex:1,text:IRm$.r1("B_NAME")},{dataIndex:"ext",width:80,text:IRm$.r1("L_FILEEXT")}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.jasper_template.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(e){e.down("[name=tmpl_type]").setValue("")}}}),IG$.exportWizard=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!1,width:760,height:450,reportoption:null,sheetoption:null,callback:null,_confirm:function(){var e=this;if(e.reportoption){var t,a,l,n,o,i,d=e.reportoption._mc.export_option,p=e.down("[name=grdoption]"),r=e.down("[name=grd_otmpl]");e.j_param;for(d.repeatheader=e.down("[name=repeatheader]").getValue(),d.title=e.down("[name=headertitle]").getValue(),d.pagenumber=e.down("[name=pagenumber]").getValue(),d.footertitle=e.down("[name=footertitle]").getValue(),d.alldata=e.down("[name=alldata]").getValue(),d.startpage=e.down("[name=startpage]").getValue(),d.endpage=e.down("[name=endpage]").getValue(),d.filterdesc=e.down("[name=filterdesc]").getValue(),d.layout=e.down("[name=layout]").getValue().layouttype,d.pagesize=e.down("[name=pagesize]").getValue(),d.fontname=e.down("[name=fontname]").getValue(),d.scaledown=e.down("[name=scaledown]").getValue(),$.each(["excel","pdf","csv","html","office"],(function(t,a){var l=e.down("[name=t_e"+(t+1)+"]");d["u_"+a]=l.getValue()})),d.dockitems={},l=0;l<p.store.data.items.length;l++)i=p.store.data.items[l],d.dockitems[i.get("docid")]={docid:i.get("docid"),overflow:i.get("overflow"),hidden:i.get("hidden")};for(d.jasper=d.jasper||{},d.otmpl=[],l=0;l<r.store.data.items.length;l++)i=r.store.data.items[l],d.otmpl.push({name:i.get("name"),type:i.get("type"),uid:i.get("uid"),description:i.get("description"),export_type:i.get("export_type")});for(t in window.IExport)if(a=window.IExport[t],d[a.name]={},a.extPanel)for(l=0;l<a.params.length;l++)(n=a.extPanel.down("[name="+a.params[l]+"]"))&&(o=n.getValue(),d[a.name][a.params[l]]=o)}this.callback&&this.callback.execute(),this.close()},init_f:function(){var e=this,t=e.down("[name=_mtab]"),a=e.down("[name=grd_otmpl]");for(i in window.IExport=window.IExport||{},e.j_param=["pdf_output","pdf_label","rtf_output","rtf_label","ppt_output","ppt_label","excel_label","excel_output","html_output","html_label","docx_output","docx_label","xml_output","xml_label"],window.IExport){var l=IExport[i];l.configPanel&&(l.configPanel.maincfg=this,l.configPanel.name=l.name,l.configPanel.instance=this.instance,l.extPanel=new $s.panel(l.configPanel),t.add(l.extPanel))}if(e.reportoption){e.reportoption._mc.export_option=e.reportoption._mc.export_option||{};var n,o,i,d,p=e.reportoption._mc.export_option,r=e.down("[name=layout]"),m=[],s=e.dzone;r.setValue({layouttype:p.layout||"portrait"}),e.down("[name=repeatheader]").setValue(p.repeatheader),e.down("[name=headertitle]").setValue(p.title),e.down("[name=pagenumber]").setValue(p.pagenumber),e.down("[name=footertitle]").setValue(p.footertitle),e.down("[name=alldata]").setValue(p.alldata),e.down("[name=startpage]").setValue(p.startpage),e.down("[name=endpage]").setValue(p.endpage),e.down("[name=filterdesc]").setValue(p.filterdesc),e.down("[name=pagesize]").setValue(p.pagesize||"A4"),e.down("[name=fontname]").setValue(p.fontname),e.down("[name=scaledown]").setValue(p.scaledown),$.each(["excel","pdf","csv","html","office"],(function(t,a){e.down("[name=t_e"+(t+1)+"]").setValue(p["u_"+a])})),n=p.dockitems||{};for(let e=0;e<s.items.length;e++)o=s.items[e].docid,m.push({docid:o,objtype:s.items[e].objtype,title:s.items[e].title,overflow:!n[o]||n[o].overflow,hidden:!!n[o]&&n[o].hidden});if(e.down("[name=grdoption]").store.loadData(m),p.jasper)for(let t=0;t<e.j_param.length;t++)(d=e.down("[name="+e.j_param[t]+"]"))&&(val=p.jasper[e.j_param[t]],d.setValue(val));p.otmpl&&a.store.loadData(p.otmpl),$.each(window.IExport,(function(t,a){a.extPanel&&(a.extPanel.opt=p,a.extPanel.ep=a,a.extPanel.pt_p=e)}))}},initComponent:function(){var e,t,a=this.instance,l=[{label:"Select Font",value:""},{label:"HELVETICA",value:"HELVETICA;CP1252"},{label:"STSong-Light",value:"STSong-Light;UniGB-UCS2-H"},{label:"KozMinPro-Regular",value:"KozMinPro-Regular;UniJIS-UCS2-H"},{label:"HYGoThic-Medium",value:"HYGoThic-Medium;UniKS-UCS2-H"}];for(this.title=IRm$.r1("T_EXPORT_WIZARD"),t=a.dlgLogin.logininfo.pdffonts,e=0;e<t.length;e++)l.push({label:t[e].substring(0,t[e].length-1),value:t[e]});$s.apply(this,{padding:ig$.padding,items:[{xtype:"panel",bodyBorder:!1,layout:"fit",fieldDefaults:{labelWidth:160},items:[{xtype:"tabpanel",name:"_mtab",activeTab:0,defaults:{padding:ig$.padding},items:[{title:IRm$.r1("L_EXP_MET"),xtype:"panel",layout:"anchor",items:[{xtype:"fieldset",layout:"vbox",title:IRm$.r1("L_EXP_MET_DESC"),items:[{xtype:"checkbox",name:"t_e1",boxLabel:IRm$.r1("L_EXPORT_EXCEL")},{xtype:"checkbox",name:"t_e2",boxLabel:IRm$.r1("L_EXPORT_PDF")},{xtype:"checkbox",name:"t_e3",boxLabel:IRm$.r1("L_EXPORT_CSV")},{xtype:"checkbox",name:"t_e4",boxLabel:IRm$.r1("L_EXPORT_HTML")},{xtype:"checkbox",name:"t_e5",boxLabel:IRm$.r1("L_EXPORT_OFFICE")}]}]},{title:IRm$.r1("L_GENERAL_OPTION"),defaultType:"textfield",layout:"anchor",defaults:{width:380},fieldDefaults:{labelWidth:55,anchor:"100%"},items:[{name:"repeatheader",fieldLabel:IRm$.r1("L_REPEAT_HEADER"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"headertitle",fieldLabel:IRm$.r1("L_TITLE"),xtype:"textfield"},{name:"pagenumber",fieldLabel:IRm$.r1("L_SHOW_PAGENUMBER"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"footertitle",fieldLabel:IRm$.r1("L_FOOTER"),xtype:"textfield"},{name:"alldata",fieldLabel:IRm$.r1("L_ALL_DATA"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"startpage",fieldLabel:IRm$.r1("L_PG_START"),xtype:"numberfield",value:1,minValue:1,maxValue:125},{name:"endpage",fieldLabel:IRm$.r1("L_PG_RANGE"),xtype:"numberfield",value:30,minValue:1,maxValue:30},{name:"filterdesc",fieldLabel:IRm$.r1("L_SHOW_FILTER_INFO"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1}]},{title:IRm$.r1("L_PAGE_OPTIONS"),defaultType:"textfield",layout:"anchor",defaults:{width:380},items:[{name:"layout",fieldLabel:IRm$.r1("L_PG_DIRECTION"),xtype:"radiogroup",plain:!0,items:[{boxLabel:IRm$.r1("L_VERTICAL"),name:"layouttype",inputValue:"portrait"},{boxLabel:IRm$.r1("L_HORIZONTAL"),name:"layouttype",inputValue:"landscape",checked:!0}]},{name:"pagesize",fieldLabel:IRm$.r1("L_PG_SIZE"),xtype:"combobox",labelAlign:"left",labelWidth:120,valueField:"value",displayField:"label",editable:!1,store:{fields:["label","value"],data:[{label:"A1",value:"A1"},{label:"A2",value:"A2"},{label:"A3",value:"A3"},{label:"A4",value:"A4"},{label:"A5",value:"A5"},{label:"B4",value:"B4"},{label:"B5",value:"B5"}]}},{name:"fontname",fieldLabel:IRm$.r1("L_FONT_SELECT"),xtype:"combobox",labelAlign:"left",labelWidth:120,valueField:"value",displayField:"label",editable:!1,store:{fields:["label","value"],data:l}},{name:"scaledown",fieldLabel:"",xtype:"checkbox",boxLabel:IRm$.r1("L_SCALE_DOWN"),checked:!1},{name:"setvertical",fieldLabel:"",xtype:"checkbox",boxLabel:IRm$.r1("L_ALIGN_VERTICAL"),checked:!1}]},{xtype:"panel",title:IRm$.r1("L_SHEET_OPTIONS"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_OVF_DESC")},{xtype:"gridpanel",name:"grdoption",store:{type:"store",fields:["docid","title","objtype","overflow","hidden"]},flex:1,columns:[{text:"ID",width:60,dataIndex:"docid"},{text:IRm$.r1("B_TITLE"),flex:1,dataIndex:"title"},{text:IRm$.r1("B_TYPE"),width:50,dataIndex:"objtype"},{xtype:"checkcolumn",text:IRm$.r1("B_OVERFLOW"),width:60,dataIndex:"overflow"},{xtype:"checkcolumn",text:IRm$.r1("B_HIDE"),width:60,dataIndex:"hidden"}]}]},{xtype:"panel",title:IRm$.r1("L_EXP_OFFICE"),name:"t_report",layout:{type:"vbox",align:"stretch"},defaults:{anchor:"100%"},items:[{fieldLabel:IRm$.r1("B_TEMPLATE"),xtype:"fieldcontainer",labelWidth:80,layout:"hbox",items:[{xtype:"textfield",name:"office_template",readOnly:!0},{xtype:"textfield",hidden:!0,name:"office_tmpl_uid"},{xtype:"textfield",hidden:!0,name:"office_tmpl_type"},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){var e=this,t=new IG$.jasper_template({instance:e.instance,_fopt:"office_files",callback:new IG$.callBackObj(e,(function(t){var a="";t&&t.length&&(a=t.items[0],e.down("[name=office_tmpl_uid]").setValue(a.get("uid")),e.down("[name=office_template]").setValue(a.get("name")),e.down("[name=office_tmpl_type]").setValue(a.get("type")))}))});IG$.showDlg(e,t)},scope:this},{xtype:"button",text:IRm$.r1("B_ADD"),handler:function(){var e,t=this,a=t.down("[name=office_tmpl_uid]"),l=t.down("[name=office_tmpl_type]"),n=t.down("[name=office_template]"),o=t.down("[name=grd_otmpl]"),i=t.down("[name=t_e5]"),d={uid:a.getValue(),type:l.getValue(),name:n.getValue()};i.setValue(!0),d.name.indexOf(".")>-1&&("docx"==(e=d.name.substring(d.name.lastIndexOf(".")+1))?d.export_type="pdf":"xlsx"!=e&&"xls"!=e||(d.export_type=e)),d.name&&(o.store.add(d),a.setValue(""),l.setValue(""),n.setValue(""))},scope:this}]},{xtype:"gridpanel",name:"grd_otmpl",flex:1,store:{fields:["name","type","uid","description","export_type"]},plugins:[{ptype:"cellediting",clicksToEdit:!0}],columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1},{text:IRm$.r1("B_DESC"),flex:1,dataIndex:"description",editor:{allowBlank:!0}},{text:IRm$.r1("L_EXPORT_TYPE"),flex:1,dataIndex:"export_type",editor:{allowBlank:!1}},{text:IRm$.r1("B_TYPE"),dataIndex:"type",width:50},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(e,t,a){e.store.getAt(t);e.store.removeAt(t)}}]}]},{xtype:"displayfield",value:"* For DOCX template, export as options could be docx / pdf / html / field (For Template)."}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.exportWizard.superclass.initComponent.apply(this,arguments)}});
IG$.statistics=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:500,height:440,_reqstat:function(){var e=this,t=new IG$._rpc$,n=e.report,i=e.activeview;t.init(e,{ack:"olapservice",payload:{uid:n.uid,option:"statistics",active:""+i.sheetindex,jobid:i.jobid},mbody:{}},e,(function(t){e._init(t)})),t.send()},_init:function(e){var t,n,i,a,s,o,r,p,d=this.down("[name=mainpanel]"),l=$(d.el.dom);if(l.empty(),l.css({"overflow-y":"scroll"}),n=$("<div class='idv-br-stable'></div>").appendTo(l),e)for(t=e.statistics,s=0;s<t.length;s++){if(!t[s])continue;if(a="",r=t[s].colindex+e.colfix,p=e.headers,e.rowfix>0&&p)for(o=0;o<e.rowfix;o++)a+=" "+(p[o].t[r]||p[o].c[r]);$("<span>Column "+r+"</span>&nbsp;&nbsp;: &nbsp;<span class='idv-br-stable-blue'>"+a+"</span><br>").appendTo(n);let d=$("<table style='width:100%'><colgroup><col span='1' style='width: 50%;'></col><col span='1' style='width: 50%;'></col></colgroup></table>").appendTo(n),l=$("<tbody></tbody>").appendTo(d),c=$("<tr></tr>").appendTo(l),y=$("<td></td>").appendTo(c),m=$("<table></table>").appendTo(y);$.each([{rname:"S_AVG",key:"average"},{rname:"S_STDERR",key:"stderr"},{rname:"S_MEDIAN",key:"median"},{rname:"S_STDEV",key:"stddev"},{rname:"S_VAR",key:"variance"},{rname:"S_KURT",key:"kurtosis"},{rname:"S_SKEW",key:"skewness"},{rname:"S_RAN",key:"ranges"},{rname:"S_MIN",key:"min"},{rname:"S_MAX",key:"max"},{rname:"S_SUM",key:"sum"},{rname:"S_COUNT",key:"count"}],(function(e,n){var a=t[s][n.key];""!==a&&null!=a||(a="N/A"),i=$("<tr></tr>").appendTo(m),th=$("<td>"+IRm$.r1(n.rname)+"</td>").appendTo(i),th=$("<td>"+a+"</td>").appendTo(i)}));let h=$("<td></td>").appendTo(c);if(t[s].frequencies&&t[s].frequencies.length){let e={xAxis:{type:"category",axisTick:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value"},series:[{data:t[s].frequencies,type:"bar"}]},n=$("<div style='width: 100%;height:250px;'></div>").appendTo(h);echarts.init(n[0]).setOption(e)}}},initComponent:function(){this.title=IRm$.r1("T_STATISTICS");$s.apply(this,{padding:ig$.padding,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:ig$.padding,items:[{xtype:"panel",name:"mainpanel",border:1,flex:1,autoScroll:!1,html:"",listeners:{resize:function(e){$(e.el.dom).css({"overflow-y":"scroll"})}}}]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._reqstat()}}}),IG$.statistics.superclass.initComponent.apply(this,arguments)}});
IG$.sortOptionDlg=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!1,width:580,height:440,_confirm:function(){this.commit_f(),this.callback&&this.callback.execute(),this.close()},init_f:function(){var e,t,o,r=this,a=r.sheetoption.model,s=a.sortoption||{},n=a.rows,i=a.measures,d=[],l=[],m=r.down("[name=sortpartition]"),c=r.down("[name=sortmeasure]"),u=r.down("[name=sortbyvalue]"),p=s.sortorder||[],h=r.down("[name=mgrid_src]"),b=r.down("[name=mgrid_tgt]"),g=[],f=[];for(d.push({name:IRm$.r1("B_DEFAULT"),uid:"",type:"",nodepath:""}),e=0;e<n.length;e++)d.push({name:n[e].name,uid:n[e].uid,type:n[e].type,nodepath:n[e].nodepath}),g.push({name:n[e].name,uid:n[e].uid,type:n[e].type,nodepath:n[e].nodepath,sortorder:n[e].sortorder||"",memo:"NUMBER"==n[e].memo||"VARCHAR"==n[e].memo?n[e].memo:"",numeric:"NUMBER"==n[e].memo,sorder:"asc"==n[e].sortorder?IRm$.r1("B_ASC"):"desc"==n[e].sortorder?IRm$.r1("B_DSC"):""});for(l.push({name:IRm$.r1("B_DEFAULT"),uid:"",type:"",nodepath:""}),e=0;e<i.length;e++)l.push({name:i[e].name,uid:i[e].uid,type:i[e].type,nodepath:i[e].nodepath});for(t=0;t<p.length;t++)for(e=g.length-1;e>=0;e--)if(g[e].uid==p[t].uid){(o=g[e]).sortorder=p[t].sortorder||"",o.sorder="asc"==o.sortorder?IRm$.r1("B_ASC"):"desc"==o.sortorder?IRm$.r1("B_DSC"):"",o.memo=p[t].datatype||"",o.numeric="NUMBER"==o.memo,f.push(o),g.splice(e,1);break}m.store.loadData(d),c.store.loadData(l),h.store.loadData(g),b.store.loadData(f),r.down("[name=sortmethod]").setValue({sm:s.sortmethod||"normal"}),r.down("[name=showlastrank]").setValue(s.showlastrank),r.down("[name=sortcount]").setValue(s.sortcount||5),r.down("[name=sortdimname]").setValue(s.sortdimname),c.setValue(s.sortmeasure),m.setValue(s.sortpartition),u.setValue(s.sortbyvalue),r.down("[name=sortothervalues]").setValue(s.sortothervalues)},changeSortMethod:function(){var e=this.down("[name=sortmethod]").getValue().sm,t=this.down("[name=rankfield]"),o=this.down("[name=customfield]");switch(e){case"normal":t.setVisible(!1),o.setVisible(!1);break;case"custom":t.setVisible(!1),o.setVisible(!0);break;case"top":case"bottom":t.setVisible(!0),o.setVisible(!1)}},commit_f:function(){var e,t,o,r,a,s=this,n=s.sheetoption.model,i=s.down("[name=mgrid_tgt]").store,d=n.rows,l=[];for(e=n.sortoption={},r=0;r<i.data.items.length;r++)for(o=(t=i.data.items[r]).get("uid"),a=0;a<d.length;a++)if(d[a].uid==o){switch(t.get("sorder")){case IRm$.r1("B_ASC"):d[a].sortorder="asc";break;case IRm$.r1("B_DSC"):d[a].sortorder="desc";break;default:d[a].sortorder=null}1==t.get("numeric")?d[a].memo="NUMBER":d[a].memo="VARCHAR",l.push({uid:d[a].uid,name:d[a].name,datatype:d[a].memo,sortorder:d[a].sortorder});break}e.sortorder=l,e.sortmethod=s.down("[name=sortmethod]").getValue().sm,e.showlastrank=s.down("[name=showlastrank]").getValue(),e.sortcount=s.down("[name=sortcount]").getValue(),e.sortmeasure=s.down("[name=sortmeasure]").getValue(),e.sortpartition=s.down("[name=sortpartition]").getValue(),e.sortbyvalue=s.down("[name=sortbyvalue]").getValue(),e.sortdimname=s.down("[name=sortdimname]").getValue(),e.sortothervalues=s.down("[name=sortothervalues]").getValue()},moveSelections:function(e){var t,o,r=this.down("[name=mgrid_"+(1==e?"src":"tgt")+"]"),a=this.down("[name=mgrid_"+(1==e?"tgt":"src")+"]"),s=r.getSelectionModel().selected;if(s&&s.length)for(t=0;t<s.length;t++)o=s.items[t],r.store.remove(o),a.store.add(o)},changeOrder:function(e){var t,o,r=this.down("[name=mgrid_tgt]"),a=r.getSelectionModel(),s=a.selected;s&&1==s.length&&(o=s.items[0],t=r.store.indexOf(o),-1==e?t>0&&(r.store.remove(o),o=r.store.insert(t-1,o),a.select(o,!0)):t+1<r.store.data.items.length&&(r.store.remove(o),o=r.store.insert(t+1,o),a.select(o,!0)))},initComponent:function(){this.title=IRm$.r1("L_SORT_OPTION");var e=this;$s.apply(this,{padding:ig$.padding,items:[{xtype:"panel",bodyBorder:!1,autoScroll:!0,layout:{type:"vbox",align:"stretch"},defaults:{anchor:"100%"},fieldDefaults:{labelWidth:160},items:[{xtype:"radiogroup",name:"sortmethod",fieldLabel:IRm$.r1("L_SORT_SEL"),columns:1,labelWidth:100,vertical:!0,items:[{boxLabel:IRm$.r1("B_DEFAULT"),name:"sm",inputValue:"normal"},{boxLabel:IRm$.r1("B_CUSTOM"),name:"sm",inputValue:"custom"},{boxLabel:IRm$.r1("L_RANK_TOP"),name:"sm",inputValue:"top"},{boxLabel:IRm$.r1("L_RANK_BOTTOM"),name:"sm",inputValue:"bottom"}],listeners:{change:function(t,o,r,a){e.changeSortMethod()}}},{xtype:"fieldset",name:"rankfield",border:0,hidden:!0,flex:1,fieldDefaults:{labelWidth:100},items:[{name:"sortcount",xtype:"numberfield",fieldLabel:IRm$.r1("L_RNK_CNT")},{name:"showlastrank",xtype:"checkbox",fieldLabel:IRm$.r1("L_RNK_LST")},{name:"sortmeasure",fieldLabel:IRm$.r1("L_RNK_VAL"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"uid",editable:!1,autoSelect:!0,store:{fields:["name","uid","type","nodepath"]}},{name:"sortpartition",fieldLabel:IRm$.r1("L_RNK_PAR"),xtype:"combobox",queryMode:"local",displayField:"name",valueField:"uid",editable:!1,autoSelect:!0,store:{fields:["name","uid","type","nodepath"]}},{name:"sortbyvalue",fieldLabel:IRm$.r1("L_RNK_SVAL"),xtype:"checkbox"},{name:"sortdimname",fieldLabel:IRm$.r1("L_RNK_D_NAME"),xtype:"textfield"}]},{xtype:"panel",name:"customfield",hidden:!0,border:0,flex:1,layout:{type:"hbox",align:"stretch"},items:[{xtype:"fieldset",flex:1,title:IRm$.r1("L_SORT_SRC"),layout:"fit",items:[{name:"mgrid_src",flex:1,xtype:"gridpanel",stateful:!0,$h:240,border:1,store:{fields:["name","uid","type","sortorder","sorder","memo","nodepath"]},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"gridDDGroup",dropGroup:"gridDDGroup"}},columns:[{header:IRm$.r1("B_NAME"),dataIndex:"name",sortable:!1,hideable:!1,flex:1},{header:IRm$.r1("B_TYPE"),dataIndex:"type",hidden:!0,sortable:!1,hideable:!1,flex:1}]}]},{xtype:"container",layout:{type:"vbox",align:"stretch",pack:"center",padding:ig$.padding},items:[{xtype:"container",flex:1},{xtype:"button",iconCls:"ig-btn-dblright",handler:function(){this.moveSelections(1)},scope:this},{xtype:"button",iconCls:"ig-btn-dblleft",handler:function(){this.moveSelections(2)},scope:this},{xtype:"container",flex:1}]},{xtype:"fieldset",flex:1,layout:{type:"hbox",align:"stretch"},title:IRm$.r1("L_SORT_ORD"),items:[{name:"mgrid_tgt",xtype:"gridpanel",stateful:!0,$h:240,flex:1,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{fields:["name","uid","type","nodepath","sortorder","sorder","memo","numeric"]},viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"gridDDGroup",dropGroup:"gridDDGroup"}},plugins:[{ptype:"cellediting",clicksToEdit:1}],seltype:"cellmodel",columns:[{header:IRm$.r1("B_NAME"),dataIndex:"name",sortable:!1,hideable:!1,flex:1},{header:IRm$.r1("B_TYPE"),dataIndex:"type",hidden:!0,sortable:!1,hideable:!1,flex:1},{header:IRm$.r1("B_METHOD"),dataIndex:"sorder",sortable:!1,hideable:!1,width:60},{header:IRm$.r1("B_NUMERIC"),xtype:"checkcolumn",dataIndex:"numeric",sortable:!1,hideable:!1,width:50}],listeners:{cellclick:function(e,t,o,r,a,s){if(3==o)switch(r.get("sorder")){case"":r.set("sorder",IRm$.r1("B_ASC"));break;case IRm$.r1("B_ASC"):r.set("sorder",IRm$.r1("B_DSC"));break;case IRm$.r1("B_DSC"):r.set("sorder","")}}}},{xtype:"container",layout:{type:"vbox",align:"stretch",pack:"center"},items:[{xtype:"container",flex:1},{xtype:"button",iconCls:"ig-btn-up",handler:function(){this.changeOrder(-1)},scope:this},{xtype:"button",iconCls:"ig-btn-down",handler:function(){this.changeOrder(1)},scope:this},{xtype:"container",flex:1}]}]}]},{xtype:"fieldset",title:IRm$.r1("L_OPTIONS"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",fieldLabel:IRm$.r1("L_OTHER_VALUES"),name:"sortothervalues"}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.sortOptionDlg.superclass.initComponent.apply(this,arguments)}});
IG$.filterMainEditor=$s.extend($s.panel,{layout:"fit",busy:!1,reportoption:null,sheetoption:null,confirmFilterSetting:function(){var e=this,n=e.rootnode;if(e.sheetoption){var t=e.sheetoption.model,i=t.filter,o=t.havingfilter;t.filter={ftype:"group",children:[]},t.havingfilter={ftype:"group",children:[]},(i||o)&&(i&&(t.filter.auth=i.auth,t.filter.active=i.active),o&&(t.havingfilter.auth=o.auth,t.havingfilter.active=o.active)),$.each(n.children,(function(n,i){var o=null;"WHERE"==i.condition?o=t.filter:"HAVING"==i.condition&&(o=t.havingfilter),i.children.length>0&&$.each(i.children,(function(n,t){e.updateFilterChanges(o,t)}))}))}},updateFilterChanges:function(e,n){var t=this;if("group"==n.nodetype){var i={ftype:"group",children:[]};i.name=n.name,i.conjunction=n.conjunction,e.children.push(i),n.children.length&&$.each(n.children,(function(e,n){t.updateFilterChanges(i,n)}))}else if("condition"==n.nodetype){var o=n.filternode.model;o.ftype="condition",o.conjunction=o.conjunction||"AND",e.children.push(o)}},getGroupRenderer:function(e,n,t){var i,o,r,l=$("<div class='filterbtn'></div>"),d=this,c=$("<div class='filterbtnitem icon-addfilter-group' title='Add SubGroup'>&nbsp;</div>"),a=(n.pid,$("<span>"+n.name+"</span>")),h=$("<input type='text'></input>"),p=$("<div class='filter-header'></div>"),s=!1;if(t.children.length>0){for(o=0;o<t.children.length;o++)if("group"==t.children[o].nodetype){s=!0;break}s&&(n.cblk=$("<div class='filter-condition filter-conjunction'>"+(n.conjunction||"AND")+"</div>").appendTo(t.htmlgrp),n.cblk.bind("click",(function(){"OR"==n.conjunction?n.conjunction="AND":n.conjunction="OR",n.cblk.text(n.conjunction)})))}n.html=$("<div class='filter-block'><div class='filter-block-cnt'></div></div>"),r=$(".filter-block-cnt",n.html),n.html.appendTo(t.htmlgrp),r.append(p),p.append(a),h.css({width:80,display:"none"}),p.append(h),p.append(l),l.append(c),n.html.draggable({revert:!0,handle:p,create:function(e,n){},drag:function(e,n){},start:function(e,n){},stop:function(e,n){}}),n.fnameeditor=h,n.fnamefield=a,a.bind("click",(function(){d.editName(n)})),h.bind("keypress",(function(e){13==e.keyCode&&d.endEditName(n)})),c.bind("click",(function(){n.children.length>0&&d.appendGroup(e,n)}));var f=$("<div class='filterbtnitem icon-addfilter-cond' title='Add Condition'>&nbsp;</div>");l.append(f),f.bind("click",(function(){d.appendCondition(e,n)}));var u=$("<div class='filterbtnitem icon-filter-remove' title='Delete Condition'>&nbsp;</div>");l.append(u),u.bind("click",(function(){d.deleteItem(n,t)})),n.htmlcond=$("<div class='filtercond'></div>"),i=$("<ul class='filtergroup'></ul>"),n.htmlgrp=$("<li></li>").appendTo(i),r.append(n.htmlcond),r.append(i)},getCondRenderer:function(e,n,t){var i=this,o=$("<div class='filterbtn'></div>");n.html=$("<li></li>"),t.htmlcond.append(n.html),n.html.append($("<div class='filter-conjunction'></div>"));var r=$("<div class='filtereditbtn'>"+n.name+"</div>");n.html.append(r);var l=$(".filter-conjunction",n.html);l.text(n.filternode.model.conjunction||"AND"),l.bind("click",(function(){"OR"==n.filternode.model.conjunction?n.filternode.model.conjunction="AND":n.filternode.model.conjunction="OR",l.text(n.filternode.model.conjunction)})),r.draggable({containment:e,helper:"clone",create:function(e,n){},drag:function(e,n){},start:function(e,n){},stop:function(e,o){var r,l,d=[o.offset.left,o.offset.top],c=i.rootnode;if((r=i.hitBoundary(c,d))&&"group"==r.nodetype){for(l=0;l<t.children.length;l++)if(t.children[l]==n){t.children.splice(l,1);break}r.children.push(n),r.htmlcond.append(n.html)}}}),n.deschtml=r,r.bind("click",(function(){i.editItem(n)})),n.html.append(o);var d=$("<div class='filterbtnitem icon-filter-remove' title='Delete Condition'>&nbsp;</div>");o.append(d),d.bind("click",(function(){i.deleteItem(n,t)}))},editName:function(e){var n=e.fnameeditor,t=e.fnamefield;t.css({display:"none"}),n[0].value=e.name,n.css({display:"inline",width:IG$.j$ext._w(t)||100})},endEditName:function(e){var n=e.fnameeditor,t=e.fnamefield,i=n[0].value;n.css({display:"none"}),t.css({display:"inline"}),e.name=i,t.text(e.name),this._refreshFilter()},appendGroup:function(e,n){var t={name:"Conditions",nodetype:"group",unode:n,children:[],filternode:null};return this.getGroupRenderer(e,t,n),n.children.push(t),this._refreshFilter(),t},appendCondition:function(e,n,t){var i,o=this,r=new IG$.clFilter(null),l=o.reportoption,d=o.sheetoption;d&&d.model&&d.model.cube_object?i=d.model.cube_object.uid:l&&l.cube_objects&&l.cube_objects.length>0&&(i=l.cube_objects[0].uid),r.operator=6;var c=new IG$.filterEditor({instance:o.instance,meta_type:o.meta_type,filteritem:r,reportoption:o.reportoption,targetitem:t,cubeuid:i,callback:new IG$.callBackObj(o,o.rs_appendCondition,[n,r,e])});IG$.checkLogin(this,c)},editItem:function(e){var n,t=this,i=t.sheetoption&&t.sheetoption.datasource?t.sheetoption.datasource.uid:null;e&&(n=new IG$.filterEditor({instance:t.instance,meta_type:t.meta_type,filteritem:e.filternode,reportoption:t.reportoption,cubeuid:i,callback:new IG$.callBackObj(t,t.rs_editCondition,[e,e.filternode])}),IG$.checkLogin(this,n))},rs_editCondition:function(e){var n,t=e[0],i=e[1];t&&(n=i.getDesc(),t.name=n,t.deschtml.text(t.name)),this._refreshFilter()},deleteItem:function(e,n){var t,i=0;if(e){for(t=0;t<n.children.length;t++)if(n.children[t]==e){n.children.splice(t,1);break}if(e.cblk&&e.cblk.remove(),e.cblk=null,e.html.remove(),n.children.length>0)for(t=0;t<n.children.length;t++)"group"==n.children[t].nodetype&&(0==i&&(n.children[t].cblk&&n.children[t].cblk.remove(),n.children[t].cblk=null),i++)}this._refreshFilter()},rs_appendCondition:function(e){var n=e[0],t=e[1],i=e[2];if(n){var o={unode:n,name:t.getDesc(),nodetype:"condition",filternode:t};this.getCondRenderer(i,o,n),n.children.push(o)}this._refreshFilter()},_init:function(){var e=this,n=e.sheetoption,t=n?n.model:null;e.filterview=e.down("[name=filterview]");var i=$(".igc-filter-el",e.filterview.body.dom);$(i).empty(),e.rootnode={},e.rootnode_w={},e.rootnode_h={},t&&(t.filter||(t.filter={ftype:"group",children:[]}),t.havingfilter||(t.havingfilter={ftype:"group",children:[]}),e.rootnode={name:"Conditions",nodetype:"rootgroup",children:[]},e.rootnode_w={name:"WHERE",nodetype:"rootgroup",condition:"WHERE",children:[]},e.rootnode_h={name:"HAVING",condition:"HAVING",nodetype:"rootgroup",children:[]},e.rootnode.children.push(e.rootnode_w),e.rootnode.children.push(e.rootnode_h),$.each(e.rootnode.children,(function(n,o){var r,l,d=$("<div class='filter-root'></div>"),c=$("<div class='filterbtn'></div>"),a=t.filter,h=t.havingfilter,p=$("<div class='filterbtnitem icon-addfilter-group' title='Add SubGroup'>&nbsp;</div>");if(d.appendTo(i),(r=o).html=$("<div class='filtercontainer'><div class='filter-header'><span class='filtertitle'>"+o.name+"</span></div></div>"),p.appendTo(c),$(".filter-header",r.html).append(c),l=$("<ul class='filtergroup'></ul>"),r.htmlgrp=$("<li></li>").appendTo(l),r.html.append(l),r.html.appendTo(d),p.bind("click",(function(){e.appendGroup(d,o)})),"WHERE"==o.condition){if(a&&a.children&&a.children.length){if("condition"==a.children[0].ftype){var s={ftype:"group",name:"Conditions",active:!0,children:[]};for(n=0;n<a.children.length;n++)s.children.push(a.children[n]);a.children=[s]}$.each(a.children,(function(n,t){e.makeFilterData(d,o,t)}))}}else if("HAVING"==o.condition&&h&&h.children&&h.children.length){if("condition"==h.children[0].ftype){s={ftype:"group",name:"Conditions",active:!0,children:[]};for(n=0;n<h.children.length;n++)s.children.push(h.children[n]);h.children=[s]}$.each(h.children,(function(n,t){e.makeFilterData(d,o,t)}))}})),e.targetitem&&setTimeout((function(){e.in$l()}),400))},in$l:function(){var e,n=this,t=n.sheetoption.filter,i=n.rootnode_w,o=n.targetitem,r=null;(e=t.findItem(o.uid))?n.editItem(e.id):(r=t.subGroups.length>0?i.children[0]:n.appendGroup(n.rootnode_w),n.appendCondition(r,o)),n._refreshFilter()},makeFilterData:function(e,n,t){var i,o,r=this;t.children&&t.children.length>1?n.htmlgrp.addClass("filter-multi-cond"):n.htmlgrp.removeClass("filter-multi-cond"),"condition"==t.ftype?(i=new IG$.clFilter(t),o={pnode:n,name:i.getDesc(),nodetype:"condition",filternode:i},r.getCondRenderer(e,o,n),n.htmlcond.append(o.html),n.children.push(o)):(o={name:t.name||"SubGroup",pnode:n,children:[],nodetype:"group",filternode:t},r.getGroupRenderer(e,o,n),n.children.push(o),t.children&&t.children.length&&$.each(t.children,(function(n,t){r.makeFilterData(e,o,t)}))),r._refreshFilter()},make_dropzone:function(e){var n=this;n.dropZone=$s.create($s.dropzone,e,{ddGroup:"_I$RD_G_",nodeouttimer:-1,getTargetFromEvent:function(n){return e},onNodeEnter:function(e,n,t,i){var o,r=!1;i.records&&i.records.length>0&&("Metric"!=(o=i.records[0].get("type"))&&"CustomMetric"!=o&&"Measure"!=o&&"FormulaMeasure"!=o||(r=!0)),this.accept=r},onNodeOut:function(e,n,t,i){},onNodeOver:function(e,n,t,i){var o=1==this.accept;return 1==this.accept&&(i.records&&i.records.length>0?i.records[0].data:i.cellData,t.xy),o},onNodeDrop:function(t,i,o,r){var l;return 1==this.accept&&(r.records&&r.records.length>0?(l=r.records[0],o.xy&&n.processFilterDrop(e,l,e,o.xy)):l=r.cellData),this.accept=!1,!0}})},hitBoundary:function(e,n){var t,i,o,r;for(o=0;o<e.children.length;o++)if((i=(t=e.children[o].html).offset()).left<n[0]&&n[0]<i.left+IG$.j$ext._w(t)&&i.top<n[1]&&n[1]<i.top+IG$.j$ext._h(t)){r=e.children[o],sobj=this.hitBoundary(e.children[o],n),sobj&&(r=sobj);break}return r},processFilterDrop:function(e,n,t,i){var o,r,l,d=this,c=d.rootnode;if(o=d.hitBoundary(c,i)){var a={};for(a.uid=n.get("uid"),a.name=n.get("name"),a.type=n.get("type"),a.contentfullpath=n.get("contentfullpath"),a.itemtype=a.type,r=o.unode;r;){if("rootgroup"==r.nodetype){l=r.condition;break}r=r.unode}if("Measure"!=a.type&&"FormulaMeasure"!=a.type&&"HAVING"==l)return;d.appendCondition(e,o,a)}d._refreshFilter()},render:function(){var e=this.down("[name=filterview]").body.dom;this.make_dropzone(e)},set_count:function(e){var n=this;n.count_seq=0,$.each(n.rootnode.children,(function(t,i){"WHERE"==i.condition&&n.update_count(i,e)}))},update_count:function(e,n){var t,i;for(t=0;t<e.length;t++)"group"==(i=e[t]).nodetype&&(n.length>me.count_seq?n[me.count_seq]:-1,me.count_seq++,i.children&&i.children.length&&me.update_count(i.children,n))},_refreshFilter:function(){var e=this,n=e.rootnode;n&&(n.children.length>0&&e._refFltSec(n.children[0],0),n.children.length>1&&e._refFltSec(n.children[1],0))},_refFltSec:function(e,n){var t,i=this;e.children&&e.children.length&&(t=e.children.length,$.each(e.children,(function(e,o){var r=0,l=$(".filter-conjunction",o.html);t>1&&e>0&&(r=1),l[r?"show":"hide"](),i._refFltSec(o,n+1)})))},initComponent:function(){$s.apply(this,{items:[{html:"<div class='igc-filter-el'></div>",name:"filterview",flex:1,autoScroll:!0}],listeners:{afterrender:function(){this.render()},resize:function(){}}}),IG$.filterMainEditor.superclass.initComponent.apply(this,arguments)}}),IG$.filterEditorWindow=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!1,width:500,height:400,confirmFilterSetting:function(){var e=this;e.mainpanel.confirmFilterSetting(),e.callback&&e.callback.execute(e.sheetoption),e.close()},initComponent:function(){var e=this;e.title=IRm$.r1("L_FILTER"),e.mainpanel=new IG$.filterMainEditor({instance:e.instance,reportoption:e.reportoption,sheetoption:e.sheetoption,targetitem:e.targetitem}),$s.apply(e,{items:[this.mainpanel],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this.confirmFilterSetting()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(n){e.mainpanel._init()}}}),IG$.filterEditorWindow.superclass.initComponent.apply(this,arguments)}});
IG$.objectAuth=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:560,height:400,_confirm:function(){this.updateAuthConfig()},updateAuthConfig:function(){var e,t,a,i=this,n=new IG$._rpc$,r=i.down("[name=updateall]").getValue(),d=i.down("[name=updateappend]").getValue(),o=i.down("[name=datagridview]").store.data.items;for(e={option:"update",updateall:r,updateappend:d,auths:[]},t=0;t<o.length;t++)a=o[t].data,e.auths.push({sid:a.sid,readable:a.readable,writable:a.writable,manage:a.manage,revoke_readable:a.revoke_readable,revoke_writable:a.revoke_writable});n.init(i,{ack:"authcontent",payload:{uid:this.uid,type:this.itemtype},mbody:e,meta_type:"auth_req"},i,i.rs_updateAuthConfig,null),n.send()},rs_updateAuthConfig:function(e){var t=this;IG$.alertmsg(ig$.appname,IRm$.r1("M_SUCCESS"),null,t,0,"success"),t.callback&&t.callback.execute(),t.close()},init_f:function(){if(this.uid){var e=this,t=new IG$._rpc$;t.init(e,{ack:"authcontent",payload:{uid:this.uid,type:this.itemtype},mbody:{option:"standard"}},e,e.rs__getAuthInfo,null),t.send()}},rs__getAuthInfo:function(e){var t,a,i;for(this.dataset=[],t=0;t<e.length;t++){switch((a=e[t]).dutytype){case"A":i=IRm$.r1("B_DEFAULT");break;case"C":i="Custom";break;case"G":i="Group";break;case"U":i="User";break;default:i="Unknown"}a.dutytype_d=i,"A"==a.dutytype&&a.sid.toLowerCase()==IG$.dutymap[0]||this.dataset.push(a)}this.down("[name=datagridview]").store.loadData(this.dataset)},initComponent:function(){var e,t=this.itemtype.toLowerCase(),a="folder"==t||"bobject"==t;this.title=IRm$.r1("T_OBJECT_AUTH"),e=[{text:IRm$.r1("B_NAME"),flex:1,sortable:!1,dataIndex:"name"},{text:IRm$.r1("B_TYPE"),width:60,dataIndex:"dutytype_d"},{xtype:"checkcolumn",text:IRm$.r1("B_READ"),width:50,sortable:!1,dataIndex:"readable",editor:{xtype:"checkbox"}},{xtype:"checkcolumn",text:IRm$.r1("B_WRITE"),width:50,sortable:!1,dataIndex:"writable",editor:{xtype:"checkbox"}}],a&&(e.push({xtype:"checkcolumn",text:IRm$.r1("L_REVOKE_READ"),width:80,sortable:!1,dataIndex:"revoke_readable",editor:{xtype:"checkbox"}}),e.push({xtype:"checkcolumn",text:IRm$.r1("L_REVOKE_WRITE"),width:80,sortable:!1,dataIndex:"revoke_writable",editor:{xtype:"checkbox"}})),$s.apply(this,{items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},border:!1,bodyPadding:ig$.padding,items:[{xtype:"displayfield",value:IRm$.r1("L_AU_TITLE")},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",labelWidth:80,name:"t_keyword",emptyText:IRm$.r1("L_SEARCH_KWD"),fieldLabel:IRm$.r1("B_SEARCH"),enableKeyEvents:!0,listeners:{keyup:function(e,t,a){13==t.keyCode&&IG$._dofilter(this,"datagridview",["name","type"],e)},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){IG$._dofilter(this,"datagridview",["name","type"],this.down("[name=t_keyword]"))},scope:this},{xtype:"container",flex:1}]},{xtype:"gridpanel",name:"datagridview",store:{fields:["name","readable","writable","manage","uid","nodepath","type","sid","dutytype_d","dutytype"]},flex:1,border:1,columns:e,listeners:{checkchange:function(e,t,a){switch(a){case"revoke_readable":t&&e.set("readable",!1),t&&e.set("writable",!1),t&&e.set("revoke_writable",!0);break;case"revoke_writable":t&&e.set("writable",!1);break;case"readable":t&&e.set("revoke_readable",!1),t&&e.set("revoke_writable",!1);break;case"writable":t&&e.set("revoke_readable",!1),t&&e.set("reovke_writable",!1),t&&e.set("readable",!0)}},scope:this}},{xtype:"container",height:10},{xtype:"container",layout:{type:"hbox",align:"stretch"},hidden:!a,items:[{name:"updateall",fieldLabel:IRm$.r1("B_OPTION"),xtype:"checkbox",boxLabel:IRm$.r1("L_AU_APPLY_SUB"),checked:!1},{name:"updateappend",xtype:"checkbox",boxLabel:IRm$.r1("L_AU_APPLY_APPEND"),checked:!1}]}]}],buttons:[{text:IRm$.r1("L_SUBSCRIBE"),hidden:!1!==ig$.features.ig_n_osubscr,handler:function(){var e,t=this;e=new IG$.objectSubscribe({instance:t.instance,uid:t.uid,itemtype:t.itemtype}),IG$.checkLogin(t,e)},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.objectAuth.superclass.initComponent.apply(this,arguments)}});
IG$.objectSubscribe=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:400,_confirm:function(){this.updateAuthConfig()},updateAuthConfig:function(){var t,e,i,a=this,n=new IG$._rpc$,s=!1,d=a.down("[name=updateall]"),o=a.down("[name=datagridview]").store.data.items;for(0==d.hidden&&1==d.getValue()&&(s=!0),t={option:"update_subscript",updateall:s,auths:[]},e=0;e<o.length;e++)i=o[e].data,t.auths.push({mtu:i.mtu,scid:i.scid,shared:1==i.shared});n.init(a,{ack:"authcontent",payload:{uid:this.uid,type:this.itemtype},mbody:t,meta_type:"auth_req"},a,a.rs_updateAuthConfig,null),n.send()},rs_updateAuthConfig:function(t){var e=this;IG$.alertmsg(ig$.appname,IRm$.r1("M_SUCCESS"),null,e,0,"success"),e.callback&&e.callback.execute(),e.close()},init_f:function(){if(this.uid){var t=this,e=new IG$._rpc$;e.init(t,{ack:"authcontent",payload:{uid:t.uid,type:t.itemtype},mbody:{option:"subscription"}},t,(function(t){var e;for(e=0;e<t.length;e++)t[e].shared=t[e].scid&&t[e].scid.length>0;this.dataset=t,this.down("[name=datagridview]").store.loadData(this.dataset)}),null),e.send()}},initComponent:function(){var t=this,e=t.itemtype.toLowerCase(),i="folder"==e||"userdb"==e;t.title=IRm$.r1("T_SUBSCR_AUTH"),$s.apply(t,{items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},border:!1,padding:ig$.padding,items:[{xtype:"displayfield",value:IRm$.r1("L_AU_TITLE")},{xtype:"gridpanel",name:"datagridview",store:{fields:[]},flex:1,columns:[{text:IRm$.r1("B_TENANT"),flex:1,dataIndex:"mtname"},{xtype:"checkcolumn",text:IRm$.r1("L_SHARED"),width:50,sortable:!1,dataIndex:"shared",editor:{xtype:"checkbox"}}]},{name:"updateall",fieldLabel:IRm$.r1("B_OPTION"),xtype:"checkbox",boxLabel:IRm$.r1("L_AU_APPLY_SUB"),checked:!1,hidden:!i}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(t){this.init_f()}}}),IG$.objectSubscribe.superclass.initComponent.apply(this,arguments)}});
IG$.workspace_switcher=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:380,autoHeight:!0,loadMTS:function(){var e=this,t=e.down("[name=mkw]"),n=new IG$._rpc$;n.init(e,{ack:"usercontent",payload:{address:"/tenants",action:"get",keyword:t.getValue()},mbody:{option:"select"}},e,(function(e){var t,n,s=[];if(e)for(t=0;t<e.length;t++)("1"==(n=e[t]).status||"A"==n.status)&&s.push(n);this.down("[name=mtsgrd]").store.loadData(s)}),!1),n.send()},confirm:function(){var e=this,t=e.down("[name=mtsgrd]").getSelectionModel().selected;t&&t.length?IG$.confirmMessages(IRm$.r1("B_CONFIRM"),IRm$.r1("L_SWA_CFM"),(function(e){if("yes"==e){var n=t.items[0],s=n.get("uid"),a=(n.get("name"),document.location.href);a.indexOf("?")>-1&&(a=a.substring(0,a.indexOf("?"))),a=a+"?lang="+(window.useLocale||"en_US")+"&mts="+s,document.location.href=a}}),e,e):IG$.alertmsg(ig$.appname,IRm$.r1("E_SWA_CFM"),null,null,0,"error")},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_SW_APP"),items:[{xtype:"panel",bodyPadding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:"hbox",items:[{xtype:"textfield",labelAlign:"right",fieldLabel:IRm$.r1("B_SEARCH"),name:"mkw",labelWidth:60,width:200,emptyText:IRm$.r1("L_SEARCH_KWD"),enableKeyEvents:!0,listeners:{keyup:function(e,t,n){13==t.keyCode&&this.loadMTS()},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){this.loadMTS()},scope:this}]},{xtype:"gridpanel",hideHeaders:!0,name:"mtsgrd",height:150,store:{xtype:"store",fields:["name","uid"]},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this.confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.workspace_switcher.superclass.initComponent.apply(this,arguments)}}),IG$.passwordMgr=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!1,width:380,autoHeight:!0,parentnodepath:null,itemtype:null,parentuid:null,callback:null,processChangePasswd:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"security",payload:{},mbody:{}},e,e.rs_getSecureKey,null),t.send()},rs_getSecureKey:function(e){var t=this.instance;e&&(p1=e.p1,p2=e.p2,p1&&p2&&(t.rsaPublicKeyModules=p1,t.rsaPublicKeyExpoenent=p2,t.rsa_kinfo=e.p3,this.postSecurityKey()))},postSecurityKey:function(){var e,t,n=this,s=n.instance,a=n.inputpanel,i=a.down("[name=oldpasswd]").getValue(),l=a.down("[name=newpasswd1]").getValue(),o=a.down("[name=newpasswd2]").getValue();n.getAllValues({})||(l==o?(i=(e=IG$.encryptKey(s,[i,l]))[0],l=e[1],(t=new IG$._rpc$).init(n,{ack:"usercontent",payload:{address:"/user",keyvar:s.rsa_kinfo},mbody:{option:"changepassword",password:l,oldpassword:i}},n,n.rs_processChangePasswd,null),t.send()):IG$.alertmsg(ig$.appname,IRm$.r1("M_PASS_MISMATCH"),null,null,1,"error"))},rs_processChangePasswd:function(e){var t=this;t.callback&&t.callback.execute(),t.close()},initComponent:function(){this.title=IRm$.r1("T_PASSWORD_CHANGE"),$s.apply(this,{padding:ig$.padding,items:[{html:IRm$.r1("L_PWD_LABEL"),flex:1,border:0,height:40},{xtype:"panel",name:"passwordform",defaultType:"textfield",fieldDefaults:{labelWidth:150,anchor:"100%"},layout:"anchor",items:[{name:"oldpasswd",fieldLabel:IRm$.r1("L_PWD_OLD"),xtype:"textfield",inputType:"password",allowblack:!1,labelWidth:150,required:!0},{name:"newpasswd1",fieldLabel:IRm$.r1("L_PWD_NEW"),xtype:"textfield",inputType:"password",allowblack:!1,labelWidth:150,required:!0},{name:"newpasswd2",fieldLabel:IRm$.r1("L_PWD_CONFIRM"),xtype:"textfield",inputType:"password",allowblack:!1,labelWidth:150,required:!0}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this.processChangePasswd()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){e.inputpanel=e.down("[name=passwordform]")}}}),IG$.passwordMgr.superclass.initComponent.apply(this,arguments)}});
IG$.userpref=$s.extend($s.window,{modal:!0,layout:"fit",closable:!0,resizable:!1,width:500,autoHeight:!0,_confirm:function(){var e=this,a=new IG$._rpc$,t=e.getFormatString();grdtz=e.down("[name=grdtz]"),dtz=e.dtz,e.tzloaded&&grdtz.getSelectionModel().selected.length>0&&(dtz=grdtz.getSelectionModel().selected.items[0].get("id")),a.init(e,{ack:"usercontent",payload:{address:"/user"},mbody:{option:"_gu_",uid:e.uuid,dtz:dtz,dfrm:t,a1:e.down("[name=a1]").getValue(),a2:e.down("[name=a2]").getValue()}},e,(function(e){this.close()})),a.send()},loadConfig:function(){var e=this,a=e.instance,t=new IG$._rpc$,n=e.uuid||a.dlgLogin.logininfo.sid;e.uuid=n,t.init(e,{ack:"usercontent",payload:{address:"/user"},mbody:{option:"_gi_",uid:n,tmpl:IG$.__ep?"sys_print_mode":""}},e,e.rs_loadConfig),t.send()},rs_loadConfig:function(e){var a=this,t=e.userdetail,n=t?t.dfrm:"";n=n.replace(/\\&apos;/g,"'"),$s.defaults(a,{dzt:t.dtz,a1:t.a1,a2:t.a2}),a.down("[name=a1]").setValue(a.a1),a.down("[name=a2]").setValue(a.a2),a.updateForm(n)},updateForm:function(e){var a,t,n,l,d,o,i,m=this,r=m.down("[name=f_order]"),s=m.down("[name=f_year]"),u=m.down("[name=f_month]"),f=m.down("[name=f_day]"),_=m.down("[name=f_ampm]"),y=(m.down("[name=f_timezone]"),m.down("[name=f_datesep]")),c=m.down("[name=f_timesep]"),p=m.down("[name=f_wkday]"),b=m.down("[name=f_weekday]"),x=m.down("[name=f_wkdayod]");t=e.indexOf("y"),n=e.indexOf("M"),(l=e.indexOf("d"))<n&&n<t?(a="DMY",o=n):t<n&&n<l?(a="YMD",o=n):n<l&&l<t&&(a="MDY",o=l),d=e.charAt(o-1),y.setValue(d),r.setValue(a||"YMD"),i=e.substring(t,e.lastIndexOf("y")+1),t>0&&"'"==e.charAt(t-1)&&(i="''"+i),s.setValue(i),u.setValue(e.substring(n,e.lastIndexOf("M")+1)),f.setValue(e.substring(l,e.lastIndexOf("d")+1)),a=(t=e.indexOf("E"))>-1?e.substring(t,e.lastIndexOf("E")+1):"EEEE",b.setValue(a),0==t&&x.setValue(!0),p.setValue(t>-1),t=e.indexOf("a"),_.setValue(t>-1),d=e.charAt(e.indexOf("m")-1),c.setValue(d)},loadTimeZone:function(){var e=this,a=new IG$._rpc$;a.init(e,{ack:"helpcontent",payload:{},mbody:{option:"timezone"}},e,e.rs_loadTimeZone),a.send()},rs_loadTimeZone:function(e){var a,t,n,l=this,d=[],o=l.down("[name=grdtz]"),i=l.down("[name=a1]");l.down("[name=a2]");if(a=e?e.timezone:null)for(t=0;t<a.length;t++)(n=a[t]).oh=n.offset/36e5;if(a=e?e.app_tmpl:null,d.push({name:IRm$.r1("B_SELECT"),value:""}),a)for(t=0;t<a.length;t++)"sys_"==(n=a[t]).name.substring(0,4)?a.splice(t,1):d.push(n);for(i.store.loadData(d),i.setValue(l.a1||""),l.tzloaded=!0,o.store.loadData(e.timezone),t=0;t<o.store.data.items.length;t++)if((n=o.store.data.items[t]).get("id")==l.dtz){o.getSelectionModel().select(n);break}},getFormatString:function(){var e,a,t,n,l,d=this,o=d.down("[name=f_order]"),i=d.down("[name=f_year]"),m=d.down("[name=f_month]"),r=d.down("[name=f_day]"),s=d.down("[name=f_ampm]"),u=d.down("[name=f_timezone]"),f=d.down("[name=f_datesep]"),_=d.down("[name=f_timesep]"),y=d.down("[name=f_wkday]"),c=d.down("[name=f_weekday]"),p=d.down("[name=f_wkdayod]");switch(t=i.getValue(),n=m.getValue(),a=r.getValue(),l=s.getValue()?"hh":"HH",o.getValue()){case"DMY":e=[a,n,t];break;case"YMD":e=[t,n,a];break;case"MDY":e=[n,a,t]}return e=e.join(f.getValue()),y.getValue()&&(e=p.getValue()?c.getValue()+" "+e:e+" "+c.getValue()),e+=" "+[l,"mm","ss"].join(_.getValue()),e+=s.getValue()?" a":"",e+=u.getValue()?", z":""},initComponent:function(){var e=this;e.title=IRm$.r1("L_PREFERENCES"),$s.apply(this,{items:[{xtype:"tabpanel",minHeight:400,minTabWidth:120,deferredRender:!1,defaults:{bodyPadding:ig$.padding},items:[{xtype:"form",title:IRm$.r1("L_DATE_FORMAT"),deferredRender:!1,layout:"anchor",items:[{xtype:"combobox",queryMode:"local",editable:!1,fieldLabel:IRm$.r1("L_DF_OS"),name:"f_order",valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"Day Month Year",value:"DMY"},{name:"Year Month Day",value:"YMD"},{name:"Month Day Year",value:"MDY"}]}},{xtype:"combobox",queryMode:"local",editable:!1,fieldLabel:IRm$.r1("L_DF_YF"),name:"f_year",valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"2009",value:"yyyy"},{name:"09",value:"yy"},{name:"'09",value:"''yy"}]}},{xtype:"combobox",queryMode:"local",editable:!1,name:"f_month",fieldLabel:IRm$.r1("L_DF_MF"),valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"1",value:"M"},{name:"01",value:"MM"},{name:"January",value:"MMMMM"},{name:"Jan",value:"MMM"}]}},{xtype:"combobox",queryMode:"local",editable:!1,name:"f_day",fieldLabel:IRm$.r1("L_DF_DF"),valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"1",value:"d"},{name:"01",value:"dd"}]}},{xtype:"combobox",queryMode:"local",editable:!1,name:"f_weekday",fieldLabel:IRm$.r1("L_DF_WF"),valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"Monday",value:"EEEE"},{name:"Mon",value:"EEE"},{name:"Mo",value:"EE"},{name:"M",value:"E"}]}},{xtype:"fieldset",title:IRm$.r1("L_OPTIONS"),items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_DF_APM"),name:"f_ampm",boxLabel:IRm$.r1("B_SHOW")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_DF_WD"),name:"f_wkday",boxLabel:IRm$.r1("B_SHOW")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_DF_WD_O"),name:"f_wkdayod",boxLabel:IRm$.r1("L_SHOW_FIRST")},{xtype:"checkbox",name:"f_timezone",fieldLabel:IRm$.r1("L_TIMEZONE"),boxLabel:IRm$.r1("L_SHOW_TZ")},{xtype:"combobox",queryMode:"local",fieldLabel:IRm$.r1("L_DF_DS"),name:"f_datesep",editable:!1,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:". (dot)",value:"."},{name:": (colon)",value:":"},{name:", (comma)",value:","},{name:"- (hypen)",value:"-"},{name:"/ (slash)",value:"/"},{name:"  (non)",value:""}]}},{xtype:"combobox",queryMode:"local",fieldLabel:IRm$.r1("L_DF_TS"),name:"f_timesep",editable:!1,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:": (colon)",value:":"},{name:". (dot)",value:"."},{name:", (comma)",value:","},{name:"- (hypen)",value:"-"},{name:"  (non)",value:""}]}}]}]},{xtype:"form",title:IRm$.r1("L_TIMEZONE"),deferredRender:!1,layout:"fit",items:[{xtype:"gridpanel",name:"grdtz",maxHeight:380,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},store:{xtype:"store",fields:["name","offset","id","oh","select"]},columns:[{text:IRm$.r1("B_ID"),dataIndex:"id",flex:1},{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1},{text:IRm$.r1("L_TZ_OFFSET"),dataIndex:"oh"}]}],listeners:{afterrender:function(){e.loadTimeZone()}}},{xtype:"form",title:IRm$.r1("L_APPL"),deferredRender:!1,layout:"anchor",items:[{xtype:"combobox",name:"a1",fieldLabel:IRm$.r1("L_APPL_TMPL"),labelWidth:120,queryMode:"local",editable:!1,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"]}},{xtype:"combobox",name:"a2",fieldLabel:IRm$.r1("L_APPL_THEME"),labelWidth:120,queryMode:"local",editable:!1,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"]}}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]}),IG$.userpref.superclass.initComponent.call(this)},listeners:{afterrender:function(e){e.loadConfig()}}});
IG$.formulas={t_sum:{name:"t_sum",title:"Subtotal",lcs:"F_STOT",expr:"SUM",grp:"aggr"},t_avg:{name:"t_avg",title:"Average",lcs:"F_AVG",expr:"AVG",grp:"aggr"},t_min:{name:"t_min",title:"Minimum",lcs:"F_MIN",expr:"MIN",grp:"aggr"},t_max:{name:"t_max",title:"Maximum",lcs:"F_MAX",expr:"MAX",grp:"grp"},t_pot:{name:"t_pot",title:"Percent of total",lcs:"F_P_POT",usecolumnformat:!1,formatstring:"#,##0.00 %",expr:"PERCENT_OF_TOTAL",grp:"pcnt"},t_pot_column:{name:"t_pot_column",title:"Percent of column total",lcs:"F_P_POT_COL",usecolumnformat:!1,formatstring:"#,##0.00 %",expr:"PERCENT_OF_COLUMN_TOTAL",grp:"pcnt"},t_cumul:{name:"t_cumul",title:"Cumulative Percentage",lcs:"F_P_CUM",usecolumnformat:!1,formatstring:"#,##0.00 %",expr:"CUMUL_PERCENT",grp:"pcnt"},t_incr:{name:"t_incr",title:"Incremental",lcs:"F_INC",expr:"INCR",grp:"pcnt"},t_diff:{name:"t_diff",title:"Difference",lcs:"F_DIFF",expr:"DIFF",grp:"pcnt"},t_rank:{name:"t_rank",title:"Ranking",lcs:"F_RNK",expr:"RANK",grp:"pcnt"},t_stdev:{name:"t_stdev",title:"Standard Deviation",lcs:"F_STDEV",expr:"STDEV",grp:"stat",usecolumnformat:!1,formatstring:"#,##0.00"},t_stdevp:{name:"t_stdevp",title:"Standard Deviation P",lcs:"F_STDEVP",expr:"STDEVP",grp:"stat",usecolumnformat:!1,formatstring:"#,##0.00"},t_percentile:{name:"t_percentile",title:"Percentile",lcs:"F_PERCENTILE",expr:"PERCENTILE",grp:"stat",params:[{name:"k",type:"float"}],usecolumnformat:!1,formatstring:"#,##0.00"},t_percentile_exe:{name:"t_percentile_exe",title:"Percentile Excel",lcs:"F_PERCENTILE_EXE",expr:"PERCENTILE_EXE",grp:"stat",params:[{name:"k",type:"float"}],usecolumnformat:!1,formatstring:"#,##0.00"}},IG$.dlgFormulaSelector=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:650,height:440,sheetindex:-1,init_f:function(){var e,t=this,a=[],l=t.down("[name=grddata]"),n=t.down("[name=grddata_sel]"),i=[],o=IG$.formulas,r=(t.sheetoption,t.formulas),s=t.uitem;if(t.down("[name=fgroup]").setValue(""),s){for($.each(o,(function(e,t){var l=IG$.copyObject(t),n=t.lcs?IRm$.r1(t.lcs):null;l.title=n||l.title,a.push(l)})),l.store.loadData(a),e=0;e<r.length;e++)r[e].baseuid==s.uid&&i.push(r[e]);n.store.loadData(i)}},_confirm:function(){var e,t=this,a=t.down("[name=grddata_sel]").store,l=t.sheetoption,n=[];if(l.si=l.si||0,!t._lprop||t.confirmProperty()){for(let t=0;t<a.data.items.length;t++)(e=a.data.items[t].data).fid="formula_"+l.si++,n.push(e);t.__dloaded=!1,t.callback&&t.callback.execute(n),t.close()}},addFormula:function(e){var t,a,l,n,i,o=this,r=o.down("[name=grddata]"),s=o.down("[name=grddata_sel]"),m=o.sheetoption,c=IG$.formulas,d=[];m.si=m.si||0;for(let r=0;r<e.length;r++)l={title:(t=e.items[r]).get("title"),expression:t.get("expr"),baseuid:o.uitem.uid},i=t.get("name"),l.direction="vertical",l.formatstring="",l.stylename=null,l.separatecolumn=!0,l.subtotalbase=null,l.usecolumnformat=!0,l.showtoprow=!1,l.groupresults=!1,l.fid="formula_"+m.si++,(n=c[i])&&(void 0!==n.usecolumnformat&&(l.usecolumnformat=n.usecolumnformat),void 0!==n.formatstring&&(l.formatstring=n.formatstring)),a=s.store.add(l),d.push(a);d.length&&o.configItem(d[d.length-1]),r.clearSelection()},configItem:function(e){var t=this,a=new IG$.dlgFormulaConfig({instance:t.instance,rec:e,sheetoption:t.sheetoption,uitem:t.uitem});IG$.checkLogin(t,a)},initComponent:function(){var e=this;e.title=IRm$.r1("T_FM_SEL"),IG$.apply(this,{items:[{xtype:"container",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",height:20,value:IRm$.r1("L_DYN_SELECT")},{xtype:"container",layout:{type:"hbox",align:"stretch"},flex:1,items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},width:300,items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_FORMULA_GROUP"),displayField:"name",name:"fgroup",valueField:"value",store:{xtype:"store",fields:["name","value"],data:[{name:"All Formula",value:""},{name:"Mostly used",value:"aggr"},{name:"Percentage",value:"pcnt"},{name:"Statistics",value:"stat"}]},listeners:{change:function(e){var t=e.getValue(),a=this.down("[name=grddata]");t?a.store.filter("grp",t):a.store.clearFilter()},scope:this}},{xtype:"gridpanel",name:"grddata",store:{xtype:"store",fields:["sel","name","title","expr"]},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},flex:1,columns:[{text:IRm$.r1("B_NAME"),dataIndex:"title",flex:1}]}]},{xtype:"container",width:30,layout:{type:"vbox",align:"middle"},items:[{xtype:"container",flex:1},{xtype:"button",text:" > ",height:25,handler:function(){var e=this.down("[name=grddata]").getSelectionModel().selected;this.addFormula(e)},scope:this},{xtype:"container",flex:1}]},{xtype:"panel",border:0,layout:{type:"vbox",align:"stretch"},title:IRm$.r1("L_DYN_SELECT"),flex:1,items:[{xtype:"container",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grddata_sel",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{xtype:"store",fields:["sel","name","title","baseuid","direction","stylename","expression","type","fid","formatstring","showtoprow","groupresults","quart","k"]},flex:1,columns:[{text:IRm$.r1("B_TITLE"),dataIndex:"title",flex:1},{text:IRm$.r1("L_EXPRESSION"),dataIndex:"expression",width:120},{xtype:"actioncolumn",width:70,items:[{iconCls:"icon-grid-config",handler:function(e,t,a,l){this.configItem(l)},scope:this},{iconCls:"icon-grid-delete",handler:function(e,t,a,l){e.store.remove(l)},scope:this}]}]}]}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(t){e.init_f()}}}),IG$.dlgFormulaSelector.superclass.initComponent.apply(this,arguments)}}),IG$.dlgFormulaConfig=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:400,height:500,padding:ig$.padding,callback:null,params:["title","showtoprow","groupresults","usecolumnformat","formatstring","direction","separatecolumn","expression","display_template"],configItem:function(e){var t,a,l,n,i=this,o=IG$.formulas,r=i.params,s=i.sheetoption;if($.each(o,(function(t,a){if(a.expr==e.get("expression"))return a,!1})),"M_DATA"==s.model.dataquerymode){var m,c=[],d=i.down("[name=group_columns]"),p=e.get("group_columns")||[],u={};for(t=0;t<p.length;t++)u[p[t]]=1;for(t=0;t<s.model.rows.length;t++)(m=s.model.rows[t]).uid!=i.uitem.uid&&c.push({uid:m.uid,name:m.locale_name||m.name,title:m.title,selected:!!u[m.uid]});d.store.loadData(c)}for(t=0;t<r.length;t++)a=r[t],l=e.get(a),(n=i.down("[name="+a+"]"))&&n.setValue&&("display_template"==a&&(l=l||"{value}"),n.setValue(l))},confirmProperty:function(){var e,t,a,l,n,i=this,o=i.rec,r=i.params,s=[];if(r){for(l=0;l<r.length;l++){if(a=r[l],t=(e=i.down("[name="+a+"]")).getValue(),e.clearInvalid(),e.required&&!t)return e.markInvalid("Required Field"),0;o.set(a,t)}for(n=i.down("[name=group_columns]"),gsel=n.getSelectionModel().selected,l=0;l<gsel.length;l++)s.push(gsel.items[l].get("uid"));o.set("group_columns",s)}i.callback&&i.callback.execute(),i.close()},initComponent:function(){var e=IG$.formulas,t=[],a="M_DATA"==this.sheetoption.model.dataquerymode;$.each(e,(function(e,a){var l=IG$.copyObject(a);t.push(l)})),IG$.apply(this,{title:IRm$.r1("T_FM_SEL_CONFIG"),items:[{xtype:"container",name:"_prop",padding:ig$.padding,autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{name:"title",fieldLabel:IRm$.r1("B_TITLE"),xtype:"textfield",required:1},{name:"expression",xtype:"combobox",fieldLabel:IRm$.r1("L_EXPRESSION"),valueField:"expr",displayField:"title",store:{fields:["name"],data:t}},{name:"display_template",fieldLabel:IRm$.r1("L_DISP_TEMPLATE"),hidden:a,xtype:"textfield"},{xtype:"checkbox",name:"showtoprow",fieldLabel:IRm$.r1("L_S_TROW")},{xtype:"checkbox",name:"groupresults",fieldLabel:IRm$.r1("L_S_GRST")},{xtype:"checkbox",name:"usecolumnformat",fieldLabel:" ",boxLabel:IRm$.r1("L_USE_COL_FORMAT")},{name:"formatstring",xtype:"textfield",fieldLabel:IRm$.r1("L_FORMAT")},{name:"direction",xtype:"combobox",hidden:a,fieldLabel:IRm$.r1("L_C_DIR"),displayField:"name",valueField:"value",store:{fields:["name","value"],data:[{name:IRm$.r1("L_VERTICAL"),value:"vertical"},{name:IRm$.r1("L_HORIZONTAL"),value:"horizontal"}]}},{name:"separatecolumn",xtype:"checkbox",hidden:a,fieldLabel:IRm$.r1("L_SEP_COL")},{xtype:"gridpanel",height:200,hidden:!a,name:"group_columns",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this.confirmProperty()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.configItem(this.rec)}}}),IG$.dlgFormulaConfig.superclass.initComponent.apply(this,arguments)}});
IG$.dynFilter=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:450,height:400,sheetoption:null,sheetindex:-1,callback:null,doSearch:function(){var e=this,t=e.filteritem,i=(t.model,t?t.data:null);i&&1e3==i.length||IG$._dofilter(e,"grddata",["value","disp","code","name"],e.down("[name=_filter]"))},init_f:function(){var e=this,t=e.hfilter,i=e.reqItem,n=e.filteritem;if(n||i){if(n&&n.validated&&n.data&&n.data.length)return void e._updGrid(n.data);if(!1===t)return;e._reqData()}},_reqData:function(){var e=this,t=e.filteritem,i=e.reqItem,n=t?t.model:null,a=e.hfilter,l=[],o={items:[]},d=n?n.type:null;if(i?(l.push({name:i.name,uid:i.uid,objtype:i.objtype,nodepath:i.nodepath,rptid:i.uid}),o.items.push({uid:i.uid,hfilter:a})):"prompt"==d?(t.validate=!0,t.data=[],n.codemapping&&n.codemapping.uid?(l.push({uid:n.codemapping.uid,type:n.type,rptid:n.codemapping.uid}),o.items.push({uid:n.codemapping.uid,cmap:n.codemapping,hfilter:a})):n.pvalues&&(t.data=e.getPvalue(t),e.updateFilterValue(filteritems[undefined]))):(l.push({name:n.name,uid:n.uid,objtype:n.objtype,nodepath:n.nodepath,rptid:n.uid}),o.items.push({uid:n.uid,cmap:n.codemapping,hfilter:a})),l.length){var s=new IG$._rpc$;o.option="ValueInfo",s.init(e,{ack:"olapservice",payload:l,mbody:o,meta_type:"valueinfo"},e,(function(i){var n=IG$.parseValueList(i.value_results),a=[];n&&n.length&&(a=n[0].data),i.erroritems&&i.erroritems.length&&$.each(i.erroritems,(function(t,i){IG$.ShowErrorMessage(i,e,null)})),t&&(t.validated=!0,t.data=a),e._updGrid(a)})),s.send()}},_updGrid:function(e){var t,i=this,n=i.down("[name=grddata]"),a=[],l={},o=i.filteritem,d=(i.reqItem,i.reqView),s=o?o.selection:d?d.selection:null;if(n.store.loadData(e),s&&s.length>0)for(let e=0;e<s.length;e++)l[s[e].code]=s[e];for(let e=0;e<n.store.data.items.length;e++)l[(t=n.store.data.items[e]).get("code")]&&a.push(t);n.select(a)},_confirm:function(){var e=this,t=e.down("[name=grddata]").getSelectionModel().selected;e.__dloaded=!1,e.callback&&e.callback.execute(t),e.close()},initComponent:function(){var e=this,t=[],i=ig$.valueselect?ig$.valueselect.width:null;switch(e.title=IRm$.r1("T_DYN_SELECT"),e.smode=e.smode||"codevalue",e.smode){case"code":t.push({text:IRm$.r1("B_CODE"),dataIndex:"code",flex:1});break;case"value":t.push({text:IRm$.r1("B_VALUE"),dataIndex:"disp",flex:1});break;case"valuecode":t.push({text:IRm$.r1("B_VALUE"),dataIndex:"disp",flex:1}),t.push({text:IRm$.r1("B_CODE"),dataIndex:"code",flex:i?null:1,width:i||null});break;default:t.push({text:IRm$.r1("B_CODE"),dataIndex:"code",flex:i?null:1,width:i||null}),t.push({text:IRm$.r1("B_VALUE"),dataIndex:"disp",flex:1})}$s.apply(this,{items:[{xtype:"container",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",fieldLabel:IRm$.r1("B_SEARCH"),name:"_filter",labelWidth:60,flex:1,emptyText:IRm$.r1("L_SEARCH_KWD"),enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&this.doSearch()},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){this.doSearch()},scope:this}]},{xtype:"gridpanel",name:"grddata",selModel:e.selModel,flex:1,store:{xtype:"store",fields:["code","value"]},flex:1,columns:t}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(t){e.init_f()}}}),IG$.dynFilter.superclass.initComponent.apply(this,arguments)}}),IG$.dynfilterFileLoader=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:450,height:480,sheetoption:null,sheetindex:-1,callback:null,init_f:function(){var e,t,i,n,a=this,l=[],o=a.down("[name=grddata]"),d=[],s={},r=a.filteritem,u=r.model,c=a.filetable;if(c?(r.__tbuid=c.table_uid,r.__tbuid&&a.loadHist(r.__tbuid)):u&&u.uid&&((n=new IG$._rpc$).init(a,{ack:"helpcontent",payload:{uid:u.uid},mbody:{option:"ftables"}},a,(function(e){e&&(r.__tbuid=e.table_uid,r.__tbuid&&a.loadHist(r.__tbuid))})),n.send()),r&&r.data){for(e=0;e<r.data.length;e++)l.push({code:r.data[e].code,value:r.data[e].disp||r.data[e].code});if(o.store.loadData(l),(i=r.selection)&&i.length>0){for(e=0;e<i.length;e++)s[i[e].code]=i[e];for(e=0;e<o.store.data.items.length;e++)s[(t=o.store.data.items[e]).get("code")]&&d.push(t);o.select(d)}}},loadHist:function(e){var t=this,i=new IG$._rpc$,n=t.down("[name=grddata]");i.init(t,{ack:"helpcontent",payload:{uid:e,option:"ftable_hist"},mbody:{option:"ftable_hist"}},t,(function(e){this.down("[name=m2]");var t,i,a=[];if(e&&e.length)for(t=0;t<e.length;t++)i=e[t],a.push(i);n.store.loadData(a)})),i.send()},removeHist:function(e){var t=this,i=t.down("[name=grddata]").getSelectionModel().selected,n=new IG$._rpc$;i&&1==i.length?(e=i.items[0],n.init(t,{ack:"helpcontent",payload:{uid:e.get("uid"),option:"ftable_rm",uname:e.get("uname")},mbody:{option:"ftable_rm"}},t,(function(e){t.loadColumnInfo()})),n.send()):IG$.alertmsg(ig$.appname,IRm$.r1("M_SEL_SINGLE"),null,null,1,"warning")},loadColumnInfo:function(){var e=this.filteritem;e&&e.__tbuid&&this.loadHist(e.__tbuid)},_confirm:function(){var e,t,i=this,n=i.down("[name=grddata]").getSelectionModel().selected;for(e=0;e<n.length;e++)(t=n.items[e]).set("code",t.get("uname")),t.set("value",t.get("fname"));i.__dloaded=!1,i.callback&&i.callback.execute(n),i.close()},_upload_file:function(){var e=this,t=new IG$.dynfilterFileUpload({instance:e.instance,smode:e.smode,filteritem:e.filteritem,callback:new IG$.callBackObj(e,(function(){this.loadColumnInfo()}))});IG$.checkLogin(e,t)},initComponent:function(){var e=this;e.title=IRm$.r1("T_DYN_LFILE"),IG$.apply(this,{items:[{xtype:"container",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",height:20,value:IRm$.r1("L_DYN_LFILE")},{xtype:"gridpanel",name:"grddata",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:e.selModel||"MULTI"},store:{xtype:"store",fields:["fname","rowcount","uname","code","value","nrows"]},flex:1,columns:[{text:IRm$.r1("L_FILENAME"),dataIndex:"fname",flex:1},{text:IRm$.r1("B_LASTUPD"),dataIndex:"mdate_user",flex:1},{text:IRm$.r1("L_ROW_CNT"),dataIndex:"nrows",width:50}],tbar:[{xtype:"textfield",name:"t_keyword",labelWidth:80,width:300,emptyText:IRm$.r1("L_SEARCH_KWD"),fieldLabel:IRm$.r1("B_SEARCH"),enableKeyEvents:!0,listeners:{keyup:function(e,t,i){13==t.keyCode&&IG$._dofilter(this,"grddata",["fname"],e)},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){IG$._dofilter(this,"grddata",["fname"],this.down("[name=t_keyword]"))},scope:this},"->",{xtype:"button",text:IRm$.r1("B_DELETE"),handler:function(){this.removeHist()},scope:this}]}]}],buttons:[{text:IRm$.r1("L_UPLOAD"),handler:function(){this._upload_file()},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(t){e.init_f()}}}),IG$.dynfilterFileLoader.superclass.initComponent.apply(this,arguments)}}),IG$.dynfilterFileUpload=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:450,height:400,sheetoption:null,sheetindex:-1,callback:null,init_f:function(){var e=this,t=e.filteritem,i=t.model;e.initOpts(),i&&i.uid&&t.__tbuid&&e.showColInfo()},initOpts:function(){var e,t,i=this,n=i.down("[name=_m4]").body.dom;e=$("#fileupload",n),t=$("#d_progress",n),e.fileupload({url:ig$.servlet+"/upload",dataType:"json",formData:{_mts_:IG$._g$a||""},done:function(e,t){var n,a=t.result||{errorcode:"0xffff",errormsg:"Server incorrect responding"},l=[];IG$.getErrorCode(a)?IG$.ShowErrorMessage(a,i,null):(n=a.result,l.push(n),i.loadDataSet(l))},progressall:function(e,i){var n=parseInt(i.loaded/i.total*100,10),a=$(".bar",t);a.css("width",n+"%"),a.text("Loaded "+i.loaded+" / "+i.total)}}).bind("fileuploadsubmit",(function(e,t){})),e.fileupload("option","url",ig$.servlet+"/upload")},loadDataSet:function(e){var t,i;if(e){for(t=0;t<e.length;t++)"{ENC}"==(i=e[t]).filename.substring(0,5)&&(i.filename=i.filename.substring(5),i.filename=Base64.decode(i.filename));e.length&&this.loadFileToTbl(e)}},loadFileToTbl:function(e){var t,i=this,n=new IG$._rpc$,a=[],l=i.filteritem;for(t=0;t<e.length;t++)a.push(e[t].uid);0!=a.length&&(!l||l&&!l.__tbuid||(n.init(i,{ack:"uploadcontent",payload:{tuid:l.__tbuid,uid:a.join(";")},mbody:{option:"loaddatacontent"}},i,(function(e){i.callback&&i.callback.execute(),IG$.alertmsg(ig$.appname,IRm$.r1("M_SUCCESS"),null,null,0,"success"),i.close()})),n.send()))},showColInfo:function(){var e=this,t=new IG$._rpc$,i=e.filteritem;i&&i.__tbuid&&(t.init(e,{ack:"tablecontent",payload:{uid:i.__tbuid,option:"StoredContent"},mbody:{option:"folder"}},e,(function(t){var i,n,a,l,o=[],d=0,s=e.down("[name=_mt]"),r=[];if(t&&t.length)for(l=(a=t[0]).children,i=0;i<l.length;i++)(n=l[i]).name!=a.content.file_field&&n.name!=a.content.seq_field&&(n.seq=++d,r.push(n.name),o.push(n));s.setValue(r.join("\t"))}),!1),t.send())},initComponent:function(){var e=this;e.title=IRm$.r1("T_DYN_LFILE"),IG$.apply(this,{items:[{xtype:"container",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",height:20,value:IRm$.r1("L_DYN_LFILE")},{xtype:"container",html:"<div class='igc-o-dzone' id='_tb_f' style='padding:5px;'><input type='file' id='fileupload' name='files[]' data-url='upload' multiple></input><div class='file-progress' id='d_progress' style='height:20px;'><div class='bar' style='width: 0%;'></div></div></div>",name:"_m4",height:55},{xtype:"textarea",fieldLabel:IRm$.r1("B_HEADERS"),labelPosition:"top",name:"_mt",flex:1}]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(t){e.init_f()}}}),IG$.dynfilterFileUpload.superclass.initComponent.apply(this,arguments)}});
IG$.$FCinst={},IG$._baseFC=function(e){var t=this;return t.$events=[],t.$properties=[],t.base_constructor.apply(t,arguments),t},IG$._baseFC.prototype={md:window.MdFilledTextField?2:1,base_constructor:function(){var e,t=this,a=arguments,r=a[0]||{};IG$.apply(t,r,null,!0),t.events=t.events||[],t.properties=t.properties||[];var n=[{name:"name",type:"string",base:!0},{name:"description",type:"string",base:!0},{name:"title",type:"string",base:!0},{name:"colspan",type:"int",base:!0,min:1,max:12},{name:"isnecessary",type:"boolean",base:!0},{name:"readonly",type:"boolean",base:!0},{name:"ishidden",type:"boolean",base:!0},{name:"defaultvalue",type:"string",base:!0},{name:"f_t_dir",type:"enum",base:!0,values:["top","left"],label:IRm$.r1("L_FT_DIR")}];t.$base_prop={},$.each(n,(function(e,a){t.$base_prop[a.name]=a})),t.properties=[...n,...t.properties],t.form&&t.fitem&&(t.sheetoption=t.form.sheetoption,t.fmodel=t.fitem.model,(e=t.fmodel.rangelabel)&&(t.rangelabel=e.split("^"))),t.$init.apply(t,a)},$setProp:function(e,t,a){var r=this,n=r.$base_prop[t],o=r.ui,i=!1;if(n){switch(n.name){case"title":e.u3.html(a),r.md&&(r.lbl$&&r.lbl$.html(a),r.lbl$&&e.u4.hide(),r.mp$&&(r.mp$.label=a)),i=!0;break;case"ishidden":r.mcap[a?"addClass":"removeClass"]("df-filter-hidden"),i=!0;break;case"readonly":this.iscontainer||$("input,textarea,button",o).attr("readonly",a);break;case"f_t_dir":a=a||r.sheetoption.f_t_dir||"left";var s=e.u4.hasClass("df-titlecap-top")?"top":"left";s!=a&&(e.u4.removeClass("df-titlecap-"+("top"==s?"top":"row")),e.u4.addClass("df-titlecap-"+("top"==a?"top":"row")),"top"==a?(e.u4.css({width:"inherit"}),r.container.appendTo(e.u4)):r.container.appendTo(e.u1))}i&&r.trigger("invalidate")}},$init:function(){},$create:function(){var e=this,t=e.fitem,a=e.fmodel,r=e.properties;a&&a.options&&$.each(r,(function(t,r){var n,o=r.base?a[r.name]:a.options[r.name];void 0!==o&&("string"==typeof o&&o&&"{"==o[0]&&"}"==o[o.length-1]&&(n=o.substring(1,o.length-1),o=e.form._get_p(n,e.fitem,r)),r.value=o)})),e.ui=e.create(e.container),setTimeout((function(){a&&a.options&&$.each(r,(function(a,r){var n=r.value;void 0!==n&&e.$setProp(t,r.name,n)}))}),2)},$getValue:function(){return this.getValue&&this.getValue()},$loadData:function(e){return this.loadData&&this.loadData(e)},$updateValue:function(e,t){return this.updateValue&&this.updateValue(e,t)},$setValue:function(e,t,a){return this.setValue&&this.setValue(e,t,a)},$clear:function(){return this.clear&&this.clear()},$destroy:function(){return this.destroy?this.destroy():null},trigger:function(e,t){this.container.trigger("fc_"+e,t)},isPromptName:function(e){return e&&e.length>3&&"$"==e.charAt(0)&&"{"==e.charAt(1)&&"}"==e.charAt(e.length-1)?e=e.substring(2,e.length-1):0},getYearField:function(e){var t=null;if(IG$.isNumber(e))t=Number(e);else{var a=(new Date).getFullYear(),r=0;e.indexOf("-")>-1?(r=e.substring(e.indexOf("-")+1),r=Number(r),r*=-1):e.indexOf("+")>-1&&(r=e.substring(e.indexOf("+")+1),r=Number(r)),t=a+r}return t},getDefaultValue:function(e,t){var a,r,n=this,o=n.form,i=e.model._init_value||e.model.initial_values,s=window._report_prompt,l={};if(i&&i.length&&i[t]&&(a=i[t].code),a&&a.indexOf("cyear")>-1)try{a=n.getYearField(a)}catch(e){IG$.ShowError("Error on Year Field "+a)}return a&&n.isPromptName(a)&&(s&&$.each(s,(function(e,t){t.values&&t.values.length&&(l[t.name]=t)})),r=n.isPromptName(a),a=o._parameters&&o._parameters[r]?o._parameters[r].value:l&&l[r]?l[r].values[l[r].values.length>t?t:0].code:null),a},getRangeLabel:function(e,t,a,r){var n,o=null,i="";return r&&e&&e.length>t&&e[t]&&(n=e[t],(2==a||1==a&&"_"==n.substring(0,1)||0==a&&"_"!=n.substring(0,1))&&(o={},1==a&&(n=n.substring(1)),o.t=n,n&&n.length>1&&"@"==n.charAt(0)&&(n=IRm$.r1(n),o.e=1),2!=a&&2!=r&&(i="<td class='igc-f-range-label-td'>"),i+="<span class='igc-f-range-label f-label_"+t+(a<2?"_"+a:"")+"'>"+n+"</span>",2!=a&&2!=r&&(i+="</td>"),o.d=i)),o},getRangeCol:function(e,t,a,r){var n="";return r&&e&&e.length>t&&e[t]&&(v=e[t],(2==a||1==a&&"_"==v.substring(0,1)||0==a&&"_"!=v.substring(0,1))&&(n="<col width='40px'></col>")),n},_pop_dtval:function(e,t,a,r,n){var o,i,s,l,d,p,m=this,u=m.fmodel,f=u.yearfrom||"cyear-5",c=u.yearto||"cyear";if(f=m.getYearField(f),c=m.getYearField(c),"year"==a)for(d=n&&n.length?""+m.getDefaultDate(n).getFullYear():m.md?t[0].value:$("option:selected",t).val(),m.md?(t.empty(),$("<md-select-option value=''>"+IRm$.r1("L_SELECT_VALUE")+"</md-select-option>").appendTo(t)):(t.empty(),$("<option value=''>"+IRm$.r1("L_SELECT_VALUE")+"</option>").appendTo(t)),2==r&&(s=e.dt1)&&(l=$("option:selected",s).val())&&(f=Math.max(Number(l),f)),o=f;o<c+1;o++)p=$("<"+(m.md?"md-select-option":"option")+" value='"+o+"'>"+o+"</"+(m.md?"md-select-option":"option")+">").appendTo(t),d&&""+o==d&&p.attr("selected","selected");else if("month"==a){if(1==r&&(n||u.startdate))t.monthpicker("setDate",m.getDefaultDate(n||u.startdate));else if(2==r){if((i=u.enddate)&&t.monthpicker("setDate",m.getDefaultDate(i)),s=e.dt1)if(l=s.monthpicker("getDate"))(g=t.monthpicker("getDate"))&&(g.getFullYear()<c||g.getMonth()<l.getMonth())&&(IG$.ShowError(IRm$.r1("L_ERR_MSEL"),m),t.monthpicker("setDate",l)),t.monthpicker("setDateRange",l,new Date(c,11,31))}}else if(1==r&&(n||u.startdate))t.datepicker("setDate",m.getDefaultDate(n||u.startdate));else if(2==r){if(s=e.dt1,t.datepicker("option","minDate",null),s&&(l=s.datepicker("getDate"))){var g=t.datepicker("getDate");t.datepicker("option","minDate",l),g&&g<l&&IG$.ShowError(IRm$.r1("L_ERR_MSEL"),m)}(i=u.enddate)&&t.datepicker("setDate",m.getDefaultDate(u.enddate))}},_ud_dt2s:function(e,t){e.dt2&&this._pop_dtval(e,e.dt2,t,2)},getDefaultDate:function(dformat){var me=this,form=me.form,c=new Date,m,dy,dm,dd,op,opval,bp=0,_report_prompt=window._report_prompt,dlen,dnum;if("object"==typeof dformat&&dformat.length&&dformat[0].code&&(dformat=dformat[0].code),dlen=dformat?dformat.length:0,dnum=!!dlen&&IG$.isNumber(dformat),14==dlen&&dnum)dy=dformat.substring(0,4),dm=dformat.substring(4,6),dd=dformat.substring(6,8),c=new Date(parseInt(dy),parseInt(dm)-1,parseInt(dd));else if(8==dlen&&dnum)dy=dformat.substring(0,4),dm=dformat.substring(4,6),dd=dformat.substring(6,8),c=new Date(parseInt(dy),parseInt(dm)-1,parseInt(dd));else if(dlen)if(dformat.indexOf("cdate")>-1)dy=c.getFullYear(),dm=c.getMonth(),dd=c.getDate(),(dformat.indexOf("-")>-1||dformat.indexOf("+")>-1)&&(m=dformat.indexOf("-")||dformat.indexOf("+"),op=dformat.substring(m,m+1),opval=dformat.substring(m+1),op&&opval&&($.each(["y","m","d",""],(function(e,t){if(!bp&&((m=t?opval.indexOf(t):-1)>-1||""==t)){if(opval=m>-1?opval.substring(0,m):opval,opval=parseInt(opval))switch(t){case"y":dy="+"==op?dy+opval:dy-opval;break;case"m":dm="+"==op?dm+opval:dm-opval;break;default:dd="+"==op?dd+opval:dd-opval}bp=1}})),c=new Date(parseInt(dy),parseInt(dm),parseInt(dd))));else if(me.isPromptName(dformat)){var pname=me.isPromptName(dformat),rpt_prompt={};_report_prompt&&$.each(_report_prompt,(function(e,t){t.values&&t.values.length&&(rpt_prompt[t.name]=t)})),form._parameters&&form._parameters[pname]?dformat=form._parameters[pname].value:rpt_prompt&&rpt_prompt[pname]&&(dformat=rpt_prompt[pname].values[rpt_prompt[pname].values.length>seq?seq:0].code),dformat&&8==dformat.length&&IG$.isNumber(dformat)&&(dy=dformat.substring(0,4),dm=dformat.substring(4,6),dd=dformat.substring(6,8),c=new Date(parseInt(dy),parseInt(dm)-1,parseInt(dd)))}else try{m=eval("(function() {\n"+dformat+"\n}())"),m&&(c=m)}catch(e){IG$.alertmsg(ig$.appname,IRm$.r1("M_DEF_DATE"),null,null,1,"error")}return c},rs_checkPopup:function(e,t,a){var r,n,o,i=this,s="";if(n=t.selection=[],e&&e.length)for(r=0;r<e.length;r++)e.items?(o=e.items[r],n.push({code:o.get("code"),value:o.get("value")})):(o=e[r],n.push({code:o.code,value:o.value}));n.length&&(s=(n[0].value||n[0].code)+(n.length>1?"("+(n.length-1)+" more)":"")),i.clearInvalid(),t.isnecessary&&(!n||n&&!n.length)&&i.markInvalid("required"),i.md?t.u2.ui.sinp[0].value=s:$("input[type=text]",t.u2.ui).val(s),!1!==a&&i.trigger("change_val")},_get_id:function(){return IG$._fcid=IG$._fcid||0,"flt_"+IG$._fcid++},markInvalid:function(e){var t=this.fitem,a=this.mp$;t&&t.u3&&t.u3.addClass("df-title-error"),a&&(a.error=!0,"required"==e&&(e=IRm$.r1("M_SEL_ERR",t.model.title||t.model.name)),a.errorText=e)},clearInvalid:function(){var e=this.fitem,t=this.mp$;e&&e.u3&&e.u3.removeClass("df-title-error"),t&&(t.error=!1,t.errorText="")},_sync_val:function(e,t,a){var r=this,n="_sync_val_timer_"+(a||0);r[n]&&clearTimeout(r[n]),r[n]=setTimeout((function(){e.value!==t.val()?e.value=t.val():r._sync_val(e,t,a)}),100)}};
IG$._FC_button=$s.extend(IG$._baseFC,{objtype:"button",events:[{name:"button_click"}],properties:[],create:function(t){var e,n=this,o=n.fmodel,r=n.fitem,i=n.mcap,l=o.options.text||" ";return l&&l.length>1&&"{"==l.charAt(0)&&"}"==l.charAt(l.length-1)&&(l=IRm$.r1(l.substring(1,l.length-1))),(e=$("<md-elevated-button class='igc-md-btn'></md-elevated-button>").appendTo(t)[0]).update(),e.value=IG$._rrcsv(l),e.renderRoot.querySelector(".label").innerHTML=e.value,e.addEventListener("click",(function(){n.trigger("button_click",r)})),"updateFilterValues"==o.options.action?n._sbtn=i:"f_bx"==o.options.action&&(n._sxbtn=i,i.hide()),$(e)},$setProp:function(t,e,n){var o=this,r=(o.fmodel,o.ui);if("title"===e)return n=IRm$.r1(n),r[0].value=n,r[0].renderRoot.querySelector(".label").innerHTML=n,$(".label",r).html(n),void t.u4.hide();IG$._baseFC.prototype.$setProp.call(o,t,e,n)}}),IG$.$FCinst.button=new IG$._FC_button;
IG$._FC_calendar=$s.extend(IG$._baseFC,{objtype:"calendar",s_codemap:1,s_metric:1,events:[{name:"change_val"}],create:function(e){var t,a=this,d=a.fmodel,l=a.fitem,n=(a.sheetoption,d.dateseltype),i=IG$.calendar_locale,o=$("<div class='mec-dateperiod-box"+(a.md?" form-outline":"")+"'></div>").appendTo(e),p=d.yearfrom||"cyear-5",c=d.yearto||"cyear",r=d._init_value||d.initial_values,m=a._get_id();return p=a.getYearField(p),c=a.getYearField(c),"year"==n?(a.md?(lbl$=a.lbl$=$("<label class='form-label'></label>"),t=l.dt=$("<md-outlined-select style='flex:1'></md-outlined-select>").appendTo(o),a.mp$=t[0],a.mp$.addEventListener("change",(function(){a.trigger("change_val")}))):(t=l.dt=$("<select class='mec-dateperiod-year'></select>").appendTo(o)).bind("change",(function(){a.trigger("change_val")})),a._pop_dtval(l,t,n,1,r)):"month"==n?(ptn="yyyy-mm",a.md?(l.dt=$("<input type='text'></input>").css({position:"absolute",top:0,bottom:0,left:0,width:0,border:0}).appendTo(o),lbl$=a.lbl$=$("<label class='form-label' for='"+m+"'></label>"),a.mp$=$("<md-outlined-text-field class='igc-md-ctrl idv-sel-flow-full' readonly='true' placeholder='"+i.c2disp+"'></md-outlined-text-field>").appendTo(o)[0],a.mp$.update(),l.dt.bind("change",(function(e){a.mp$.value=l.dt.val()})),$(a.mp$).bind("click",(function(e){e.preventDefault(),e.stopImmediatePropagation(),l.dt.monthpicker("show"),a.md&&a._sync_val(a.mp$,l.dt,0)}))):l.dt=$("<input class='mec-dateperiod-input"+(a.md?" form-control":"")+"' type='text' placeholder='"+i.c2disp+"' id='"+m+"'></input>").appendTo(o),l.dt.monthpicker({constrainInput:!1,monthNames:$.datepicker._defaults.monthNamesShort,buttonImageOnly:!0,pattern:ptn,dateFormat:i.c2format,startYear:p,finalYear:c}),l.dt.bind("change",(function(){a.trigger("change_val")})),l.dt.bind("monthpicker-change-year",(function(e,t){let a=l.dt.monthpicker("getDate"),d=parseInt(t);a&&d>0&&a.getYear()!=d&&(a.setYear(d),l.dt.monthpicker("setDate",a))})),r&&r.length&&a._pop_dtval(l,l.dt,n,1,r),$("<div class='mec-dateperiod-button"+(a.md?" idv-float-button":"")+"'>&nbsp;</div>").appendTo(o).bind("click",(function(){l.dt.monthpicker("show"),a.md&&a._sync_val(a.mp$,l.dt,0)}))):(a.md?(lbl$=a.lbl$=$("<label class='form-label' for='"+m+"'></label>"),a.mp$=$("<md-outlined-text-field class='igc-md-ctrl idv-sel-flow-full' placeholder='"+i.c1disp+"'></md-outlined-text-field>").appendTo(o)[0],a.mp$.update(),l.dt=$("<input type='text'></input>").css({position:"absolute",top:0,bottom:0,left:0,width:0,border:0}).appendTo(o),a.mp$.addEventListener("change",(function(e){l.dt.val()!=a.mp$.value&&l.dt.val(a.mp$.value)}))):l.dt=$("<input class='mec-dateperiod-input"+(a.md?" form-control":"")+"' type='text' placeholder='"+i.c1disp+"' id='"+m+"'></input>").appendTo(o),l.dt.startYear=p,l.dt.finalYear=c,IG$.dateUtil.createDatePicker(a,l.dt,(function(e,t){a.trigger("change_val")})),r&&r.length&&a._pop_dtval(l,l.dt,n,1,r),$("<div class='mec-dateperiod-button"+(a.md?" idv-float-button":"")+"'>&nbsp;</div>").appendTo(o).bind("click",(function(){l.dt.datepicker("show"),a.md&&a._sync_val(a.mp$,l.dt,0)}))),o},setValue:function(e,t,a){var d=this,l=d.fitem,n=d.fmodel.dateseltype;"year"==n?d.md?l.dt[0].value=e[0]:l.dt.val(e[0]):"month"==n?(l.dt.monthpicker("setDate",d.getDefaultDate(e[0])),d.mp$&&(d.mp$.value=l.dt.val())):(l.dt.datepicker("setDate",d.getDefaultDate(e[0])),d.mp$&&(d.mp$.value=l.dt.val()))},updateValue:function(e){var t,a=this,d=a.fitem,l=a.fmodel.dateseltype;(t="year"==l?a.md?d.dt[0].value:$("option:selected",d.dt).val():"month"==l?d.dt.monthpicker("getDate"):d.dt.datepicker("getDate"))&&("year"==l||(t=t.format("Ymd")),e.push({code:t,value:t,valuetype:"date",dateseltype:l}))},clear:function(){var e=this,t=e.fitem,a=e.fmodel.dateseltype;"year"==a?e.md?t.dt[0].value="":t.dt.val(""):"month"==a?(e.mp$&&(e.mp$.value=""),t.dt.monthpicker("setDate",null)):(e.mp$&&(e.mp$.value=""),t.dt.datepicker("setDate",null))}}),IG$.$FCinst.calendar=new IG$._FC_calendar;
IG$._FC_calendarperiod=$s.extend(IG$._baseFC,{objtype:"calendarperiod",s_codemap:1,s_metric:1,events:[{name:"change_val"}],create:function(e){var t,a,d,l,n,i,o=this,p=o.fitem,r=o.fmodel,c=$("<div class='mec-dateperiod-box'></div>").appendTo(e),s=$("<div class='period1'></div>"),u=$("<div class='period2'></div>"),m=r.dateseltype,v=o.md?"md-outlined-select":"select",f=o.md?"md-select-option":"option",g=!1,h=!1,_=r.yearfrom||"cyear-5",D=r.yearto||"cyear",b=o.rangelabel,y=r._init_value||r.initial_values,k=IG$.calendar_locale;if(t=o.md?$("<md-icon-button><md-icon>more_vert</md-icon></md-icon-button>").appendTo(c):$("<"+v+" class='mec-dateperid-sel'></"+v+">").appendTo(c),o.md&&((a=$("<md-menu class='mec-dateperid-sel' positioning='popover'></md-menu>").appendTo(c))[0].anchorElement=t[0]),s.appendTo(c),u.appendTo(c),t[r.showperiodselector?"show":"hide"](),t[0].addEventListener("click",(function(){a[0].open=!a[0].open})),y&&y.length){var T=o.getDefaultValue(p,0),I=o.getDefaultValue(p,1);T&&(n=o.getDefaultDate(T)),I&&(i=o.getDefaultDate(I))}_=o.getYearField(_),D=o.getYearField(D);var x=function(e,t){var a=o._get_id();o.md&&(o["lbl"+(1==t?"":t)+"$"]=$("<label class='form-label' for='"+a+"'></label>"));var d=$("<"+v+"></"+v+">").appendTo(e);return o.md&&(o["mp"+(1==t?"":t)+"$"]=d[0]),o._pop_dtval(p,d,m,t,1==t?r.startdate:r.enddate),d.bind("change",(function(){1==t&&o._ud_dt2s(p,m),o.trigger("change_val")})),{dt:d,mp:undefined}},F=function(e,t){var a,d,l=o._get_id(),n=$("<div class='am-pcontainer'></div>").appendTo(e);return o.md?(n.addClass("form-outline"),lbl$=o["lbl"+(1==t?"":t)+"$"]=$("<label class='form-label' for='"+l+"'></label>"),(d=o["mp"+(1==t?"":t)+"$"]=$("<md-outlined-text-field class='igc-md-ctrl' style='flex:1;' placeholder='"+k.c2disp+"'></md-outlined-text-field>").appendTo(n)[0]).update(),a=$("<input type='text'></input>").css({position:"absolute",top:0,bottom:0,left:0,width:0,border:0}).appendTo(c),d.addEventListener("change",(function(e){a.val()!=d.value&&a.val(d.value)}))):a=$("<input class='mec-dateperiod-input' type='text' placeholder='"+k.c2disp+"' id='"+l+"'></input>").appendTo(n),a.monthpicker({monthNames:$.datepicker._defaults.monthNamesShort,constrainInput:!1,buttonImageOnly:!0,pattern:"yyyy-mm",startYear:_,finalYear:D,dateFormat:k.c2format}),1==t&&a.bind("change",(function(e){o._ud_dt2s(p,m),o.trigger("change_val")})),2==t&&IG$.dateUtil.updateDatePicker(a),o._pop_dtval(p,a,m,t,2==t&&r.enddate?o.getDefaultDate(r.enddate):null),$("<div class='mec-dateperiod-button"+(o.md?" idv-float-button":"")+"'>&nbsp;</div>").appendTo(n).bind("click",(function(){a.monthpicker("show"),o.md&&o._sync_val(d,a,t)})),{dt:a,mp:d}},G=function(e,t){var a,d,l=o._get_id(),n="yyyy-mm-dd";return dsel=$("<div class='am-pcontainer'></div>").appendTo(e),o.md?(dsel.addClass("form-outline"),lbl$=o["lbl"+(1==t?"":t)+"$"]=$("<label class='form-label' for='"+l+"'></label>"),(d=o["mp"+(1==t?"":t)+"$"]=$("<md-outlined-text-field class='igc-md-ctrl' style='flex:1' placeholder='"+n+"'></md-outlined-text-field>").appendTo(dsel)[0]).update(),a=$("<input type='text'></input>").css({position:"absolute",top:0,bottom:0,left:0,width:0,border:0}).appendTo(c),d.addEventListener("change",(function(e){a.val()!=d.value&&a.val(d.value)}))):(a=$("<input class='mec-dateperiod-input' type='text' placeholder='"+n+"' id='"+l+"'></input>").appendTo(dsel)).css({zIndex:100}),a.startYear=_,a.finalYear=D,IG$.dateUtil.createDatePicker(o,a,(function(e,a){var d=p.dt1,l=p.dt2;o._ud_dt2s(p,m),(1==t&&d.datepicker("getDate")&&l&&l.datepicker("getDate")||2==t&&d.datepicker("getDate")&&l.datepicker("getDate"))&&o.trigger("change_val")}),d),o._pop_dtval(p,a,m,t),$("<div class='mec-dateperiod-button"+(o.md?" idv-float-button":"")+"'>&nbsp;</div>").appendTo(dsel).bind("click",(function(){a.datepicker("show"),o.md&&o._sync_val(d,a,t)})),{dt:a,mp:d}},w=function(e,t){var a,d=o.getRangeLabel(b,1==t||2==t?0:2,1==t||3==t?0:1,2);d&&(a=$("<div class='igc-f-range-label-td'></div>").appendTo(e),$(d.d).appendTo(a))};if("year"==m){h=!0,g=!1,w(s,1);var C=x(s,1);d=p.dt1=C.dt,w(s,2)}else if("month"==m){g=!0,h=!1,w(s,1);C=F(s,1);d=p.dt1=C.dt,p.mp1=C.mp,w(s,2)}else{w(s,1);C=G(s,1);d=p.dt1=C.dt,p.mp1=C.mp,w(s,2)}let Y=o.getRangeLabel(b,1,0,2);if(Y&&(S=$("<div class='igc-f-range-label-td'></div>").appendTo(s),$(Y.d).appendTo(S)),"year"==m){h=!0,g=!1,w(u,3);C=x(u,2);l=p.dt2=C.dt,p.mp2=C.mp,w(u,4)}else if("month"==m){g=!0,h=!1,ptn="yyyy-mm",w(u,3);C=F(u,2);l=p.dt2=C.dt,p.mp2=C.mp,w(u,4)}else{w(u,3);C=G(u,2);l=p.dt2=C.dt,p.mp2=C.mp,w(u,4)}var E;function L(){var e=o.md?t[0].value:$("option:selected",t).val();e&&$.each([0,1],(function(t,a){var n=0==t?d:l;if(h){var i=IG$.dynFilterDateConfig.getValue(e,t,g,h);if(o.md)0==t?o.mp$.value=i:o.mp2$.value=i,1==t&&o.mp$.value&&o.mp2$.value&&o.trigger("change_val");else{var p,r,c=$("option",n);for(p=0;p<c.length;p++)(r=$(c[p])).val()==i&&r.attr("selected","selected");1==t&&$("option:selected",d).val()&&$("option:selected",l).val()&&o.trigger("change_val")}}else{var s=IG$.dynFilterDateConfig.getValue(e,t);n[g?"monthpicker":"datepicker"]("setDate",IG$.dynFilterDateConfig.transDate(s)),o.md?(0==t?o.mp$.value=d.val():o.mp2$.value=l.val(),1==t&&d.val()&&l.val()&&o.trigger("change_val")):1==t&&d.val()&&l.val()&&o.trigger("change_val")}}))}return!r.startdate&&!r.enddate&&r.showperiodselector&&r.periodlist?$.each(r.periodlist,(function(e,d){o.md?$("<md-menu-item"+(d.isdefault?" selected":"")+">"+d.name+"</md-menu-item>").appendTo(a)[0].addEventListener("click",(function(){t[0].value=d.value,L()})):$("<"+f+" value='"+d.value+"'"+(d.isdefault?" selected":"")+">"+d.name+"</"+f+">").appendTo(t);d.isdefault&&(E=[IG$.dynFilterDateConfig.getValue(d.value,0,g,h),null])[0]&&(E[1]=new Date)})):(n||i)&&(E=[n,i]),E&&$.each([d,l],(function(e,a){var d=E[e]&&"object"==typeof E[e]&&E[e].getMonth?1:0;if(h){var l=d?""+E[e].getFullYear():E[e];if(o.md)0==e?o.mp$.value=l:o.mp2$.value=l;else{var n,i,r=$("option",a);for(i=0;i<r.length;i++)(n=$(r[i])).val()==l&&n.attr("selected","selected")}1==e&&o._ud_dt2s(p,m)}else if(g){(c=E[e])&&(d?a.monthpicker("setDate",c):(c=c.split("-").join("")+"01",a.monthpicker("setDate",o.getDefaultDate(c))),o.md&&o._sync_val(0==e?o.mp$:o.mp2$,a),0==e&&o._ud_dt2s(p,m))}else{var c;(c=E[e])&&(d?a.datepicker("setDate",c):(c=c.split("-").join(""),a.datepicker("setDate",o.getDefaultDate(c))),o.md&&o._sync_val(0==e?o.mp$:o.mp2$,a,e),0==e&&o._ud_dt2s(p,m))}1==e&&setTimeout((function(){t.trigger("change")}),100)})),r.showperiodselector&&(o.md||t.bind("change",L)),c},setValue:function(e,t,a){var d=this,l=d.fitem,n=d.fmodel.dateseltype;"year"==n?(l.dt1.val(e[0]),l.dt2.val(e[1])):"month"==n?(l.dt1.monthpicker("setDate",d.getDefaultDate(e[0])),l.dt2.monthpicker("setDate",d.getDefaultDate(e[1]))):(l.dt1.datepicker("setDate",d.getDefaultDate(e[0])),l.dt2.datepicker("setDate",d.getDefaultDate(e[1])))},updateValue:function(e){var t=this.fitem,a=this.fmodel.dateseltype;"year"==a?(value1=$("option:selected",t.dt1).val(),value2=$("option:selected",t.dt2).val()):"month"==a?(value1=t.dt1.monthpicker("getDate"),value2=t.dt2.monthpicker("getDate"),value2&&(value2=new Date(value2.getFullYear(),value2.getMonth()+1,0))):(value1=t.dt1.datepicker("getDate"),value2=t.dt2.datepicker("getDate")),value1&&value2&&("year"==a?(value1+="0101000000",value2+="1231235959"):(value1=value1.format("Ymd")+"000000",value2=value2.format("Ymd")+"235959"),Number(value1)<Number(value2)?(e.push({code:value1,value:value1,operator:"GTE",valuetype:"date"}),e.push({code:value2,value:value2,operator:"LTE",valuetype:"date"})):r=0)},clear:function(){var e=this.fitem,t=this.fmodel.dateseltype;"year"==t?(e.dt1.val(""),e.dt2.val("")):"month"==t?(e.dt1.monthpicker("setDate",null),e.dt2.monthpicker("setDate",null)):(e.dt1.datepicker("setDate",null),e.dt2.datepicker("setDate",null))}}),IG$.$FCinst.calendarperiod=new IG$._FC_calendarperiod;
IG$._FC_checkbox=$s.extend(IG$._baseFC,{objtype:"checkbox",s_codemap:1,s_metric:1,md:0,events:[{name:"change_val"}],create:function(e){var o,l=this,t=l.fmodel,a=l.fitem,i=t.showpopup,c=l._get_id();if(i){o=$("<div class='idv-sel-combo'></div>").appendTo(e);var n=$("<div class='idv-sel-flow-full'></div>").appendTo(o);$("<input type='text' class='idv-checkbox-inp'></input>").appendTo(n);$("<div class='idv-btn-selected'></div>").appendTo(o).bind("click",(function(e){e.stopPropagation();let o=l.form.checkHFilter(a);if(0!=o){var t=new IG$.dynFilter({instance:l.instance,selModel:{mode:"MULTI",selType:"checkboxmodel",checkSelector:".x-grid-cell"},smode:a.smode,callback:new IG$.callBackObj(l,l.rs_checkPopup,a),filteritem:a,hfilter:o});IG$.checkLogin(this,t)}}))}else o=$("<select multiple='multiple'></select>").css({height:80}).appendTo(e),l.md&&(e.addClass("form-outline"),o.addClass("form-control"),lbl$=l.lbl$=$("<label class='form-label' for='"+c+"'></label>").appendTo(e),$("<div class='form-helper'></div>").appendTo(e)),o.bind("change",(function(){l.trigger("change_val",1==a.updateValues)}));return o},setValue:function(e,o,l){var t=this,a=t.fitem,i=t.fmodel,c=t.ui;i.showpopup?t.rs_checkPopup(l,a,!1):c.val(e)},updateValue:function(e){var o,l=this,t=l.fitem,a=l.fmodel,i=l.ui;if(a.showpopup){let o=t.selection=t.selection||[];for(let l=0;l<o.length;l++)e.push({code:o[l].code,value:o[l].value})}else{o=i.val()||[];for(let l=0;l<o.length;l++)""!=o[l]&&e.push({code:o[l],value:o[l]})}},loadData:function(e){var o=this,l=o.fmodel,t=o.ui,a=o.fitem,i=l._init_value||l.initial_values;if("checkbox"==l.objtype&&l.showpopup)a.selection=[],i&&o.rs_checkPopup(i,a,!1);else{t.empty(),dp=t.attr("options"),l.showallvalue&&(l.isnecessary?aname=l.aname||IRm$.r1("L_SELECT_VALUE"):aname=l.aname||IRm$.r1("L_ALL_VALUE"),$("<option value=''>"+aname+"</option>").appendTo(t));for(let o=0;o<e.length;o++)$("<option value='"+e[o].code+"'>"+(e[o].disp||e[o].code)+"</option>").appendTo(t);t.trigger("change")}},clear:function(){var e=this,o=e.fmodel,l=e.ui,t=e.fitem;o.showpopup?($("input[type=text]",l).val(""),t.selection=[]):$("option:selected",l).removeAttr("selected")}}),IG$.$FCinst.checkbox=new IG$._FC_checkbox;
IG$._FC_checkbuttons=$s.extend(IG$._baseFC,{objtype:"checkbuttons",s_codemap:1,s_metric:1,events:[{name:"change_val"}],create:function(e){var c=this,t=c.fitem,a=$("<table class='idv-checkbuttons'><tr><td><ul></ul></td></tr></table>").appendTo(e),d=$("td",a);return c.md&&(d.empty(),d.append($("<md-chip-set></md-chip-set>"))),d.bind("checkboxchanged",(function(e,a){c.md?a&&t._c_a1&&t._c_a1[0].selected&&(t._c_a1[0].selected=!1):a&&t._c_a1&&$("input[type='checkbox']",t._c_a1).is(":checked")&&!$("input[type='checkbox']",a.u2).is(":checked")&&$("input[type='checkbox']",t._c_a1).prop("checked",!1),c.trigger("change_val",1==t.updateValues)})),a},setValue:function(e,c,t){var a,d,n=this,i=n.fitem;if(i.data)for(a=0;a<i.data.length;a++)d=n.md?i.data[a].u2[0]:$("input[type='checkbox']",i.data[a].u2),c[i.data[a].code]?n.md?d.selected=!0:d.attr("checked","checked"):n.md?d.selected=!1:d.removeAttr("checked")},updateValue:function(e){var c,t=this.fitem;if(t.data)for(c=0;c<t.data.length;c++)this.md?t.data[c].u2&&t.data[c].u2[0].selected&&e.push({code:t.data[c].code,value:t.data[c].value}):t.data[c].u2&&$("input[type='checkbox']",t.data[c].u2).is(":checked")&&e.push({code:t.data[c].code,value:t.data[c].value})},loadData:function(e){var c,t,a,d,n,i=this,p=i.fmodel,l=i.fitem,u=i.ui;if((c=i.md?$("md-chip-set",u):$("ul",u)).empty(),n=i.getDefaultValue(l,0),p.showallvalue){function h(){c.trigger("checkbox_sel_all"),l.___prv_event=1;var a=0;i.md?a=t[0].selected:$("input[type='checkbox']",t).is(":checked")&&(a=1),$.each(e,(function(e,c){if(c.u2){var t=i.md?c.u2[0]:$("input[type='checkbox']",c.u2);i.md?t.selected=!!a:t.prop("checked",!!a)}})),l.___prv_event=0,c.trigger("checkboxchanged",null)}d=p.aname||IRm$.r1("L_SELECT_VALUE"),i.md?(a=c,t=$("<md-filter-chip elevated='true'></md-filter-chip>"),a.append(t),t[0].update(),t[0].label=d,"ALL"==n&&(t[0].selected=!0),t[0].addEventListener("click",h)):(a=$("<li class='igc-chk-sel-all'></li>").appendTo(c),t=$("<label><input type='checkbox' value=''/><span>"+d+"</span></label>").appendTo(a),"ALL"==n&&$("input[type='checkbox']",t).prop("checked",!0),t.bind("click",h)),l._c_a1=t}$.each(e,(function(e,t){var a,d;i.md?(a=c,d=$("<md-filter-chip></md-filter-chip>"),a.append(d),d[0].update(),d[0].label=t.disp||t.code):(a=$("<li></li>").appendTo(c),d=$("<label><input type='checkbox' value='"+t.code+"'/><span>"+(t.disp||t.code)+"</span></label>").appendTo(a));var p=i.md?d[0]:$("input[type='checkbox']",d);t.u2=d,t.u2b=p,(t.code==n||t.selected||"ALL"==n)&&(i.md?p.selected=!0:p.prop("checked",!0)),i.md?p.addEventListener("click",(function(){l.___prv_event||c.trigger("checkboxchanged",t)})):p.bind("change",(function(){l.___prv_event||c.trigger("checkboxchanged",t)}))})),c.trigger("checkboxchanged",null)},clear:function(){var e,c=this,t=c.fitem.data;if(t&&t.length)for(e=0;e<t.length;e++)c.md?t[e].u2&&(t[e].u2.selected=!1):t[e].u2&&$("input[type='checkbox']",t[e].u2).prop("checked",!1);c.trigger("change_val")}}),IG$.$FCinst.checkbuttons=new IG$._FC_checkbuttons;
IG$._FC_combobox=$s.extend(IG$._baseFC,{objtype:"combobox",s_codemap:1,s_metric:1,events:[{name:"change_val"}],properties:[{name:"value",type:"string"},{name:"placeholder",type:"string"},{name:"selected",type:"object",readonly:!0},{name:"labelField",type:"string"},{name:"valueField",type:"string"}],create:function(e){var l,t,a=this,s=a.fitem,o=a.fmodel,i=o.showpopup,d=window.bowser,n=o.rangevalue,c=o.rangelabel?o.rangelabel.split("^"):[],p=a._get_id();if(i){var u;l=$("<div class='idv-sel-combo'></div>").appendTo(e),a.md?(a.lbl$=$("<label class='form-label' for='"+p+"'></label>"),u=$("<md-outlined-text-field class='igc-md-ctrl idv-sel-flow-full' type='text' readonly='true'></md-outlined-text-field>").appendTo(l),a.mp$=u[0],u[0].update(),l.sinp=u):(u=$("<div class='idv-sel-flow-full"+(a.md?" form-outline":"")+"'></div>").appendTo(l),$("<input type='text' class='idv-checkbox-inp"+(a.md?" form-control":"")+"'></input>").appendTo(u)),(t=$("<div class='idv-btn-selected"+(a.md?" idv-float-button":"")+"'></div>")).appendTo(l).bind("click",(function(e){if(e.stopPropagation(),hfilter=a.form.checkHFilter(s),0!=hfilter){var l=new IG$.dynFilter({instance:a.instance,selModel:{mode:"SINGLE",selType:"checkboxmodel",checkSelector:".x-grid-cell"},smode:s.smode,callback:new IG$.callBackObj(a,a.rs_checkPopup,s),filteritem:s,hfilter:hfilter});IG$.checkLogin(a,l)}})),u.bind("click",(function(e){t.trigger("click")}))}else{l=$("<div class='idv-sel-combo'></div>").appendTo(e);var r,m,v,f,h,_=null;(v=a.getRangeLabel(c,0,0,n))&&(f=$(v.d).appendTo(l),v.e&&IG$._rrcs(a,v.t,$("span",f),1)),a.md?(a.lbl$=$("<label class='form-label' for='"+p+"'></label>"),$("<div class='form-helper'></div>").appendTo(r),a.mp$=$("<md-outlined-text-field class='igc-md-ctrl idv-sel-flow-full' type='text'></md-outlined-text-field>").appendTo(l)[0],a.mp$.update(),r=$(a.mp$)):r=$("<div class='idv-sel-flow-full"+(a.md?" form-outline":"")+"'><input type='text' name='c_m1' class='"+(a.md?" form-control":"")+"'/></div>").appendTo(l),r.$btn=$("<div class='idv-sel-combo-button"+(a.md?" idv-float-button":"")+"'></div>").appendTo(l),(v=a.getRangeLabel(c,0,1,n))&&(f=$(v.d).appendTo(l),v.e&&IG$._rrcs(a,v.t,$("span",f),1)),n&&(v=a.getRangeLabel(c,1,2,n),h=$("<div class='igc-f-range-label-td'></div>").appendTo(l),v&&(f=$(v.d).appendTo(h),v.e&&IG$._rrcs(a,v.t,$("span",f),1)),(v=a.getRangeLabel(c,2,0,n))&&(f=$(v.d).appendTo(l),v.e&&IG$._rrcs(a,v.t,$("span",f),1)),a.md?(a.mp$2=$("<md-outlined-text-field class='igc-md-ctrl idv-sel-flow-full' type='text'></md-outlined-text-field>").appendTo(l)[0],a.mp$2.update(),_=$(a.mp$2)):_=$("<div class='idv-sel-flow-full'><input type='text' name='c_m2'/></div>").appendTo(l),_.$btn=$("<div class='idv-sel-combo-button"+(a.md?" idv-float-button":"")+"'></div>").appendTo(l),(v=a.getRangeLabel(c,2,1,n))&&(f=$(v.d).appendTo(l),v.e&&IG$._rrcs(a,v.t,$("span",f),1))),m=n?[r,_]:[r],$.each(m,(function(e,l){var t,i,n=l;t=a.md?$(n[0].renderRoot.querySelector("input")):$("input[type=text]",n),i=n.$btn,t.__c=!0,t.bind("input",(function(e){return e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1})),t.bind("keydown",(function(e){"Escape"==e.key&&(this.value="",a.md&&(n[0].value=this.value))})),t.bind("click",(function(e){$(this).select(),i.trigger("click")}));t.autocomplete({minLength:0,sortResults:!1,sortable:!1,source:function(e,l){var t=e.term,o=t.split(/,\s*/),i=s.sdp;i&&(t=o.pop(),s.kdp=null,t&&i.length>190?function(e,l){var t,o,i=new IG$._rpc$,d=[],n={items:[],option:"ValueInfo"},c=s.model,p=c.codemapping;"prompt"==s.itemtype?p&&p.uid&&(d.push({uid:p.uid,type:c.type,rptid:p.uid}),n.items.push({uid:p.uid,cmap:p,hfilter:t})):(d.push({name:c.name,uid:c.uid,objtype:objtype,nodepath:c.nodepath,rptid:c.uid,sql_id:c.sql_id}),n.items.push({uid:c.uid,cmap:p,sql_id:c.sql_id,hfilter:t})),t=a.form.checkHFilter(s),l.indexOf("%")<0&&(l+="%"),(o={ftype:"condition",operator:"LIKE",fields:[d[0]],values:[{code:l,value:l}]}).fields[0].type="",t?t.push(o):t=[o],n.items[0].hfilter=t,i.init(a,{ack:"olapservice",payload:d,mbody:n,meta_type:"valueinfo"},a,(function(l){if(l.erroritems&&l.erroritems.length)$.each(l.erroritems,(function(e,l){IG$.ShowErrorMessage(l,a,null)}));else{var t,o,i=[],d=IG$.parseValueList(l.value_results)[0].data;for(t=0;t<d.length;t++)o=d[t],i.push({label:o.disp||o.code,value:o.code});s.kdp=i,e(i)}}),(function(e){})),i.send()}(l,t):l($.ui.autocomplete.filter(i,t)))},focus:function(e,l){return!1},select:function(e,l){var i=l.item;return i.value?(this.value=i.label,a.md&&(n[0].value=this.value),s._svalues=[{code:i.value,text:i.label}],n.trigger("change")):o.showallvalue&&(this.value="",a.md&&(n[0].value=this.value),n.trigger("change")),d.msie&&t.blur(),!1},open:function(e,l){t.__c=!1},close:function(e,l){t.__c=!1,setTimeout((function(){t.__c=!0,d.msie&&t.blur()}),1200)}}),t.bind("keydown",(function(e){if(e.keyCode===$.ui.keyCode.TAB)t.__c=!0,$(this).autocomplete("widget").menu.active&&e.preventDefault();else if(e.keyCode===$.ui.keyCode.ENTER){var l,o,i,d,c=0,p=t.val().toLowerCase(),u=s.sdp,r=s.kdp;if(u&&u.length&&p){for(o=p.length,l=0;l<u.length;l++)if((d=u[l]).label.substring(0,o).toLowerCase()==p){s._svalues=[{code:d.value,text:d.label}],t.val(d.label),a.md&&(n[0].value=d.label),n.trigger("change"),c=1;break}if(!c&&r)for(l=0;l<r.length;l++)if((i=r[l]).label.substring(0,o).toLowerCase()==p){s._svalues=[{code:i.value,text:i.label}],t.val(i.label),a.md&&(n[0].value=i.label),n.trigger("change"),c=1;break}}c&&(t.autocomplete("close"),t.__c=!0)}})),i.bind("click",(function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t.__c?(t.__c=!1,t.autocomplete("search",""),t.focus()):(t.__c=!0,t.autocomplete("close"))})),n.bind("change",(function(){var l,i,d=!0,n="__pval"+e,c=t.val(),p="",u=t.attr("placeholder"),r=s.sdp;if(r&&r.length)for(l=0;l<r.length;l++)if(i=r[l],!(u&&c==u||i.value!=c&&i.label!=c)){p={code:i.value,text:i.text||i.label}.code;break}if(s[n]==p&&(d=!1),d){if(a.clearInvalid(),s[n]=p,"valueset"==o.type){if(s.value=[],a.form.updateFilterValue(s),s.value&&s.value.length&&s.value[0].code){var m=s.value[0].code;setTimeout((function(){a.form._upd_vs_value.call(a.form,m)}),10)}return!1}o.isnecessary&&!p&&a.markInvalid("required"),a.trigger("change_val")}}))}))}return l},loadData:function(e){var l=this,t=l.fmodel,a=l.fitem,s=l.ui,o=t._init_value||t.initial_values;if(t.showpopup)a.selection=[],o&&l.rs_checkPopup(o,a,!1);else{sctrl=l.md?l.mp$:$("[name=c_m1]",s),sctrl1=l.md?l.$mp$2:$("[name=c_m2]",s),sdp=[],t.showallvalue&&(t.isnecessary?aname=t.aname||IRm$.r1("L_SELECT_VALUE"):aname=t.aname||IRm$.r1("L_ALL_VALUE"),l.md?(sctrl.placeholder=aname,sctrl1&&(sctrl1.placeholder=aname)):(sctrl.attr("placeholder",aname),sctrl1.attr("placeholder",aname),IG$.placeHolder(sctrl),IG$.placeHolder(sctrl1)),(!l.md||l.md&&!t.isnecessary)&&sdp.push({label:aname,value:""})),dval=l.getDefaultValue(a,0),a._svalues=[];for(let l=0;l<e.length;l++)sdp.push({label:e[l].disp||e[l].code,value:e[l].code}),dval&&dval==e[l].code&&(t.rangevalue?a._svalues.push({code:e[l].code,text:e[l].disp||e[l].code}):a._svalues=[{code:e[l].code,text:e[l].disp||e[l].code}]);!t.showallvalue&&(!a._svalues||a._svalues&&0==a._svalues.length)&&sdp.length&&(a._svalues=[{code:sdp[0].value,text:sdp[0].label}],t.rangevalue&&a._svalues.push({code:sdp[sdp.length-1].value,text:sdp[sdp.length-1].label})),a._svalues&&a._svalues.length&&(l.md?sctrl.value=a._svalues[0].text:sctrl.val(a._svalues[0].text),t.rangevalue&&(l.md?sctrl1.value=a._svalues[1].text:sctrl1.val(a._svalues[1].text))),a.sdp=sdp}},setValue:function(e,l,t){var a,s,o=this,i=o.fmodel,d=(i.showpopup,o.ui);a=o.md?o.mp$:$("[name=c_m1]",d),i.rangevalue&&(s=o.md?o.mp$2:$("[name=c_m2]",d)),i.showpopup?o.rs_checkPopup(t,o.fitem,!1):o.md?(a.value=e[0]||"",s&&(s.value=e[1]||"")):(a.val(e[0]||""),s&&s.val(e[1]||""))},updateValue:function(e){var l,t,a=this,s=a.fitem,o=a.fmodel,i=a.ui;if(o.showpopup)selection=s.selection=s.selection||[],selection.length&&e.push({code:selection[0].code,value:selection[0].value});else if(a.md?(t=[a.mp$],o.rangevalue&&t.push(a.mp$2)):(t=[$("[name=c_m1]",i)],o.rangevalue&&t.push($("[name=c_m2]",i))),l=[],sdp=s.sdp,$.each(t,(function(e,t){var i,d=a.md?t.value:t.val(),n=a.md?t.placeholder:t.attr("placeholder");if(!o.rangevalue&&d&&s._svalues&&s._svalues.length&&s._svalues[0].text==d)(!n||n&&d!=n)&&(l=s._svalues);else if(d&&sdp&&sdp.length)for(i=0;i<sdp.length;i++)if(sdp_i=sdp[i],!(n&&d==n||sdp_i.value!=d&&sdp_i.label!=d)){l.push({code:sdp_i.value,text:sdp_i.text||sdp_i.label});break}})),l&&!o.rangevalue&&l.length||o.rangevalue&&l.length>1)for(let t=0;t<l.length;t++)e.push({code:l[t].code,value:l[t].text})},clear:function(){var e=this,l=e.fmodel.showpopup,t=e.ui;l?($("input[type=text]",t).val(""),fitem.selection=[],e.mp$&&e.mp$.update()):$("option:selected",t).removeAttr("selected")},$setProp:function(e,l,t){var a=this,s=a.fmodel,o=a.ui,i=[$("[name=c_m1]",o)];switch(s.rangevalue&&i.push($("[name=c_m2]",o)),l){case"placeholder":$.each(i,(function(e,l){l&&l.attr("placeholder",t)}));break;case"value":a.setValue([t])}IG$._baseFC.prototype.$setProp.call(a,e,l,t)}}),IG$.$FCinst.combobox=new IG$._FC_combobox;
IG$._FC_fileupload=$s.extend(IG$._baseFC,{objtype:"fileupload",events:[{name:"change_val"}],create:function(e){var l,i=this,t=i.fitem,a=i.fmodel,n=i._get_id(),o=$("<div class='mec-fileupload-box'></div>").appendTo(e);return o.addClass("form-outline"),i.md?(lbl$=i.lbl$=$("<label class='form-label' for='"+n+"'></label>"),i.mp$=$("<md-outlined-text-field class='igc-md-ctrl idv-sel-flow-full' readonly='true'><md-icon slot='leading-icon'>upload_file</md-icon></md-outlined-text-field>").appendTo(o),i.mp$.init()):((l=$("<input type='text' class='idv-checkbox-inp' id='"+n+"'></input>").appendTo(o)).addClass("form-control"),l.css({float:"left"})),$("<div class='idv-btn-selected'></div>").appendTo(o).bind("click",(function(e){e.stopPropagation(),req=new IG$._rpc$,req.init(i,{ack:"helpcontent",payload:{uid:a.uid},mbody:{option:"ftables"}},i,(function(e){var l=new IG$.dynfilterFileLoader({instance:i.instance,smode:t.smode,callback:new IG$.callBackObj(i,i.rs_checkPopup,t),filteritem:t,filetable:e});IG$.checkLogin(this,l)})),req.send()})),o},loadData:function(e){this.fitem.selection=[]},clear:function(){var e=this,l=e.ui;e.md?e.mp$.value="":$("input[type=text]",l).val("")},updateValue:function(e){var l,i=this.fitem;(l=i.selection=i.selection||[]).length&&e.push({code:l[0].code,value:l[0].value})}}),IG$.$FCinst.fileupload=new IG$._FC_fileupload;
IG$._FC_label=$s.extend(IG$._baseFC,{objtype:"label",events:[{name:"click"}],properties:[{name:"style",type:"enum",values:["maintitle","subtitle","normal"]}],create:function(e){var t,a=this,l=a.fmodel,s=(a.fitem,a.mcap,l.title||" ");return t=$("<div></div>").appendTo(e),a.text(s,t),t},text:function(e,t){var a=t||this.ui;(e=e||" ").length>1&&"{"==e.charAt(0)&&"}"==e.charAt(e.length-1)&&(e=IRm$.r1(e.substring(1,e.length-1))),a.html(e)},$setProp:function(e,t,a){var l=this;switch(t){case"title":l.text(a);break;case"style":l._astyle&&l._astyle!=a&&l.ui.removeClass(l._astyle),a&&l.ui.addClass(a),l._astyle=a}IG$._baseFC.prototype.$setProp.call(l,e,t,a)}}),IG$.$FCinst.label=new IG$._FC_label;
IG$._FC_radiobox=$s.extend(IG$._baseFC,{objtype:"radiobox",s_codemap:1,s_metric:1,events:[{name:"change_val"}],create:function(e){ui=$("<select multiple='multiple'></select>").css({height:80}).appendTo(e),ui.bind("change",(function(){me.trigger("change_val",1==fitem.updateValues)}))},setValue:function(e,t,a){this.ui.val(e)},updateValue:function(e){var t;for(t=this.ui.val()||[],j=0;j<t.length;j++)""!=t[j]&&e.push({code:t[j],value:t[j]})},loadData:function(e){var t,a=this.ui,o=this.fmodel,i="";for(a.empty(),a.attr("options"),o.showallvalue&&(i=o.isnecessary?o.aname||IRm$.r1("L_SELECT_VALUE"):o.aname||IRm$.r1("L_ALL_VALUE"),$("<option value=''>"+i+"</option>").appendTo(a)),t=0;t<e.length;t++)$("<option value='"+e[t].code+"'>"+(e[t].disp||e[t].code)+"</option>").appendTo(a);a.trigger("change")},clear:function(){var e=this.ui;e.val([]),$("option:selected",e).removeAttr("selected")}}),IG$.$FCinst.radiobox=new IG$._FC_radiobox;
IG$._FC_radiobuttons=$s.extend(IG$._baseFC,{objtype:"radiobuttons",s_codemap:1,s_metric:1,events:[{name:"change_val"}],create:function(d){var e=this,a=$("<table class='mec-radiobuttons'><tr><td><ul></ul></td></tr></table>").appendTo(d);return $("td",a).bind("radioboxchanged",(function(){e.trigger("change_val")})),a},setValue:function(d,e,a){var t,i,o=this.fitem;if(o.data)for(t=0;t<o.data.length;t++)i=$("input[type='radio']",o.data[t].u2),e[o.data[t].code]?i.attr("checked","checked"):i.removeAttr("checked")},loadData:function(d){var e=this,a=e.ui,t=e.fitem,i=$("ul",a);i.empty(),window.rdo_id=window.rdo_id||0,window.rdo_id++,dval=e.getDefaultValue(t,0),$.each(d,(function(d,a){var t,o,n=$("<li></li>").appendTo(i);e.md?(window.rdo_lbl_id=window.rdo_lbl_id||0,window.rdo_lbl_id++,t=$("<md-radio id='radio_lb_"+window.rdo_lbl_id+"' name='radio_"+window.rdo_id+"' value='"+a.code+"'></md-radio>").appendTo(n),$("<label for='radio_lb"+window.rdo_lbl_id+"'>"+(a.disp||a.code)+"</label>").appendTo(n)):(t=$("<label><input type='radio' name='radio_"+window.rdo_id+"' value='"+a.code+"'/><span>"+(a.disp||a.code)+"</span></label>").appendTo(n),o=$("input[type='radio']",t)),a.u2=t,a.u2b=o,(dval&&a.code==dval||a.selected)&&(e.md?t[0].checked=!0:o.prop("checked",!0)),e.md?t[0].addEventListener("change",(function(){setTimeout((function(){i.trigger("radioboxchanged")}),100)})):t.bind("change",(function(){setTimeout((function(){i.trigger("radioboxchanged")}),100)}))})),i.trigger("radioboxchanged")},updateValue:function(d){var e=this.fitem;if(e.data)for(let a=0;a<e.data.length;a++)this.md?e.data[a].u2&&e.data[a].u2[0].checked&&d.push({code:e.data[a].code,value:e.data[a].value}):e.data[a].u2&&$("input[type='radio']",e.data[a].u2).is(":checked")&&d.push({code:e.data[a].code,value:e.data[a].value})},clear:function(){var d=this,e=d.fitem.data;if(e&&e.length)for(let a=0;a<e.length;a++)d.md?e[a].u2&&(e[a].u2[0].checked=!1):e[a].u2&&e[a].u2.removeAttr("selected");d.trigger("change_val")}}),IG$.$FCinst.radiobuttons=new IG$._FC_radiobuttons;
IG$._FC_slider=$s.extend(IG$._baseFC,{objtype:"slider",s_codemap:1,s_metric:1,events:[{name:"change_val"}],create:function(e){var a,l,t,d,i=this,s=i.fmodel,r=i.fitem,n=$("<div class='idv-sel-combo'></div>").appendTo(e),u=i._get_id();return a=s.s1a?Number(s.s1a):0,l=s.s1b?Number(s.s1b):100,t=s.s1c?Number(s.s1c):1,i.md?(i.lbl$=$("<label class='form-label' for='"+u+"'></label>").appendTo(n),(d=$("<md-slider id='"+u+"' style='flex:1' range='true' labeled='true'></md-slider>").appendTo(n))[0].labels=i.lbl$,i.mp$=d[0],i.mp$.update(),i.updateSlideValue(),i.mp$.addEventListener("change",(function(e){i.slideValueHandler(),i.updateSlideValue(),i.trigger("change_val")}))):d=$("<div class='igc-slider'></div>").appendTo(n).slider({orientation:"horizontal",range:!0,min:a,max:l,values:[a,l],step:t,create:function(e,a){i.updateSlideValue(this)},slide:function(e,a){var l=$(this).offset(),t=$(a.handle).offset().left-l.left;i.slideValueHandler(this,a,t)},change:function(e,a){r.updateValues||(i.updateSlideValue(this),i.trigger("change_val"))},start:function(e,a){$("<div class='guide'></div>").appendTo(this)},stop:function(e,a){var l=$(this).children(".guide");l&&l.remove()}}),i.m1=d,n},loadData:function(e){var a,l,t,d,i,s,r,n,u=this,m=u.fmodel,o=u.m1,c=!0;if(e&&e.length){for(l=t=parseFloat(e[0].code),a=0;a<e.length;a++){if(i=parseFloat(e[a].code),0!=isNaN(i)){c=!1;break}t=Math.min(i,t),l=Math.max(i,l)}if(m.allnumeric=c,c?(d=(l-t)/Math.max(e.length,20),s=m.s1a?Number(m.s1a):t,r=m.s1b?Number(m.s1b):l,n=m.s1c?Number(m.s1c):d):(s=m.s1a?Number(m.s1a):0,r=m.s1b?Number(m.s1b):e.length,n=m.s1c?Number(m.s1c):1),u.md){var v=u.mp$;v.min=s,v.max=r,v.step=n,v.valueStart=s,v.valueEnd=r}else o.slider("option","min",s),o.slider("option","max",r),o.slider("option","step",n),o.slider("values",0,s),o.slider("values",1,r);u.updateSlideValue(o)}},updateValue:function(e){var a,l=this,t=l.m1,d=l.mp$,i=l.fitem,s=l.fmodel,r=l.md?d.valueStart:t.slider("values",0),n=l.md?d.valueEnd:t.slider("values",1),u=l.md?d.min:t.slider("option","min"),m=l.md?d.max:t.slider("option","max");if(0==s.allnumeric){if(r||n<i.data.length)for(a=r;a<n;a++)e.push({code:i.data[a].code,value:i.data[a].disp,operator:"EQ"})}else(u<r||m>n)&&(e.push({code:""+r,value:""+r,operator:"GTE"}),e.push({code:""+n,value:""+n,operator:"LTE"}))},setValue:function(e,a,l){var t=this,d=t.m1,i=t.mp$;t.md?(i.valueStart=e[0]?Number(e[0]):0,i.valueEnd=e[1]?Number(e[1]):1):(d.slider("values",0,e[0]?Number(e[0]):0),d.slider("values",1,e[1]?Number(e[1]):1))},clear:function(){var e=this,a=e.m1,l=e.mp$,t=e.md?l.min:a.slider("option","min"),d=e.md?l.max:a.slider("option","max");e.md?(l.valueStart=t,l.valueEnd=d):(a.slider("values",0,t),a.slider("values",1,d))},updateSlideValue:function(e){var a,l,t,d=this,i=$(e),s=d.mp$,r=d.fitem,n=d.md?[1,1]:i.children("a");if(n&&2==n.length)for(a=0;a<n.length;a++)t=d.md?0==a?s.valueStart:s.valueEnd:i.slider("values",a),t=r&&r.data&&0==r.allnumeric?r.data.length>t?""+r.data[t].code:"":""+t,d.md?0==a?s.valueLabelStart=t:s.valueLabelEnd=t:((l=$(n[a])).tooltip({track:!0,delay:0,fade:250,showURL:!1}),l[0].tooltipText=t)},slideValueHandler:function(e,a,l){var t,d,i=this,s=e?$(e):null,r=i.mp$,n=i.fitem,u=i.md?[1,1]:s.children("a");if(u&&2==u.length)for(t=0;t<u.length;t++)(i.md||a&&a.handle==u[t])&&(d=i.md?0==t?r.valueStart:r.valueEnd:s.slider("values",t),d=n&&n.data&&0==n.allnumeric?n.data.length>d?""+n.data[d].code:"":""+d,i.md?0==t?r.valueLabelStart=d:r.valueLabelEnd=d:s.children(".guide").css({left:l}).html(d))}}),IG$.$FCinst.slider=new IG$._FC_slider;
IG$._FC_textarea=$s.extend(IG$._baseFC,{objtype:"textarea",s_codemap:1,s_metric:1,events:[{name:"change_val"}],properties:[{name:"text",type:"string"},{name:"placeholder",type:"string"}],create:function(e){var a,t=this,l=t.fmodel,n=(l.rangevalue,t.rangelabel,l._init_value||l.initial_values),i=$("<div class='idv-sel-combo'></div>").appendTo(e);return a=$("<div class='idv-sel-flow-full'><textarea name='c_m1'></textarea></div>").appendTo(i),n&&n.length&&($("[name=c_m1]",a).val(t.getDefaultValue(fitem,0)),t.trigger("change_val")),i},updateValue:function(e){var a=this.ui,t=$("[name=c_m1]",a).val();t&&e.push({code:t,value:t})},setValue:function(e,a,t){var l=this.ui;$("[name=c_m1]",l).val(e[0])},clear:function(e){var a=this.ui;$("[name=c_m1]",a).val(""),this.trigger("change_val")},$setProp:function(e,a,t){var l,n=this,i=n.ui;switch(l=$("[name=c_m1]",i),a){case"placeholder":l.attr("placeholder",t);break;case"text":n.setValue([t])}IG$._baseFC.prototype.$setProp.call(n,e,a,t)}}),IG$.$FCinst.textarea=new IG$._FC_textarea;
IG$._FC_text=$s.extend(IG$._baseFC,{objtype:"text",s_codemap:1,s_metric:1,events:[{name:"change_val"}],properties:[{name:"text",type:"string"},{name:"placeholder",type:"string"}],create:function(e){var a,l,t,n,d=this,p=d.fitem,i=d.fmodel,m=i.rangevalue,c=d.rangelabel,s=i._init_value||i.initial_values,r=$("<div class='idv-sel-combo'></div>").appendTo(e),o=null,u=d._get_id();return(l=d.getRangeLabel(c,0,0,m))&&(t=$(l.d).appendTo(r),l.e&&IG$._rrcs(d,l.t,$("span",t),1)),d.md?(lbl$=d.lbl$=$("<label class='form-label' for='"+u+"'>"+(l&&l.d?l.d:"")+"</label>"),a=$("<md-outlined-text-field class='igc-md-ctrl idv-sel-flow-full'></md-outlined-text-field>").appendTo(r),d.mp$=a[0],d.mp$.label=l&&l.d?l.d:"",a.append(d.mp$),d.mp$.update()):a=$("<div class='idv-sel-flow-full'><input type='text' name='c_m1'/></div>").appendTo(r),(l=d.getRangeLabel(c,0,1,m))&&(t=$(l.d).appendTo(r),l.e&&IG$._rrcs(d,l.t,$("span",t),1)),m&&(fid2=d._get_id(),(l=d.getRangeLabel(c,1,2,m))&&(n=$("<div class='igc-f-range-label-td'></div>").appendTo(r),t=$(l.d).appendTo(n),l.e&&IG$._rrcs(d,l.t,$("span",t),1)),(l=d.getRangeLabel(c,2,0,m))&&!d.md&&(t=$(l.d).appendTo(r),l.e&&IG$._rrcs(d,l.t,$("span",t),1)),d.md?(o=$("<div class='idv-sel-flow-full form-outline'></div>").appendTo(r),lbl2$=d.lbl2$=$("<label class='form-label' for='"+u+"'>"+(l?l.d:"")+"</label>"),$("<div class='form-helper'></div>").appendTo(o),d.mp2$=$("<md-outlined-text-field class='igc-md-ctrl idv-sel-flow-full'>"+(l?l.d:"")+"</md-outlined-text-field>").appendTo(o)[0],d.mp2$.update()):o=$("<div class='idv-sel-flow-full'><input type='text' name='c_m2'/></div>").appendTo(r),(l=d.getRangeLabel(c,2,1,m))&&(t=$(l.d).appendTo(r),l.e&&IG$._rrcs(d,l.t,$("span",t),1))),d.md?(m?[d.mp$,d.mp2$]:[d.mp$],$.each(a,(function(e,a){a.addEventListener("keyup",(function(e){13==e.which&&d.trigger("change_val")}))}))):(m?[a,o]:[a],$.each(a,(function(e,a){$("input",a).bind("keyup",(function(e){13==e.which&&d.trigger("change_val")}))}))),s&&s.length&&($("[name=c_m1]",a).val(d.getDefaultValue(p,0)),d.trigger("change_val")),r},updateValue:function(e){var a=this,l=a.fmodel,t=a.ui,n=[a.md?a.mp$:$("[name=c_m1]",t)];l.rangevalue&&n.push(a.md?a.mp2$:$("[name=c_m2]",t)),$.each(n,(function(l,t){var n=a.md?t.value:t.val();n&&e.push({code:n,value:n})}))},setValue:function(e,a,l){var t,n=this,d=n.fmodel,p=n.ui;t=n.md?n.mp$:$("[name=c_m1]",p),n.md?t.value=e[0]:t.val(e[0]),d.rangevalue&&(sctrl2=n.md?n.mp2$:$("[name=c_m2]",p),n.md?sctrl2.value=e[1]:sctrl2.val(e[1]))},clear:function(e){var a=this,l=a.ui,t=a.fitem,n=[a.md?a.mp$:$("[name=c_m1]",l)];t.rangevalue&&n.push(a.md?a.mp2$:$("[name=c_m2]",l)),$.each(n,(function(e,l){a.md?l.value="":l.val("")})),a.trigger("change_val")},$setProp:function(e,a,l){var t=this,n=t.fmodel,d=t.ui,p=[t.md?t.mp$:$("[name=c_m1]",d)];switch(n.rangevalue&&p.push(t.md?t.mp2$:$("[name=c_m2]",d)),a){case"placeholder":$.each(p,(function(e,a){t.md?a.placeholder=l:a.attr("placeholder",l)}));break;case"text":t.setValue([l])}IG$._baseFC.prototype.$setProp.call(t,e,a,l)}}),IG$.$FCinst.text=new IG$._FC_text;
IG$._FC_list=$s.extend(IG$._baseFC,{objtype:"list",s_codemap:1,s_metric:1,create:function(e){var l,t=this,s=t.fitem,i=t.fmodel;i.showpopup,window.bowser,i.rangevalue,i.rangelabel&&i.rangelabel.split("^"),t._get_id();l=$("<div class='idv-sel-list'></div>").appendTo(e);var a=$("<md-outlined-text-field class='igc-md-ctrl idv-sel-flow-full' type='text' placeholder='"+IRm$.r1("B_SEARCH")+"'"+s.model.title+"'><md-icon slot='leading-icon'>search</md-icon></md-outlined-text-field>").appendTo(l)[0];return t.mp$=$("<md-list class='idv-sel-mdlist idv-sel-flow-full'></md-list>").appendTo(l)[0],t.mp$.update(),a.addEventListener("keyup",(function(e){var l=(a.value||"").toUpperCase();$.each(s.sdp,(function(e,t){l?t.md_view.selected||t.label_u.indexOf(l)>-1?t.md_view.style.display="inline":t.md_view.style.display="none":t.md_view.style.display="inline"}))})),l},loadData:function(e){var l,t,s,i=this,a=i.fmodel,d=i.fitem,o=(i.ui,a._init_value||a.initial_values,a.operator),c=0;"EQ"==o||"LIKE"==o||"GT"==o||"LT"==o||"GTE"==o||"LTE"==o?c=1:"BETWEEN"==o&&(c=2),l=$(i.mp$),t=[],s=i.getDefaultValue(d,0),d._svalues=[],$.each(e,(function(e,a){var o=a.disp||a.code,n={label:o,value:a.code};n.label_u=o.toUpperCase(),t.push(n);var u=$("<md-list-item type='button'><div slot='headline'>"+o+"</div><md-icon slot='end'>check</md-icon></md-list-item>").appendTo(l)[0];n.md_view=u,s&&s==a.code&&(d._svalues=[{code:a.code,text:a.disp||a.code,md_view:u}]),u.addEventListener("click",(function(e){if(e.preventDefault(),e.stopImmediatePropagation(),1==c){if(d._svalues.length&&d._svalues[0].code==n.value)return;u.selected=!0}else u.selected=!u.selected;for(let e=0;e<d._svalues.length;e++)d._svalues[e].code==n.value&&d._svalues.splice(e,1);if(u.classList.remove("selected"),u.selected){if(c>0&&d._svalues.length+1>c)d._svalues.pop().md_view.classList.remove("selected");u.classList.add("selected"),d._svalues.push({code:n.value,text:n.label,md_view:u})}i.trigger("change_val")}))})),!a.showallvalue&&(!d._svalues||d._svalues&&0==d._svalues.length)&&t.length&&(d._svalues=[{code:t[0].value,text:t[0].label}],md_view.classList.add("selected"),t[0].md_view.selected=!0),d.sdp=t},setValue:function(e,l,t){var s=this;s.fmodel,s.ui;s.mp$.value=e[0]||""},updateValue:function(e){var l;if((l=this.fitem._svalues)&&l.length)for(let t=0;t<l.length;t++)e.push({code:l[t].code,text:l[t].text})},clear:function(){this.fmodel,this.ui},$setProp:function(e,l,t){var s=this;s.fmodel,s.ui;switch(l){case"placeholder":$.each(sctrls,(function(e,l){l&&l.attr("placeholder",t)}));break;case"value":s.setValue([t])}IG$._baseFC.prototype.$setProp.call(s,e,l,t)}}),IG$.$FCinst.list=new IG$._FC_list;
IG$._FC_fieldset=$s.extend(IG$._baseFC,{objtype:"fieldset",iscontainer:!0,create:function(e){var t,i=this,l=i.fmodel,n=(i.fitem,i.mcap,l.title||" ");return t=$("<fieldset><legend></legend></fieldset>").appendTo(e),n&&$("legend",t).html(n),t},text:function(e){var t=t;$("legend",t).html(e)},$setProp:function(e,t,i){"title"==t&&this.text(i),IG$._baseFC.prototype.$setProp.call(this,e,t,i)}}),IG$.$FCinst.fieldset=new IG$._FC_fieldset;
IG$._FC_panel=$s.extend(IG$._baseFC,{objtype:"panel",iscontainer:!0,create:function(e){return $("<fieldset class='df-panel'></fieldset>").appendTo(e)}}),IG$.$FCinst.panel=new IG$._FC_panel;
IG$.dynFilterDateConfig={data:[{lname:"L_TODAY",value:"today"},{lname:"L_LAST_1D",value:"last1day"},{lname:"L_LAST_2D",value:"last2day"},{lname:"L_LAST_3D",value:"last3day"},{lname:"L_LAST_4D",value:"last4day"},{lname:"L_LAST_5D",value:"last5day"},{lname:"L_LAST_6D",value:"last6day"},{lname:"L_LAST_7D",value:"last7day"},{lname:"L_LAST_8D",value:"last8day"},{lname:"L_LAST_10D",value:"last10day"},{lname:"L_FROM_MON",value:"frweek"},{lname:"L_LAST_15D",value:"last15day"},{lname:"L_LAST_30D",value:"last30day"},{lname:"L_FROM_1ST_MON",value:"frmon"},{lname:"L_LAST_1M",value:"last1mon"},{lname:"L_LAST_2M",value:"last2mon"},{lname:"L_LAST_6M",value:"last6mon"},{lname:"L_LAST_1Y",value:"last1year"},{lname:"L_LAST_2Y",value:"last2year"},{lname:"L_LAST_3Y",value:"last3year"},{lname:"L_LAST_4Y",value:"last4year"},{lname:"L_LAST_5Y",value:"last5year"}],getValue:function(e,t,i,a){var n,l,o,r,s=new Date;if(0==t){if(e.indexOf("last")>-1){if(e.indexOf("day"))for(n=1;n<32;n++)if(e=="last"+n+"day"){s.setDate(s.getDate()-n),r=1;break}if(!r&&e.indexOf("mon"))for(n=1;n<13;n++)if(e=="last"+n+"mon"){s.setMonth(s.getMonth()-n),r=1;break}if(!r&&e.indexOf("year"))for(n=1;n<11;n++)if(e=="last"+n+"year"){s.setMonth(s.getMonth()-12*n),r=1;break}}if(!r)switch(e){case"today":break;case"frweek":startDay=0,s.setDate(s.getDate()-(7+s.getDay()-startDay)%7);break;case"frmon":s.setDate(1)}}return l=(l=s.getMonth()+1)<10?"0"+l:l,o=(o=s.getDate())<10?"0"+o:o,s.getFullYear()+(!a||i?"-"+l:"")+(i||a?"":"-"+o)},transDate:function(e){var t=e.split("-");return new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]))},initNames:function(){var e=this;e._init_names||($.each(e.data,(function(e,t){t.name=IRm$.r1(t.lname)})),e._init_names=1)}},IG$.dynFilterView=function(e,t,i,a,n){var l=this;l.instance=e,l.report=a,l.meta_type=a?a.meta_type:null,l.dzone=a?a.dzone:null,l.isdashboard=1==n,l.isformview=2==n,l.container=t,l.utimer=-1,l.sheetoption=i,l.reportoption=a.reportoption,l._minit(),l.updateValues=!0,l._fmax=0,l._rcs=[],l.dzone&&l.setDocZone(l.dzone)},IG$.dynFilterView.prototype={_minit:function(){var e,t=this,i=t.sheetoption;if(t.reportoption){var a=t.reportoption._mc;e=a.prompt_default_valueset=a.prompt_default_valueset||{},default_valuesets=e.default_valuesets=e.default_valuesets||{},t.prompt_valueset=default_valuesets[i.docid]=default_valuesets[i.docid]||[]}},removeObj:function(){},_sinit:function(){var e,t,i,a=this,n=a.sheetoption.model,l=n?n.filter_options:null,o=!!l&&l.showbutton,r=!!l&&l.f_bx_enable,s=n?n.filter_items:null;(i=a.filter_items=[],$.each(s,(function(n,l){var o,r=l.fuid;if(o=l.options=l.options||{},l.options=l.options||{},r){var s=Number(r.substring(r.indexOf("_")+1));a._fmax=Math.max(s,a._fmax)}"button"==l.objtype&&("updateFilterValues"==o.action?e=1:"f_bx"==o.action&&(t=1)),i.push({model:l})})),o&&!e)&&((d={objtype:"button",options:{text:l.buttonname||"{L_BTN_SEARCH}",action:"updateFilterValues"}}).title=d.options.text,s.push(d),i.push({model:d}));if(r&&!t){var d={objtype:"button",options:{text:l.f_bx_name||"{L_D_EXCEL}",action:"f_bx"}};s.push(d),i.push({model:d})}$.each(i,(function(e,t){t.model.fuid||(t.model.fuid="uid_"+ ++a._fmax)}))},setDocZone:function(e){var t=this;!t.dzone&&e&&e.box&&(t.dzone=e,t.dzone.box.bind("updatecomplete",(function(){t.updateViewSelector()})))},exportSheet:function(e){this.container.trigger("export_sheet",[this,{filetype:e}])},_reindex:function(e,t,i,a){var n=this,l=n.filter_items,o=n.sheetoption.model.filter_items;$.each(e.children,(function(e,o){$.each(l,(function(e,r){var s,d;if(r.u1[0]===o)return d=r.u2,r.model.parent_fuid=null,t&&(r.model.parent_fuid=t.model.fuid+(a?"#"+a:"")),i.push(r),l.splice(e,1),d.iscontainer&&d.ui&&(d.get_container?(s=d.get_container(),$.each(s,(function(e,t){n._reindex(t,r,i,e+1)}))):n._reindex(d.ui[0],r,i)),!1}))})),!t&&l.length||t||(o.splice(0,o.length),$.each(i,(function(e,t){t.model&&o.push(t.model),l.push(t)})),n.updateDisplay())},set_mode:function(e){var t,i=this;i.contentarea[0];t=i._editmode!=e,i._editmode=e,t&&(e&&i.set_mode_design(),!e&&i.set_mode_view()),i.updateDisplay()},set_mode_design:function(){var e=this,t=e.filter_items,i=[e.contentarea[0]],a=e._ddr;$.each(t,(function(t,i){e.set_mode_design_item(i)})),a||(a=e._ddr=new dragula(i,{invalid:function(e,t){return!!$(e).hasClass("ui-resizable-handle")}}),a.on("drop",(function(t){e._reindex(e.contentarea[0],null,[])})),a.on("cancel",(function(t){e.updateDisplay()})),a.on("drag",(function(e,t){var i=$(e);i.hasClass("df-filter-cont")&&i.css({width:"initial",height:"initial"})})))},set_mode_design_item:function(e){var t,i,a=this,n=e.model,l=e.u1,o=e.u2;l&&(i=$(l[0].parentNode),l.resizable({containment:i[0],start:function(t,i){e._orig_colspan=n.colspan},resize:function(e,t){var a,n=i.innerWidth(),l=Math.floor(n/12),o=t.size,r=o.width;a=Math.round(r/l),o.height=t.originalSize.height,o.width=a*l},stop:function(e,t){var l,o=i.innerWidth(),r=Math.floor(o/12),s=t.size.width;(l=Math.round(s/r))>0&&l<13&&(n.colspan=l),a.updateDisplay()}})),o&&o.iscontainer&&o.ui&&(o.get_container?(t=o.get_container())&&t.length&&(els=els.concat(t)):els.push(o.ui[0]))},set_mode_view:function(){var e=this,t=e.filter_items,i=(e.contentarea[0],e._ddr);$.each(t,(function(e,t){var i=t.u1;i&&i.resizable("instance")&&i.resizable("destroy")})),i&&(i.destroy(),e._ddr=null)},init_f:function(e){var t,i=this,a=i.sheetoption;i._ddr&&i._ddr.destroy(),$(i.container).empty(),i.contentarea=$("<div class='idv-filter-main'></div>").appendTo(i.container),setTimeout((function(){i.setSize()}),20),a.model.fit_content_h&&a.model.fit_content_h||IG$.setScrRect($(i.container)),i.splash=$("<div class='idv-dfilt-splash'></div>").appendTo(i.container).hide(),t=i.contentarea[0],a&&(a.model.filter_options=a.model.filter_options||{},i._sinit(),!i.isdashboard&&$s.dropzone&&(i.dropZone=$s.create($s.dropzone,t,{ddGroup:"_I$RD_G_",nodeouttimer:-1,getTargetFromEvent:function(e){return t},onNodeEnter:function(e,t,a,n){var l=!1,o=n.records;i._editmode&&(o&&o.length?(o[0].data.type.toLowerCase(),l=!0):n.cellData&&(n.cellData,l=!0)),this.accept=l},onNodeOver:function(e,t,a,n){var l=this.accept,o=l,r=n.records;return l&&i._editmode&&(r&&r.length?r[0].data:n.cellData),o},onNodeDrop:function(e,t,a,n){var l,o=n.records;return this.accept&&i._editmode&&(l=o&&o.length?o[0].data:n.cellData,i.appendFiltering(l)),i.accept=!1,!0}})),setTimeout((function(){i.validateItems(void 0,e)}),100))},setSize:function(e,t){var i=this,a=i.sheetoption,n=i.container,l=i.contentarea;if(l){l.css({minHeight:"auto"});var o=n.innerHeight();a.model.fixed_height&&a.model.fit_content_h?i.contentarea.css({minHeight:"40px"}):i.contentarea.css({minHeight:o+"px"}),i.updateDisplay()}},_get_p:function(e,t,i){var a=this.$FM;return a&&(e=a._get_p(e,t,i)),e},createFilterUI:function(e,t,i){var a,n,l=this,o=l.sheetoption.model.filter_options,r=o.showbutton,s=!r&&o.f_b_evt?1:0,d=e.model,u=d.f_t_dir||o.f_t_dir;if(!l.__dx){var c;n=e.objtype=d.objtype=d.objtype||"text","valueset"==d.type&&(n=e.objtype="combobox",d.showallvalue=!0,showpopup=d.showpopup=!1,rangevalue=d.rangevalue=!1,l._vsbtn=e,t.addClass("igc-flt-valueset")),e.dt1=null,e.dt2=null,titlecap=$("<div class='df-titlecap-"+("top"==u?"top":"row")+"'></div>"),t.append(titlecap),(c=$("<div class='df-item-row'></div>")).appendTo("top"==u?titlecap:t),(a=new IG$["_FC_"+n]({instance:l.instance,objtype:n,container:c,mcap:t,form:l,fitem:e})).$create(),l.isformview?$.each(a.events,(function(t,i){c.bind("fc_"+i.name,(function(t){var a=arguments;l.container.trigger("i_c_event",[l,e,i,a])})),c.bind("fc_invalidate",(function(e){l.updateDisplay()}))})):c.bind({fc_change_val:function(t,i){l.updateHierarchy(e),r||!0===i||s||l.updateFilterValues()},fc_button_click:function(e,t){l._btn_handler(t)}}),e.lcap=c,e.u1=t,e.u2=a,e.u4=titlecap,e.u3=$("<span class='df-title'></span>");var p,f=["<div class='df-filter-config'>","<div class='df-config' title='"+IRm$.r1("B_CONFIG_ITEM")+"'>","<span class='icon-config'></span>","</div>","<div>"],h=$(["<div class='df-title-container'>","</div>"].join("")).prepend(e.u3);f=$(f.join("")).appendTo(t);titlecap.prepend(h),e._tbar=t,"top"==u&&(e.u4=h),e.u3[e.isnecessary?"addClass":"removeClass"]("df-title-necessary");var m=function(){if(l._editmode)if(l.isformview)l.container.trigger("widget_config",[l,e]);else{var t=new IG$.dynFilterConfig({instance:l.instance,filter_options:l.sheetoption.model.filter_options,pitem:e,dzone:l.dzone,viewmode:l.isformview?2:l.isdashboard?1:0,meta_type:l.meta_type,callback:new IG$.callBackObj(l,(function(){var t=e.u1;t.empty(),l.createFilterUI(e,t),l.validateItems(null,!1,!1,!0)}),e)});IG$.showDlg(l,t)}};e.u3.click((function(){m()}));return $(".df-config",t).click((function(){var t,i,a,n,o,r,s,d;t=this,o=[{text:IRm$.r1("L_DEL_FLT"),callback:function(){var t,i=l.sheetoption.model.filter_items,a=l.filter_items;for(t=0;t<i.length;t++)if(i[t]==e.model){i.splice(t,1);break}for(t=0;t<a.length;t++)if(a[t]==e){a.splice(t,1);break}l.validateItems(null,!1,!1,!0)}},{text:IRm$.r1("L_ADD_LABEL"),callback:function(){var t,i=l.sheetoption.model.filter_items,a=l.filter_items,n={objtype:"label",fuid:"uid_"+ ++l._fmax,colspan:1},o=!1;for(t=0;t<a.length;t++)if(a[t]==e){a.splice(t+1,0,{model:n}),o=!0;break}if(o)for(t=0;t<i.length;t++)if(i[t]==e.model){i.splice(t+1,0,n);break}l.validateItems(null,!1,!1,!0)}},{text:IRm$.r1("B_CONFIG_ITEM"),callback:function(){m()}}],r=$(t).offset(),s=$("body").width(),(d=$("#dynfilter_menu",document.body)).length||(d=$("<div id='dynfilter_menu' class='igc-pop-menu'></div>").appendTo(document.body)),d.empty(),n=$("<div class='igc-pop-menu-bg'></div>").appendTo(d),a=$("<ul class='igc-pop-menu-ul'></ul>").appendTo(d),n.bind("click",(function(e){e.stopPropagation(),e.preventDefault(),d.remove()})),$.each(o,(function(e,t){var i=$("<li></li>").appendTo(a);i.append("<div>"+t.text+"</div>"),i.bind("click",(function(e){e.stopPropagation(),e.preventDefault(),t.callback&&t.callback.apply(l),d.remove()}))})),a.menu({classes:{"ui-menu":"highlight"}}),a.show(),i=a.width(),a.css({top:r.top+10,left:s>r.left+10+i?r.left+10:s-i})})),d.compcss&&t.addClass(d.compcss),p=d.ltitle||d.title||d.lname||d.name||"&nbsp;",p=IG$._rrcs(l,p,e.u3),e.u3.html(p),l._editmode&&l.set_mode_design_item(e),a}},_btn_handler:function(e){var t=this;if("updateFilterValues"==e.model.options.action)t.updateFilterValues(0,null,0,1);else if("f_bx"==e.model.options.action){var i,a,n=[],l=t.sheetoption.model.filter_options,o=t.report.sheets;if(l.f_bx_all_sheets)for(i=0;i<o.length;i++)a="sheet_"+o[i].sheetindex,n.push(a);else n=l.f_bx_sheets;t.downloadExcel(1,null,1,n)}else e.model.options.action&&t.container.trigger("button_clicked",[e.model.options.action,t,e])},clearFilter:function(e){var t=this,i=e.u2,a=t.sheetoption.model.filter_options,n=a.showbutton,l=!n&&a.f_b_evt?1:0;t.__dx||(i.$clear(),n||l||t.updateFilterValues())},appendFiltering:function(e){var t=this,i=t.filter_items,a=t.sheetoption.model.filter_items,n=t.isformview;if(!IG$.testVal("metric|measure|custommetric|formulameasure|multimetric|multimeasure|groupfield",e.type.toLowerCase())){if(n&&!IG$["_FC_"+e.type])return;if(!n)return}var l={},o=e.memo?e.memo.toLowerCase():e.memo;switch(IG$.CopyObject(e,l,"uid;name;nodepath;type;sql_id;objtype;options"),l.uid=IG$.formatUID(l.uid),l.objtype=l.objtype||"text",l.fuid="uid_"+ ++t._fmax,l.title=l.name||l.objtype+"_"+t._fmax,l.colspan=4,l.type.toLowerCase()){case"metric":case"custommetric":"date"==o||"datetime"==o||"timestamp"==o?(l.operator="EQ",l.objtype="text"):(l.operator="LIKE",l.objtype="text",l.showallvalue=!0);break;case"measure":case"formulameasure":case"measuregroup":l.operator="GT",l.objtype="text"}i.length&&"button"==i[i.length-1].objtype?(i.splice(i.length-1,0,{model:l}),a.splice(a.length-1,0,l)):(i.push({model:l}),a.push(l)),t.validateItems()},getPvalue:function(e){var t,i,a,n=[];if(e.pvalues)for(i=e.pvalues.split("\n"),t=0;t<i.length;t++)a=i[t].split(";"),n.push({code:a[0],disp:a[1]});return n},gen_fltmap:function(e,t){var i=this;e&&"group"==e.ftype?$.each(e.children,(function(e,a){i.gen_fltmap(a,t)})):e&&"condition"==e.ftype&&e.fields&&e.fields.length&&e.values&&e.values.length&&(t[e.fields[0].name]=e.values)},validateItems:function(e,t,i,a){var n,l,o,r,s,d,u,c,p,f,h,m,_,v,g,b=this,y=e||b.filter_items,x=[],w={items:[]},I=b.reportoption;if(y){if(d=b._req_values=b._req_values||{},window._report_prompt&&window._report_prompt.length)for(u=window._report_prompt,c=[],p={},f=0;f<u.length;f++)_={name:(m=u[f]).name,values:m.values},c.push(_),p[_.name]=_;for(h=0;h<y.length;h++)if(n=y[h],l=n.model,r=l.objtype,s=l.type,g=l.codemapping,a&&(n.validated=!1),!n.validated)if("viewselector"==s);else if("valueset"==s);else if(IG$.testVal("combobox|checkbox|radiobox|slider|checkbuttons|radiobuttons|list",r)){if(l.showpopup&&"combobox"!=r&&"checkbox"!=r&&(l.showpopup=!1),l.showpopup)continue;!1===(o=a?void 0:b.checkHFilter(n))||("prompt"!=s&&l.uid?(x.push({name:l.name,uid:l.uid,objtype:l.objtype,nodepath:l.nodepath,rptid:l.uid,sql_id:l.sql_id}),d[l.uid]||(d[l.uid]=1),w.items.push({uid:l.uid,cmap:g,sql_id:l.sql_id,hfilter:o})):(n.validate=!0,n.data=[],g&&g.uid?(x.push({uid:g.uid,type:l.type,rptid:g.uid}),d[g.uid]||(d[g.uid]=1),w.items.push({uid:g.uid,cmap:g,hfilter:o})):n.pvalues&&(n.data=b.getPvalue(n),b.updateFilterValue(y[h]))))}if(b.updateValues=!0,b.isloaded=!1,"sql_report"==b.meta_type&&I&&(w.report=I.getCurrentPivot(),w.report.meta_type=b.meta_type),w.sql_prompt=c,b._init_flt&&(t||a))for(v={},$.each(b._init_flt,(function(e,t){b.gen_fltmap(t,v)})),b._init_flt=null,h=0;h<y.length;h++)l=y[h].model,v[l.name]&&(l._init_value=v[l.name]);var k=function(n){var o=0,s=n.erroritems;if(i||(o=1),s&&s.length&&$.each(s,(function(e,t){IG$.ShowErrorMessage(t,b,null)})),b.rs_validateItems(n,e,t,i,a,o),t||a){var d,u;for(h=0;h<y.length;h++)d=y[h],l=d.model,r=l.objtype,u=l.type,d.validated||"viewselector"!=u||b.updateViewSelector(d);if(b._vsbtn){var c=$("select",b._vsbtn.u2.ui);c.val()&&setTimeout((function(){b._upd_vs_value(c.val())}),100)}}},L=new IG$._rpc$;w.option="ValueInfo",L.init(b,{ack:"olapservice",payload:x,mbody:w,meta_type:"valueinfo"},b,(function(e){k(e),b.container.trigger("value_info",[e])}),(function(e){k(e)}),[e,t]),L.send()}},updateViewSelector:function(){var e,t,i,a,n,l,o,r,s,d,u=this,c=u.filter_items,p=0,f=0;if(u.dzone&&c)for(e=0;e<c.length;e++)if(r=(l=(n=c[e]).model).objtype,"viewselector"==l.type){if(i={data:[]},n.data&&"radiobuttons"==r)for(t=0;t<n.data.length;t++)if(n.data[t].u2&&$("input[type='radio']",n.data[t].u2).is(":checked")){p=t;break}if(s=(a=u.dzone.docitems[l.tabid])?a.children:null)for(t=0;t<s.length;t++)o={code:(d=a.children[t]).docid,disp:d.lt.ubody.title||d.lt.ubody.name},f==p&&(o.selected=!0),i.data.push(o),f++;n.validated=!0,n.data=i.data,u.loadFilterStore(n),u.updateFilterValue(n)}},rs_validateItems:function(e,t,i,a,n,l){var o,r,s,d,u,c=this,p=t||c.filter_items;if(!c.__dx&&(d=IG$.parseValueList(e.value_results),c._parameters={},$.each(e.parameters,(function(e,t){c._parameters[t.name]=t})),c.updateValues=!1,t||a||(c._sinit(),p=c.filter_items,c.drawControls(i,n)),d)){for(r=0;r<d.length;r++)for(s=d[r],o=0;o<p.length;o++)(u=p[o]).model.codemapping&&u.model.codemapping.uid==s.uid?(u.validated=!0,u.data=s.data,c.loadFilterStore(u)):u.model.uid!=s.uid||u.validated||u.model.codemapping||(u.validated=!0,u.data=s.data,c.loadFilterStore(u));for(o=0;o<p.length;o++)if(!(u=p[o]).validated){if("valueset"==u.model.type)continue;u.validate=!0,u.data=[],c.loadFilterStore(u)}}},checkHFilter:function(e){var t,i,a,n,l,o=this,r=null,s=o.filter_items,d=e.model;for(a=0;a<s.length;a++)if(s[a].model.propagation&&(l=s[a]).u3)if(n=o.getHFilter(l))l.u2.clearInvalid(),(r=r||[]).push(n);else if(l.model.isnecessary||0===n){l.model.isnecessary&&l.u2&&l.u2.markInvalid("required"),r=!1;break}if(!1!==r&&d.hfilter&&d.hfilter.length)for(t=d.hfilter.split(";"),i=0;i<t.length;i++){for(l=null,a=0;a<s.length;a++)if(s[a].model.name==t[i]){l=s[a];break}if(!l){r=!1;break}if(l.value=[],n=o.updateFilterValue(l))l.u2.clearInvalid(),(r=r||[]).push(n);else if(l.model.isnecessary||0===n){l.model.isnecessary&&l.u2&&l.u2.markInvalid("required"),r=!1;break}}return r},drop_item:function(e,t){var i,a,n,l,o,r,s=this.contentarea,d=this.filter_items,u=s.offset();for(o=t.pageX-u.left,py=t.pageY-u.top,i=0;i<d.length;i++)if(r=d[i],fmodel=r.model,a=r.u1.offset().left-u.left,n=r.u1.width(),a<o&&o<a+n){l=o<a+n/2?i:i+1;break}if(l>-1)for(i=0;i<d.length;i++)if(d[i]==e){d.splice(i,1),i<l&&l--,0==l?e.u1.prependTo(s):e.u1.insertAfter(d[l-1].u1),d.splice(l,0,e);break}},_do_layout:function(){var e=this,t=e.filter_items,i=[],a={};$.each(t,(function(e,t){t.child=[],a[t.model.fuid]=t,t.u1&&t.u1.css({width:"initial",height:"initial"}),t.u2&&"tabpanel"==t.u2.objtype&&$.each(t.u2.tabs,(function(e,i){t.child.push([])}))})),$.each(t,(function(e,t){var n,l,o=t.model.parent_fuid;o?(o.indexOf("#")>0&&(n=Number(o.substring(o.indexOf("#")+1)),o=o.substring(0,o.indexOf("#"))),o&&a[o]?(l=a[o],n?l.child.length>n-1?l.child[n-1].push(t):i.push(t):l.child.push(t)):(i.push(t),t.child=[])):i.push(t)})),e._do_layout_worker(i,e.contentarea)},_do_layout_worker:function(e,t){var i,a=this,n=a.container.width(),l=a.sheetoption.model.filter_options,o=t.width(),r=t.innerHeight(),s=t.offset(),d=Math.floor(o/12),u=0,c=a.p;c&&c.addClass("df-layout-normal");for(let t=0;t<e.length;t++)if("top"!=((i=e[t]).model.f_t_dir||l.f_t_dir)){if("button"==i.objtype||i.u2&&i.u2.iscontainer)continue;u=Math.max(u,IG$.j$ext._w(i.u3)+10)}$.each(e,(function(t,i){var o,c,p,f,h=e.length>t+1?e[t+1]:null,m=h?h.model:null,_=i.model,v=i.u4,g=i.u1,b=i.lcap,y=_.colspan||1,x=(m&&h.model.colspan,_.rowfullheight),w=_.f_t_dir||l.f_t_dir;if(b&&(i._owidth=b.width(),i._dgap=g.outerWidth(!0)-g.width()),u&&!_.merge_left&&"top"!=w&&IG$.j$ext._w(v,u),g){if(x){var I={};x&&(I.height="initial",b.addClass("df-full-height")),b.css(I),o=b.offset(),c=y*d,x&&(p=r-(o.top-s.top)-10)&&g.height(p)}else c=y*d;c=Math.min(n,c),g.outerWidth(c,!0),"checkbuttons"==_.objtype?((f=$(".idv-checkbuttons",g)).removeClass("checkbutton-horizontal"),_.checkbuttonhor&&f.addClass("checkbutton-horizontal")):"radiobuttons"==_.objtype?((f=$(".mec-radiobuttons",g)).removeClass("checkbutton-horizontal"),_.checkbuttonhor&&f.addClass("checkbutton-horizontal")):f=$(".idv-sel-combo",g),i.child&&i.child.length&&i.u2&&i.u2.iscontainer&&i.u2.ui&&("tabpanel"==i.u2.objtype?$.each(i.child,(function(e,t){a._do_layout_worker(t,i.u2.getPage(e+1).html)})):a._do_layout_worker(i.child,i.u2.ui))}i.u2&&i.u2.resize&&i.u2.resize()})),a._mbox={rx:[],rh:[],mh:{},mw:{}},l.f_bx_enable&&a._sxbtn&&(cy=4,a._sxbtn.css({position:"relative"})),l.showbutton&&a._sbtn&&(cy=4,a._sbtn.css({position:"relative"})),a.container.trigger("layout_completed")},_upd_vs_list:function(){var e,t,i=this,a=i._vsbtn;t=a.data=[],i.prompt_valueset&&(e=i.prompt_valueset,$.each(e,(function(e,i){t.push({code:i.name})}))),i.loadFilterStore(a)},_upd_vs_value:function(e){var t,i,a,n=this,l=n.filter_items,o=n.sheetoption.model.filter_options,r=o.showbutton,s=!r&&o.f_b_evt?1:0,d=n.prompt_valueset;if(d){for(a=0;a<d.length;a++)if(d[a].name==e){t=d[a];break}t&&t.filter_values&&(i=t.filter_values,$.each(l,(function(e,t){if("valueset"!=t.model.type&&i[t.model.fuid]){var a=i[t.model.fuid];n._sel_filter_value(t,a)}})),r||s||n.updateFilterValues())}},setFilterValue:function(e,t,i){var a,n,l=this.filter_items;for(n=0;n<l.length;n++)if(l[n].model.name==e||l[n].model.objectid==e){a=l[n];break}a&&this._sel_filter_value(a,{values:[t]})},runFilter:function(){this.updateFilterValues()},_sel_filter_value:function(e,t){var i,a=e.u2,n=t.values,l={},o=[];for(i=0;i<n.length;i++)l[n[i]]=1,o.push({code:n[i],value:n[i]});a.$setValue(n,l,o)},_save_vs:function(){var e=this,t=e.reportoption._mc,i=t.prompt_default_valueset,a=new IG$._rpc$;i.meta_type="valueset",a.init(e,{ack:"writecontent",payload:{address:i.uid?i.uid:t.nodepath+"/valuset",name:"valueset",type:"ValueSet",pid:i.uid?null:t.uid},mbody:i,meta_type:"valueset"},e,(function(e){})),a.send()},drawControls:function(e,t){var i,a=this,n=a.filter_items,l=(a.sheetoption.model.filter_options,a.contentarea);if(l.empty(),n.length){var o,r={};for($.each(n,(function(e,t){var i,n,s,d,u=t.model,c=l,p=$("<div class='df-filter-cont'></div>"),f=u.parent_fuid;p.addClass("df-filter-"+u.objtype),r[u.fuid]=t,f&&((n=f.indexOf("#"))>0&&(s=Number(f.substring(n+1))||0,f=f.substring(0,n)),(i=r[f])&&i.u2&&i.u2.iscontainer?c="tabpanel"==i.u2.objtype?(d=i.u2.getPage(s))?d.html:l:i.u2.ui:u.parent_fuid=null),p.appendTo(c),a.createFilterUI(t,p,o),u.ishidden&&p.addClass("df-filter-hidden"),"valueset"==u.type&&(a._upd_vs_list(t),t.u3.bind("click",(function(e){if(!a._editmode){e.stopPropagation(),e.preventDefault();var t=new IG$.rptValSet({instance:a.instance,ptr_dyn:a,callback:new IG$.callBackObj(a,(function(e){a._save_vs(),a._upd_vs_list()}))});IG$.checkLogin(a,t)}}))),u.merge_left?(p.addClass("df-filter-mergeleft"),o&&o.u1&&o.u1.addClass("df-filter-mergeright")):(p.removeClass("df-filter-mergeleft"),o&&o.u1&&o.u1.removeClass("df-filter-mergeright")),o=t})),i=0;i<n.length;i++)a.updateFilterValue(n[i],e)}a.updateDisplay(),a.isloaded=!0,a.updateValues=!1,a.firstRun(),setTimeout((function(){a.updateFilterValues(e,null,t)}),500)},downloadExcel:function(e,t,i,a){var n=this,l=n.report,o={},r=1,s=n.dzone.docitems;a&&a.length&&s&&($.each(a,(function(e,t){var i,a,n;for(i=0;i<l.sheets.length;i++)if(t=="sheet_"+l.sheets[i].sheetindex){a=l.sheets[i];break}if(a&&a.renderBox){if((n=s[a.renderBox])&&!n.visible)return;if(!a.jobid)return r=0,!1;o[t]=1}})),!r)?IG$.ShowError(IRm$.r1("L_RUN_RPT_FIRST"),n):n.report.downloadExcel(e,t,i,o)},updateDisplay:function(){var e=this;e.utimer&&clearTimeout(e.utimer),e.utimer=setTimeout((function(){e.rs_updateDisplay()}),80)},rs_updateDisplay:function(){var e=this;e.utimer=-1,e.sheetoption&&e._do_layout()},changeActiveTab:function(e,t,i,a){var n,l,o,r=this.dzone.docitems[e.model.tabid],s=e.value.length?e.value[0].code:null,d=r?r.lt.ubody:null;if(r&&d&&d.view&&s)for(o=r.children,n=0;n<o.length;n++)if(l=o[n],t&&(l.lt.ubody.visible=!1),l.docid==s&&d.view.buttons.length>n){if(!t){i?d.view.setActiveDoc(s,!0):d.view.buttons[n].trigger("click");break}l.lt.ubody.visible=!0}},firstRun:function(){this.afterInit&&this.afterInit.f.call(this.afterInit.p,this)},checkFilterValues:function(e,t,i){var a,n,l,o=this.filter_items,r=!0,s=[];for(a=0;a<o.length;a++)n=o[a],r=0==(l=this.checkFilterValuesItem(n,s,e,t))?l:r;return 0!=r||(s.length&&!e&&IG$.alertmsg(ig$.appname,IRm$.r1("M_SEL_ERR",s.join(",")),null,null,1,"error"),!1)},checkFilterValuesItem:function(e,t,i,a){var n,l=e.model,o=!0;return e.value=[],e.u2&&(e.u2.clearInvalid(),e.value=[],(0===(n=this.updateFilterValue(e))||!n&&l.isnecessary)&&(o=!1,!n&&l.isnecessary,e.u2.markInvalid("required"))),"viewselector"==l.type&&e.u2&&(e.value=[],this.updateFilterValue(e),e.value&&e.value.length&&a.push(e)),o},updateFilterValues:function(e,t,i,a){var n=this,l=[],o=n.sheetoption.model,r=n.filter_items,s=o.filter_options,d=!!s&&s.showbutton&&s.f_b_trg?1:0,u=d&&s.f_b_trg_all?1:0,c=n.checkFilterValues(e?1:0,l),p=s?s.f_b_scr:null,f=1,h=new Date,m=n.last_exec?h-n.last_exec:0;if(n.last_exec&&m<500){if(n.last_execcnt=n.last_execcnt||0,n.last_execcnt+=1,n.last_exec=h,n.last_execcnt>4)return}else n.last_execcnt=0,n.last_exec=h;if(c&&n.callback&&0==n.updateValues){for(v=0;v<l.length;v++)n.changeActiveTab(l[v],!0);if(n._fr=e,c&&d&&n.report&&(n.report.updateAllFilters(n,u)||(f=0)),i||e&&!t)e&&n.container.trigger("i_ready");else{if(f&&p){var _=window[p];!_&&ig$.report_script$&&(_=ig$.report_script$[p]?ig$.report_script$[p].handler:null);try{var v,g,b={};for(v=0;v<r.length;v++)b[r[v].model.name]=r[v].value;if(0==(g=_.call(this,b,n.report)))return;if(g&&g.err)return f=0,void IG$.alertmsg(ig$.appname,f.errmsg,null,null,1,"error")}catch(e){return}}f&&(a?(n.callback.execute(n),s.f_bx_enable&&n._sxbtn&&n._show_excel_btn(0)):n.callback.execute(n))}for(v=0;v<l.length;v++)n.changeActiveTab(l[v],void 0,e,t)}},_show_excel_btn:function(e){var t=this,i=t.report,a=t.sheetoption.model.filter_options.f_bx_sheets,n=1,l=t.dzone.docitems;if(l&&i&&(!i||i.sheets)&&!t._excel_btn_visible)if(a&&a.length&&$.each(a,(function(e,t){var a,o,r;for(a=0;a<i.sheets.length;a++)if(t=="sheet_"+i.sheets[a].sheetindex){o=i.sheets[a];break}if(o&&o.renderBox&&l){if((r=l[o.renderBox])&&!r.visible)return;if(!o.jobid)return n=0,!1}})),n)t._excel_btn_visible=1,setTimeout((function(){t._sxbtn.fadeIn()}),100);else{if(e>30)return;setTimeout((function(){t._show_excel_btn(e++)}),1e3)}},isVisibleItem:function(e,t){var i,a,n,l=0,o=t.split("="),r=e.value;if(o[0]==e.model.name&&r&&o[1])for(n=o[1].split(","),i=0;i<r.length;i++){if(r[i].code==o[1]){l=1;break}if(n.length>1)for(a=0;a<n.length;a++)if(r[i].code==n[a]){l=1;break}if(l)break}return l},updateHierarchy:function(e){var t,i,a,n,l,o,r=this,s=[],d=[],u=e.model,c=r.filter_items,p=null;if(u.invokejs&&(window[u.invokejs]?p=window[u.invokejs].call(r,e):ig$.report_script$&&ig$.report_script$[u.invokejs]&&ig$.report_script$[u.invokejs].handler&&(p=ig$.report_script$[u.invokejs].handler.call(r,r,e))),0!=p){if(u.propagation)for(t=0;t<c.length;t++)(l=(n=c[t]).model).name==u.name||l.propagation||(n.validated=!1,s.push(n)),l.name!=u.name&&l.showcondition&&l.showcondition.indexOf(u.name)>-1&&d.push(n);else for(t=0;t<c.length;t++){if((l=(n=c[t]).model).name!=u.name&&l.hfilter&&l.hfilter.length)for(a=l.hfilter.split(";"),i=0;i<a.length;i++)a[i]==u.name&&(n.validated=!1,s.push(n));l.name!=u.name&&l.showcondition&&l.showcondition.indexOf(u.name)>-1&&d.push(n)}if(d.length){for(e.value=[],r.updateFilterValue(e),t=0;t<d.length;t++)o=r.isVisibleItem(e,d[t].model.showcondition),r.controlVisible(d[t],o);r._do_layout()}s.length&&(e.value=[],r.updateFilterValue(e),r.initFilter(s),r.validateItems(s,void 0,!0))}return p},controlVisible:function(e,t){var i=t?"show":"hide";e.u1[i]()},loadFilterStore:function(e){e.data=e.data||[],e.updateValues=!0,e.u2&&e.u2.$loadData(e.data),e.updateValues=!1},updateFilterPrompt:function(e){var t,i,a,n,l,o=this.filter_items;for(i=0;i<o.length;i++)if((t=o[i]).value&&t.value.length){for(a=0;a<t.value.length;a++)l=t.value[a].value||t.value[a].code,n=0==a?l:n+", "+l;e[t.name]=n}},getExportData:function(e,t,i,a,n){var l,o,r,s,d,u,c,p=this.filter_items,f=(this.sheetoption.model.filter_options,0),h=e,m=t;for(r=0;r<p.length;r++){if(f&&f%4==0&&(m+=30,h=e),(o=p[r]).value&&o.value.length){for(s=0;s<o.value.length;s++)u=o.value[s].value||o.value[s].code,d=0==s?u:d+", "+u;(c=o.ltitle||o.title||o.lname||o.name)&&"$"==c.charAt(0)&&(c=IRm$.r1(c)),l={type:"label",x:h,y:m,d_width:a,d_height:n,docid:i,text:c+=" ("+d+")"}}h+=100,f+=1}return l},getFilter:function(e){var t,i,a,n={ftype:"group",children:[]},l=this.filter_items,o=e?e.tparams:null;if(o&&o.enabled&&o.items.length&&"none"==o.items[0])return n;for(t=0;t<l.length;t++)"valueset"!=(i=l[t]).model.type&&(o&&o.enabled&&!o.item_map[i.model.fuid]||(i.value=[],(a=this.updateFilterValue(i))&&(e&&e.isparameter&&(a.useprompt=!0),n.children.push(a))));return n},getCacheItems:function(e){var t;if(this._req_values)for(t in this._req_values)e.push({uid:t})},updateFilterValue:function(e,t){var i,a,n=null;return e.u2&&(i=e.u2,e.value=e.value||[],i.$updateValue(e.value,t),0!==n&&(a=this.getHFilter(e,t))&&(n=a)),n},getHFilter:function(e,t){var i,a,n=e.model,l=n.caseinsensitive,o=e.value;if(o&&o.length||t){i={ftype:"condition",fields:[{name:n.objectid||n.name,uid:n.uid,type:n.type}],operator:n.operator,useprompt:n.useprompt,values:[]},l&&(i.left_expression="UPPER(["+n.name+"])");for(let e=0;e<o.length;e++)a=o[e],valueformat=n.valueformat||"",l?i.values.push({code:a.code?a.code.toUpperCase():null,value:a.value,valueformat:valueformat,valuetype:a.valuetype,dateseltype:a.dateseltype}):i.values.push({code:a.code,value:a.value,valueformat:valueformat,valuetype:a.valuetype,dateseltype:a.dateseltype})}return i},setLoading:function(e){this.splash[e?"show":"fadeOut"]()},getValueSetFilterValues:function(){var e,t,i,a,n=this.filter_items,l=[];for(t=0;t<n.length;t++){if((e=n[t]).value=[],k=this.updateFilterValue(e,1),a={fuid:e.model.fuid,name:e.model.objectid||e.model.name,values:[]},e.value)for(i=0;i<e.value.length;i++)a.values.push(e.value[i].code||e.value[i].value);l.push(a)}return l},initFilter:function(e,t){var i,a,n=this,l=e||n.filter_items,o=n.isloaded;for(a=0;a<l.length;a++)i=l[a],fmodel=i.model,i.u2&&i.u2.$clear(!1);t&&o&&n.firstRun()},apply_drill_filter:function(e){var t,i=this;"group"==e.ftype&&e.children?$.each(e.children,(function(e,t){i.apply_drill_filter(t)})):"condition"==e.ftype&&e.fields&&1==e.fields.length&&e.values&&e.values.length&&(t=e.fields[0],i.setFilterValue(t.name,e.values[0].code,e.values[0].value))}},IG$.rptValSet=$s.extend($s.window,{xtype:"window",modal:!0,region:"center",layout:"fit",closable:!0,resizable:!0,maximizable:!0,width:400,height:500,_init:function(){var e,t=this.ptr_dyn,i=this.down("[name=grd]"),a=[];(e=t.prompt_valueset)&&$.each(e,(function(e,t){a.push({name:t.name,override_default:t.override_default,description:t.description,filter_values:t.filter_values})})),i.store.loadData(a)},_confirm:function(){var e,t,i=this,a=i.down("[name=grd]"),n=i.ptr_dyn,l=a.store,o=n.prompt_valueset;for(o.splice(0,o.length),t=0;t<l.data.items.length;t++)e=l.data.items[t],o.push({name:e.data.name,override_default:e.data.override_default,description:e.data.description,filter_values:e.data.filter_values});i.callback&&i.callback.execute(i),i.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_FILTER_VALUESET"),padding:ig$.padding,items:[{xtype:"container",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grd",flex:1,border:0,padding:ig$.padding,store:{},columns:[{text:IRm$.r1("B_NAME"),required:!0,dataIndex:"name"},{text:IRm$.r1("B_DESC"),dataIndex:"description"},{xtype:"actioncolumn",width:60,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_CONFIG"),handler:function(e,t,i){var a,n=this,l=e.store.getAt(t);a=new IG$.rptValSetEd({instance:n.instance,ptr_dyn:n.ptr_dyn,pitem:l.data,callback:new IG$.callBackObj(n,(function(e){l.set("name",l.data.name),l.set("description",l.data.description)}))}),IG$.checkLogin(n,a)},scope:this},{iconCls:"icon-grid-delete",tooltip:IRm$.r1("L_REMOVE"),handler:function(e,t,i){var a=e.store;a.getAt(t);a.removeAt(t)},scope:this}]}],tbar:["->",{text:IRm$.r1("L_ADD_CUR_SEL"),handler:function(){var e=this,t=new IG$.rptValSetEd({instance:e.instance,ptr_dyn:e.ptr_dyn,callback:new IG$.callBackObj(e,(function(e){var t=e.pitem;this.down("[name=grd]").store.add(t)}))});IG$.checkLogin(e,t)},scope:this}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.rptValSet.superclass.initComponent.apply(this,arguments)}}),IG$.rptValSetEd=$s.extend($s.window,{xtype:"window",modal:!0,region:"center",layout:"fit",closable:!0,resizable:!0,maximizable:!0,width:400,height:550,_init:function(){var e,t,a=this,n=a.ptr_dyn,l=a.down("[name=grd]"),o={},r=[];for((t=a.pitem=a.pitem||{}).filter_values=t.filter_values||{},a.setAllValues(t),e=n.getValueSetFilterValues(),i=0;i<e.length;i++)o[e[i].fuid]=e[i];for($.each(t.filter_values,(function(e,i){o[i.fuid]||delete t.filter_values[e]})),i=0;i<e.length;i++)t.filter_values[e[i].fuid]||(t.filter_values[e[i].fuid]=e[i]);$.each(t.filter_values,(function(e,t){var i=a.getValDesc(t);r.push({fuid:t.fuid,name:t.name,values:t.values,value_desc:i})})),l.store.loadData(r)},getValDesc:function(e){var t=[];return e.values&&e.values.length&&(t=e.values),t.join(",")},_confirm:function(){var e,t,i=this,a=i.down("[name=grd]").store,n=i.pitem;if(!i.getAllValues(n)){for(n.filter_values={},t=0;t<a.data.items.length;t++)e=a.data.items[t],n.filter_values[e.get("fuid")]={fuid:e.get("fuid"),name:e.get("name"),values:e.get("values")};i.callback&&i.callback.execute(i),i.close()}},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_FILTER_VALUESET"),padding:ig$.padding,items:[{xtype:"container",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",name:"name",required:!0,fieldLabel:IRm$.r1("B_NAME")},{xtype:"checkbox",name:"b_ovr",fieldLabel:IRm$.r1("L_OVERRIDE_DEF"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"textarea",flex:1,name:"description",fieldLabel:IRm$.r1("B_DESC"),height:60},{xtype:"gridpanel",name:"grd",flex:1,border:0,store:{},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"},{text:IRm$.r1("B_VALUE"),dataIndex:"value_desc"},{xtype:"actioncolumn",width:60,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_CONFIG"),handler:function(e,t,i){var a=this,n=a.down("[name=grd]"),l=a.down("[name=fltvaluescont]"),o=a.down("[name=fltvalues]"),r=e.store.data.items[t],s=r.get("values");a._editing_row=r,n.hide(),l.show(),o.setValue(s&&s.length?s.join("\n"):"")},scope:this},{iconCls:"icon-grid-delete",tooltip:IRm$.r1("L_REMOVE"),handler:function(e,t,i){var a=e.store;a.getAt(t);a.removeAt(t)},scope:this}]}]},{xtype:"container",flex:1,name:"fltvaluescont",hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",name:"fltvalues",fieldLabel:IRm$.r1("L_SELECTED_VALUES"),flex:1},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:IRm$.r1("B_APPLY"),handler:function(){var e=this,t=e.down("[name=grd]"),i=e.down("[name=fltvaluescont]"),a=(e.down("[name=fltvalues]").getValue()||"").split("\n");this._editing_row.set("values",a),this._editing_row.set("value_desc",a.join(",")),e._editing_row=null,i.hide(),t.show()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){var e=this,t=e.down("[name=grd]"),i=e.down("[name=fltvaluescont]");e._editing_row=null,i.hide(),t.show()},scope:this}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.rptValSetEd.superclass.initComponent.apply(this,arguments)}});
IG$.aboutApp=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:400,initComponent:function(){this.title=IRm$.r1("I_ABOUT","amplixbi"),$s.apply(this,{items:[{html:'<div class="igc-about-bg"></div><table width="479" border="0" cellpadding="0" cellspacing="0"><tr><td width="69" align="left">&nbsp;</td><td width="410"><div align="right"><span class="about_style6">Build Id: '+(ig$.appInfo.apprelease||"---")+", web : "+(ig$.appInfo.web_revision||"---")+"<br/>Licensed to: "+(ig$.appInfo.licensed||"xxx")+'</span></div></td></tr></table><table width="494" border="0" cellpadding="0" cellspacing="0"><tr><td width="78">&nbsp;</td><td width="416" valign="top"><div align="left"><p class="about_style2"> Copyright &copy; 2005-'+ig$.appInfo.date.substring(0,4)+'<br/>ALL RIGHTS RESERVED. <br />amplixbi.com. Confidential Information</p><p class="about_style1"><span class="about_style4">'+IRm$.r1("L_CONTACT_HELP")+'</span>&nbsp;&nbsp;<a href="http://www.amplixbi.com" target="_new">amplixbi.com</a></p></div></td></tr></table><p>&nbsp;</p><p align="left" class="about_style1">&nbsp;</p>'}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){var t=this;t.callback&&t.callback.execute(),t.close()},scope:this}]}),IG$.aboutApp.superclass.initComponent.apply(this,arguments)}});
IG$.makeStyle=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:320,autoHeight:!0,parentnodepath:null,callback:null,processMakeStyleItem:function(){var e,t=this,l=t.m_theme,n=t.down("[name=fitemname]"),i=n.getValue(),a=t.down("[name=basetypeselect]"),s=a.getValue();if(n.clearInvalid(),a.clearInvalid(),i)if(l||s)if(l&&t.themes[i])n.setInvalid("Duplicated");else{if(!l)for(e=0;e<t.styleinfo.length;e++)if(t.styleinfo[e].name==i)return n.setInvalid("Duplicated"),!1;t.callback.execute([i,s]),t.close()}else a.setInvalid("Required Field");else n.setInvalid("Required Field")},_init:function(){var e,t=this,l=[],n=t.m_theme,i=t.down("[name=basetypeselect]");if(!n){for(e=0;e<t.styleinfo.length;e++)t.styleinfo[e].basestylename||l.push({name:t.styleinfo[e].name});i.store.loadData(l)}},initComponent:function(){this.title=IRm$.r1("L_MAKESTYLE"),$s.apply(this,{items:[{html:IRm$.r1("L_MAKESTYLE"),flex:1,border:0},{xtype:"panel",region:"center",flex:3,border:!0,region:"center",height:120,defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%"},items:[{fieldLabel:IRm$.r1("L_STYLENAME"),labelWidth:130,name:"fitemname",value:"",allowBlank:!1,blankText:IRm$.r1("B_REQ"),enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&this.processMakeStyleItem()},scope:this}},{xtype:"combobox",name:"basetypeselect",hidden:!!this.m_theme,fieldLabel:IRm$.r1("L_INHERIT_STYLE_FROM"),labelWidth:130,store:{fields:[{name:"name"}]},displayField:"name",valueField:"name",editable:!1,queryMode:"local",selectOnTab:!1}],listeners:{afterrender:function(){this._init()},scope:this}}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this.processMakeStyleItem()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.makeStyle.superclass.initComponent.apply(this,arguments)}});
IG$.styleEditor=$s.extend($s.formpanel,{cstyle:null,layout:"anchor",autoHeight:!0,autoScroll:!0,htype:null,bodyPadding:ig$.padding,defaults:{anchor:"100%"},dfields:"fontsize;nullvalue;formatstring;dateformat;cssname;template;forecolor;backcolor;bordercolor;borderleft;borderright;bordertop;borderbottom;borderoutcolor;borderoutleft;borderoutright;borderouttop;borderoutbottom;paddingtop;paddingleft;paddingbottom;paddingright;columnwidth;columnheight".split(";"),init_f:function(e,t){if(e&&e._mc){var l,o,a=this,n=e._mc,i=Number(n.fontstyle),r=[],d="left";n.borderright=void 0===n.borderright?1:n.borderright,n.borderbottom=void 0===n.borderbottom?1:n.borderbottom,$.each(a.dfields,(function(e,l){var o=a.down("[name="+l+"]"),i=n[l],r=o;switch(l){case"backcolor":case"forecolor":case"bordercolor":case"borderoutcolor":r=a.down("[name=cnt_"+l+"]");break;case"template":i=IG$._decodeVal(i)}o.setValue(i),a._set_bstyle(n,t,l,r)})),a.down("[name=autowidthmode]").setValue("T"==n.autowidthmode),a.down("[name=wordwrapmode]").setValue("T"==n.wordwrapmode),a._set_bstyle(n,t,"autowidthmode",a.down("[name=cnt_aw]")),i&IG$.fontStyle.P_BOLD&&r.push("bold"),i&IG$.fontStyle.P_ITALIC&&r.push("italic"),i&IG$.fontStyle.P_UNDERLINE&&r.push("underline"),(l=a.down("[name=fontstyle]")).setValue({cb_layout:r}),a._set_bstyle(n,t,"fontstyle",a.down("[name=fontstyle]")),l=a.down("[name="+a.htype+"textalign]"),2==(o=n.textalign)||5==o||8==o?d="center":3!=o&&6!=o&&9!=o||(d="right"),o<4?"top":o>6&&"bottom";var m={};m["cb_"+a.htype+"textalign"]=[d],l.setValue(m),a._set_bstyle(n,t,"textalign",a.down("[name="+a.htype+"textalign]"))}},_set_bstyle:function(e,t,l,o){t&&t._mc&&t._mc[l]===e[l]?o.setFieldLabelStyle("igc-label-inherited"):o.setFieldLabelStyle(null)},loadStyleData:function(e,t){t&&e.applyBaseStyle(t),this.cstyle=e,this.init_f(e,t)},updateStyleData:function(){var e=this;if(e.cstyle&&e.cstyle._mc){var t,l,o=0,a=e.cstyle._mc;if($.each(e.dfields,(function(t,l){var o=e.down("[name="+l+"]").getValue();"template"==l&&(o=IG$._encodeVal(o)),a[l]=o})),a.autowidthmode=e.down("[name=autowidthmode]").getValue()?"T":"F",a.wordwrapmode=e.down("[name=wordwrapmode]").getValue()?"T":"F",(t=e.down("[name=fontstyle]").getValue())&&t.cb_layout)for(t="string"==typeof t.cb_layout?[t.cb_layout]:t.cb_layout,l=0;l<t.length;l++)switch(t[l]){case"bold":o|=IG$.fontStyle.P_BOLD;break;case"italic":o|=IG$.fontStyle.P_ITALIC;break;case"underline":o|=IG$.fontStyle.P_UNDERLINE}switch(a.fontstyle=o,t=(t=e.down("[name="+e.htype+"textalign]").getValue())&&t["cb_"+e.htype+"textalign"]?t["cb_"+e.htype+"textalign"]:"left"){case"right":t=6;break;case"center":t=5;break;default:t=4}a.textalign=t}},fieldDefaults:{labelWidth:90},initComponent:function(){var e=this;$s.apply(e,{items:[{xtype:"checkboxgroup",name:"fontstyle",vertical:!0,fieldLabel:IRm$.r1("L_FONT_FACE"),plain:!0,items:[{boxLabel:IRm$.r1("L_FONT_BOLD"),name:"cb_layout",inputValue:"bold",checked:!1},{boxLabel:IRm$.r1("L_FONT_ITALIC"),name:"cb_layout",inputValue:"italic",checked:!1},{boxLabel:IRm$.r1("L_FONT_UNDERLINE"),name:"cb_layout",inputValue:"underline",checked:!1}]},{xtype:"radiogroup",name:e.htype+"textalign",vertical:!0,fieldLabel:IRm$.r1("L_FONT_ALIGNMENT"),items:[{boxLabel:IRm$.r1("L_ALIGN_LEFT"),name:"cb_"+e.htype+"textalign",inputValue:"left",checked:!1},{boxLabel:IRm$.r1("L_ALIGN_CENTER"),name:"cb_"+e.htype+"textalign",inputValue:"center",checked:!1},{boxLabel:IRm$.r1("L_ALIGN_RIGHT"),name:"cb_"+e.htype+"textalign",inputValue:"right",checked:!1}]},{fieldLabel:IRm$.r1("L_FONTSIZE"),name:"fontsize",flex:1,xtype:"textfield"},{fieldLabel:IRm$.r1("L_NULL_VALUE"),xtype:"textfield",name:"nullvalue"},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"formatstring",fieldLabel:IRm$.r1("L_FORMAT_STRING")},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),handler:function(){IG$.show_tmpl_hlp(this,"formatstring","formatstring")},scope:this}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"dateformat",fieldLabel:IRm$.r1("L_DATE_FORMAT")},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),handler:function(){IG$.show_tmpl_hlp(this,"dateformat","dateformat",!1)},scope:this}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"cssname",fieldLabel:IRm$.r1("L_CSS_CLASS")},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),handler:function(){IG$.show_tmpl_hlp(this,"grid_style","cssname")},scope:this}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textarea",height:60,name:"template",fieldLabel:IRm$.r1("L_TEMPLATE")},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),handler:function(){IG$.show_tmpl_hlp(this,"cell_tmpl","template")},scope:this}]},{xtype:"displayfield",value:"Ex: &lt;span style='font-family: fontawesome; color:#ff0000'&gt;"},{xtype:"displayfield",value:"&amp;#xf001;&lt;/span&gt;&lt;span&gt;TEXT&lt;/span&gt;"},{xtype:"fieldset",title:IRm$.r1("L_COLOR_SETTING"),collapsible:!0,layout:"anchor",items:[{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_FORE_COLOR"),name:"cnt_forecolor",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"forecolor",width:120},{xtype:"splitter"},{xtype:"splitbutton",width:30,menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=forecolor]").setValue("#"+t)},scope:e}},"-"]}},{xtype:"container",flex:1}]},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_BACK_COLOR"),name:"cnt_backcolor",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"backcolor",width:120},{xtype:"splitter"},{fieldLabel:IRm$.r1("L_BACK_COLOR"),xtype:"splitbutton",menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=backcolor]").setValue("#"+t)},scope:e}},"-"]}},{xtype:"container",flex:1}]},{xtype:"fieldset",title:IRm$.r1("L_BORDER_INNER"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",anchor:"100%",name:"cnt_bordercolor",fieldLabel:IRm$.r1("L_BORDER_COLOR"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"bordercolor",width:120},{xtype:"splitter"},{xtype:"splitbutton",menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=bordercolor]").setValue("#"+t)},scope:e}},"-"]}},{xtype:"container",flex:1}]},{fieldLabel:IRm$.r1("L_BORDER_LEFT"),name:"borderleft",xtype:"numberfield",value:1},{fieldLabel:IRm$.r1("L_BORDER_RIGHT"),name:"borderright",xtype:"numberfield",value:1},{fieldLabel:IRm$.r1("L_BORDER_TOP"),name:"bordertop",xtype:"numberfield",value:1},{fieldLabel:IRm$.r1("L_BORDER_BOTTOM"),name:"borderbottom",xtype:"numberfield",value:1}]},{xtype:"fieldset",title:IRm$.r1("L_BORDER_OUTER"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_BORDER_COLOR"),name:"cnt_borderoutcolor",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"borderoutcolor",width:120},{xtype:"splitter"},{xtype:"splitbutton",menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=borderoutcolor]").setValue("#"+t)},scope:e}},"-"]}},{xtype:"container",flex:1}]},{fieldLabel:IRm$.r1("L_BORDER_LEFT"),name:"borderoutleft",xtype:"numberfield",value:1},{fieldLabel:IRm$.r1("L_BORDER_RIGHT"),name:"borderoutright",xtype:"numberfield",value:1},{fieldLabel:IRm$.r1("L_BORDER_TOP"),name:"borderouttop",xtype:"numberfield",value:1},{fieldLabel:IRm$.r1("L_BORDER_BOTTOM"),name:"borderoutbottom",xtype:"numberfield",value:1}]}]},{xtype:"fieldset",title:IRm$.r1("L_PADDING"),collapsible:!0,layout:"anchor",items:[{fieldLabel:IRm$.r1("L_PAD_TOP"),name:"paddingtop",xtype:"numberfield"},{fieldLabel:IRm$.r1("L_PAD_LEFT"),name:"paddingleft",xtype:"numberfield"},{fieldLabel:IRm$.r1("L_PAD_BOTTOM"),name:"paddingbottom",xtype:"numberfield"},{fieldLabel:IRm$.r1("L_PAD_RIGHT"),name:"paddingright",xtype:"numberfield"}]},{xtype:"fieldcontainer",layout:"vbox",name:"cnt_aw",fieldLabel:IRm$.r1("L_COLUMN_WIDTH"),items:[{xtype:"container",layout:"hbox",align:"stretch",items:[{xtype:"checkbox",boxLabel:IRm$.r1("L_AUTO_WIDTH"),name:"autowidthmode",listeners:{change:function(){var e=this.down("[name=autowidthmode]").getValue();columnwidth=this.down("[name=columnwidth]"),columnwidth.setEnabled(!e)},scope:this}},{xtype:"numberfield",name:"columnwidth",labelAlign:"right",fieldLabel:IRm$.r1("B_WIDTH"),minValue:30,maxValue:400}]},{xtype:"container",layout:"hbox",align:"stretch",items:[{xtype:"checkbox",boxLabel:IRm$.r1("L_WORDWRAP"),name:"wordwrapmode",listeners:{change:function(){var e=this.down("[name=wordwrapmode]").getValue();columnheight=this.down("[name=columnheight]"),columnheight.setEnabled(e)},scope:this}},{xtype:"numberfield",name:"columnheight",disabled:!0,minValue:30,maxValue:400}]}]}]}),IG$.styleEditor.superclass.initComponent.apply(this,arguments)}});
IG$.globalReportStyle=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:650,height:500,callback:null,ignoreBase:!1,_init:function(){var e=this,t=new IG$._rpc$,a={},s=e.reportoption,l=s?s.getCurrentPivot():{};s&&(a={uid:s._mc.uid,option:"styleinfo",active:""+e.activeSheet,theme_id:ig$.theme_id}),t.init(e,{ack:"olapservice",payload:a,mbody:l,meta_type:e.meta_type||"report"},e,e.rs_getStylInfo,null),t.send()},rs_getStylInfo:function(e){var t,a,s,l,n,i,o,y=this,r=[],m=[],d={},p=y.targetitem,c=p?p.name+"_"+(p.sequence||"0"):null;if(y.cbaseselect=y.down("[name=basestyle]"),i=y.stylelist=y.down("[name=stylelist]"),y.styles={app:[]},null!=(t=e.app_styles.default_styles)){for(s=0;s<t.length;s++)l=new IG$.clStyleObject(t[s],"appstyle",!1),y.styles[l.name]=l,m.push({name:l.name});for(s=0;s<m.length;s++)(l=y.styles[m[s].name]).basestylename&&y.styles[l.basestylename]&&l.applyBaseStyle(y.styles[l.basestylename])}var u=function(e){var t,a;if(e)for(t=0;t<e.length;t++)a=new IG$.clStyleObject(e[t],"appstyle",!0),y.styles[a.name]=a,m.push({name:a.name}),a.basestylename&&y.styles[a.basestylename]&&a.applyBaseStyle(y.styles[a.basestylename])};if(u(e.app_styles.custom_styles),e.cube_styles&&u(e.cube_styles.default_styels),e.cube_styles&&u(e.cube_styles.custom_styles),e.style_map)for(s=0;s<e.style_map.length;s++)d[(n=e.style_map[s]).name+"_"+(n.rptseq||"0")]=n.basename;if(e.report_style)for(a=e.report_style,s=0;s<a.length;s++)l=new IG$.clStyleObject(a[s],"reportstyle",!0),y.styles[l.name+"_"+l.rptseq]=l,r.push({name:l.name,groupname:"Unit_"+l.rptseq,rptseq:l.rptseq}),d[l.name+"_"+l.rptseq]&&(l.basestylename=d[l.name+"_"+l.rptseq]),null!=l.basestylename&&y.styles[l.basestylename]&&l.applyBaseStyle(y.styles[l.basestylename]);if(y.cbaseselect.store.loadData(m),i.store.loadData(r),c)for(s=0;s<i.store.data.items.length;s++)if((o=i.store.data.items[s]).get("name")+"_"+o.get("rptseq")==c){i.getSelectionModel().select(o),y.updateStyleData(),y.loadStyleData(c);break}},loadStyleData:function(e){var t,a=this,s=a.styles;if(s&&s[e]){var l=s[e],n=a.down("[name=seheader]"),i=a.down("[name=sedata]"),o=a.down("[name=basestyle]");a.editingstyle=l,a.ignoreBase=!0,o.setValue(l.basestylename||""),a.ignoreBase=!1,l.basestylename&&s[l.basestylename]&&(t=s[l.basestylename]),n.loadStyleData(l.header,t?t.header:null),i.loadStyleData(l.data,t?t.data:null)}},updateStyleData:function(){var e=this;if(e.editingstyle){var t=e.down("[name=seheader]"),a=e.down("[name=sedata]"),s=e.down("[name=basestyle]");e.editingstyle.basestylename=s.getValue(),t.updateStyleData(),a.updateStyleData()}},confirmChanges:function(e){var t,a,s,l=this,n=l.sheetoption,i=l.styles;if(l.updateStyleData(),n)for(t in n.model.styles=[],i)"reportstyle"==i[t].itemtype&&(s=(a=i[t]).getData(),a.basestylename&&i[a.basestylename]&&(s=a.getData(i[a.basestylename])),n.model.styles.push(s));l.callback&&l.callback.execute(),e||l.close()},updateBaseStyle:function(){var e=this,t=e.editingstyle,a=e.down("[name=basestyle]"),s=e.styles[a.getValue()];if(s&&t){var l=e.down("[name=seheader]"),n=e.down("[name=sedata]");t.forceBsStyl(s),l.loadStyleData(t.header),n.loadStyleData(t.data)}},initComponent:function(){var e=this;e.title=IRm$.r1("T_REPORT_STYLE"),$s.apply(this,{items:[{xtype:"panel",layout:{type:"hbox",align:"stretch"},items:[{title:IRm$.r1("L_STYLE_ITEMS"),layout:"fit",flex:1,items:[{xtype:"grid",name:"stylelist",features:[{ftype:"grouping",groupHeaderTpl:"Folder: {groupname} ({rows.length} items)"}],store:{sorters:["name"],groupField:"groupname",fields:["name","groupname","rptseq"],data:[]},hideHeaders:!0,columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",tdCls:"igc-td-link",flex:1}],listeners:{itemclick:function(e,t,a,s,l){var n=t.data;this.updateStyleData(),this.loadStyleData(n.name+"_"+n.rptseq)},scope:this}}]},{xtype:"panel",layout:{type:"vbox",align:"stretch"},flex:2,items:[{xtype:"combobox",name:"basestyle",fieldLabel:IRm$.r1("L_BASE_STYLE"),queryMode:"local",displayField:"name",valueField:"name",editable:!1,autoSelect:!0,store:{fields:[{name:"name"}]},listeners:{change:function(){0==this.ignoreBase&&this.updateBaseStyle()},scope:this}},{xtype:"tabpanel",layout:"fit",plain:!0,flex:1,items:[new IG$.styleEditor({instance:e.instance,title:IRm$.r1("L_DATA_STYLE"),name:"sedata",htype:"dt",flex:1}),new IG$.styleEditor({instance:e.instance,title:IRm$.r1("L_HEAD_STYLE"),name:"seheader",htype:"hd",flex:1})]}]}]}],buttons:[{text:IRm$.r1("B_APPLY"),hidden:!this.targetitem,handler:function(){this.confirmChanges(1)},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this.confirmChanges()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.passwordMgr.superclass.initComponent.apply(this,arguments)}});
IG$.n$navTreeCom=$s.extend($s.treepanel,{xtype:"treepanel",customMenu:null,enabledrag:!0,ntritem:null,ntrnode:null,ntrseq:0,border:0,tooltip:!1,region:"west",split:!0,header:!1,collapsible:!0,rootVisible:!0,lines:!1,animCollapse:!1,animate:!0,collapseMode:"mini",collapseFirst:!1,singleExpand:!1,selectedNode:[],navigateTree:function(e){var t=this,a=t.getRootNode(),n=a.get("nodepath");t.ntritem=e,t.ntrnode=a,t.ntrseq=1,n&&e.nodepath.indexOf(n)>-1&&(t.ntrseq=n.split("/").length),t.navigateTreeOpen()},navigateTreeOpen:function(){var e,t,a,n=this,i=(n.ntritem.nodepath||n.ntritem).split("/"),o=n.ntrseq,d=n.ntrnode;if(d&&i.length>o)for(e=i[o],n.getSelectionModel().select(d),t=0;t<d.childNodes.length;t++)if((a=d.childNodes[t]).data.name==e){0==a.isLeaf()?(n.ntrnode=a,n.ntrseq++,n.getSelectionModel().select(a),a.expand(!1,n.navigateTreeOpen,n)):(n.ntrnode=null,n.ntrseq=0,n.getSelectionModel().select(a));break}},setFilter:function(e){var t=this,a=t.getRootNode();t._fitem=e,t._updateFilter(a,t._fitem)},_updateFilter:function(e,t,a){var n,i,o;if(e.childNodes&&e.childNodes.length)for(n=0;n<e.childNodes.length;n++)(i=(o=e.childNodes[n]).data.ltype)||(i=o.data.ltype=o.data.type.toLowerCase()),"folder"==i?this._updateFilter(o,t,a):"table"==i||"inlineview"==i?(!t||t&&t[o.data.uid]?o.set("disabled",!1):o.set("disabled",!0),this._updateFilter(o,t,o.get("disabled"))):o.set("disabled",a)},_createMetaObject:IG$._createMetaObject,r_createMetaObject:IG$.r_createMetaObject,_renameMetaObject:IG$._renameMetaObject,r_renameMetaObject:IG$.r_renameMetaObject,deleteMetaObject:IG$.deleteMetaObject,rdeleteMetaObject:IG$.rdeleteMetaObject,editMeta:IG$.editMeta,raiseCustomEvent:function(e,t,a){this.fireEvent(e,t,a)},moveSelItems:function(){var e,t,a=this,n={},i=0;if(a.selectedNode.length>0){for(e=0;e<a.selectedNode.length;e++){if("help"==(t=a.selectedNode[e]).data.type.toLowerCase()&&(treeoptions.rootuid=a.rootuid),null!=t.data.nodepath.substring(0,t.data.nodepath.lastIndexOf("/"))){i=0,IG$.ShowError(IRm$.r1("E_"),a);break}if(!t.data.manage&&!t.data.writable){i=0,IG$.ShowError(IRm$.r1("E_PRIV_ERR"),a);break}n.push({uid:t.data.uid}),i++}if(i>0){var o=new IG$.metaSelectDlg({instance:a.instance,mode:"select",targetobj:"folder",visibleItems:"folder",tree_options:{},callback:new IG$.callBackObj(a,a.rmoveSelItems,[n,undefined])});IG$.checkLogin(a,o)}}},rmoveSelItems:function(e,t){var a,n=t[0],i=t[1],o=this;(a=new IG$._rpc$).init(o,{ack:"helpcontent",payload:n,mbody:{option:"move",target:e.uid}},o,o.r_moveSelItems,null,i),a.send()},r_moveSelItems:function(e,t){var a=this;a.refreshNode(t),a.selectedNode=[],IG$.alertmsg(ig$.appname,"Moved items successfully",null,a,0,"success")},removeSelItems:function(){var e,t,a,n=this,i={},o=0;if(n.selectedNode.length>0){for(e=0;e<n.selectedNode.length;e++){if(!(t=n.selectedNode[e]).data.manage&&!t.data.writable){o=0,IG$.ShowError(IRm$.r1("E_PRIV_ERR"),n);break}i.push({uid:t.data.uid}),o++}o>0&&((a=new IG$._rpc$).init(n,{ack:"batchcontent",payload:i,mbody:{option:"delete"}},n,n.rdeleteMetaObject,null),a.send())}},filterTree:function(e,t){},refreshTree:function(e){var t,a=this,n=e||a.getRootNode();for(a._expandedNodes={},n.dirty=!0,n.data.loaded=!1,n.data.expanded=!1;n.firstChild;)n.childNodes&&n.firstChild.isExpanded()&&(a._expandedNodes[n.firstChild.get("uid")]=1,a._updateExpanded(n.firstChild,a._expandedNodes)),n.removeChild(n.firstChild);if(a._rootitems)for(t=a._rootitems,i=0;i<t.length;i++)delete t[i].id,delete t[i].open,t[i].leaf=!1,t[i].children=[{type:"load",name:"Loading..."}],n.appendChild(t[i]);else n.appendChild({open:!1,type:"load",name:"Loading..."}),n.collapse();n.expand()},_updateExpanded:function(e,t){var a,n;if(e.childNodes)for(a=0;a<e.childNodes.length;a++)(n=e.childNodes[a]).childNodes&&n.childNodes.length&&n.isExpanded()&&(t[n.get("uid")]=1,this._updateExpanded(n,t))},refreshNode:function(e){var t=e;1==e.isLeaf()&&(t=e.parentNode),this.refreshTree(t)},refTopNode:function(){this.selectedNode=[];var e=this.getRootNode();for(this.setPosition(0,0),this.getSelectionModel().select(e),e.dirty=!0,e.data.loaded=!1,e.data.expanded=!1;e.firstChild;)e.removeChild(e.firstChild);e.expand(!1)},appendRootWS:function(e){var t,a,n=this.getRootNode(),i=this.store.model,o=!1;for(t=0;t<n.childNodes.length;t++)if(n.childNodes[t].data.uid==e.uid){o=!0;break}0==o&&((a=new i(e)).raw=e,n.appendChild(a))},pasteMetaObject:function(e){var t=this,a=new IG$._rpc$;a.init(t,{ack:"writecontent",payload:{pid:e.get("uid"),address:IG$.clipboard.uid},mbody:{option:"copy"}},t,t.rpasteMetaObject,null,e),a.send()},rpasteMetaObject:function(e,t){this.refreshNode(t)},prepareCustomMenu:IG$.prepareCustomMenu,manageFolder:function(e){var t=new IG$.dlgFolderMgr({instance:this.instance,root:{uid:e.get("uid"),name:e.get("name"),type:e.get("type")}});IG$.checkLogin(this,t)},exportMeta:function(e){var t=new IG$.metaExpDlg({instance:this.instance,meta:e});IG$.checkLogin(this,t)},exportMeta_exec:function(e){var t=this,a=new IG$._rpc$,n={output:"file",opt_dependants:"T",opt_security:"T",opt_owner_info:"T"};IG$.confirmMessages(IRm$.r1("T_EXP_MC"),IRm$.r1("T_EXP_MC_Q"),(function(i){e&&"yes"==i&&(a.init(t,{ack:"content",payload:{uid:e.uid,nodepath:e.nodepath,name:e.name,type:e.type},mbody:n},t,(function(e){var t,a;e&&(t=e.luid,a=e.filename,IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success"),t&&a&&$.download(ig$.servlet+"/download",[{name:"ack",value:"download"},{name:"_mts_",value:IG$._g$a||""},{name:"payload",value:t},{name:"mbody",value:a},{name:"session_key",value:window.use_session_key?ig$._session_key||"empty":""}],"POST"))}),null),a.send())}),t,t)},initComponent:function(){var e,t=this;t.tree_options&&$s.apply(this,t.tree_options),1==t._meta_move&&(t.beforedrop_exec=new IG$.callBackObj(t,(function(e,t,a,n,i,o){var d=this,r=(d.getRootNode(),!1);return a&&a.view&&a.view==d&&a.records&&a.records.length&&IG$.confirmMessages(ig$.appname,IRm$.r1("M_CONFIRM_DROP_FILE"),(function(e){if("yes"==e&&n&&(1==n.get("writable")||"Root"==n.get("type"))){var t,i=n.get("type"),o=1,s=[],l={option:"move",target:"Root"==i?"/":n.get("uid")};!i||"Folder"!=i&&"Bobject"!=i&&"Root"!=i||($.each(a.records,(function(e,t){var a;if("folder"==(a=(a=t.get("type"))?a.toLowerCase():null)||"report"==a||"bobject"==a){if("Root"==i);else if(t.get("pid")==n.get("uid"))return o=0,!1}else if("table"!=a&&"inlineview"!=a&&"cubemodel"!=a||"Bobject"!=i&&"Folder"!=i)return"root"==a?(o=0,!1):(t.get("is_priv")||t.get("is_dept"),o=0,!1);o&&s.push({uid:t.get("uid")})})),0==o?r=!1:s.length&&(r=!0,(t=new IG$._rpc$).init(d,{ack:"helpcontent",payload:s,mbody:l},d,(function(e){$.each(a.records,(function(e,t){t.parentNode.removeChild(t)})),d.refreshNode(n)}),null,null),t.send()))}})),r}))),e=[{xtype:"treecolumn",text:IRm$.r1("B_NAME"),flex:2,sortable:!1,dataIndex:"name",renderer:function(e,t,a){var n="",i=a.get("locale_name")||a.get("name"),o=a.get("type")||"",d=i+(a.get("locale_name")?" ("+a.get("name")+")":"")+"\n ===> "+(a.get("nodepath")||"unknown");return a.get("scid")&&(n="igc-subscribed"),a.data.disabled&&(n+=" igc-disabled"),"<span class='"+n+"' "+("report"==(o=o.toLowerCase())||"dashboard"==o?" amp-bind='"+o+":"+a.get("uid")+"'":"")+" title='"+IG$.hEE(d)+"'>"+IG$.hEE(i)+"</span>"}}],tbarobj=[{iconCls:"icon-refresh",tooltip:IRm$.r1("L_REFRESH"),handler:function(){this.refTopNode()},scope:this}],$s.apply(this,{enableDragDrop:!0,enableDD:!0,useArrows:!0,ddGroup:"_I$RD_G_",hideHeaders:!0,hiddenPkgs:[],columns:e,store:{xtype:"treestore",fields:["uid","nodepath","address","description","manage","memo","name","type","writable","lname","locale","is_sub"]},customMenu:new $s.menu({instance:t.instance,items:[]}),selModel:{selection:"treemodel",mode:"MULTI"},viewConfig:t.enabledrag?{plugins:{ptype:"gridviewdragdrop",dragGroup:"_I$RD_G_"},listeners:{beforedrop:function(e,t,a,n,i){var o=this,d=(t.view,t.records,!1);return o.panel&&o.panel.beforedrop_exec&&(d=o.panel.beforedrop_exec.execute(o,e,t,a,n,i)),d},drop:function(e,t,a,n){a&&a.get("name")}}}:null,listeners:{afterrender:function(e){var a={name:e.rootname||IRm$.r1("B_WORKSPACE"),expanded:!0,address:"/",type:"Root",uid:e.rootuid||"",children:[{type:"load",name:"Loading..."}]};t.__loaded=1,t.body&&t.body.dom&&$(t.body.dom).mousemove((function(e){var t=e.target;if(t.getAttribute&&t.getAttribute("amp-bind")){var a=t.getAttribute("amp-bind");IG$._scrshot(t,a,!0)}else IG$._scrshot(t,null,!1)})).mouseleave((function(e){var t=e.target;IG$._scrshot(t,null,!1,!0)})),"none"!=t.rootuid&&setTimeout((function(){e.setRootNode(a).expand(),t.initpath&&t.navigateTree(t.initpath)}),20)},beforeitemcontextmenu:function(e,t,a,n,i){i.stopEvent();var o=this,d=(i.pageX,i.pageY,i.getTarget());if(!o.nav_options||!1!==o.nav_options.context_menu)return 1==o.prepareCustomMenu(t,o.btype)&&o.customMenu.showBy(d),!1},itemclick:function(e,t,a,n,i){var o=this,d=!1,r=t.data,s=o.mainPanel;if("INPUT"!=i.target.nodeName&&(o.custom_click_func&&(d=o.custom_click_func.execute(t,r)),o.gridupdate&&o.gridupdate.execute(t),0==d)){var l=r.type.toLowerCase(),c=r.name,p=r.nodepath,u=r.uid,m=!(!r.writable&&!r.manage);r.manage,r.issubcube;if("igccustom"==l){var h=window.igc_custom_menus.menuitems[u];h&&h.handler&&h.handler.call(window,h)}else 1==t.isLeaf()&&(i&&i.stopEvent&&i.stopEvent(),s&&s.navigateApp(u,l,c,p,!0,m))}},itemdblclick:function(e,t,a,n,i,o){var d=this;i.stopPropagation(),d.custDblClickFunc&&(bproc=d.custDblClickFunc.execute(t)),d.gridupdate&&d.gridupdate.execute(t)},beforeitemexpand:function(e,t){var a=this,n=(e.get("type"),e.get("uid"));if(!a.custom_expand_func||!a.custom_expand_func.execute(e)){if(e.isRoot()){if(!(e.childNodes.length>0&&"load"==e.childNodes[0].get("type")))return;a.rootuid&&"none"!=a.rootuid?addr={uid:a.rootuid}:n&&n.length>0?addr={uid:n}:addr={uid:"/",type:"Folder"}}else if(addr={uid:n},!(e.childNodes.length>0&&"load"==e.childNodes[0].get("type")))return;var i,o=new IG$._rpc$,d=a._visibleItems,r=!d&&a.visibleItems?a.visibleItems.split(";"):null;if(!d&&r&&r.length){for(i=0;i<r.length;i++)r[i]&&(d||(d={}),d[r[i]]=1);a._visibleItems=d}e.removeAll();var s=function(t){var i,o,r,s,l=t?t.children:null,c=[];if(e.isRoot()&&"/"!=t.nodepath&&(e.set("name",t.name),e.set("type",t.type),e.set("nodepath",t.nodepath),e.set("writable",t.writable)),"~/"!=n&&"!/"!=n||(e.set("uid",t.uid),e.set("type",t.type),e.set("nodepath",t.nodepath),e.set("writable",t.writable)),l)for(i=0;i<l.length;i++)(o=l[i]).text=o.name,o.address=o.uid,r=o.type.toLowerCase(),o.memo?o.memo.toLowerCase():null,(s=!d||d&&d[r]?0:1)&&"link"==r&&o.rawtype&&d&&d[o.rawtype.toLowerCase()]&&(s=0),s&&a.cubebrowse&&o.is_sub&&("metric"==r||"datemetric"==r)&&(s=!1),!s&&a.hiddenItems&&a.hiddenItems[r]&&(s=!0),s||(("Dimension"==o.type||"Metric"==o.type)&&o.attributes&&o.attributes.attrb4&&(o.datatype=IG$.get_datatype(o.attributes.attrb4)),1==IG$.testVal("metrics|table|inlineview|folder|rfolder|datemetric|javapackage|dataset|userdb",r)?(IG$.testVal("table|inlineview",r)&&a._fitem&&!a._fitem[o.uid]&&(o.disabled=!0),o.leaf=!1):"link"==r&&"cubemodel"==o.rawtype.toLowerCase()?o.leaf=!1:(o.leaf=!0,o.allowDrag=!0,o.disabled=e.data.disabled),o.leaf&&o.is_sub&&"metric"==r&&(o.leaf=!1),o.children&&IG$.sortMeta(o.children),o.leaf||o.children||(o.loaded=!1,o.expanded=!1,o.children=[{type:"load",name:"Wait while get data"}]),o.iconCls=IG$.get_metatype_icon(r,o),c.push(o));if(IG$.sortMeta(c),e.isRoot()&&"/"==t.nodepath&&(!1===ig$.features.ig_m_prv_ws&&c.push({name:IRm$.r1("B_PRIV_FLD"),expanded:!1,address:"~/",type:"Folder",is_priv:!0,writable:!0,uid:"~/",children:[{type:"load",name:"Loading..."}]}),!1===ig$.features.ig_m_team_ws&&c.push({name:IRm$.r1("B_PUB_FLD"),expanded:!1,address:"!/",type:"Folder",writable:!0,is_dept:!0,uid:"!/",children:[{type:"load",name:"Loading..."}]})),a.gridupdate){for(i=c.length-1;i>=0;i--)c[i].leaf&&c.splice(i,1);a.gridupdate.execute(e)}c.length&&e.appendChild(c),a._expandedNodes&&e.childNodes&&$.each(e.childNodes,(function(e,t){var n=t.get("uid");a._expandedNodes[n]&&(t.expand(),delete a._expandedNodes[n])})),a.ntrnode==e?a.navigateTreeOpen():a.ntrnode&&(a.ntrnode=null),a.custom_expanded_func&&a.custom_expanded_func.execute(e),a.store&&a.store.__cb&&a.store.__cb.execute()};a.request_override?a.request_override.execute({ack:"content",payload:addr,mbody:{subfolder:"T"}},new IG$.callBackObj(a,s)):(a.__loaded&&a.setLoading(!0),o.init(a,{ack:"content",payload:addr,mbody:{subfolder:"T"}},a,s),o.send())}}}}),IG$.n$navTreeCom.superclass.initComponent.call(this)}}),IG$.metaExpDlg=$s.extend($s.window,{width:400,autoHeight:!0,layout:"fit",_confirm:function(){var e=this,t=e.meta,a=new IG$._rpc$,n={output:"file"};e.getAllValues(n,!0),IG$.confirmMessages(IRm$.r1("T_EXP_MC"),IRm$.r1("T_EXP_MC_Q"),(function(i){t&&"yes"==i&&(a.init(e,{ack:"content",payload:{uid:t.uid,nodepath:t.nodepath,name:t.name,type:t.type},mbody:n},e,(function(t){var a,n;t&&(a=t.luid,n=t.filename,IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success"),a&&n&&$.download(ig$.servlet+"/download",[{name:"ack",value:"download"},{name:"_mts_",value:IG$._g$a||""},{name:"payload",value:a},{name:"mbody",value:n},{name:"session_key",value:window.use_session_key?ig$._session_key||"empty":""}],"POST"),e.close())}),null),a.send())}),e,e)},initComponent:function(){$s.apply(this,{title:IRm$.r1("T_META_EXP"),padding:ig$.padding,items:[{xtype:"container",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_META_EXP_OPT"),hidden:"security"==this.dmode,layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",name:"opt_dependants",fieldLabel:IRm$.r1("L_INC_DEP"),boxLabel:IRm$.r1("B_ENABLED"),checked:!0},{xtype:"checkbox",name:"opt_security",fieldLabel:IRm$.r1("L_INC_SEC"),boxLabel:IRm$.r1("B_ENABLED"),checked:!0},{xtype:"checkbox",name:"opt_owner_info",fieldLabel:IRm$.r1("L_INC_OWNER_INFO"),boxLabel:IRm$.r1("B_ENABLED"),checked:!0}]},{xtype:"fieldset",title:IRm$.r1("L_META_EXP_OPT"),hidden:"security"!=this.dmode,layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",name:"opt_sec_users",fieldLabel:IRm$.r1("L_INC_USERS"),boxLabel:IRm$.r1("B_ENABLED"),checked:!0},{xtype:"checkbox",name:"opt_sec_depts",fieldLabel:IRm$.r1("L_INC_DEPTS"),boxLabel:IRm$.r1("B_ENABLED"),checked:!0},{xtype:"checkbox",name:"opt_sec_roles",fieldLabel:IRm$.r1("L_INC_ROLES"),boxLabel:IRm$.r1("B_ENABLED"),checked:!0}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]}),IG$.metaExpDlg.superclass.initComponent.apply(this,arguments)}});
IG$.naviTree=$s.extend($s.panel,{setRootNode:function(e){var t=this;return t.down("[name=sinp]").setValue(""),t.m_c.getLayout().setActiveItem(0),t.m_0.setRootNode(e)},getRootNode:function(){return this.m_0.getRootNode()},doSearch:function(){var e,t,n=this,o=n.down("[name=sinp]"),i=o.getValue(),a=n.m_1,s=n.m_0.getRootNode();i?(o.clearInvalid(),a.store.loadData([]),n.m_c.getLayout().setActiveItem(1),t=s.get("uid"),(e=new IG$._rpc$).init(n,{ack:"helpcontent",payload:{uid:t},mbody:{option:"search",name:i,pid:t,metatypes:n.metatypes||"Table;Metric;CustomMetric;Measure;MeasureFormula;Report;Datemetric;Folder"}},n,(function(e){var t,n,o=e&&e.children&&e.children.length?e.children:null,i=[];if(o)for(t=0;t<o.length;t++)(n=o[t]).ltype=n.type.toLowerCase(),n.iconcls=IG$.get_metatype_icon(n.ltype,n),i.push(n);a.store.loadData(i)}),null),e.send()):(o.markInvalid("Required!"),n.m_c.getLayout().setActiveItem(0))},refreshTree:function(){this.down("[name=m_0]").refreshTree()},getSelectionModel:function(){return this.down("[name=m_0]").getSelectionModel()},setFilter:function(e){var t=this.down("[name=m_0]");this._fitem=e,t.setFilter(e)},$getTreeData:function(){var e=this.down("[name=m_0]").getRootNode();return this._updateRootTree(e,null)},_updateRootTree:function(e,t){var n,o,i,a=e.data;if(n={name:a.name,nodepath:a.nodepath,type:a.type,uid:a.uid,writable:a.writable,leaf:a.leaf,address:a.address,description:a.description,attributes:a.attributes,icon:a.icon,iconCls:a.iconCls,is_sub:a.is_sub,lfd:a.lfd,locale_name:a.local_name,ltype:a.ltype,manage:a.manage,memo:a.memo,mid:a.mid,modifier:a.modifier,objinfo:a.objinfo,owner:a.owner,pid:a.pid,revision:a.revision,sid:a.sid,text:a.text,updatedate:a.updatedate,updatedatefm:a.updatedatefm,datatype:a.datatype},e.childNodes&&e.isExpanded())for(n.children=[],o=0;o<e.childNodes.length;o++)i=this._updateRootTree(e.childNodes[o]),n.children.push(i);return n},initComponent:function(){var e,t=this;if($s.apply(this,{border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"hbox",pack:"center"},height:30,hidden:1!=t._search||"sql_report"==t.meta_type,items:[{xtype:"container",name:"m_search",layout:{type:"hbox",align:"stretch"},flex:1,items:[{xtype:"textfield",name:"sinp",flex:1,placeholder:IRm$.r1("L_SEARCH_KWD"),enableKeyEvents:!0,listeners:{keyup:function(e,t){var n=this,o=n.down("[name=sinp]"),i=n.down("[name=sclose]");13==t.keyCode&&(o.getValue()&&i.show(),n.doSearch())},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){var e=this,t=e.down("[name=sinp]"),n=e.down("[name=sclose]");t.getValue()&&n.show(),e.doSearch()},scope:this},{xtype:"button",text:"X",name:"sclose",hidden:!0,handler:function(){var e=this,t=e.down("[name=sinp]"),n=e.down("[name=sclose]");t.setValue(""),e.m_c.getLayout().setActiveItem(0),n.hide()},scope:this}]},{xtype:"button",type:"refresh",margin:"4 2 0",iconCls:"icon-refresh",tooltip:IRm$.r1("B_REFRESH"),handler:function(e,t,n){this.refreshTree()},scope:this}]},{xtype:"panel",flex:1,layout:"card",name:"m_c",defaults:{deferredRender:!1},items:[new IG$.n$navTreeCom({instance:t.instance,name:"m_0",border:0,rootuid:t.rootuid,initpath:t.initpath,mainPanel:t.mainPanel,showtoolbar:t.showtoolbar,showcheckselect:t.showcheckselect,ddGroup:t.ddGroup,enabledrag:t.enabledrag,meta_type:t.meta_type,rptptr:t.rptptr,nav_options:t.nav_options,request_override:t.request_override,custom_click_func:t.custom_click_func,custom_expand_func:t.custom_expand_func,custom_expanded_func:t.custom_expanded_func,custDblClickFunc:t.custDblClickFunc,checkStateChanged:t.checkStateChanged,visibleItems:t.visibleItems,hiddenItems:t.hiddenItems,isdatasource:t.isdatasource,tree_options:t.tree_options}),{xtype:"gridpanel",name:"m_1",emptyText:IRm$.r1("L_EMPTY"),viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:t.ddGroup,enabledrag:t.enabledrag}},store:{fields:["uid","name","type","nodepath","iconcls","lname"]},selModel:{mode:"MULTI"},columns:[{width:25,renderer:function(e,t,n){return"<div class='ig-navi-itemicon "+(n.get("iconcls")||"")+"'></div>"}},{text:IRm$.r1("B_NAME"),flex:1,tdCls:"ig-navi-namecol",renderer:function(e,t,n){var o=n.get("locale_name")||n.get("name");return n.get("locale_name")&&(o+="("+n.get("locale_name")+")"),o+="\n==>"+(n.get("nodepath")||""),"<span title='"+IG$.hEE(o)+"'>"+IG$.hEE(n.get("locale_name")||n.get("name"))+"</span>"}},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-dbicon",handler:function(e,t,n){var o=e.store.data.items[t];itemtype=o.get("type").toLowerCase(),this.m_c.getLayout().setActiveItem(0),this.m_0.navigateTree({uid:o.get("uid"),nodepath:o.get("nodepath"),type:o.get("type")})},scope:this}]}],listeners:{cellclick:function(e,t,n,o,i,a){var s=o.data;this.custom_click_func&&this.custom_click_func.execute(o,s)},itemdblclick:function(e,t,n,o,i,a){i.stopPropagation(),this.custDblClickFunc&&(bproc=this.custDblClickFunc.execute(t))},scope:this}}]}]}),t.tools&&t.tools.length)for(e=0;e<t.tools.length;e++)t.items[0].items.push(t.tools[e]);t.on("afterrender",(function(e){var t=e;t.down("[name=m_search]");t.m_0=t.down("[name=m_0]"),t.m_1=t.down("[name=m_1]"),t.m_c=t.down("[name=m_c]"),t.m_0.on("refreshTree",(function(e,n){return t.refreshTree(),1}))})),IG$.naviTree.superclass.initComponent.call(this)}});
IG$.n$brwSch=$s.extend($s.panel,{layout:"border",owner:null,reqSearch:function(){var e,t,a=this.down("[name=keyword]").getValue(),l=this.down("[name=fltsetdate]").getValue(),n=this.down("[name=fltfromdate]").getRawValue().split("-"),i=this.down("[name=flttodate]").getRawValue().split("-"),o=this.down("[name=fltypegrid]"),d=[],s=this,r=new IG$._rpc$,m=!1;for(e=0;e<o.store.data.items.length;e++)1==o.store.data.items[e].get("selected")&&d.push(o.store.data.items[e].get("type"));(a&&a.length>0||1==l)&&(m=!0),1==m&&(t={option:"search",name:a},1==l&&(t.fromdate=n.join("")+"000000",t.todate=i.join("")+"240000"),d&&d.length>0&&(t.typelist=d.join(";")),r.init(s,{ack:"helpcontent",payload:{},mbody:t},s,s.rs_reqSearch,null),r.send())},rs_reqSearch:function(e){var t,a,l,n=IG$.XGetNode(e,"/smsg/result"),i=this.down("[name=mgrid]"),o=[];if(n)for(a=IG$.XGetChildNodes(n),t=0;t<a.length;t++)(l=IG$.XGetAttrProp(a[t])).iconCls=IG$.get_metatype_icon(l.type.toLowerCase(),l),o.push(l);i.store.loadData(o)},initComponent:function(){var e=Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="idv-sch-item">','<div class="idv-sch-icon {iconCls}"> </div><h3><span>{name}</span>&nbsp;</h3>',"<p>{nodepath}</p>","</div></tpl>",{formatDate:function(e){return Ext.Date.format(e,"M j, Y")}}),t=[{xtype:"panel",layout:"anchor",autoHeight:!0,defaults:{anchor:"100%"},region:"north",items:[{xtype:"textfield",fieldLabel:IRm$.r1("B_KEYWORD"),labelWidth:50,border:!1,flex:1,height:20,hideLabel:!1,name:"keyword",value:"",allowBlank:!0,blankText:IRm$.r1("B_REQ"),enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&this.reqSearch()},scope:this}},{xtype:"fieldset",title:IRm$.r1("L_ADV_OPTION"),collapsible:!0,autoHeight:!0,collapsed:!0,defaults:{labelWidth:80,anchor:"100%",layout:"anchor",defaults:{anchor:"100%"}},items:[{xtype:"combobox",name:"fltypegroup",labelField:"Type",queryMode:"local",displayField:"name",valueField:"gcode",editable:!1,store:{fields:["name","gcode"],data:[{name:"----- Quick Select -----",gcode:""},{name:IRm$.r1("B_ALL"),gcode:"all"},{name:"Folder and Workspace",gcode:"folder"},{name:1==IG$.level?"Report or dashboard":"Report",gcode:"report"},{name:"Analysis item",gcode:"dimensions"}]},listeners:{select:function(e,t,a){var l,n,i=e.getValue(),o=this.down("[name=fltypegrid]").store,d=null,s=null;switch(i){case"all":d=null;break;case"report":d="Report|Dashboard";break;case"folder":d="Folder";break;case"dimensions":d="Dimension|Measure"}for(null!=d&&(s=new RegExp(d)),l=0;l<o.data.items.length;l++)n=o.data.items[l].get("type"),null==d||null!=s&&1==s.test(n)?o.data.items[l].set("selected",!0):o.data.items[l].set("selected",!1)},afterrender:function(e){e.setValue("")},scope:this}},{xtype:"gridpanel",name:"fltypegrid",region:"center",layout:"fit",hideHeaders:!0,flex:1,height:100,scroll:"vertical",stateful:!1,store:{fields:["selected","name","type","nodepath","uid","iconimg"],data:[{name:"Folder",type:"Folder"},{name:"Cube",type:"Cube"},{name:"Report",type:"Report"},{name:"Dimension",type:"Dimension"},{name:"Measure",type:"Measure"}]},columns:[{xtype:"checkcolumn",dataIndex:"selected",width:30,editor:{xtype:"checkbox",cls:"x-grid-checkheader-editor"}},{header:"",dataIndex:"iconimg",sortable:!1,hideable:!1,width:20},{header:IRm$.r1("B_NAME"),dataIndex:"name",sortable:!1,hideable:!1,flex:1}],listeners:{afterrender:function(e){}}},{xtype:"checkbox",name:"fltsetdate",fieldLabel:"",boxLabel:IRm$.r1("L_SET_DATE"),listeners:{change:function(e,t,a,l){var n=e.getValue(),i=this.down("[name=fltfromdate]"),o=this.down("[name=flttodate]");i.setVisible(n),o.setVisible(n)},scope:this}},{xtype:"datefield",name:"fltfromdate",hidden:!0,labelWidth:70,fieldLabel:IRm$.r1("B_FROM"),maxValue:new Date,format:"Y-m-d",value:new Date},{xtype:"datefield",name:"flttodate",hidden:!0,labelWidth:70,fieldLabel:IRm$.r1("B_TO"),maxValue:new Date,format:"Y-m-d",value:new Date}],listeners:{}},{xtype:"button",text:IRm$.r1("B_SEARCH"),border:!1,handler:function(){this.reqSearch()},scope:this}]},{xtype:"gridpanel",name:"mgrid",region:"center",flex:1,store:{fields:[{name:"name"},{name:"type"},{name:"nodepath"},{name:"uid"},{name:"iconimg"}]},stateful:!0,xtype:"dataview",loadMask:!1,autoScroll:!0,tpl:e,itemSelector:"div.idv-sch-item",listeners:{itemdblclick:function(e,t,a,l,n){var i=t.data;i&&this.owner.navigateTree(i)},scope:this}}];$s.apply(this,{items:t}),IG$.n$brwSch.superclass.initComponent.call(this)}});
IG$.n$brwser=$s.extend($s.panel,{layout:"card",bodyPadding:0,cmode:0,navigateTree:function(e){var t,o=this,a=o.getLayout(),n=o.down("[name=btnsearchitem]");o.cmode=0,t=IRm$.r1("B_SEARCH"),n.setText(t),a.setActiveItem(o.cmode),o.api.navigateTree(e)},initComponent:function(){var e=this;e.api=new IG$.naviTree({instance:e.instance,owner:e,mainPanel:e.mainPanel,showtoolbar:!1,layout:"fit"}),e.search=new IG$.n$brwSch({instance:e.instance,owner:e}),$s.apply(e,{layout:"card",region:e.region||"west",split:!0,header:!1,collapsible:!0,margins:"0 0 0 0",cmargins:"0 0 0 0",lines:!1,autoScroll:!1,animate:!0,items:[e.api,e.search]}),e.tbarobj=[" ",{xtype:"button",name:"btnsearchitem",text:IRm$.r1("B_SEARCH"),handler:function(){var e,t=this,o=t.getLayout(),a=t.down("[name=btnsearchitem]");t.cmode=1==t.cmode?0:1,e=0==t.cmode?IRm$.r1("B_SEARCH"):IRm$.r1("B_TREEVIEW"),a.setText(e),o.setActiveItem(t.cmode)},scope:e},{iconCls:"icon-refresh",tooltip:IRm$.r1("L_REFRESH"),handler:function(){this.api.refTopNode()},scope:e}],1==e.showallcheckselect&&(e.tbarobj.push({iconCls:"icon-toolbar-remove",tooltip:IRm$.r1("L_DELETE_CHECKED"),handler:function(){this.api.removeSelItems()},scope:e}),e.tbarobj.push({iconCls:"icon-toolbar-move",tooltip:"Move Selection",handler:function(){this.api.moveSelItems()},scope:e})),e.tbarobj.push("->"),e.toolbar=Ext.create("Ext.toolbar.Toolbar",{items:e.tbarobj}),Ext.apply(e,{tbar:e.toolbar}),IG$.n$brwser.superclass.initComponent.call(e)}});
IG$.c$TblTree=$s.extend($s.treepanel,{columns:[{xtype:"treecolumn",header:"Name",dataIndex:"disp",flex:1}],appendNodeElement:function(e,n){null==e.numNodeNames?e.numNodeNames=1:e.numNodeNames++;var a=new(0,this.store.model)(n);return a.leaf=n.leaf,a.raw=n,e.data.leaf=!1,e.appendChild(a),a},viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"cubeDDGroup",dropGroup:"cubeEDDGroup",enableDrag:!0,enableDrop:!1,listeners:{drop:function(e,n,a,d){a&&a.get("name")}}}},reqTable:function(e){var n,a,d=this,i=e.get("nodepath"),t=e.get("uid"),l=(e.get("type"),new IG$._rpc$);n={address:t||i,option:"StoredContent"},a={option:"folder",readcontent:"T"},l.init(d,{ack:"25",payload:n,mbody:a},d,(function(n){var a,i,t,l=n&&n.length?n[0]:null;if(l&&l.children)for(a=l.children,i=0;i<a.length;i++)(t=a[i].content).checked=!1,t.leaf=!0,t.allowDrag=!0,1==d.cmode?t.disp=t.alias&&t.alias!=t.name?t.alias+"("+t.name+")":t.name:t.disp=t.name,e.appendChild(t)}),!1),l.send()},initComponent:function(){$s.apply(this,{store:{store:"treestore",fieldSort:!1,fields:["name","alias","nodepath","datasize","selected","tablename","type","uid","disp","seq","datatype","fieldname","mapto","sqlfield","fieldid","sequence","uniquekey","mcuid"],root:{name:"CubeModel Tables",disp:"CubeModel Tables",address:"/"}},collapseFirst:!1,singleExpand:!1,nodekey:{},listeners:{checkchange:function(e,n){if(1==e.hasChildNodes()){for(i=0;i<e.childNodes.length;i++)e.childNodes[i].set("checked",n);e.expand()}},beforeitemexpand:function(e,n){var a=e.get("type");"Table"!=a&&"InlineView"!=a||!e.hasChildNodes()||"ml_tb"==e.childNodes[0].get("type")&&(e.removeChild(e.childNodes[0]),this.reqTable(e))},scope:this}}),IG$.c$TblTree.superclass.initComponent.apply(this,arguments)}});
IG$.dyn_base=function(){},IG$.dyn_base.prototype={$getctrl:function(e){return this.controls[e]}},IG$.clControlItem=function(e,t,r,o){var n=this;n.owner=o,n.parentcontrol=null,n.subcontrols=[],n.position={top:10,left:10,right:null,bottom:null,width:100,height:100,percentwidth:null,percentheight:null},n.dsmode=r,n.property={visible:"true",border:"1",bordercolor:"#e5e5e5",backgroundcolor:"#ffffff",padding:"2"},n.uctrl=t,n.actionlist={},n.uctrl&&"panel"==n.uctrl.ctrltype&&"border"==n.uctrl.property.layout&&(n.property.title=n.property.title||" "),e&&(n.uid=e.uid,n.ctrltype=e.type,n.ctrlname=e.name,n.actionlist=e.actionlist,n.position=e.position||null,n.property=e.properties,n.control=n.getControl(n.ctrltype.toLowerCase()),n.control.applicationItem=e.item)},IG$.clControlItem.prototype={getSelectionData:function(e){var t=this,r=null;return t.control&&t.control.getSelectionData&&(r=t.control.getSelectionData(e)),r},disposeContent:function(e){e.control&&void 0!==e.control&&(e.control.disposeContent(e.control),e.control=null)},getControl:function(e){return IG$.getControl.call(this,e,this.dsmode)},need_invalidate:function(){var e,t=this;return!(!t.uctrl||"panel"!=t.uctrl.ctrltype||"vbox"!=(e=t.uctrl.property.layout)&&"hbox"!=e)},clearInvalid:function(){var e=this.control;e&&e.clearInvalid&&e.clearInvalid()},markInvalid:function(){var e=this.control;e&&(e.markInvalid(),e.cmp$&&e.cmp$.focus&&e.cmp$.focus())}},IG$.getControl=function(e,t,r){var o=null,n=this;if(r)o={width:100,height:100};else{switch(n.property.instance=n.instance,e){case"titlelabel":o=new IG$.ctrlTitleLabel(n.property,n,t);break;case"olapreport":case"compositereport":o=new IG$.ctrlPivotReport(n.property,n,t);break;case"label":o=new IG$.ctrlLabel(n.property,n,t);break;case"textarea":o=new IG$.ctrlTextArea(n.property,n,t);break;case"picture":case"image":o=new IG$.ctrlPicture(n.property,n,t);break;case"button":o=new IG$.ctrlButton(n.property,n,t);break;case"textbox":o=new IG$.ctrlTextInput(n.property,n,t);break;case"datechooser":o=new IG$.ctrlDateField(n.property,n,t);break;case"monthchooser":o=new IG$.ctrlMonthField(n.property,n,t);break;case"combobox":o=new IG$.ctrlComboBox(n.property,n,t);break;case"fieldset":o=new IG$.ctrlFieldSet(n.property,n,t);break;case"panel":o=new IG$.ctrlPanel(n.property,n,t);break;case"treefilter":o=new IG$.ctrlTreeFilter(n.property,n,t);break;case"grid":o=new IG$.interactiveGrid(n.property,n,t);break;case"browser":o=new IG$.ctrlBrowserPanel(n.property,n,t);break;case"sheetfilter":o=new IG$.sheetFilter(n.property,n,t);break;case"tabpanel":o=new IG$.ctrlTabPanel(n.property,n,t);break;case"dashboard":o=new IG$.ctrlDashboardPanel(n.property,n,t);break;case"promptfilter":o=new IG$.ctrlPromptFilter(n.property,n,t);break;case"checkbox":o=new IG$.ctrlCheckbox(n.property,n,t);break;case"pivotfilter":o=new IG$.pivotFilter(n.property,n,t);break;case"pivotdesign":o=new IG$.pivotDesign(n.property,n,t);break;case"fileupload":o=new IG$.ctrlFileUpload(n.property,n,t);break;case"scheduler":o=new IG$.ctrlScheduler(n.property,n,t);break;default:o=new IG$.ctrlNullControl(n.property,n,t)}o.type=e}return o},IG$.clEvents=function(e){var t,r,o,n,a=this;if(a._raw=e||{},a.type="actionitem",a.controlId=null,a.enableoffline=null,a.filters=null,a.params={iparams:{},oparams:{}},e){if(a.uid=e.uid,a.name=e.name,a.condition_script=e.condition_script,a.description=e.description,a.purpose=e.purpose?e.purpose.toLowerCase():null,t=e.params){if(r=t.iparams)for(n in r)o=r[n],a.params.iparams[o.uid]=o;if(r=t.oparams)for(n in r)o=r[n],a.params.oparams[o.uid]=o}switch(a.purpose){case"onlinereport":t=e.item,a.item=t,t&&(a.controlId=t.controlid);break;case"valuelist":t=e.options,a.item=e.item;break;case"execute_script":e.options&&(a.script=e.options.script);break;case"servercall":e.options&&$s.apply(a,{jmodule:e.options.jmodule,jmodule_name:e.options.jmodule_name,jmethod:e.options.jmethod});break;case"restcall":e.options&&$s.apply(a,{rmodule:e.options.rmodule,rmodule_name:e.options.rmodule_name,rmethod:e.options.rmethod,rhttpmethod:e.options.rhttpmethod});break;case"open_dlg":e.options&&(a.btntype=e.options.btntype,a.btnclose=e.options.btnclose,a.dlgmsg=e.options.dlgmsg,a.dlgtitle=e.options.dlgtitle);break;case"open_win":a.item=e.item,e.options&&(a.ispopup="T"==e.options.ispopup);break;case"export":e.options&&(a.exp_tmpl=e.options.exp_tmpl,a.exp_out=e.options.exp_out);break;case"close":e.options&&(a.dlgresult=e.options.dlgresult)}}},IG$.clEvents.prototype={parseFilter:function(e,t){if(e){var r,o=e.subGroups;if(o&&o.length>0)for(r=0;r<o.length;r++){var n=new IG$.clFilterGroup;n.name=o[r].name,t.subGroups.push(n),this.parseSubFilter(o[r],n)}}},updateParamValue:function(e){var t=this.params,r=e.page_param_map;$.each([t.iparams,t.oparams],(function(e,t){$.each(t,(function(e,t){t.value?t.valuename=r[t.value]?r[t.value].name||"ERR":"N/A":t.values}))}))},parseSubFilter:function(e,t){var r,o,n;if(o=e.subGroups,n=e.subConditions,o&&o.length>0)for(r=0;r<o.length;r++){var a;(a=new IG$.clFilterGroup).name=IG$.XGetAttr(o[r],"name"),this.parseSubFilter(o[r],a),t.subGroups.push(a)}else if(n&&n.length)for(r=0;r<n.length;r++)t.subConditions.push(new IG$.clFilter(n[r]))},getXML:function(){var e=this,t={purpose:e.purpose,type:e.type,uid:e.uid,name:e.name,condition_script:e.condition_script,description:e.description,options:{},params:{iparams:e.params.iparams,oparams:e.params.oparams}},r=e.purpose,o=t.options;switch(r){case"onlinereport":t.item=e.item;break;case"valuelist":o.controlid=e.controlId,o.enableoffline=e.enableoffline?"T":"F",t.item=e.item;break;case"execute_script":o.script=e.script;break;case"servercall":o.jmodule_name=e.jmodule_name,o.jmodule=e.jmodule,o.jmethod=e.jmethod;break;case"restcall":o.rmodule_name=e.rmodule_name,o.rmodule=e.rmodule,o.rmethod=e.rmethod,o.rhttpmethod=e.rhttpmethod;break;case"open_dlg":o.btntype=e.btntype,o.btnclose=e.btnclose,o.dlgtitle=e.dlgtitle,o.dlgmsg=e.dlgmsg;break;case"export":o.exp_tmpl=e.exp_tmpl,o.exp_out=e.exp_out;break;case"open_win":o.ispopup=e.ispopup?"T":"F",t.item=e.item;break;case"close":o.dlgresult=e.dlgresult||"OK"}return t}};
IG$.__util={},IG$.__util.msgbox=function(t){IG$.alertmsg(ig$.appname,t,null,null,1,"error")},IG$.__util._rcs=function(t,e){return e},IG$.__util.v_date=function(t,e){var i=t;return t&&(i=[t.substring(0,4),t.substring(4,6),t.substring(6,8)].join(e)),i},IG$.__util.v_field=function(t,e,i){var n=!0;return t||(n=!1,e&&IG$.alertmsg(i||ig$.appname,e,null,null,1,"error")),n},IG$.controls={},IG$.ctrlBase=function(t,e,i){var n=this;n.instance=e&&e.owner?e.owner.instance:null,n.ctrl=e,n.p=[{name:"visible",type:"property",datatype:"boolean",value:!0},{name:"flex",type:"property",datatype:"number",value:4},{name:"basecls",type:"property",datatype:"string"}],n.property=t,n._papp={},n.applicationItem=null,n.getter={},n.setter={},n.dsmode=i,n.html=$("<div id='"+(null!=e?e.ctrlname:"")+"' class='ig-db-ctrls ig-db-"+n.type+"'><div class='ig-db-title'></div><div class='ig-db-el'></div><div class='ig-db-sel'/></div>"),n.el$=$(".ig-db-el",n.html),n.tl$=$(".ig-db-title",n.html),n.superclass=IG$.ctrlBase,n.initComponent()},IG$.ctrlBase.prototype={__pcinit:function(){var t,e=this;for(t in e.__pcinit_=1,e.property)e.set(t,e.property[t]);e.__pcinit_=0},_get_id:function(){return IG$._fcid=IG$._fcid||0,"form_"+IG$._fcid++},get:function(t){var e=this;return e.getter[t]?e.getter[t].apply(e):null},set:function(t,e){this.setter[t]&&this.setter[t](e)},val:function(t){return this[void 0!==t?"set":"get"]("text",t)},doGet:function(t){var e=this;return e.getter[t]?e.getter[t].apply(e):null},doSet:function(t,e){this.setter[t]&&this.setter[t](e)},invalidate:function(){},updateBorder:function(){var t=this,e=(t.dsmode?1:t.property.border)+"px solid "+t.property.bordercolor;t.html.css({border:e})},enabled:function(t){},updateProperty:function(t,e){var i=this;if(i.property[t]=e,i._papp[t]!=e)switch(i._papp[t]=e,t){case"visible":0!=e||i.dsmode?i.html.show():i.html.hide();break;case"fieldlabel":i.tl$&&i.tl$.html(e||""),i.lbl$&&i.lbl$.html(e||""),i.mp$&&(i.mp$.label=e);break;case"border":case"bordercolor":i.updateBorder();break;case"basecls":e&&i.html&&i.html.addClass(e);break;case"flex":i.raiseEvent("validate")}},clearInvalid:function(){var t=this.html,e=this.cmp$;t&&t.removeClass("ig-db-invalid"),e&&e.removeClass("is-invalid")},markInvalid:function(t){var e=this.html,i=this.cmp$;e.addClass("ig-db-invalid"),i&&i.addClass("is-invalid")},initComponent:function(){var t=this;$.each(t.p,(function(e,i){"property"==i.type&&(void 0!==i.value&&void 0===t.property[i.name]&&(t.property[i.name]=i.value),t.getter[i.name]=function(){return this.property[i.name]},t.setter[i.name]=function(e){t.property[i.name];t.property[i.name]=e,0!=t.superclass.prototype.updateProperty.apply(t,[i.name,e])&&t.updateProperty&&t.updateProperty(i.name,e)})}))},trigger:function(t){this.triggerEvent(t)},raiseEvent:function(t){this.html.trigger("e_"+t)},triggerEvent:function(t,e){var i=this,n=i.ctrl,r=n?n.owner:null,l=n?n.actionlist:null;e||(e={ctrl:i.ctrl,ptr:i,event:t}),"change"==t&&r._valueChangeHandler(i.ctrl),l&&l[t]&&r.executeAction(l[t],e)},applyApplication:function(){},initDrawing:function(){this.__pcinit()},dispose:function(){},_sync_val:function(t,e,i){var n=this,r="_sync_val_timer_"+(i||0);n[r]&&clearTimeout(n[r]),n[r]=setTimeout((function(){t.value!==e.val()?t.value=e.val():n._sync_val(t,e,i)}),100)}},IG$.ctrlNullControl=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this,e=t.ctrl,i=$("<div>unknown control: "+e.ctrlname+"</div>");t.el$.append(i),t.superclass.prototype.initComponent.call(t)},initDrawing:function(){this.html.css({border:"1px solid #a5a5a5"}),this.__pcinit()}});
IG$.gridConfig=function(){this.sfields=["fieldname","name","flex","minw","width","hidden","formatstring","align","datatype"],this.columns=[]},IG$.gridConfig.prototype={loadData:function(e){var t,n,i,l,a,o=this,r=o.columns;if(r.splice(0,r.length),e)for(t=0;t<e.length;t++){for(n={},i=0;i<o.sfields.length;i++)l=o.sfields[i],a=e[t][l],"minw"==l?a&&(n.minWidth=Number(a)):"width"==l?a&&(n.width=Number(a)):"flex"==l?a&&(n.flex=Number(a)):n[l]=a;r.push(n)}},getXML:function(){var e,t,n,i,l=[],a=this.columns,o=this.sfields;for(t=0;t<a.length;t++){for(e={},j=0;j<o.length;j++)i=o[j],n=a[t][i],("minw"==i||"width"==i||"flex"==i)&&(n=""+(n||"")),e[i]=n;l.push(e)}return l}},IG$.interactiveGrid=IG$.extend(IG$.ctrlBase,{type:"grid",initComponent:function(){var e=this;e.activeIndex=0,e.p.push({name:"cell_click",type:"event"},{name:"flexHeight",type:"property",datatype:"number",value:0},{name:"minHeight",type:"property",datatype:"number",value:0},{name:"text",type:"property",datatype:"string"},{name:"selectionmode",type:"property",datatype:"string",value:"none",enum:[{name:"none",value:"none"},{name:"single",value:"single"},{name:"multi",value:"multi"}]},{name:"selheader",type:"property",datatype:"string",value:""}),e._cinfo=new IG$.gridConfig,e.superclass.prototype.initComponent.call(e)},processEvent:function(e,t){},invalidate:function(){var e=this.viewer;e&&e.$ex.adjust()},initDrawing:function(){var e,t=this,n=t.ctrl.actionlist;t.ctrl.parentcontrol;t._cinfo.loadData(t.layout._xparam),t.viewer||(t.viewer=new $s.gridpanel({renderTo:t.el$,autofit:!0,header:!1,move:!1,columns:[],listeners:{cellclick:function(e,i,l,a,o,r){n.cell_click&&t.triggerEvent("cell_click",{ctrl:t.ctrl,ptr:t,event:"cell_click"})}}})),t.validateColumns(),t.dsmode&&(e=$("<div class='igc-p-config' style='z-index: 10'><div class='igc-p-config-bg'></div><button>Config</button></div>").appendTo(t.html),$("button",e).bind("click",(function(){t.configComponent.call(t)}))),t.tl$.hide(),t.__pcinit()},configComponent:function(){var e=this,t=new IG$.interactiveGridConfig({instance:e.instance,_cinfo:e._cinfo,callback:new IG$.callBackObj(e,(function(t,n){e.layout._xparam=e._cinfo.getXML(),e.validateColumns()}),e.viewer)});IG$.checkLogin(this,t)},updateProperty:function(e,t){var n=this,i=(n.viewer,n._cinfo);if(!n.dsmode)switch(e){case"report_control":case"text":break;case"selectionmode":t&&i.selmodel!=t&&(i.selmodel=t,n.validateColumns(!0))}},applyDataSet:function(e){var t,n,i,l,a,o,r,d,c=[],s=this._cinfo.columns||[],m={};if(e.data){for(t=0;t<e.headers.length;t++)m[e.headers[t]]=t+1;for(t=0;t<e.data.length;t++){for(l=e.data[t],a={},n=0;n<s.length;n++){if((o=m[d=(i=s[n]).fieldname||"field_"+n]?l[m[d]-1]:"")&&"date"==i.datatype&&(r=Number(o),0==isNaN(r))){var u=new Date(r);const e=u.getFullYear();let t=u.getMonth()+1,n=u.getDate();n<10&&(n="0"+n),t<10&&(t="0"+t),o=e+"-"+t+"-"+n}a[d]=o}c.push(a)}}this.viewer.store.loadData(c)},updateLayout:function(){this.ctrl.dashboard},validateColumns:function(e){var t,n,i,l,a,o,r=this,d=r.viewer,c=[],s=r._cinfo,m=s.columns,u=[],f=r.ctrl.actionlist;r.ctrl.parentcontrol;if(e&&(d.close(),"single"!=s.selmodel&&"multi"!=s.selmodel||(o="checkboxmodel",a={selection:"checkboxmodel",checkSelector:".x-grid-cell",mode:"single"==s.selmodel?"SINGLE":"MULTI"}),d=r.viewer=new $s.gridpanel({renderTo:r.el$,selType:o,selModel:a,disabled:r.dsmode,columns:[],listeners:{cellclick:function(e,t,n,i,l,a){f.cell_click&&r.triggerEvent("cell_click",{ctrl:r.ctrl,ptr:r,event:"cell_click"})}}})),d){for(i=0;i<m.length;i++)(n=m[i]).fieldname=n.fieldname||"field_"+i,l={xtype:"gridcolumn",text:n.name||n.fieldname,dataIndex:n.fieldname,minWidth:n.minw||50,hidden:!(r.dsmode||!n.hidden),align:n.align||"left"},n.width?l.width=Number(n.width):n.flex&&(l.flex=Number(n.flex)),u.push(l.dataIndex),c.push(l);t={fields:u},d.reconfigure(t,c)}},getSelectionData:function(e){var t,n,i=this.viewer,l=[];return e&&e.name&&i&&(n=i.getSelectionModel().selected)&&n.length&&(t=n.items[0].get(e.name))&&l.push({code:t,value:t}),l},selRow:function(){return this.viewer.getSelectionModel().selected},selRowCnt:function(){return this.selRow().length},selColInfo:function(e){var t,n,i=this.selRow(),l=e,a=this.viewer.columns;return i&&i.length&&(n=i.items[0],"string"==typeof e?l=e:a&&a.length>e&&(l=a[e].dataIndex),t=n.get(l)),t},cell:function(e,t){var n,i,l=this.viewer.store,a=this.viewer.columnManager.columns[t];return(i=l.data.items[e])&&a&&(n=i.get(a.dataIndex)),n}}),IG$.controls.grid=new IG$.interactiveGrid({},null),IG$.interactiveGridConfig=$s.extend($s.window,{modal:!1,isWindow:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:700,height:450,reportoption:null,callback:null,init_f:function(){var e=this,t=e.grd;e._cinfo&&t.store.loadData(e._cinfo.columns)},toolbarHandler:function(e){var t,n,i=this.grd;switch(e){case"c_add":i.store.add({minw:100});break;case"c_del":for(n=(t=i.getSelectionModel().selected).length-1;n>=0;n--)i.store.remove(t.items[n])}},moveGrid:function(e,t){var n=e.getSelectionModel().getSelection(),i=n.length?n[0]:null;if(i){var l=e.getStore().indexOf(i);if(t<0){if(--l<0)return}else if(++l>=e.getStore().getCount())return;e.getStore().remove(i),i=e.getStore().insert(l,i),e.getSelectionModel().select(i,!0)}},_confirm:function(){var e,t,n,i=this,l=(i._cinfo,i._cinfo.columns),a=i.grd,o=i.sfields;for(l.splice(0,l.length),e=0;e<a.store.data.length;e++)t=a.store.data.items[e],n={},$.each(o,(function(e,i){n[i]=t.get(i)})),l.push(n);i.callback&&i.callback.execute(),i.close()},initComponent:function(){var e=this._cinfo.sfields;this.sfields=e,$s.apply(this,{title:IRm$.r1("T_GRD_CFG"),items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:ig$.padding,tbar:[{text:IRm$.r1("B_ADD"),handler:function(){this.toolbarHandler("c_add")},scope:this},{text:IRm$.r1("B_DELETE"),handler:function(){this.toolbarHandler("c_del")},scope:this},{text:IRm$.r1("L_MOVE_UP"),handler:function(){this.moveGrid(this.grd,-1)},scope:this},{text:IRm$.r1("L_MOVE_DOWN"),handler:function(){this.moveGrid(this.grd,1)},scope:this}],items:[{xtype:"gridpanel",flex:1,name:"grd",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},sortableColumns:!1,plugins:[{ptype:"cellediting",clicksToEdit:!0}],store:{fields:e},columns:[{text:IRm$.r1("L_FIELD_NAME"),dataIndex:"fieldname",flex:1,editor:{allowBlank:!1}},{text:IRm$.r1("L_HEADER"),dataIndex:"name",flex:1,editor:{allowBlank:!1}},{text:IRm$.r1("L_MIN_WIDTH"),dataIndex:"minw",width:80,editor:{xtype:"numberfield",allowBlank:!1}},{text:IRm$.r1("L_WIDTH"),dataIndex:"width",width:80,editor:{xtype:"numberfield",allowBlank:!1}},{text:IRm$.r1("L_WIDTH_FLEX"),dataIndex:"flex",width:80,editor:{xtype:"numberfield",allowBlank:!0}},{xtype:"checkcolumn",text:IRm$.r1("L_HIDDEN"),dataIndex:"hidden",width:80},{text:IRm$.r1("L_ALIGN"),dataIndex:"align",width:80,editor:{allowBlank:!0,xtype:"combobox",displayField:"name",valueField:"value",store:{xtype:"store",data:[{name:"LEFT",value:"left"},{name:"RIGHT",value:"right"},{name:"CENTER",value:"center"}]}}},{text:IRm$.r1("L_DATATYPE"),dataIndex:"datatype",width:80,editor:{allowBlank:!0,xtype:"combobox",displayField:"name",valueField:"value",store:{xtype:"store",data:[{name:"NONE",value:""},{name:"STRING",value:"string"},{name:"DATE",value:"date"},{name:"INTEGER",value:"integer"},{name:"DOUBLE",value:"double"}]}}}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){var t=this;t.grd=t.down("[name=grd]"),t.init_f()}}}),IG$.interactiveGridConfig.superclass.initComponent.apply(this,arguments)}});
IG$.pivotDesignBase=$s.extend(IG$.v$pnl,{layout:{type:"vbox",align:"stretch"},updateProperty:function(e,t){var o=this,n=o.down("[name=pivotbrowser]"),i=o.down("[name=pivoteditor]");o._cinfo;switch(e){case"report_control":case"text":case"selectionmode":break;case"show_custom_forumula":n.down("[name=custom_formula]").setVisible(t);break;case"show_viewmode":i.down("[name=dataquerymode_bar]").setVisible(t);break;case"show_filter":i.down("[name=btn_filter]").setVisible(t);break;case"show_advaned_options":i.down("[name=btn_adv]").setVisible(t)}},_init:function(){var e=this,t=e.down("[name=pivoteditor]");t.down("[name=btn_pagefilter]").setVisible(!1),t.down("[name=btn_grid_style]").setVisible(!1),t.down("[name=sync_view]").setVisible(!1),t.on("join_tables",(function(e){this.down("[name=pivotbrowser]").setFilter(e)}),e),e.applyApplication()},applyApplication:function(e){var t,o=this,n=o.down("[name=pivoteditor]"),i=o.down("[name=pivotbrowser]"),a=o.sindex||0,p=o.applicationItem,r=o.reportoption;if(p){if(!e&&"Report"==p.type&&p.uid){var s=new IG$._rpc$;return s.init(o,{ack:"content",payload:{uid:p.uid},mbody:{}},o,(function(e){o.applyApplication(e)}),!1),void s.send()}r||(e||(e={type:"Report",writable:!0,manage:!0,content:{cube_objects:[],type:"Report",meta_type:o.meta_type||"report",writable:!0,manage:!0,objinfo:{reportversion:"1.2"},ctrls:{dock_0:{objtype:"_dc",layoutinfo:{},docid:"dock_0"}},sheets:[{objtype:"SHEET",layoutinfo:{docid:"dock_1"}}],layout:{type:"mondrian",children:[{docid:"dock_0",objtype:"_dc",width:400,height:300,r:null,p:null,d:0,children:[{docid:"dock_1",objtype:"SHEET",width:400,height:300,r:"dock_0",p:null,d:0}]}]}}}),r=o.reportoption=new IG$.clReports(e,e.content.meta_type),t=new IG$.clReport({},r.itemtype,!1),r.sheets.push(t)),t=r.sheets[a],"Bobject"==p.type&&r.cube_objects.push(p),n.activeSheet=a,n.reportoption=o.reportoption,n.sheetoption=t,setTimeout((function(){i.loadSheetOption.call(i,o.reportoption.sheets[o.activeSheet],o.reportoption),n.applCurPivotInfo.call(n),n._c=1}),20)}},confirm:function(){var e=this.down("[name=pivoteditor]");e._confirm&&e._confirm.call(e)},initComponent:function(){var e=this;$s.apply(this,{items:[{xtype:"panel",layout:"card",name:"mcard",flex:1,items:[{xtype:"panel",layout:"border",items:[new IG$.p$PivotBrws({instance:e.instance,name:"pivotbrowser",region:"center",flex:1,border:0,resizable:!0,rptptr:e.rptptr,callback:new IG$.callBackObj(e,e.updatePivotContent),listeners:{cube_changed:function(e,t){},scope:this}}),new IG$.c$pivotPnl({instance:e.instance,name:"pivoteditor",layoutmode:"panel",hidden:!1,region:"east",flex:3,split:!0,resizable:!0,_pivotEdtMd:!0,border:0})]}],bbar:["->",{xtype:"button",text:IRm$.r1("L_EXECUTE"),handler:function(){var e=this.pctrl;this.confirm(),e._execRptReq()},scope:this}]}]}),e.on("afterrender",e._init),IG$.pivotDesignBase.superclass.initComponent.apply(this,arguments)}}),IG$.pivotDesign=IG$.extend(IG$.ctrlBase,{type:"pivotdesign",initComponent:function(){var e=this;e.activeIndex=0,e.p.push({name:"request_run",type:"event"},{name:"flexHeight",type:"property",datatype:"number",value:0},{name:"minHeight",type:"property",datatype:"number",value:0},{name:"show_custom_forumula",type:"property",datatype:"boolean"},{name:"show_cluster",type:"property",datatype:"boolean"},{name:"show_viewmode",type:"property",datatype:"boolean"},{name:"show_filter",type:"property",datatype:"boolean",value:!0},{name:"show_custom_field",type:"property",datatype:"boolean",value:!0},{name:"show_advaned_options",type:"property",datatype:"boolean",value:!1}),e.superclass.prototype.initComponent.call(e)},processEvent:function(e,t){},invalidate:function(){var e=this.viewer;e&&e.$ex.adjust()},initDrawing:function(){var e=this;e.viewer||(e.viewer=new IG$.pivotDesignBase({renderTo:e.el$,ctrl:e.ctrl,pctrl:e,autofit:!0,header:!1,move:!1,applicationItem:e.applicationItem})),e.tl$.hide(),e.__pcinit()},updateProperty:function(e,t){this.viewer.updateProperty(e,t)},applyApplication:function(){var e=this.viewer;e&&(e.applicationItem=this.applicationItem,e.applyApplication())},updateLayout:function(){this.ctrl.dashboard},_execRptReq:function(){this.triggerEvent("request_run")},getSelectionData:function(e){var t,o,n=this.viewer,i=[];return e&&e.name&&n&&(o=n.getSelectionModel().selected)&&o.length&&(t=o.items[0].get(e.name))&&i.push({code:t,value:t}),i}}),IG$.controls.pivotdesign=new IG$.pivotDesign({},null);
IG$.sheetFilter=IG$.extend(IG$.ctrlBase,{type:"sheetfilter",initComponent:function(){var e=this;e.p.push({name:"flexHeight",type:"property",datatype:"number",value:0},{name:"minHeight",type:"property",datatype:"number",value:0},{name:"report_control",type:"property",datatype:"string",vmode:1},{name:"filter_id",type:"property",datatype:"string",vmode:1},{name:"itemclick",type:"event"}),e.superclass.prototype.initComponent.call(e)},processEvent:function(e,t){},invalidate:function(){},applyApplication:function(){},initDrawing:function(){var e=this;e.html.addClass("igc_view_mode"),e.viewer=new IG$.dynFilterView(e.instance,e.el$,null,e),e.viewer.init_f(!0),e.tl$.hide(),e.__pcinit()},updateProperty:function(e,t){if("report_control"===e)this.__ivp()},__ivp:function(){var e=this,t=e.property,i=t.report_control,n=t.filter_id,r=e.ctrl.dashboard;e.dsmode||e.__pcinit_||i&&r&&r.ControlDict&&setTimeout((function(){var t,o;(t=r.ControlDict[i])&&n&&(o=t.control).negoFilter&&(e.el$.empty(),ubody=o.negoFilter(e,n,new IG$.callBackObj(e,(function(t){var i=t.ubody;i&&i.view&&(i.view.contentarea.appendTo(e.el$),i.view.splash.appendTo(e.el$),e.ctrl.owner.validateSize())}))))}),20)}}),IG$.controls.sheetfilter=new IG$.sheetFilter({},null);
IG$.pivotFilterEditor=$s.extend(IG$.v$pnl,{layout:"fit",activeSheet:0,loadReport:function(t){var e,i=this;i.uid=t.uid,(e=new IG$._rpc$).init(i,{ack:"content",payload:{uid:i.uid,revision:i.revision},mbody:{}},i,(function(t){i.reportoption=new IG$.clReports(t,t.content?t.content.meta_type:null);var e=i.down("[name=browser]"),o=i.down("[name=feditor]"),n=i.down("[name=p_opeditor]");if(i.reportoption.sheets.length>0){i.sheetoption=i.reportoption.sheets[0],i.cubeuid=i.sheetoption.cubeuid||i.reportoption.cubeuid;var r=i.sheetoption.reportmode||i.reportoption.reportmode,l={};l.type="rolap"==r?"Cube":"Metric",l.name=l.type,l.nodepath=l.type,l.uid=i.cubeuid||null,l.leaf=!1,e.setRootNode.call(e,l),e.show(),o.reportoption=i.reportoption,o.sheetoption=i.sheetoption,o.in$t.call(o),o.show(),n.reportoption=i.reportoption,n.sheetoption=i.sheetoption,n.show()}}),!1),e.send()},requestSQLResult:function(t,e){var i=this,o=i.down("[name=feditor]");if(i._lsql=[],i._ldb=[],null!=i.sheetoption&&null!=i.reportoption){o.confirmFilterSetting.call(o);var n=i.reportoption.getCurrentPivot.call(i.reportoption),r=new IG$._rpc$;r.init(i,{ack:"olapservice",payload:{uid:i.uid,option:"sql",active:""+i.activeSheet},mbody:n},i,(function(o){var n,r=IG$.XGetNode(o,"/smsg/item/ExecuteQuery");r&&(n=IG$.XGetTextVal(r),i._lsql.push(n)),t&&e&&e.call(t,1)}),(function(i){t&&e&&e.call(t,!1)})),r.send()}},set_count:function(t){var e=this.down("[name=feditor]");e.set_count.call(e,t)},initComponent:function(){$s.apply(this,{items:[{xtype:"panel",layout:"border",items:[{xtype:"panel",title:IRm$.r1("L_pf_navitree"),layout:"fit",split:!0,region:"west",flex:1,border:0,items:[new IG$.naviTree({instance:me.instance,showtoolbar:!1,name:"browser",hidden:!0,cubebrowse:!0,collapsible:!1,floatable:!1,floating:!1,ddGroup:"_I$RD_G_",layout:"fit",enabledrag:!0,_search:!0,custDblClickFunc:new IG$.callBackObj(this,(function(t){p_opeditor=this.down("[name=p_opeditor]"),filter=new IG$.clFilter(null),filter.operator=6,p_opeditor.filteritem=filter,p_opeditor.init_f.call(p_opeditor),p_opeditor.itemSelectedHandler.call(p_opeditor,t.data)}))})]},{xtype:"panel",layout:"border",region:"center",split:!0,flex:2,items:[{xtype:"panel",title:IRm$.r1("L_pf_fedit"),split:!0,padding:ig$.padding,layout:"fit",flex:1,region:"north",items:[new IG$.filterEditorPanel({instance:me.instance,name:"p_opeditor",hidden:!0,autoScroll:!1,_cmode:1,flex:1})]},{xtype:"panel",split:!0,region:"center",title:IRm$.r1("L_pf_filter"),flex:1,layout:"fit",items:[new IG$.filterMainEditor({instance:me.instance,name:"feditor",hidden:!0,deferredRender:!1,padding:ig$.padding})]}]}]}]}),IG$.pivotFilterEditor.superclass.initComponent.call(this)},listeners:{afterrender:function(t){var e=t,i=e.down("[name=p_opeditor]"),o=e.down("[name=feditor]");i.on("add_filter",(function(t){t._confirm.call(t);var e,i=t.filteritem;e=o.rootnode_w.children[0],o.rs_appendCondition.call(o,[e,i])})),i.init_f.call(i)}}}),IG$.pivotFilter=IG$.extend(IG$.ctrlBase,{initComponent:function(){var t=this;t.p.push({name:"report_control",type:"property",datatype:"string",vmode:1},{name:"filter_id",type:"property",datatype:"string",vmode:1},{name:"flexHeight",type:"property",datatype:"number",value:0},{name:"minHeight",type:"property",datatype:"number",value:0},{name:"itemclick",type:"event"}),t.superclass.prototype.initComponent.call(t)},processEvent:function(t,e){},invalidate:function(){var t=this,e=IG$.j$ext._w(t.html),i=IG$.j$ext._h(t.html);t.viewer&&(t.renderto.width(e).height(i),t.viewer.setSize(e,i))},valid:function(){return 0},confirmFilter:function(t,e,i){var o=this,n=o.ctrl.dashboard;o.viewer.requestSQLResult.call(o.viewer,o,(function(t){var o;if(0!=t)try{o=i.call(e,t)}catch(t){o=!1,IG$.ShowError(IRm$.r1("E_FILTER_SCRIPT"),null,null,{errstack:t.stack})}0!=t&&0!=o?n.contEventProc.call(n,n):n.stopEventProc.call(n,n)}))},applyApplication:function(){},initDrawing:function(){var t=this,e=IG$.j$ext._w(t.html),i=IG$.j$ext._h(t.html),o=$("<div></div>").appendTo(t.html);t.ctrl.actionlist;IG$.j$ext._w(o,e),IG$.j$ext._h(o,i),t.viewer=t.dsmode?null:new IG$.pivotFilterEditor({width:IG$.j$ext._w(o),height:IG$.j$ext._h(o),renderTo:o[0]}),t.renderto=o,t.__pcinit()},updateProperty:function(t,e){if(!this.dsmode&&"report_control"===t)this.__ivp()},__ivp:function(){var t=this,e=t.property,i=e.report_control,o=e.filter_id,n=t.ctrl.dashboard;t.dsmode||t.__pcinit_||i&&n&&n.ControlDict&&setTimeout((function(){var e,r;(e=n.ControlDict[i])&&o&&(r=e.control).negoFilter&&r.negoFilter.call(r,t,o)}),20)},set_base_report:function(t,e,i){var o=this,n=new IG$._rpc$;n.init(o,{ack:"helpcontent",payload:{uid:t},mbody:{option:"translate"}},o,(function(t){var e=t;e&&e.uid&&o.viewer.loadReport.call(o.viewer,e)}),!1),n.send()},get_sql:function(t){return this.viewer._lsql.join(t||";")},get_db:function(t){return this.viewer._ldb.join(t||";")},set_count:function(t){this.viewer.set_count.call(this.viewer,t)}}),IG$.controls.pivotfilter=new IG$.pivotFilter({},null);
IG$.ctrlBrowserPanel=IG$.extend(IG$.ctrlBase,{type:"browser",initComponent:function(){this.p.push({name:"minheight",type:"property",datatype:"number"},{name:"rootpath",type:"property",datatype:"string"},{name:"visibleitems",type:"property",datatype:"string"},{name:"folder_templates",type:"property",datatype:"string"},{name:"templates",type:"property",datatype:"string"},{name:"collapsible",type:"property",datatype:"boolean"},{name:"foldercollapse",type:"property",datatype:"boolean"},{name:"name_exclude",type:"property",datatype:"string"},{name:"batchload",type:"property",datatype:"boolean"},{name:"itemclick",type:"event"}),this.superclass.prototype.initComponent.call(this)},processEvent:function(t,e){},invalidate:function(){this.cmp$&&this.cmp$.$ex.adjust()},applyApplication:function(){},initDrawing:function(){var t=this;t.cmp$=new IG$.naviTree({instance:t.instance,renderTo:t.el$,autofit:!0,header:!1,move:!1}),t.tl$.hide(),t.__pcinit(),t.superclass.prototype.initDrawing.call(t)},updateProperty:function(t,e){var a=this;switch(t){case"rootpath":a.setRootPath();break;case"minheight":a.el$.css({minHeight:e?e+"px":"initial"}),a.invalidate()}},setRootPath:function(){var t,e=this,a=e.property.rootpath,p={},n={},o=5;a&&(p.uid=a,1==e.property.batchload&&(o="helpcontent",n.typelist="Dashboard;Report",n.pid=a,n.option="search"),(t=new IG$._rpc$).init(e,{ack:o,payload:p,mbody:n},e,(function(t){var a;!t||"Folder"!=undefined.type&&"helpcontent"!=o||(a=$("<ul></ul>").appendTo(e.el$),this.addNodes(tnodes,a))}),!1),t.send())}}),IG$.controls.browser=new IG$.ctrlBrowserPanel({},null);
IG$.ctrlButton=IG$.extend(IG$.ctrlBase,{type:"button",initComponent:function(){var t=this,e=[{name:"none",value:""},{name:"Filled",value:"md-filled-button"},{name:"Outlined",value:"md-outlined-button"},{name:"Filled Tonal",value:"md-filled-tonal-button"},{name:"Text",value:"md-text-button"},{name:"Elevated",value:"md-elevated-button"}];for(var n of(t.btn_types=e,t.btn_type_names={},e))t.btn_type_names[n.value]=1;t.p.push({name:"label",type:"property",datatype:"string"},{name:"click",type:"event"},{name:"btn_type",type:"property",datatype:"string",value:"primary",enum:e}),t.superclass.prototype.initComponent.call(t)},updateProperty:function(t,e){var n=this,r=n.cmp$;if(r)switch(t){case"label":r[0].value=e;break;case"btn_type":n._render()}else n._render()},initDrawing:function(){var t=this;t.dsmode,t.property,t.ctrl.actionlist,t.ctrl.parentcontrol;t._render(),t.el$.addClass("form-outline"),t.__pcinit(),t.tl$.hide(),t.superclass.prototype.initDrawing.call(t)},_render:function(){var t=this;t._render_timer&&clearTimeout(t._render_timer),t._render_timer=setTimeout((function(){t._render_int()}),10)},_render_int:function(){var t=this,e=(t.dsmode,t.property);t.ctrl.actionlist,t.ctrl.parentcontrol;t.btn_type_names[e.btn_type]||(e.btn_type=""),e.btn_type=e.btn_type||"md-text-button",t.cmp$&&t.$btn_type==e.btn_type||(t.cmp$&&t.cmp$.remove(),t.$btn_type=e.btn_type,t.cmp$=$("<"+e.btn_type+" class='igc-md-btn' style=\"width:100%\">"+(e.label||"")+"</"+e.btn_type+">").appendTo(t.el$),t.cmp$[0].update(),t.cmp$.bind({click:function(e){t.triggerEvent("click",{ctrl:t.ctrl,ptr:t,event:"click"})}}))},invalidate:function(){}}),IG$.controls.button=new IG$.ctrlButton({},null);
IG$.ctrlCheckbox=IG$.extend(IG$.ctrlBase,{type:"checkbox",initComponent:function(){var e=this;e.p.push({name:"fieldlabel",type:"property",datatype:"string"},{name:"label_names",type:"property",datatype:"string"},{name:"value_names",type:"property",datatype:"string"},{name:"name_delimiter",type:"property",datatype:"string",value:";"},{name:"check_type",type:"property",datatype:"string",value:"checkbox",enum:[{name:"checkbox",value:"checkbox"},{name:"radio",value:"radio"}]},{name:"change",type:"event"}),e.viewer=null,e.superclass.prototype.initComponent.call(e)},initDrawing:function(){var e=this,t=$("<table class='idv-checkbuttons'><tr><td><ul></ul></td></tr></table>").appendTo(e.el$),a=$("td",t);e.el$=$("ul",a),a.bind("checkboxchanged",(function(t,a){a&&fitem._c_a1&&$("input[type='checkbox']",fitem._c_a1).is(":checked")&&!$("input[type='checkbox']",a.u2).is(":checked")&&$("input[type='checkbox']",fitem._c_a1).prop("checked",!1),e.trigger("change_val",1==fitem.updateValues)})),e.superclass.prototype.initDrawing.call(e)},invalidate:function(){},commit:function(){},updateProperty:function(e,t){var a=this;switch(e){case"text":break;case"label_names":case"value_names":case"name_delimiter":case"check_type":clearTimeout(a._vtimer),a._vtimer=setTimeout((function(){a._setData()}),20)}},getSelectionData:function(e){var t,a,c=this._dp,n=[],i="radio"==this.property.check_type;if(c)for(t=0;t<c.length&&!((a=c[t].el$)&&a.is(":checked")&&(n.push({code:a.code,text:a.text}),i));t++);return n},applyDataSet:function(e){e.data;var t={data:[]};me.loadData(t)},_setData:function(){var e,t,a,c,n,i={data:[]},p=this.property,o=i.data;for(c=p.label_names||"",a=p.value_names||"",t=p.name_delimiter||";",c=c.split(t),a=a.split(t),n=Math.max(c.length,a.length),e=0;e<n;e++)o.push({code:a[e]||c[e],text:c[e]||a[e]});this.loadData(i)},loadData:function(e){var t=this,a=t.el$,c=t.property,n="radio_"+t._get_id();a.empty(),t._dp=e,$.each(e.data,(function(e,i){if(i.code||i.text){var p=t._get_id(),o=$("<li class='form-check'><input type='"+(c.check_type||"checkbox")+"' class='form-check-input' id='"+p+"' "+("radio"==c.check_type?"name='"+n+"' ":"")+"/></li>").appendTo(a);$("<label class='form-check-label' for='"+p+"'>"+(i.text||i.code)+"</label>").appendTo(o);i.el$=$("input",o)}}))}}),IG$.controls.checkbox=new IG$.ctrlCheckbox({},null);
IG$.ctrlComboBox=IG$.extend(IG$.ctrlBase,{type:"combobox",md:0,initComponent:function(){var e=this;e.p.push({name:"fieldlabel",type:"property",datatype:"string"},{name:"labelwidth",type:"property",datatype:"number",value:80},{name:"isnecessary",type:"property",datatype:"boolean"},{name:"showSelectAll",type:"property",datatype:"boolean"},{name:"selectAllText",type:"property",datatype:"string",value:"L_ALL_VALUE"},{name:"emptyText",type:"property",datatype:"string",value:"L_SELECT_VALUE"},{name:"text",type:"property",datatype:"string"},{name:"hierarchy",type:"property",datatype:"string"},{name:"change",type:"event"}),e.combobox=null,e.items=[],e.superclass.prototype.initComponent.call(e)},initDrawing:function(){var e,t,a=this,l=window.bowser,o=a._get_id(),i=$("<div class='ig-db-combo-cnt form-outline'></div>").appendTo(a.el$),n=a.applicationItem,r=a.property;t=$("<div class='ig-db-combo-btn'></div>").appendTo(a.el$),lbl$=a.lbl$=$("<label class='form-label' for='"+o+"'>"+(a.property.fieldlabel||"")+"</label>"),i.addClass("form-outline"),a.tl$&&a.tl$.hide(),a.mp$=$("<md-outlined-text-field class='igc-md-ctrl igc-form-control' type='text'></md-outlined-text-field>").appendTo(i)[0],a.mp$.update(),(e=$(a.mp$.renderRoot.querySelector("input[type=text]"))).__c=!0,e.bind("input",(function(e){return e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1})),e.bind("keydown",(function(e){"Escape"==e.key&&(a.mp$.value="")})),e.bind("click",(function(e){$(this).select()}));e.autocomplete({minLength:0,sortResults:!1,sortable:!1,source:function(e,t){var l=e.term,o=l.split(/,\s*/),i=a.sdp;i&&(l=o.pop(),a.kdp=null,l&&i.length>190?function(e,t){var l,o,i=new IG$._rpc$,n=[],r={items:[],option:"ValueInfo"},s=fitem.model,p=s.codemapping;"prompt"==fitem.itemtype?p&&p.uid&&(n.push({uid:p.uid,type:s.type,rptid:p.uid}),r.items.push({uid:p.uid,cmap:p,hfilter:l})):(n.push({name:s.name,uid:s.uid,objtype:objtype,nodepath:s.nodepath,rptid:s.uid,sql_id:s.sql_id}),r.items.push({uid:s.uid,cmap:p,sql_id:s.sql_id,hfilter:l})),l=a.form.checkHFilter(a),t.indexOf("%")<0&&(t+="%"),(o={ftype:"condition",operator:"LIKE",fields:[n[0]],values:[{code:t,value:t}]}).fields[0].type="",l?l.push(o):l=[o],r.items[0].hfilter=l,i.init(a,{ack:"olapservice",payload:n,mbody:r,meta_type:"valueinfo"},a,(function(t){if(t.erroritems&&t.erroritems.length)$.each(t.erroritems,(function(e,t){IG$.ShowErrorMessage(t,a,null)}));else{var l,o,i=[],n=IG$.parseValueList(t.value_results)[0].data;for(l=0;l<n.length;l++)o=n[l],i.push({label:o.disp||o.code,value:o.code});a.kdp=i,e(i)}}),(function(e){})),i.send()}(t,l):t($.ui.autocomplete.filter(i,l)))},focus:function(e,t){return!1},select:function(t,o){var n=o.item;return n.value?(a.mp$.value=n.label,a._svalues=[{code:n.value,text:n.label}],i.trigger("change")):r.showSelectAll&&(a.mp$.value="",i.trigger("change")),l.msie&&e.blur(),!1},open:function(t,a){e.__c=!1},close:function(t,a){e.__c=!1,setTimeout((function(){e.__c=!0,l.msie&&e.blur()}),1200)}}),e.bind("keydown",(function(t){if(t.keyCode===$.ui.keyCode.TAB)e.__c=!0,$(this).autocomplete("widget").menu.active&&t.preventDefault();else if(t.keyCode===$.ui.keyCode.ENTER){var l,o,n,r,s=0,p=a.mp$.value.toLowerCase(),u=a.sdp,c=a.kdp;if(u&&u.length&&p){for(o=p.length,l=0;l<u.length;l++)if((r=u[l]).label.substring(0,o).toLowerCase()==p){a._svalues=[{code:r.value,text:r.label}],a.mp$.value=r.label,i.trigger("change"),s=1;break}if(!s&&c)for(l=0;l<c.length;l++)if((n=c[l]).label.substring(0,o).toLowerCase()==p){a._svalues=[{code:n.value,text:n.label}],a.mp$.value=n.label,i.trigger("change"),s=1;break}}s&&(e.autocomplete("close"),e.__c=!0)}})),$(t).bind("click",(function(t){t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e.__c?(e.__c=!1,e.autocomplete("search",""),e.focus()):(e.__c=!0,e.autocomplete("close"))})),i.bind("change",(function(){var t,l,o=!0,i="__pval"+k,r=a.mp$.value,s="",p=e.attr("placeholder"),u=a.sdp;if(u&&u.length)for(t=0;t<u.length;t++)if(l=u[t],!(p&&r==p||l.value!=r&&l.label!=r)){s={code:l.value,text:l.text||l.label}.code;break}if(a[i]==s&&(o=!1),o){if(a[i]=s,a.clearInvalid(),"CodeMap"==n.type){if(a.value=[],a.value&&a.value.length&&a.value[0].code){var c=a.value[0].code;setTimeout((function(){a.form._upd_vs_value.call(a.form,c)}),10)}return!1}a.property.isnecessary&&!s&&a.markInvalid("required"),a.trigger("change",1==a.updateValues)}})),a.superclass.prototype.initDrawing.call(a)},invalidate:function(){},commit:function(){},applyDataSet:function(e){var t,a,l=e.v.cols,o=e.v.data,i=[];this.mp$;for(t=0;t<o.length;t++)a={code:o[t][l[0].name],text:o[t][l[l.length>1?1:0].name]},i.push(a);this.loadData(i)},updateProperty:function(e,t){var a=this,l=a.property;switch(e){case"text":a.mp$.value=t;break;case"label_names":case"value_names":case"name_delimiter":clearTimeout(a._vtimer),a._vtimer=setTimeout((function(){a._setData()}),20);break;case"selectAllText":l.isnecessary||(t=t&&"L_"==t.substring(0,2)?IRm$.r1(t):t,a.mp$.placeholder=t);break;case"emptyText":(l.isnecessary||0==l.selectAllText)&&(t=t&&"L_"==t.substring(0,2)?IRm$.r1(t):t,a.mp$.placeholder=t)}},getSelectionData:function(e){var t,a,l=this,o=l.mp$,i=o.value,n=o.placeholder,r=l.sdp,s=[];if(i&&l._svalues&&l._svalues.length&&l._svalues[0].text==i)(!n||n&&i!=n)&&(s=l._svalues);else if(i&&r&&r.length)for(a=0;a<r.length;a++)if(t=r[a],!(n&&i==n||t.value!=i&&t.label!=i)){s.push({code:t.value,text:t.text||t.label});break}return s},_setData:function(){var e,t,a,l,o,i={data:[]},n=this.property,r=i.data;for(l=n.label_names||"",a=n.value_names||"",t=n.name_delimiter||";",l=l.split(t),a=a.split(t),o=Math.max(l.length,a.length),e=0;e<o;e++)r.push({code:a[e]||l[e],text:l[e]||a[e]});this.loadData(i)},loadData:function(e){var t,a,l,o,i,n=this,r=n.property,s=[],p=n.mp$,u=p.value;for(n._svalues=[],0==r.isnecessary&&r.showSelectAll&&(i=(i=r.selectAllText)&&"L_"==i.substring(0,2)?IRm$.r1(i):i,s.push({label:i,value:""})),t=0;t<e.data.length;t++)l=(a=e.data[t]).disp||a.code,u&&u==l&&(o=!0),s.push({label:l,value:a.code});o||(p.value=""),n.sdp=s,p.trigger("change")},sel:function(e){var t,a,l=this.mp$,o=l.store;if(void 0===e)t=l.value;else if(o.data.items[e])l.value=o.data.items[e].get("code");else for(a=0;a<o.data.items.length;a++)if(o.data.items[a].get("code")==e){l.value=e;break}return t}}),IG$.controls.combobox=new IG$.ctrlComboBox({},null);
IG$.ctrlDateField=IG$.extend(IG$.ctrlBase,{type:"datechooser",initComponent:function(){var e=this;e.p.push({name:"text",type:"property",datatype:"string"},{name:"fieldlabel",type:"property",datatype:"string"}),e.superclass.prototype.initComponent.call(e)},updateProperty:function(e,t){var l=this;l.cmp$;if("text"===e)if(l.datefield){var a=null;try{a=t?new Date(t):null}catch(e){a=null}l.datefield.datepicker("setDate",a)}},initDrawing:function(){var e=this,t=e._get_id();e.superclass.prototype.initDrawing.call(e),lbl$=e.lbl$=$("<label class='form-label' for='"+t+"'>"+(e.property.fieldlabel||"")+"</label>"),e.el$.addClass("form-outline"),e.tl$&&e.tl$.hide(),e.mp$=$("<md-outlined-text-field class='igc-md-ctrl igc-form-control' type='text' placeholder='"+IG$.calendar_locale.c1disp+"'></md-outlined-text-field>").appendTo(e.el$)[0],e.mp$.update(),e.datefield=$("<input type='text'></input>").css({position:"absolute",top:0,bottom:0,left:0,width:0,border:0}).appendTo(e.el$),e.mp$.addEventListener("change",(function(t){e.datefield.val()!=e.mp$.value&&e.datefield.val(e.mp$.value)})),IG$.dateUtil.createDatePicker(e,e.datefield,(function(e,t){})),$("<div class='id-db-cal-btn'></div>").appendTo(e.el$).bind("click",(function(){e.datefield.datepicker("show"),e._sync_val(e.mp$,e.datefield,0)}))},invalidate:function(){},commit:function(){this.property.text=this.getValue()},getValue:function(e){var t,l=this.datefield.datepicker("getDate");return l&&(t=l.format("Ymd"),e&&e.push({code:t,value:t})),t}}),IG$.controls.datechooser=new IG$.ctrlDateField({},null);
IG$.ctrlFieldSet=IG$.extend(IG$.ctrlBase,{type:"fieldset",iscontainer:!0,initComponent:function(){var e,t=this;t.p.push({name:"align",type:"property",datatype:"string",value:"",enum:[{name:"none",value:""},{name:"left",value:"left"},{name:"center",value:"center"},{name:"right",value:"right"}]},{name:"collapsible",type:"property",datatype:"boolean"},{name:"gap",type:"property",datatype:"number"},{name:"minHeight",type:"property",datatype:"number",value:0},{name:"flexHeight",type:"property",datatype:"number",value:0},{name:"scroll",type:"property",datatype:"string",enum:[{name:"none",value:"none"},{name:"auto",value:"auto"},{name:"show",value:"show"}]},{name:"title",type:"property",datatype:"string"}),e=["<fieldset><legend></legend></fieldset>"],t.pdiv$=$(e.join("")).appendTo(t.el$),t.lbl$=$("legend",t.pdiv$),t.superclass.prototype.initComponent.call(t)},updateProperty:function(e,t){switch(e){case"title":this.lbl$.html(t||"");break;case"gap":case"padding":case"align":break;case"minheight":this.el$.css({minHeight:t?t+"px":"initial"})}this.updateLayout()},initDrawing:function(){var e=this;e.tl$.hide(),e.superclass.prototype.initDrawing.call(e)},invalidate:function(){},updateLayout:function(){},getContainer:function(){return this.pdiv$}}),IG$.controls.fieldset=new IG$.ctrlFieldSet({},null);
IG$.ctrlFileUpload=IG$.extend(IG$.ctrlBase,{type:"fileupload",doUpload:function(){var e=this,l=e.cmp$,t=l.down("[name=mform]"),o=l.down("[name=orig_filename]"),i=l.down("[name=photo]");if(t.getForm().isValid()){t.getForm();document.charset="UTF-8";var a=i.getRawValue();a.indexOf("\\")>-1&&(a=a.substring(a.lastIndexOf("\\")+1)),o.setValue(a),t.submit({url:ig$.servlet+"/upload",waitMsg:"Uploading your data file",success:function(l,t){var o=l.errorReader.jsonData,i=o&&o.result?o.result.uid:null;e._result_uid=i}})}},initComponent:function(){var e=this;e.p.push({name:"fieldlabel",type:"property",datatype:"string"},{name:"fileuploaded",type:"event"}),e.superclass.prototype.initComponent.call(e)},initDrawing:function(){var e,l,t=this,o=t.el$,i=t._get_id();t.fileupload=e=$("<input type='file' class='form-control' id='"+i+"'></input>").appendTo(o).hide(),t.d_progress=l=$("<div class='file-progress'><div class='bar' style='width: 0%;'></div></div>").appendTo(o),lbl$=t.lbl$=$("<label class='form-label' for='"+i+"'>"+(t.property.fieldlabel||"")+"</label>"),t.el$.addClass("form-outline"),t.tl$&&t.tl$.hide(),t.mp$=$("<md-outlined-text-field class='igc-md-ctrl igc-form-control' type='text' readonly='true' prefix-text='FILE'><md-icon slot='leading-icon'>upload_file</md-icon>"+(t.property.fieldlabel||"")+"</md-outlined-text-field>").appendTo(t.el$)[0],t.mp$.update(),$(t.mp$).click((function(e){e.preventDefault(),e.stopImmediatePropagation(),t.fileupload.trigger("click")})),t.fileupload.change((function(e){t.mp$.value=t.fileupload.val()})),e.fileupload({url:ig$.servlet+"/upload",dataType:"json",formData:{_mts_:IG$._g$a||""},done:function(e,l){t.__uploading=!1;var o,i,a,r=l.result||{errorcode:"0xffff",errormsg:"Server incorrect responding"},n=[];if(r.errorcode)IG$.ShowErrorMessage(r,t,null);else if(r.result){for(o=r.result.length?r.result:[r.result],i=0;i<o.length;i++)a=o[i],n.push(a);t.btn_upload[0].selected=!0}n&&n.length},progressall:function(e,t){var o=parseInt(t.loaded/t.total*100,10),i=$(".bar",l);i.css("width",o+"%"),i.text("Loaded "+t.loaded+" / "+t.total)}}).bind("fileuploadsubmit",(function(e,l){})),t.superclass.prototype.initDrawing.call(t)},invalidate:function(){},commit:function(){},getValue:function(e){return null}}),IG$.controls.fileupload=new IG$.ctrlFileUpload({},null);
IG$.ctrlDashboardPanel=IG$.extend(IG$.ctrlBase,{type:"dashboard",initComponent:function(){var e=this;e._viewerRendered=!1,e.p.push(),e.superclass.prototype.initComponent.call(e)},processEvent:function(e,n){},invalidate:function(){var e=this.viewer;e&&e.$ex.adjust()},initDrawing:function(){var e=this;e.viewer||(e.viewer=new IG$.DashboardView({instance:e.instance,uid:null,autofit:!0,header:!1,move:!1,renderTo:e.el$,floatable:!1,closeAction:"destroy",title:0,uid:e.uid,collapsible:!1,header:!1,dsmode:1,border:0,sm:0}),e.viewer.on("afterrender",(function(n){e._viewerRendered=!0}))),e.tl$.hide(),e.__pcinit()},updateProperty:function(e,n){},updateLayout:function(){},destroy:function(){var e=this;e.viewer&&e.viewer.close&&e.viewer.close()}}),IG$.controls.dashboard=new IG$.ctrlDashboardPanel({},null);
IG$.ctrlLabel=IG$.extend(IG$.ctrlBase,{type:"label",initComponent:function(){var e=this;e.p.push({name:"color",type:"property",datatype:"string"},{name:"fieldlabel",type:"property",datatype:"string"},{name:"fontbold",type:"property",datatype:"boolean"},{name:"fontsize",type:"property",datatype:"number",value:12},{name:"text",type:"property",datatype:"string"}),e.tl$.hide(),e.superclass.prototype.initComponent.call(e)},updateProperty:function(e,t){var a=this,l=a.cmp$;switch(e){case"text":l&&l.html(t);break;case"fontsize":t&&a.el$.css({fontSize:t+"px"});break;case"fontbold":"true"==t?a.el$.css({fontWeight:"bold"}):"false"==t&&a.el$.css({fontWeight:"normal"});break;case"color":t&&a.el$.css({color:t})}},initDrawing:function(){var e=this;e.cmp$=$("<div class='igc-ds-label'></div>").appendTo(e.el$),e.superclass.prototype.initDrawing.call(e)}}),IG$.controls.label=new IG$.ctrlLabel({},null);
IG$.ctrlMonthField=IG$.extend(IG$.ctrlBase,{type:"monthchooser",initComponent:function(){var e=this;e.p.push({name:"text",type:"property",datatype:"string"},{name:"fieldlabel",type:"property",datatype:"string"}),e.superclass.prototype.initComponent.call(e)},initDrawing:function(){var e=this,t=e._get_id();new Date;e.superclass.prototype.initDrawing.call(e),e.el$.addClass("form-outline"),e.tl$&&e.tl$.hide(),lbl$=e.lbl$=$("<label class='form-label' for='"+t+"'>"+(e.property.fieldlabel||"")+"</label>"),e.mp$=$("<md-outlined-text-field class='igc-md-ctrl igc-form-control' type='text'>"+(e.property.fieldlabel||"")+"<md-icon slot='trailing-icon'>calendar_month</md-icon></md-outlined-text-field>").appendTo(e.el$)[0],e.mp$.update(),e.datefield=$("<input type='text'></input>").css({position:"absolute",top:0,bottom:0,left:0,width:0,border:0}).appendTo(e.el$).monthpicker({buttonImage:"./images/calendar.gif",buttonImageOnly:!0,pattern:"yyyy-mm",onSelect:function(t,l){e.mp$.value=e.datefield.val()}}),e.mp$.addEventListener("click",(function(t){e.datefield.monthpicker("show"),e._sync_val(e.mp$,e.datefield,0)})),e.mp$.addEventListener("change",(function(t){e.datefield.val()!=e.mp$.value&&e.datefield.val(e.mp$.value)}))},invalidate:function(){},getValue:function(e){var t=this.datefield.getValue();if(t){var l=t.format("Ymd");e.push({code:l,value:l})}}}),IG$.controls.monthchooser=new IG$.ctrlMonthField({},null);
IG$.ctrlPicture=IG$.extend(IG$.ctrlBase,{type:"picture",initComponent:function(){var e=this;e.image=null,e.p.push({name:"imagepath",type:"property",datatype:"string",enum:"resources"},{name:"flexHeight",type:"property",datatype:"number",value:0},{name:"minHeight",type:"property",datatype:"number",value:0}),e.superclass.prototype.initComponent.call(e)},initDrawing:function(){var e=this;e.image=$("<img/>"),e.image.appendTo(e.el$),e.superclass.prototype.initDrawing.call(e)},updateProperty:function(e,t){var i=this;if("imagepath"===e)t?(i.image.show(),i.image.attr("src",ig$.servlet+"/resource?sreq=resource&_rcs_="+t+"&_mts_="+IG$._g$a)):i.image.hide()},invalidate:function(){var e=this,t=IG$.j$ext._w(e.html),i=IG$.j$ext._h(e.html);e.image&&e.image.css({width:t+"px",height:i+"px"})}}),IG$.controls.image=new IG$.ctrlPicture({},null);
IG$.ctrlPivotReport=IG$.extend(IG$.ctrlBase,{type:"olapreport",initComponent:function(){var e=this;e.canvas=null,e.viewer=null,e.options=null,e.loading=null,e.zoom=!1,e.sheetindex=0,e.hidetoolbar=!1,e.hidestatusbar=!1,e.p.push({name:"draw",type:"property",datatype:"string"},{name:"flexHeight",type:"property",datatype:"number",value:0},{name:"minHeight",type:"property",datatype:"number",value:0},{name:"hidetoolbar",type:"property",datatype:"boolean",vmode:1,value:!0},{name:"hidestatusbar",type:"property",datatype:"boolean",vmode:1,value:!0},{name:"execute_completed",type:"event"}),e.superclass.prototype.initComponent.call(e)},onClickMagHandler:function(e){var t=e.data.sender;t.processEvent("magnifire",t)},initDrawing:function(){var e=this;e.viewer||(e.viewer=new IG$.ReportView({instance:e.instance,renderTo:e.el$,autofit:!0,move:!1,uid:e.uid,header:!1,$init_block_run:!0,collapsible:!1,floatable:!1,vmode:1,title:0,closeAction:"destroy",$openmode:"dashboard"}),e.viewer.on("_lc0",(function(){e._viewer_loaded=!0,e._process_nego()})),e.viewer.on("afterrender",(function(t){e.updateProperty("hidetoolbar"),e.updateProperty("hidestatusbar")}),e)),e.tl$.hide(),e.__pcinit()},clear:function(){var e=this.viewer;e&&e.clearResult()},updateProperty:function(e){var t=this.viewer,r=this.property[e];if(t)switch(e){case"hidetoolbar":t.hiddentoolbar=r,t&&t._tbar&&t._tbar.setVisible(!r);break;case"hidestatusbar":t.hiddenstatusbar=r,t&&t.down("[name=_1]")&&t.down("[name=_1]").setVisible(!r)}},invalidate:function(){var e=this.viewer,t=e.dzone;e&&e.$ex.adjust(),t&&t.updateDisplay(!0)},getSelectionData:function(e){return null},eRun:function(e,t){var r=this,i=r.viewer;r.ctrl.parentcontrol;i.execallback=new IG$.callBackObj(r,(function(t,r){var n=this;1!=r&&n.ctrl.actionlist&&n.triggerEvent("execute_completed",{ctrl:n.ctrl,ptr:n,event:"execute_completed"}),i.execallback=null,e&&e.execute(r)})),i.uid!=r.uid&&(i.uid=r.uid,i.__loaded=!1,i.init_f(!0)),i._dboardCallback=null,i.__loaded?(i.$init_block_run=!1,i.toolbarHandler("cmd_run",null,null,t)):i._dboardCallback=new IG$.callBackObj(r,(function(){i.toolbarHandler("cmd_run",null,null,t)}))},parseFilter:function(e,t){if(e){var r,i=IG$.XGetChildNodes(e,"FilterGroup");if(i&&i.length>0)for(r=0;r<i.length;r++){var n=new IG$.clFilterGroup;n.name=IG$.XGetAttr(i[r],"name"),t.subGroups.push(n),this.parseSubFilter(i[r],n)}}},parseSubFilter:function(e,t){var r,i;if((i=IG$.XGetChildNodes(e))&&i.length>0)for(r=0;r<i.length;r++){var n;if("FilterGroup"==IG$.XGetNodeName(i[r]))(n=new IG$.clFilterGroup).name=IG$.XGetAttr(i[r],"name"),this.parseSubFilter(i[r],n),t.subGroups.push(n);else t.subConditions.push(new IG$.clFilter(i[r]))}},runReport:function(e){this.viewer.$init_block_run=!1,this.viewer.rs_loadContent(e)},applyApplication:function(){var e=this;e.applicationItem&&(e.uid=e.applicationItem.uid,!e.dsmode&&e.viewer&&(e.viewer.uid=e.uid,e.viewer.init_f(!0)))},negoFilter:function(e,t,r){var i=this;i._filter_nego=i._filter_nego||[],i._filter_nego.push({filterctrl:e,docid:t,callback:r}),i._process_nego()},_process_nego:function(){var e=this,t=e._viewer_loaded,r=e._filter_nego;if(t&&r&&r.length)for(;r.length;){var i,n=r.shift(),o=n.filterctrl,a=n.docid;o.viewer;(i=e.viewer.dzone?e.viewer.dzone.getBox(a):null)&&(o.viewer=i.viewer,i.hidden=!0,n.callback.execute({ubody:i,report:e,reportctrl:e.viewer}))}},destroy:function(){var e=this;e.viewer&&e.viewer.close&&e.viewer.close()}}),IG$.controls.olapreport=new IG$.ctrlPivotReport({},null);
IG$.ctrlPromptFilter=IG$.extend(IG$.ctrlBase,{type:"filter",initComponent:function(){var e=this;e.activeIndex=0,e.p.push({name:"flexHeight",type:"property",datatype:"number",value:0},{name:"minHeight",type:"property",datatype:"number",value:0},{name:"request_run",type:"event"}),e.superclass.prototype.initComponent.call(e)},processEvent:function(e,t){},invalidate:function(){},initDrawing:function(){var e,t=this,n=$("<div></div>").appendTo(t.html);t.viewer||(t.sop=new IG$.sheetfiltercomp(t.layout._xparam),t.sop.objtype="FILTER",t.viewer=new IG$.dynFilterView(t.instance,n,t.sop,null,1),t.viewer.callback=new IG$.callBackObj(t,(function(){t.html.trigger("e_request_run")}))),t.dsmode&&(e=$("<div class='igc-p-config'><div class='igc-p-config-bg'></div><button>Config</button></div>").appendTo(t.html),$("button",e).bind("click",(function(){t.configSheet()}))),t.tl$.hide(),t.__pcinit()},configSheet:function(){var e=this,t=new IG$.sheetobj({instance:e.instance,sheetoption:e.viewer.sheetoption,reportoption:null,createMode:1,callback:new IG$.callBackObj(e,(function(t,n){var i=e.sop.getXML();e.layout._xparam=IG$.loadXML(i),e.viewer.validateItems()}),e.viewer)});IG$.checkLogin(this,t)},updateProperty:function(e,t){this.dsmode},updateLayout:function(){this.ctrl.dashboard},getSelectionData:function(e){var t,n,i,o,a=this.viewer,r=[];if(e&&e.name&&a&&(t=a.sheetoption.model.filter_items)&&t.length){for(n=0;n<t.length;n++)if(t[n].name==e.name){o=t[n];break}if(o&&a.checkFilterValuesItem(o,[],!0))for(i=0;i<o.value.length;i++)r.push(o.value[i])}return r}}),IG$.controls.promptfilter=new IG$.ctrlPromptFilter({},null);
IG$.ctrlTabPanel=IG$.extend(IG$.ctrlBase,{type:"tabpanel",iscontainer:!0,initComponent:function(){var t=this;t.activeIndex=0,t.p.push({name:"flexHeight",type:"property",datatype:"number",value:0},{name:"minHeight",type:"property",datatype:"number",value:0}),t.superclass.prototype.initComponent.call(t)},processEvent:function(t,e){},invalidate:function(){},initDrawing:function(){var t=this,e=(IG$.j$ext._w(t.html),IG$.j$ext._h(t.html),t.ctrl.actionlist,t.el$),a=$("<ul class='ig-db-tab-btnarea'></ul>").appendTo(e),n=$("<div class='ig-db-tabarea'></div>").appendTo(e);t.tl$.hide(),t.tabbuttons=a,t.mainarea=n,t.__pcinit()},updateProperty:function(t,e){this.dsmode},updateLayout:function(){this.ctrl.dashboard},loadHeader:function(t){var e=this,a=e.tabbuttons;e.tabitems=t,a.empty(),$.each(t,(function(t,n){var i=$("<li><span>"+(n.title||"Tab "+(t+1))+"</li>").appendTo(a);e.activeIndex==t&&i.addClass("active"),n.__tab_btn=i,i.bind("click",(function(){e.setActiveItem(t)}))}))},getTabHeight:function(){return this.tabbuttons?this.tabbuttons.height():0},setActiveItem:function(t){var e,a=this;if(a.tabitems&&a.tabitems.length>t&&t>-1&&(a.activeIndex=t),a.activeIndex>-1&&a.tabitems)for(e=0;e<a.tabitems.length;e++)t==e?a.tabitems[e].__tab_btn.addClass("active"):a.tabitems[e].__tab_btn.removeClass("active"),a.tabitems[e].controls.html[t==e?"show":"hide"]()}}),IG$.controls.tabpanel=new IG$.ctrlTabPanel({},null);
IG$.ctrlTextArea=IG$.extend(IG$.ctrlBase,{type:"textarea",initComponent:function(){var t=this;t.p.push({name:"fieldlabel",type:"property",datatype:"string"},{name:"flexHeight",type:"property",datatype:"number",value:0},{name:"minHeight",type:"property",datatype:"number",value:0},{name:"htmltext",type:"property",datatype:"string"},{name:"text",type:"property",datatype:"string"}),t.superclass.prototype.initComponent.call(t)},updateProperty:function(t,e){this.cmp$;switch(t){case"htmltext":case"text":this.mp$.value=e}},initDrawing:function(){var t=this;t.ctrl.actionlist,t.property,t.ctrl.owner,t._get_id();t.el$.addClass("form-outline"),t.tl$&&t.tl$.hide(),t.mp$=$("<md-outlined-text-field type='textarea' class='igc-md-ctrl igc-form-control' style='height: 100%' rows='0'></md-outlined-text-field>").appendTo(t.el$)[0],t.mp$.update(),t.mp$.renderRoot.querySelector("textarea").style.height="100%",t.superclass.prototype.initDrawing.call(t)},invalidate:function(){},commit:function(){this.property.text=this.mp$.value}}),IG$.controls.textarea=new IG$.ctrlTextArea({},null);
IG$.ctrlTextInput=IG$.extend(IG$.ctrlBase,{type:"textbox",initComponent:function(){var e=this,t=(e.dsmode,IG$._txtinpMaskOptEnum),a=IG$._txtinpMaskOpt;t||(t=IG$._txtinpMaskOptEnum=[],$.each(a,(function(e,a){t.push({name:e,value:e})}))),e.p.push({name:"disabled",type:"property",datatype:"boolean",value:!1},{name:"fieldlabel",type:"property",datatype:"string"},{name:"inputtype",type:"property",datatype:"string",value:"text",enum:[{name:"text",value:"text"},{name:"password",value:"password"},{name:"number",value:"number"},{name:"email",value:"email"},{name:"tel",value:"tel"},{name:"url",value:"url"}]},{name:"maxlength",type:"property",datatype:"number",value:0},{name:"mask",type:"property",datatype:"string",enum:t},{name:"placeholder",type:"property",datatype:"string"},{name:"readOnly",type:"property",datatype:"boolean",value:!1},{name:"show_counter",type:"property",datatype:"boolean",value:0},{name:"text",type:"property",datatype:"string"},{name:"prefix",type:"property",datatype:"string"},{name:"suffix",type:"property",datatype:"string"},{name:"enterkey",type:"event"}),e.superclass.prototype.initComponent.call(e)},updateProperty:function(e,t){var a=this.mp$;switch(e){case"text":a.value=t;break;case"labelwidth":this.tl$.width(t);break;case"labelposition":case"show_counter":case"labelalign":break;case"inputtype":a.type=t;break;case"maxlength":a.maxLength=t||-1;break;case"mask":var n=IG$._txtinpMaskOpt[t];if(n){n.option;a.pattern=n.mask}else a.pattern="";break;case"placeholder":t=t&&"L_"==t.substring(0,2)?IRm$.r1(t):t,a.placeholder=t;break;case"disabled":a.disabled=t;break;case"readOnly":a.readOnly=t;break;case"prefix":a.prefixText=t||"";break;case"suffix":a.suffixText=t||""}},initDrawing:function(){var e=this,t=e.ctrl.actionlist,a=e.property,n=e.ctrl.owner,r=e._get_id();e.lbl$=$("<label class='form-label' for='"+r+"'>"+(e.property.fieldlabel||"")+"</label>"),e.el$.addClass("form-outline"),e.tl$&&e.tl$.hide(),e.mp$=$("<md-outlined-text-field class='igc-md-ctrl igc-form-control' type='text'></md-outlined-text-field>").appendTo(e.el$)[0],e.mp$.update(),(e.cmp$=$(e.mp$.renderRoot.querySelector("input"))).bind({focus:function(e){var t=this;setTimeout((function(){t.select()}),10)},keyup:function(a){13==a.keyCode&&t.enterkey&&e.triggerEvent("enterkey",{ctrl:e.ctrl,ptr:e,event:"enterkey"})}}),e.btn=$("<button class='ig-db-button'>..</button>").hide().appendTo(e.el$),e.applicationItem&&e.btn.show(),e.btn.bind({click:function(t){if(t.stopPropagation(),t.preventDefault(),hfilter=n.checkHFilter(e),0!=hfilter){var r=new IG$.dynFilter({instance:e.instance,selModel:{mode:"SINGLE",selType:"checkboxmodel",checkSelector:".x-grid-cell"},smode:a.selectionMode,callback:new IG$.callBackObj(e,(function(e){var t,n,r,l=this,p="";if(n=[],l.clearInvalid(),e&&e.length)for(t=0;t<e.length;t++)e.items?(r=e.items[t],n.push({code:r.get("code"),value:r.get("disp")})):(r=e[t],n.push({code:r.code,value:r.value}));n.length?(l.selection=n,p=(n[0].value||n[0].code)+(n.length>1?"("+(n.length-1)+" more)":"")):l.selection=null,a.isnecessary&&(!n||n&&!n.length)&&l.markInvalid("required"),l.mp$.value=p,l.trigger("enterkey")})),reqItem:e.applicationItem,reqView:e,hfilter:hfilter});IG$.checkLogin(n,r)}}}),e.superclass.prototype.initDrawing.call(e)},commit:function(){this.property.text=this.mp$.value},invalidate:function(){},getSelectionData:function(e){var t=this,a=t.mp$.value||"",n=t.property,r=IG$._txtinpMaskOpt,l=n.mask;return l&&r[l]&&r[l].formatter&&(a=r[l].formatter.apply(t,[a])),t.selection||(a?[{code:a,value:a}]:null)}}),IG$._txtinpMaskOpt={date:{name:"date",mask:"0000-00-00"},time:{name:"time",mask:"00:00:00"},date_time:{name:"date_time",mask:"0000-00-00 00:00:00"},phone:{name:"phone",mask:"(00)0000-0000",formatter:function(e){return e&&(e=(e=(e=e.replace("(","")).replace(")","")).replace("-","")),e}},phone_us:{name:"phone_us",mask:"(000)0000-0000",formatter:function(e){return e&&(e=(e=(e=e.replace("(","")).replace(")","")).replace("-","")),e}},money:{name:"money",mask:"#,##0",option:{reverse:!0},formatter:function(e){return e&&(e=e.split(",").join("")),e}},ip_address:{name:"ip addrese",mask:"0ZZ.0ZZ.0ZZ.0ZZ",option:{translation:{Z:{pattern:/[0-9]/,optional:!0}}}},percent:{name:"percent",mask:"##0.00%",option:{reverse:!0},formatter:function(e){return e&&(e=(e=e.replace("%","")).split(",").join("")),e}},ssn:{name:"ssn",mask:"000r00r0000",option:{translation:{r:{pattern:/[-]/,fallback:"-"},placeholder:"___-__-____"}}},ssn2:{name:"ssn2",mask:"000-00-0000",option:{placeholder:"__-__-____"}}},IG$.controls.textbox=new IG$.ctrlTextInput({},null);
IG$.ctrlTitleLabel=IG$.extend(IG$.ctrlBase,{type:"titlelabel",initComponent:function(){var t=this;t.p.push({name:"color",type:"property",datatype:"string"},{name:"fontbold",type:"property",datatype:"boolean"},{name:"fontsize",type:"property",datatype:"number"},{name:"text",type:"property",datatype:"string"}),t.tl$.hide(),t.superclass.prototype.initComponent.call(t)},updateProperty:function(t,e){var l=this,a=l.cmp$;switch(t){case"text":a&&a.html(e);break;case"fontsize":e&&l.el$.css({fontSize:e+"px"});break;case"fontbold":"true"==e?l.el$.css({fontWeight:"bold"}):"false"==e&&l.el$.css({fontWeight:"normal"});break;case"color":e&&l.el$.css({color:e})}},initDrawing:function(){var t=this;t.cmp$=$("<div class='igc-ds-label'></div>").appendTo(t.el$),t.superclass.prototype.initDrawing.call(t),t.html.addClass("ig_title_label")}}),IG$.controls.titlelabel=new IG$.ctrlTitleLabel({},null);
IG$.ctrlPanel=IG$.extend(IG$.ctrlBase,{type:"panel",iscontainer:!0,initComponent:function(){var e=this;e.titleheight=0,e.p.push({name:"title",type:"property",datatype:"string"},{name:"minheight",type:"property",datatype:"number"},{name:"gap",type:"property",datatype:"number"},{name:"flexHeight",type:"property",datatype:"number",value:0},{name:"minHeight",type:"property",datatype:"number",value:0},{name:"align",type:"property",datatype:"string",value:"",enum:[{name:"none",value:""},{name:"left",value:"left"},{name:"center",value:"center"},{name:"right",value:"right"}]},{name:"collapsible",type:"property",datatype:"boolean"},{name:"scroll",type:"property",datatype:"string",enum:[{name:"none",value:"none"},{name:"auto",value:"auto"},{name:"show",value:"show"}]}),e.superclass.prototype.initComponent.call(e)},updateProperty:function(e,t){var a=this;switch(e){case"title":a.p_html_t[t?"show":"hide"](),a.p_html_title.html(t||"");break;case"layout":case"gap":case"padding":case"align":1;break;case"minheight":a.el$.css({minHeight:t?t+"px":"initial"})}this.updateLayout()},initDrawing:function(){var e,t=this;e=['<div class="ig-ds-panel">','<div class="ig-ds-title"><span id="ig-ds-title-text"></span></div>','<div class="ig-ds-body">',"</div>","</div>"],t.pdiv$=$(e.join("")).appendTo(t.el$),t.p_html_t=$(".ig-ds-title",t.pdiv$),t.p_html_title=$("#ig-ds-title-text",t.pdiv$),t.p_region=$(".ig-ds-body",t.pdiv$),t.tl$.hide(),t.superclass.prototype.initDrawing.call(t)},invalidate:function(){},updateLayout:function(){},getContainer:function(){return this.p_region}}),IG$.controls.panel=new IG$.ctrlPanel({},null);
IG$.ctrlScheduler=IG$.extend(IG$.ctrlBase,{type:"scheduler",initComponent:function(){var e=this;e.dsmode;e.p.push({name:"disabled",type:"property",datatype:"boolean",value:!1}),e.superclass.prototype.initComponent.call(e)},updateProperty:function(e,t){this.cmp$},initDrawing:function(){var e,t=this,i=(t.ctrl.actionlist,t.property,t.ctrl.owner,t.el$);t._get_id();if(t.tl$.hide(),!window.FullCalendar){return IG$.ctrlScheduler._loading=1,void IG$.getScriptCache(["./js/scheduler/index.global.min.js"],new IG$.callBackObj(this,(function(){IG$.ctrlScheduler._loaded=1,t.initDrawing()})))}i.empty(),e=$("<div></div>").appendTo(i),$cal=t.$cal=new FullCalendar.Calendar(e[0],{initialView:"dayGridMonth",headerToolbar:{center:"dayGridMonth,timeGridWeek"},views:{dayGridMonth:{titleFormat:{year:"numeric",month:"2-digit",day:"2-digit"}}},dataClick:function(e){}}),$cal.render(),t.superclass.prototype.initDrawing.call(t)},commit:function(){},invalidate:function(){},getSelectionData:function(e){return null}}),IG$.controls.scheduler=new IG$.ctrlScheduler({},null);
IG$.rfBlankPanel=function(n,t,e){var i=this;i.instance=n,i.container=t,i.sheetoption=e,i.updateValues=!0,i.$init()},IG$.rfBlankPanel.prototype={$init:function(){var n=this;n.contentarea=$("<div></div>").appendTo(n.container),n.owner&&n.owner.box&&n.owner.box.bind("updatecomplete",(function(){n.validateItems()}))},removeObj:function(){},validateItems:function(){var n=this,t=n.owner,e=t&&t.docitems&&n.sheetoption?t.docitems[n.sheetoption.docid]:null;e&&e.children&&$.each(e.children,(function(n,e){if(e.docid){t.bodylist[e.docid];0}}))},setSize:function(n,t){var e=this.contentarea;IG$.j$ext._w(e,n),IG$.j$ext._h(e,t)},updateFilterContent:function(n){}};
IG$.sheetfiltercomp=function(e){var o=this;e=o.model=e||{},o.docid=e.docid,$s.defaults(e,{objtype:e.objtype||"PANEL",layoutinfo:{},filter_items:[],filter_options:{},edrill:!0}),$s.defaults(e.filter_options,{showbutton:!0,buttonname:"{L_BTN_SEARCH}",f_bx_name:"{L_D_EXCEL}",f_t_dir:"left",viewtype:"row",brow:0,columnsize:1,rowsize:1,f_b_desc:null,f_b_scr:null,showrefresh:!0}),o.tab_option={},"1.0"!=e.version&&(e.version,"FILTER"==e.objtype&&$.each(e.filter_items,(function(e,o){o.colspan=2*(o.colspan||1)}))),e.version="1.0"},IG$.sheetfiltercomp.prototype={};
IG$.rfNavi=function(e,t,o,n,r){var i=this;i.instance=e,i.container=t,i.sheetoption=o,i.reportoption=n,i.rpt=r,i.updateValues=!0,i.$init()},IG$.rfNavi.prototype={$init:function(){var e,t=this,o={};t.reportoption;t.contentarea=$("<div></div>").appendTo(t.container),this.browser=e=new IG$.naviTree({instance:t.instance,renderTo:t.contentarea[0],showtoolbar:!1,cubebrowse:!0,showcheckselect:!1,collapsible:!1,floatable:!1,floating:!1,flex:5,layout:"fit",enabledrag:!0,checkStateChanged:t.checkStateChangedHandler}),o.type="rolap"==t.reportoption.reportmode?"Cube":"Metric",o.name=o.type,o.nodepath=o.type,o.uid=t.reportoption.cubeuid||null,o.leaf=!1,e.store.setRootNode(o)},removeObj:function(){this.browser=null},validateItems:function(){},setSize:function(e,t){var o=this,n=o.contentarea;IG$.j$ext._w(n,e),IG$.j$ext._h(n,t),o.browser.setWidth(e),o.browser.setHeight(t)},updateFilterContent:function(e){}};
IG$.rfReportViewer=function(e,t,i,r){var a=this;a.instance=e,a.container=t,a.sheetoption=i,a.owner=r,a.updateValues=!0,a.active=null,a.validated=!1,a.validateFilter=!0,a.f_run=!0,a.$init()},IG$.rfReportViewer.prototype={$init:function(){this.contentarea=$("<div class='igc-rpt-view'></div>").appendTo(this.container)},executeItem:function(){var e=this;(e.validateFilter||e.f_run)&&(e.f_run=!1,clearTimeout(e._validateCall),e._validateCall=setTimeout((function(){e.executeValidate()}),50))},executeValidate:function(){var e,t,i,r=this;if(r.irpt){var a=[];for(e=0;e<r.irpt.sheets.length;e++){var n;if(i=(t=r.irpt.sheets[e]).sheetoption,r._directFilter)for(fname in auxfilter=i.model.aux_filter,r._directFilter)auxfilter[fname]=r._directFilter[fname];t.olapset?(pivotxml=t.olapset.reportoption.getCurrentPivot(),n=t.olapset.requestUpdateReport(pivotxml,"mode",e,t)):i&&(n=t.procRunReport()),n&&n.payload&&a.push({view:t,req:n})}r.irpt._exec_rpt(a)}else r.validateItems();r._directFilter=null,r.validateFilter=!1},removeObj:function(){},validateItems:function(e,t){var i=this,r=i.sheetoption.model,a=!t&&(i.btabrun||e);if(r&&r.docid&&r.rptoption&&r.rptoption.uid){if(i.irpt)i.container.trigger("i_ready");else{i.validated=!0;var n=i.contentarea,o=i.owner.dockdiv?$("<div class='report_container'></div>").appendTo(n):null,d=i.owner.dockdiv?$("<div style='display:none;'></div>").appendTo(o):[];1!=i.__dx&&(i.irpt=new IG$.ReportView({instance:i.instance,uid:r.rptoption.uid,header:!1,hiddenstatusbar:!0,hiddentoolbar:!0,border:0,vmode:1,frameHeader:!1,cmode:1,dockdiv_container:o,cvmode:i.cvmode,auxfilter:i._directFilter,width:i._cw,height:i._ch,renderTo:d[0]||i.contentarea[0],_par:i.owner}),(a||t)&&i.irpt.on("_lc0",(function(){i.irpt.un("_lc0"),t&&i.container.trigger("i_ready"),a&&(i.validateFilter=!0,i.executeItem())})),i._directFilter=null,i.validateFilter=!1)}i.irpt&&(i.irpt.uid!=r.rptoption.uid?(i.irpt.uid=r.rptoption.uid,i.irpt.init_f()):!t&&i.irpt.__loaded&&i.irpt.init_f(),i.validateFilter=!1)}},setSize:function(e,t,i){var r=this,a=r.contentarea;r.pw=r.pw||0,r.ph=r.ph||0,r._cw=e,r._ch=t,r.irpt&&r.irpt.dzone&&(i||Math.abs(r.pw-e)>5||Math.abs(r.ph-t)>5)&&(r.pw=e,r.ph=t,IG$.j$ext._w(a,e),IG$.j$ext._h(a,t),r.irpt&&(r.irpt.setSize(e,t),i&&!r.irpt.dzone.sizeapplied&&r.irpt.dzone.updateDisplay(!0)))},updateFilterContent:function(e){}};
IG$.rfFBViewer=function(e,i,t,r,a){var n=this;n.instance=e,n.container=i,n.sheetoption=t,n.owner=r,n.reportoption=a.reportoption,n.updateValues=!0,n.active=null,n.validated=!1,n.validateFilter=!0,n.f_run=!0,n.$init()},IG$.rfFBViewer.prototype={$init:function(){this.contentarea=$("<div class='igc-rpt-view'></div>").appendTo(this.container)},executeItem:function(){var e=this;(e.validateFilter||e.f_run)&&(e.f_run=!1,clearTimeout(e._validateCall),e._validateCall=setTimeout((function(){e.executeValidate()}),50))},executeValidate:function(){var e=this;e.fbviewer||e.validateItems(),e._directFilter=null,e.validateFilter=!1},removeObj:function(){},validateItems:function(e,i){var t=this,r=t.sheetoption.model,a=!i&&(t.btabrun||e);if(r&&r.docid&&(r.formbuilder=r.formbuilder||{},r.formbuilder.item&&r.formbuilder.item.uid)){if(t.fbviewer)t.container.trigger("i_ready");else{t.validated=!0;t.contentarea;1!=t.__dx&&(t.fbviewer=new IG$.formViewer({instance:t.instance,uid:r.formbuilder.item.uid,header:!1,hiddenstatusbar:!0,hiddentoolbar:!0,border:0,vmode:1,frameHeader:!1,cmode:1,cvmode:t.cvmode,width:t._cw,height:t._ch,renderTo:t.contentarea[0],sheetobj:t,reportoption:t.reportoption,sheetoption:t.sheetoption}),(a||i)&&t.fbviewer.on("_lc0",(function(){t.fbviewer.un("_lc0"),i&&t.container.trigger("i_ready"),a&&(t.validateFilter=!0,t.executeItem())})),t._directFilter=null,t.validateFilter=!1)}t.fbviewer&&(t.fbviewer.uid!=r.formbuilder.item.uid?(t.fbviewer.uid=r.formbuilder.item.uid,t.fbviewer.init_f()):!i&&t.fbviewer.__loaded&&t.fbviewer.init_f(),t.validateFilter=!1)}},setSize:function(e,i,t){var r=this,a=r.contentarea;r.pw=r.pw||0,r.ph=r.ph||0,r._cw=e,r._ch=i,r.fbviewer&&(t||Math.abs(r.pw-e)>5||Math.abs(r.ph-i)>5)&&(r.pw=e,r.ph=i,IG$.j$ext._w(a,e),IG$.j$ext._h(a,i),r.fbviewer&&r.fbviewer.setSize(e,i))},updateFilterContent:function(e){}};
IG$.rfTabPanel=function(e,t,i,o){var n=this;n.instance=e,n.container=t,n.sheetoption=i,n.owner=o,n.owner&&n.owner.box&&n.owner.box.bind("updatecomplete",(function(){n.validateItems()})),n.updateValues=!0,n.active=null,n.$init()},IG$.rfTabPanel.prototype={$init:function(){var e=this;e.owner,e.owner&&e.owner.ctrls;e.buttons=[],e.contentarea=$("<div></div>").appendTo(e.container),e.tabarea=$("<div class='idv-dtab-area'></div>").appendTo(e.contentarea).hide(),e.tabul=e.tabarea,e.validateItems()},removeObj:function(){},tabHeight:function(){return this.tabarea.outerHeight()-3},validateItems:function(){var e,t,i=this,o=i.owner,n=o&&o.docitems&&i.sheetoption?o.docitems[i.sheetoption.docid]:null,a=0,c=!1,d=!i.sheetoption||!i.sheetoption.tab_option||"F"!=i.sheetoption.tab_option.showtab;if(i.tabarea[d||i.editmode?"show":"hide"](),i.tabul.empty(),i.buttons=[],n&&n.children&&n.children.length>0){if(t=n.active,n.active){for(e=0;e<n.children.length;e++)if(n.children[e].docid==n.active){c=!0;break}n.active=0==c?null:n.active}$.each(n.children,(function(e,t){if(t.docid){var c=o.bodylist[t.docid],d=$("<div class='ig-dtab-item'><span class='ig-tab-tt'>"+(c.title||"Tab "+e)+"</span></div>").appendTo(i.tabul);(n.active&&n.active==t.docid||!n.active&&0==a)&&(d.addClass("selected"),n.active=t.docid),d.docid=t.docid,d.bind("click",(function(){i.setActiveDoc(t.docid)})),i.buttons.push(d),a++}})),t!=n.active&&n.active&&i.setActiveDoc(n.active,!0)}},setActiveDoc:function(e,t){var i,o,n,a=this,c=a.buttons,d=a.owner,s=d&&d.docitems&&a.sheetoption?d.docitems[a.sheetoption.docid]:null;a.sheetoption.docid;for(o=0;o<c.length;o++)(i=c[o]).docid==e?i.addClass("selected"):i.removeClass("selected");if(s)for(s.active=e,o=0;o<s.children.length;o++)n=d.docitems[s.children[o].docid],a.setVisible(n,n.docid==e,t)},setVisible:function(e,t,i){var o,n,a=e.lt.ubody;if(a){if(e._SP&&e._SP.length)for(o=0;o<e._SP.length;o++)e._SP[o].setV(t);if(t?(a.visible=!0,a.show(),a.view&&"RPT_VIEW"==a.objtype&&!a.view.validated&&a.view.validateItems(),"RPT_VIEW"==a.objtype&&a.view&&a.view.executeItem(),a.box_title.trigger("click"),a.resizeH(),a.view&&1==a.view.btabrun&&(i||!a.view.sheetoption||(a.view.f_run=!1,delete a.view.btabrun,n=a.view.procRunReport(null)))):(a.visible=!1,a.hide()),e.children)for(o=0;o<e.children.length;o++)this.setVisible(e.children[o],t,i);n&&a.view.reportpanel._exec_rpt(a.view.reportpanel,[{view:a.view,req:n}])}},setSize:function(e,t){var i=this.contentarea;IG$.j$ext._w(i,e),IG$.j$ext._h(i,t)},updateFilterContent:function(e){}};
IG$.rfText=function(t,e,i,n){var r=this;r.instance=t,r.container=e,r.sheetoption=i,r.updateValues=!0,r.$report_view=n,r.$init()},IG$.rfText.prototype={$init:function(){var t=this,e=$("<div class='idv-pnl-html-cnt'></div>").appendTo(t.container);t.c1=e,t.contentarea=$("<div class='idv-pnl-html'></div>").appendTo(e),t.setText()},removeObj:function(){},validateItems:function(){this.setText()},setSize:function(t,e){var i=this.c1;IG$.j$ext._w(i,t),IG$.j$ext._h(i,e)},setText:function(){var t,e,i,n,r,s,o,c,a,l=this,h=l.finfo,p=[],d=[],f=0,u=0,$=l.sheetoption;for(i=(t=Base64.decode($.model.htmlcontent||$.model.content||"")).indexOf("{",f);i>-1&&u<t.length;)(u=t.indexOf("}",i))>-1?(p.push({t:t.substring(f,i),m:0}),p.push({t:t.substring(i+1,u),m:1})):(u=f,p.push({t:t.substring(f,u),m:0})),f=u+1,i=t.indexOf("{",f);for(p.push({t:t.substring(f,t.length),m:0}),o=0;o<p.length;o++)if(1==(e=p[o]).m)if((r=e.t.match(/\[(.*?)\]/g))&&r.length>0){if(a=!!h,h)for(c=0;c<r.length;c++){if(!h[s=r[c].replace(/[\[\]]/g,"")]){a=!1;break}e.t=e.t.replace(new RegExp("\\["+s+"\\]","g"),h[s].data.join(", ")||"")}1==a&&d.push(e.t)}else d.push("{"+e.t+"}");else d.push(e.t);n=d.join(""),l.contentarea.html(n),t=Base64.decode($.model.jscript||"");var g=l.cls_id;if(!g&&t){try{ig$._txt_jscript=ig$._txt_jscript||0,g="cls_txt_"+ ++ig$._txt_jscript;var m=new IG$.cDynScript(g,0),x="ig$['"+g+"'] = { init: function(owner, html) {\n"+t+"\n}}";m.loadScript(x)}catch(t){IG$.ShowError("Error on dynamic script loader",null,null,{errstack:t.stack})}l.cls_id=g}if(g&&ig$[g])if(ig$[g].init)try{ig$[g].init.call(l,l,l.contentarea)}catch(t){IG$.ShowError("Error on dynamci script init call!",null,null,{errstack:t.stack})}else IG$.ShowError("init function need to be defined on the script!")},updateFilterContent:function(t){this.finfo=t,this.setText()}};
IG$.filteropcodes={EQ:{locale:IRm$.r1("L_F_EQ"),lcode:"L_F_EQ",name:"EQ",symbol:"="},GTE:{locale:IRm$.r1("L_F_GE"),lcode:"L_F_GE",name:"GTE",symbol:">="},GT:{locale:IRm$.r1("L_F_GT"),lcode:"L_F_GT",name:"GT",symbol:">"},LTE:{locale:IRm$.r1("L_F_LE"),lcode:"L_F_LE",name:"LTE",symbol:"<="},LT:{locale:IRm$.r1("L_F_LT"),lcode:"L_F_LT",name:"LT",symbol:"<"},IN:{locale:IRm$.r1("L_F_IN"),lcode:"L_F_IN",name:"IN",symbol:"IN"},LIKE:{locale:IRm$.r1("L_F_LIKE"),lcode:"L_F_LIKE",name:"LIKE",symbol:"LIKE"},BETWEEN:{locale:IRm$.r1("L_F_BETWEEN"),lcode:"L_F_BETWEEN",name:"BETWEEN",symbol:"BETWEEN"},IS:{locale:IRm$.r1("L_F_SQL_IS"),lcode:"L_F_SQL_IS",name:"IS",symbol:"IS"},EXISTS:{locale:IRm$.r1("L_F_SQL_EXISTS"),lcode:"L_F_SQL_EXISTS",name:"EXISTS",symbol:"EXISTS"}},IG$.drilltarget=function(e,t){var l,r,i,a,o,s,n,d,c,m=this;if(m.tsheets=tsheets={},m._edrill=t,e)for(l=0;l<e.length;l++)if(i=e[l]){if(c=i.isparameter,s={enabled:!1,items:[],item_map:{}},n={enabled:!1,items:[],item_map:{}},o=i.sid,d=!!t||i.usedrill,a=i.item)if("none"==a)s.enabled=!0;else for(s.items=a.split(";"),r=0;r<s.items.length;r++)s.items[r]&&(s.enabled=!0,s.item_map[s.items[r]]=1);if(a=i.params||null)if("none"==a)n.enabled=!0;else for(n.items=a.split(";"),r=0;r<n.items.length;r++)n.items[r]&&(n.enabled=!0,n.item_map[n.items[r]]=1);m.tsheets[o]={name:o,isdrill:d,tparams:n,titem:s,isparameter:c}}},IG$.drilltarget.prototype={isDrillTarget:function(e,t){var l=this,r=l.tsheets[e];return!r&&t&&(r=l.tsheets[t]),l._edrill||r&&r.isdrill?r&&r.isdrill?r:{name:e,isdrill:!0,isparameter:!!r&&r.isparameter,titem:{enabled:!1,items:[],item_map:{}},tparams:{enabled:!1,items:[],item_map:{}}}:{isdrill:!1}}},IG$.filterpromptenum={P_TEXTBOX:1,P_COMBOBOX:2,P_DATE:3,P_SELECT_WIN:4},IG$.fontStyle={P_NONE:0,P_BOLD:1,P_ITALIC:2,P_UNDERLINE:4},IG$._IE5=function(e,t,l){return e.styledata.length>t&&e.styledata[t].length>l&&""!=e.styledata[t][l]?" class='"+e.styledata[t][l]+"'":""},IG$.clFilter=function(e){this.model=e||{},$s.defaults(this.model,{fields:[],right_fields:[],delimiter:";",values:[]})},IG$.clFilter.prototype={getDesc:function(){var e,t=this,l="",r=t.model,i=r.fields;if(r.left_expression)l=r.left_expression;else for(e=0;e<i.length;e++)l=0==e?i[e].name:l+", "+i[e].name;return l+="\n"+t._d1(r.operator,r.opisnot,1)+"\n(","field"==r.valuetype?r.expression?l+=r.expression:(l+=r.right_fields&&r.right_fields.length?r.right_fields[0].name:"",8==r.operator&&(l+=" AND "+(r.right_fields&&r.right_fields.length>1?r.right_fields[1].name:""))):l+=t.getValueDesc(r.values),(l+=")").substring(0,50)},getValueDesc:function(e){var t,l,r="";if(e&&e.length>0)for(t=0;t<e.length;t++)r+=t>0?this.delimiter||",":"",l=e[t].value||e[t].code||"",r+=l=IG$._decodeVal(l);return r},_d1:function(e,t,l){var r=IG$.filteropcodes,i=r[e].locale;r[e].lcode;return i},loadData:function(e,t){var l=this,r=l.fields[0].uid,i=new IG$._rpc$;l.dataLoaded=!0,l.data=[],i.init(e,{ack:"olapservice",payload:{uid:r,option:"valuelist"},mbody:{}},l,l.rs_loadData,null,t),i.send()},rs_loadData:function(e,t){this.fields[0].uid;var l=e;this.result=l,t&&t.execute()}},IG$.clFilterGroup=function(e){var t=this;e&&(t.name=e.name,t.authuid=e.authuid,t.authname=e.authname,t.active=e.active,t.ftype=e.ftype),t.subGroups=[],t.subConditions=[]},IG$.clFilterGroup.prototype={findItem:function(e){return this.T1a(e,this)},T1a:function(e,t){var l,r,i,a,o,s=t.subConditions,n=t.subGroups;for(l=0;l<s.length;l++){if((o=(a=s[l]).fields)&&o.length>0)for(r=0;r<o.length;r++)if(o[r].uid==e){i=a;break}if(i)break}if(!i)for(l=0;l<n.length&&!(i=this.T1a(e,n[l]));l++);return i},TX:function(){var e,t,l,r=this,i={ftype:r.ftype||"condition"},a=r.subConditions,o=r.subGroups;if(r.authuid&&r.authname&&(!0,i={authuid:r.authuid,authname:r.authname,active:r.active,children:[]}),a.length>0||o.length>0){if(i.ftype="group",i.name=r.name,i.children=[],a.length>0)for(e=0;e<a.length;e++)(t=a[e]).ftype="condition",i.children.push(t.TX());if(o.length>0)for(e=0;e<o.length;e++)(l=o[e]).ftype="group",i.children.push(l.TX())}return i}},IG$.clReports=function(e,t){var l=this;l.meta_type=t,l._md=e,l.ctrls={},l._parse(e)},IG$.clReports.prototype={_parse:function(e){var t,l,r,i,a,o,s,n=this,d=e.content||{},c=window.m$dw||0;if(n.sheets=[],n._mc=d,$s.defaults(d,{ploader:!0,bulkload:!0,ctrls:{},sql_prompts:[],sheets:[],cube_objects:[],export_option:{}}),$s.defaults(d.export_option,{filterdesc:!0,u_excel:!0}),o=n.layoutinfo={type:"mondrian",draggable:!1,objtype:"_dc",_direction:0,width:null,height:null,children:[],children_float:[]},n.itemtype="Report",e){if($.apply(n,{type:e.type,nodepath:e.nodepath,uid:e.uid,name:e.name,itemtype:e.type,reportversion:d.objinfo.version,sql_prompts:d.sql_prompts}),n.cube_objects=d.cube_objects||[],t=d.sheets)for(r=0;r<t.length;r++){var m,p,h=(m=new IG$.clReport(t[r],n.itemtype,!1)).model;if(a=m.sql_prompts=[],h.layoutinfo&&h.layoutinfo.docid&&d.ctrls[h.layoutinfo.docid]&&(p=d.ctrls[h.layoutinfo.docid],h.hidetitle=p.hidetitle,h.panel_css=p.panel_css,h.is_float=p.is_float,h.fl_resizable=p.fl_resizable,h.fl_moveable=p.fl_moveable,h.hide_maximize=p.hide_maximize,h.fl_collapsed=p.fl_collapsed,h.fl_collapsible=p.fl_collapsible,h.fl_collapse_css=p.fl_collapse_css,$.each(["top","bottom","left","right","width","height"],(function(e,t){h["fl_en_"+t]=p["fl_en_"+t],h["fl_"+t]=p["fl_"+t]}))),n.sql_prompts)for(i=0;i<n.sql_prompts.length;i++)s=n.sql_prompts[i],a.push({name:s.name,values:[{code:s.value,text:s.value}]});n.sheets.push(m)}if(l=c&&d.layout_bs||d.layout){var _=l&&l.children&&l.children.length?l.children[0]:null,u=l&&l.children_float?l.children_float:null;o.items=[],_&&(o.docid=_.docid,o._direction=_.d||0,o.width=_.width,o.height=_.height,o.children=[],o.children_float=[],o.items.push(o),n.updateLayoutNode(o,_,o),u&&u.length&&n.updateLayoutNode_float(o,l,_))}if(l=d.ctrls)for(r in l)l[r].docid=r,(f=new IG$.sheetfiltercomp(l[r])).docid&&(n.ctrls[f.docid]=f);for(r=0;r<d.sheets.length;r++){var f,g=(m=d.sheets[r]).layoutinfo.docid;(f=d.ctrls[g])&&(f.fixed_width=m.fixed_width,f.fixed_height=m.fixed_height,f.fit_content_h=m.fit_content_h)}}},updateLayoutNode:function(e,t,l){var r,i,a={};if(t.children)for(r=0;r<t.children.length;r++)(i=t.children[r]).objtype=i.objtype||"PANEL",a={},$s.defaults(a,{objtype:i.objtype,d:i.d,r:i.r,_direction:i.d,_r:i.r,docid:i.docid,width:i.width,height:i.height,p:i.p,children:[],parent:l}),e.items.push(a),l.children.push(a),this.updateLayoutNode(e,i,a)},updateLayoutNode_float:function(e,t,l){var r,i,a={};if(t.children_float)for(r=0;r<t.children_float.length;r++)(i=t.children_float[r]).objtype=i.objtype||"PANEL",a={},$s.defaults(a,{objtype:i.objtype,d:i.d,r:i.r,_direction:i.d,_r:i.r,docid:i.docid,width:i.width,height:i.height,p:i.p,children:[],parent:e}),e.items.push(a),e.children_float.push(a),this.updateLayoutNode(e,i,a)},getCurrentPivot:function(){var e,t,l,r,i,a,o,s,n,d=this,c=d._mc;for(c.objinfo.reportversion="1.2",c.meta_type=c.meta_type||d.meta_type||"report",c.sheets=[],t=0;t<d.sheets.length;t++){sheet=d.sheets[t],e=sheet.getCurrentPivot(),c.sheets.push(e);var m=e.layoutinfo.docid,p=c.ctrls[m];p&&(p.fixedwidth=e.fixedwidth,p.fixedheight=e.fixedheight,p.hidetitle=e.hidetitle,p.panel_css=e.panel_css,p.is_float=e.is_float,p.fl_resizable=e.fl_resizable,p.fl_moveable=e.fl_moveable,p.hide_maximize=e.hide_maximize,p.fl_collapsed=e.fl_collapsed,p.fl_collapsible=e.fl_collapsible,p.fl_collapse_css=e.fl_collapse_css,$.each(["top","bottom","left","right","width","height"],(function(t,l){p["fl_en_"+l]=e["fl_en_"+l],p["fl_"+l]=e["fl_"+l]})))}if(c.dfilter=d._dfilter,window._report_prompt&&window._report_prompt.length){for(i=window._report_prompt,a=[],s={},t=0;t<i.length;t++)o={name:(l=i[t]).name,values:l.values},a.push(o),s[o.name]=o;for(t=0;t<c.sheets.length;t++){for((e=c.sheets[t]).sql_prompt=e.sql_prompt||[],n={},r=0;r<e.sql_prompt.length;r++)n[e.sql_prompt[r].name]=e.sql_prompt[r];for(r=0;r<a.length;r++)n[a[r].name]?n[a[r].name].values=a[r].values:e.sql_prompt.push(a[r])}}return c}},IG$.clReport=function(e,t){var l=this;e=e||{},l.itemtype=t,l.objtype="SHEET",l.model=e,l.objtype=l.objtype||"SHEET",$s.defaults(e,{objtype:"SHEET",enablepivot:!0,customfix:!1,customfixcols:0,rowperpage:20,usepaging:!1,pagestyle:"normal",dataquerymode:"M_PIVOT",viewchange:!0,toolbutton:!1,openload:!0,syncrows:!0,columnfill:!1,measurelocation:"column",measureposition:0,isdistinct:!1,fetchall:!1,showlnum:!1,hidemenu:!1,measuretitle:!1,ext_title:null,tb_prt_i:"excel",tb_prt_grd2:!1,tb_prt:!0,tb_chart_data:!1,tb_pivot:!1,tb_chart:!1,tb_ml_learn:!1,refresh_timer:60,rows:[],cols:[],measures:[],clusters:[],queryitems:[],report_items:[],chart_option:{},anal_options:[],layoutinfo:{},detailview:[],sheet_formula:[],visual_stories:[]}),$s.defaults(e.chart_option,{showlegend:!0,xlabel:!0,xaxishideoverlap:!0,xgroupcategory:!0,legendposition:"BOTTOM_CENTER",rel_range1:0,rel_range2:1,comp_range0:0,comp_range1:1,dl_tooltip:!0,piepctprec:2,pielayout:"h"}),e.aux_filter={},e.drilltarget&&(e.filter_options||(e.filter_options={drilltarget:e.drilltarget}),delete e.drilltarget),e.viewmode=e.viewmode||"grid",e.pagestyle=e.pagestyle||"normal",e.viewchange&&(l.tb_vch=e.viewchange),e.toolbutton&&(l.tb_prt=e.toolbutton),e.exportbutton&&(l.tb_prt_i=e.exportbutton.toLowerCase()),l.objtype=l.objtype||"SHEET",l.name=e.name,l.si=0,l.sortoption={}},IG$.clReport.prototype={needPrompt:function(){return this.model.page_filters},getItem:function(e,t){var l,r,i=this;switch(t){case 1:r=i.model.rows;break;case 2:r=i.model.cols;break;case 3:r=i.model.measures}return r&&r[e]&&(l=r[e]),l},getCurrentPivot:function(){return this.model},mL:function(e,t){var l,r=this,i=r.model,a=1,o=t.cl;if(e.titem&&o&&i){switch(a=0,o.position){case 1:l=r.model.rows;break;case 2:l=r.model.cols;break;case 3:l=r.model.measures}l&&l[o.index]&&e.titem.indexOf(l[o.index].uid)>-1&&(a=1)}return a},Uc:function(e){var t=1,l=this.model;return l.rows.length+l.cols.length+l.measures.length+l.clusters.length>0&&(t=l.cubeuid==e),t}},IG$._IF1=function(e,t){var l,r,i,a,o=this;o.rows=e.total_records,o.cols=e.cols,o.srow=e.startrow||0,o.colfix=0,o.rowfix=0,o.delim=e.delimiter,o.merge=[],o.styles={},o.data=[],o.header=e.headers||[],a=e.inline_data;var s,n=[],d=0,c=0;if(0==o.header.length&&a.length)for(s=a[0].split(o.delim),r=0;r<s.length;r++)i={fieldid:"column_"+r,name:s[r].text,type:"string"},o.header.push(i);for(l=0;l<a.length;l++){for(s=a[l].split(o.delim),n=[],r=0;r<s.length;r++){var m={text:s[r],mrow:d,mcol:c,merged:0,stylename:null,chart:null};n.push(m),c++}if(d++,t&&d>t)break;o.data.push(n)}},IG$.clResults=function(e,t){var l,r,i=this,a=t||e.results;for(i.results=[],i.jobid=e.jobid,r=0;r<a.length;r++)(l=a[r])?i.updateResult(l):l={_hasNoData:!0},i.results.push(l)},IG$.clResults.prototype={_update_measure_seq:function(e){var t=this.results;$.each(t,(function(t,l){var r,i,a,o;if(l.hidden_columns=l.hidden_columns||[],!l._orig_hidden_columns)for(l._orig_hidden_columns=[],r=0;r<l.hidden_columns.length;r++)l._orig_hidden_columns.push(l.hidden_columns[r]);for(l.hidden_columns=[],r=0;r<l._orig_hidden_columns.length;r++)l.hidden_columns.push(l._orig_hidden_columns[r]);for(r=0;r<l.rowfix;r++)for(a=l._tabledata[r],i=0;i<l.colcnt;i++)3==(o=a[i]).position&&o.index!=e&&l.hidden_columns.push(i)}))},updateResult:function(node){var me=node,params,delim,sl,snodes,treemap={},trow,p,i,j,key,n,n1,merge,data=me.tabledata,treeinfo=me.treeinfo,cell,row,_tabledata,geodata,tnode,prow,header_formatter;for(params=me._params={},delim=me.delimiter,me._hasNoData=!(me.rowcnt>me.rowfix),node.chart_color_set&&(IG$.__chartoption.chartcolors=node.chart_color_set),me.clustercode=me.clustercode||[],me.clustervalue=me.clustervalue||[],me.clusterdesc="",i=0;i<me.clustercode.length;i++)me.clusterdesc+=(i>0?" ":"")+(me.clustervalue[i]||me.clustercode[i]);if(me.params)for(i=0;i<me.params.length;i++)params[me.params[i].name]=me.params[i].value;if(header_formatter=function(cell,params){var r=cell.text,l=0,i,r,t,v,bf=0;for(l=r.indexOf("${");l>-1&&(t=r.indexOf("}",l),!(t<0));){v=r.substring(l+2,t);try{if(params[v])v=params[v];else{for(i in params)v.indexOf(i)>-1&&(bf=1),v=v.replace(i,'"'+params[i]+'"');v=bf&&eval(v)||""}}catch(e){}r=r.substring(0,l)+v+r.substring(t+1),l=r.indexOf("${1")}return r},me._styles={},me.styles&&(me.c_cset=me.styles.c_cset,me.styles.cell_styles))for(snodes=me.styles.cell_styles,i=0;i<snodes.length;i++)sl=snodes[i],me._styles[sl.name]=sl;if(treeinfo)for(me.hastree=!0,i=0;i<treeinfo.length;i++)trow=treeinfo[i],treemap[trow.r+"_"+trow.c]=trow;if(me.microcharts=me.microcharts||[],me.hidden_columns=me.hidden_columns||[],_tabledata=me._tabledata=new Array(data.length),me.geodata=geodata=[],data){for(i=0;i<data.length;i++)for(row=new Array(me.colcnt),_tabledata[i]=row,p=data[i],p.b=p.b||[],p.k=p.k||[],p.r=p.r||[],p.lat&&p.lng&&geodata.push({row:i,lat:p.lat,lng:p.lng,c:p.c,cc:p.c?parseInt(p.cc):-1}),j=0;j<me.colcnt;j++)if(cell={_n_:p.i,merged:0,mrow:0,mcol:0,code:p.c[j],value:p.v[j],text:p.v[j]||p.t[j]||p.c[j],stylename:me.style_map[p.s[j]],position:p.p[j],title:p.x[j],index:p.m[j],pindex:p.y[j],cc:p.b[j],si:p.r[j],cm:p.k[j]},i<me.rowfix&&cell.text&&cell.text.indexOf("${")>-1&&(cell.text=header_formatter(cell,params)),row[j]=cell,key=i+"_"+j,treeinfo&&treemap[key])if(tnode=treemap[key],cell.celltree={depth:tnode.d,ptext:tnode.p,haschild:tnode.pc,parent:null,opened:tnode.po,h:tnode.h,hm:tnode.hm,childcolumns:tnode.m},cell.celltree.childcolumns&&cell.celltree.childcolumns.length)me._hastreecol=1;else if(cell.celltree.ptext)for(n=i-1;n>=0;n--)if(prow=_tabledata[n],n1=-1,prow[j].code==cell.celltree.ptext&&prow[j].celltree&&prow[j].celltree.depth==cell.celltree.depth-1?n1=j:j>0&&prow[j-1].code==cell.celltree.ptext&&prow[j-1].celltree&&prow[j-1].celltree.depth==cell.celltree.depth-1&&(n1=j-1),n1>-1){prow[n1].celltree.haschild=!0,cell.celltree.parent=prow[n1],tnode.h||(row[0].mcelltree=row[0].mcelltree||[],row[0].mcelltree.length||row[0].mcelltree.push(j));break}var r1,r2,c1,c2,mr,mc,mval,mchart,drow;for(merge=me.merge_range||[],n=0;n<merge.length;n++)for(r1=merge[n].r1,r2=merge[n].r2,c1=merge[n].c1,c2=merge[n].c2,r2>data.length-1&&(r2=data.length-1),i=r1;i<r2+1;i++)for(j=c1;j<c2+1;j++)mr=r2-r1,mc=c2-c1,mval=_tabledata[i][j].merged,i==r1&&j==c1?(c2-c1>0&&(mval|=2),r2-r1>0&&(mval|=1)):(c2-c1>0&&(mval|=4),r2-r1>0&&(mval|=8)),cr=_tabledata[i][j].mrow,cc=_tabledata[i][j].mcol,_tabledata[i][j].merged=mval,_tabledata[i][j].mrow=Math.max(mr,cr),_tabledata[i][j].mcol=Math.max(mc,cc);for(delete me.merge_range,i=0;i<me.microcharts.length;i++)mchart=me.microcharts[i],data.length>mchart.row&&me.colcnt>mchart.column&&(drow=_tabledata[mchart.row],drow[mchart.column].charts=mchart);delete me.microcharts}delete me.tabledata}},IG$.clStyleObject=function(e,t,l){var r=this;r.itemtype=t,r.custom=l,r.rptseq="0",e&&(r.basestylename=e.basestylename,r.name=e.name,r.rptseq=e.rptseq||0,r.uid=e.uid,r.fid=e.fid,r.header=new IG$.clStyleItem(e.header),r.data=new IG$.clStyleItem(e.data))},IG$.clStyleObject.prototype={applyBaseStyle:function(e,t){this.header.applyBaseStyle(e.header),this.data.applyBaseStyle(e.data)},forceBsStyl:function(e,t){this.header.forceBsStyl(e.header,t),this.data.forceBsStyl(e.data,t)},getData:function(e){var t=this;return{basestylename:t.basestylename,name:t.name,rptseq:t.rptseq,uid:t.uid,fid:t.fid,header:t.header.getData(e?e.header:null),data:t.data.getData(e?e.data:null)}}},IG$.clStyleItem=function(e,t){var l=this;l.itemtype=t,l._mc=e||{},l._mc.template=IG$._encodeVal(l._mc.template)},IG$.clStyleItem.prototype={applyBaseStyle:function(e){var t,l=this;for(t in e._mc)void 0!==l._mc[t]&&null!==l._mc[t]&&-1!==l._mc[t]||(l._mc[t]=e._mc[t])},forceBsStyl:function(e,t){var l,r=this._mc,i=e._mc;if(i&&r)for(l in i)t?r[l]!=i[l]&&""!=r[l]||delete r[l]:r[l]=i[l]},getData:function(e){var t,l,r=this._mc,i=e?e._mc:null,a={};for(t in r)"name"!=t?(l=r[t],i&&i[t]===l?l=null:a[t]=l):a[t]=r[t];return a}},IG$.iff=function(e){var t=this;t.dtype="static",t.coldelim="\t",t.rowdim="\n",t.dvalues=[],t.i_cdata=[],e&&t.p1(e)};
IG$.dlg_share=$s.extend($s.window,{width:650,height:500,layout:{type:"vbox",align:"stretch"},modal:!0,_init:function(){var e=this,t=ig$.serveraddress||"",i=e.down("[name=m_lnk]");if(t.indexOf(";")>-1){(t=t.substring(t.indexOf(";")+1)).indexOf(";")>0&&(t=t.substring(0,t.indexOf(";")));for(var n=t.indexOf("{"),a=t.indexOf("}",n+1);n>-1&&a>n;){var l,s=t.substring(n+1,a);l="uid"==s?e.uid:"mts"==s&&IG$._g$a||"",n=(t=t.substring(0,n)+l+t.substring(a+1)).indexOf("{"),a=t.indexOf("}",n+1)}}else"/"!=t.charAt(t.length-1)&&(t+="/"),(t+="launcher/viewer.jsp").indexOf("?")>-1?t+="&":t+="?",t+="objid="+e.uid,t+="&mts="+(IG$._g$a||"");i.setValue(t),e._get_links()},_share_me:function(){var e=this,t=e.down("[name=m_em]"),i=e.down("[name=m_msg]"),n=t.getValue(),a=i.getValue(),l=e.down("[name=b_need_login]"),s=e.down("[name=p_lnk]").getValue();if(t.clearInvalid(),n){var o=new IG$._rpc$,r={recipient:n,message:a,uid:e.uid,linkurl:s,is_public:l.getValue()?"F":"T"};IG$.confirmMessages(ig$.appname,IRm$.r1("M_CREATE_SHARE_URL"),(function(t){"yes"==t&&(o.init(e,{ack:"sendmail",payload:{uid:e.uid,mtype:"share_item"},mbody:r},e,(function(t){IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success"),e.down("[name=p_lnk]").setValue(t.lurl),e._get_links()})),o.send())}),e,e)}else t.markInvalid("Required!")},_gen_link:function(){var e=this,t=e.down("[name=b_need_login]"),i=new IG$._rpc$;IG$.confirmMessages(ig$.appname,IRm$.r1("M_CONFIRM_SHARE_URL"),(function(n){"yes"==n&&(i.init(e,{ack:"sendmail",payload:{uid:e.uid,mtype:"share_link"},mbody:{is_public:t.getValue()?"F":"T"}},e,(function(t){t&&(e.down("[name=p_lnk]").setValue(t.lurl),e._get_links())})),i.send())}),e,e)},_get_links:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"sendmail",payload:{uid:e.uid,mtype:"get_share_link"},mbody:{}},e,(function(t){var i=e.down("[name=grd_shared]");t&&i.store.loadData(t)})),t.send()},initComponent:function(){$s.apply(this,{title:IRm$.r1("T_SHARE_SETTINGS"),padding:ig$.padding,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:"anchor",autoScroll:!0,defaults:{anchor:"100%",labelPosition:"top"},items:[{xtype:"fieldset",title:IRm$.r1("L_EMBED_LINK"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",name:"m_lnk",fieldLabel:IRm$.r1("L_LINK_TO_SHARE"),readOnly:!0,labelPosition:"top"},{html:IRm$.r1("M_SHARE_PAGE"),autoHeight:!0}]},{xtype:"fieldset",title:IRm$.r1("L_SHARE_PUBLIC"),layout:{type:"vbox",align:"stretch"},defaults:{labelPosition:"top"},items:[{xtype:"textfield",name:"m_em",fieldLabel:IRm$.r1("L_PEOPLE"),emptyText:IRm$.r1("L_INPUT_EMAIL")},{xtype:"textarea",name:"m_msg",fieldLabel:IRm$.r1("L_EMAIL_MSG"),emptyText:IRm$.r1("L_EMPTY_MSG")},{html:IRm$.r1("M_EMAIL_DESC"),autoHeight:!0},{xtype:"checkbox",name:"b_need_login",fieldLabel:IRm$.r1("L_LOGIN"),labelPosition:"left",boxLabel:IRm$.r1("L_NEED_LOGIN"),value:!0},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textarea",name:"p_lnk",readOnly:!0,height:120,flex:1,labelPosition:"top",fieldLabel:IRm$.r1("L_PUBLIC_LINK_URL")},{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",height:20},{xtype:"button",text:IRm$.r1("B_GENERATE"),handler:function(){this._gen_link()},scope:this}]}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:IRm$.r1("B_SHARE"),handler:function(){this._share_me()},scope:this}]}]},{xtype:"fieldset",title:IRm$.r1("L_SHARE_HISTORY"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",fieldLabel:IRm$.r1("L_URL_OF_SHARE_OBJ"),labelPosition:"top",name:"h_url",height:100},{xtype:"gridpanel",name:"grd_shared",height:300,store:{fields:[]},columns:[{text:IRm$.r1("B_DATE"),tdCls:"igc-td-link",dataIndex:"cdate"},{text:IRm$.r1("B_IS_PUBLIC"),xtype:"checkcolumn",dataIndex:"is_public",readOnly:!0},{text:IRm$.r1("L_VISIT_COUNT"),dataIndex:"acc_count"},{text:IRm$.r1("L_LAST_VIEWED"),dataIndex:"ldate"},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-delete",handler:function(e,t,i,n){if(n.get("uid")){var a=this;IG$.confirmMessages(ig$.appname,IRm$.r1("M_CONFIRM_DISABLE"),(function(t){if("yes"==t){var i=new IG$._rpc$;i.init(a,{ack:"sendmail",payload:{suid:n.get("suid"),uid:a.uid,mtype:"remove_share_link"},mbody:{}},a,(function(t){e.store.remove(n)})),i.send()}}),a,a)}},scope:this}]}],listeners:{cellclick:function(e,t,i,n,a,l){if(0==i){this.down("[name=h_url]").setValue(n.get("url"))}},scope:this}}]}]}]}],buttons:[{xtype:"button",text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){e._init()}}}),IG$.dlg_share.superclass.initComponent.call(this)}});
IG$.SVGLoader=function(e,t,a){var i=this;i.container=e,i.idfield="id",i.mindex=0,i.chart=t,i.owner=a,i.cop=a&&a.cop?a.cop:null},IG$.SVGLoader.prototype={load:function(e){var t=this;if(t.loaded==e)return t.resizeTo(),void $(t.container).trigger("svgloaded");t.container.empty(),$.ajax({url:e,dataType:"text",type:"GET",cache:!0,complete:function(){},success:function(a){var i=IG$.loadXML(a);t.loaded=e,t.loadSVG(i),$(t.container).trigger("svgloaded")},error:function(){}})},loadSVG:function(e){var t,a,i,o,n,s,r=this,l=r.container;if(r.mapid={},r.gparam={cx:0,cy:0,cwidth:IG$.j$ext._w(l),cheight:IG$.j$ext._h(l),sx:0,sy:0,swidth:IG$.j$ext._w(l),sheight:IG$.j$ext._h(l)},r.text_elements=[],t=IG$.XGetNode(e,"/svg"),n=$("<div class='igc-svg-paper'></div>").css({position:"relative"}).width("100%").height("100%").appendTo(l),s=$("<div class='igc-svg-text-container'></div>").css({position:"absolute",top:0,left:0,overflow:"visible"}).width(0).height(0).appendTo(l),r.paper=Raphael(n[0],0,0,r.gparam.cwidth,r.gparam.cheight),r.text_container=s,r.cop&&r.cop.settings&&(r.line_color=r.cop.settings.m_svg_line_color,r.line_width=Number(r.cop.settings.m_svg_line_width),r.font_color=r.cop.settings.m_svg_font_color,r.font_size=Number(r.cop.settings.m_svg_font_size),r.label_opt=IG$._decodeVal(r.cop.settings.m_svg_label_option),r.nodatacolor=r.cop.settings.m_svg_nodata_color||"#ffffff"),r.line_color=r.line_color||"#000000",r.line_width=r.line_width||2,r.font_color=r.font_color||"#ff0000",r.font_size=r.font_size||20,r.nodatacolor=r.nodatacolor||"#ffffff",r.legend=$("<ul class='map-legend'></ul>").appendTo(l).hide(),r.layer_info=$("<div class='igc-svglayer-info'><span id='igc-map-id'></span><div id='igc-map-info'></div></div>").appendTo(l),t){if(a=IG$.XGetAttrProp(t),r.gparam.sx=a.x?r.getVal(a.x):r.gparam.sx,r.gparam.sy=a.y?r.getVal(a.y):r.gparam.sy,r.gparam.swidth=a.width?r.getVal(a.width):r.gparam.swidth,r.gparam.sheight=a.height?r.getVal(a.height):r.gparam.sheight,o=(o=a.viewBox)?o.split(" "):null){for(i=0;i<o.length;i++)o[i]=r.getVal(o[i]);o=o[0]==r.gparam.sx&&o[1]==r.gparam.sy&&o[2]==r.gparam.swidth&&o[3]==r.gparam.sheight?null:o}r.gparam.vbox=o,r.paper.setSize(r.gparam.cwidth,r.gparam.cheight);var d={isroot:!0,id:null,children:[],childmap:{},d:[],set:r.paper.set()};r.recurseNode(t,d,undefined),r.mainpage=d,r.resizeTo()}},prepareLegend:function(){var e=this,t=e.legend,a=e.mapdata.measures;t.empty(),e.legidx=0,a&&a.length>0?(t.show(),$.each(a,(function(a,i){$("<li class='map-legend-item'>"+(i.name||i.text)+"</li>").appendTo(t).bind("click",(function(){e.legidx=a,e.applyColor(a)}))}))):t.hide()},recurseNode:function(e,t,a){var i,o=this,n=o.paper,s=IG$.XGetChildNodes(e),r=o.text_container;$.each(s,(function(e,s){var l,d,p,c,m,g,h,f=o.idfield||"id";if(l=IG$.XGetNodeName(s),h=(i=IG$.XGetAttrProp(s))[f]||i.id||i.name||"noid","g"==l)d={isroot:!0,id:h,name:h,children:[],childmap:{},d:[],set:n.set()},t.set.push(d.set),t.children.push(d),t.childmap[h]=d,o.mapid[h]={g:d},o.recurseNode(s,d,a);else if("path"==l)p=n.path(i.d).attr({fill:o.nodatacolor,"stroke-linejoin":"round",stroke:o.line_color,"stroke-width":o.line_width}),t.d.push(p),delete i.d,p.attr(p),t.set.push(p),h&&(o.mapid[h]={g:p});else if("text"==l){g=IG$.XGetTextVal(s),(m=$("<div class='igc-svg-text'></div>").css({position:"absolute",top:Number(i.y),left:Number(i.x),fontSize:o.font_size,textAlign:"left","white-space":"nowrap",color:o.font_color}).appendTo(r)).html(g),c=n.text(Number(i.x),Number(i.y),"ksdjf").attr({"font-size":o.font_size,fill:o.font_color,"text-anchor":"middle","alignment-baseline":"middle",opacity:0}),t.d.push(c),t.set.push(c);var u=c.getBBox(),_=n.rect(u.x,u.y,u.width,u.height).attr({stroke:"#fff",opacity:.1});t.set.push(_),c.toFront(),o.text_elements.push({paper:c,html:m}),h&&g&&"L"==h.charAt(0)&&o.mapid[h.substring(1)]&&(o.mapid[g]=o.mapid[h.substring(1)],o.mapid[g].t=c,o.mapid[g].thtml=m)}}))},getVal:function(e){return e=e.replace(/px/,""),Number(e)},_resize_text:function(){$.each(this.text_elements,(function(e,t){var a=t.paper,i=t.html,o=a.getBBox(),n=o.x,s=o.y,r=i.width();i.css({top:s,left:n-r/2})}))},resizeTo:function(){var e,t,a,i,o,n,s,r,l,d=this,p=d.container,c=1,m=1,g=1,h=d.mainpage;d.gparam.cwidth=IG$.j$ext._w(p),d.gparam.cheight=IG$.j$ext._h(p),o=d.gparam.vbox,n=d.gparam.cwidth,s=d.gparam.cheight,r=d.gparam.swidth,l=d.gparam.sheight,o&&(m=o[2]/r,g=o[3]/l,c=Math.min(m,g)),t=n/r,a=s/l,e=Math.min(t,a)*c,d.paper.setSize(n,s),i="s"+e+","+e+",0,0t"+(n-r*e)/2/e+","+(s-l*e)/2/e,h.set.transform(i),d._resize_text()},loadData:function(e){var t=this;t.mapdata=e,t.prepareLegend(),t.applyColor(0)},applyColor:function(e){var t,a,i,o,n,s,r=this,l=r.mapdata,d=r.label_opt,p=r.mapdata.m_svg_min_color||"#ffff51",c=r.mapdata.m_svg_max_color||"#ff0000",m=r.mapdata.m_svg_nodata_color||"#ffffff",g=r.legend,h=r.layer_info;if(r.legidx=e,o=(o=e)<l.measures.length?o:0,legenditems=g.children("li"),legenditems&&legenditems.length>0)for(t=0;t<legenditems.length;t++)$(legenditems[t]).removeClass("map-legend-selected"),t==o&&$(legenditems[t]).addClass("map-legend-selected");l.measures&&l.measures.length>o&&(a=l.measures[o].min,i=l.measures[o].max,$.each(l.point,(function(e,t){var g,f,u,_,v=t.data[o];if(isNaN(v))(g=r.mapid[e]?r.mapid[e].g:null)&&g.attr({fill:m});else{s=155*(v-a)/(i-a),n=IG$.interpolateColor(p,c,155,s),g=r.mapid[e]?r.mapid[e].g:null;var x=function(a,i,o){var n=r.container.offset(),s=o?i.clientX-n.left:i.offsetX+5,d=o?i.clientY-n.top:i.offsetY+5,p=r.container.width(),c=r.container.height();h.css({top:c<d+120?c-120:d,left:p<s+200?p-200:s}),clearTimeout(r._stimer),h.show();var m=[];for(m.push("<div>* "+e+"</div>"),m.push("<ul>"),_=0;_<l.measures.length;_++)m.push("<li><span class='title'>"+l.measures[_].text+": </span> "),m.push(t.text[_]),m.push("</li>");m.push("</ul>"),$("#igc-map-id",h).html(m.join("\n")),r._stimer=setTimeout((function(){h.fadeOut()}),3e3)};if(g&&(g.attr({fill:n}),g.hover((function(e){g.$_oc=g.attr("fill"),x(0,e)}),(function(){})),g.mousedown((function(t){x(0,t);var a={name:l.measures[0].text},i={point:{category:e}};$(r.container).trigger("region_clicked",{sender:a,param:i})}))),f=r.mapid[e]?r.mapid[e].t:null,g&&f){if(u=r.mapid[e].thtml,d){var w=d,G=t.text[o],y=t.mapid;w=(w=w.replace("{value}",G)).replace("{label}",y),u.html(w);var b=f.getBBox(),I=b.x,N=b.y,z=u.width();u.css({top:N,left:I-z/2})}u.hover((function(e){x(0,e,!0)}),(function(){})),u.bind("click",(function(t){x(0,t,!0);var a={name:l.measures[0].text},i={point:{category:e}};$(r.container).trigger("region_clicked",{sender:a,param:i})}))}}})))}};
IG$.olapReportView=function(e,t,l,r){var i=this;i.mresult=null,i.reportoption=null,i.sheetoption=null,i.uid=e,i.jobid=null,i.maincontainer=t,i.owner=l,i.maincontainer=l,i.container=$("<div class='igc-rpt-view'></div>").appendTo(l),i.width=0,i.height=0,i.ctrl=null,i.fsize=r,i.sheetobj=null,i._mgrid=new IG$.V$grid,i._mgrid.sheetoption=i.sheetoption,i._mgrid.size=i.fsize,i._mgrid.initialize(i.container),i._mgrid.sheetobj=i.sheetobj,i.fcontainer=$("<div class='idv-filter-desc'></div>").appendTo(i.maincontainer).hide(),i.applyOptions()},IG$.olapReportView.prototype={_selectedCells:function(){return this._mgrid.selectedItems},drawOlapResult:function(e,t,l,r){var i,n,o,d,s,c,h,a,m,u,p,g,_,f,x,w=this,v=w.sheetoption?w.sheetoption.model:null,b=!!v&&v.showlnum,y=!!v&&v.hidemenu,C=v?v.mdf:null,T=-1,V=0,N=!1;if(n=w.width>0?w.width:w._mgrid._dwidth,o=w.height>0?w.height:w._mgrid._cheight,n>0&&o>0&&(w._mgrid._dwidth=n,w._mgrid._cheight=o),w._mgrid._treerow=-1,w._mgrid._treecol=-1,w._mgrid.rowfix=0,w._mgrid.colfix=0,v&&1==v.customfix&&v.customfixcols>-1&&(T=v.customfixcols),w.mresult&&w.setFltInfo(w.mresult.filterdesc||""),w.mresult&&w.mresult._tabledata&&w.mresult._tabledata.length>0){if(l&&r){for(c=l.c,h=l.r,_=l.celltree.hm,a=w.mresult._tabledata[h],l.celltree.h=0,l.celltree.haschild=!0,l.celltree.depth=l.celltree.depth||0,d=r.rowfix;d<r._tabledata.length;d++){if(g=r._tabledata[d],2==_){for(s=0;s<w.mresult.colfix-r.colfix;s++)0==(u=a[c-s]).merged&&(u.merged=1),(m={_n_:u._n_,c:u.c,cc:u.cc,cm:u.cm,code:u.code,h:u.h,index:u.index,mcol:u.mcol,menus:null,merged:0,mrow:u.mrow,pindex:u.pindex,position:u.position,r:u.r,selected:!1,si:u.si,stylename:u.stylename,text:u.text,title:u.title,value:u.value,celltree:{}}).merged|=8,m.celltree.parent=l,m.celltree.depth=l.celltree.depth+1,g.splice(c-l.celltree.depth+s,0,m);(p=g[c+1]).celltree=p.celltree||{},p.celltree.depth=l.celltree.depth+1,p.celltree.parent=l,p.celltree.nd=1,g[0].mcelltree=g[0].mcelltree||[],g[0].mcelltree.push(c+1)}else 1==_&&((m=g[c]).celltree=m.celltree||{},m.celltree.parent=l,m.celltree.depth=l.celltree.depth+1,g[0].mcelltree=g[0].mcelltree||[],g[0].mcelltree.push(c));if(d==r.rowfix&&c>0)for(s=0;s<c;s++)0==a[s].merged&&(a[s].merged|=1);for(s=0;s<c;s++)g[s].merged=0,g[s].merged|=8;w.mresult._tabledata.splice(h+ ++V,0,g)}N=!0}else w._mgrid.styles=w.mresult._styles,w._mgrid.showlnum=b,w._mgrid.hidemenu=y;if(i=w.mresult._tabledata,b)for(d=0;d<i.length;d++)f=i[d].length?Number(i[d][0]._n_)-w.mresult.rowfix:0,i[d].splice(0,0,{_n_:f,chart:null,code:"",index:0,mcol:0,merged:0,mrow:0,pindex:0,position:9,stylename:"LineNumber_"+(d<w.mresult.rowfix?"header":"data"),text:d<w.mresult.rowfix?"":""+(f+1),title:0,value:null});w._mgrid.colfix=w.mresult.colfix,w._mgrid.rowfix=w.mresult.rowfix,T>-1&&(w._mgrid.colfix=T),w._mgrid._hastreecol=w.mresult._hastreecol}w.applyOptions(),w._mgrid.__trow=i?i.length:0,w._mgrid.__tpstart=0,w._mgrid.__tpend=0,w._mgrid.__gflt=C,0==e&&w.mresult&&(x=w.mresult.total_records,(w.mresult.pagestart>0||w.mresult.pageend<x)&&(w._mgrid.__tpstart=w.mresult.pagestart,w._mgrid.__tpend=w.mresult.pageend,w._mgrid.__trow=x)),w.mresult&&(w._mgrid.gs_bs_brd_col=(v?v.gs_bs_brd_col:null)||w.mresult.gs_bs_brd_col,w._mgrid.setDataProvider(i||[],void 0,w.mresult.hidden_columns,w.mresult.hidden_rows||[],N,t))},setFltInfo:function(e){var t,l,r,i,n=this,o=n.fcontainer;if(e){for(t=e.split("\n"),r="",l=0;l<t.length;l++)t[l]&&(i=t[l].substring(0,40),r=r?r+"<br>"+i:i);r&&o.html(r).show(),clearTimeout(n.__fc),n.__fc=setTimeout((function(){o.fadeOut()}),2e3)}else o.empty(),o.hide()},genTreeCol:function(e,t,l,r){var i,n,o,d,s,c,h,a,m,u,p,g,_,f=[],x=[];for(i=0;i<l;i++){for(d=e[i],s=[],n=0;n<d.length;n++)c=this.getCellVal(d[n],n),s.push(c);f.push(s)}for(i=0;i<l;i++){if(d=f[i],a=null,i<l-1)for(n=d.length-1;n>=t;n--)if((null!=(a=n>t?d[n-1]:null)&&d[n].text!=a.text||n==t)&&(u=i,!0===d[n].haschild&&(u=d[n].depth),0==i||i>0&&u==i))for(o=0;o<l;o++)o<i?((h=this.getCellVal(f[o][n],i)).haschild=!0,h.depth=u,f[o].splice(n,0,h)):((h=this.getCellVal(d[n],i)).haschild=!0,h.depth=u,f[o].splice(n,0,h));for(a=null,m=[],n=0;n<l;n++)m[n]=null;for(o=-1,n=t;n<d.length;n++)!0===d[n].haschild?(m[d[n].depth]=n,o=n,d[n].depth>0&&null!=m[d[n].depth-1]&&(d[n].parent=d[m[d[n].depth-1]])):o>-1&&(d[n].parent=d[o])}for(i=(d=f[l-1]).length-1;i>=0;i--)1==d[i].haschild&&x.push(i);for(i=0;i<l;i++)for(d=f[i],n=t;n<d.length;n++)p=n==t?null:d[n-1].code,(g=d[n].code)==p==(_=n+1<d.length?d[n+1].code:null)||g==p?d[n].merged=4:g==_&&(d[n].merged=2);for(i=l;i<e.length;i++){for(s=[],d=e[i],n=0;n<d.length;n++)c=d[n],s.push(c);this.updateColTreeData(s,x,i,0,f[l-1],l,t,r),f.push(s)}return f},updateColTreeData:function(e,t,l,r,i,n,o,d){var s,c,h,a,m,u,p,g,_=[];for(s=t.length-1;s>=0;s--)m=t[s],(h=this.getCellVal(e[m],l)).code=null,h.value=null,h.text=null,e.splice(t[s],0,h);for(s=0;s<n;s++)_.push(0);for(s=e.length-1;s>=o;s--)1==(a=i[s]).haschild?(g=e[s],e[s].code=_[a.depth+1],e[s].value=e[s].code,e[s].text=e[s].code,d&&d[g.stylename]&&(u=d[g.stylename],p=Number(g.code),u.formatstring&&0==isNaN(p)&&(g.text=p.format(u.formatstring),g.value=g.text)),_[a.depth+1]=0,_[a.depth]+=Number(e[s].code)):_[_.length-1]+=Number(e[s].code);if(e[0].children&&e[0].children.length>0)for(c=0;c<e[0].children.length;c++)this.updateColTreeData(e[0].children[c],t,l,1,i,n,o,d)},dupFinalTree:function(e,t){var l,r,i,n,o=[];if(e&&e.children&&e.children.length>0)for(l=0;l<e.children.length;l++)if(n=this.getCellVal(null,-1),t.children.push(n),(i=this.dupFinalTree(e.children[l],n))&&i.length>0)for(r=0;r<i.length;r++)o.push(i[r]);else o.push(n);else t&&o.push(t);return o},getCellVal:function(e,t){return e?{code:e.code,chart:e.chart,index:e.index,mcol:e.mcol,merged:0,pindex:e.pindex,position:e.position,stylename:e.stylename,text:e.text,title:e.title,value:e.value,treeinfo:e.treeinfo||{},children:e.children||[],ccol:t,parent:e.parent}:{code:"",chart:null,index:null,mcol:null,merged:0,pindex:null,position:null,stylename:null,text:null,title:null,value:null,treeinfo:{},children:[],ccol:t,parent:null}},cloneCellVal:function(e,t){e.code=t.code,e.chart=t.chart,e.index=t.index,e.mcol=t.mcol,e.pindex=t.pindex,e.position=t.position,e.stylename=t.stylename,e.text=t.text,e.title=t.title,e.value=t.value},applyOptions:function(e,t){var l=this;e&&t&&(l.reportoption=e,l.sheetoption=t,l._mgrid.sheetoption=t),l.sheetoption&&(l._mgrid.columnfill=l.sheetoption.model.columnfill)},invalidateSize:function(){this.drawOlapResult()}};
IG$.v$olapChartView=function(t,e,i,o,n,a){var l,r,s,c=this;c.rpc=e,c.instance=t,c.mresult=null,c.reportoption=null,c.sheetoption=null,c.uid=i,c.jobid=null,c.maincontainer=$(o),c.ctrl=null,c._masterCharts=[],c.detailChart=null,c._modc_=!1,c.selectedData=null,c.drilldepth=0,c.onClickHandler=null,c.onClickOwner=null,c.drawmode=null,c.rfctimer=-1,c.pw=-1,c.ph=-1,c.ti=0,c.scrollsize=13,c.scrollX=0,c.jcontainer=$("<div name='jcl'></div>").appendTo(c.maincontainer),c.jcontainer.css({position:"absolute",top:0,bottom:0,left:0,right:0}),n=n||IG$.j$ext._w(c.maincontainer),a=a||IG$.j$ext._h(c.maincontainer),IG$.j$ext._w(c.jcontainer,n),IG$.j$ext._h(c.jcontainer,a),c.container=c.jcontainer[0],c.fcontainer=$("<div class='idv-filter-desc'></div>").appendTo(c.maincontainer).hide(),c.fcontainer.bind("click",(function(){$(this).fadeOut()})),c.scontainer=$("<div class='m-chart-selection'></div>").appendTo(c.maincontainer).hide(),$("<div class='m-chart-selection-bg'></div>").appendTo(c.scontainer),c._bandFormula=$("<div class='igc-cfit-formula'></div>").appendTo(c.maincontainer).hide(),l=$("<div class='m-chart-selection-boxtop'></div>").appendTo(c.scontainer),c.sbox=$("<div class='m-chart-selection-box'></div>").appendTo(l),ig$.chartlogo&&ig$.chartlogo.enabled&&(r=$("<div class='"+ig$.chartlogo.clsname+"'></div>").appendTo(c.maincontainer).hide(),setTimeout((function(){r.fadeIn(2e3)}),500)),IG$.drawLicenseTag(c.instance,c.maincontainer),c.reghscroll=$('<div class="m-datagrid-scroll m-datagrid-hscroll"></div>').css({height:c.scrollsize}).hide().appendTo(c.maincontainer),c.hscroll=s=$('<div class="m-datagrid-track m-datagrid-track-h"></div>').appendTo(c.reghscroll),c.reghscrollthumb=$('<div class="m-datagrid-scrollthumb m-datagrid-scrollthumb-h"></div>').css({height:c.scrollsize,width:20}).appendTo(s),$('<div class="m-datagrid-end m-datagrid-end-h">').css({height:c.scrollsize,width:5}).appendTo(c.reghscrollthumb),c.reghscroll.bind({click:function(t){var e=c;return 0==e.mv&&e.onscrollmouseclick(c,t,"h"),!1}}),c.reghscrollthumb[0].eventtarget="horizontal",c.reghscrollthumb.bind({mousedown:function(t){var e=c;e.mv=!0,e.onthumbmousedown(this,t,"h")},mouseup:function(t){c.onthumbmouseup(this,t,"h")}}),c._unitcontainer=$("<div class='chart-unit-content'></div>").appendTo(c.maincontainer).hide()},IG$.v$olapChartView.prototype={onthumbmousedown:function(t,e,i){var o=this;return e&&(e.preventDefault(),e.stopImmediatePropagation(),o.dt1=(new Date).getTime(),o.thumbbuttondown=!0,o.thumbMouseStartX=e.pageX,o.thumbMouseStartY=e.pageY,o.sx=o.scrollX,o.sy=o.scrollY,o.isScrolling=!0,o.scrolltarget=t.eventtarget,o.registerGlobalEvent(i)),!1},onthumbmouseup:function(t,e,i){var o=this,n=o,a=(new Date).getTime();if(e&&o.dt1&&o.dt1>-1&&a-o.dt1<200){var l,r=$(t),s=r.offset(),c=e.pageX-s.left,h=e.pageY-s.top,u=IG$.j$ext._w(r),d=IG$.j$ext._h(r),p=o.scrollX,m=o.scrollY;if(o.dt1=-1,event.stopPropagation(),o.ge&&($(document).unbind(o.ge),o.ge=null),o.globalMouseUp(e,i),n.thumbbuttondown=!1,n.thumbMouseStartX=-1,n.thumbMouseStartY=-1,"v"==i){if(l=h>d/2?.1:-.1,m=(m+=Math.min(n.theight-n.cheight,.1*(n.cheight-n.fixedRowHeight))*l)<0?0:Math.min(m,n.theight-n.cheight),isNaN(m))return}else if("h"==i&&(l=c>u/2?.1:-.1,p=(p+=Math.min(n.twidth-n.cwidth,.1*(n.cwidth-n.fixedColWidth))*l)<0?0:Math.min(p,n.twidth-n.cwidth),isNaN(p)))return;n.scrollX==p&&n.scrollY==m||(n.scrollX=p,n.scrollY=m,n.updateThumbPosition(),n.thumbTimer>-1&&clearTimeout(n.thumbTimer),n.onthumbtimer())}},registerGlobalEvent:function(t){var e=this,i=function(i){return e.globalMouseDown(i,t),!1},o=function(i){return i.stopPropagation(),e.mv=!0,e.globalMouseMove(i,t),!1},n=function(a){return a.stopPropagation(),e.mv=!0,e.globalMouseUp(a,t),$(document).unbind({mousedown:i,mousemove:o,mouseup:n}),!1};this.ge={mousedown:i,mousemove:o,mouseup:n},$(document).bind({mousedown:i,mousemove:o,mouseup:n})},globalMouseDown:function(t,e){},globalMouseMove:function(t,e){t.preventDefault(),t.stopImmediatePropagation(),this&&this.scrollHandler({x:t.pageX,y:t.pageY},e)},globalMouseUp:function(t,e){var i=this;i.isScrolling=!1,i.isDragging=!1,i.ge=null,setTimeout((function(){i.mv=!1}),50)},scrollHandler:function(t,e){var i=this,o=this,n=(o.reghscroll,o.reghscrollthumb,t.x-i.thumbMouseStartX),a=i.scrollX;a=Math.min(IG$.j$ext._w(o.hscroll),Math.max(0,i.sx+n)),i.scrollX!=a&&(i.scrollX=a,i.updateThumbPosition(),i.thumbTimer>-1&&clearTimeout(i.thumbTimer),i.thumbTimer=setTimeout((function(){i.onthumbtimer()}),100))},onthumbtimer:function(){var t=this,e=0;t._scrollhandler&&t._scrollhandler.f&&(e=Math.floor(t.scrollX*t.mresult.rowcnt/t.thumbhwidth),t._scrollhandler.f.call(t._scrollhandler.o,t,e))},updateThumbPosition:function(){this.scrollX,this.sh;this.reghscrollthumb.css({left:Math.min(this.scrollX,IG$.j$ext._w(this.hscroll)-IG$.j$ext._w(this.reghscrollthumb))})},onscrollmouseclick:function(t,e,i){var o=this;e.stopPropagation();var n,a=o.scrollX;n=o.reghscrollthumb.offset().left>e.pageX?-1:1,a+=o.thumbhwidth*o.sh*n,a=Math.floor(a),a=Math.min(IG$.j$ext._w(o.hscroll)-o.thumbcalc,Math.max(0,a)),o.scrollX!=a&&(o.scrollX=a,o.updateThumbPosition(),clearTimeout(o.thumbTimer),o.thumbTimer=setTimeout((function(){o.onthumbtimer()}),50))},setFltInfo:function(t){var e,i,o,n,a=this,l=a.fcontainer;if(t&&""!=t){for(a.drilldepth,e=t.split("\n"),o="",i=0;i<e.length;i++)""!=e[i]&&(n=e[i].substring(0,40),o=""==o?n:o+"<br>"+n);""!=o&&l.html(o).show(),clearTimeout(a.__fc),a.__fc=setTimeout((function(){l.fadeOut()}),2e3)}else l.empty(),l.hide()},showHideSel:function(t){var e=this.scontainer;1==t?e.show():!1===t?e.hide():e.toggle()},invalidateSize:function(t,e){var i=this,o=(i.maincontainer,i.jcontainer);e-=10,IG$.j$ext._w(o,t),IG$.j$ext._h(o,e),this.cwidth=t,this.cheight=e,i.rfctimer>-1&&clearTimeout(i.rfctimer),i.rfctimer=setTimeout((function(){i.updateDispList(t,e)}),200)},updateDispList:function(t,e){var i=this;i.treemap,i.bindc,i.scontainer,i.sheetoption&&i.sheetoption.model.chart_option.pielayout,i.sheetoption&&i.sheetoption.model.chart_option.pieflex_width;i.rfctimer=-1,Math.abs(i.pw-t)<5&&Math.abs(i.ph-e)<5||(i.pw=t,i.ph=e,i.pw<5||i.ph<5||i.$cvis&&i.$cvis.updatedisplay(t,e))},updateSel:function(t,e,i){var o=this,n=t,a=e,l=i;o._timerUpdSel&&clearTimeout(o._timerUpdSel),o._timerUpdSel=setTimeout((function(){o.aupdateSel(n,a,l)}),800)},aupdateSel:function(t,e,i){var o,n,a,l,r,s,c,h,u,d=this,p=d.mresult,m=p._tabledata,f=p.colfix,b=p.rowfix,g=m.length>0?m[0].length:0,v=[];d.scontainer;if(t)for(o=b;o<m.length;o++){for(r=!0,n=0;n<e.length;n++)if((l=t[e[n]])&&0==isNaN(l.min)&&0==isNaN(l.max)&&(s=n+f,(c=""!=(c=m[o][s].code)?Number(c):0)<l.min||c>l.max)){r=!1;break}r&&v.push(o)}else if(i&&e){for(o=0;o<e.length;o++)e[o]==i.px?px=o+f:e[o]==i.py&&(py=o+f);for(o=b;o<m.length;o++)r=!0,h=m[o][px].code,u=m[o][py].code,h=""!=h?Number(h):0,u=""!=u?Number(u):0,h=isNaN(h)?0:h,u=isNaN(u)?0:u,(h<i.x1||h>i.x2||u<i.y1||u>i.y2)&&(r=!1),r&&v.push(o)}var w,_=d.sbox,x=$("<table></table>");for(_.empty(),$("<span>"+v.length+" / "+m.length+" Items selected</span>&nbsp;&nbsp;&nbsp;&nbsp;<br><br>").appendTo(_),$("<div class='clipbutton'>Select All</div>").appendTo(_).bind("click",(function(){IG$.selectAll(x)})),x.appendTo(_),o=0;o<b;o++)for(w=$("<tr></tr>").appendTo(x),n=0;n<g;n++)w.append($("<th>"+m[o][n].text+"</th>"));for(o=0;o<v.length;o++)for(w=$("<tr></tr>").appendTo(x),a=v[o],n=0;n<g;n++)w.append($("<td>"+m[a][n].text+"</td>"));x.bind("selectstart",(function(){return!0}))},disposeContent:function(t){$(".i-sschart-cnt",t.container).empty(),this.$cvis&&this.$cvis.dispose()},drawChartResult:function(t,e,i,o){var n,a,l,r,s=this,c=s.mresult,h=!1;if(s.pw=t>0?t:s.pw,s.ph=e>0?e:s.ph,s._unitcontainer.hide(),c){if(0==o&&c.pagestart>0&&0==s.scrollX){i=!0,h=!0;var u=s.sheetoption.model.chart_option.maxchartresult,d=c._tabledata;l=Math.min(d.length,u>0?u:d.length),s.sh=l/c.rowcnt,s.scrollX=(c.pagestart+20)*t/c.rowcnt}if(i||0!=c.pagestart||(s.sh=1,s.scrollX=0),(n=s.cop=s.sheetoption.model.chart_option).charttype=n.charttype||"cartesian",n.subtype=n.subtype||"column",s.rct=n.charttype,s.rcs=n.subtype,useformula=n.useformula,timeseriesfield=n.timeseriesfield,n.cunittext&&(s._unitcontainer.empty(),s._unitcontainer.append("<span>"+n.cunittext+"</span>"),s._unitcontainer.show()),s.setFltInfo(c.filterdesc||""),s.drilldepth>0&&n.drillcharttype&&n.drillcharttype.length>s.drilldepth&&n.drillcharttype[s.drilldepth]){for(r=0;r<IG$.chartTypeMenu.length;r++)if(IG$.chartTypeMenu[r].subtype==n.drillcharttype[s.drilldepth]){a=IG$.chartTypeMenu[r];break}a&&(s.rct=a.charttype,s.rcs=a.subtype)}var p=IG$.cVis[n.subtype];if(p)try{var m;s.$cvis&&s.$cvis.subtype==n.subtype?(s.$cvis.invalidateData&&!0===s.$cvis.invalidateData(c)&&(m=s.$cvis),m||s.disposeContent(s)):s.disposeContent(s),m||(m=new p({rpc:s.rpc,chartview:s,sheetoption:s.sheetoption,chart_option:s.cop,container:s.container,width:t,height:e,isthumb:i})).initComponent(),m.$mresult=c,m.draw(c),s.$cvis=m}catch(t){setTimeout((function(){IG$.ShowError(IRm$.r1("E_CHART_DRAWING")+t.message)}),100)}else s.disposeContent(s);i&&1!=h||(s.sh<1?(tstyle={left:0},tstyle.width=t,s.reghscroll.show(),s.thumbhwidth=IG$.j$ext._w(s.hscroll),thumbcalc=Math.max(30,s.thumbhwidth*s.sh),s.thumbcalc=thumbcalc,s.reghscrollthumb.css({left:Math.min(s.scrollX,s.thumbhwidth-thumbcalc),width:thumbcalc}),s.reghscroll.css(tstyle),s.regh=!0):(s.regh=!1,s.reghscroll.hide()))}return null},area:function(t){for(var e,i,o=0,n=t.length,a=n-1,l=0;l<n;a=l++)e=t[l],i=t[a],o+=e.lng*i.lat,o-=e.lat*i.lng;return o/=2},getDashStyle:function(t){return"dashed"==t?"Dash":"dotted"==t?"ShortDot":null},interpolate:function(t,e){var i,o,n,a=null;return e&&"#"==e.charAt(0)&&(i=e.substring(1,3),o=e.substring(3,5),n=e.substring(5,7),a="rgba("+(i=parseInt(i,16))+","+(o=parseInt(o,16))+","+(n=parseInt(n,16))+","+(t/255*.75+.25)+")"),a},procClickEvent:function(t,e,i){var o=this;o._p1a&&clearTimeout(o._p1a),o._p1a=setTimeout((function(){o.procClickHandler(t,e,i)}),250)},procClickHandler:function(t,e,i){if(t){var o,n,a,l,r,s,c,h=this,u=[],d=[],p=[],m=h.sheetoption.model.chart_option,f=m.xaxissep||ig$.chart_separator||IG$._separator,b=this.mresult,g=m.swapaxis,v=-1,$=-1,w={};if(f="nl"==f?"\n":f,!e&&(!h.selectedData||h.selectedData&&!h.selectedData.length))return;if(h.selectedData=[],t.amplix_selected&&t.amplix_selected.length)h.selectedData.push(...t.amplix_selected);else if("scatter"==h.cop.charttype||"bubble"==h.cop.charttype)if(e&&e.length)for(r=0;r<e.length;r++)(s=e[r]).datarow>-1&&p.push(s.datarow);else e&&e.datarow>-1&&p.push(e.datarow);else if(e&&e.length)for(r=0;r<e.length;r++)s=e[r],u.push(s.series?s.series.name:s.name),s.drname?d.push(s.drname):d.push(s.category||s.name||"");else e&&(u.push(t.series?t.series.name:t.name),d.push(e.point?e.point.drname||e.point.category||e.point.name:""));if(e&&e.point&&e.point.select&&e.point.select(!0,!1),h.selectedData.length);else if(p.length)for(r=0;r<p.length;r++)$=p[r],v=b.colfix-1,$>-1&&v>-1&&(b._tabledata[$][v].r=$,b._tabledata[$][v].c=v,this.selectedData.push(b._tabledata[$][v]));else{if(b.hidden_columns)for(r=0;r<b.hidden_columns.length;r++)w[b.hidden_columns[r]]=1;for(r=0;r<u.length;r++){if(o=u[r],n=d[r],1==g){for(let t=b.colfix;t<b._tabledata[0].length;t++){l="";for(let e=0;e<b.rowfix;e++)l+=(b._tabledata[e][t].text||" ")+f;if(l==n+f){v=t;break}}if(o){o=IG$.replaceAll(o,"&#x2f;","/");for(let t=b.rowfix;t<b._tabledata.length;t++){l="";for(let e=0;e<b.colfix;e++)l+=(b._tabledata[t][e].text||" ")+f;if(l==o+f){$=t;break}}}}else{for(let t=b.rowfix;t<b._tabledata.length;t++){l="";for(let e=0;e<b.colfix;e++)l+=(c=b._tabledata[t][e].text||" ")+f;if(l==n+f){$=t;break}}if(o){o=IG$.replaceAll(o,"&#x2f;","/");for(let t=b.colfix;t<b.colcnt;t++){l="";for(let e=0;e<b.rowfix;e++)c=b._tabledata[e][t].text||" ",l+=(c=IG$.replaceAll(c,"&#x2f;","/"))+f;if(l==o+f){v=t;break}}}else b.colfix>0&&(v=b.colfix-1)}v>-1&&$>-1&&(b._tabledata[$][v].r=$,b._tabledata[$][v].c=v,this.selectedData.push(b._tabledata[$][v]))}}if(h.onClickHandler&&h.onClickOwner&&h.onClickHandler.call(h.onClickOwner,h,t,e,i),h.ctrl&&h.ctrl.events&&h.ctrl.events.itemclick){var _=a.ctrl.dashboard,x=a.ctrl.actionlist;_.executeAction(x.itemclick,{ctrl:h.ctrl,ptr:h,event:"itemclick"})}}},_reqData:function(t){this.rpc._reqData(this,t)},getExportData:function(t,e){this.$cvis?this.$cvis.getExportData(t,e):e.execute(t)}};
IG$.cVis={},IG$.cVis.base=function(e){return e&&"object"==typeof e&&$s.apply(this,e),this},IG$.cVis.base.prototype={constructor:function(){},mvalue:function(e,i){var a,s,t;return i?((s=e.text)&&s.indexOf(",")>-1&&(s=(s=s.split(",")).join("")),(t=s?s.indexOf("%"):-1)>-1&&(s=s.substring(0,t)+s.substring(t+1)),a=Number(s)):a=e.code?Number(e.code):null,a},getSep:function(){var e=this.chart_option.xaxissep||ig$.chart_separator||IG$._separator;return e="nl"==e?"\n":e},getBandValue:function(mresult,v,isxaxis){var me=this,r,fs,n1,n2,ms,seq,i,j,c,nrow,ncol,mdata,fval;if(mresult){if(isxaxis){if(fval=Number(v),r={value:fval},mdata=mresult._tabledata,ncol=mresult.colfix,nrow=mresult.rowfix,isNaN(fval)){for(i=0;i<mdata.length;i++){for(j=0;j<ncol;j++)c=0==j?mdata[i][j].text:c+" "+mdata[i][j].text;if(v==c){fval=i-1;break}}r={value:fval,code:v}}else if(mdata.length>fval+nrow&&mdata[fval+nrow])for(i=0;i<ncol;i++)r.code=0==i?mdata[fval+nrow][i].text:r.code+" "+mdata[fval+nrow][i].text;return r}for(fs=mresult.statistics,n1=v.indexOf("{"),n2=v.indexOf("}");n1>-1&&n2>n1;){if(ms=v.substring(n1+1,n2),seq=-1,ms.indexOf(":")>-1&&(seq=parseInt(ms.substring(ms.indexOf(":")+1)),ms=ms.substring(0,ms.indexOf(":"))),seq>-1)ms=fs[seq][ms.toLowerCase()];else{for(ms=ms.toLowerCase(),fval=null,i=0;i<fs.length;i++)switch(ms){case"average":fval=0==i?Number(fs[i].average):fval+Number(fs[i].average);break;case"min":fval=0==i?Number(fs[i].min):Math.min(fval,Number(fs[i].min));break;case"max":fval=0==i?Number(fs[i].max):Math.max(fval,Number(fs[i].max))}"average"==ms&&fs.length>0&&(fval/=fs.length),ms=fval}v=ms+v.substring(n2+1),n1=v.indexOf("{"),n2=v.indexOf("}")}}return(v.indexOf("/")>-1||v.indexOf("*")>-1||v.indexOf("-")>-1||v.indexOf("+")>-1)&&(v=eval(v)),r={value:Number(v)},r},measureTextSize:function(e,i){var a=this,s={fontSize:e},t={};return a.measurediv||(a.measurediv=$('<div class="m-datagrid-cell-measure"></div>').appendTo($("body"))),a.measurediv.show(),a.measurediv.css(s),a.measurediv.html(i||"&nbsp;"),t.height=IG$.j$ext._h(a.measurediv),t.width=IG$.j$ext._w(a.measurediv),t},initComponent:function(){},draw:function(e){this.render([],e)},updatedisplay:function(e,i){},render:function(e,i){},dispose:function(){},getExportData:function(e,i){i.execute()}};
IG$.cVis.protovis=$s.extend(IG$.cVis.base,{charttype:"protovis",subtype:null,init_draw:function(t){var n=this,i=n.sheetoption?n.sheetoption.model.chart_option:null,o=t._tabledata;t.colfix,t.rowfix,o.length>0&&o[0].length;n.drawmode="protovis",n.mresult=t,i.settings=i.settings||{};var s=$(n.container),e=(IG$.j$ext._w(s),IG$.j$ext._h(s),(i?i.xaxissep:null)||ig$.chart_separator||IG$._separator);e="nl"==e?"\n":e,n.vis&&($(n.container).empty(),n.vis=null)},dynLoad:function(t){var n,i=this,o=ig$.bootconfig.scmap,s=[],e=window.bowser,a=i._dynloaded;i._trycnt=i._trycnt||0,i._trycnt++,i._trycnt>5?IG$.ShowError(IRm$.r1("E_CHART_LIB_LOADING")):(n=!!(e.msie&&e.version<9),a?setTimeout((function(){t.call(i)}),10):($.each([[n?"./js/excanvas.js":null,window.pv?null:"./js/protovis-d3.3.js",n||window.d3?null:"./js/d3.js",!window.d3||window.d3&&!window.d3.tip?"./js/d3.tip.js":null,!window.d3||window.d3&&!window.d3.geo?"./js/d3.geo.js":null,!window.Raphael||window.Raphael&&!window.Raphael.g?"./js/g.raphael.js":null,!window.Raphael||window.Raphael&&!window.Raphael.fn.dotchart?"./js/g.dot.js":null],o.igc6,o.igco,o.igcb],(function(t,n){var i;for(i=0;i<n.length;i++)n[i]&&s.push(n[i])})),IG$.getScriptCache(s,new IG$.callBackObj(i,(function(){this._dynloaded=1,t.call(this)})))))},draw:function(t){var n=this;n.draw_protovis?(n.init_draw(t),n.draw_protovis.apply(n,[t])):n.dynLoad((function(){var n=this;setTimeout((function(){n.init_draw(t),n.draw_protovis&&n.draw_protovis.apply(n,[t])}),10)}))},updatedisplay:function(t,n){var i=this;i.vis&&($(i.container).empty(),i.vis=null,i.mresult&&i.draw(i.mresult))},dispose:function(){var t=this.chartview;t&&($(t.container).empty(),t.vis=null),IG$.cVis.protovis.superclass.dispose.apply(this,arguments)},getExportData:function(t,n){me.vis&&(svgnode=IG$.getFstChld(me.container),IG$.XSetAttr(svgnode,"xmlns:xlink","http://www.w3.org/1999/xlink"),IG$.XSetAttr(svgnode,"xmlns","http://www.w3.org/2000/svg"),IG$.XSetAttr(svgnode,"version","1.1"),svg=IG$.toXMLString(svgnode),t.image_type="svg",t.image_data=Base64.encode(svg)),n.execute(t)}});
IG$.cVis._anychart=$s.extend(IG$.cVis.base,{drawmode:"anychart"});
IG$.cVis._highcharts=$s.extend(IG$.cVis.base,{drawmode:"_modc_",render:function(t,e){var h=this,a=(h.chart_option.subtype,h.chartview);$.each(t,(function(t,n){var s,r,i,c=h.sheetoption?h.sheetoption.model.chart_option:null,l=c?c.subtype:null;if(s=new Highcharts.Chart(n),a._masterCharts.push(s),h.__sel_s=null,e&&e.__bands&&e.__bands.length)for(i=e.__bands,r=0;r<i.length;r++)_rpc.drawBand.call(_rpc,s,i[r],l,a);else n.__cf&&n.__cf.length&&_rpc.curveFit.call(_rpc,s,n.__cf,l,a)})),IG$.cVis._highcharts.superclass.render.apply(h,arguments)},updatedisplay:function(t,e){var h=this.chartview._masterCharts;h&&h.length>0&&("h"==pielayout?(tw=t/h.length,th=e):"h"==pielayout?(th=e/h.length,tw=t):(tw=t,th=e),$.each(h,(function(t,e){$(e.renderTo).css({position:"absolute",left:"h"==pielayout?tw*t:0,top:"v"==pielayout?th*t:0,width:tw,height:th}),e.setSize.call(e,tw,th,doAnimation=!0),e.renderTo&&$(e.renderTo).hide().show(0)})))}});
IG$.cVis._echart=$s.extend(IG$.cVis.base,{drawmode:"echart",_renderAxis:function(e,t,a){var s,r,i,n,c,o,l,h=this,d=h.__coptions,p=e.seriesIndex,u=d?d[0]:null,g=t.value(0),m=t.value(1),f=t.coord([g,0]),_=f[0],b=f[1],x=.9*t.size([0,1])[0],y=parseInt(x),v=parseInt(x/2);if(!(b<e.coordSys.y+5)){if(u&&(i=u.xAxis.data[g],r=u.series[p].data[g].fval),n=r||m||"",0==g&&(h._cx=0),c=h._measure_text(10,i),o=h._measure_text(10,n),"vertical"==a){if(y<Math.max(c.w,o.w)&&(l=Math.ceil(Math.max(c.w,o.w)/x)),l>1&&g&&g%l!=0)return;s={type:"group",position:[l>1?_-x/2*l:_-x/2,b+20],children:[{type:"rect",shape:{x:0,y:-15,width:l>1?2*y:y,height:20,layout:"cover"},style:{fill:"#fff"}},{type:"path",shape:{d:"M 70 0 L 70 19 L 33 19 L 1 19 L 1 1 L 1 0 Z",x:0,y:3,width:l>1?2*y:y,height:26,layout:"cover"},style:{fill:m>0?"#9356a3":"#015a9d"}},{type:"text",style:{x:l>1?2*v:v,y:2,text:i,textVerticalAlign:"bottom",textAlign:"center",textFill:"#000"}},{type:"text",style:{x:l>1?2*v:v,y:22,textVerticalAlign:"bottom",textAlign:"center",text:n,textFill:"#fff"}}]}}else s={type:"group",position:[_-x/2,b+20],children:[{type:"rect",shape:{x:0,y:-15,width:y,height:20,layout:"cover"},style:{fill:"#fff"}},{type:"path",shape:{d:"M 70 0 L 70 -20 L 35 -20 L 35 -1 L 0 -1 L 0 0 Z",x:0,y:-15,width:y,height:20,layout:"cover"},style:{fill:m>0?"#9356a3":"#015a9d"}},{type:"text",style:{x:v-5,y:2,text:i,textVerticalAlign:"bottom",textAlign:"right",textFill:"#000"}},{type:"text",style:{x:v+10,y:2,textVerticalAlign:"bottom",textAlign:"left",text:n,textFill:"#fff"}}]};return s}},getSeriesType:function(e,t,a){var s=this,r="bar";switch(e){case"column":case"column3d":case"bar":r="bar";break;case"line":r="line",t.smooth=!1;break;case"spline":r="line",t.smooth=!0;break;case"area":r="line",t.areaStyle={opacity:.6},t.smooth=!1;break;case"pie":case"pie3d":case"doughnut":r="pie";break;case"bubble":case"scatter":r="scatter";break;case"parallel":r="parallel";break;case"waterfall":r="line",t.step=!0;break;case"areaspline":r="line",t.areaStyle={opacity:.6},t.smooth=!0;break;case"radar":r="radar";break;case"funnel":case"pyramid":r="funnel","pyramid"==e&&(t.sort="ascending");break;case"custxlabel":var i=a?a.custxlabeltype:null;t.renderItem=function(e,t){return s._renderAxis.apply(s,[e,t,i])},r="custom"}return r},getPieFmt:function(e){var t,a=e||"{name}: {percent} %";for((t=a.indexOf("{name}"))>-1&&(a=a.substring(0,t)+"{b}"+a.substring(t+6)),(t=a.indexOf("{percent}"))>-1&&(a=a.substring(0,t)+"{d}"+a.substring(t+9)),(t=a.indexOf("{value}"))>-1&&(a=a.substring(0,t)+"{c}"+a.substring(t+7)),t=a.indexOf("<br>");t>-1;)t=(a=a.substring(0,t)+"\n"+a.substring(t+4)).indexOf("<br>");return a},_measure_text:function(e,t){IG$._ccache.cmeasure=IG$._ccache.cmeasure||{};var a,s=this,r={w:0,h:0},i=(window.bowser,{}),n=IG$._ccache.cmeasure;return i.fontSize=e,n[a=t+":"+i.fontSize+":"]?r=n[a]:(s.measurediv||(s.measurediv=$('<div class="m_igc_measure"></div>').appendTo($("body"))),s.measurediv.show(),s.measurediv.css(i),s.measurediv.html(t),r.h=IG$.j$ext._h(s.measurediv),r.w=IG$.j$ext._w(s.measurediv),n[a]=r,r)},draw:function(e){var t=[];return this.render(t,e),t},render:function(e,t){var a=this,s=a.chart_option.subtype,r=a.rpc,i=a.chartview;$.each(e,(function(e,s){var n;if(window.echarts){var c,o,l=a.sheetoption?a.sheetoption.chartoption:null,h=l?l.subtype:null;(n=echarts.init(s.chart.renderTo,s.chart.echart_theme||ig$.echarts_theme||"amplix",{renderer:"canvas"})).setOption(s),n.on("click",(function(e){if("series"==e.componentType){var t={point:e.data},a={series:{name:e.seriesName,type:e.seriesType}};e.event&&"click"==e.event.type&&(t.offsetX=e.event.offsetX,t.offsetY=e.event.offsetY),i.procClickEvent(a,t)}})),s.radar&&s.radar.legendselectchanged&&n.on("legendselectchanged",(function(e){s.radar.legendselectchanged.call(a,n,e)})),n.on("brushEnd",(function(e){a._brush_sel_timer&&clearTimeout(a._brush_sel_timer),a._brush_sel_timer=setTimeout((function(){var e,t,a=[];if(params=n._lastSelParams,params.batch&&params.batch.length)for(e=0;e<params.batch.length;e++)(t=params.batch[e]).selected&&t.selected.length&&$.each(t.selected,(function(e,t){var r,i=t.dataIndex,n=t.seriesIndex,c=s.series[n];if(i&&i.length)for(r=0;r<i.length;r++){var o=c.data[i[r]];a.push({series:{name:c.name},drname:o.drname})}}));i.procClickEvent({},a,!0)}),500)})),n.on("brushselected",(function(e){n._lastSelParams=e})),i._masterCharts.push(n)}if(t&&t.__bands&&t.__bands.length)for(o=t.__bands,c=0;c<o.length;c++)r.drawBand.call(r,n,o[c],h,i);else s.__cf&&s.__cf.length&&r.curveFit.call(r,n,s.__cf,h,i)})),"syncchart"==s&&window.echarts&&echarts.connect(i._masterCharts),IG$.cVis._echart.superclass.render.apply(a,arguments)},updatedisplay:function(e,t){var a=this,s=a.chartview._masterCharts,r=(a.sheetoption,a.chart_option),i=r.pielayout,n=r.pieflex_width||200;if(s&&s.length>0){var c={cols:0,margin:0},o=0,l=0;"h"==i?(tw=e/s.length,th=t):"v"==i?(th=t/s.length,tw=e):"f"==i&&s.length>1?(c.size=Math.min(n,e),c.cols=Math.floor(e/c.size),c.margin=(e-c.size*c.cols)/2,o=c.margin,th=n,tw=n):(tw=e,th=t),$.each(s,(function(e,t){var a=t.renderTo||t.getDom();"f"==i&&s.length>1?($(a).css({position:"absolute",left:o,top:l,width:tw,height:th}),c.cols<2||c.cols>1&&(e+1)%c.cols==0?(l+=c.size,o=c.margin):o+=c.size):$(a).css({position:"absolute",left:"h"==i?tw*e:0,top:"v"==i?th*e:0,width:tw,height:th}),t.resize.call(t,{width:tw,height:th})}))}},dispose:function(){var e=this.chartview;if(e&&e._masterCharts){for(let t=e._masterCharts.length-1;t>=0;t--){try{cobj=e._masterCharts[t],cobj&&cobj.destroy&&cobj.destroy(),cobj&&cobj.dispose&&cobj.dispose()}catch(e){}e._masterCharts[t]=null}e._masterCharts=[]}IG$.cVis._echart.superclass.dispose.apply(this,arguments)},getEchartData:function(e,t){var a,s;a=IG$.getFstChld(e.getDom()),"DIV"==IG$.XGetNodeName(a).toUpperCase()&&(a=IG$.getFstChld(a),"SVG"==IG$.XGetNodeName(a).toUpperCase()?(IG$.XSetAttr(a,"xmlns:xlink","http://www.w3.org/1999/xlink"),IG$.XSetAttr(a,"xmlns","http://www.w3.org/2000/svg"),IG$.XSetAttr(a,"version","1.1"),s=IG$.toXMLString(a),t.image_type="svg",t.image_data=Base64.encode(s)):(s=e.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"}),t.image_type="png",t.image_data=s),t.image_width=$(a).width(),t.image_height=$(a).height())},getExportData:function(e,t){var a=this,s=a.chartview,r=[];s._masterCharts&&s._masterCharts.length&&$.each(s._masterCharts,(function(e,t){var s={};a.getEchartData(t,s),r.push(s)})),t&&t.execute(1==r.length?r[0]:r)},getLineType:function(e){var t="solid";switch(e?e.toLowerCase():""){case"shortdash":case"shortdot":case"shortdashdot":case"shortdashdotdot":t="dotted";break;case"shortdashdot":case"longdash":case"dashdot":case"longdashdot":case"longdashdotdot":t="dashed"}return t}});
IG$.cVis.anderson=$s.extend(IG$.cVis.protovis,{subtype:"anderson"});
IG$.cVis.boxplot=$s.extend(IG$.cVis.protovis,{subtype:"boxplot"});
IG$.cVis.bubblemap=$s.extend(IG$.cVis.base,{subtype:"bubblemap",draw:function(t){var e,a,i,s,h,n,r=(c=this).chart_option,o=t._tabledata,p=t.colfix,l=t.rowfix,m=0,c=this,u=[],b=[],x=[],g={},f={},d=[],y=[],v=0,k=0,w=(r.bmaprow,r.bmapyaxis),_=c.getSep();if(c.drawmode="bubblemap",0==w&&2==p){for(n=!1,e=l;e<o.length;e++)if(o[e].length>p&&(m=(m=Number(o[e][p].code)||0)<0?0:m),m>0)for(x.push(m),a=0;a<p;a++)i=(s=o[e][a]).text||s.code,0==a?(g[i]||(g[i]={inc:v++},d.push(i)),u.push(g[i].inc)):1==a&&(f[i]||(f[i]={inc:k++},y.push(i)),b.push(f[i].inc))}else{var G;for(n=!0,e=0;e<l;e++)for(a=p;a<o[e].length;a++)i=(s=o[e][a]).text||s.code,0==e?y.push(i):y[a-p]+=_+i;for(e=l;e<o.length;e++)for(G="",a=0;a<o[e].length;a++)i=(s=o[e][a]).text||s.code,a<p?G=0==a?i:G+_+i:(a==p&&d.push(G),u.push(e-l),b.push(a-p),m=(m=Number(i)||0)<0?0:m,x.push(m))}h=c.bmap=Raphael(c.container);var I=$(c.container),V=IG$.j$ext._w(I),X=IG$.j$ext._h(I);x.length&&h.dotchart(0,0,V,X,u,b,x,{symbol:"o",max:r.bmapsize,heat:!0,axis:"0 0 1 1",axisxstep:Math.min(d.length-1,20),axisystep:Math.min(y.length-1,20),axisxlabels:d,axisxtype:" ",axisytype:" ",axisylabels:y}).hover((function(){this.marker=this.marker||h.tag(this.x,this.y,d[this.X]+"\n"+y[this.Y]+"\n"+this.value,0,this.r+2).insertBefore(this),this.marker.show()}),(function(){this.marker&&this.marker.hide()})).click((function(){var t=null,e=null;0==n?(t={name:d[this.X]+_+y[this.Y]},e={point:{category:this.value}}):(t={name:d[this.X]},e={point:{category:y[this.Y]}}),t&&e&&c.procClickEvent(t,e)}))},updatedisplay:function(t,e){var a=this;a.$mresult&&a.draw(a.$mresult)},getExportData:function(t,e){me.bmap&&(svg=me.bmap.toSVG.call(me.bmap),t.image_type="svg",t.image_data=Base64.encode(svg)),e.execute(t)}});
IG$.cVis.chord=$s.extend(IG$.cVis.protovis,{subtype:"chord"});
IG$.cVis.forcelayout=$s.extend(IG$.cVis.protovis,{subtype:"forcelayout"});
IG$.cVis.map=$s.extend(IG$.cVis.protovis,{subtype:"map"});
IG$.cVis.matrix=$s.extend(IG$.cVis.protovis,{subtype:"matrix",updatedisplay:function(i,s){var a=this;a.qavis&&a.qavis.updateDispList.call(a.qavis)}});
IG$.cVis.matrixdiagram=$s.extend(IG$.cVis.protovis,{subtype:"matrixdiagram"});
IG$.cVis.networkdiagram=$s.extend(IG$.cVis.protovis,{subtype:"networkdiagram"}),IG$.cVis.networkdiagram_pos=$s.extend(IG$.cVis.networkdiagram,{subtype:"networkdiagram_pos"}),IG$.cVis.networkdiagram_neg=$s.extend(IG$.cVis.networkdiagram,{subtype:"networkdiagram_neg"});
IG$.cVis.parallel=$s.extend(IG$.cVis.protovis,{subtype:"parallel"});
IG$.cVis.treemap=$s.extend(IG$.cVis.protovis,{subtype:"treemap",ti:0,updatedisplay:function(e,t){var a=this.treemap;a&&a.map&&(a.box.css({top:a.ty,left:0,width:e,height:t-a.ty}),window.echarts?a.map.resize.call(a.map,{width:e,height:t-a.ty}):(a.map.setSize(e,t-a.ty),a.map.renderTo&&$(a.map.renderTo).hide().show(0)))},getExportData:function(e,t){me.treemap&&me.treemap.map&&(me.treemap.map.getSVG?(svg=me.treemap.map.getSVG.call(me.treemap.map),e.image_type="svg",e.image_data=Base64.encode(svg)):me.getEchartData(me.treemap.map,e)),t.execute(e)}});
IG$.m$ReqOlap=function(){this.jobid=null,this.panel=null,this.uid=null,this.sheet=null,this.chart=null,this.reportoption=null,this.ctrlsource=null},IG$.m$ReqOlap.prototype={requestPivotResult:function(e,t,o,r,i,s,a,n,p,l){var d,h=this,u=h.jobid;h.uid,h.reportoption,u=h.panel.jobid;return n&&(u=n.jobid),d=t||h.sheet||h.chart,h._requestPivotResult(null,[d,o,r,e,i,s,u,a,n,p,l])},_requestPivotResult:function(e,t){var o,r=this,i=r.jobid,s=r.uid,a=r.reportoption,n=t[0],p=t[1],l=t[2],d=(t[3],t[4]),h=t[5],u=(i=t[6],t[7]),c=t[8],m=t[9],R=t[10],$="F";return void 0!==d&&($="T"),d=d||0,a&&a.poolname&&IG$.dbp[a.poolname]&&(o=IG$.dbp[a.poolname]),{payload:{uid:s,option:"pivot",active:""+p,pivotresult:"T",pwd:o,jobid:i||"",startpage:""+d,endpage:""+(h||-1),ispagechange:$,theme_id:ig$.theme_id||""},method:"rrequestPivotResult",params:[n,p,l,u,c,m,R]}},rrequestPivotResult:function(e,t){var o=new IG$.clResults(e),r=t[0],i=t[1],s=t[2],a=t[3],n=t[4],p=t[5],l=t[6],d=t[7];if(o._job=n,o._is_sc=p,o._hcell=d,window.m$dor)try{window.m$dor(this,o)}catch(e){IG$.alertmsg(ig$.appname,IRm$.r1("M_ERR_C_REP_PROC"),null,this.panel,1,"error")}l||this.refreshControls(undefined,i,o,r,s),this.panel&&this.panel.setLoading(!1),a&&a.execute({iserror:!1,mresults:o})},requestUpdateReport:function(e,t,o,r,i,s){var a=this;if(!a.panel.updateNoPivot||a.panel.updateNoPivot()){var n,p="rolap"==a.reportoption.reportmode?"run":"sql"==a.reportoption.reportmode?"sqlrun":"run",l=a.reportoption;return l&&l.poolname&&IG$.dbp[l.poolname]&&(n=IG$.dbp[l.poolname]),{payload:{uid:this.uid?this.uid:"",option:p,active:""+o,pivotresult:"T",pwd:n,djobid:a.panel.jobid||"",theme_id:ig$.theme_id||""},method:"rrequestUpdateReport",params:[t,o,i,s]}}},rrequestUpdateReport:function(e,t){var o=this,r=t[0],i=t[1],s=t[2],a=t[3];o.panel.setLoading(!1);var n=new IG$.clResults(e);if(window.m$dor)try{window.m$dor(this,n)}catch(e){IG$.alertmsg(ig$.appname,IRm$.r1("M_ERR_C_REP_PROC"),null,this.panel,1,"error")}o.jobid=n.jobid,o.panel.jobid=o.jobid,o.refreshControls(undefined,i,n,a,r),s&&s.execute()},refreshControls:function(e,t,o,r,i){var s,a=this;if(r&&r.drawChartResult){var n=$(r.container),p=IG$.j$ext._w(n),l=IG$.j$ext._h(n);r.mresult=o.results[0];var d=r.drawChartResult(p,l);r.drawchart=d,1==r._modc_&&(r.disposeContent(r),window.echarts&&$.each(d,(function(e,t){(s=echarts.init(t.chart.renderTo,t.chart.echart_theme||ig$.echarts_theme||"amplix",{renderer:"canvas"})).setOption(t),r._masterCharts.push(s)})))}else if(r&&r.drawOlapResult)r.mresult=o.results[0],r.drawOlapResult();else if("report"==this.ctrlsource)e=a.reportoption.sheets[t].model.viewmode,a.reportoption.sheets[t].mresults=o,1!=a.panel.__dx&&a.panel.drawResults(e,o);else if("dashboard"==this.ctrlsource)switch(a.sheet.reportoption=a.reportoption,a.sheet.sheetoption=a.reportoption.sheets[0],a.sheet.sheetoption.model.viewmode=i||a.sheet.sheetoption.model.viewmode,a.sheet.sheetoption.model.viewmode){case"grid":a.sheet.changeView(0),a.sheet.procLoadResult(o);break;case"chart":case"r":a.sheet.changeView(1),a.sheet.procLoadResult(o)}}};
IG$.dynFilterConfig=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:500,height:450,callback:null,viewmode:0,init_f:function(){var e,t,a,l,i,n,o=this,d=IG$.dynFilterDateConfig,s=o.pitem,m=s.model,r=s&&s.model?s.model.type:null,c=o.down("[name=tabid]"),p=o.down("[name=l_codemap]"),u=[],_={},L=o.down("[name=periodlist]"),b=o.down("[name=fmode]"),h=o.dzone,f=[];if(IG$.defaults(m,{smode:"codevalue",dateseltype:"date",yearfrom:"cyear-5",yearto:"cyear",colspan:0}),o._selchange=1,o.setAllValues(m),o._selchange=0,o.down("[name=objname]").setValue(m.objectid||m.name),o.down("[name=dfieldname]").setValue(m.name),o.initial_values=m.initial_values,o.setFilterDesc(o.down("[name=defaultvalue_desc]")),c.setVisible("viewselector"==m.type),p.setVisible("viewselector"!=m.type),o.down("[name=dfieldcontaner]")[m.uid&&"valueset"!=r&&"prompt"!=r?"show":"hide"](),h){for(e=0;e<h.items.length;e++)"TAB"==(l=h.items[e]).objtype&&f.push({label:l.title||l.docid,value:l.docid});c.store.loadData(f),c.setValue(m.tabid)}for(d.initNames(),e=0;e<d.data.length;e++)i=d.data[e],u.push({name:i.name,value:i.value,selected:!1,isdefault:!1}),_[i.value]=e+1;if(L.store.loadData(u),o.down("[name=showperiodselector]").setValue(m.showperiodselector),m.periodlist)for(e=0;e<m.periodlist.length;e++)(a=_[(t=m.periodlist[e]).value])&&(L.store.data.items[a-1].set("selected",!0),1==t.isdefault&&L.store.data.items[a-1].set("isdefault",!0));o.down("[name=cmap_disp]").setValue(m.codemapping?m.codemapping.lname||m.codemapping.name:null),b.hide(),m.uid&&"sql_report"!=o.meta_type&&((n=new IG$._rpc$).init(o,{ack:"helpcontent",payload:{uid:m.uid},mbody:{option:"translate"}},o,(function(e){e&&e.length&&$("input",o.down("[name=dfieldname]").el.dom).attr("title",e[0].nodepath)})),n.send()),o.updateLayout()},_confirm:function(){var e,t,a=this,l=a.pitem,i=l.model,n=a.down("[name=periodlist]"),o=!1,d=a.down("[name=objname]").getValue(),s=i.type?i.type.toLowerCase():null;if(l.validated=!1,!a.getAllValues(i)){for("prompt"==s?i.name=d:i.objectid=i.name==d?null:d,i.periodlist=[],i.initial_values=a.initial_values,e=0;e<n.store.data.items.length;e++)1!=(t=n.store.data.items[e]).get("selected")&&1!=t.get("isdefault")||(i.periodlist.push({name:t.get("name"),value:t.get("value"),isdefault:1==t.get("isdefault")&&0==o}),1==t.get("isdefault")&&(o=!0));0==o&&i.periodlist.length>0&&(i.periodlist[0].isdefault=!0),a.callback&&a.callback.execute(),a.close()}},updateLayout:function(){var e=this,t=e.pitem,a=t.model,l=t&&t.model?t.model.type:null,i="prompt"==l,n="valueset"==l,o=e.down("[name=objtype]").getValue();e.down("[name=showpopup]").setVisible("checkbox"==o||"combobox"==o),e.down("[name=rangevalue]").setVisible(!(i||n||"text"!=o&&"combobox"!=o)),e.down("[name=smode]").setVisible("checkbox"==o||"combobox"==o),e.down("[name=checkbuttonhor]").setVisible("checkbuttons"==o||"radiobuttons"==o),e.down("[name=periodset]").setVisible("calendarperiod"==o&&!i&&!n),e.down("[name=s1]").setVisible("slider"==o),e.down("[name=l_codemap]").setVisible("viewselector"!=a.type&&"text"!=o),e.down("[name=tabnames]").setVisible("tabpanel"==o)},showValueEditor:function(e){var t,a=this,l=a.pitem.model,i=l.codemapping,n={initial_values:a.initial_values,callback:new IG$.callBackObj(a,(function(e,t){var a=this,l=a.down("[name="+t+"]");e&&e.length>0?a.initial_values=e:a.initial_values=[],a.setFilterDesc(l)}),e)};("prompt"!=l.type||l.codemapping)&&(i?n.field={uid:i.uid,name:i.name,type:i.type}:l.uid&&(n.field={uid:l.uid,type:l.type,name:l.name})),n.meta_type=a.meta_type,n.report=a.report,n.instance=a.instance,t=new IG$.valueSelectWindow(n),IG$.checkLogin(this,t)},setFilterDesc:function(e){var t=this,a=[];if(t.initial_values&&t.initial_values.length)for(let e=0;e<t.initial_values.length;e++)a.push(t.initial_values[e].text||t.initial_values[e].code);e.setValue(a.join(","))},filter_val_sel:[{rcs:"L_C_TXT",value:"text"},{rcs:"L_C_SINGLE_SEL",value:"combobox"},{rcs:"L_C_LIST",value:"list"},{rcs:"L_C_MULTI_SEL",value:"checkbox"},{rcs:"L_C_RADIO",value:"radiobuttons"},{rcs:"L_C_CHECK",value:"checkbuttons"},{rcs:"L_C_SLIDER",value:"slider"},{rcs:"L_C_CALENDAR",value:"calendar"},{rcs:"L_C_PERIOD",value:"calendarperiod"},{rcs:"L_C_FILEUPLOAD",value:"fileupload"}],initComponent:function(){var e=this,t=e.pitem,a=t&&t.model?t.model.type:null,l=t&&t.model?t.model.objtype:null,i="valueset"==a,n="prompt"==a,o=IG$.testVal("button|fieldset|label",l),d=e.filter_val_sel,s=[{name:IRm$.r1("L_F_EQ"),value:"EQ"},{name:IRm$.r1("L_F_NOTEQ"),value:"NE"},{name:IRm$.r1("L_F_IN"),value:"IN"},{name:IRm$.r1("L_F_GE"),value:"GTE"},{name:IRm$.r1("L_F_LE"),value:"LTE"},{name:IRm$.r1("L_F_GT"),value:"GT"},{name:IRm$.r1("L_F_LT"),value:"LT"},{name:IRm$.r1("L_F_LIKE"),value:"LIKE"},{name:IRm$.r1("L_F_BETWEEN"),value:"BETWEEN"},{name:IRm$.r1("L_F_NOTIN"),value:"NOTIN"}];$.each(d,(function(e,t){t.rcs&&(t.label=IRm$.r1(t.rcs),t.rcs=null)})),o&&d.push({name:l,value:l}),$s.apply(this,{title:IRm$.r1("T_DYNFILTER_CONFIG"),items:[{xtype:"panel",layout:"anchor",autoScroll:!0,bodyBorder:!1,bodyPadding:ig$.padding,items:[{xtype:"fieldset",title:IRm$.r1("L_GENERAL"),layout:"anchor",fieldDefaults:{labelWidth:130,anchor:"100%"},items:[{name:"fuid",fieldLabel:"FUID",xtype:"textfield",hidden:!0,readOnly:!0},{name:"objname",fieldLabel:IRm$.r1("L_OBJECT_ID"),xtype:"textfield",hidden:o,required:!o},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},name:"dfieldcontaner",hidden:i||n||o,items:[{name:"dfieldname",fieldLabel:IRm$.r1("L_FIELDNAME"),xtype:"textfield",emptyText:IRm$.r1("M_SEL_ITEM"),readOnly:!0},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),name:"btn_obj",handler:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"helpcontent",payload:{uid:e.pitem.model.uid,parenttype:"Bobject",read:"F"},mbody:{option:"parentcontent"}},e,(function(t){var a=t&&t.length?t[0]:null;if(a){var l=new IG$.metaSelectDlg({instance:e.instance,visibleItems:"userdb;dataset;table;inlineview;folder;metric;custommetric;measure",tree_options:{cubebrowse:!0,rootuid:a.uid},callback:new IG$.callBackObj(this,(function(e){var t=this,a=t.down("[name=dfieldname]");t.pitem.model.uid=e.uid,t.pitem.model.name==t.down("[name=objname]").getValue()&&t.down("[name=objname]").setValue(e.name),t.pitem.model.name==t.down("[name=title]").getValue()&&t.down("[name=title]").setValue(e.name),$("input",a.el.dom).attr("title",e.nodepath),a.setValue(e.name)}))});IG$.checkLogin(this,l)}else IG$.alertmsg(ig$.appname,IRm$.r1("M_TARGET_NOTFOUND"),null,null,0,"error")}),null),t.send()},scope:this}]},{name:"title",fieldLabel:IRm$.r1("B_TITLE"),xtype:"textfield"},{name:"operator",fieldLabel:IRm$.r1("B_OP"),xtype:"combobox",displayField:"name",valueField:"value",hidden:i||n||o,store:{fields:[],data:s}}]},{xtype:"fieldset",title:IRm$.r1("L_VALUE_CONTROLS"),layout:"anchor",hidden:i||o,fieldDefaults:{labelWidth:130,anchor:"100%"},items:[{name:"objtype",fieldLabel:IRm$.r1("L_FLT_VAL_SEL"),xtype:"combobox",labelAlign:"left",valueField:"value",displayField:"label",editable:!1,queryMode:"local",autoSelect:!0,store:{fields:["label","value"],data:d},listeners:{change:function(e,t,a,l){var i,n=this,o=n.down("[name=rangevalue]"),d=n.down("[name=brangelabel]"),s=n.down("[name=bfL]"),m=n.down("[name=bfM]"),r=n.down("[name=objtype]").getValue(),c=n.down("[name=operator]"),p=c.getValue();switch(t){case"text":"BETWEEN"!=p&&"IN"!=p&&"NOTIN"!=p||(i="LIKE");break;case"combobox":case"radiobuttons":case"list":"BETWEEN"!=p&&"LIKE"!=p||(i="EQ");break;case"checkbox":case"checkbuttons":case"fileupload":"IN"!=p&&"NOTIN"!=p&&(i="IN");break;case"slider":case"calendarperiod":"BETWEEN"!=p&&(i="BETWEEN")}i&&!n._selchange&&c.setValue(i),s.setVisible("fileupload"==r),m.setVisible("calendar"==r||"calendarperiod"==r),d.setVisible(("text"==r||"combobox"==r)&&o.getValue()||"calendarperiod"==r),n.updateLayout()},scope:this}},{name:"caseinsensitive",xtype:"checkbox",hidden:i||n,fieldLabel:IRm$.r1("L_FLT_CASE_INS"),boxLabel:IRm$.r1("B_ENABLED")},{name:"fmode",xtype:"displayfield",value:"",hidden:!0},{name:"showpopup",fieldLabel:IRm$.r1("L_FLT_POP_DLG"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),hidden:!0,listeners:{change:function(e){var t=e.getValue();this.down("[name=rangevalue]").setDisabled(t),this.down("[name=smode]").setDisabled(!t)},scope:this}},{name:"smode",hidden:!0,fieldLabel:IRm$.r1("L_FLT_VMODE"),xtype:"combobox",valueField:"value",displayField:"label",editable:!1,queryMode:"local",autoSelect:!0,store:{fields:["label","value"],data:[{label:"Code Value",value:"codevalue"},{label:"Value",value:"value"},{label:"Code",value:"code"},{label:"Value Code",value:"valuecode"}]}},{name:"rangevalue",fieldLabel:IRm$.r1("L_FLT_RNG_VAL"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")+"(From - To)",hidden:!0,listeners:{change:function(e){var t=this.down("[name=brangelabel]"),a=this.down("[name=objtype]").getValue();t.setVisible(e.getValue()||"calendarperiod"==a)},scope:this}},{xtype:"fieldcontainer",name:"brangelabel",hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",name:"rangelabel",fieldLabel:IRm$.r1("L_FLT_RNG_TXT")},{xtype:"displayfield",value:"(Ex: From^~^To to {From ---------- ~ To ----------}} : text is left"},{xtype:"displayfield",value:"(Ex: _From^~^_To to {---------- From ~ ---------- To}} : text is right"}]},{name:"isnecessary",fieldLabel:IRm$.r1("L_FLT_NEC"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"showallvalue",fieldLabel:IRm$.r1("L_FLT_SEL_ALL"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"aname",fieldLabel:IRm$.r1("L_FLT_SEL_TXT"),xtype:"textfield"},{name:"hfilter",fieldLabel:IRm$.r1("L_FLT_HIE_FLT"),xtype:"textfield"},{xtype:"fieldcontainer",layout:"hbox",fieldLabel:IRm$.r1("L_FLT_FMT_VAL"),items:[{name:"valueformat",xtype:"textfield"},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),handler:function(){IG$.show_tmpl_hlp(this,"filter_valueformat","valueformat")},scope:this}]},{name:"useprompt",fieldLabel:IRm$.r1("L_FLT_U_PROMPT"),xtype:"checkbox",hidden:n||i,boxLabel:IRm$.r1("B_ENABLED")},{xtype:"combobox",name:"tabid",hidden:!0,fieldLabel:IRm$.r1("L_FLT_TAB_PNL"),valueField:"value",displayField:"label",editable:!1,queryMode:"local",autoSelect:!0,store:{fields:["label","value"]}},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_FLT_LOOKUP"),hidden:!0,name:"l_codemap",layout:"hbox",items:[{xtype:"textfield",readOnly:!0,name:"cmap_disp",emptyText:IRm$.r1("M_SEL_ITEM"),flex:1},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){var t=new IG$.metaSelectDlg({instance:e.instance,visibleItems:"folder;codemap",tree_options:{cubebrowse:!0,rootuid:"/SYS_Lookup"},callback:new IG$.callBackObj(this,(function(e){this.pitem.model.codemapping={uid:e.uid,name:e.name,type:e.type},this.down("[name=cmap_disp]").setValue(e.name)}))});IG$.checkLogin(this,t)},scope:this},{xtype:"button",text:IRm$.r1("B_CLEAR"),handler:function(){this.down("[name=cmap_disp]").setValue(""),this.pitem.model.codemapping=null},scope:this}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_FLT_DEF_VAL"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",readOnly:!0,emptyText:IRm$.r1("M_SEL_ITEM"),name:"defaultvalue_desc"},{xtype:"button",name:"defaultvalue_btn",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),width:20,handler:function(){this.showValueEditor("defaultvalue_desc")},scope:this}]},{xtype:"textfield",fieldLabel:IRm$.r1("L_TAB_NAMES"),hidden:!0,name:"tabnames"}]},{xtype:"fieldset",title:IRm$.r1("L_FILEUPLOAD_SETTINGS"),name:"bfL",hidden:!0,layout:"anchor",items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_UPLOAD_FILE"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_SHOW_FILEHIST"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_SHOW_ALLFILES"),boxLabel:IRm$.r1("L_ENABLE_OTH_UPL")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_MULTIPLE_FILES"),boxLabel:IRm$.r1("L_ALLOW_MULTI_FILE")}]},{xtype:"fieldset",title:IRm$.r1("L_LAYOUT"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{name:"compcss",fieldLabel:IRm$.r1("L_CSS_NAME"),xtype:"textfield"},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),handler:function(){IG$.show_tmpl_hlp(this,"filter_style","compcss")},scope:this}]},{name:"readonly",fieldLabel:IRm$.r1("L_READONLY"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"ishidden",fieldLabel:IRm$.r1("L_HIDDEN"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"start_row",fieldLabel:IRm$.r1("L_FLT_START_ROW"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"merge_left",fieldLabel:IRm$.r1("L_FLT_MERGE_LEFT"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"auto_width",fieldLabel:IRm$.r1("L_FLT_AUTO_WIDTH"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{name:"colspan",fieldLabel:IRm$.r1("L_FLT_COLSPAN"),xtype:"numberfield",minValue:1,maxValue:12}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{name:"rowspan",fieldLabel:IRm$.r1("L_FLT_HEIGHT"),xtype:"numberfield"},{name:"rowfullheight",flex:1,xtype:"checkbox",boxLabel:IRm$.r1("L_FULL_HEIGHT")}]},{xtype:"checkbox",name:"checkbuttonhor",fieldLabel:IRm$.r1("L_FLT_CHECK_LAYOUT"),boxLabel:IRm$.r1("L_HORIZONTAL")}]},{xtype:"fieldset",title:IRm$.r1("L_SLIDER_OPTIONS"),name:"s1",hidden:!0,layout:"anchor",items:[{xtype:"textfield",name:"s1a",fieldLabel:IRm$.r1("L_MINIMUM")},{xtype:"textfield",name:"s1b",fieldLabel:IRm$.r1("L_MAXIMUM")},{xtype:"textfield",name:"s1c",fieldLabel:IRm$.r1("L_STEP_INCREASE")}]},{xtype:"fieldset",title:IRm$.r1("L_DATETIME_SETUP"),name:"bfM",hidden:!0,layout:"anchor",items:[{xtype:"combobox",queryMode:"local",fieldLabel:IRm$.r1("L_FLT_DT_SEL_TYP"),editable:!1,name:"dateseltype",store:{fields:["name","value"],data:[{name:"Select Date",value:"date"},{name:"Select Month",value:"month"},{name:"Select Year",value:"year"}]},displayField:"name",valueField:"value"},{xtype:"textfield",fieldLabel:IRm$.r1("L_FLT_YEAR_FR"),name:"yearfrom"},{xtype:"textfield",fieldLabel:IRm$.r1("L_FLT_YEAR_TO"),name:"yearto"}]},{xtype:"fieldset",name:"periodset",title:IRm$.r1("L_PERIOD_SETUP"),layout:"anchor",hidden:i||o,defaults:{anchor:"100%"},items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_FLT_SHOW_DT_SEL"),boxLabel:IRm$.r1("B_SHOW"),name:"showperiodselector"},{xtype:"textfield",fieldLabel:IRm$.r1("L_FLT_DT_START"),name:"startdate"},{xtype:"textfield",fieldLabel:IRm$.r1("L_FLT_DT_END"),name:"enddate"},{xtype:"gridpanel",name:"periodlist",height:200,store:{xtype:"store",fields:["name","value","selected","isdefault"]},tbar:[{text:IRm$.r1("L_SEL_ALL"),handler:function(){var e,t=this.down("[name=periodlist]").store;for(e=0;e<t.data.items.length;e++)t.data.items[e].set("selected",!0)},scope:this}],columns:[{xtype:"checkcolumn",text:IRm$.r1("B_SHOW"),width:40,dataIndex:"selected"},{xtype:"checkcolumn",text:IRm$.r1("B_DEFAULT"),width:50,dataIndex:"isdefault"},{xtype:"gridcolumn",text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name"}],listeners:{headerclick:function(e,t,a,l,i){}}}]},{xtype:"fieldset",title:IRm$.r1("L_VALUESET_OPTIONS"),hidden:"valueset"!=a,layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",name:"f_valueset_force",fieldLabel:IRm$.r1("L_FLT_VS_FORCE"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",name:"f_valueset_expand",fieldLabel:IRm$.r1("L_FLT_VS_EXP"),boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldset",title:IRm$.r1("L_EXTRA_OPTIONS"),hidden:"valueset"==a,layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",fieldLabel:IRm$.r1("L_FLT_INV_JS"),name:"invokejs"},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),handler:function(){var e,t,a=ig$.report_script$,l=[];if(a)for(t in a)(e=a[t]).handler&&"filter_validate"==e.type&&l.push({name:e.name||t,value:t});IG$.show_tmpl_hlp(this,"invokejs","invokejs",!1,l)},scope:this}]},{xtype:"textfield",fieldLabel:IRm$.r1("L_FLT_SHOW_WHEN"),name:"showcondition"},{xtype:"textarea",fieldLabel:IRm$.r1("L_PROMPT_VALUES"),name:"pvalues"},{xtype:"checkbox",fieldLabel:IRm$.r1("L_FLT_PROPAGATION"),name:"propagation",boxLabel:IRm$.r1("B_ENABLED")}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.dynFilterConfig.superclass.initComponent.apply(this,arguments)}}),IG$.drill_config=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:600,callback:null,init_f:function(){var e,t,a,l,i,n=this,o=n.sop.model,d=n.rec,s=n.down("[name=dp1]"),m=n.down("[name=dp2]"),r=[],c=[],p=d.get("titem"),u={},_=0,L=0,b=d.get("tparams"),h=d.get("isparameter"),f={};if(o){if(p&&"none"!=p)for(e=p.split(";"),i=0;i<e.length;i++)e[i]&&(u[e[i]]=1);if(b&&"none"!=b)for(e=b.split(";"),i=0;i<e.length;i++)e[i]&&(f[e[i]]=1);if(n.down("[name=isparameter]").setValue(h),"FILTER"==o.objtype)for(i=0;i<o.filter_items.length;i++)(a={uid:(l=o.filter_items[i]).fuid,name:l.name,sel:!!f[l.fuid]}).sel&&(L=1),c.push(a);else{for(i=0;i<o.rows.length;i++)t={uid:(l=o.rows[i]).uid,name:l.name,sel:!!u[l.uid]},a={uid:l.uid,name:l.name,sel:!!f[l.uid]},t.sel&&(_=1),a.sel&&(L=1),r.push(t),c.push(a);if("M_PIVOT"==o.dataquerymode){for(i=0;i<o.cols.length;i++)t={uid:o.cols[i].uid,name:o.cols[i].name,sel:!!u[o.cols[i].uid]},a={uid:o.cols[i].uid,name:o.cols[i].name,sel:!!f[o.cols[i].uid]},t.sel&&(_=1),a.sel&&(L=1),r.push(t),c.push(a);for(i=0;i<o.measures.length;i++)(t={uid:o.measures[i].uid,name:o.measures[i].name,sel:!!u[o.measures[i].uid]}).sel&&(_=1),r.push(t)}}}if(!_&&"none"!=p)for(i=0;i<r.length;i++)r[i].sel=!0;if(!L&&"none"!=b)for(i=0;i<c.length;i++)c[i].sel=!0;s.store.loadData(r),m.store.loadData(c)},_confirm:function(){var e,t,a=this,l=a.rec,i=a.down("[name=dp1]"),n=a.down("[name=dp2]"),o=[],d=[],s=0,m=0;for(t=0;t<i.store.data.items.length;t++)(e=i.store.data.items[t]).get("sel")?o.push(e.get("uid")):s=1;for(t=0;t<n.store.data.items.length;t++)(e=n.store.data.items[t]).get("sel")?d.push(e.get("uid")):m=1;s?i.store.data.items.length&&0==o.length&&(o=["none"]):o=[],m?n.store.data.items.length&&0==d.length&&(d=["none"]):d=[],l.set("titem",o.length?o.join(";"):null),l.set("tparams",d.length?d.join(";"):null),l.set("isparameter",a.down("[name=isparameter]").getValue()),a.close()},initComponent:function(){var e=this;$s.apply(this,{title:IRm$.r1("T_DRILL_CONFIG"),padding:ig$.padding,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},bodyBorder:!1,padding:ig$.padding,items:[{xtype:"fieldset",title:IRm$.r1("L_DRILL_ON"),hidden:e.sop&&e.sop.model&&"FILTER"==e.sop.model.objtype,flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"dp1",flex:1,store:{fields:["name","uid","sel"]},columns:[{xtype:"checkcolumn",dataIndex:"sel",width:50},{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1}]},{xtype:"displayfield",value:IRm$.r1("L_DRILL_ON_DESC"),autowidth:!1}]},{xtype:"fieldset",title:IRm$.r1("L_DRILL_PARAM"),flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"dp2",flex:1,store:{fields:["name","uid","sel"]},columns:[{xtype:"checkcolumn",dataIndex:"sel",width:50},{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1}]},{xtype:"displayfield",value:IRm$.r1("L_DRILL_PARAM_DESC"),autowidth:!1}]},{xtype:"checkbox",fieldLabel:IRm$.r1("L_IS_PARAM"),name:"isparameter",boxLabel:IRm$.r1("L_USE_VALUE_AS_PARAM")}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.drill_config.superclass.initComponent.apply(this,arguments)}});
IG$.burst_config=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:450,callback:null,init_f:function(){var e=this,t=(e.reportoption&&e.reportoption._mc,e.sheetoption.model),i=(t.dataquerymode,["rows"]),o=e.down("[name=email_field]"),n=[];t.formbuilder=t.formbuilder||IG$.formViewerDefault,$.each(i,(function(e,i){var o,l,s=t[i];if(s)for(o=0;o<s.length;o++)(l=IG$.copyObject(s[o])).iconcls=IG$.get_metatype_icon(l.type.toLowerCase(),l),n.push(l)})),o.store.loadData(n),e.setAllValues(t.formbuilder)},_confirm:function(){var e,t,i=this.down("[name=email_field]").getSelectionModel().selected,o=[];for(t=0;t<i.length;t++)e=i.items[t],o.push(e.get("uid"));this.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("T_BURST_CONFIG"),items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},bodyBorder:!1,padding:ig$.padding,items:[{xtype:"fieldset",title:IRm$.r1("L_BURST_EMAIL"),flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"email_field",flex:1,store:{fields:["name","uid"]},selModel:{mode:"SINGLE",checkSelector:".x-grid-cell"},selType:"checkboxmodel",columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.burst_config.superclass.initComponent.apply(this,arguments)}});
IG$.sheetobj=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!0,width:600,height:570,sheetindex:-1,init_f:function(){var e=this,t=e.down("[name=sheetobj_panel]");$s.apply(t,{instance:e.instance,dzone:e.dzone,sheets:e.sheets,reportoption:e.reportoption,isnewobject:e.isnewobject,objtype:e.objtype,callback:e.callback}),t.init_f()},_confirm:function(e){this.down("[name=sheetobj_panel]")._confirm(e)&&!e&&this.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_WIDGET_OPTION"),items:[new IG$.sheetobj_panel({instance:this.instance,name:"sheetobj_panel",viewmode:"window"})],buttons:[{text:IRm$.r1("B_APPLY"),hidden:this.isnewobject,handler:function(){this._confirm(1)},scope:this},"-",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.sheetobj.superclass.initComponent.apply(this,arguments)}}),IG$.sheetobj_panel=$s.extend($s.panel,{layout:"fit",sheetindex:-1,pffi_items:["operator","name","objectid","nodepath","uid","objtype","title","type","isnecessary","description","defaultvalue","initial_values","objmerge","useprompt","showallvalue","hfilter","valueformat","aname","showpopup","caseinsensitive","rangevalue","label","rangelabel","smode","crowindex","start_row","merge_left","compcss","dateseltype","yearfrom","yearto","startdate","invokejs","colspan","showcondition","pvalues","useprevcont","showperiodselector","tabid","s1a","s1b","s1c","codemapping","f_uid","periodlist","fuid","checkbuttonhor","options"],_prepTxtEx:function(){var e=IG$._txtWm,t=this.down("[name=texhtml]"),a=this.down("[name=texjs]"),i=[{name:"Select",value:""}],l=[{name:"Select",value:""}];e&&($.each(e.sample_html,(function(e,t){i.push({name:t.name,value:t.name})})),$.each(e.sample_js,(function(e,t){l.push({name:t.name,value:t.name})}))),t.store.loadData(i),a.store.loadData(l),t.setValue(""),a.setValue("")},_add_tex:function(){var e,t,a=this,i=IG$._txtWm,l=a.down("[name=texhtml]"),n=a.down("[name=texjs]"),o=a.reportoption._mc;if(l.clearInvalid(),l.getValue()){if($.each(i.sample_html,(function(t,a){if(a.name==l.getValue())return e=a,!1})),$.each(i.sample_js,(function(e,a){if(a.name==n.getValue())return t=a,!1})),e){var s=new IG$.sheetTWc({instance:a.instance,dhtml:e,djs:t,rop:o,callback:new IG$.callBackObj(a,(function(e,t){var i=a.down("[name=tcontent]"),l=a.down("[name=tjscript]"),n=i.getValue(),o=l.getValue();n+="\n"+e,i.setValue(n),t&&(o+="\n"+t,l.setValue(o))}))});IG$.checkLogin(a,s)}}else l.markInvalid(IRm$.r1("B_REQ"))},init_f:function(){var e,t,a,i,l,n,o,s,r,d,_,m,p,c,h,f,u,b=this,x=b.dzone,y=[],g={},I=b.sheets,L=b.reportoption._mc,w=b.sheetoption,E=[],R=[],v=b.down("[name=cubeuid]"),T=b.down("[name=cubeuid_flt]"),B=b.down("[name=tcontent]"),V=b.down("[name=tjscript]"),A=b.down("[name=grd_detail_spec]");ig$.sheet_toolbar$;if(b.isnewobject&&("SHEET"!=b.objtype?b.sheetoption=w=new IG$.sheetfiltercomp(null):b.sheetoption=w=new IG$.clReport(null,L.itemtype,!1)),l=w.model,b.isnewobject&&!w&&("SHEET"!=b.objtype?b.sheetoption=w=new IG$.sheetfiltercomp(null):(b.sheetoption=w=new IG$.clReport(null,L.itemtype,!1),w.model.panelheight=400),(l=w.model).objtype=b.objtype,"FILTER"==b.objtype&&void 0===l.edrill&&(l.edrill=!0)),L&&L.cube_objects){for(e=0;e<L.cube_objects.length;e++)n=L.cube_objects[e],E.push({uid:n.uid,name:n.name,locale_name:n.locale_name,type:n.type,nodepath:n.nodepath}),R.push({uid:n.uid,name:n.name,locale_name:n.locale_name,type:n.type,nodepath:n.nodepath});v.store.loadData(E),T.store.loadData(R),l.cube_object&&l.cube_object.uid?(v.setValue(l.cube_object.uid),T.setValue(l.cube_object.uid)):1==L.cube_objects.length&&(v.setValue(L.cube_objects[0].uid),T.setValue(L.cube_objects[0].uid))}if(l.fl_en_width||l.fl_en_left||l.fl_en_right||(l.fl_en_width=!0,l.fl_en_left=!0,l.fl_width=l.fl_width||"300",l.fl_left=l.fl_left||"10",l.fl_right=l.fl_right||"10"),l.fl_en_height||l.fl_en_top||l.fl_en_bottom||(l.fl_en_height=!0,l.fl_en_top=!0,l.fl_height=l.fl_height||"400",l.fl_top=l.fl_top||"10"),void 0===l.fl_moveable&&(l.fl_moveable=!0,l.fl_resizable=!0),b.down("[name=p_general]").setAllValues(l),b.down("[name=opt_tab]").setAllValues(l),b.down("[name=opt_report]").setAllValues(l),b.down("[name=opt_text]").setAllValues(l),b.down("[name=opt_viewer]").setAllValues(l),b.down("[name=opt_fviewer]").setAllValues(l),b.down("[name=opt_filter]").setAllValues(l.filter_options),b.down("[name=pnldetail]").setAllValues(l),b.down("[name=opt_panel]").setAllValues(l),b._fl_en=!0,b.down("[name=edrill]").setValue(l.edrill),b.down("[name=enablecache]").setValue(l.enablecache||""),1!=b.createMode&&(t="SHEET"==l.objtype?l.layoutinfo.docid:l.docid,(a=x.getBox(t))&&(b.down("[name=panelwidth]").setValue(a.width||100),b.down("[name=panelheight]").setValue(a.height||100)),0==b.sheetindex&&(l.name=l.name||""),b.down("[name=docid]").setValue(t),b.objtype||(b.objtype=l.objtype||"SHEET")),I){if(i=l.filter_options?l.filter_options.drilltarget:null)for(e=0;e<i.length;e++)p=(c=i[e]).sid,u=c.usedrill,h=c.item,f=c.params,g[p]={isdrill:u,dtitem:h,dparams:f,isparameter:c.isparameter};for(e=0;e<I.length;e++)(c=g["sheet_"+e]||null)||(c=g[I[e].sheet_id]||null),l&&"SHEET"==l.objtype&&I[e].sheetoption==w||y.push({type:"sheet",sid:I[e].sheet_id,title:I[e].sheetoption.model.name||"No title",name:I[e].sheet_id,sheetindex:I[e].sheet_id,reportname:L?L.name:"",usedrill:l.edrill||!!c&&c.isdrill,titem:c?c.dtitem:null,tparams:c?c.dparams:null,isparameter:!!c&&c.isparameter});if(x)for(k in m=x.docitems)if(r=(o=m[k].lt.ubody).view,"RPT_VIEW"==o.objtype){if(r&&r.irpt)for(e=0;e<r.irpt.sheets.length;e++)_=(s=r.irpt.sheets[e]).reportoption,d=s.sheetoption,(c=g[_.uid+"_sheet_"+e]||null)||(c=g[_.uid+"_"+s.sheet_id]||null),y.push({type:"sheet",sid:_.uid+"_"+s.sheet_id,title:d.model.name||"No title",name:"sheet_"+e,sheetindex:s.sheet_id,reportname:_?_.name:"",usedrill:l.edrill||!!c&&c.isdrill,titem:c?c.dtitem:null,tparams:c?c.dparams:null,isparameter:!!c&&c.isparameter})}else if("FILTER"==o.objtype){if(l&&"FILTER"==l.objtype&&r.sheetoption==w)continue;c=g[r.docid]||null,y.push({type:"filter",title:r.sheetoption.name||"No title",sid:o.docid,name:o.docid,reportname:L?L.name:"",usedrill:l.edrill||!!c&&c.isdrill,titem:c?c.dtitem:null,tparams:c?c.dparams:null,isparameter:!!c&&c.isparameter})}A.store.loadData(y)}if(b.filter_items=[],l.objtype)if("FILTER"==l.objtype){l.filter_items&&$.each(l.filter_items,(function(e,t){var a={};$.each(b.pffi_items,(function(e,i){a[i]=t[i]})),a.options=a.options||{},"button"==a.objtype&&(a.title=a.options.text||""),a.title=a.title||a.name,a.operator="button"==a.objtype?"":a.operator||"EQ",b.filter_items.push(a)}));var N=b.down("[name=filteritems]"),j=b.filter_items,O=l.filter_options,D=[],S=b.down("[name=f_bx_sheets]"),C={};if(O){if(O.f_t_dir=O.f_t_dir||"left",b.setAllValues(O),O.f_bx_sheets)for(e=0;e<O.f_bx_sheets.length;e++)C[O.f_bx_sheets[e]]=1}else b.down("[name=f_bx_name]").setValue("{L_D_EXCEL}");for(e=0;e<y.length;e++)(C[y[e].sid]||O&&O.f_bx_all_sheets)&&(y[e].sel_bx=!0);for(S.store.loadData(y),e=0;e<j.length;e++)G=j[e],D.push(G),G.f_uid=G.f_uid||"f_"+ ++b.f_uid;N.store.loadData(D)}else if("RPT_VIEW"==l.objtype)l.rptoption=l.rptoption||{},b.down("[name=rpt_name]").setValue(l.rptoption.name||"");else if("FB_VIEW"==l.objtype)l.formbuilder=l.formbuilder||{},l.formbuilder.item&&b.down("[name=fb_name]").setValue(l.formbuilder.item.name||"");else if("TEXT"==l.objtype)IG$._txtWm?b._prepTxtEx():IG$.lDF("./data/text_widget_samples.json",new IG$.callBackObj(b,(function(e){IG$._txtWm=e,b._prepTxtEx()}))),B.setValue(Base64.decode(l.content||"")),V.setValue(Base64.decode(l.jscript)||'console.log("text widget dynamic script loader");\n//parameter: owner, html');else if("SHEET"==l.objtype){var G;j=l.detailview,D=[];for(e=0;e<j.length;e++)G=j[e],D.push({name:G.name,uid:G.uid,type:G.type,nodepath:G.nodepath,showintab:G.showintab,titem:G.titem,tparams:G.tparams,isparameter:G.isparameter});b.down("[name=detailgrid]").store.loadData(D)}else if(("PANEL"==l.objtype||"TAB"==l.objtype)&&("PANEL"==l.objtype&&b.down("[name=playout]").setValue(l.playout||"V"),b.dzone)){t=l.docid;D=[],b.dzone.getBox(t);var P,F=b.dzone.docitems[t];P=l.tab_option?l.tab_option:l.tab_option={},b.down("[name=showtab]").setValue("F"!=P.showtab),F&&F.children.length&&(b.get_child(F.children,D),b.down("[name=childoption]").store.loadData(D),b.down("[name=subtabs]").store.loadData(D))}b.changeObjectType(),setTimeout((function(){b.down("[name=name]").focus()}),10)},get_child:function(e,t){var a,i,l;for(a=0;a<e.length;a++)"_dc"!=e[a].objtype?(l={name:(i=e[a].lt.ubody).title,docid:i.docid,width:i.width,height:i.height,position:i.position,fixed_width:i.fixed_width,fixed_height:i.fixed_height,fit_content_h:i.fit_content_h},t.push(l)):e[a].children&&this.get_child(e[a].children,t)},_confirm:function(e){var t,a,i,l,n,o,s,r,d,_,m,p=this,c=p.down("[name=detailgrid]").store,h=p.dzone,f=p.down("[name=filteritems]"),u=p.down("[name=grd_detail_spec]"),b=[],x=(p.reportoption._mc,p.sheetoption),y={},g=p.down("[name=cubeuid]"),I=p.down("[name=cubeuid_flt]");if(y.objtype=p.objtype,p.down("[name=p_general]").getAllValues(y),p.down("[name=opt_tab]").getAllValues(y),p.down("[name=opt_report]").getAllValues(y),p.down("[name=opt_text]").getAllValues(y),p.down("[name=opt_viewer]").getAllValues(y),p.down("[name=opt_fviewer]").getAllValues(y),p.down("[name=pnldetail]").getAllValues(y),p.down("[name=opt_panel]").getAllValues(y),y.edrill=p.down("[name=edrill]").getValue(),y.tcontent=p.down("[name=tcontent]").getValue(),y.tjscript=p.down("[name=tjscript]").getValue(),d=x.model=x.model||{},u.store.data.items.length>0)for(m=u.store.data.items,l=0;l<m.length;l++)r={type:(i=m[l]).get("type"),sid:i.get("sid"),usedrill:i.get("usedrill"),item:i.get("titem"),params:i.get("tparams"),isparameter:i.get("isparameter")},b.push(r);if(d.tab_option&&(d.tab_option.showtab=1==p.down("[name=showtab]").getValue()?"T":"F"),d.filter_items=d.filter_items||[],p.filter_items){for(d.filter_options={},p.down("[name=opt_filter]").getAllValues(d.filter_options),d.filter_options.drilltarget=b,d.filter_options.f_bx_sheets=[],_=d.filter_options.f_bx_sheets,m=p.down("[name=f_bx_sheets]").store.data.items,l=0;l<m.length;l++)m[l].get("sel_bx")&&_.push(m[l].get("sid"));d.filter_options.f_b_row=Math.min(d.filter_options.f_b_row,d.filter_options.f_r_size-1),d.filter_items=[],m=f.store.data.items;var L={};for(l=0;l<m.length;l++)o=m[l],n={},$.each(p.pffi_items,(function(e,t){n[t]=o.get(t)})),"button"==n.objtype&&n.options.action&&(L[n.options.action]=n),d.filter_items.push(n);L.f_bx?L.f_bx.options.text=d.filter_options.f_bx_name:L.updateFilterValues&&(L.updateFilterValues.options.text=d.filter_options.buttonname)}if(a="SHEET"==d.objtype?d.layoutinfo.docid:x.docid,x.changetype=d.objtype!=y.objtype?d.objtype:null,d.objtype=y.objtype,"SHEET"==d.objtype){d.layoutinfo.docid=a;var w=g.getValue();for(l=0;l<g.store.data.items.length;l++)if(w==g.store.data.items[l].data.uid){E=g.store.data.items[l];break}d.cube_object=E?{uid:E.get("uid"),name:E.get("name"),type:E.get("type")}:null}else{if("FILTER"==d.objtype){var E;w=I.getValue();for(l=0;l<I.store.data.items.length;l++)if(w==I.store.data.items[l].data.uid){E=I.store.data.items[l];break}d.cube_object=E?{uid:E.get("uid"),name:E.get("name"),type:E.get("type")}:null}d.docid=a}if(x.name=y.name,IG$.apply(d,y,(function(e){var t=!1;return IG$.testVal("hidetitle|isdistinct|autorefresh|hide_progress|refresh_timer|openload|enablecache|columnfill|hidemenu|gs_bs_brd_col|tb_formview|drilltarget|edrill|enablecache|viewchange|toolbutton|fixed_width|fixed_height|fit_content_h|panel_css|is_float|panelwidth|panelheight|tb_bursting|tb_vch|tb_prt_grd2|tb_prt|tb_pivot|tb_chart|tb_ml_learn|hide_maximize|rpt_evt_load|rpt_evt_click|rpt_evt_dblclick",e)&&(t=!0),t}),!0),d.name=y.name,d.content=Base64.encode(y.tcontent),d.jscript=Base64.encode(y.tjscript),p._sel_rpt_item&&(d.rptoption=p._sel_rpt_item),p._sel_fb_item&&(d.formbuilder={},d.formbuilder.item=p._sel_fb_item),"SHEET"==d.objtype)for(d.detailview=[],l=0;l<c.data.items.length;l++)t=c.data.items[l],d.detailview.push({uid:t.get("uid"),name:t.get("name"),nodepath:t.get("nodepath"),sheetindex:t.get("sheetindex"),sheetname:t.get("sheetname"),showintab:t.get("showintab"),titem:t.get("titem"),tparams:t.get("tparams"),isparameter:t.get("isparameter")});if(1!=p.createMode&&(s=h.getBox(a)),s){s.width=d.panelwidth,s.height=d.panelheight,s.fixed_width=d.fixed_width,s.fixed_height=d.fixed_height,s.fit_content_h=d.fit_content_h,s.panel_css=d.panel_css,s.is_float=d.is_float,s.fl_moveable=d.fl_moveable,s.fl_resizable=d.fl_resizable,s.hide_maximize=d.hide_maximize,s.fl_collapsed=d.fl_collapsed,s.fl_collapsible=d.fl_collapsible,s.fl_collapse_css=d.fl_collapse_css;var R,v,T=s.position;if(s.parent)for("TAB"==s.parent.objtype&&s.parent.view&&s.parent.view.validateItems(),l=0;l<s.parent.children.length;l++)(T==(R=(v=s.parent.children[l]).position)||"east"==T&&"west"==R||"west"==T&&"east"==R)&&(v.height=s.height);"TAB"==d.objtype&&s.view&&s.view.validateItems(),h.updateDisplay()}return p.callback&&p.callback.execute(p),!0},changeObjectType:function(){var e=this,t=e.down("[name=_ac_]"),a=e.objtype||"SHEET",i=e.down("[name=detailview]");1==e.createMode?(e.setTabVisible(e.down("[name=opt_report]"),!1),e.setTabVisible(e.down("[name=opt_filter]"),!0),e.setTabVisible(e.down("[name=opt_text]"),!1),e.setTabVisible(e.down("[name=opt_viewer]"),!1),e.setTabVisible(e.down("[name=opt_fviewer]"),!1),e.setTabVisible(i,!1),t.hide(),e.setTabVisible(e.down("[name=opt_panel]"),!1),e.setTabVisible(e.down("[name=opt_tab]"),!1),e.setTabVisible(e.down("[name=pnldetail]"),!1),e.down("[name=__tab]").getLayout().setActiveItem(e._tc.opt_filter)):(e.setTabVisible(e.down("[name=opt_report]"),"SHEET"==a),e.down("[name=opt_tbar]").setVisible("SHEET"==a||"FILTER"==a),e.down("[name=tb_vch]").setVisible("SHEET"==a),e.down("[name=tb_fviewcnt]").setVisible(ig$.features&&!1===ig$.features.ig_r_bursting&&"SHEET"==a),e.setTabVisible(e.down("[name=opt_filter]"),"FILTER"==a),e.setTabVisible(e.down("[name=opt_text]"),"TEXT"==a),e.setTabVisible(e.down("[name=opt_viewer]"),"RPT_VIEW"==a),e.setTabVisible(e.down("[name=opt_fviewer]"),"FB_VIEW"==a),e.setTabVisible(i,"SHEET"==a),("SHEET"==a||"FILTER"==a)&&t.show(),e.setTabVisible(e.down("[name=opt_panel]"),"PANEL"==a),e.setTabVisible(e.down("[name=opt_tab]"),"TAB"==a),e.setTabVisible(e.down("[name=pnldetail]"),"SHEET"==a||"FILTER"==a),e.down("[name=fit_content_h]").setVisible("FILTER"==a))},setTabVisible:function(e,t){e.tab&&e.tab[t?"show":"hide"](),!e.tab&&e.setVisible(t)},configFilterItem:function(e,t){var a,i=this,l=i.getFilterItem(e);a=new IG$.dynFilterConfig({instance:i.instance,meta_type:i.meta_type,filter_options:i.sheetoption.model.filter_options,pitem:{model:l},dzone:i.dzone,callback:new IG$.callBackObj(i,i.rconfigFilterItem,[l,e])}),IG$.showDlg(i,a)},rconfigFilterItem:function(e){var t=e[0],a=e[1],i=this.down("[name=filteritems]").store.data.items[a];$.each(t,(function(e,t){"id"!=e&&i.set(e,t)}))},removeFilterItem:function(e,t){var a,i,l=this,n=l.filter_items,o=l.down("[name=filteritems]"),s=o.store.data.items[e],r=s.get("f_uid");for(o.store.remove(s),a=0;a<n.length;a++)if((i=n[a]).f_uid==r){"button"==i.objtype&&l.down("[name=showbutton]").setValue(!1),n.splice(a,1);break}},addDetailView:function(){var e=new IG$.metaSelectDlg({instance:this.instance,visibleItems:"folder;report",tree_options:{cubebrowse:!1},callback:new IG$.callBackObj(this,(function(e){var t={uid:e.uid,name:e.name,nodepath:e.nodepath,type:e.type};this.down("[name=detailgrid]").store.add(t)}))});IG$.checkLogin(this,e)},getFilterItem:function(e){var t,a=this.down("[name=filteritems]").getStore(),i=this.filter_items,l=a.data.items[e].get("f_uid");for(t=0;t<i.length;t++)if(i[t].f_uid==l)return i[t];return null},gen_uid:function(){var e,t,a=this,i={},l=a.down("[name=filteritems]").getStore();for(e=0;e<l.data.items.length;e++)i[l.data.items[e].get("f_uid")]=1;for(t="f_"+ ++a.f_uid;i[t];)t="f_"+ ++a.f_uid;return t},configureDrill:function(e){var t=this,a=t.sheetoption,i=new IG$.drill_config({instance:t.instance,sop:a,rec:e});IG$.showDlg(t,i)},showBurstingOption:function(){var e=this,t=(e.sheetoption,new IG$.burst_config({instance:e.instance,sheetoption:e.sheetoption,reportoption:e.reportoption}));IG$.showDlg(e,t)},_btn_proc:function(e,t){var a,i,l,n=this,o=n.filter_items,s=n.down("[name=filteritems]");if(o){switch(e){case"showbutton":i="buttonname",l="updateFilterValues";break;case"f_bx_enable":i="f_bx_name",l="f_bx"}if($.each(o,(function(e,i){if("button"==i.objtype&&i.options.action==l)return t?a=1:(o.splice(e,1),$.each(s.store.data.items,(function(e,t){if(t.data.f_uid==i.f_uid)return s.store.remove(t),!1}))),!1})),!a&&t){var r={objtype:"button",f_uid:"f_"+ ++n.f_uid,options:{text:n.down("[name="+i+"]").getValue(),action:l}};r.title="Button - "+r.options.text,o.push(r),s.store.add(r)}}},_add_widget:function(e){var t,a,i,l=this,n=l.down("[name=filteritems]").getStore(),o={},s=0;for(t=0;t<n.data.items.length;t++)o[n.data.items[t].get("name")]=1;for(a=e+"_"+s;o[a];)a=e+"_"+ ++s;i={name:a,type:e,selected:!1,operator:"",title:"",objtype:e,f_uid:l.gen_uid()},l.filter_items.push(i),n.add(i)},initComponent:function(){var e,t=this,a=160,i=[{name:"Equal",value:"EQ"},{name:"Not Equal",value:"NE"},{name:"In",value:"IN"},{name:"Greater or Equal",value:"GTE"},{name:"Less or Equal",value:"LTE"},{name:"Greater",value:"GT"},{name:"Lesser",value:"LT"},{name:"Like",value:"LIKE"},{name:"Between",value:"BETWEEN"},{name:"Not In",value:"NOTIN"}],l={},n=[],o=ig$.button_css;for(e=0;e<i.length;e++)l[i[e].value]=i[e].name;if(o&&o.length)for(n.push({name:IRm$.r1("B_SELECT"),value:""}),e=0;e<o.length;e++)n.push(o[e]);else n=[{name:IRm$.r1("B_SELECT"),value:""},{name:"pdf_1",value:"exp_pdf_1"},{name:"word_1",value:"exp_word_1"},{name:"word_2",value:"exp_word_2"},{name:"word_3",value:"exp_word_3"},{name:"word_4",value:"exp_word_4"},{name:"word_5",value:"exp_word_5"},{name:"word_6",value:"exp_word_6"},{name:"word_7",value:"exp_word_7"},{name:"ppt_1",value:"exp_ppt_1"},{name:"ppt_2",value:"exp_ppt_2"},{name:"ppt_3",value:"exp_ppt_3"},{name:"ppt_4",value:"exp_ppt_4"},{name:"excel_1",value:"exp_excel_1"},{name:"excel_2",value:"exp_excel_2"},{name:"csv",value:"idv-dk-btn-e-csv"},{name:"office",value:"idv-dk-btn-e-xls"}];t.f_uid=0,$s.apply(this,{items:[{xtype:"window"==t.viewmode?"tabpanel":"panel",deferredRender:!1,autoScroll:!1,name:"__tab",defaults:{bodyPadding:ig$.padding},layout:"window"!=t.viewmode?"card":null,items:[{xtype:"panel",title:IRm$.r1("B_GENERAL"),autoScroll:!0,layout:"anchor",name:"p_general",bodyBorder:!1,hidden:1==t.createMode,defaults:{labelWidth:a,anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("B_GENERAL"),layout:{type:"vbox",align:"stretch"},items:[{name:"docid",fieldLabel:IRm$.r1("L_COMP_ID"),xtype:"textfield",readOnly:!0},{name:"name",fieldLabel:IRm$.r1("B_NAME"),xtype:"textfield"}]},{xtype:"fieldset",title:IRm$.r1("B_OPT_LAYOUT"),layout:{type:"vbox",align:"stretch"},items:[{name:"hidetitle",fieldLabel:IRm$.r1("L_HIDE_TITLE"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"hide_maximize",fieldLabel:IRm$.r1("L_HIDE_MAX"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{xtype:"fieldcontainer",layout:"hbox",items:[{fieldLabel:IRm$.r1("L_PANEL_W"),name:"panelwidth",xtype:"numberfield",min:50,max:3e3,value:200},{name:"fixed_width",xtype:"checkbox",boxLabel:IRm$.r1("L_FIXED_W"),checked:!1},{xtype:"container",flex:1}]},{xtype:"fieldcontainer",layout:"hbox",items:[{fieldLabel:IRm$.r1("L_PANEL_H"),name:"panelheight",xtype:"numberfield",min:50,max:3e3,value:200},{name:"fixed_height",xtype:"checkbox",boxLabel:IRm$.r1("L_FIXED_H"),checked:!1,listeners:{change:function(e,t,a){this.down("[name=fit_content_h]").setDisabled(!t)},scope:this}},{name:"fit_content_h",hidden:!0,xtype:"checkbox",boxLabel:"Fit Content",checked:!1,listeners:{change:function(e,t){this.down("[name=panelheight]").setDisabled(t)},scope:this}},{xtype:"container",flex:1}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"panel_css",flex:1,fieldLabel:IRm$.r1("L_PANEL_CSS")},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),handler:function(){IG$.show_tmpl_hlp(this,"panel_style","panel_css")},scope:this}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"is_float",fieldLabel:IRm$.r1("L_FLOAT_PANEL"),boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e){this.down("[name=p_flt]").setEnabled(e.getValue())},scope:this}},{xtype:"button",text:IRm$.r1("L_FLOAT_OPTION"),name:"p_flt",handler:function(){var e=this,t=new IG$.wsfopt({instance:e.instance,reportoption:e.reportoption,sheetoption:e.sheetoption,callback:new IG$.callBackObj(e,(function(e,t){}))});IG$.checkLogin(e,t)},scope:this},{xtype:"container",flex:1}]}]},{xtype:"fieldset",title:IRm$.r1("L_OPT_TBAR"),name:"opt_tbar",hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",name:"tb_formview",fieldLabel:IRm$.r1("L_TB_FORM_V"),boxLabel:IRm$.r1("B_ENABLED"),hidden:!ig$.features||!1!==ig$.features.ig_r_formb},{xtype:"container",layout:{type:"hbox",align:"stretch"},name:"tb_fviewcnt",hidden:!ig$.features||!1!==ig$.features.ig_r_bursting,items:[{xtype:"checkbox",name:"tb_bursting",fieldLabel:IRm$.r1("L_EMAIL_BURSTING"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"button",text:IRm$.r1("B_OPTIONS"),handler:function(){t.showBurstingOption()},scope:this},{xtype:"container",flex:1}]},{xtype:"checkbox",name:"tb_vch",fieldLabel:IRm$.r1("L_TB_VCH"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"tb_prt",fieldLabel:IRm$.r1("L_TB_PRT"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"button",text:IRm$.r1("B_OPTIONS"),handler:function(){var e=this,t=new IG$.wseopt({instance:e.instance,reportoption:e.reportoption,sheetoption:e.sheetoption,callback:new IG$.callBackObj(e,(function(e,t){}))});IG$.checkLogin(e,t)},scope:this},{xtype:"container",flex:1}]},{xtype:"checkbox",name:"tb_pivot",fieldLabel:IRm$.r1("L_TB_PIVOT"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",name:"tb_chart",fieldLabel:IRm$.r1("L_TB_CHART"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",name:"tb_ml_learn",fieldLabel:IRm$.r1("L_ML"),hidden:!ig$.features||!1!==ig$.features.ig_ml_learn,boxLabel:IRm$.r1("B_ENABLED")}]}]},{xtype:"panel",title:IRm$.r1("B_PROPERTY"),name:"opt_tab",autoScroll:!0,layout:"anchor",bodyBorder:!1,defaults:{labelWidth:a,anchor:"100%"},items:[{xtype:"checkbox",name:"showtab",fieldLabel:IRm$.r1("L_SHOW_TAB_BAR"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"gridpanel",name:"subtabs",height:120,store:{xtype:"store",fields:[]},columns:[{xtype:"gridcolumn",text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1,editor:{xtype:"textfield",allowBlank:!0}},{xtype:"gridcolumn",text:"docid",dataIndex:"docid"}]}]},{xtype:"panel",title:IRm$.r1("B_PROPERTY"),name:"opt_report",autoScroll:!0,layout:"anchor",bodyPadding:ig$.padding,bodyBorder:!1,defaults:{labelWidth:a,anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_R_RUN_PROP"),defaults:{labelWidth:180},items:[{name:"openload",fieldLabel:IRm$.r1("L_ONLOAD_RUN"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{xtype:"combobox",fieldLabel:IRm$.r1("L_USE_CACHE"),name:"enablecache",valueField:"value",displayField:"name",store:{data:[{name:IRm$.r1("B_DEFAULT"),value:""},{name:IRm$.r1("B_ENABLED"),value:"T"},{name:IRm$.r1("B_DISABLED"),value:"F"}]}},{name:"isdistinct",fieldLabel:IRm$.r1("L_DISTINCT_QUERY"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"autorefresh",fieldLabel:IRm$.r1("L_AUTO_REFRESH"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),inputValue:"T",checked:!1},{name:"refresh_timer",fieldLabel:IRm$.r1("L_REFRESH_CYCLE"),xtype:"numberfield"},{name:"hide_progress",fieldLabel:IRm$.r1("L_HIDE_PROGRESS"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),inputValue:"T",checked:!1}]},{xtype:"fieldset",title:IRm$.r1("L_R_ANAL_CUBE"),layout:"anchor",defaults:{anchor:"100%"},items:[{fieldLabel:IRm$.r1("L_R_ANAL_CUBE_LBL"),name:"cubeuid",xtype:"combobox",editable:!1,queryMode:"local",valueField:"uid",displayField:"name",store:{fields:[]}}]},{xtype:"fieldset",title:IRm$.r1("L_OPT_GRID"),name:"opt_grid",layout:"anchor",defaults:{anchor:"100%",labelWidth:a},items:[{name:"columnfill",fieldLabel:IRm$.r1("L_R_COLUMN_FIT"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{name:"hidemenu",fieldLabel:IRm$.r1("L_GRID_HMENU"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_BASE_BRD_CLR",null,"Base Border"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"gs_bs_brd_col",width:60},{xtype:"splitter"},{xtype:"splitbutton",width:30,menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=gs_bs_brd_col]").setValue("#"+t)},scope:t}},"-"]}}]}]},{xtype:"fieldset",title:IRm$.r1("L_DASHBOARD_OPTION"),layout:"anchor",hidden:!0,defaults:{anchor:"100%"},items:[{name:"viewchange",fieldLabel:IRm$.r1("L_SHOW_VIEW_CHANGE"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")},{name:"toolbutton",fieldLabel:IRm$.r1("L_SHOW_TOOL_BUTTON"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldset",title:IRm$.r1("B_ADVANCED"),layout:"anchor",items:[{xtype:"checkbox",name:"tb_prt_grd2",fieldLabel:IRm$.r1("L_TB_PRT_GRD"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"rpt_evt_load",fieldLabel:IRm$.r1("L_EVT_LOAD")},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),handler:function(){var e,t,a=ig$.report_script$,i=[];if(a)for(t in a)(e=a[t]).handler&&"report_load"==e.type&&i.push({name:e.name||t,value:t});IG$.show_tmpl_hlp(this,"rpt_evt_load","rpt_evt_load",!1,i)},scope:this}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"rpt_evt_click",fieldLabel:IRm$.r1("L_EVT_CLICK")},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),handler:function(){var e,t,a=ig$.report_script$,i=[];if(a)for(t in a)(e=a[t]).handler&&"report_click"==e.type&&i.push({name:e.name||t,value:t});IG$.show_tmpl_hlp(this,"rpt_evt_click","rpt_evt_click",!1,i)},scope:this}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"rpt_evt_dblclick",fieldLabel:IRm$.r1("L_EVT_DBCLK")},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),handler:function(){var e,t,a=ig$.report_script$,i=[];if(a)for(t in a)(e=a[t]).handler&&"report_dblclick"==e.type&&i.push({name:e.name||t,value:t});IG$.show_tmpl_hlp(this,"rpt_evt_dblclick","rpt_evt_dblclick",!1,i)},scope:this}]}]}]},{xtype:"panel",name:"opt_text",title:IRm$.r1("B_PROPERTY"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Examples",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"combobox",name:"texhtml",fieldLabel:"HTML",displayField:"name",valueField:"value",store:{},flex:1,listeners:{change:function(e,t,a){var i=IG$._txtWm,l=this.down("[name=texjs]"),n="";i&&t&&$.each(i.sample_html,(function(e,a){if(a.name==t)return a.jscript&&(n=a.jscript),!1})),l.setValue(n)},scope:this}}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"combobox",name:"texjs",fieldLabel:"Action",displayField:"name",valueField:"value",store:{},flex:1},{xtype:"button",text:IRm$.r1("B_ADD"),handler:function(){t._add_tex()},scope:this}]}]},{xtype:"textarea",popup_editor:!0,name:"tcontent",flex:1,fieldLabel:IRm$.r1("L_HTML")},{xtype:"textarea",popup_editor:!0,name:"tjscript",flex:1,fieldLabel:IRm$.r1("L_JSCRIPT")}]},{xtype:"panel",name:"opt_viewer",title:IRm$.r1("B_PROPERTY"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_RPT_V_OPT"),layout:"anchor",defaults:{anchor:"100%",labelWidth:a},items:[{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_REPORT_PATH"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"rpt_name",emptyText:IRm$.r1("M_SEL_ITEM"),flex:1},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){var e=new IG$.metaSelectDlg({instance:t.instance,visibleItems:"folder;report;",callback:new IG$.callBackObj(this,(function(e){e&&(this._sel_rpt_item=e,this.down("[name=rpt_name]").setValue(e.name))}))});IG$.checkLogin(this,e)},scope:this}]}]}]},{xtype:"panel",name:"opt_fviewer",title:IRm$.r1("B_PROPERTY"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_RPT_V_OPT"),layout:"anchor",defaults:{anchor:"100%",labelWidth:a},items:[{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_REPORT_PATH"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"fb_name",emptyText:IRm$.r1("M_SEL_ITEM"),flex:1},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){var e=new IG$.metaSelectDlg({instance:t.instance,visibleItems:"folder;dashboard;",callback:new IG$.callBackObj(this,(function(e){e&&(this._sel_fb_item=e,this.down("[name=fb_name]").setValue(e.name))}))});IG$.checkLogin(this,e)},scope:this}]}]}]},{xtype:"panel",name:"opt_filter",title:IRm$.r1("B_PROPERTY"),layout:{type:"anchor",anchor:"100%",labelWidth:a},autoScroll:!0,items:[{xtype:"fieldset",title:IRm$.r1("L_FILTER_ITEMS"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1,anchor:"100%",layout:{type:"hbox",align:"stretch"},items:[{xtype:"gridpanel",name:"filteritems",flex:1,height:130,stateful:!1,store:{fields:[]},plugins:{ptype:"cellediting",clicksToEdit:!1},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},columns:[{text:IRm$.r1("B_TITLE"),dataIndex:"title",sortable:!1,hideable:!1,flex:1,editor:{allowBlank:!0}},{text:IRm$.r1("B_NAME"),dataIndex:"name",sortable:!1,hideable:!1,tdCls:"igc-td-link",flex:1},{text:IRm$.r1("B_OP"),dataIndex:"operator",sortable:!1,hideable:!1,width:120,editor:{xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:[],data:i}},renderer:function(e,t,a){return l[e]}},{xtype:"actioncolumn",width:45,items:[{iconCls:"icon-grid-config",tooltip:"Detail Config",handler:function(e,a,i){t.configFilterItem(a,i)}},{iconCls:"icon-grid-delete",tooltip:IRm$.r1("B_REMOVE"),handler:function(e,a,i){t.removeFilterItem(a,i)}}]}],listeners:{cellclick:function(e,t,a,i,l,n){2==a&&this.configFilterItem(l,a)},scope:this}},{xtype:"container",layout:{type:"vbox",align:"stretch",pack:"center"},items:[{xtype:"button",iconCls:"icon-toolbar-moveup",tooltip:"Move Up",handler:function(){var e,t=this.down("[name=filteritems]"),a=t.getStore(),i=t.getSelectionModel().getSelection();i&&i.length>0&&(e=a.indexOf(i[0]))>0&&(a.remove(i[0]),i[0]=a.insert(e-1,i[0]))},scope:this},{xtype:"button",iconCls:"icon-toolbar-movedown",tooltip:"Move Down",handler:function(){var e,t=this.down("[name=filteritems]"),a=t.getStore(),i=t.getSelectionModel().getSelection();i&&i.length>0&&(e=a.indexOf(i[0]))+1<a.data.items.length&&(a.remove(i[0]),i[0]=a.insert(e+1,i[0]))},scope:this}]}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:IRm$.r1("L_WIDGET"),hidden:1==t.createMode,menu:{xtype:"menu",items:[{text:IRm$.r1("FieldSet"),handler:function(){t._add_widget("fieldset")},scope:this},{text:IRm$.r1("Label"),handler:function(){t._add_widget("label")}}]}},{xtype:"button",text:IRm$.r1("L_TAB_SELECTOR"),hidden:1==t.createMode,handler:function(){var e,t,a,i=this,l=i.down("[name=filteritems]").getStore(),n={},o=0;for(e=0;e<l.data.items.length;e++)n[l.data.items[e].get("name")]=1;for(t="viewselector_"+o;n[t];)t="viewselector_"+ ++o;a={name:t,type:"viewselector",selected:!1,operator:"LIKE",objtype:"combobox",f_uid:i.gen_uid()},i.filter_items.push(a),l.add(a)},scope:this},{xtype:"button",text:IRm$.r1("L_PROMPT"),handler:function(){var e,t,a,i=this,l=i.down("[name=filteritems]").getStore(),n={},o=0;for(e=0;e<l.data.items.length;e++)n[l.data.items[e].get("name")]=1;for(t="prompt_"+o;n[t];)t="prompt_"+ ++o;a={name:t,type:"prompt",selected:!1,operator:"LIKE",objtype:"text",f_uid:i.gen_uid()},l.add(a),i.filter_items.push(a)},scope:this},{xtype:"button",text:IRm$.r1("L_VALUE_SET"),handler:function(){var e,t,a=this,i=a.down("[name=filteritems]").getStore();for(e=0;e<i.data.items.length;e++)if("valueset"==i.data.items[e].get("type"))return void IG$.alertmsg(ig$.appname,IRm$.r1("M_VALUESET_EXIST"),null,null,1,"warning");t={name:"Value Set",type:"valueset",selected:!1,operator:"EQ",objtype:"combobox",f_uid:a.gen_uid()},i.add(t),a.filter_items.push(t)},scope:this}]}]},{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},title:IRm$.r1("L_VIEW_OPTIONS"),items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_RUN_BUTTON"),name:"showbutton",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e,t,a,i){var l=this,n=l.down("[name=f_b_evt]"),o=l.down("[name=f_b_trg]"),s=l.down("[name=f_b_trg_all]");l._btn_proc("showbutton",t),n.setDisabled(t),o.setDisabled(!t),s.setDisabled(!t)},scope:this}},{xtype:"textfield",fieldLabel:IRm$.r1("B_TEXT"),labelAlign:"right",name:"buttonname",value:IRm$.r1("L_BTN_SEARCH")},{xtype:"textfield",fieldLabel:IRm$.r1("B_DESC"),name:"f_b_desc"},{xtype:"combobox",editable:!1,fieldLabel:IRm$.r1("L_T_DIR"),name:"f_t_dir",queryMode:"local",valueField:"value",displayField:"name",store:{xtype:"store",fields:[],data:[{name:"Top",value:"top"},{name:"Left",value:"left"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_R_ANAL_CUBE"),layout:"anchor",defaults:{anchor:"100%"},items:[{fieldLabel:IRm$.r1("L_R_ANAL_CUBE_LBL"),name:"cubeuid_flt",xtype:"combobox",editable:!1,queryMode:"local",valueField:"uid",displayField:"name",store:{fields:[]}}]},{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},title:IRm$.r1("L_FILTER_LAYOUT_OPTIONS"),items:[{xtype:"combobox",editable:!1,fieldLabel:IRm$.r1("L_VIEW_MODE"),name:"f_viewtype",queryMode:"local",valueField:"value",displayField:"name",store:{xtype:"store",fields:[],data:[{name:IRm$.r1("B_DEFAULT"),value:""},{name:"Table mode",value:"table"},{name:"Row mode",value:"row"}]},listeners:{change:function(e,t,a,i){var l=this,n=e.getValue();l.down("[name=f_c_size]").setEnabled("table"==n),l.down("[name=f_r_size]").setEnabled("row"==n),l.down("[name=f_b_row]").setEnabled("row"==n)},scope:this}},{xtype:"numberfield",name:"f_c_size",disabled:!0,fieldLabel:IRm$.r1("L_COL_SIZE"),minValue:1,maxValue:10,value:1},{xtype:"numberfield",name:"f_r_size",disabled:!0,fieldLabel:IRm$.r1("L_ROW_SIZE"),minValue:1,maxValue:10,value:1},{xtype:"numberfield",name:"f_b_row",disabled:!0,fieldLabel:IRm$.r1("L_BTN_ROW_ON"),value:0}]},{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},title:IRm$.r1("L_EXCEL_DOWN_OPTIONS"),items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_XLS_BUTTON"),name:"f_bx_enable",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e,a){t._btn_proc("f_bx_enable",a)},scope:this}},{xtype:"textfield",fieldLabel:IRm$.r1("L_XLS_STYLE"),name:"f_bx_css"},{xtype:"textfield",fieldLabel:IRm$.r1("B_TEXT"),labelAlign:"right",name:"f_bx_name",value:IRm$.r1("L_D_EXCEL")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_APPLY_TO_ALL"),name:"f_bx_all_sheets",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e,t){var a,i=this.down("[name=f_bx_sheets]");if(this.down("[name=f_bx_all_sheets]").getValue()){for(a=0;a<i.store.data.items.length;a++)i.store.data.items[a].set("sel_bx",!0);i.setEnabled(!1)}else i.setEnabled(!0)},scope:this}},{xtype:"gridpanel",name:"f_bx_sheets",height:300,store:{},columns:[{xtype:"checkcolumn",text:IRm$.r1("B_SELECT"),dataIndex:"sel_bx",width:80},{text:IRm$.r1("B_NAME"),dataIndex:"name"}]}]},{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},title:IRm$.r1("B_ADVANCED"),items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"f_b_evt",disabled:!1,fieldLabel:IRm$.r1("L_BTN_EVT"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"displayfield",value:IRm$.r1("L_BTN_EVTDESC"),flex:1}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"f_b_trg",disabled:!0,fieldLabel:IRm$.r1("L_BTN_TRG"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"displayfield",value:IRm$.r1("L_BTN_TRGDESC"),flex:1}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"f_b_trg_all",disabled:!0,fieldLabel:IRm$.r1("L_BTN_TRG_ALL"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"displayfield",value:IRm$.r1("L_BTN_TRGALLDESC"),flex:1}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"f_b_scr",fieldLabel:IRm$.r1("L_FLT_VAL_SCR")},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),handler:function(){var e,t,a=ig$.report_script$,i=[];if(a)for(t in a)(e=a[t]).handler&&"filter_exec"==e.type&&i.push({name:e.name||t,value:t});IG$.show_tmpl_hlp(this,"f_b_scr","f_b_scr",!1,i)},scope:this}]},{xtype:"checkbox",name:"f_b_clear",fieldLabel:IRm$.r1("L_CLEAR_FLT"),boxLabel:IRm$.r1("B_ENABLED")}]}]},{xtype:"panel",name:"pnldetail",title:IRm$.r1("L_R_OPT_FILTER"),autoScroll:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",name:"p_dset",title:IRm$.r1("L_R_UPD_TGT"),flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grd_detail_spec",flex:1,$h:200,store:{xtype:"store",fields:[]},columns:[{xtype:"checkcolumn",text:IRm$.r1("L_R_UT_DRILL"),dataIndex:"usedrill",width:50},{text:IRm$.r1("B_NAME"),dataIndex:"title",flex:1},{text:IRm$.r1("B_TYPE"),dataIndex:"type",width:50},{text:IRm$.r1("B_KEY"),dataIndex:"name",flex:1},{text:IRm$.r1("L_REPORT_NAME"),dataIndex:"reportname",flex:1},{text:IRm$.r1("B_INDEX"),dataIndex:"sheetindex"},{xtype:"actioncolumn",name:"_ac_",hidden:!0,width:45,items:[{iconCls:"icon-grid-config",tooltip:"Detail Config",handler:function(e,a,i){var l=e.store.data.items[a];l&&t.configureDrill(l)}}]}],listeners:{checkchange:function(e,t,a,i){var l,n=this.down("[name=grd_detail_spec]"),o=this.down("[name=edrill]"),s=!1,r=n.store;for(l=0;l<r.data.items.length;l++)if(!r.data.items[l].get("usedrill")){s=1;break}s&&o.setValue(!1)},scope:this},tbar:[{name:"edrill",fieldLabel:IRm$.r1("L_EN_DRILL"),xtype:"checkbox",boxLabel:IRm$.r1("B_ENABLED"),checked:!1,listeners:{change:function(e){var t,a=e.getValue(),i=this.down("[name=grd_detail_spec]");if(a)for(t=0;t<i.store.data.items.length;t++)i.store.data.items[t].set("usedrill",a)},scope:this}},{xtype:"displayfield",value:IRm$.r1("L_EN_DRILL_DESC")}],bbar:[{xtype:"displayfield",value:IRm$.r1("L_R_UT_DESC")}]}]},{xtype:"fieldset",title:IRm$.r1("L_R_CMENU"),name:"detailview",hidden:"SHEET"!=t.objtype,flex:1,layout:"fit",items:[{xtype:"gridpanel",name:"detailgrid",minHeight:300,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{xtype:"store",fields:[]},plugins:[{ptype:"cellediting",clicksToEdit:!1}],columns:[{xtype:"gridcolumn",text:IRm$.r1("B_NAME"),dataIndex:"name",editor:{xtype:"textfield",allowBlank:!1}},{xtype:"checkcolumn",text:IRm$.r1("L_R_CM_SHOWTAB"),width:60,dataIndex:"showintab"},{xtype:"gridcolumn",text:IRm$.r1("B_PATH"),dataIndex:"nodepath",flex:1},{xtype:"gridcolumn",text:IRm$.r1("B_SHEET_NAME"),dataIndex:"sheetname",editor:{xtype:"combo",queryMode:"local"}},{xtype:"gridcolumn",text:IRm$.r1("L_SHEET_NUM"),width:50,hidden:!0,dataIndex:"sheetindex",editor:{clickToEdit:!1}},{xtype:"actioncolumn",width:45,items:[{iconCls:"icon-grid-config",tooltip:"Detail Config",handler:function(e,a,i){var l=e.store.data.items[a];l&&t.configureDrill(l)}}]}],tbar:[{xtype:"button",text:IRm$.r1("B_ADD"),handler:function(){this.addDetailView()},scope:this},{xtype:"button",text:IRm$.r1("B_REMOVE"),handler:function(){var e,t=this.down("[name=detailgrid]"),a=t.getSelectionModel().getSelection();if(a.length>0)for(e=a.length-1;e>=0;e--)t.store.remove(a[e])},scope:this},{xtype:"button",text:IRm$.r1("B_MOVE_UP"),handler:function(){var e,t,a=this.down("[name=detailgrid]"),i=a.store,l=a.getSelectionModel().getSelection();l&&1==l.length&&(e=l[0],(t=i.indexOf(e))>0&&(i.removeAt(t),t=i.insert(t-1,t)))},scope:this},{xtype:"button",text:IRm$.r1("B_MOVE_DOWN"),handler:function(){var e,t,a=this.down("[name=detailgrid]"),i=a.store,l=a.getSelectionModel().getSelection();l&&1==l.length&&(e=l[0],(t=i.indexOf(e))+1<i.data.items.length&&(i.removeAt(t),t=i.insert(t+1,t)))},scope:this}]}]}]},{xtype:"panel",title:IRm$.r1("B_PROPERTY"),name:"opt_panel",layout:"anchor",defaults:{labelWidth:a,anchor:"100%"},items:[{xtype:"combobox",name:"playout",fieldLabel:IRm$.r1("L_LAYOUT"),queryMode:"local",hidden:!0,displayField:"name",valueField:"value",editable:!1,store:{fields:[],data:[{name:IRm$.r1("L_VERTICAL"),value:"V"},{name:IRm$.r1("L_HORIZONTAL"),value:"H"},{name:IRm$.r1("L_B_LAYOUT"),value:"B"}]}},{xtype:"gridpanel",name:"childoption",height:120,store:{xtype:"store",fields:[]},columns:[{xtype:"gridcolumn",text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1,editor:{xtype:"textfield",allowBlank:!0}},{xtype:"gridcolumn",text:IRm$.r1("B_ID"),dataIndex:"docid"}]}]}]}]}),IG$.sheetobj_panel.superclass.initComponent.apply(this,arguments)}}),IG$.sheetTWc=$s.extend($s.window,{width:500,height:520,layout:"fit",padding:ig$.padding,_init:function(){var e=this,t=e.dhtml,a=e.djs,i=e.down("[name=toptions]"),l=[];l.push({xtype:"textfield",name:"id",fieldLabel:"Id",required:!0}),e.tsel={},t.parameters&&e._add_ctrl(t.parameters,l),a&&a.parameters&&e._add_ctrl(a.parameters,l),$.each(l,(function(e,t){i.add(t)}))},_add_ctrl:function(e,t){var a=this,i=a.rop;$.each(e,(function(e,l){var n={xtype:"textfield",fieldLabel:l.name,name:l.name,required:l.required};if("bo_selector"==l.xtype){a._ukey=a._ukey||0;var o="ign_mitem_"+a._ukey++;n.xtype="fieldcontainer",n.layout={type:"hbox",align:"stretch"},n.items=[{xtype:"textfield",flex:1,name:o,emptyText:IRm$.r1("M_SEL_ITEM"),required:!0},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){if(i&&i.cube_objects&&i.cube_objects.length){var e=new IG$.metaSelectDlg({instance:a.instance,multiselect:0,visibleItems:"userdb;table;dataset;inlineview;metric;custommetric",tree_options:{cubebrowse:!0,rootuid:i.cube_objects[0].uid},callback:new IG$.callBackObj(a,(function(e){a.tsel[l.name]=e,a.down("[name="+o+"]").setValue(e.name)}))});IG$.checkLogin(a,e)}},scope:this}]}else"combobox"==l.xtype?(n.xtype=l.xtype,n.displayField="name",n.valueField="value",n.store={data:l.data}):n.xtype=l.xtype||"textfield";t.push(n)}))},_confirm:function(e){var t,a,i,l=this;l.down("[name=toptions]").getAllValues(l.tsel)||(t=l.tsel,a=l._proc(l.dhtml.html,t),l.djs&&(i=l._proc(l.djs.jscript,t)),l.callback&&l.callback.execute(a,i),l.close())},_proc:function(e,t){var a=[];return e&&e.length&&$.each(e,(function(e,i){for(var l,n=i,o=n.indexOf("{");o>-1&&(l=n.indexOf("}",o))>-1;){var s=n.substring(o+1,l);if(s.indexOf(".")>-1){var r=s.substring(0,s.indexOf(".")),d=s.substring(s.indexOf(".")+1);t[r]&&(n=n.substring(0,o)+(t[r][d]||"")+n.substring(l+1))}else t[s]&&(n=n.substring(0,o)+t[s]+n.substring(l+1));o=n.indexOf("{",o+1)}a.push(n)})),a.join("\n")},initComponent:function(){$s.apply(this,{title:"Option Values",items:[{xtype:"panel",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Option Values",name:"toptions",layout:{type:"vbox",align:"stretch"},items:[]}]}],buttons:["->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){e._init()}}}),IG$.sheetTWc.superclass.initComponent.call(this)}}),IG$.wsfopt=$s.extend($s.window,{width:500,height:520,layout:"fit",_init:function(){var e=this,t=(e.reportoption,e.sheetoption),a=t?t.model:null,i=e.down("[name=p_flt]");e._fl_en=!0,i.setAllValues(a)},_confirm:function(){var e=this,t=e.sheetoption,a=t?t.model:null;e.down("[name=p_flt]").getAllValues(a),e.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_FLOAT_OPTION"),items:[{xtype:"panel",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_FLOAT_OPTION"),layout:{type:"vbox",align:"stretch"},name:"p_flt",items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"fl_en_height",fieldLabel:IRm$.r1("B_HEIGHT"),listeners:{change:function(e,t,a){var i=this,l=i.down("[name=fl_en_top]"),n=i.down("[name=fl_en_bottom]");i._fl_en&&(i._fl_en=0,t?l.getValue()&&n.getValue()?n.setValue(!1):l.getValue()||n.getValue()||l.setValue(!0):(l.setValue(!0),n.setValue(!0)),i._fl_en=1)},scope:this}},{xtype:"textfield",name:"fl_height"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"fl_en_top",fieldLabel:IRm$.r1("B_TOP"),listeners:{change:function(e,t,a){var i=this,l=i.down("[name=fl_en_height]"),n=i.down("[name=fl_en_bottom]");i._fl_en&&(i._fl_en=0,t?l.getValue()?n.setValue(!1):n.setValue(!0):(l.setValue(!0),n.setValue(!0)),i._fl_en=1)},scope:this}},{xtype:"textfield",name:"fl_top"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"fl_en_bottom",fieldLabel:IRm$.r1("B_BOTTOM"),listeners:{change:function(e,t,a){var i=this,l=i.down("[name=fl_en_height]"),n=i.down("[name=fl_en_top]"),o=i.down("[name=fl_en_bottom]");i._fl_en&&(i._fl_en=0,t?l.getValue()?n.getValue()&&n.setValue(!1):n.setValue(!0):(!l.getValue()&&l.setValue(!0),!o.getValue()&&o.setValue(!0)),i._fl_en=1)},scope:this}},{xtype:"textfield",name:"fl_bottom"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"fl_en_width",fieldLabel:IRm$.r1("B_WIDTH"),listeners:{change:function(e,t,a){var i=this,l=i.down("[name=fl_en_left]"),n=i.down("[name=fl_en_right]");i._fl_en&&(i._fl_en=0,t?l.getValue()&&n.getValue()?n.setValue(!1):l.getValue()||l.getValue()||l.setValue(!0):(l.setValue(!0),n.setValue(!0)),i._fl_en=1)},scope:this}},{xtype:"textfield",name:"fl_width"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"fl_en_left",fieldLabel:IRm$.r1("B_LEFT"),listeners:{change:function(e,t,a){var i=this,l=i.down("[name=fl_en_width]"),n=i.down("[name=fl_en_right]");i._fl_en&&(i._fl_en=0,t?l.getValue()?n.setValue(!1):n.setValue(!0):(l.setValue(!0),n.setValue(!0)),i._fl_en=1)},scope:this}},{xtype:"textfield",name:"fl_left"}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"fl_en_right",fieldLabel:IRm$.r1("B_RIGHT"),listeners:{change:function(e,t,a){var i=this,l=i.down("[name=fl_en_width]"),n=i.down("[name=fl_en_left]");i._fl_en&&(i._fl_en=0,t?l.getValue()?n.setValue(!1):n.setValue(!0):(l.setValue(!0),n.setValue(!0)),i._fl_en=1)},scope:this}},{xtype:"textfield",name:"fl_right"}]},{xtype:"checkbox",fieldLabel:IRm$.r1("L_RESIZABLE"),name:"fl_resizable",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_MOVEABLE"),name:"fl_moveable",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_COLLAPSE"),name:"fl_collapsible",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_CLP_START"),name:"fl_collapsed",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"textfield",fieldLabel:IRm$.r1("L_CLP_CSS"),name:"fl_collapse_css"}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()},scope:this}}),IG$.wsfopt.superclass.initComponent.apply(this,arguments)}}),IG$.wseopt=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:450,callback:null,init_f:function(){var e,t,a,i,l,n=this,o=n.reportoption._mc,s=n.sheetoption,r=s?s.model:null,d=o?o.export_option:null,_=ig$.sheet_toolbar$,m=n.down("[name=tb_prt_i]");if("FILTER"==r.objtype&&m.store.loadData([]),d&&($.each(["excel","pdf","csv"],(function(e,t){d["u_"+t]&&m.store.add({showitem:!1,name:"Builtin ("+t+")",key:t})})),d.u_office&&d.otmpl&&$.each(d.otmpl,(function(e,t){m.store.add({showitem:!1,name:"Office "+(t.export_type?"-"+t.export_type+" ":"")+"("+t.description+": "+t.name+")",key:"office_"+e})})),d.u_jasper&&d.jasper&&d.jasper.jasper_template&&$.each(["pdf","rtf","ppt","excel","xlsx","docx","html","xml"],(function(e,t){"T"==d.jasper[t+"_output"]&&m.store.add({showitem:!1,name:"JASPER ("+t.toUpperCase()+")",key:"jasper_"+t})}))),_&&_.length)for(l=0;l<_.length;l++)m.store.add({showitem:!1,name:_[l].name,key:_[l].key});for(e=r.tb_prt_i?";"+r.tb_prt_i+";":"",a=(r.tb_prt_s?r.tb_prt_s:"").split(";"),i=0,l=0;l<m.store.data.items.length;l++)t=m.store.data.items[l],e&&e.indexOf(";"+t.get("key")+";")>-1?(t.set("style",a[i]),t.set("showitem",!0),i++):t.set("showitem",!1)},_confirm:function(){var e,t,a,i,l=this,n=l.down("[name=tb_prt_i]"),o=(l.reportoption._mc,l.sheetoption),s=0;for((t=o.model=o.model||{}).tb_prt_i="",t.tb_prt_s="",e=n.store.data.items,a=0;a<e.length;a++)1==(i=e[a]).get("showitem")&&(t.tb_prt_i+=(t.tb_prt_i?";":"")+i.get("key"),t.tb_prt_s+=(s>0?";":"")+(i.get("style")||""),s++);l.close()},initComponent:function(){var e,t=[{name:"Equal",value:"EQ"},{name:"Not Equal",value:"NE"},{name:"In",value:"IN"},{name:"Greater or Equal",value:"GTE"},{name:"Less or Equal",value:"LTE"},{name:"Greater",value:"GT"},{name:"Lesser",value:"LT"},{name:"Like",value:"LIKE"},{name:"Between",value:"BETWEEN"},{name:"Not In",value:"NOTIN"}],a={},i=[],l=ig$.button_css;for(e=0;e<t.length;e++)a[t[e].value]=t[e].name;if(l&&l.length)for(i.push({name:IRm$.r1("B_SELECT"),value:""}),e=0;e<l.length;e++)i.push(l[e]);else i=[{name:IRm$.r1("B_SELECT"),value:""},{name:"pdf_1",value:"exp_pdf_1"},{name:"word_1",value:"exp_word_1"},{name:"word_2",value:"exp_word_2"},{name:"word_3",value:"exp_word_3"},{name:"word_4",value:"exp_word_4"},{name:"word_5",value:"exp_word_5"},{name:"word_6",value:"exp_word_6"},{name:"word_7",value:"exp_word_7"},{name:"ppt_1",value:"exp_ppt_1"},{name:"ppt_2",value:"exp_ppt_2"},{name:"ppt_3",value:"exp_ppt_3"},{name:"ppt_4",value:"exp_ppt_4"},{name:"excel_1",value:"exp_excel_1"},{name:"excel_2",value:"exp_excel_2"},{name:"csv",value:"idv-dk-btn-e-csv"},{name:"office",value:"idv-dk-btn-e-xls"}];$s.apply(this,{title:IRm$.r1("L_TB_PRT"),items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},flex:1,bodyBorder:!1,padding:ig$.padding,items:[{xtype:"fieldset",title:IRm$.r1("L_TB_PRT_T"),flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"tb_prt_i",flex:1,store:{xtype:"store",fields:["name","showitem","key","style"],data:[]},plugins:{ptype:"cellediting",clicksToEdit:!0},columns:[{text:IRm$.r1("B_ENABLED"),xtype:"checkcolumn",dataIndex:"showitem",listeners:{checkchange:function(e,t,a,i){a&&this.down("[name=tb_prt]").setValue(!0)},scope:this}},{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name"},{text:IRm$.r1("B_STYLE"),flex:1,dataIndex:"style",editor:{xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:i}}}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.wseopt.superclass.initComponent.apply(this,arguments)}});
IG$.p$ChartSlice=$s.extend(IG$.v$pnl,{title:"Chart Slicer",xtype:"panel",layout:{type:"vbox",align:"stretch"},maincontainer:null,floating:!0,toFrontOnShow:!0,width:220,hidden:!0,sheetoption:null,bInit:!1,applyChanges:function(){var e,t,i=this.down("[name=slicemeasures]");for(this.sheetoption.chartPivot.measures=[],e=0;e<i.store.data.items.length;e++)t=i.store.data.items[e].data,this.sheetoption.chartPivot.measures.push(t);this.hide(),this.maincontainer.updateReport()},dropSliceArea:function(e,t){var i,s=this.down("[name=slicemetrics]");this.down("[name=slicemeasures]");if(1==t){for(i=0;i<s.store.data.items.length;i++)if(s.store.data.items[i].data.uid==e.uid){s.store.remove(s.store.data.items[i]);break}}else!1===t&&s.store.add(e)},tools:[{type:"minimize",qtip:"Minimize",cls:"x-tool-minimize",handler:function(e,t,i){i.ownerCt.hide()},scope:this},{type:"gear",qtip:"Close",handler:function(e,t,i){i.ownerCt.applyChanges()},scope:this}],applySheetOption:function(){var e=this;if(this.sheetoption&&1==this.bInit){var t,i,s=[],o=[],n={},r=this.down("[name=slicemetrics]"),a=this.down("[name=slicemeasures]");for(t=0;t<this.sheetoption.chartPivot.clusters.length;t++)i=this.sheetoption.chartPivot.clusters[t].uid,n[i]=!0;for(t=0;t<this.sheetoption.chartPivot.rows.length;t++)i=this.sheetoption.chartPivot.rows[t].uid,n[i]=!0;for(t=0;t<this.sheetoption.chartPivot.measures.length;t++)i=this.sheetoption.chartPivot.measures[t].uid,o.push(IG$.CloneObject(this.sheetoption.chartPivot.measures[t])),n[i]=!0;$.each(["rows","cols","measures","queryItems"],(function(o,r){for(t=0;t<e.sheetoption[r].length;t++)i=e.sheetoption[r][t].uid,void 0===n[i]&&s.push(IG$.CloneObject(e.sheetoption[r][t]))})),r.store.loadData(s,!1),a.store.loadData(o,!1)}},initComponent:function(){var e=this;IG$.apply(this,{items:[{xtype:"gridpanel",name:"slicemetrics",hideHeaders:!0,flex:1,enableDragDrop:!0,enableDD:!0,useArrows:!0,ddGroup:"SliceDDGroup",store:{fields:["name","type","nodepath","uid","itemtype"]},columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:!1,dataIndex:"name"}]},{xtype:"displayfield",text:IRm$.r1("L_MEASURES"),border:!1},{xtype:"gridpanel",name:"slicemeasures",hideHeaders:!0,flex:1,store:{fields:["name","type","uid","nodepath","itemtype"]},viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:"SliceDDGroup"},listeners:{beforedrop:function(e,t,i,s,o){var n=!0,r=t.records&&t.records.length>0?t.records[0]:null,a=(i&&i.data.location,r.get("type")||r.get("itemtype"));return t.copy=!1,"Measure"!==a&&(n=!1),n},drop:function(e,t,i,s){i&&i.get("name");var o=t.records&&t.records.length>0?t.records[0]:null;return"Measure"==(o.get("type")||o.get("itemtype"))}}},columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:!1,dataIndex:"name"},{xtype:"actioncolumn",width:20,items:[{iconCls:"icon-grid-delete",tooltip:IRm$.r1("B_REMOVE"),handler:function(t,i,s){var o=e.down("[name=slicemetrics]"),n=t.store.data.items[i].data;t.store.remove(t.store.data.items[i]),o.store.add(n)},scope:this}]}]}],buttons:[{xtype:"button",text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){e.applyChanges()},scope:this},{xtype:"button",text:IRm$.r1("B_CLOSE"),handler:function(){e.hide()},scope:this}],listeners:{afterrender:function(){this.bInit=!0,this.applySheetOption()}}}),IG$.p$ChartSlice.superclass.initComponent.call(this)}});
IG$.chartPlotbandObject=function(e){this._content=e||{}},IG$.chartPlotbandObject.prototype={getRecords:function(e){var t=this;$.each(e.data,(function(e,a){"id"!=e&&"selected"!=e&&(t._content[e]=a)})),t.value_desc=t.getValDesc()},updateRecords:function(e){var t=this,a=t._content;$.each(a,(function(t,a){"id"!=t&&"selected"!=t&&e.set(t,a)})),t.value_desc=t.getValDesc(),e.set("value_desc",t.value_desc)},getValDesc:function(){var e=this._content;return"curvefit"==e.type?"Curve fit ("+(e.rtype||"")+")":"band"==e.type?(e.value_1||"No value")+" ~ "+(e.value_2||"No value"):e.value_1||"No value"},_v1:function(e,t){}},IG$.__chartoption.chartcateg=[{name:"All",lcs:"B_ALL",value:"all"},{name:"General",lcs:"B_GENERAL",value:"cartesian"},{name:"Pie and dashboard",lcs:"L_PIE_DASHBOARD",value:"pie"},{name:"Scatter and point chart",lcs:"L_SCATTER_POINT",value:"point"},{name:"Stock and Low High analysis",lcs:"L_STOCK_LOW_HIGH",value:"stock"},{name:"Tree map",lcs:"L_TREEMAP",value:"tree"},{name:"Relation finding",lcs:"L_RELATION_FINDING",value:"relation"},{name:"Scientific analysis",lcs:"L_SCI_ANAL",value:"scientific"},{name:"Statistical data visualization",lcs:"L_STAT_VIS",value:"statistics"},{name:"Map and Geographical",lcs:"L_MAP_GEO",value:"map"},{name:"Quality Control",lcs:"L_QUALITY_CTRL",value:"quality"}],IG$.__chartoption.charttype=[{label:"Column",lcs:"L_CH_COLUMN",charttype:"cartesian",subtype:"column",img:"column",grp:"cartesian"},{label:"Line",lcs:"L_CH_LINE",charttype:"cartesian",subtype:"line",img:"line",grp:"cartesian"},{label:"Spline",lcs:"L_CH_SPLINE",charttype:"cartesian",subtype:"spline",img:"line",grp:"cartesian"},{label:"Area",lcs:"L_CH_AREA",charttype:"cartesian",subtype:"area",img:"area",grp:"cartesian"},{label:"Spline Area",lcs:"L_CH_SPLINE_AREA",charttype:"cartesian",subtype:"areaspline",img:"area",grp:"cartesian"},{label:"Bar",lcs:"L_CH_BAR",charttype:"cartesian",subtype:"bar",img:"bar",grp:"cartesian"},{label:"Pie",lcs:"L_CH_PIE",charttype:"pie",subtype:"pie",img:"pie",grp:"pie"},{label:"Doughnut",lcs:"L_CH_DOUGHNUT",charttype:"pie",subtype:"doughnut",img:"doughnut",grp:"pie"},{label:"Bubble",lcs:"L_CH_BUBBLE",charttype:"bubble",subtype:"bubble",img:"bubble",grp:"point"},{label:"Scatter",lcs:"L_CH_SCATTER",charttype:"scatter",subtype:"scatter",img:"bubble",grp:"point"},{label:"Treemap",lcs:"L_CH_TREEMAP",charttype:"treemap",subtype:"treemap",img:"treemap",grp:"tree"},{label:"Waterfall",lcs:"L_CH_WATERFALL",charttype:"cartesian",subtype:"waterfall",img:"waterfall",grp:"cartesian"},{label:"Synchronized Chart",lcs:"L_CH_SYNC_CHART",charttype:"cartesian",subtype:"syncchart",img:"syncchart",grp:"cartesian"},{label:"Radar",lcs:"L_CH_RADAR",charttype:"radar",subtype:"radar",img:"radar"},{label:"Funnel",lcs:"L_CH_FUNNEL",charttype:"funnel",subtype:"funnel",img:"funnel"},{label:"Pyramid",lcs:"L_CH_PYRAMID",charttype:"pyramid",subtype:"pyramid",img:"pyramid"},{label:"Map",lcs:"L_CH_MAP",charttype:"map",subtype:"map",img:"usmap",grp:"map"},{label:"Comparision Matrix",lcs:"L_CH_COMP_MATRIX",charttype:"matrix",subtype:"matrix",img:"compmatrix",grp:"relation"},{label:"Parallel Coordinates",lcs:"L_CH_PARA_COORD",charttype:"parallel",subtype:"parallel",img:"parallel",grp:"scientific"},{label:"Box Plot",lcs:"L_CH_BOXPLOT",charttype:"boxplot",subtype:"boxplot",img:"boxplot",grp:"stock"},{label:"Network Diagram(+)",lcs:"L_CH_NET_DIAG_POS",charttype:"networkdiagram_pos",subtype:"networkdiagram_pos",img:"networkdiagram",grp:"relation"},{label:"Network Diagram(-)",lcs:"L_CH_NET_DIAG_NEG",charttype:"networkdiagram_neg",subtype:"networkdiagram_neg",img:"networkdiagram",grp:"relation"},{label:"Matrix Diagram",lcs:"L_CH_MATRIX_DIAGRAM",charttype:"matrixdiagram",subtype:"matrixdiagram",img:"matrixdiagram",grp:"relation"},{label:"Force-Directed Layouts",lcs:"L_CH_FORCE_DIRECT",charttype:"forcelayout",subtype:"forcelayout",img:"force",grp:"relation"},{label:"Cluster Chart",lcs:"L_CH_CLUSTER",charttype:"anderson",subtype:"anderson",img:"cluster",grp:"scientific"},{label:"Chord Chart",lcs:"L_CH_CHORD",charttype:"chord",subtype:"chord",img:"chord",grp:"scientific"},{label:"Sun burst Chart",lcs:"L_CH_SUNBURST",charttype:"sunburst",subtype:"sunburst",img:"sunburst",grp:"scientific"},{label:"Bubble map",lcs:"L_CH_BUBBLE_MAP",charttype:"bubblemap",subtype:"bubblemap",img:"bubblemap",grp:"scientific"},{label:"Fixed Placement",lcs:"L_CH_FIXED_PLACE",charttype:"cartesian",subtype:"fixedplacement",img:"fixedplacement",grp:"cartesian"}],IG$.__chartoption.chartcolors={office_2013:["#5b9bd5","#ed7d31","#a5a5a5","#ffc000","#4472c4","#70ad47","#255e91","#9e480e","#636363","#997300","#264478","#43682b"],"theme 1":["#5b9bd5","#a5a5a5","#4472c4","#255e91","#636363","#264478","#7cafdd","#b7b7b7","#698ed0","#327dc2","#848484","#335aa1","#9dc3e6","#c9c9c9"],"theme 2":["#ed7d31","#ffc000","#70ad47","#9e480e","#997300","#43682b","#f1975a","#ffcd33","#8cc168","#d26012","#cc9a00","#5a8a39"],"theme 3":["#70ad47","#4472c4","#ffc000","#43682b","#264478","#997300","#8cc168","#698ed0","#ffcd33","#5a8a39","#335aa1","#cc9a00"],signika:["#f45b5b","#8085e9","#8d4654","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],"light-color":["#7cb5ec","#f7a35c","#90ee7e","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],"dark-color":["#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],combo1574:["#7A3E48","#EECD86","#E18942","#B95835","#3D3242","#06354F"],combo1573:["#7C786A","#8DCDC1","#D3E397","#FFF5C3","#EB6E44"],combo1572:["#6194BC","#A5D1F3","#D0EAFF","#E4001B","#ECECEC","#606060"]},IG$.v$chartViewer=$s.extend(IG$.v$pnl,{drillFlt:[],border:!1,maincontainer:null,drilldepth:0,_chartPnls:[],showtoolbar:!1,eventowner:null,eventhandler:null,reportoption:null,sheetoption:null,_selectedChart:null,resized:!1,autofit:!0,move:!1,header:!1,initCustomControl:function(){var e,t,a,l=this,i=window.bowser;l.el&&(e=l.getWidth(),t=l.getHeight(),a=l.el.dom,l.drillup&&l.drillup.remove(),l.drillup=null,i.msie&&e>0&&t>0&&((a=$(a))[0].style.width=e+"px",a[0].style.height=t+"px"))},showSlicePivot:function(){var e=this,t=e.getWidth()-20;e.slicehelper.sheetoption=e.sheetoption,e.slicehelper.applySheetOption(),e.slicehelper.setSize(220,350),e.slicehelper.setPosition(t-e.slicehelper.width,0),e.slicehelper.show()},applyDropSlice:function(e,t,a){var l,i=this,n=t.data;(l=new IG$.clItems(null)).CopyObject(l,n),"slice"==e?(1==a&&i.sheetoption.chartPivot.clusters.push(l),i.slicehelper.dropSliceArea(l,a)):"xaxis"==e&&(1==a&&i.sheetoption.chartPivot.rows.push(l),i.slicehelper.dropSliceArea(l,a)),i.updateReport()},updateReport:function(){this.maincontainer.procUpdateReport()},applyReportResult:function(e,t,a,l,i){var n=this,r=n.body?n.body.dom:null,s=r?$(r):null,o=s?IG$.j$ext._w(s):0,c=s?IG$.j$ext._h(s):0;o>0&&c>0?(clearTimeout(n._xo),n.mresults=e,n.olapset=t,n.reportoption=a,n.sheetoption=l,1==n.resized||o>10&&c>10?(n.resized=!1,n.applRptRestRender(n.mresults,n.olapset,n.reportoption,n.sheetoption,i)):n.applyRenderer(i)):(clearTimeout(n._xo),n._xo=setTimeout((function(){n.applyReportResult(e,t,a,l,i)}),300))},applyRenderer:function(e){var t=this;setTimeout((function(){var a=t.el?t.el.getWidth():0,l=t.el?t.el.getHeight():0;a>10&&l>10?t.applRptRestRender(t.mresults,t.olapset,t.reportoption,t.sheetoption,e):t.applyRenderer(e)}),100)},createPanel:function(e,t,a,l){var i,n=this;return n._chartPnls.length>t?((i=n._chartPnls[t]).dmode!=e&&i.getHeader()[1==e?"show":"hide"](),i.dmode=e,i.afterinit()):(i=new $s.panel({instance:n.instance,xtype:"panel",layout:"fit",flex:1,x:0,y:0,width:n.width||200,height:n.height||200,dmode:e,header:1==e,title:1==e?" ":null,border:1==e?1:0,closable:!1,_collapse:"normal",tools:[{type:"minimize",qtip:"Minimize",handler:function(e){e._collapse="normal"==e._collapse?"collapsed":"normal",n.doClusterLayout()},scope:this},{type:"maximize",qtip:"Maximize",handler:function(e){e._collapse="normal"==e._collapse?"maximize":"normal",n.doClusterLayout()},scope:this}],afterinit:function(){var e=this,a=n.width||e.getWidth(),i=n.height||e.getHeight();e._loaded=!0,1==e.dmode?(e._chartview?n.applChartOpts(e._chartview,t):e._chartview=n.createChartCtrl(t,e.body.dom,a,i),e._chartview&&e.setTitle(e._chartview.mresult.clusterdesc||"blank"),n.mlength--,n.mlength<2&&n.doClusterLayout(!0)):(e._chartview?n.applChartOpts(e._chartview,t):e._chartview=n.createChartCtrl(0,e.body.dom,a,i),n.layoutChartPnls(!0,l))},listeners:{close:function(){n.clustChartClosed(n)},collapse:function(){n.clustChartClosed(n)},expand:function(){n.clustChartClosed(n)},resize:function(e,t,a){var l=this;if(l._chartview)if(1==l.dmode){var i=$(l._chartview.maincontainer);t=IG$.j$ext._w(i),a=IG$.j$ext._h(i);l._chartview.invalidateSize(t,a)}else if(2==l.dmode){i=$(l._chartview.container),t=IG$.j$ext._w(i),a=IG$.j$ext._h(i);t>0&&a>0&&l._chartview.invalidateSize(t,a)}else t>0&&a>0&&l._chartview.invalidateSize(t,a)},afterrender:function(e){e.afterinit()}}}),n._chartPnls.push(i),n.containerpnl.add(i)),i},applRptRestRender:function(e,t,a,l,i){var n,r=this,s=(r.body.dom,null),o=null,c=r.down("[name=cslicemin]");if(r.cdrillindex=0,r.containerpnl=r.containerpnl||r.down("[name=cpm]"),r.cslicemetric||(r.cslicemin=r.down("[name=cslicemin]")),IG$.p$ChartSlice&&(r.slicehelper=new IG$.p$ChartSlice({instance:r.instance,maincontainer:r}),r.containerpnl.add(r.slicehelper),$(r.slicehelper.el.dom).css({zIndex:10})),r.sheetoption.model.bcluster&&r.sheetoption.model.clusters&&r.sheetoption.model.clusters.length){c&&c.setVisible(!0),r.mlength=r.mresults.results.length;var h=r.mresults.results.length;for(n=h;n<r._chartPnls.length;n++)r.containerpnl.remove(r._chartPnls[n]);r._chartPnls.splice(h,r._chartPnls.length-h),r._drawmode=1,$.each(r.mresults.results,(function(e,t){r.createPanel(1,e,void 0,i).show()}))}else{for(r.down("[name=cslicemin]").setVisible(!1),r._drawmode=0,n=r._chartPnls.length-1;n>0;n--)r.containerpnl.remove(r._chartPnls[n]);if(r._chartPnls.splice(1,r._chartPnls.length-1),r.createPanel(0,0,void 0,i).show(),r._selfdrill=!1,1==r.sheetoption.model.chart_option.enabledrill&&r.sheetoption.model.rows.length>1){if(r._selfdrill=!0,r.charttoolbar||(r.carea=$("<div class='idv-cht-tb-cont'></div>"),r.carea.css({position:"absolute",height:22,right:0,top:0}),r.carea.appendTo(r.body.dom),r.charttoolbar=$("<div class='mec-chart-toolbar'></div>").appendTo(r.carea),r.cpop=$("<div class='idv-cht-pop'></div>").appendTo($(document.body))),s=r.charttoolbar,o=r.cpop,s){function p(e){var t=$(document.body),a=o.offset(),l=IG$.j$ext._w(o),i=IG$.j$ext._h(o),n=e&&e.pageX,r=e&&e.pageY;n=n||-1,r=r||-1,a.left<n&&n<a.left+l&&a.top<r&&r<a.top+i||(o.hide(),t.unbind("click",p))}function d(e,t,a){var l=$(e).offset(),i=$(document.body);i.unbind("click",p),a&&a.stopPropagation(),o.show(),o.empty(),o.css({top:l.top+20,left:l.left}),u=$("<ul></ul>").appendTo(o),$.each(t,(function(e,t){var a=$("<li></li>").appendTo(u);a.text(t.text),a.bind("click",(function(){t.handler.call(t.scope,t.opt||null),p()}))})),i.bind("click",p)}s.empty(),s.show(),$.each(r.sheetoption.model.rows,(function(e,t){var a,l,i,n=[];if(e>0){for(a=0;a<IG$.chartTypeMenu.length;a++){var o={text:(i=IG$.chartTypeMenu[a]).lcs?IRm$.r1(i.lcs):i.label,opt:{drilldepth:e,subtype:i.subtype},handler:function(e){r.changeDrillChartType(e)},scope:r};n.push(o)}(l=$("<div class='idv-cht-btn-d'></div>").appendTo(s)).text(t.name),l.bind("click",(function(){r.procDrillUpIdx(e)})),$("<div class='idv-cht-btn-m'></div>").appendTo(s).bind("click",(function(e){d(l,n,e)}))}else(l=$("<div class='idv-cht-btn-d idv-cht-nmarg'></div>").appendTo(s)).text(t.name),l.bind("click",(function(){r.procDrillUpIdx(0)}))}));var u,m=$("<div class='idv-cht-btn-d idv-cht-pad'>Layout<div>").appendTo(s),_=[{text:IRm$.r1("L_LAYOUT_NORMAL"),handler:function(){this.sheetoption.model.chart_option.drillviewmode=0,this.layoutChartPnls(!1)},scope:r},{text:IRm$.r1("L_LAYOUT_POPUP"),handler:function(){this.sheetoption.model.chart_option.drillviewmode=1,this.layoutChartPnls(!1)},scope:r},{text:IRm$.r1("L_LAYOUT_CASCADE"),handler:function(){this.sheetoption.model.chart_option.drillviewmode=2,this.layoutChartPnls(!1)},scope:r},{text:IRm$.r1("L_LAYOUT_HORIZONTAL"),handler:function(){this.sheetoption.model.chart_option.drillviewmode=3,this.layoutChartPnls(!1)},scope:r},{text:IRm$.r1("L_LAYOUT_VERTICAL"),handler:function(){this.sheetoption.model.chart_option.drillviewmode=4,this.layoutChartPnls(!1)},scope:r}];m.bind("click",(function(e){d(this,_,e)}))}}else s=r.charttoolbar,r.drilldepth=0,s&&(s.empty(),s.hide())}},changeDrillChartType:function(e){var t,a,l=this,i=e.drilldepth,n=e.subtype,r=l._chartPnls.length>i?l._chartPnls[i]._chartview:null;if(r){for(t=r.sheetoption.model.chart_option.drillcharttype=r.sheetoption.model.chart_option.drillcharttype||[],a=0;a<i+1;a++)i.length>a?i==a&&(t[a]=n):i==a?t.push(n):t.push("");l.drawChartCtrl(r)}},createChartCtrl:function(e,t,a,l){var i,n=this;return i=new IG$.v$olapChartView(n.instance,n,n.uid,t,a,l),n.applChartOpts(i,e),i.onClickHandler=n.chartClickHandler,i.onClickOwner=n,i._scrollhandler={f:n._scrollhandler,o:n},i},applChartOpts:function(e,t){var a=this;e.drilldepth=0,a.mresults&&(e.jobid=a.mresults.jobid,e.mresult=a.mresults.results[t]),e.reportoption=a.reportoption,e.sheetoption=a.sheetoption},_reqData:function(e,t){this.fireEvent("request_data",this,e,t)},_scrollhandler:function(e,t){var a,l=this,i=e.scrollX,n=e.mresult;if(e.mresult.pagestart>0||e.mresult.pageend<e.mresult.rowcnt){if(e.mresult.pagestart>0&&e.mresult.pagestart>i||e.mresult.pageend<i+e._dlen)return void l.fireEvent("scroll_request",l,t);e.mresult.pagestart}a=e.drawChartResult(e.cwidth,e.cheight,!0),e.disposeContent(e),e._bandFormula.empty(),e._bandFormula.hide(),1==e._modc_&&$.each(a,(function(t,a){var i,r,s,o=l.sheetoption?l.sheetoption.model.chart_option:null,c=o?o.subtype:null;if((i=echarts.init(a.chart.renderTo,a.chart.echart_theme||ig$.echarts_theme||"amplix",{renderer:"canvas"})).setOption(a),i.on("pieselectchanged",(function(e){})),i.on("click",(function(t){"series"==t.componentType&&e.procClickEvent({series:{name:t.seriesName,type:t.seriesType}},{point:t.data})})),a.radar&&a.radar.legendselectchanged&&i.on("legendselectchanged",(function(e){a.radar.legendselectchanged.call(l,i,e)})),i.on("brushselected",(function(e){})),e._masterCharts.push(i),l.__sel_s=null,n&&n.__bands&&n.__bands.length)for(s=n.__bands,r=0;r<s.length;r++)l.drawBand(i,s[r],c,e);else a.__cf&&a.__cf.length&&l.curveFit(i,a.__cf,c,e)}))},curveFit:function(e,t,a,l){var i,n=this,r=n.olapset,s=n.sheetoption?n.sheetoption.model.chart_option:null,o={charttype:(s?s.subtype:"column")||"",bands:[]};for(i=0;i<t.length;i++)o.bands.push(t[i]);if(r){var c=new IG$._rpc$;c.init(n,{ack:"olapservice",payload:{uid:r.uid,jobid:r.jobid,option:"curvefit"},mbody:o,meta_type:"bands"},n,(function(t){var a,i=t?t.bands:null;if(i)for(a=0;a<i.length;a++)this.drawBand(e,i[a],o,l)})),c.send()}},drawBand:function(e,t,a,l){var i=this,n=t.series,r=t.all_series,s=t.config,o=l._bandFormula;0!=s.showfitexp&&o.show(),$.each([n,r],(function(t,l){var n;l&&(n=$("<ul></ul>").appendTo(o),$.each(l,(function(l,r){var o,c,h,p,d,u,m,_,f,g,b,v,y,w,C,x="";for(c=r.xmin,h=r.xmax,c=c?Number(c):null,h=h?Number(h):null,r.curvefit,p=r.rtype,d=r.formula,u=r.formula_html,y=r.r_square,w=r.r_square_adj,(y||w)&&(x=(y?"<br /><span class='igc-cfit-rst'>R sqaure : </span><span class='igc-cfig-rs'>"+y+"</span>":"")+(w?"<br /><span class='igc-cfit-rst'>R sqaure adj: </span><span class='igc-cfig-rs'>"+w+"</span>":"")),g=s.name,b=1==t?"(ALL)":r.seriename||"",v=$("<li class='igc-cfit-leg-item'><span class='igc-cfit-bname'>"+(g?g+": ":"")+"</span><span class='igc-cfit-seriename'>"+b+"</span><br /><span class='igc-cfit-fm'>"+(u||d)+"</span>"+x+"</li>").appendTo(n),m=[],_=r.parameters,o=0;o<_.length;o++)f=_[o],m.push(Number(f));C=i.drawBandSeries(e,p,u||d,m,a,c,h,s),v.bind("click",(function(e){var t=$(this);i.__sel_s&&(i.__sel_s.pdiv.removeClass("igc-cfit-sel"),i.__sel_s.series.update({lineWidth:2},!0)),C&&(t.addClass("igc-cfit-sel"),C.update({lineWidth:6},!0),i.__sel_s={pdiv:t,series:C})}))})))}))},drawBandSeries:function(e,t,a,l,i,n,r,s){var o,c,h,p,d,u,m,_,f,g={name:a,type:"spline",allowPointSelect:!1,showInLegend:!1,dashStyle:s.cf_lc||"Dot",lineWidth:2,marker:{enabled:!1},data:[]},b=s.cfitfcs?Number(s.cfitfcs):0,v=null!=n&&null!=r&&!isNaN(n)&&!isNaN(r),y=1,w=window.echarts?e.getOption():null;switch(w&&(g.type="line",g.smooth=!0),v?(d=n,u=r+v,y=(r-n)/20):(d=0,w?(m=w.xAxis[0],b=Math.floor(b),u=w.series[0].data.length+b):(m=e.xAxis[0],b=Math.floor(b),u=e.series[0].data.length+b)),t){case"polynomial":for(o=d;o<u;o+=y){for(h=o,c=0;c<l.length;c++)p=0==c?l[c]:p+l[c]*Math.pow(h,c);g.data.push({x:h,y:p,value:p})}break;case"exponential":for(o=d;o<u;o+=y)h=o,p=Math.exp(l[0]+l[1]*h),g.data.push({x:h,y:p,value:p});break;case"logarithmic":for(o=d;o<u;o+=y)h=v?o:o+1,p=l[0]+l[1]*Math.log(h),g.data.push({x:o,y:p,value:p});break;case"power":for(o=d;o<u;o+=y)h=v?o:o+1,p=Math.exp(l[0]+l[1]*Math.log(h)),g.data.push({x:o,y:p,value:p})}if("bar"==i){for(o=0;o<g.data.length;o++)g.data[o].x_=g.data[o].x,g.data[o].x=g.data[o].y,g.data[o].y=g.data[o].x_,g.data[o].value=h,delete g.data[o].x_;m=e.yAxis[0]}if(m&&b>0){for(_=m.data,o=0;o<b;o++)_.push("*"+(o+1));g.zoneAxis="bar"==i?"y":"x",g.zones=[{value:u-b},{color:"#ff0000"}],m.update&&m.update({categories:_},!0)}return window.echarts?(w.series.push(g),e.setOption(w,{notMerge:!1,lazyUpdate:!1,silent:!1})):f=e.addSeries(g),f},drawChartCtrl:function(e,t){var a,l=this,i=$(e.maincontainer),n=$(e.container),r=IG$.j$ext._w(n),s=IG$.j$ext._h(n);e.mresult;l.__need_dispose&&(l.__need_dispose=!1,e.disposeContent(e)),l.contextmenu=$("<ul class='contextMenu'></ul>").appendTo(i),l.context={menu:l.contextmenu},i.contextMenu&&0!=l.enablecontextmenu&&i.contextMenu(l.context,new IG$.callBackObj(l,l.menuProc)),e._bandFormula.empty(),e._bandFormula.hide(),a=e.drawChartResult(r,s,void 0,t),e.drawchart=a,window.m$dorC&&window.m$dorC.call(l,e,a)},menuProc:function(e){this.fireEvent("menu",this,e)},chartClickHandler:function(e,t,a,l){var i=this,n=e.mresult;if(i._selectedChart=e,i.selectedData=e.selectedData,i._dragselect=l,1==i.sheetoption.model.chart_option.enabledrill&&i.sheetoption.model.rows.length>e.drilldepth+1){i.drilldepth=e.drilldepth+1;var r,s,o,c,h,p,d=e.selectedData,u=e.drilldepth+1,m=i.olapset.panel,_=(i.olapset.jobid,{ftype:"group",children:[]}),f=m.sheetoption.model;for(delete(o=f.aux_filter=f.aux_filter||{}).filter_drillchart,f.drilldepth=u,i.drillFlt.length>u-1&&i.drillFlt.splice(u-1,i.drillFlt.length-u+1),(h=[]).push(n._tabledata[d[0].r][n.colfix-1]),i.drillFlt.push({item:i.sheetoption.model.rows[u-1],data:h}),c=0;c<i.drillFlt.length;c++)r={ftype:"condition",name:(s=i.drillFlt[c]).item.name,operator:"EQ",fields:[{nodepath:s.item.nodepath,name:s.item.name,uid:s.item.uid,type:s.item.type}],values:[{code:s.data[0].code,value:s.data[0].value}]},_.children.push(r);o.filter_drillchart=_,i._chartPnls.length>i.drilldepth?p=i._chartPnls[i.drilldepth]:(p=i.createPanel(2,u,void 0))._chartview||(p._chartview=i.createChartCtrl(0,p.body.dom)),(e=p._chartview).drilldepth=u,fireEvent("runsheet",i,m.procRunReport(null,null,e)),i.layoutChartPnls(!1)}else if(a&&i.sheetoption.model.detailview&&i.sheetoption.model.detailview.length){var g=$(e.container),b=i.sheetoption.model.detailview,v={cl:i.selectedData.length?i.selectedData[0]:null},y=[];if(v.cl)for(c=0;c<b.length;c++)i.sheetoption.mL(b[c],v)&&y.push({disp:b[c].name,name:"detail:"+b[c].uid});y.length&&(i.prepMenu(y),i.context.cell=null,g.showContextMenu&&g.showContextMenu(i.context,a.offsetX,a.offsetY))}i.eventhandler&&i.eventowner?i.eventhandler.call(i.eventowner):i.fireEvent("itemclick",i)},prepMenu:function(e){var t,a=this.contextmenu;for(a.html(""),t=0;t<e.length;t++)a.append($("<li"+(e[t].class?" class='"+e[t].class+"'":"")+"><a href='#"+e[t].name+"'>"+e[t].disp+"</a></li>"))},procDrillUpIdx:function(e){this.drilldepth=e,this.layoutChartPnls(!1)},doClusterLayout:function(e){var t,a,l,i,n,r,s=this,o=(s.body.dom,s.getWidth()),c=s.getHeight(),h=0,p=0,d=!1,u=$(s.containerpnl.body.dom);for(a=0,o=s.containerpnl.getWidth(),c=s.containerpnl.getHeight(),t=0;t<s._chartPnls.length;t++)"maximize"==s._chartPnls[t]._collapse&&(d=!0,s.cslicemin.setVisible(!1));0==d&&s.cslicemin&&(s.cslicemin.setVisible(!0),s.cslicemin.removeAll()),$.each(s._chartPnls,(function(e,t){if("collapsed"==t._collapse){t.setVisible(!1);var l=new $s.button({xtype:"button",width:120,text:t.title,handler:function(){t._collapse="normal",s.doClusterLayout()}});s.cslicemin.add(l)}else"maximize"==t._collapse?(t.setVisible(!0),t.setPosition(0,0),t.setSize(o,c)):"normal"==t._collapse&&(t.setVisible(1!=d),a++)})),0==d?(l=a<3?a:a<6?a/2:a<12?a/3:a/4,l=Math.floor(l),i=Math.ceil(a/l),(r=(c-s.cslicemin.getHeight())/i)<200?(n=(o-18)/l,r=200,u.css({overflowY:"scroll"})):(n=o/l,u.scrollTop(0),u.css({overflowY:"hidden"})),$.each(s._chartPnls,(function(t,a){var o,c,d;"normal"==a._collapse?(o=n*(p%l),c=r*(Math.floor(p/l)%i),s._chartPnls[t].setPosition(o,c),s._chartPnls[t].setSize(n,r),p++):(s._chartPnls[t].setPosition(100*h,4),s._chartPnls[t].setSize(100,30),h++),1==e&&(d=s._chartPnls[t]._chartview,s.drawChartCtrl(d))}))):(u.scrollTop(0),u.css({overflowY:"hidden"}))},layoutChartPnls:function(e,t){var a=this,l=a.sheetoption?a.sheetoption.model.chart_option:null;if(l)if(1==e&&l.bands&&l.bands.length&&a.mresults&&a.mresults.results.length){var i=a.mresults.results[0],n=new IG$._rpc$;n.init(a,{ack:"olapservice",payload:{option:"statistics",active:""+a.sheetoption.si,jobid:a.mresults.jobid},mbody:{}},a,(function(l){i.statistics=l.statistics,a.internalLayoutChartPnls(e,t)})),n.send()}else a.internalLayoutChartPnls(e,t)},internalLayoutChartPnls:function(e,t){var a,l,i,n,r,s,o,c,h,p=this,d=$(p.containerpnl.body.dom);if(0!=p._chartPnls.length){for(d.scrollTop(0),d.css({overflowY:"hidden"}),s=p.getWidth()||p.width,o=p.getHeight()||p.height,a=p.drilldepth+1;a<p._chartPnls.length;a++)p._chartPnls[a].setVisible(!1);for(l=Math.min(p._chartPnls.length,p.drilldepth+1),i=3==(r=p.sheetoption.model.chart_option.drillviewmode)?s/l:s,n=4==r?o/l:o,a=0;a<l;a++){c=3==r?i*a:0,h=4==r?n*a:0;var u=p._chartPnls[a].pw,m=p._chartPnls[a].ph,_=p._chartPnls[a].px,f=p._chartPnls[a].py;p._chartPnls[a].setVisible(!(0==r&&a<l-1)),u==i&&m==n&&_==c&&f==h||(p._chartPnls[a].setPosition(c,h),p._chartPnls[a].setSize(i,n),p._chartPnls[a].pw=i,p._chartPnls[a].ph=n,p._chartPnls[a].px=c,p._chartPnls[a].py=h),1==e?p.drawChartCtrl(p._chartPnls[a]._chartview,t):(u!=i||m!=n||a>0)&&p._chartPnls[a]._chartview.invalidateSize(i,n)}}},clustChartClosed:function(e){this.doClusterLayout()},CLS:{resize:function(e,t){var a=this,l=e||a.getWidth(),i=t||a.getHeight();l>10&&i>10&&(a.width=l,a.height=i,a.stimer>-1&&clearTimeout(a.stimer),a.stimer=setTimeout((function(){a.setPanelSize(l,i)}),30))}},setPanelSize:function(e,t){var a=this,l=a;l.resized=!0,l.sheetoption&&(1==l._drawmode?a.doClusterLayout():a._chartPnls&&a.layoutChartPnls(!1))},getExportData:function(e,t,a,l,i,n,r){var s,o,c,h,p,d,u=this,m=[],_=t,f=a,g=$(u.body.dom).offset(),b=(u.getWidth(),u.getHeight());b=0;if(1==u._drawmode)u._chartPnls&&u._chartPnls.length?($.each(u._chartPnls,(function(e,r){!r._chartview||"maximize"!=r._collapse&&"normal"!=r._collapse||(o=r._chartview,p=$(o.container),s=p.offset(),_=t+s.left-g.left,f=a+s.top-g.top,c=IG$.j$ext._w(p),h=IG$.j$ext._h(p),d={type:"label",x:_,y:f+b,sheet_title:!0,text:r.title},m.push(d),d={type:"chart",x:_,y:f+b+30,d_width:i,d_height:n,width:c,height:h,docid:l},_+c+60>i&&(b+=30),o.getExportData(d),m.push(d))})),r.execute(m)):r.execute();else if(u._chartPnls&&u._chartPnls.length){var v=u._chartPnls.length,y=0,w=function(){r.execute(m)};$.each(u._chartPnls,(function(e,i){o=i._chartview,s=$(o.container).offset(),_=t+s.left-g.left,f=a+s.top-g.top,p=$(o.container),c=IG$.j$ext._w(p),h=IG$.j$ext._h(p),d={type:"chart",x:_,y:f,width:c,height:h,docid:l};var n=o.getExportData(d,new IG$.callBackObj(u,(function(e){if(e&&"object"==typeof e&&e.length){var t=0;$.each(e,(function(e,a){var i=a.image_width||c,n=a.image_height||h;(d={type:"chart",x:_,y:f+t,width:i,height:n,docid:l}).image_type=a.image_type,d.image_data=a.image_data,t+=n,m.push(d)}))}else e&&(d.image_type=e.image_type,d.image_data=e.image_data,m.push(d));++y==v&&w()})));n&&(d.image_data=n,m.push(d),++y==v&&w())}))}else r.execute();return m},getDrillXML:function(e){var t,a,l,i,n,r,s,o,c,h,p=this,d=p.selectedData,u=p.sheetoption.model,m=p._selectedChart.mresult;if(t={ftype:"group",conjunction:"AND",children:[],dragselect:p._dragselect},p.sheetoption.model.filter&&(p.sheetoption.model.filter.conjunction="AND",t.children.push(p.sheetoption.model.filter)),p.sheetoption.model.aux_filter&&$.each(p.sheetoption.model.aux_filter,(function(e,a){t.children.push(a)})),d&&d.length>0){for(1==u.rows.length&&0==u.cols.length&&(h={ftype:"group",children:[{operator:"IN",ftype:"condition",fields:[{name:(c=u.rows[0]).name,uid:c.uid,type:c.type}],values:[]}]},t.children.push(h)),r=0;r<d.length;r++)if(!((i=d[r]).r<m.rowfix||e&&e.titem.enabled&&(n=0,(1==i.position&&u.rows[i.index]&&e.titem.item_map[u.rows[i.index].uid]||3==i.position&&u.measures&&u.measures[i.index]&&e.titem.item_map[u.measures[i.index].uid]||2==i.position&&u.cols[i.index]&&e.titem.item_map[u.cols[i.index].uid])&&(n=1),0==n))){o={ftype:"group",conjunction:"OR",children:[]},a=m._tabledata[i.r];var _=m.colfix;for(void 0!==i.c&&(_=Math.min(_,i.c+1)),s=0;s<_;s++)if(1==(l=a[s]).position&&u.rows[l.index]){if(c=u.rows[l.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&!e.tparams.item_map[c.uid])continue;if(h)h.children[0].values.push({code:l.code,value:l.value});else{var f={conjunction:"AND",operator:"EQ",ftype:"condition",fields:[{name:c.name,uid:c.uid,type:c.type}],values:[{code:l.code,value:l.value}]};o.children.push(f)}}for(s=0;s<m.rowfix;s++)if(i.c>=m.colfix&&2==(l=m._tabledata[s][i.c]).position&&u.cols[l.index]){if(c=u.cols[l.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&!e.tparams.item_map[c.uid])continue;var g={operator:"EQ",conjunction:"AND",ftype:"condition",fields:[{name:c.name,uid:c.uid,type:c.type}],values:[{code:l.code,value:l.value}]};o.children.push(g)}!h&&o.children.length&&t.children.push(o)}}else p._dragselect||(1,t=null);return t},initComponent:function(){var e=this;e._chartPnls=[],e.on("resize",(function(t,a,l){e.CLS.resize.call(e,a,l)})),e.on("afterrender",(function(){var e=this;e.containerpnl=e.containerpnl||e.down("[name=cpm]"),e.CLS.resize.call(e)})),IG$.apply(this,{border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",name:"cpm",border:0,flex:1,layout:"absolute",border:!1},{xtype:"panel",height:25,name:"cslicemin",layout:{type:"hbox",align:"top"},border:0}]}),IG$.v$chartViewer.superclass.initComponent.call(this)}});
IG$.sheetViewer=$s.extend(IG$.v$pnl,{autofit:!0,move:!1,header:!1,init_f:function(){var e,t,i=this,s=i.body?i.body.dom:null;$(s).empty(),(t=i._gridview=new IG$.olapReportView(i.uid,null,s,10)).reportoption=i.reportoption,t.sheetoption=i.sheetoption,t.sheetobj=i.sheetobj,(e=t._mgrid).sheetoption=i.sheetoption,e.sheetobj=i.sheetobj,e.ctx.bind({selectionchanged:function(){e.selectedItems.length>1&&i.fireEvent("drillreport",i)},itemclick:function(e,t){i.fireEvent("itemclick",i,t)},itemdblclick:function(e,t){i.fireEvent("itemdblclick",i,t)},menu:function(e,t){i.fireEvent("menu",i,t)},pivotchanged:function(e){i.fireEvent("pivotchanged",i)},scroll_request:function(e,t){i.fireEvent("scroll_request",i,t)},hierarchy:function(e,t){i.fireEvent("hierarchy",i,t)}})},initCustomControl:function(){this.gridcontainer=[]},applyReportResult:function(e,t,i,s,r){var n,a,o,l,p,d=this,u=d.body?d.body.dom:null,m=u?d.getWidth():0,c=u?d.getHeight():0;if(d.mresults=e,d.olapset=t,d.reportoption=i,d.sheetoption=s,u){var h;if(l=!!e&&e._is_sc,p=e?e._hcell:null,d.mresults.results.length>1){h=d.mresults.results[0];var f,g,v,y,_=d.mresults.results,w=0,x=0,b=0,j=0;for(n=0;n<_.length;n++){for(g=_[n].clustercode.join(" "),v=_[n].clustervalue.join(" "),0==n?(w+=j=_[n].rowfix,x=_[n].colcnt,b=_[n].colfix,h.styles=_[n].styles):w+=_[n].rowcnt-_[n].rowfix+1,y=[],f=0;f<x;f++)y.push({text:f<b?" ":v||g,mrow:0,mcol:x-1,merged:0==f||f==b?2:4,stylename:"cluster_data",chart:null,position:-1,code:null,value:null,index:-1});if(0==n)h._tabledata.splice(j,0,y);else for(h._tabledata.push(y),f=_[n].rowfix;f<_[n].rowcnt;f++)h._tabledata.push(_[n]._tabledata[f])}h.rows=w,h.cols=x,h.colfix=b,h.rowfix=j}else h=d.mresults.results[0];a=(o=d._gridview)._mgrid,o.width=m>0?m:o.width,o.height=c>0?c:o.height,d.mresults&&(o.jobid=d.mresults.jobid,p||(o.mresult=h),o.reportoption=d.reportoption,o.sheetoption=d.sheetoption,a.sheetoption=d.sheetoption,o.drawOlapResult(r,l,p,h))}},CLS:{resize:function(e,t){this.setPanelSize(e,t)},afterrender:function(e){e.init_f()}},setPanelSize:function(e,t){var i=this._gridview?this._gridview._mgrid:null;i&&i.resize(e,t)},getDrillXML:function(e){var t,i,s,r,n,a,o,l,p,d,u,m,c,h,f,g=this,v=g._gridview._selectedCells(),y=g._gridview._mgrid,_=g._gridview.mresult,w=g.sheetoption.model,x=w.showlnum,b={},j=0,C=0,E=0;if(b={ftype:"group",conjunction:"AND",children:[]},w.filter&&b.children.push(w.filter),w.aux_filter&&$.each(w.aux_filter,(function(e,t){b.children.push(t)})),v&&v.length>0){for(1==w.rows.length&&0==w.cols.length&&(void 0===y.treecol||y.treeCol<0)&&(h={ftype:"group",children:[{ftype:"condition",operator:"IN",fields:[{name:w.rows[0].name,uid:w.rows[0].uid,type:w.rows[0].type}],values:[]}]},b.children.push(h)),c={ftype:"group",conjunction:"AND",children:[]},n=0;n<v.length;n++)if(t=v[n],!e||!e.titem.enabled||(C=0,(1==t.position&&w.rows[t.index]&&e.titem.item_map[w.rows[t.index].uid]||3==t.position&&w.measures&&w.measures[t.index]&&e.titem.item_map[w.measures[t.index].uid]||2==t.position&&w.cols[t.index]&&e.titem.item_map[w.cols[t.index].uid])&&(C=1),0!=C))if(1!=t.title){if(E++,m={ftype:"group",conjunction:"AND",children:[]},y.treeCol>-1){if(s=(r=y.treeData[t.dr])[y.treeCol])for(;s;)1==(i=s).position&&w.rows[i.index]?(f=w.rows[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&!e.tparams.item_map[f.uid]||(d={ftype:"condition",operator:"EQ",fields:[{name:f.name,uid:f.uid,type:f.itemtype}],values:[{code:i.code,value:i.value}]},m.children.push(d))):3==i.position&&w.measures&&w.measures[i.index]&&(f=w.measures[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&e.tparams.item_map[f.uid]&&(j=1,u={ftype:"measure",fields:[{name:f.name,uid:f.uid,type:f.itemtype}]},m.children.push(u))),s=i.parent;else 1==(i=r[y.treeCol]).position&&w.rows[i.index]?(f=w.rows[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&!e.tparams.item_map[f.uid]||(d={ftype:"condition",operator:"EQ",fields:[{name:f.name,uid:f.uid,type:f.itemtype}],values:[{code:i.code,value:i.value}]},m.children.push(d))):3==i.position&&w.measures&&w.measures[i.index]&&(f=w.measures[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&e.tparams.item_map[f.uid]&&(j=1,u={ftype:"measure",fields:[{name:f.name,uid:f.uid,type:f.itemtype}]},b.children.push(u)));!j&&w.measures&&1==w.measures.length&&t.c>=_.colfix&&t.r>=_.rowfix&&(f=w.measures[0],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&e.tparams.item_map[f.uid]&&(j=1,u={ftype:"measure",fields:[{name:f.name,uid:f.uid,type:f.itemtype}]},m.children.push(u)))}else{for(r=_._tabledata[t.r],o=x?1:0,l=_.colfix+(x?1:0),j=0,(!e||e&&!e.tparams.enabled)&&t.c<_.colfix&&(e&&e._dall||(o=t.c,l=t.c+1)),a=o;a<l;a++)if(1==(i=r[a]).position&&w.rows[i.index]){if(f=w.rows[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&!e.tparams.item_map[f.uid])continue;h?h.children[0].values.push({code:i.code,value:i.value}):(d={ftype:"condition",operator:"EQ",fields:[{name:f.name,uid:f.uid,type:f.type}],values:[{code:i.code,value:i.value}]},m.children.push(d))}else 3==i.position&&w.measures&&w.measures[i.index]&&(f=w.measures[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&e.tparams.item_map[f.uid]&&(j=1,u={ftype:"measure",fields:[{name:f.name,uid:f.uid,type:f.itemtype}]},m.children.push(u)));for(a=0;a<_.rowfix;a++)if(2==(i=_._tabledata[a][t.c]).position&&w.cols[i.index]){if(f=w.cols[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&!e.tparams.item_map[f.uid])continue;p={ftype:"condition",operator:"EQ",fields:[{name:f.name,uid:f.uid,type:f.type}],values:[{code:i.code,value:i.value}]},m.children.push(p)}else 3==i.position&&w.measures&&w.measures[i.index]&&(f=w.measures[i.index],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&e.tparams.item_map[f.uid]&&(j=1,u={ftype:"measure",fields:[{name:f.name,uid:f.uid,type:f.itemtype}]},m.children.push(u)));!j&&w.measures&&1==w.measures.length&&t.c>=_.colfix&&t.r>=_.rowfix&&(f=w.measures[0],e&&e.tparams&&e.tparams.enabled&&e.tparams.items.length&&e.tparams.item_map[f.uid]&&(u={ftype:"measure",fields:[{name:f.name,uid:f.uid,type:f.itemtype}]},m.children.push(u)))}h||(m.conjunction="OR",c.children.push(m))}else E++;b.children.push(c)}return E>0?b:null},getSelection:function(){return this._gridview._selectedCells()},getExportData:function(e,t){var i=null,s=this._gridview.mresult,r=s?s.delim:null;if(!s)return t.execute(i),i;i={jobid:this._gridview.jobid,cols:s.cols,rows:s.rows,delimiter:r,fixedrow:s.rowfix},t.execute(i)},applyOptions:function(e,t){var i=this;e&&t&&(i.reportoption=e,i.sheetoption=t),i._gridview.applyOptions(i.reportoption,i.sheetoption)},initComponent:function(){var e=this;e.on("resize",(function(t,i,s){e.CLS.resize.call(e,i,s)})),e.on("afterrender",(function(t){e.CLS.afterrender.call(e,t)})),IG$.sheetViewer.superclass.initComponent.call(this)}});
IG$.d$RscrEdit=$s.extend($s.window,{name:"rscript",title:"Script",layout:"fit",height:600,width:750,modal:!0,draggable:!0,resizable:!0,focusOnToFront:!0,bodyPadding:6,initApp:function(){var t=this,e=t.down("[name=rscript]"),a=t.down("[name=rprompt]"),n=t.down("[name=minwidth]"),r=t.down("[name=minheight]"),o=t.sheetoption.model.roption;e.setValue(o.script),a.setValue(o.rprompts),n.setValue(o.minwidth),r.setValue(o.minheight)},confirm:function(){var t=this,e=t.down("[name=rscript]"),a=t.down("[name=rprompt]"),n=t.down("[name=minwidth]"),r=t.down("[name=minheight]"),o=sheetoption.model.roption;e.setValue(o.script),a.setValue(o.rprompts),n.setValue(o.minwidth),r.setValue(o.minheight)},initComponent:function(){$s.apply(this,{items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},bodyPadding:6,items:[{xtype:"tabpanel",name:"meT",activeTab:0,flex:1,headerPosition:"right",tabPosition:"top",preventHeader:!0,border:0,layout:"fit",items:[{xtype:"panel",title:"Script",layout:{type:"vbox",align:"stretch"},border:0,items:[{xtype:"textarea",grow:!1,flex:1,name:"rscript",fieldLabel:IRm$.r1("L_RSCRIPT"),hideLabel:!0,anchor:"100%"},{xtype:"fieldset",title:IRm$.r1("L_VIEW_OPTION"),defaultType:"textfield",items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},bodyPadding:0,items:[{name:"minwidth",fieldLabel:IRm$.r1("L_MIN_WIDTH"),xtype:"numberfield",labelAlign:"right",value:0,minValue:0,maxValue:5e3,flex:1},{name:"minheight",fieldLabel:IRm$.r1("L_MIN_HEIGHT"),xtype:"numberfield",labelAlign:"right",value:0,minValue:0,maxValue:5e3,flex:1}]}]}]},{xtype:"panel",title:"Prompt",layout:"fit",border:0,items:[{xtype:"textarea",grow:!1,name:"rprompt",fieldLabel:IRm$.r1("L_R_PROMPT"),hideLabel:!0,anchor:"100%"}]}]}]}],listeners:{beforeclose:function(t,e){this.sheetoption&&(this.sheetoption.model.roption.showscript=!1)},afterrender:function(){this.initApp()},scope:this},buttons:["->",{xtype:"button",text:IRm$.r1("B_REQUEST"),handler:function(){var t=this,e=t.down("[name=rscript]"),a=t.down("[name=rprompt]"),n=t.down("[name=minwidth]"),r=t.down("[name=minheight]"),o=t.sheetoption.model.roption;o.script=e.getValue(),o.rprompts=a.getValue(),o.minwidth=n.getValue(),o.minheight=r.getValue(),t.callback&&t.callback.execute()},scope:this},{xtype:"button",text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]}),IG$.d$RscrEdit.superclass.initComponent.call(this)}}),IG$.v$rstatViewer=$s.extend(IG$.v$pnl,{sheetobj:null,pg:0,pgm:-1,pgs:2e3,rt:-1,df:6,sized:!0,aftsized:!1,layout:"fit",_init:!1,init_f:function(){var t=this;t.getWidth(),t.getHeight(),t.body.dom;t._init=!0,t.updatePromptCtrls(),t.mresults&&t.applyReportResult(null,null,null,null,!0)},initCustomControl:function(){},applyReportResult:function(t,e,a,n,r){var o,i=this,l=i.rstat;r||(i.mresults=t,i.olapset=e,i.reportoption=a,i.sheetoption=n),i._init&&(i.getWidth(),i.getHeight(),o=i.sheetoption.model,roption=o.roption=o.roption||{},roption.showsummary?l.show():l.hide(),i.pgs=roption.pgs||2e3,setTimeout((function(){t.r_stat?i.rs_requestR(t.r_stat):1==i.sized?i.requestR():i.aftsized=!0}),20))},updateRScr:function(){this.sheetoption},_ctrlwindow:function(t){var e,a,n=this,r=n.rstat;switch(t){case"cmd_r_summary":e="showsummary",r.show();break;case"cmd_r_script":e="showscript",a=new IG$.d$RscrEdit({instance:n.instance,sheetoption:n.sheetoption,callback:new IG$.callBackObj(n,(function(){this.updatePromptCtrls(),this.requestR()}))}),IG$.checkLogin(this,a)}n.sheetoption&&e&&(n.sheetoption.model.roption[e]=!0)},init_f:function(){var t=this;t.getWidth(),t.getHeight(),t.body.dom;t._init=!0,t.updatePromptCtrls(),t.mresults&&t.applyReportResult(null,null,null,null,!0)},initCustomControl:function(){},initComponent:function(){var t=this;IG$.apply(t,{items:[{xtype:"panel",name:"rmain",layout:"fit",items:[{name:"rgraph",xtype:"panel",layout:"fit",items:[{name:"rg",html:"",xtype:"container"}]}]}]}),t.on("resize",(function(e,a,n){t.CLS.resize.call(t,a,n)})),t.on("afterrender",(function(){t.CLS.afterrender.call(t,t)})),IG$.v$rstatViewer.superclass.initComponent.call(t)},CLS:{resize:function(t,e){var a=this,n=(a.down("[name=rgraph]"),a.down("[name=rg]")),r=a.rgraphzone;t>0&&e>0&&(n.setSize(t,e),r&&(IG$.j$ext._w(r,t),IG$.j$ext._h(r,e)),a.setPanelSize(t,e),a.sized=!0,1==a.aftsized&&(a.aftsized=!1,a.requestR()))},afterrender:function(t){var e=t.down("[name=rg]"),a=$(e.body.dom);a.empty(),t.render(a),this.init_f()}},requestR:function(){var t,e,a=this,n=a.olapset,r=a.reportoption,o=a.sheetobj;if(n&&n.jobid){(e=o.sheetoption.model).roption=e.roption||{},e.panelwidth=IG$.j$ext._w(a._parentdom),e.panelheight=IG$.j$ext._h(a._parentdom),t=r.getCurrentPivot();var i=new IG$._rpc$;i.init(a,{ack:"olapservice",payload:{uid:r.uid,jobid:n.jobid,option:"pivot",active:""+o.sheetindex,pivotresult:"F",rstatresult:"T"},mbody:t,meta_type:a.meta_type||"report"},a,a.rs_requestR),i.send()}},rs_requestR:function(t){var e,a,n,r,o,i,l,s,p,d,c=this,h=(c.rstat,c.rstatcontent);c.rscript;if(s=c.rgraphzone,p=c.ctrlzone,(d=h).empty(),s.empty(),e=t.execution)for(n=[],a=0;a<e.length;a++){r=e[a],o=null;try{o=JSON.parse(r)}catch(t){0}o&&o.sc&&(1!=/(summary|print)/.test(o.sc)&&1!=o.iserror||c.appendSummary(o,d)),n.push(o)}if((e=t.plot)&&e.length){r=e[0];try{i=JSON.parse(r)}catch(t){i=null}if(c.plotdata=[],i&&i.gr)for(a=0;a<i.gr.length;a++)"pg"==i.gr[a].c&&(l={w:i.w,h:i.h,gr:i.gr[a].data},c.plotdata.push(l));c.plotdata.length>0&&(c.pg=0,c.plotdata.length>1&&(p.show(),c.updatePgDisp()),c.drPlot(s,c.plotdata[c.pg],!0,!1))}},appendSummary:function(t,e,a){var n,r,o,i,l,s,p,d,c,h,m,f,g,u,b,y,v,w,x,T;if(1==t.iserror)m=$("<div class='idv-r-stable'></div>").appendTo(e),cont=t.cont,$("<span>&gt;&gt; "+t.sc+"</span><br>").appendTo(m),$("<span color='red'>"+cont+"</span>").appendTo(m);else if(t.dt)switch(o=t.dt){case"namedlist":if("namedlist"==t.attr.dt){for(w in i=t.attr.cont.names.cont,d=t.attr.cont["row.names"]?t.attr.cont["row.names"].cont:null,c=t.cont,h=!0,mlength=-1,c)if(c[w].cont&&c[w].cont.length&&(mlength<0&&(mlength=c[w].cont.length),mlength!=c[w].cont.length||"lang"==c[w].dt)){h=!1;break}if(i&&i.length>0)if(m=$("<div class='idv-r-stable'></div>").appendTo(e),u=$("<div><span style='float: left;'>"+(t.sc||(a?a.sc:""))+"</span><div>").appendTo(m),1==h){for(b=$("<div class='clipbutton' style='float: left;'>&nbsp;&nbsp;Select All</div>").appendTo(u),f=$("<table style='clear: both;'></table>").appendTo(m),b.bind("click",(function(){IG$.selectAll(f)})),g=$("<tr></tr>").appendTo(f),d&&d.length>0&&$("<th></th>").appendTo(g),n=0;n<i.length;n++)$("<th>"+i[n]+"</th>").appendTo(g);for(T=d&&d.length>0?d.length:0,c&&c[i[0]]&&(T=Math.max(T,c[i[0]].cont.length)),n=0;n<T;n++)for(g=$("<tr></tr>").appendTo(f),d&&d.length>0&&(y=d.length>n?d[n]:"",$("<td>"+y+"</td>").appendTo(g)),r=0;r<i.length;r++)y=c[v=i[r]]&&c[v].cont.length>n?c[v].cont[n]:"",$("<td>"+y+"</td>").appendTo(g)}else for(w in c)c[w].sc=w,this.appendSummary(c[w],m)}break;case"numeric":case"int":case"lang":if(t.cont&&t.cont.length>0)if(m=$("<div class='idv-r-stable'></div>").appendTo(e),u=$("<div><span style='float: left;'>"+(t.sc||(a?a.sc:""))+"</span><div>").appendTo(m),b=$("<div class='clipbutton' style='float: left;'>&nbsp;&nbsp;Select All</div>").appendTo(u),f=$("<table style='clear: both;'></table>").appendTo(m),b.bind("click",(function(){IG$.selectAll(f)})),g=$("<tr></tr>").appendTo(f),"lang"==o)$("<td>"+t.cont+"</td>").appendTo(g);else for(n=0;n<t.cont.length;n++)y=t.cont[n],$("<td>"+y+"</td>").appendTo(g);break;case"factor":if((c=t.cont)&&c.length>0){for(m=$("<div class='idv-r-stable'></div>").appendTo(e),u=$("<div><span style='float: left;'>"+(t.sc||(a?a.sc:""))+"</span><div>").appendTo(m),b=$("<div class='clipbutton' style='float: left;'>&nbsp;&nbsp;Select All</div>").appendTo(u),f=$("<table style='clear: both;'></table>").appendTo(m),b.bind("click",(function(){IG$.selectAll(f)})),g=$("<tr></tr>").appendTo(f),$("<td></td>").appendTo(g),n=0;n<c.length;n++)y=c[n],$("<td>"+y+"</td>").appendTo(g);if(t.attr&&"namedlist"==t.attr.dt)for(w in t.attr.cont){var k=t.attr.cont[w].cont;for(g=$("<tr></tr>").appendTo(f),$("<th>"+w+"</th>").appendTo(g),n=0;n<k.length;n++)y=k[n],$("<td>"+y+"</td>").appendTo(g)}}break;case"string":if((c=t.cont).length,x=[],T=1,t.attr&&"namedlist"==t.attr.dt&&t.attr.cont.names?i=t.attr.cont.names.cont:(t.attr&&t.attr.cont.dim&&((s=t.attr.cont.dim.cont)[1],T=s[0]),t.attr&&t.attr.cont.dimnames&&(p=t.attr.cont.dimnames.dt,l=t.attr.cont.dimnames.cont)),m=$("<div class='idv-r-stable'></div>").appendTo(e),u=$("<div><span style='float: left;'>"+(t.sc||(a?a.sc:""))+"</span><div>").appendTo(m),b=$("<div class='clipbutton' style='float: left;'>&nbsp;&nbsp;Select All</div>").appendTo(u),f=$("<table style='clear: both;'></table>").appendTo(m),b.bind("click",(function(){IG$.selectAll(f)})),i&&i.length>0)for(g=$("<tr></tr>").appendTo(f),n=0;n<i.length;n++)y=i[n],$("<th>"+y+"</th>").appendTo(g);else if(s&&"list"==p&&l&&2==l.length)for(g=$("<tr></tr>").appendTo(f),$("<th></th>").appendTo(g),n=0;n<s[1];n++)y=l[1].cont[n],$("<th>"+y+"</th>").appendTo(g);for(n=0;n<T;n++)g=$("<tr></tr>").appendTo(f),x.push(g);for(n=0;n<c.length;n++){var I=n%x.length;n<x.length&&s&&"list"==p&&l&&2==l.length&&$("<td>"+l[0].cont[I]+"</td>").appendTo(x[I]),y=c[n],$("<td>"+y+"</td>").appendTo(x[I])}break;default:}},drPlotCanvas:function(t,e){var a,n,r,o,i=IG$.j$ext._w(t),l=IG$.j$ext._h(t),s=i/e.w,p=l/e.h;if(a=$("<canvas></canvas>").appendTo(t),r=i,o=l,IG$.j$ext._w(a,r),IG$.j$ext._h(a,o),this.crv=a,n=a[0].getContext("2d")){n.canvas.width=r,n.canvas.height=o,n.lineWidth=0;var d,c,h,m,f,g,u,b,y,v,w,x,T,k=0,I={x:0,y:0,w:n.canvas.width,h:n.canvas.height},_={x:I.x,y:I.y,w:I.w,h:I.h};for(d=0,c=e.gr.length;d<c;d++)if(null,{},"cr"!=(m=e.gr[d]).c)if("rc"!=m.c){switch(n.save(),"t"==m.c||_.x==I.x&&_.y==I.y&&_.w==I.w&&_.h==I.h||(n.beginPath(),n.rect(I.x,I.y,I.w,I.h,!1),n.clip()),_={x:I.x,y:I.y,w:I.w,h:I.h},x=!1,m.lc&&(n.lineCap=m.lc),m.lj&&(n.lineJoin=m.lj),m.ml&&(n.miterLimit=Number(m.ml)),m.ss&&(lss=m.ss,n.lineWidth=1,x=!0,n.strokeStyle=lss),(m.lw||0==m.lw)&&(k=Number(m.lw)),1==x&&(n.lineWidth=k),m.fs&&(n.fillStyle=m.fs),y=0,v=0,m.ftr&&"t"!=m.c&&n.ftr(m.ftr[0]+y,m.ftr[1]+v),"t"==m.c?(w={width:n.measureText(m.data).width,height:10},r=m.ftr?m.ftr[0]:0,o=m.ftr?m.ftr[1]:0,m.fro?(m.x+=this.df*m.data.length/2-w.width/2,y=r*s,v=o*p):(y=(m.x+r)*s,v=(m.y+o)*p),n.translate(y,v),n.scale(1,1),lss=null,k=0):n.scale(s,p),m.fro&&n.rotate(m.fro),m.c){case"c":n.beginPath(),n.arc(m.cx,m.cy,m.r,0,2*Math.PI,!1),n.stroke(),m.fs&&n.fill();break;case"l":k>0&&(n.lineWidth=k,n.beginPath(),n.moveTo(m.x1,m.y1),n.lineTo(m.x2,m.y2),n.stroke());break;case"t":m.fro?n.fillText(m.data,m.x,m.y):n.fillText(m.data,0,0);break;case"pl":if(m.data){for(T=m.data.split(/[MLZ]+/),b=!1,h=0;h<T.length;h++)""!=T[h]&&(g=(f=T[h].split(","))[0],u=f[1],0==b?(n.beginPath(),n.moveTo(g,u)):n.lineTo(g,u),b=!0);1==x&&n.stroke()}break;case"po":if(m.data){for(T=m.data.split(/[MLZ]+/),b=!1,h=0;h<T.length;h++)""!=T[h]&&(g=(f=T[h].split(","))[0],u=f[1],0==b?(n.beginPath(),n.moveTo(g,u)):n.lineTo(g,u),b=!0);n.closePath(),m.fs&&n.fill(),1==x&&n.stroke()}break;case"r":n.beginPath(),n.rect(m.x+(m.w<0?m.w:0),m.y+(m.h<0?m.h:0),Math.abs(m.w),Math.abs(m.h)),m.fs&&n.fill(),1==x&&n.stroke();break;default:lss=null,k=0}n.restore()}else I={x:0,y:0,w:n.canvas.width,h:n.canvas.height};else I={x:m.x*s,y:m.y*p,w:m.w*s,h:m.h*p}}},drPlotSVG:function(t,e,a){var n,r,o,i,l,s,p,d,c,h,m,f,g,u,b,$,y,v,w=IG$.j$ext._w(t),x=IG$.j$ext._h(t),T=w/e.w,k=x/e.h,I=!1,_=[0,0,w,x],P=[];if(0==a){for(P.push("<svg style='overflow-x:hidden;overflow-y:hidden;position:relative;' height='"+x+"' version='1.1' width='"+w+"' xmlns='http://www.w3.org/2000/svg'><desc>Created by boguenon 2.0.0</desc>"),r=0,o=e.gr.length;r<o;r++){switch(s=null,m={},I=!1,u=null,b=null,(l=e.gr[r]).c){case"c":u="<circle style='stroke-opacity:1;' cx='"+l.cx+"' cy='"+l.cy+"' r='"+l.r+"' ",b="/>",m["stroke-width"]=0,m["stroke-opacity"]=0,I=!0;break;case"l":u="<path style='stroke-opacity:1;' d='",u+="M"+l.x1+","+l.y1+"L"+l.x2+","+l.y2+"' ",b="/>",I=!0;break;case"t":t1x=0,t1y=0,l.pro&&(t1x=l.x+this.df*l.data.length/2,t1y=l.y),u="<text style='text-anchor: middle; font-family: Arial; font-size: 1em; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal; ' x='"+t1x+"' y='"+t1y+"' text-anchor='middle' font='10px &quot;Arial&quot;'",b="><tspan>"+l.data+"</tspan></text>";break;case"pl":case"po":l.data&&(u="<path style='stroke-opacity:1;' d='"+l.data+"'",b="/>",m["stroke-width"]=0,m["stroke-opacity"]=0,m.fill="none",I=!0);break;case"r":u="<path style='stroke-opacity:1;' d='M"+(l.x+(l.w<0?l.w:0))+","+(l.y+(l.h<0?l.h:0))+"L"+(l.x+(l.w<0?l.w:0)+Math.abs(l.w))+","+(l.y+(l.h<0?l.h:0))+"L"+(l.x+(l.w<0?l.w:0)+Math.abs(l.w))+","+(l.y+(l.h<0?l.h:0)+Math.abs(l.h))+"L"+(l.x+(l.w<0?l.w:0))+","+(l.y+(l.h<0?l.h:0)+Math.abs(l.h))+"Z'",b="/>",m["stroke-opacity"]=0,m["stroke-width"]=0,m.fill="none",I=!0}if(u){if(l.lc&&(I=!0,m["stroke-linecap"]=l.lc),l.lj&&(I=!0,m["stroke-linejoin"]=l.lj),l.ml&&(I=!0,m["stroke-miterlimit"]=Number(l.ml)),l.lw&&(I=!0,m["stroke-width"]=Number(l.lw),m["stroke-opacity"]=Number(l.lw)>0?1:0),l.ss&&(m.stroke=l.ss,m["stroke-width"]=1,m["stroke-opacity"]=1,I=!0),l.fs){if("rgba"==l.fs.substring(0,4)){for((f=l.fs.substring(6,l.fs.length-1).split(","))[3]=Number(f[3]),g=1-f[3],i=0;i<f.length-1;i++)f[i]=Math.round(f[3]*Number(f[i])+255*g);m["fill-opacity"]=g,f.splice(3,1),m.fill="rgb("+f.join(",")+")"}else m.fill=l.fs;I=!0}if(y=!1,v="",1==I)for($ in m)u+=" "+$+"='"+m[$]+"'";p=0,d=0,"t"==l.c?(c=l.ftr?l.ftr[0]:0,h=l.ftr?l.ftr[1]:0,l.fro?(IG$.measureText(10,l.data),p=c*T-5,d=h*k):(p=(l.x+c)*T,d=(l.y+h)*k-5),v+=" translate("+1*p.toFixed(4)+","+1*d.toFixed(4)+")",y=!0):(v+=" scale("+T+","+k+")",y=!0),l.ftr&&"t"!=l.c&&(v+=" translate("+l.ftr[0]+","+l.ftr[0]+")",y=!0),l.fro&&(v+=" rotate("+1*(180*l.fro/Math.PI).toFixed(2)+")",y=!0),y&&(u+=" transform='"+v+"'"),u+=b,P.push(u)}}P.push("</svg>")}else{for((n=Raphael(t[0],w,x)).setStart(),r=0,o=e.gr.length;r<o;r++){switch(s=null,m={},I=!1,(l=e.gr[r]).c){case"c":s=n.circle(l.cx,l.cy,l.r),m["stroke-width"]=0,m["stroke-opacity"]=0,I=!0;break;case"l":s=n.path("M"+l.x1+","+l.y1+"L"+l.x2+","+l.y2);break;case"t":l.fro?(l.x+=this.df*l.data.length/2,s=n.text(l.x*T,l.y*k,l.data)):s=n.text(0,0,l.data);break;case"pl":case"po":l.data&&(s=n.path(l.data),m["stroke-width"]=0,m["stroke-opacity"]=0,I=!0);break;case"r":s=n.rect(l.x+(l.w<0?l.w:0),l.y+(l.h<0?l.h:0),Math.abs(l.w),Math.abs(l.h)),m["stroke-opacity"]=0,m["stroke-width"]=0,I=!0;break;case"cr":_=[l.x*T,l.y*k,l.w*T,l.h*k];break;case"rc":_=[0,0,w,x]}s&&("t"!=l.c&&(m["clip-rect"]=_.join(",")),l.lc&&(I=!0,m["stroke-linecap"]=l.lc),l.lj&&(I=!0,m["stroke-linejoin"]=l.lj),l.ml&&(I=!0,m["stroke-miterlimit"]=Number(l.ml)),l.lw&&(I=!0,m["stroke-width"]=Number(l.lw),m["stroke-opacity"]=Number(l.lw)>0?1:0),l.ss&&(m.stroke=l.ss,m["stroke-width"]=1,m["stroke-opacity"]=1,I=!0),l.fs&&(m.fill=l.fs,I=!0),1==I&&s.attr(m),p=0,d=0,"t"==l.c?(c=l.ftr?l.ftr[0]:0,h=l.ftr?l.ftr[1]:0,l.fro?(s.getBBox(),p=c*T-5,d=h*k,s.translate(p,d),s.rotate(180*l.fro/Math.PI,0,0)):(p=(l.x+c)*T,d=(l.y+h)*k-5,s.translate(p,d))):s.scale(T,k,T,k),l.ftr&&"t"!=l.c&&s.translate(l.ftr[0]+p,l.ftr[1]+d),l.fro&&"t"!=l.c&&s.rotate(180*l.fro/Math.PI))}n.setFinish()}return P},drPlot:function(t,e,a,n){var r=this,o=r._parentdom,i=IG$.j$ext._w(o),l=IG$.j$ext._h(o),s=IG$.j$ext._w(t),p=IG$.j$ext._h(t),d=(e.w,e.h,[]);0==i&&0==l&&(i=r.width,l=r.height,IG$.j$ext._w(o,i),IG$.j$ext._h(o,l)),0==s&&0==p&&(s=r.width,p=r.height,IG$.j$ext._w(t,s),IG$.j$ext._h(t,p)),Math.abs(e.w-i)>5||Math.abs(e.h-l)>5?(s=e.w,p=e.h,IG$.j$ext._w(t,s),IG$.j$ext._h(t,p),i<s||l<p?o.css({overflow:"scroll"}):o.css({overflow:"hidden"})):(!1===n&&(IG$.j$ext._w(t,e.w),IG$.j$ext._h(t,e.h)),o.css({overflow:"hidden"}));var c,h=!!window.HTMLCanvasElement;return c=IG$.mcanvas||h,0==a?d=r.drPlotSVG(t,e,a):c?r.drPlotCanvas(t,e):r.drPlotSVG(t,e,a),d},updatePromptCtrls:function(){var panel=this,sop=panel.sheetoption,rpromptdlg=panel.rpromptPnl,rro=sop?sop.roption:null,s4,promptdef,sdom;if(rpromptdlg.hide(),panel.rpromptBtn.hide(),sdom=$("#promptcontent",panel.rpromptPnl),sdom.empty(),rro&&(rro.rpromptcontrols={items:[]},s4=rro.rprompts,s4)){try{promptdef=eval("("+s4+")")}catch(t){return void IG$.ShowError(IRm$.r1("E_PROMPT_CONTROL_DEF"),null,null,{errstack:t.stack})}if(promptdef&&promptdef.length>0){var tb=$("<table></table>").appendTo(sdom);$.each(promptdef,(function(t,e){var a,n,r=$("<tr></tr>").appendTo(tb),o={name:e.name,type:e.type.toLowerCase(),ctrl:null};$("<th>"+(e.title||"")+"</th>").appendTo(r);var i=$("<td></td>").appendTo(r);switch(e.type.toLowerCase()){case"combobox":if(a=$("<select></select>").appendTo(i),e.data&&"object"==typeof e.data&&e.data.length>0)for(n=0;n<e.data.length;n++)$("<option value='"+(e.data[n].value||e.data[n].name)+"'>"+(e.data[n].name||e.data[n].value)+"</option>").appendTo(a);break;case"textinput":(a=$("<input type='text'></input>").appendTo(i)).val(e.value||e.data||"")}o.ctrl=a,rro.rpromptcontrols.items.push(o)})),rpromptdlg.show(),panel.rpromptBtn.show();var mh=$("#prompttable",panel.rpromptPnl).height()+25+30;rpromptdlg.height(Math.min(mh,300))}}},moveCtrlPg:function(t){var e=this,a=e.plotdata,n=e.pg,r=e.rgraphzone,o=n+t;o<a.length&&o>-1?(e.pg=o,e.updatePgDisp(),r.empty(),e.drPlot(r,a[e.pg],!0,!1)):e.pgm>-1&&clearInterval(e.pgm)},updatePgDisp:function(){var t=this;t.currentPg.text("Page: "+(t.pg+1)+"/"+t.plotdata.length)},getDataColumns:function(){var t,e,a,n,r,o,i,l,s=[],p=this.mresults,d=p.results;if(p&&d&&d.length>0)for(e=(t=d[0]).rowfix,a=t.colfix,n=t.cols,r=t.data,o=0;o<n;o++){for(i=0;i<e;i++)l=0==i?r[i][o].code:l+"_"+r[i][o].code;s.push({cindex:o,isdata:!(o<a),name:l})}return s},render:function(t){var e=this,a=e.sheetoption.model.roption;e._parentdom=t,e.rgraphzone=$("<div></div>"),e.rgraphzone.appendTo(t),e.ctrlzone=$("<ul class='r-menu'><ul>").hide(),e.currentPg=$("<li class='r-disp'></li>").appendTo(e.ctrlzone),e.currentPg.text("Page: "+(e.pg+1)),$("<li class='r-back' title='Previous page'> </li>").appendTo(e.ctrlzone).bind("click",(function(){e.pgm>-1&&clearInterval(e.pgm),e.moveCtrlPg(-1)})),$("<li class='r-stop' title='Stop play'> </li>").appendTo(e.ctrlzone).bind("click",(function(){e.pgm>-1&&(clearInterval(e.pgm),e.pgm=-1)})),$("<li class='r-play' title='Play pages'> </li>").appendTo(e.ctrlzone).bind("click",(function(){e.pgm>-1&&clearInterval(e.pgm),e.pg=0,e.pgm=setInterval((function(){e.moveCtrlPg(1)}),e.pgs)})),$("<li class='r-slower' title='Slower play'> </li>").appendTo(e.ctrlzone).bind("click",(function(){e.pgm>-1&&clearInterval(e.pgm),e.pgs+=100,a.pgs=e.pgs,e.pgm=setInterval((function(){e.moveCtrlPg(1)}),e.pgs)})),$("<li class='r-faster' title='Fast play'> </li>").appendTo(e.ctrlzone).bind("click",(function(){e.pgm>-1&&clearInterval(e.pgm),e.pgs-100>100&&(e.pgs-=100,a.pgs=e.pgs),e.pgm=setInterval((function(){e.moveCtrlPg(1)}),e.pgs)})),$("<li class='r-forward' title='Next page'> </li>").appendTo(e.ctrlzone).bind("click",(function(){e.pgm>-1&&clearInterval(e.pgm),e.moveCtrlPg(1)})),e.ctrlzone.appendTo(t),IG$.drawLicenseTag(this.instance,t),e.rstat=$("<div class='m-r-rstat'></div>").hide();var n=$("<div class='m-r-rstat-button'><span id='rstat-title'>Statistics Summary</span><div id='rstat-close'></div></div>").appendTo(e.rstat);$("#rstat-close",n).bind("click",(function(){a.showsummary=!1,e.rstat.hide()})),e.rstatcontent=$("<div class='m-r-rstatcontent'></div>").appendTo(e.rstat),e.rstat.appendTo(t),e.rpromptBtn=$("<div class='m-r-promptbutton'><div class='icon'></div><span>Prompt</span></div>").hide(),e.rpromptBtn.appendTo(t),e.rpromptPnl=$("<div class='m-r-promptpanel'><table id='prompttable'><tr id='promptcontent'></tr><tr><td><button id='promptrequest'>Request</button></td></tr></table></div>").hide(),e.rpromptPnl.appendTo(t),sdom=$("#promptrequest",e.rpromptPnl),sdom.bind("click",(function(){e.requestR()})),e.rpromptBtn.bind("click",(function(){e.rpromptPnl.toggle()}))},setPanelSize:function(t,e){var a=this;a.rt>-1&&clearTimeout(a.rt),a.rt=setTimeout((function(){var n=a.rgraphzone;n.empty(),a.plotdata&&a.plotdata.length>0&&(a.width=t,a.height=e,a.drPlot(n,a.plotdata[a.pg],!0,!0))}),200)},getDrillXML:function(){return""},getExportData:function(t,e,a,n,r,o,i,l){var s,p=this,d={},c=p.plotdata,h=p.rgraphzone;c&&c.length>p.pg&&(s=c[p.pg],d={type:"chart",x:e,y:a,d_width:o,d_height:i,width:IG$.j$ext._w(h),height:IG$.j$ext._h(h),docid:r},"SVG"!==n&&p.crv&&p.crv[0]&&p.crv[0].toDataURL?d.image_data={type:"png",data:p.crv[0].toDataURL("image/png")}:d.image_data={type:"svg",data:Base64.encode(p.drPlot(h,s,!1).join(""))}),l.execute(d)},applyOptions:function(t,e){t&&e&&(this.reportoption=t,this.sheetoption=e)}});
IG$.d$PscrEdit=$s.extend($s.window,{title:"Script",layout:"fit",height:600,width:750,modal:!0,draggable:!0,resizable:!0,focusOnToFront:!0,bodyPadding:6,initApp:function(){var e=this,t=e.down("[name=rscript]"),o=(e.down("[name=rprompt]"),e.sheetoption.model);t.setValue(o.python_script)},confirm:function(){var e=this,t=e.down("[name=rscript]");e.down("[name=rprompt]");e.sheetoption.model.python_script=t.getValue(),e.callback&&e.callback.execute(),e.close()},initComponent:function(){$s.apply(this,{items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},bodyPadding:6,items:[{xtype:"tabpanel",name:"meT",activeTab:0,flex:1,headerPosition:"right",tabPosition:"top",preventHeader:!0,border:0,layout:"fit",items:[{xtype:"panel",title:"Script",layout:{type:"vbox",align:"stretch"},border:0,items:[{xtype:"textarea",grow:!1,flex:1,name:"rscript",fieldLabel:IRm$.r1("L_RSCRIPT"),hideLabel:!0,anchor:"100%"}]},{xtype:"panel",title:"Prompt",layout:"fit",border:0,items:[{xtype:"textarea",grow:!1,name:"rprompt",fieldLabel:IRm$.r1("L_R_PROMPT"),hideLabel:!0,anchor:"100%"}]}]}]}],listeners:{afterrender:function(){this.initApp()},scope:this},buttons:["->",{xtype:"button",text:IRm$.r1("B_REQUEST"),handler:function(){this.confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]}),IG$.d$PscrEdit.superclass.initComponent.call(this)}}),IG$.v$pyViewer=$s.extend(IG$.v$pnl,{sheetobj:null,pg:0,pgm:-1,pgs:2e3,rt:-1,df:6,sized:!0,aftsized:!1,layout:"fit",_init:!1,applyReportResult:function(e,t,o,n,i){var a=this;i||(a.mresults=e,a.olapset=t,a.reportoption=o,a.sheetoption=n),a._init&&(a.getWidth(),a.getHeight(),setTimeout((function(){if(e.r_python)a.rs_reqPython(e.r_python);else if(1==a.sized){var t=ig$.bootconfig.scmap.nbt;window.requirejs&&window.require?a.reqPython():IG$.getScriptCache(t,new IG$.callBackObj(this,(function(){a.reqPython()})))}}),10))},reqPython:function(){var e,t=this,o=t.olapset,n=t.reportoption,i=t.sheetobj;if(t.execution_count=0,t._process_executed=0,o&&o.jobid){i.sheetoption.panelwidth=IG$.j$ext._w(t._parentdom),i.sheetoption.panelheight=IG$.j$ext._h(t._parentdom),e=n.getCurrentPivot(),t.customLoad(!0,!0);var a=new IG$._rpc$;a.init(t,{ack:"olapservice",payload:{uid:n.uid,jobid:o.jobid,option:"jupyter_script",active:""+i.sheetindex,pivotresult:"F",pythonresult:"T"},mbody:e,meta_type:t.meta_type||"report"},t,(function(t){var a=this,s=a.down("[name=rg]"),r=$(".notebook",s.body.dom),c=t.session_id;(r.empty(),a.region=r,a.execution_count=t.execution_count,a.session_id=c,c)&&((IG$._ipt_location=IG$._ipt_location||{})[c]=a);var p=new IG$._rpc$;p.init(a,{ack:"olapservice",payload:{uid:n.uid,jobid:o.jobid,option:"pivot",active:""+i.sheetindex,pivotresult:"F",pythonresult:"T",session_id:c},mbody:e,meta_type:a.meta_type||"report"},a,a.rs_reqPython),p.send()})),a.send()}},rs_reqPython:function(e){var t,o=this.down("[name=rg]"),n=$(".notebook",o.body.dom);t=(t=e?e.execute_result:null)?Base64.decode(t):"No results on python execution",e.session_id||$(t).appendTo(n)},applyPython:function(e){var t,o=this,n=o.region;switch(o.execution_count>o._process_executed&&o.customLoad(!0),e.msg_type){case"status":if(e.content&&e.content.execution_state&&"restarting"===e.content.execution_state)o.customLoad(!1);break;case"kernel_info_reply":case"comm_info_reply":default:break;case"display_data":t=e.content.data?e.content.data:null,$.each(t,(function(e,t){if("text/html"==e){var o='<script type="text/javascript">';t.indexOf(o);var i=$("<div class='igc-code-block'></div>").appendTo(n);$(t).appendTo(i)}else if("text/plain"==e){i=$("<div class='igc-code-block'></div>").appendTo(n);$("<pre>"+t+"</pre>").appendTo(i)}else if("image/png"==e){i=$("<div class='igc-code-block'></div>").appendTo(n);$("<img src='data:image/png;base64,"+t+"'></img>").appendTo(i)}}));break;case"execute_reply":o._process_executed++,o.execution_count<=o._process_executed&&o.customLoad(!1);break;case"error":t=[e.content.ename,e.content.evalue];var i=$("<div class='igc-code-block'></div>").appendTo(n);$.each(t,(function(e,t){$("<span class='igc-code-error'>"+t+"</span>").appendTo(i)}));break;case"stream":if(e.content&&e.content.name&&"stdout"==e.content.name){var a=e.content.text;i=$("<div class='igc-code-block'></div>").appendTo(n);$("<pre>"+a+"</pre>").appendTo(i)}}},customLoad:function(e){var t,o,n=this;e?(o={msg:IRm$.r1("B_PROC")+" <button id='m-mec-loader'>"+IRm$.r1("B_PROC_CANCEL")+"</button>"},ld=n.setLoading(o),t=$(n.rendermask),$("#m-mec-loader",t).bind("click",(function(){n.cancelPython()}))):n.setLoading(!1,void 0,!0)},cancelPython:function(){var e=this,t=e.olapset,o=e.reportoption,n=e.sheetobj,i=new IG$._rpc$,a=e.session_id;e.execution_count=0,t&&t.jobid&&a&&o&&(i.init(e,{ack:"olapservice",payload:{uid:o.uid,jobid:t.jobid,active:""+n.sheetindex,session_id:a,option:"cancel_python"},mbody:{}},e,(function(e){"S"==(e?e.status:null)&&this.setLoading(!1)}),null),i.showerror=!1,i.send())},_ctrlwindow:function(e){var t,o=this;if("cmd_py_edit"===e)t=new IG$.d$PscrEdit({instance:o.instance,sheetoption:o.sheetoption,callback:new IG$.callBackObj(o,(function(){}))}),IG$.checkLogin(this,t)},init_f:function(){var e=this;e.getWidth(),e.getHeight(),e.body.dom;e._init=!0,e.mresults&&e.applyReportResult(null,null,null,null,!0)},initComponent:function(){var e=this;$s.apply(e,{items:[{xtype:"panel",name:"rmain",layout:"card",items:[{name:"rgraph",xtype:"panel",layout:"fit",items:[{name:"rg",autoScroll:!0,html:"<div id='notebook-container' class='notebook'></div>"}]}]}]}),e.on("resize",(function(t,o,n){e.CLS.resize.call(e,o,n)})),e.on("afterrender",(function(){e.CLS.afterrender.call(e,e)})),IG$.v$pyViewer.superclass.initComponent.call(e)},CLS:{resize:function(e,t){var o=this;e>0&&t>0&&(o.setPanelSize(e,t),o.sized=!0,1==o.aftsized&&(o.aftsized=!1))},afterrender:function(e){this.init_f()}},setPanelSize:function(e,t){var o=this;o.rt>-1&&clearTimeout(o.rt),o.rt=setTimeout((function(){}),20)},getDrillXML:function(){return""},getExportData:function(e,t,o,n,i,a,s,r){var c,p=this,d={},l=p.plotdata,u=p.rgraphzone;l&&l.length>p.pg&&(c=l[p.pg],d={type:"chart",x:t,y:o,d_width:a,d_height:s,width:IG$.j$ext._w(u),height:IG$.j$ext._h(u),docid:i},"SVG"!==n&&p.crv&&p.crv[0]&&p.crv[0].toDataURL?d.image_data={type:"png",data:p.crv[0].toDataURL("image/png")}:d.image_data={type:"svg",data:Base64.encode(p.drPlot(u,c,!1).join(""))}),r.execute(d)},applyOptions:function(e,t){e&&t&&(this.reportoption=e,this.sheetoption=t)}});
IG$.v$anViewer=$s.extend(IG$.v$pnl,{sheetobj:null,pg:0,pgm:-1,pgs:2e3,rt:-1,df:6,sized:!0,aftsized:!1,layout:"fit",_init:!1,applyReportResult:function(a,t,e,n,s){var i=this,o=i.down("[name=rg]"),l=$(".d_analysis",o.body.dom),p=$(".d_analysis_rg",l),d=$(".d_analysis_empt",l);p.hide(),d.show(),s||(i.mresults=a,i.olapset=t,i.reportoption=e,i.sheetoption=n),i._init&&(i.getWidth(),i.getHeight(),setTimeout((function(){a.r_analysis?i.rs_reqAnalysis(a.r_analysis):1==i.sized&&i.reqAnalysis()}),10))},reqAnalysis:function(){var a,t=this,e=t.olapset,n=t.reportoption,s=t.sheetobj;if(e&&e.jobid){s.sheetoption.panelwidth=IG$.j$ext._w(t._parentdom),s.sheetoption.panelheight=IG$.j$ext._h(t._parentdom),a=n.getCurrentPivot();var i=new IG$._rpc$;i.init(t,{ack:"olapservice",payload:{uid:n.uid,jobid:e.jobid,option:"pivot",active:""+s.sheetindex,pivotresult:"F",analysisresult:"T"},mbody:a,meta_type:t.meta_type||"report"},t,t.rs_reqAnalysis),i.send()}},rs_reqAnalysis:function(a){var t,e=this.down("[name=rg]"),n=$(".d_analysis",e.body.dom),s=$(".d_analysis_rg",n),i=$(".d_analysis_empt",n);t=a?a.table_data:null,s.empty(),i.hide(),t&&t.length?($.each(t,(function(a,t){var e,n,i=[],o=[];i.push("<table class='t_analysis'>"),$.each(t.headers,(function(a,t){i.push("<tr>"),$.each(t,(function(a,t){i.push("<th class='anal-"+t.stylename+"'"+(t.colspan?" colspan='"+t.colspan+"'":"")+">"+(t.text||"")+"</th>")})),i.push("</tr>")})),$.each(t.rows,(function(a,t){i.push("<tr>"),$.each(t,(function(a,t){var e=null;if(t.data&&"cellchart"==t.data.xtype){var n={name:e="cellchart_"+a,data:t.data};o.push(n)}"data"==t.stylename?i.push("<td class='anal-data'"+(t.colspan?" colspan='"+t.colspan+"'":"")+(e?" id='"+e+"'":"")+">"+(t.formatvalue||t.value||t.text)+"</td>"):i.push("<td class='anal-"+t.stylename+"'"+(t.colspan?" colspan='"+t.colspan+"'":"")+(e?" id='"+e+"'":"")+">"+(t.text||"")+"</td>")})),i.push("</tr>")})),i.push("</table>");var l=$(i.join("")).appendTo(s);if(o.length&&$.each(o,(function(a,t){var e=$("#"+t.name,l);e.empty();var n=$("<div></div>").appendTo(e),s=t.data.names,i=t.data.data,o={type:"bar",defaultPixelsPerValue:s.length?parseInt(120/s.length):120};o.barWidth=o.defaultPixelsPerValue,o.width=120,o.height=60,o.tooltipFormat="{{offset:offset}} {{y:val}}",o.xvalues=s,n.sparkline(i,o)})),t.data&&"prediction"==t.data.xtype){var p=$("<tr></tr>").appendTo(l),d=($("<td class='anal-header'>Prediction</td>").appendTo(p),$("<td colspan='2'></td>").appendTo(p)),r=$("<table></table>").appendTo(d),h={params:[]};for(e=0;e<t.data.xheaders.length;e++){var u,c=t.data.xheader_indexes[e],m=$("<tr></tr>").appendTo(r),v=$("<td><span>"+t.data.xheaders[e]+"</span></td>").appendTo(m),y=$("<td></td>").appendTo(m);if(t.data.doublemap[c]){u=t.data.doublemap[c];var f=[];for(n in f.push("<select name='sinput"+e+"'>"),u)f.push("<option value='"+u[n]+"'>"+n+"</option>");i.push("</select>");var _=$(f.join("")).appendTo(y);h.params.push({html:_,index:e})}else{var g=$("<input type='text' name='sinput"+e+"'></input>").appendTo(y);h.params.push({html:g,index:e})}}m=$("<tr></tr>").appendTo(r),v=$("<td></td>").appendTo(m);var x=$("<button>Calculate</button>").appendTo(v);y=$("<td></td>").appendTo(m);x.bind("click",(function(){var a,e=t.data.params[0],n="";for(a=1;a<h.params.length;a++){var s=h.params[a-1].html.val();e+=(s=Number(s))*t.data.params[a]}if(t.data.doublemap[t.data.ycolumn]&&(u=t.data.doublemap[t.data.ycolumn])){var i=Math.floor(e);for(c in u)if(u[c]<=i&&u[c]+1>i){n=c;break}}y.html(e+(n?" ("+n+")":""))}))}})),s.show()):i.show()},_ctrlwindow:function(a){},init_f:function(){var a=this;a.getWidth(),a.getHeight(),a.body.dom;a._init=!0,a.mresults&&a.applyReportResult(null,null,null,null,!0)},initComponent:function(){var a=this;$s.apply(a,{items:[{xtype:"panel",name:"rmain",layout:{type:"vbox",align:"stretch"},items:[{name:"rg",autoScroll:!0,scroll:"xy",html:"<div class='d_analysis'><div class='d_analysis_rg'></div><div class='d_analysis_empt'><div class='d_analysis_empt_bg></div><span>No Analysis Result Data </span></div></div>"}]}]}),a.on("resize",(function(t,e,n){a.CLS.resize.call(a,e,n)})),a.on("afterrender",(function(){a.CLS.afterrender.call(a,a)})),IG$.v$anViewer.superclass.initComponent.call(a)},CLS:{resize:function(a,t){var e=this;a>0&&t>0&&(e.setPanelSize(a,t),e.sized=!0,1==e.aftsized&&(e.aftsized=!1))},afterrender:function(a){this.init_f()}},setPanelSize:function(a,t){var e=this;e.rt>-1&&clearTimeout(e.rt),e.rt=setTimeout((function(){}),20)},getDrillXML:function(){return""},getExportData:function(a,t,e,n,s,i,o,l){var p,d=this,r={},h=d.plotdata,u=d.rgraphzone;h&&h.length>d.pg?(p=h[d.pg],r={type:"chart",x:t,y:e,d_width:i,d_height:o,width:IG$.j$ext._w(u),height:IG$.j$ext._h(u),docid:s},"SVG"!==n&&d.crv&&d.crv[0]&&d.crv[0].toDataURL?(r.image_data=d.crv[0].toDataURL("image/png"),r.image_type="png"):(r.image_data=Base64.encode(d.drPlot(u,p,!1).join("")),r.image_type="svg"),l.execute(r)):l.execute(r)},applyOptions:function(a,t){a&&t&&(this.reportoption=a,this.sheetoption=t)}});
IG$.__analoption=IG$.__analoption||{analcateg:[{name:"All",value:"all"},{name:"Descriptive Statistics",value:"descriptive"},{name:"Compare Means",value:"compare"},{name:"Regression",value:"regression"},{name:"Process",value:"process"}],analtype:[{label:"Descriptive Statistics",type:"descriptive",img:"column",grp:"descriptive",opt:{popt_g1:1,popt_output:1}},{label:"Frequencies",type:"frequencies",img:"column",grp:"descriptive",opt:{popt_g1:1,popt_output:1}},{label:"Means",type:"means",img:"column",grp:"compare",opt:{popt_g1:1,popt_output:1}},{label:"One-Sample T Test",type:"onesamplettest",img:"column",grp:"compare",opt:{popt_g1:1,popt_output:1}},{label:"Independent Samples T Test",type:"independent_ttest",img:"column",grp:"compare",opt:{popt_g1:1,popt_output:1}},{label:"Paired_Samples T Test",type:"paired_tt",img:"column",grp:"compare",opt:{popt_g1:1,popt_output:1}},{label:"One-Way ANOVA",type:"anova",img:"column",grp:"compare",opt:{popt_g1:1,popt_output:1}},{label:"Linear",type:"linear",img:"column",grp:"regression",opt:{popt_g1:0,popt_output:1,popt_g2:1}},{label:"Process Capability Indexes",type:"proc_cap_index",img:"column",grp:"process",opt:{popt_g1:1,popt_output:1}}]},IG$.analeditor=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!1,width:400,height:500,_init:function(){var e,t=this.down("[name=g_list]"),n=this.sheetoption.model;e=n.anal_options=n.anal_options||[],$.each(e,(function(e,t){t.selected=!0})),t.store.loadData(e)},editItem:function(e){var t=this,n=new IG$.analwizard({instance:t.instance,sheetoption:t.sheetoption,_eobj:e.data,callback:new IG$.callBackObj(t,(function(){}))});IG$.showDlg(t,n)},_confirm:function(){var e,t,n=this,o=n.sheetoption.model,a=[],i=n.down("[name=g_list]");for(e=0;e<i.store.data.items.length;e++)t=i.store.data.items[e],a.push(t.data);o.anal_options=a,n.callback&&n.callback.execute(n),n.close()},initComponent:function(){this.title=IRm$.r1("T_ANAL_WIZARD"),$s.apply(this,{items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:ig$.padding,items:[{xtype:"gridpanel",name:"g_list",store:{},flex:1,selType:"checkboxmodel",selModel:{mode:"MULTI"},columns:[{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name",tdCls:"igc-td-link"},{text:IRm$.r1("B_DESC"),flex:1,dataIndex:"description"},{xtype:"actioncolumn",width:60,items:[{iconCls:"icon-grid-config",tooltip:"Config item",handler:function(e,t,n){var o=e.store.getAt(t);this.editItem(o)},scope:this},{iconCls:"icon-grid-delete",tooltip:"Delete Item",handler:function(e,t,n){var o=e.store.getAt(t);e.store.remove(o)},scope:this}]}],listeners:{cellclick:function(e,t,n,o,a,i){1==n&&this.editItem(o)},scope:this},tbar:[{text:IRm$.r1("L_NEW_ANAL"),handler:function(){var e=this,t={},n=new IG$.analwizard({instance:e.instance,reportoption:e.reportoption,sheetoption:e.sheetoption,_eobj:t,callback:new IG$.callBackObj(e,(function(n){e.down("[name=g_list]").store.add(t)}))});IG$.checkLogin(this,n)},scope:this},{text:IRm$.r1("L_DELETE_CHECKED"),handler:function(){},scope:this}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this._init()}}}),IG$.analeditor.superclass.initComponent.apply(this,arguments)}}),IG$.analwizard=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!1,width:550,height:480,opt_panels:[{name:"popt_output",condition:null},{name:"popt_g1",condition:null},{name:"popt_g2",condition:null}],_init:function(){var e,t=this,n=t.sheetoption.model,o=(n.anal_options,t.down("[name=_b]"),t.down("[name=g_inp1]")),a=t.down("[name=g_out1]"),i=[],l=[];for(e=0;e<n.rows.length;e++)i.push(IG$.CloneObject(n.rows[e])),l.push(IG$.CloneObject(n.rows[e]));for(e=0;e<n.measures.length;e++)i.push(IG$.CloneObject(n.measures[e])),l.push(IG$.CloneObject(n.measures[e]));o.store.loadData(i),a.store.loadData(l),t._einit()},_einit:function(){var e,t,n,o=this,a=o.down("[name=_b]"),i=o.down("[name=g_inp1]"),l=o.down("[name=g_out1]"),s=i.getSelectionModel(),p=l.getSelectionModel(),r=o._eobj,c={};if($.each(IG$.__analoption.analtype,(function(e,t){if(t.type==r.analtype)return n=t.grp,!1})),o.down("[name=analgroup]").setValue(n||""),a.setValue(r.analtype),s.clear(),p.clear(),r.input_fields){for(e=0;e<r.input_fields.length;e++)c[r.input_fields[e]]=1;for(e=0;e<i.store.data.items.length;e++)c[(t=i.store.data.items[e]).get("uid")]&&s.select(t,!0)}if(r.options=r.options||{},o.down("[name=p_general]").setAllValues(r,1),r.regression_fields){var m=r.regression_fields;for(c={},e=0;e<m.length;e++)c[m[e]]=1;for(e=0;e<l.store.data.items.length;e++)c[(t=l.store.data.items[e]).get("uid")]&&p.select(t,!0)}$.each(o.opt_panels,(function(e,t){o.down("[name="+t.name+"]").setAllValues(r.options,1)})),o._elayout()},_elayout:function(){var e,t=this,n=t._eobj,o=n?n.analtype:null;o&&(e=t._get_tp(o),$.each(t.opt_panels,(function(n,o){var a=t.down("[name="+o.name+"]");e&&e.opt&&e.opt[o.name]?a.show():a.hide()})))},_get_tp:function(e){var t=null;return $.each(IG$.__analoption.analtype,(function(n,o){if(o.type==e)return t=o,!1})),t},_econfirm:function(){var e,t,n,o=this,a=o._eobj,i=o.down("[name=g_inp1]"),l=o.down("[name=g_out1]"),s=1;if(a){if(e=i.getSelectionModel().selected,n=l.getSelectionModel().selected,a.input_fields=[],a.options=a.options||{},a.regression_fields=[],e)for(t=0;t<e.length;t++)a.input_fields.push(e.items[t].get("uid"));if(n)for(t=0;t<n.length;t++)a.regression_fields.push(n.items[t].get("uid"));o.down("[name=p_general]").getAllValues(a,1)?s=0:$.each(o.opt_panels,(function(e,t){if(o.down("[name="+t.name+"]").getAllValues(a.options,1))return s=0,!1}))}return s},_confirm:function(){var e=this;e._econfirm()&&(e.callback&&e.callback.execute(),e.close())},_changeGroup:function(){var e,t,n,o=this,a=o.down("[name=analgroup]"),i=o.analtypelist,l=o.down("[name=_b]"),s=a.getValue(),p=o.sheetoption.model.anal_options,r=l.getValue()||p.analtype,c=[];if(s!=o.analtype){for(t=0;t<i.length;t++)e=i[t],"all"!=s&&e.grp!=s&&r!=e.type||c.push(e);for(l.store.loadData(c),t=0;t<l.store.data.items.length;t++)if((n=l.store.data.items[t]).data.type==r){setTimeout((function(){l.setValue(n.data.type)}),100);break}o.analtype=s}},initComponent:function(){var e=this,t=IG$.__analoption.analtype;e.title=IRm$.r1("T_ANAL_WIZARD"),e.analtypelist=t,e._custPnls=[],$s.apply(e,{items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},autoScroll:!0,border:0,padding:ig$.padding,items:[{xtype:"fieldset",title:"General",name:"p_general",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",fieldLabel:IRm$.r1("B_NAME"),name:"t_name",mapname:"name",required:!0},{xtype:"textarea",fieldLabel:IRm$.r1("B_DESC"),mapname:"description",name:"t_desc",height:120},{xtype:"combobox",name:"analgroup",fieldLabel:IRm$.r1("L_ANAL_GROUP"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:IG$.__analoption.analcateg},listeners:{change:function(e,t,n,o){this._changeGroup()},scope:this}},{xtype:"combobox",name:"_b",fieldLabel:IRm$.r1("L_ANALYSIS_TYPE"),queryMode:"local",valueField:"type",displayField:"label",mapname:"analtype",store:{xtype:"store",fields:["type","label"]},listeners:{change:function(e,t,n,o){var a=this,i=(a.sheetoption.model.anal_options,t);a._eobj.analtype=i,a._elayout()},scope:this}}]},{xtype:"fieldset",title:IRm$.r1("L_ASTEP_1"),name:"popt_output",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Input",layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",height:200,name:"g_inp1",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{},columns:[{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name"}]}]}]},{xtype:"fieldset",title:IRm$.r1("L_ASTEP_2"),name:"popt_g1",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Output options",layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",boxLabel:"Summary statistics",name:"s_stat"},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",boxLabel:"Confidence Level for Mean",name:"s_conf_level_mean"},{xtype:"numberfield",name:"s_conf_level_mean_val"}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",boxLabel:"Kth Largest / Smallest",name:"s_kth_ls"},{xtype:"numberfield",name:"s_kth_ls_val"}]}]}]},{xtype:"fieldset",title:IRm$.r1("L_ASTEP_2"),name:"popt_g2",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Output",layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",height:200,name:"g_out1",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{},columns:[{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name"}]}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this._init()}}}),IG$.analwizard.superclass.initComponent.apply(this,arguments)}});
IG$.dlg_sel_objs=$s.extend($s.window,{width:700,height:550,layout:"fit",modal:!0,bodyPadding:ig$.padding,move_selections:function(e,t){var o,n=this,i=n.down("[name=dbpool]").getValue(),a=n.down("[name="+(e?"g_tgt":"g_src")+"]"),l=n.down("[name="+(e?"g_src":"g_tgt")+"]"),s=a.getSelectionModel().selected,d=(l.getSelectionModel().selected,{});if(1==e)$.each(s.items,(function(e,t){a.store.remove(t)}));else{for(o=0;o<l.store.data.items.length;o++)d[l.store.data.items[o].get("uid")]=1;$.each(s.items,(function(e,t){var o=t.get("type").toLowerCase();/(folder|table|inlineview|dataset)/.test(o)&&!d[t.get("uid")]&&(t.set("cubeuid",i),l.store.add(t))}))}},commit$f:function(){var e,t,o,n=this,i=n.down("[name=g_tgt]"),a=n.down("[name=dbpool]"),l=a.getValue(),s=i.store.data.items,d=[];if(s.length){for(e=0;e<s.length;e++)d.push(s[e].data);for(e=0;e<a.store.data.items.length;e++)if((t=a.store.data.items[e].data).uid==l){o={uid:t.uid,name:t.name,type:t.type,nodepath:t.nodepath};break}n.callback&&n.callback.execute([d,o]),n.close()}else IG$.alertmsg(ig$.appname,IRm$.r1("L_SELECT_ITEM"),null,null,0,"")},initComponent:function(){var e=this;$s.apply(e,{title:IRm$.r1("L_SELECT_ITEMS"),items:[{xtype:"panel",flex:1,layout:{type:"hbox",align:"stretch"},defaults:{padding:ig$.padding},items:[{xtype:"panel",title:IRm$.r1("L_AVAILABLE_OBJ"),flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"combobox",displayField:"name",name:"dbpool",valueField:"uid",fieldLabel:IRm$.r1("B_DATASOURCE"),store:{fields:["name","disp","uid"]},listeners:{change:function(e){var t,o=e.getValue();this.down("[name=bgroup]");t=o?{uid:o,type:"ROOT",name:"Business items",leaf:!1,expanded:!0,children:[{type:"load",name:"Loading..."}]}:{type:"ROOT",name:"Select source"},(t=this.down("[name=g_src]").setRootNode(t)).get("uid")&&t.expand()},scope:this}},new IG$.naviTree({instance:e.instance,showtoolbar:!1,cubebrowse:!0,ddGroup:"_I$RD_G_",name:"g_src",flex:1,visibleItems:"folder;table;inlineview;dataset;",metatypes:"Table;Metric;InlineView;DataSet;Folder",enabledrag:!0,border:0,_search:!0,isdatasource:!0,custDblClickFunc:new IG$.callBackObj(e,(function(e){this.move_selections(0,e)}))})]},{xtype:"container",width:40,layout:"fit",items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:">",handler:function(){e.move_selections(0)},scope:this},{xtype:"button",text:"<",handler:function(){e.move_selections(1)},scope:this},{xtype:"container",flex:1}]}]},{xtype:"panel",title:IRm$.r1("L_SELECTED_OBJ"),flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"t_sel",emptyText:IRm$.r1("L_SEARCH_KWD"),labelWidth:50,fieldLabel:IRm$.r1("B_SEARCH")},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){}}]},{xtype:"gridpanel",name:"g_tgt",selType:"checkboxmodel",selModel:{mode:"MULTI"},flex:1,viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_"},listeners:{beforedrop:function(t,o,n,i,a){var l,s,d,r,c={},p=e.down("[name=g_tgt]"),m=e.down("[name=dbpool]").getValue();for(o.copy=!0,l=0;l<p.store.data.items.length;l++)c[(s=p.store.data.items[l]).get("uid")]=1;for(l=0;l<o.records.length;l++)r=(s=o.records[l]).get("type").toLowerCase(),/(folder|table|inlineview|dataset)/.test(r)&&!c[s.get("uid")]&&(c[(d={uid:s.get("uid"),type:s.get("type"),name:s.get("name"),nodepath:s.get("nodepath"),cubeuid:m}).uid]=1,this.store.add(d));return!1},drop:function(e,t,o,n){t.copy}}},ddGroup:"_I$RD_G_",enabledrop:!0,enabledrag:!1,store:{fields:["name","uid","dbpool"]},columns:[{text:IRm$.r1("B_NAME"),flex:1,width:180,dataIndex:"name"},{text:IRm$.r1("L_DB_POOL"),width:180,dataIndex:"dbpool"}],listeners:{itemdblclick:function(t,o,n,i,a){e.move_selections(1)},scope:this}}]}]}],buttons:[{xtype:"button",text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){e.commit$f()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.dlg_sel_objs.superclass.initComponent.call(this)}});
IG$.vsEdtr=$s.extend($s.window,{modal:!0,layout:{type:"fit",align:"stretch"},closable:!0,resizable:!0,width:400,height:500,_init:function(){var e=this;$s.defaults(e.visual_story,{enabled:!0,cssname:"normal",top:"10px",left:"10px"}),e.setAllValues(e.visual_story)},_confirm:function(){var e=this;e.getAllValues(e.visual_story)||(e.callback&&e.callback.execute(),e.close())},initComponent:function(){var e=this;$s.apply(e,{title:IRm$.r1("L_FORMVIEWER"),padding:ig$.padding,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:ig$.padding,autoScroll:!0,items:[{xtype:"fieldset",title:IRm$.r1("B_GENERAL"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",name:"enabled",fieldLabel:IRm$.r1("B_VISIBLE"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"textfield",name:"cssname",fieldLabel:IRm$.r1("L_CSS_NAME")},{xtype:"textfield",name:"condition",fieldLabel:IRm$.r1("L_CONDITION")}]},{xtype:"fieldset",title:"Template",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",fieldLabel:IRm$.r1("L_TEMPLATE_CONTEXT"),name:"context"}]},{xtype:"fieldset",title:"Location",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",name:"top",fieldLabel:IRm$.r1("B_TOP")},{xtype:"textfield",name:"left",fieldLabel:IRm$.r1("B_LEFT")},{xtype:"textfield",name:"width",fieldLabel:IRm$.r1("B_WIDTH")},{xtype:"textfield",name:"height",fieldLabel:IRm$.r1("B_HEIGHT")},{xtype:"textfield",name:"bottom",fieldLabel:IRm$.r1("B_BOTTOM")},{xtype:"textfield",name:"right",fieldLabel:IRm$.r1("B_RIGHT")}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:e},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:e}],listeners:{afterrender:function(t){e._init()}}}),IG$.vsEdtr.superclass.initComponent.call(this)}});
IG$.c$ClpBrd=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:500,height:400,init_f:function(){var e=this,t=e.down("[name=outputtype]"),a=e.down("[name=p_page]"),l=e.down("[name=n_page]"),n=e.mresult;n&&n.rowcnt>n._tabledata.length&&(l.setValue("Partial page start "+(n.pagestart+1)+" to "+(n.pageend+1)),a.show()),t.setValue("comma"),e.setOutTxt()},changeOutTyp:function(){this.setOutTxt()},setOutTxt:function(){var e,t,a,l,n=this,s=n.down("[name=outputtype]"),o=n.down("[name=textoutput]"),i=n.down("[name=tableoutput]"),r=n.down("[name=btntableview]"),u=n.mresult,m=u&&u._tabledata&&u._tabledata.length>0?u._tabledata:null,d=[],p=s.getValue(),c=$(i.body.dom),h=",",b=!1,f="",x=!1;if(m){switch(p){case"tab":h="\t";break;case"comma":f='"';break;case"rawcomma":b=!0;break;case"rawtab":b=!0,h="\t";break;case"table":x=!0}if(0==x)for(r.setVisible(!1),e=0;e<m.length;e++){for(a="",t=0;t<m[e].length;t++)l=f+(1==b?m[e][t].code||"":m[e][t].text||m[e][t].code||"")+f,a=0==t?l:a+h+l;d.push(a)}else{for(r.setVisible(!0),r.setValue(!1),d.push("<table>"),e=0;e<m.length;e++){for(a="<tr>",t=0;t<m[e].length;t++)a+=l="<td>"+(m[e][t].text||m[e][t].code||"&nbsp;")+"</td>";d.push(a+"</tr>")}d.push("</table>"),c.empty(),c.html(d.join(""))}}o.setVisible(!0),i.setVisible(!1),o.setValue(d.join("\n"))},changeViewMode:function(){var e=this,t=e.down("[name=textoutput]"),a=e.down("[name=tableoutput]"),l=e.down("[name=btntableview]").getValue();t.setVisible(!l),a.setVisible(l)},getAllData:function(){var e,t,a=this,l=a.sheetview,n=a.mresult;e=l.reportoption.getCurrentPivot(),t=l.olapset.requestPivotResult(e,null,l.sheetindex,null,0,n.rowcnt+10,new IG$.callBackObj(a,(function(e){var t=this,a=t.down("[name=n_page]");e&&!e.iserror&&e.mresults&&e.mresults.results.length?(t.mresult=e.mresults.results[0],a.setValue("Data Fetched... "+t.mresult._tabledata.length+" Rows"),t.setOutTxt()):a.setValue("Error while fetching data from server..")})),l._job,!0,!0),t.payload&&l.fireEvent("runsheet",l,t)},initComponent:function(){var e=this;e.title=IRm$.r1("L_CLIPBOARD_COPY"),$s.apply(this,{items:[{xtype:"panel",bodyBorder:!1,layout:{type:"vbox",align:"stretch"},items:[{name:"outputtype",xtype:"combobox",fieldLabel:IRm$.r1("L_OUTPUT_TYPE"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:"Tab separated",value:"tab"},{name:"Comma separated",value:"comma"},{name:"Raw data (Tab)",value:"rawtab"},{name:"Raw data (Comma)",value:"rawcomma"},{name:"HTML Table format",value:"table"}]},listeners:{change:function(t,a,l,n){e.changeOutTyp()}}},{xtype:"fieldcontainer",name:"p_page",hidden:!0,layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",name:"n_page",value:"-",flex:1},{xtype:"button",text:IRm$.r1("L_FETCH_ALL"),handler:function(){this.getAllData()},scope:this}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"displayfield",value:IRm$.r1("D_CLIPBOARD"),flex:1},{xtype:"checkbox",name:"btntableview",boxLabel:IRm$.r1("L_SHOW_HTML"),hidden:!0,flex:1,listeners:{change:function(t,a,l,n){e.changeViewMode()}}}]},{xtype:"textarea",name:"textoutput",flex:1},{html:"",collapsible:!1,name:"tableoutput",hidden:!0,autoScroll:!0,flex:1}]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.c$ClpBrd.superclass.initComponent.apply(this,arguments)}});
IG$.prompt=$s.extend(IG$.v$pnl,{validate:function(){var e=this.down("[name=pregion]");this.prompts;e.clearControls()},clear:function(){var e=this.ctrl;e&&$.each(e,(function(e,t){t.clear()}))},init_f:function(){var e,t,i=this,n=i.prompts,l=i.down("[name=pregion]");if(i.ctrl=i.ctrl||[],e=i.ctrl,$.each(n,(function(t,i){var a=e[t];a?a.setPrompt(i,!0):(a=new IG$.promptItem({init_prompt:i,prompts:n}),l.add(a),e.push(a))})),i.ctrl.length>n.length)for(t=i.ctrl.length-1;t>=n.length;t--)l.remove(i.ctrl[t],!0),i.ctrl.splice(t,1)},initComponent:function(){$s.apply(this,{height:60,border:0,items:[{xtype:"panel",name:"pregion",border:0,autoScroll:!0,layout:{type:"hbox"},items:[]}]}),IG$.prompt.superclass.initComponent.call(this)}}),IG$.promptItem=$s.extend(IG$.v$pnl,{initEvent:function(){var e=this,t=$(".prompt-filter",e.el.dom),i=$(".prompt-filter-desc",t);e._loaded||(e._loaded=1,e._region={cdiv:t,cdesc:i,cname:$(".prompt-filter-name",t),cvalue:$(".prompt-filter-value",t),delbtn:$(".prompt-filter-remove",t),clrbtn:$(".prompt-filter-clear",t)},e._region.delbtn.bind("click",(function(t){t.stopPropagation(),t.preventDefault(),e._delprompt()})),e._region.clrbtn.bind("click",(function(t){t.stopPropagation(),t.preventDefault(),e.prompt.selections=[],e.clear(),e.fireEvent("filterchanged",e,e.prompt)})),t.bind("click",(function(t){e.showPromptEditor()})),e.init_prompt&&e.setPrompt(e.init_prompt,!0))},_delprompt:function(){var e=this;e.fireEvent("remove_prompt",e,e)},setPrompt:function(e,t){var i=this;i._region;i.prompt=e,i.prompt.selections=i.prompt.selections||[],i.validatePrompt(t)},validatePrompt:function(e){var t,i=this.prompt,n=this._region,l=[];if(i.selections)for(t=0;t<i.selections.length;t++)l.push(i.selections[t].name||i.selections[t].value);n.cname.html(i.title||i.name),n.cvalue.text(l.join(",")||"")},showPromptEditor:function(){var e,t,i,n,l=this,a=l._region.cdiv.offset(),o=l._popdlg,r=l._region.cdiv.height(),s=300;e=$(document).width(),t=$(document).height(),i=a.left+0+s<e?a.left+0:a.left-s>0?a.left-s:(e-0)/2,n=a.top+r+400<t?a.top+r:a.top-400>0?a.top-400:(t-r)/2,o?o.setPageFilter(l.prompt):(o=new IG$.dlgPromptUser({width:s,pagefilter:l.prompt,position:{left:i,top:n},callback:new IG$.callBackObj(l,(function(){l.filterChanged()})),callback_reqvalues:new IG$.callBackObj(l,(function(){l.fireEvent("requestpagevalues",l,l.prompt)}))}),l._popdlg=o),o.show()},clear:function(){var e=this,t=e.prompt;e._popdlg&&e._popdlg.close(),e._popdlg=null,t&&(t.selections=[],e.validatePrompt())},filterChanged:function(){var e=this;e.validatePrompt(!1),e.fireEvent("filterchanged",e,e.prompt)},initComponent:function(){var e=this;$s.apply(e,{width:180,resize:!1,move:!1,border:0,items:[{html:"<div class='prompt-filter'><div class='prompt-filter-el'><div class='prompt-filter-name'></div><div class='prompt-filter-clear'></div><div class='prompt-filter-remove'></div><div class='prompt-filter-desc'></div><div class='prompt-filter-value'></div></div></div>",name:"filter_desc"}],listeners:{afterrender:function(e){e.initEvent()},beforeclose:function(){e._popdlg&&e._popdlg.close()}}}),IG$.promptItem.superclass.initComponent.call(this)}}),IG$.dlgPromptUser=$s.extend($s.popup,{modal:!1,bodyPadding:ig$.padding,layout:"fit",_confirm:function(){var e=this,t=0,i=0,n=e.pagefilter,l=e.selections,a=e.down("[name=operator]").getValue(),o=e.down("[name=value]").getValue();if(2!=e._bconfirm){if(a!=n.operator&&(t=1),"IN"==a){if(e.sel_changed){l=[],t=1;var r,s=e.down("[name=grdmultivalue]").getSelectionModel().selected;for(r=0;r<s.items.length;r++)l.push({value:s.items[r].data.value,name:s.items[r].data.name});e.selections=l,e.sel_changed=0}}else o?(1!=e.selections.length||e.selections[0]!=o)&&(i=1):0!=e.selections.length&&(i=1),i&&(t=1,e.selections=o?[{value:o,name:o}]:[]);t&&(n.operator=a,n.selections=e.selections,e.callback&&e.callback.execute())}e._bconfirm=0},_init:function(){var e=this;e.pagefilter&&e.setPageFilter(e.pagefilter)},setPageFilter:function(e){var t=this;t._pagefilter&&t._pagefilter.uid==e.uid||(t._pagefilter=e,t.down("[name=operator]").setValue(e.operator||"LIKE"),"IN"!=e.operator||t._pagevalues||t.callback_reqvalues&&t.callback_reqvalues.execute(),t._setDefaultValue())},loadPageFilterLookup:function(e){var t=this.down("[name=grdmultivalue]");this._pagevalues=e,t.store.loadData(e)},_updateOperatorLayout:function(){var e=this,t=e.down("[name=value]"),i=e.down("[name=multivalue]"),n=e.down("[name=operator]").getValue();t.setVisible("IN"!=n),i.setVisible("IN"==n),"IN"!=n||e._pagevalues||e.callback_reqvalues&&e.callback_reqvalues.execute()},clear:function(){this._pagevalues=null},_setDefaultValue:function(){var e=this,t=e.down("[name=operator]").getValue(),i=e._pagefilter,n=e.down("[name=value]");e.selections=i.selections,e.selections&&"IN"!=t&&i.selections.length&&n.setValue(i.selections[0].value)},initComponent:function(){var e=this;$s.apply(e,{items:[{xtype:"container",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",flex:1,layout:{type:"vbox",align:"stretch"},defaults:{labelWidth:80},items:[{xtype:"combobox",fieldLabel:IRm$.r1("B_OP"),name:"operator",required:!0,store:{fields:["name","value"],data:[{name:"Value Selector",value:"IN"},{name:"Equal",value:"="},{name:"Like",value:"LIKE"},{name:"Greater Then",value:">="},{name:"Greater",value:">"},{name:"Lesser",value:"<"},{name:"Lesser Then",value:"<="}]},valueField:"value",displayField:"name",listeners:{change:function(e){this._updateOperatorLayout()},scope:this}},{xtype:"textfield",fieldLabel:IRm$.r1("B_VALUE"),name:"value",hidden:!0,enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&(this._bconfirm=1,this.hide())},scope:this}},{xtype:"container",name:"multivalue",height:300,hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",border:0,height:20},{xtype:"gridpanel",name:"grdmultivalue",flex:1,emptyText:IRm$.r1("M_S_S1"),selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},tbar:[{xtype:"textfield",name:"k_mvalue",fieldLabel:IRm$.r1("B_SEARCH"),labelWidth:60,width:160,emptyText:IRm$.r1("L_SEARCH_KWD"),enableKeyEvents:!0,listeners:{keyup:function(e,t,i){13==t.keyCode&&IG$._dofilter(this,"grdmultivalue",["value","name"],e)},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){IG$._dofilter(this,"grdmultivalue",["value","name"],this.down("[name=k_mvalue]"))},scope:this}],store:{fields:["value","name"]},columns:[{text:IRm$.r1("B_VALUE"),flex:1,dataIndex:"value"},{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name"}],listeners:{selectionchange:function(){this.sel_changed=1},scope:this}}]}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._bconfirm=1,e.hide()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this._bconfirm=2,e.hide()},scope:this}],listeners:{afterrender:function(e){this._init()},hide:function(){this._confirm()}}}),IG$.dlgPromptUser.superclass.initComponent.call(this)}}),IG$.dlgPromptConfig=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!1,resizable:!1,width:300,height:420,sheetoption:null,callback:null,defaults:{padding:ig$.padding},init_f:function(){var e,t=this,i=t.filteritem,n=t.down("[name=foption]"),l=t.down("[name=defaultvalue]"),a=[];if(i.operator=i.operator||"LIKE",n.setAllValues(i),i.selections)for(e=0;e<i.selections.length;e++)a.push(i.selections[e].name||i.selections[e].value);l.setValue(a.join(","))},_confirm:function(){var e,t,i=this,n=i.filteritem,l=i.down("[name=defaultvalue]");for(i.down("[name=foption]").getAllValues(n),e=l.getValue().split(","),n.selections=[],t=0;t<e.length;t++)n.selections.push({value:e[t]});i.callback&&i.callback.execute(),i.close()},initComponent:function(){$s.apply(this,{bodyPadding:ig$.padding,items:[{xtype:"container",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",name:"foption",title:IRm$.r1("B_OPTION"),layout:"anchor",flex:1,padding:ig$.padding,defaults:{anchor:"100%"},items:[{xtype:"textfield",name:"name",readOnly:!0,fieldLabel:IRm$.r1("B_NAME")},{xtype:"combobox",fieldLabel:IRm$.r1("B_OP"),name:"operator",required:!0,store:{fields:["name","value"],data:[{name:"Value Selector",value:"IN"},{name:"Equal",value:"="},{name:"Like",value:"LIKE"},{name:"Greater Then",value:">="},{name:"Greater",value:">"},{name:"Lesser",value:"<"},{name:"Lesser Then",value:"<="}]},valueField:"value",displayField:"name"},{xtype:"textfield",fieldLabel:IRm$.r1("B_DESC"),name:"description"},{xtype:"textfield",fieldLabel:IRm$.r1("L_DEFAULT_VALUE"),name:"defaultvalue"}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this.init_f()}}}),IG$.dlgPromptConfig.superclass.initComponent.apply(this,arguments)}}),IG$.dlgPromptEditor=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!1,width:600,height:400,sheetoption:null,callback:null,init_f:function(){var e,t,i,n=this,l=n.sheetoption.model,a=l.dataquerymode,o=["rows"],r=[],s=[],d={},c=n.down("[name=grid_sc]"),p=n.down("[name=grid_st]");for("M_PIVOT"==a&&o.push("cols","measures"),$.each(o,(function(e,t){var i,n,a=l[t];if(a&&a.length)for(i=0;i<a.length;i++)n=a[i],d[n.uid]||(r.push({uid:n.uid,name:n.name,itemtype:n.itemtype}),d[n.uid]=n)})),c.store.loadData(r),t=(e=l.page_filters=l.page_filters||[]).length-1;t>=0;t--)(i=e[t])&&(d[i.uid]?s.push({uid:i.uid,name:i.name,filter:i}):e.splice(t,1));p.store.loadData(s)},_confirm:function(){var e,t,i=this,n=i.sheetoption.model,l=[],a=i.down("[name=grid_st]");for(e=0;e<a.store.data.items.length;e++)(t=a.store.data.items[e]).data.filter||(t.data.filter={uid:t.data.uid,name:t.data.name,itemtype:t.data.itemtype,operator:"LIKE"}),l.push(t.data.filter);n.page_filters=l,i.callback&&i.callback.execute(),i.close()},_regTables:function(e){var t,i,n=this,l=n.down("[name=grid_sc]"),a=n.down("[name=grid_st]"),o=(n.alias_map,{});if(0!=(i=(e?a:l).getSelectionModel().selected).length||e){if(!e)for(t=0;t<a.store.data.items.length;t++)o[a.store.data.items[t].get("uid")]=1;for(t=0;t<i.length;t++)e?a.store.remove(i.items[t]):o[i.items[t].get("uid")]||a.store.add(i.items[t]);e||l.getSelectionModel().clear()}else IG$.alertmsg(ig$.appname,"Search and check field to register.",null,null,0,"error")},changeOrder:function(e){var t,i,n=this.down("[name=grid_st]"),l=n.getSelectionModel(),a=l.selected;a&&1==a.length&&(i=a.items[0],t=n.store.indexOf(i),-1==e?t>0&&(n.store.remove(i),i=n.store.insert(t-1,i),l.select(i,!0)):t+1<n.store.data.items.length&&(n.store.remove(i),i=n.store.insert(t+1,i),l.select(i,!0)))},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_PAGE_FILTERING"),padding:ig$.padding,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_LAYOUT_OPTIONS"),hidden:!0,layout:{type:"anchor"},defaults:{anchor:"100%"},items:[]},{xtype:"panel",flex:1,layout:{type:"hbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("L_AVAILABLE_FIELDS"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grid_sc",emptyText:IRm$.r1("M_S_S1"),selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},store:{fields:["name","type","nodepath","uid","schemaname","dispname","checked"]},tbar:[{xtype:"textfield",name:"k_sc",fieldLabel:IRm$.r1("B_SEARCH"),labelWidth:60,width:160,emptyText:IRm$.r1("L_SEARCH_KWD"),enableKeyEvents:!0,listeners:{keyup:function(e,t,i){13==t.keyCode&&IG$._dofilter(this,"grid_sc",["name"],e)},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){IG$._dofilter(this,"grid_sc",["name"],this.down("[name=k_sc]"))},scope:this},"->"],columns:[{text:IRm$.r1("B_TYPE"),width:60,sortable:!0,dataIndex:"itemtype"},{text:IRm$.r1("B_NAME"),flex:1,sortable:!0,dataIndex:"name"}]}]},{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:">",handler:function(){this._regTables()},scope:this},{xtype:"button",text:"<",handler:function(){this._regTables(1)},scope:this},{xtype:"container",flex:1}]},{xtype:"fieldset",title:IRm$.r1("L_PAGED_FILTER_FIELDS"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"gridpanel",flex:1,name:"grid_st",emptyText:IRm$.r1("M_S_S1"),selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},tbar:[{xtype:"textfield",name:"k_st",fieldLabel:IRm$.r1("B_SEARCH"),labelWidth:60,width:160,emptyText:IRm$.r1("L_SEARCH_KWD"),enableKeyEvents:!0,listeners:{keyup:function(e,t,i){13==t.keyCode&&IG$._dofilter(this,"grid_st",["name"],e)},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){IG$._dofilter(this,"grid_st",["name"],this.down("[name=k_st]"))},scope:this}],store:{fields:["name","type","nodepath","uid","schemaname","dispname","checked"]},columns:[{text:IRm$.r1("B_TYPE"),width:60,sortable:!0,dataIndex:"itemtype"},{text:IRm$.r1("B_NAME"),flex:1,sortable:!0,dataIndex:"name"},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("B_CONFIG"),handler:function(e,t,i){var n,l=e.store.getAt(t);l.data.filter=l.data.filter||{uid:l.data.uid,name:l.data.name,itemtype:l.data.itemtype},n=new IG$.dlgPromptConfig({instance:this.instance,filteritem:l.data.filter}),IG$.checkLogin(this,n)},scope:this}]}]},{xtype:"container",layout:{type:"vbox",align:"stretch",pack:"center"},items:[{xtype:"container",flex:1},{xtype:"button",iconCls:"ig-btn-up",handler:function(){this.changeOrder(-1)},scope:this},{xtype:"button",iconCls:"ig-btn-down",handler:function(){this.changeOrder(1)},scope:this},{xtype:"container",flex:1}]}]}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this.init_f()}}}),IG$.dlgPromptEditor.superclass.initComponent.apply(this,arguments)}});
IG$.p$SheetView=$s.extend(IG$.v$pnl,{uid:null,name:"sheet",autoScroll:!1,bodyBorder:!1,scroll:!1,autofit:!0,move:!1,header:!1,mresults:null,reportoption:null,sheetoption:null,activeView:-1,_directRun:!1,layoutcomplete:!1,border:0,_confirm:function(e){var t,i=this,o=i.sheetoption,n=i.promptpanel;(t=o.needPrompt())&&t.length>0?(n&&n.setVisible(!0),i.showPrompt(t)):n&&n.setVisible(!1),i.adjSize(),e||i.fireEvent("runsheet",i,i.procRunReport())},appendPrompt:function(e){var t,i=this.sheetoption.model,o=i.page_filters,n=0;for(o||(o=i.page_filters=[]),t=0;t<o.length;t++)if(o[t].uid==e.uid){n=1;break}n||(o.push({uid:e.uid,name:e.name,itemtype:e.type,operator:"=",description:e.description,selections:[]}),this._confirm(!0))},setStyle:function(e){var t,i=this,o=i.sheetoption;IG$.reportbase$.prepGridStyles.call(i,o.model.dataquerymode),t=new IG$.globalReportStyle({instance:i.instance,cmode:"report",meta_type:i.meta_type,activeSheet:o.model.index,reportoption:i.reportoption,sheetoption:o,targetitem:e,callback:new IG$.callBackObj(i,(function(){i._confirm()}))}),IG$.checkLogin(i,t)},removePrompt:function(e){var t,i=this.sheetoption.model,o=i.page_filters;for(o||(o=i.page_filters=[]),t=0;t<o.length;t++)if(o[t].uid==e.uid){o.splice(t,1),this._confirm(!0);break}},scrollReqPg:function(e){var t=this;clearTimeout(t.__s1),t.__s1=setTimeout((function(){var i=e<20?0:e-20;t.goPageView(i,i+200,!0)}),100)},clearAuxFilter:function(){var e=this;e.sheetoption.model.drilldepth=0,e.chart$&&e.chart$.layoutChartPnls(!1)},cfg_changed:function(e){var t=this.chart$;t&&(t.__need_dispose=!0)},_reqData:function(e,t,i){var o,n,r,a,s,l,p,d,c=this,h=c.sheetoption.model,u=i?i.cell:null,v=(i&&i.row,c.mresults&&c.mresults.results.length?c.mresults.results[0]:null);v&&v.data;if(c.customLoad(!0,!0),c._invalChart=!0,c._invalRstat=!0,c._invalPython=!0,c._invalAnal=!0,c._invalFV=!0,c.olapset&&c.olapset.jobid){if(n=c.olapset.jobid,r={uid:c.uid,option:"pivot",active:c.sheetindex,pivotresult:"T",jobid:n,source:i.source||"map",option:{zoom:i.zoom}},i.bound)r.option.bound={x1:i.bound.x1,y1:i.bound.y1,x2:i.bound.x2,y2:i.bound.y2};else if("hierarchy"==i.source){if(1==u.position&&(a=h.rows[u.index]),r.hierarchy={uid:a.uid,depth:u.celltree.depth,filter:[]},v&&(d=i.row,u.c<v.colfix))for(s=0;s<v.colfix;s++)1==d[s].position&&s!=u.c&&(p={fields:[h.rows[d[s].index]],operator:"EQ",values:[{code:d[s].code,text:d[s].text}]},r.hierarchy.filter.push(p));for(r.hierarchy.filter.push({fields:[a],values:[{type:"D",depth:u.celltree.depth,code:u.code,text:u.text}]}),l=u.celltree.parent;l;)r.hierarchy.filter.push({values:[{type:"D",depth:l.celltree.depth,code:l.code,text:l.text}]}),l=l.celltree.parent}(o=new IG$._rpc$).init(c,{ack:"olapservice",payload:{option:"pivot",pivotresult:"T",jobid:n,uid:c.uid,active:""+c.sheetindex},mbody:{},pivot_option:r},c,(function(e){c.olapset.rrequestPivotResult(e,[null,c.sheetindex,null,null,null,null,null,u])})),o.send()}},CLS:{afterrender:function(){this.layoutcomplete=!0,this.init_f()},resize:function(e,t,i,o){var n=this,r=e.getWidth(),a=e.getHeight();r>0&&a>0&&(n.loadMask&&n.rendermask?n.customLoad(!0):n.loadMask&&n.setLoading(!0))}},check_exp:function(){var e=!1;return this.jobid&&!this.updateNoData()&&(e=!0),e},init_f:function(){var e,t=this;t.rst?(e=t.sheetoption.model.viewmode,t.drawResults(e,t.rst),IG$.__ep):1==t._directRun&&t.fireEvent("runsheet",t,t.procRunReport())},drawResults:function(e,t){this.procLoadResult(t)},updateViewMode:function(e){var t,i=this;switch(e){case"chart":t=1;break;case"r":t=2;break;case"d":t=3;break;case"python":t=4;break;case"analysis":t=5;break;case"form":t=6;break;default:t=0}3==t&&i.down("[name=mainzone]").setActiveItem(0),i.sheetoption.model.viewmode=3==t?i.sheetoption.model.viewmode:e,i.changeView(t)},getClipboardContent:function(){var e,t,i,o=[];if(0==this.activeView)for(e=this.grid$.getSelection(),-1,t=0;t<e.length;t++)i=e[t],t>0&&e[t-1]._n_==i._n_&&o.push("\t"),o.push(i.text||i.value),t+1<e.length&&e[t+1]._n_!=i._n_&&o.push("\n");return o.join("")},removePivotItem:function(e){var t,i=this.sheetoption.model,o=!1,n=null;for(t=0;t<i.rows.length;t++)if(i.rows[t].uid==e.uid){o=!0,n=i.rows[t],i.rows.splice(t,1);break}if(0==o)for(t=0;t<i.cols.length;t++)if(i.cols[t].uid==e.uid){o=!0,n=i.cols[t],i.cols.splice(t,1);break}if(0==o)for(t=0;t<i.measures.length;t++)if(i.measures[t].uid==e.uid){o=!0,n=i.measures[t],i.measures.splice(t,1);break}return n},getDrillXML:function(e){var t,i=this;if(0==i.activeView?t=i.grid$.getDrillXML(e):1==i.activeView?t=i.chart$.getDrillXML(e):2==i.activeView?t=i.rstat$.getDrillXML(e):3==i.activeView?t=i.python$.getDrillXML(e):4==i.activeView?t=i.anal$.getDrillXML(e):5==i.activeView&&(t=i.fview$.getDrillXML(e)),t&&e.isparameter){var o=function(t){var i;if("group"==t.ftype&&t.children)for(i=0;i<t.children.length;i++)o(t.children[i]);else"condition"==t.ftype&&(t.useprompt=e.isparameter)};o(t)}return t},getSelection:function(){var e=null;return 0==this.activeView&&(e=this.grid$.getSelection()),e},procUpdateReport:function(e,t,i){var o,n,r=this;3!=r.activeView&&(r.customLoad(!0,!0),r._invalChart=!0,r._invalRstat=!0,r._invalPython=!0,r._invalAnal=!0,r._invalFV=!0,r._job&&r._job.sid&&r._job.jid&&(r.olapset||(r.olapset=new IG$.m$ReqOlap,r.olapset.meta_type=r.meta_type,r.olapset.ctrlsource="report",r.olapset.panel=r,r.olapset.uid=r.uid,r.olapset.sheet=null,r.olapset.chart=null),r.olapset.reportoption=r.reportoption),r.olapset&&(r.olapset.jobid||r._job)?(o=r.reportoption.getCurrentPivot(),n=r.olapset.requestPivotResult(o,null,r.sheetindex,null,e,t,null,r._job,i)):n=r.procRunReport(),n&&n.payload&&r.fireEvent("runsheet",r,n))},setLoading:function(e){var t=this,i=t.sheetoption,o=t.reportoption;e&&i&&i.model&&i.model.hide_progress||(o&&o._mc.ploader?t.fireEvent(e?"_ld_":"_ldx_",t):IG$.p$SheetView.superclass.setLoading.call(t,e))},customLoad:function(e){var t,i,o=this,n=o.reportoption,r=o.sheetoption;if(n&&n._mc.ploader){if(e&&r&&r.model&&r.model.hide_progress)return;o.fireEvent(e?"_ld_":"_ldx_",o)}else e?(i={msg:IRm$.r1("B_PROC")+" <button id='m-mec-loader'>"+IRm$.r1("B_PROC_CANCEL")+"</button>"},o.setLoading(i),t=$(o.rendermask),$("#m-mec-loader",t).bind("click",(function(){o.cancelQuery()}))):o.setLoading(!1,void 0,!0)},cancelQuery:function(e){var t=this,i=new IG$._rpc$;i.init(t,{ack:"olapservice",payload:{jobid:t.jobid,option:"cancel",uid:t.uid,sheetindex:""+(t.sheetindex||0)},mbody:{}},t,(function(t){"S"==(t?t.status:null)&&(this.setLoading(!1),e&&e.execute())}),null),i.showerror=!1,i.send()},getResultSet:function(){return this.mresults&&this.mresults.results?this.mresults.results:null},_refreshMeasureGroup:function(e){this.mresults._update_measure_seq(e),this.procLoadResult(null,!0)},procLoadResult:function(e,t){var i,o=this,n=o.sheetoption,r=(n&&n.model.viewmode,o.reportpanel);t?o.reportoption&&1==o.reportoption.iscomposite?viewmode="grid":viewmode=o.sheetoption.model.viewmode:(o._job=e._job,o.reportoption&&1==o.reportoption.iscomposite?(viewmode="grid",o.reportoption.mresults=e):(viewmode=o.sheetoption.model.viewmode,n.mresults=e),o.mresults=e);var a=o.activeView;if(o._invalChart=!0,o._invalGrid=!0,o._invalRstat=!0,o._invalPython=!0,o._invalAnal=!0,o._invalFV=!0,n.model.rpt_evt_load&&ig$.report_script$&&ig$.report_script$[n.model.rpt_evt_load]){i=ig$.report_script$[n.model.rpt_evt_load];try{var s=i.handler.call(this,r,this,e.results);if(0==s)return;if(s&&s.err)return mr=0,void IG$.alertmsg(ig$.appname,mr.errmsg,null,null,1,"error")}catch(e){return}}t||o.fireEvent("before_result_load",o,n,e),"grid"==viewmode?0!=a&&3!=a&&o.changeView?(r&&r.hideChartToolbar&&r.hideChartToolbar(),o.changeView(0)):o.updateSheetUI(o,o.sheetindex):"chart"==viewmode?1!=a&&3!=a&&o.changeView?(r&&r.showChartToolbar&&r.showChartToolbar(),o.changeView(1)):o.updateChartUI(o,o.sheetindex):"r"==viewmode?2!=a&&3!=a&&o.changeView?(r&&(r.hideChartToolbar(),r.setRToolbar(!0)),o.changeView(2)):o.updateRstat(o,o.sheetindex):"python"==viewmode?3!=a&&o.changeView?(r&&r.hideChartToolbar(),o.changeView(4)):o.updatePython(o,o.sheetindex):"analysis"==viewmode?4!=a&&o.changeView?(r&&r.hideChartToolbar(),o.changeView(5)):o.updateAnalysis(o,o.sheetindex):"form"==viewmode&&(5!=a&&o.changeView?(r&&r.hideChartToolbar(),o.changeView(6)):o.updateFormViewer(o,o.sheetindex)),t||(o.fireEvent("result_loaded",o),o._reset())},_reset:function(){var e=this,t=e.sheetoption,i=e.reportpanel;e._refresh_timer&&clearTimeout(e._refresh_timer),t&&t.model.autorefresh&&t.model.refresh_timer>1&&(e._refresh_timer=setTimeout((function(){i&&i.editmode?e._reset():e.fireEvent("runsheet",e,e.procRunReport(null,null,1))}),1e3*t.model.refresh_timer))},beforeRun:function(){var e=this;e.sheetoption&&"python"==e.sheetoption.viewmode&&e.python$&&e.python$._do_edit(0)},procRunReport:function(e,t,i){var o,n,r,a,s=this;if(delete s.btabrun,s._refresh_timer&&clearTimeout(s._refresh_timer),s.executioncode=1,s.getWidth(),s.getHeight(),s._invalChart=!0,s._invalRstat=!0,s._invalPython=!0,s._invalAnal=!0,s._invalFV=!0,s.olapset||(s.olapset=new IG$.m$ReqOlap,s.olapset.ctrlsource="report",s.olapset.meta_type=s.meta_type,s.olapset.panel=s,s.olapset.uid=s.uid,s.olapset.sheet=null,s.olapset.chart=null),s.olapset.jobid=e||null,s.reportoption){if(s.reportoption._dfilter=s._dfilter,s.olapset.reportoption=s.reportoption,r=s.reportoption.sheets[s.sheetindex].needPrompt(),!0!==t&&r&&r.length>0&&(s.setLoading(!1),s.showPrompt(r),s.promptpanel&&s.promptpanel.clear()),0==s.updateNoPivot())return;o=s.reportoption.getCurrentPivot(),n=s.sheetoption.model.viewmode,s.olapset&&s.olapset.jobid?a=s.olapset.requestPivotResult(o,null,s.sheetindex):s.olapset&&(a=s.olapset.requestUpdateReport(o,n,s.sheetindex,s,null,i))}return a},showPrompt:function(e){var t=this,i=t.promptpanel;i.sheetindex=""+t.sheetindex,i.reportoption=t.reportoption,i.prompts=e,i.init_f(),i.setVisible(!0),t.adjSize()},rs_showPrompt:function(){var e=this;e.fireEvent("runsheet",e,e.procRunReport(null,!0))},updateSheetUI:function(e,t){var i,o,n,r,a,s,l=this;l.updateNoData()||l.grid$&&1==l._invalGrid&&l.mresults&&(s=l.updatePageView(),l._invalGrid=!1,l.grid$.initCustomControl(),l.grid$.applyReportResult(e.mresults,e.olapset,e.reportoption,e.sheetoption,s),IG$.__ep&&(i=(a=l.grid$._gridview._mgrid).twidth+a.fixedColWidth,o=a.theight+a.fixedRowHeight,n=a.cwidth,r=a.cheight,i>0&&o>0&&(i>n||o>r)&&l.fireEvent("cresized",l,{tw:i,th:o,cw:n,ch:r})))},updatePageView:function(){var e,t=this,i=!1,o=t.sheetoption.model,n=t.down("[name=pagepanel]");return 1==o.usepaging&&t.mresults&&t.mresults.results&&1==t.mresults.results.length&&((e=t.mresults.results[0]).pagestart>0||e.pageend<e.rowcnt)&&(i=!0),1==i?t.setPageView():n.setVisible(!1),t.adjSize(),i},exportSheet:function(e){this.fireEvent("export_sheet",this,{filetype:e})},editFormViewer:function(){var e=this,t=new IG$.formViewerEditor({instance:e.instance,reportoption:e.reportoption,sheetoption:e.sheetoption,sheetptr:e,callback:new IG$.callBackObj(e,(function(){e.fview$&&e.fview$._init()}))});IG$.checkLogin(e,t)},downloadAllCSV:function(){var e=this,t=new IG$._rpc$,i=e.reportoption._mc.name+" "+(e.sheetoption.title||""),o=e.olapset?e.olapset.jobid:"";i=(i=i.replace(/\./g,"_")).replace(/ /g,""),i+=".csv",o&&(e.setLoading(!0),t.init(e,{ack:"print",payload:{uid:e.uid,jobid:o,type:"csv",filename:i,option:"instanceload"},mbody:{}},e,e.rexportToFile,null,i),t.send())},mlLearn:function(){var e,t=this,i=t.olapset?t.olapset.jobid:"";i&&(IG$.d$MLearn?t.do_mlLearn(i):(e=ig$.bootconfig.scmap.igc9,IG$.getScriptCache(e,new IG$.callBackObj(this,(function(){IG$.d$MLearn?t.do_mlLearn(i):IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))})))))},do_mlLearn:function(e){var t,i=this;t=new IG$.d$MLearn({instance:i.instance,jobid:e,fname:i.reportoption.name+" "+(i.sheetoption.title||"sheet")}),IG$.showDlg(i,t)},rexportToFile:function(e,t){var i;this.setLoading(!1),"complete"==e.status&&(i=e.downloadurl,t=e.filename||t,$.download(ig$.servlet+"/download",[{name:"ack",value:"download"},{name:"_mts_",value:IG$._g$a||""},{name:"payload",value:i},{name:"mbody",value:t},{name:"session_key",value:window.use_session_key?ig$._session_key||"empty":""}],"POST"))},setPageView:function(){var e,t,i,o,n,r,a,s,l=this,p=l.down("[name=pagepanel]"),d=$("#idv-pgview",p.body.dom),c=l.mresults.results[0],h=l.sheetoption.model,u=h.rowperpage,v=h.pagestyle||"p10",m=c.pagestart,f=10,g=[];if(d.empty(),"p10"==v?f=10:"p5"==v&&(f=5),s=$("<div class='idv-pglist'></div>").appendTo(d),a=$("<ul class='idv-pg-tp-"+v+"'></ul>").appendTo(s),i=c.rowcnt-c.rowfix,(t=Math.ceil(i/u))>1&&1==h.usepaging)if(p.setVisible(!0),o=Math.floor(m/u),$("<div class='idv-pg-dwn-csv' title='Download data in CSV'></div>").appendTo(d).bind("click",(function(){l.downloadAllCSV()})),"button2"==v){if(o>0)$("<li class='idv-pg-prev'><span>"+IRm$.r1("B_PG_PREV")+"</span></li>").appendTo(a).bind("click",(function(){var e=(o-1)*u;l.goPageView(e)}));if($("<li class='idv-pg-num idv-pg-num-"+(o+1)+"'><span>"+(o+1)+" / "+t+" pages</span></li>").appendTo(a),o+1<t)$("<li class='idv-pg-next'><span>"+IRm$.r1("B_PG_NEXT")+"</span></li>").appendTo(a).bind("click",(function(){var e=(o+1)*u;l.goPageView(e)}))}else{if(r=Math.floor(o/f)*f,n=r+f,n=Math.min(t,n),r>0)$("<li class='idv-pg-prev'><span>"+IRm$.r1("B_PG_PREV")+"</span></li>").appendTo(a).bind("click",(function(){var e=(r-1)*u;l.goPageView(e)}));for(e=r;e<n;e++)g.push(e);if($.each(g,(function(e,t){var i=t+1,n=$("<li class='"+(t==o?"idv-pg-num idv-pg-num-"+i+" active":"idv-pg-num idv-pg-num-"+i)+"'><span>"+i+"</span></li>").appendTo(a);t!=o&&n.bind("click",(function(){var e=t*u;l.goPageView(e)}))})),n<t)$("<li class='idv-pg-next'><span>"+IRm$.r1("B_PG_NEXT")+"</span></li>").appendTo(a).bind("click",(function(){var e=n*u;l.goPageView(e)}))}else p.setVisible(!1)},goPageView:function(e,t,i){this.procUpdateReport(e,t,i)},r_doSchJob:function(e,t){},updateChartUI:function(e,t){var i,o=this;o.updateNoData()||1==o._invalChart&&(i=o.updatePageView(),o._invalChart=!1,o.chart$&&(o.chart$.initCustomControl(),o.chart$.applyReportResult(e.mresults,e.olapset,e.reportoption,e.sheetoption,i)))},updateAnalUI:function(e,t){var i,o=this;o.updateNoData()||1==o._invalAnal&&(i=o.updatePageView(),o._invalAnal=!1,o.anal$&&(o.anal$.initCustomControl(),o.anal$.applyReportResult(e.mresults,e.olapset,e.reportoption,e.sheetoption,i)))},updateRstat:function(e,t){var i=this;1==i._invalRstat?(i.updatePageView(),i._invalRstat=!1,i.updateNoData(!0),i.rstat$.applyReportResult(e.mresults,e.olapset,e.reportoption,e.sheetoption)):i.updateNoData()},updateFormViewer:function(e,t){var i=this;i._invalFV?(i.updatePageView(),i._invalFV=!1,i.updateNoData(!0),i.fview$.applyReportResult(e.mresults,e.olapset,e.reportoption,e.sheetoption)):i.updateNoData()},updatePython:function(e,t){var i=this;i._invalPython?(i.updatePageView(),i._invalPython=!1,i.updateNoData(!0),i.python$.applyReportResult(e.mresults,e.olapset,e.reportoption,e.sheetoption)):i.updateNoData()},updateAnalysis:function(e,t){var i=this;i._invalAnal?(i.updatePageView(),i._invalAnal=!1,i.updateNoData(!0),i.anal$.applyReportResult(e.mresults,e.olapset,e.reportoption,e.sheetoption)):i.updateNoData()},updateNoPivot:function(){var e,t,i=this,o=0;return"M_DATA"==(e=(t=i.reportoption.sheets[i.sheetindex].model).dataquerymode)?o+=t.rows?t.rows.length:0:"M_PIVOT"==e?(o+=t.rows?t.rows.length:0,o+=t.cols?t.cols.length:0,o+=t.measures?t.measures.length:0):o+=t.rows?t.rows.length:0,0!=o||(i.setLoading(!1),$(".no-result-msg",i.down("[name=noresultpanel]").el.dom).html(IRm$.r1("B_NO_PIVOT")),$(".no-pivot-config",i.down("[name=noresultpanel]").el.dom).show(),i.down("[name=mainzone]").setActiveItem(1),!1)},updateNoData:function(e){var t,i=this,o=!!e,n=i.sheetoption;if(!o&&i.mresults&&i.mresults.results.length>0&&(1==i.mresults.results.length&&0==i.mresults.results[0]._hasNoData||i.mresults.results.length>1))o=!0;else if(i.mresults&&i.mresults._hcell)o=!0;else if(n&&n.mdf&&i.mresults&&i.mresults.results.length>0)for(var r in n.mdf)if((t=n.mdf[r])&&t.op){o=!0;break}return $(".no-result-msg",i.down("[name=noresultpanel]").el.dom).html(IRm$.r1("B_NO_DATA")),$(".no-pivot-config",i.down("[name=noresultpanel]").el.dom).hide(),i.down("[name=mainzone]").setActiveItem(o||3==i.activeView?0:1),!i.updateNoPivot()||!o},set_exec:function(e){$(".no-result-msg",this.down("[name=noresultpanel]").el.dom).html(IRm$.r1(e||"B_RPT_RUN"))},changeView:function(e){var t=this,i=t.a2_,o=i.getWidth(),n=i.getHeight();if(!t.updateNoData()){switch(t.activeView=e,e){case 0:t.grid$||(t.grid$=new IG$.sheetViewer({instance:t.instance,layout:{type:"fit"},sheetobj:this,width:o,height:n,flex:1,html:"",reportoption:t.reportoption,sheetoption:t.sheetoption,listeners:{runsheet:function(e,t){return this.fireevent("runsheet",e,t),!1},drillreport:function(e){return this.fireEvent("drillreport",this),!1},itemclick:function(e,t){return this.fireEvent("itemclick",this,t),!1},itemdblclick:function(e,t){return this.fireEvent("itemdblclick",this,t),!1},menu:function(e,t){return this.fireEvent("menu",this,t),!1},pivotchanged:function(e){return this.fireEvent("pivotchanged",this),!1},scroll_request:function(e,t){var i=t;i=i-50>0?i-50:i,this.scrollReqPg(i)},request_data:function(e,t,i){this._reqData(e,t,i)},hierarchy:function(e,t){var i={source:"hierarchy",cell:t.cell,row:t.row};this._reqData(e,null,i)},scope:this}}),i.add(t.grid$)),i.setActiveItem(t.grid$);break;case 1:t.chart$||(t.chart$=new IG$.v$chartViewer({instance:t.instance,layout:{type:"fit"},flex:1,width:o,height:n,autoHeight:!1,frame:!1,margins:"0 0 0 0",cmargins:"0 0 0 0",maincontainer:this,showtoolbar:!0,listeners:{drillreport:function(e){return this.fireEvent("drillreport",this),!1},itemclick:function(e,t){return this.fireEvent("itemclick",this,t),!1},itemdblclick:function(e,t){return this.fireEvent("itemdblclick",this,t),!1},menu:function(e,t){return this.fireEvent("menu",this,t),!1},pivotchanged:function(e){return this.fireEvent("pivotchanged",this),!1},scroll_request:function(e,t){return this.scrollReqPg(t),!1},request_data:function(e,t,i){return this._reqData(e,t,i),!1},hierarchy:function(e,t){return this._reqData(e,cview,option),!1},scope:this}}),i.add(t.chart$)),i.setActiveItem(t.chart$);break;case 2:t.rstat$||(t.rstat$=new IG$.v$rstatViewer({instance:t.instance,layout:{type:"fit"},meta_type:t.meta_type,flex:1,width:o,height:n,sheetobj:this,reportoption:t.reportoption,sheetoption:t.sheetoption}),i.add(t.rstat$)),i.setActiveItem(t.rstat$);break;case 3:t._pivotEditor||(t._pivotEditorIn=new IG$.pb({instance:t.instance,bodycls:"igc-peditor"}),i.add(t._pivotEditorIn)),i.setActiveItem(t._pivotEditor);break;case 4:t.python$||(t.python$=new IG$.v$pyViewer({instance:t.instance,meta_type:t.meta_type,layout:{type:"fit"},flex:1,width:o,height:n,sheetobj:this,reportoption:t.reportoption,sheetoption:t.sheetoption}),i.add(t.python$)),i.setActiveItem(t.python$);break;case 5:t.anal$||(t.anal$=new IG$.v$anViewer({instance:t.instance,layout:{type:"fit"},meta_type:t.meta_type,flex:1,width:o,height:n,sheetobj:this,reportoption:t.reportoption,sheetoption:t.sheetoption}),i.add(t.anal$)),i.setActiveItem(t.anal$);break;case 6:t.fview$||(t.fview$=new IG$.formViewer({instance:t.instance,flex:1,width:o,height:n,sheetobj:this,reportoption:t.reportoption,sheetoption:t.sheetoption}),i.add(t.fview$)),i.setActiveItem(t.fview$)}0==t.activeView?t._invalGrid&&t.updateSheetUI(t):1==t.activeView?t._invalChart&&t.updateChartUI(t):2==t.activeView?t._invalRstat&&t.updateRstat(t):4==t.activeView?t._invalPython&&t.updatePython(t):5==t.activeView?t._invalAnal&&t.updateAnalysis(t):6==t.activeView&&t._invalFV&&t.updateFormViewer(t),t.fireEvent("_view_changed",t)}},setSheetOpt:function(e,t){var i=this;i.reportoption=e,i.sheetoption=t,i.grid$.setSheetOpt(e,t),i.chart$.setSheetOpt(e,t)},applyOptions:function(){var e=this,t=e.grid$,i=e.rstat$,o=e.python$,n=e.anal$,r=e.fview$;t&&t.applyOptions(e.reportoption,e.sheetoption),i&&i.applyOptions(e.reportoption,e.sheetoption),o&&o.applyOptions(e.reportoption,e.sheetoption),n&&n.applyOptions(e.reportoption,e.sheetoption),r&&r.applyOptions(e.reportoption,e.sheetoption),e.drawStory()},updateFilterContent:function(e){},getFilterInfo:function(e){var t,i,o=this,n=o.sheetoption?o.sheetoption.model.aux_filter:null;if(filter=o.sheetoption?o.sheetoption.model.filter:null,n)for(t in n)(i=n[t])&&o.getSheetFlt(i,e);filter&&o.getSheetFlt(filter,e)},getSheetFlt:function(e,t){var i,o,n,r,a,s;if(e&&e.children&&e.children.length>0)for(i=0;i<e.children.length;i++)if((n=e.children[i])&&"group"==n.ftype)this.getSheetFlt(n,t);else if(n&&"condition"==n.ftype&&n.fields&&n.fields.length>0&&(a=t[r=n.fields[0].name]=t[r]||{data:[],p:{}},n.values))for(o=0;o<n.values.length;o++)(s=n.values[o].value||n.values[o].code||"")&&!a.p[s]&&(a.data.push(s),a.p[s]=1)},clearResult:function(){var e=this;e._invalGrid=!0,e._invalChart=!0,e._invalRstat=!0,e._invalPython=!0,e._invalAnal=!0,e._invalFV=!0,e.activeView=-1,e.promptpanel&&e.promptpanel.clear()},adjSize:function(){var e=this,t=e._adjWidth,i=e._adjHeight,o=e.down("[name=pagepanel]"),n=e.promptpanel;n&&n.isVisible()&&(i-=60),o.isVisible()&&(i-=30),e.down("[name=a2_]").setSize(t,i),e.grid$&&e.grid$.setSize(t,i),e.chart$&&e.chart$.setSize(t,i),e.rstat$&&e.rstat$.setSize(t,i),e.python$&&e.python$.setSize(t,i),e.anal$&&e.anal$.setSize(t,i),e.fview$&&e.fview$.setSize(t,i)},createStoryView:function(){var e=this,t=e.down("[name=a2_]");e.visual$||(e.visual$=$("<div class='igc-story-view'></div>").appendTo(t.body.dom))},appendStory:function(){var e,t=this,i=t.sheetoption,o=i?i.model:null;if(o){o.visual_stories=o.visual_stories||{},e={};var n=new IG$.vsEdtr({instance:t.instance,visual_story:e,callback:new IG$.callBackObj(t,(function(){e.sequence=o.visual_stories.length,o.visual_stories.push(e),t.drawStory(o.visual_stories)}))});IG$.checkLogin(t,n)}},drawStory:function(){var e=this,t=e.sheetoption,i=t?t.model:null,o=i?i.visual_stories:null,n=e.visual$;n&&n.empty(),n&&o&&o.length&&$.each(o,(function(t,i){i.sequence=t;var r=$("<div class='igc-story-widget'><div class='igc-story-conent'></div><div class='igc-story-title'><span class='btn btn-config'></span><span class='btn btn-close'></span></div></div>").appendTo(n);IG$.setScrRect(r),i._mdiv=r,r.draggable({containment:"parent",handle:".igc-story-title",start:function(){},drag:function(){},stop:function(){}}),r.resizable({containment:"parent",helper:"ui-resizable-helper",resize:function(){},start:function(){},stop:function(){}});var a=function(e){var t={},i=e._mdiv;e.right?(t.right=e.right,e.left?t.left=e.left:e.width?(t.width=e.width,t.left="initial"):t.width="220px"):(t.left=e.left||"initial",e.width?(t.width=e.width,t.right="initial"):t.width="220px"),e.bottom?(t.bottom=e.bottom,e.top?t.top=e.top:e.height?(t.height=e.height,t.top="initial"):(t.height="120px",t.top="initial")):(t.top=e.top||"initial",e.height?(t.height=e.height,t.bottom="initial"):t.height="120px"),t.width=t.width||"initial",t.height=t.height||"initial",i.css(t)};a(i),e.setStory(i),$(".btn-config",r).bind("click",(function(t){var o=new IG$.vsEdtr({instance:e.instance,visual_story:i,callback:new IG$.callBackObj(e,(function(){a(i),$(".igc-story-conent",i._mdiv).html(i.context)}))});IG$.checkLogin(e,o)})),$(".btn-close",r).bind("click",(function(e){var t;for(t=0;t<o.length;t++)if(o[t].sequence==i.sequence){o.splice(t,1);break}for(t=0;t<o.length;t++)o[t].sequence=t;i._mdiv.remove()}))}))},setStory:function(e){var t=e._mdiv,i=$(".igc-story-conent",t);i.empty(),i.html(e.context)},initComponent:function(){var e=this;e.on("afterrender",(function(){e.CLS.afterrender.call(e),e.rzone=e.down("[name=rzone]"),e.a2_=e.down("[name=a2_]"),e.noResultPnl=e.down("[name=noresultpanel]"),e.down("[name=mainzone]").setActiveItem(1),$(".no-pivot-config",e.noResultPnl.el.dom).bind("click",(function(t){var i=e.reportpanel;i&&i.showPivotConfig&&e.renderBox&&i.showPivotConfig(e.renderBox)})),e.createStoryView()})),e.on("resize",(function(e,t,i,o){var n=this;n._adjWidth=t,n._adjHeight=i,n.adjSize()})),e.on("filterchanged",(function(){return e.procUpdateReport(),!1})),e.on("requestpagevalues",(function(e,t){var i=this,o=new IG$._rpc$,n=i.olapset?i.olapset.jobid:null;return n&&(e._popdlg.setLoading(!0),o.init(i,{ack:"olapservice",payload:{option:"pivot",pagefilter_lookup:"T",jobid:n,pageuid:t.uid,active:""+i.sheetindex},mbody:{}},i,(function(i){e._popdlg.setLoading(!1),i[t.uid]&&e._popdlg.loadPageFilterLookup(i[t.uid])})),o.send()),!1})),e.promptpanel=new IG$.prompt({instance:e.instance,hidden:!0}),e.promptpanel.on("remove_prompt",(function(t,i){e.removePrompt(i.prompt)})),$s.apply(this,{border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",autoScroll:!1,scroll:!1,flex:1,border:0,layout:{type:"vbox",align:"stretch"},items:[e.promptpanel,{xtype:"panel",flex:1,layout:"card",autoScroll:!1,scroll:!1,name:"mainzone",border:0,items:[{xtype:"container",name:"rzone",deferredRender:!1,border:0,layout:"fit",items:[{xtype:"container",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1,name:"a2_",layout:"card",hidemode:"offset",border:0},{xtype:"container",name:"pagepanel",border:0,html:"<div id='idv-pgview' class='idv-pgview'>Page view</div>",hidden:!0,height:25}],region:"center",flex:1}]},{xtype:"container",name:"noresultpanel",border:0,deferredRender:!1,html:["<div class='igc-no-results'>","<div class='no-result-msg'>"+IRm$.r1("B_NOT_EXECUTED")+"</div>","<div class='no-pivot-config' style='display:none;'>"+IRm$.r1("B_PIVOT_CONFIG")+"</div>","</div>"].join("")}]}]}]}),IG$.p$SheetView.superclass.initComponent.call(this)}});
IG$.formViewerEditor=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"fit",align:"stretch"},closable:!0,resizable:!0,width:800,height:600,_init:function(){var e=this,t=(e.reportoption._mc,e.sheetoption.model);t.dataquerymode,e.down("[name=_mviewer_]");t.formbuilder=t.formbuilder||{},e.setAllValues(t.formbuilder),t.formbuilder.item&&e.down("[name=itemname]").setValue(t.formbuilder.item.name)},_confirm:function(){var e=this,t=(e.reportoption._mc,e.sheetoption.model);e.down("[name=_mviewer_]");e.getAllValues(t.formbuilder)||(e.itemname&&e.itemname.length&&(t.formbuilder.item=e.itemname[0]),e.callback&&e.callback.execute(),e.close())},selectItem:function(e){var t=new IG$.metaSelectDlg({instance:this.instance,visibleItems:"folder;dashboard",tree_options:{cubebrowse:!1},callback:new IG$.callBackObj(this,(function(t){this[e]=[t],this.down("[name="+e+"]").setValue(t.name)}))});IG$.checkLogin(this,t)},initComponent:function(){var e=this;$s.apply(e,{title:IRm$.r1("L_FORMVIEWER"),items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},border:0,items:[{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_ITEM"),layout:"hbox",items:[{name:"itemname",xtype:"textfield",allowBlank:!1,readOnly:!0,emptyText:IRm$.r1("M_SEL_ITEM"),flex:1},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),width:20,handler:function(){this.selectItem("itemname")},scope:this}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:e},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:e}],listeners:{afterrender:function(t){e._init()}}}),IG$.formViewerEditor.superclass.initComponent.call(this)}}),IG$.formViewer=$s.extend(IG$.v$pnl,{layout:"fit",_init:function(){var e=this;e._designmode,e.reportoption&&e.sheetoption&&(e.sheetoption.model.formbuilder=e.sheetoption.model.formbuilder||{},e._draw_area())},_confirm:function(){this.reportoption._mc;this.sheetoption.model.formbuilder.items=[]},_draw_area:function(){var e,t=this,i=t.down("[name=formview]"),o=t.sheetoption?t.sheetoption.model.formbuilder:null;o&&o.item&&(t.setLoading(!0),(e=new IG$._rpc$).init(t,{ack:"content",payload:{uid:o.item.uid},mbody:{}},t,(function(e){i.rs_loadContent(e),t._apply_data()}),!1),e.send())},$apply:function(e){this.down("[name=formview]")},_apply_data:function(){var e=this.down("[name=formview]"),t=this.$mresults,i=t?t.results[0]:null;e&&i&&e.$load_data(i,0)},applyReportResult:function(e,t,i,o,n){this.$mresults=e,this._apply_data()},applyOptions:function(e,t){e&&t&&(this.reportoption=e,this.sheetoption=t)},initComponent:function(){var e=this;$s.apply(e,{items:[new IG$.DashboardView({name:"formview",flex:1,autoScroll:!0})]}),e.on("afterrender",(function(t){e._init()})),IG$.formViewer.superclass.initComponent.call(this)}});
IG$.$d_hlconfig=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!1,width:500,height:440,seq:0,_confirm:function(){var e=this;e.commit_f(),e.callback&&e.callback.execute(),e.close()},init_f:function(){var e=new IG$._rpc$;e.init(this,{ack:"appoption",payload:{address:"ReportStyle"},mbody:{}},this,(function(e){var t,a,n,i=this,l=i._piobj._mc.highlight||[],o=[],s=i.down("[name=grdhl]"),r=e.themes[0].custom_styles,m=[];for(a=0;a<l.length;a++){if((t=l[a]).seq=i.get_sid(),t.itemname=t.name,t.value_desc=[],t.values)for(n=0;n<t.values.length;n++)t.value_desc.push(t.values[n].code);t.value_desc=t.value_desc.join(","),o.push(t)}if(s.store.loadData(o),r)for(n=0;n<r.length;n++)m.push({name:r[n].name});i.__global_cs=m}),null),e.send()},commit_f:function(){var e,t,a,n=this,i=n._piobj._mc.highlight,l=n.down("[name=grdhl]").store,o=[];for(e=0;e<l.data.items.length;e++)for(a=l.data.items[e],t=0;t<i.length;t++)if(i[t].seq==a.get("seq")){o.push(i[t]);break}n._piobj._mc.highlight=o},make_new_option:function(e){var t=this,a=(e=e,new IG$.$w_hl_config_item({instance:t.instance,_piobj:t._piobj,__global_cs:t.__global_cs,hlobj:e,callback:new IG$.callBackObj(t,t.rs_make_new_option)}));IG$.checkLogin(t,a)},rs_make_new_option:function(e){var t,a,n,i,l=this,o=l.down("[name=grdhl]");if(i=l._piobj._mc.highlight=l._piobj._mc.highlight||[],1==e.isnew)delete e.isnew,i.push(e),o.store.add(e);else{for(t=0;t<o.store.data.items.length;t++)if((n=o.store.data.items[t]).get("seq")==e.seq){a=n;break}a&&(a.set("name",e.name),a.set("delimiter",e.delimiter),a.set("itemname",e.itemname),a.set("uid",e.uid),a.set("operator",e.operator),a.set("stylename",e.stylename),a.set("styleuid",e.styleuid),a.set("apprange",e.apprange),a.set("appset",e.appset),a.set("values",e.values),a.set("value_desc",e.value_desc))}},get_sid:function(){return this.seq++,"seq_"+this.seq},initComponent:function(){this.title=IRm$.r1("T_HL_OPT"),$s.apply(this,{padding:ig$.padding,items:[{xtype:"form",layout:{type:"vbox",align:"stretch"},autoScroll:!0,defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_HL_DESC"),flex:1},{xtype:"button",text:IRm$.r1("L_ADD_NEW"),handler:function(){var e={isnew:!0,seq:this.get_sid()};this.make_new_option(e)},scope:this}]},{xtype:"gridpanel",name:"grdhl",flex:1,store:{xtype:"store",fields:["name","delimiter","itemname","uid","operator","stylename","styleuid","apprange","appset","seq","values"]},selType:"checkboxmodel",selModel:{mode:"SINGLE"},tbar:[{iconCls:"icon-toolbar-moveup",text:IRm$.r1("L_MOVE_UP"),handler:function(){var e,t,a=this.down("[name=grdhl]"),n=a.getSelectionModel(),i=n.getSelection();i&&1==i.length&&(e=i[0],(t=a.store.indexOf(e))>0&&(a.store.remove(e),e=a.store.insert(t-1,e),n.select(e,!0)))},scope:this},{xtype:"button",iconCls:"icon-toolbar-movedown",text:IRm$.r1("L_MOVE_DOWN"),handler:function(){var e,t,a=this.down("[name=grdhl]"),n=a.getSelectionModel(),i=n.getSelection();i&&1==i.length&&(e=i[0],(t=a.store.indexOf(e))+1<a.store.data.items.length&&(a.store.remove(e),e=a.store.insert(t+1,e),n.select(e,!0)))},scope:this}],columns:[{xtype:"gridcolumn",text:IRm$.r1("B_NAME"),dataIndex:"itemname",tdCls:"igc-td-link",flex:1},{xtype:"gridcolumn",text:IRm$.r1("B_ST_NAME"),dataIndex:"stylename",flex:1},{xtype:"gridcolumn",text:IRm$.r1("L_CONDITION"),dataIndex:"operator",width:60},{xtype:"gridcolumn",text:IRm$.r1("B_VALUE"),dataIndex:"value_desc",flex:1},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-delete",tooltip:IRm$.r1("B_DELETE"),handler:function(e,t,a){var n,i;for(rec=e.store.getAt(t),h=this._piobj._mc.highlight,n=0;n<h.length;n++)if(h[n].seq==rec.get("seq")){i=h[n],h.splice(n,1);break}i&&e.store.removeAt(t)},scope:this}]}],listeners:{cellclick:function(e,t,a,n,i,l){var o,s,r=e.store.getAt(i),m=this._piobj._mc.highlight;if(a<3&&a>0){for(s=0;s<m.length;s++)if(m[s].seq==r.get("seq")){o=m[s];break}o&&this.make_new_option(o)}},scope:this}}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.$d_hlconfig.superclass.initComponent.apply(this,arguments)}}),IG$.$w_hl_config_item=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!1,width:450,height:400,_confirm:function(){var e=this;e.commit_f(),e.callback&&e.callback.execute(e.hlobj),e.close()},init_f:function(){var e,t=this,a=t._piobj,n=t.hlobj,i=a._mc,l=i.defaultstyle,o=i.customstyle,s=[],r=t.down("[name=dsitem]"),m=t.down("[name=stylename]"),c=t.__global_cs;if(c)for(e=0;e<c.length;e++)s.push({name:c[e].name,value:c[e].name});for(e in $.each([l,o],(function(e,t){var a;if(t)for(e=0;e<t.length;e++)a={name:t[e].name,value:t[e].name},s.push(a)})),m.store.loadData(s),n.appset||{})switch(e){case"bg":t.down("[name=aset_1]").setValue(!0);break;case"fs":t.down("[name=aset_2]").setValue(!0);break;case"format":t.down("[name=aset_3]").setValue(!0);break;case"tmpl":t.down("[name=aset_4]").setValue(!0)}t.dsitemuid=n.uid,r.setValue(n.name),t.down("[name=delimiter]").setValue(n.delimiter||";"),t.down("[name=operator]").setValue(n.operator||"EQ"),t.down("[name=stylename]").setValue(n.stylename),t.down("[name=apprange]").setValue(n.apprange||"CELL"),t.down("[name=values]").setValue(n.value_desc)},commit_f:function(){var e,t,a=this,n=a.hlobj,i=a.down("[name=dsitem]"),l={};if($.each([{fname:"aset_1",code:"bg"},{fname:"aset_2",code:"fs"},{fname:"aset_3",code:"format"},{fname:"aset_4",code:"tmpl"}],(function(e,t){1==a.down("[name="+t.fname+"]").getValue()&&(l[t.code]=1)})),n.appset=l,n.field={uid:a.dsitemuid,name:i.getValue()},n.uid=a.dsitemuid,n.itemname=i.getValue(),n.name=n.itemname,n.delimiter=a.down("[name=delimiter]").getValue(),n.operator=a.down("[name=operator]").getValue(),n.stylename=a.down("[name=stylename]").getValue(),n.apprange=a.down("[name=apprange]").getValue(),n.values=[],t=a.down("[name=values]").getValue(),n.value_desc=t,t)for(t=t.split(","),e=0;e<t.length;e++)n.values.push({code:t[e]})},cubeSelectedHandler:function(){var e=this,t=new IG$.metaSelectDlg({instance:e.instance,visibleItems:"workspace;folder;metric;table;dataset;inlineview;measure;formulameasure;",tree_options:{cubebrowse:!0,rootuid:e._piobj._mc.uid},callback:new IG$.callBackObj(e,e.rs_cubeSelectedHandler)});IG$.checkLogin(e,t)},rs_cubeSelectedHandler:function(e){this.dsitemuid=e.uid,this.down("[name=dsitem]").setValue(e.name)},initComponent:function(){this.title=IRm$.r1("T_HL_OPT"),$s.apply(this,{padding:ig$.padding,items:[{xtype:"form",layout:"anchor",autoScroll:!0,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_GENERAL_OPTION"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"dsitem",emptyText:IRm$.r1("M_SEL_ITEM"),readOnly:!0,fieldLabel:IRm$.r1("B_NAME")},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){this.cubeSelectedHandler()},scope:this}]},{xtype:"combobox",fieldLabel:IRm$.r1("L_CONDITION"),name:"operator",valueField:"value",displayField:"name",editable:!1,queryMode:"local",autoSelect:!0,autoScroll:!0,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_F_EQ"),value:"EQ"},{name:IRm$.r1("L_F_LT"),value:"LT"},{name:IRm$.r1("L_F_LE"),value:"LTE"},{name:IRm$.r1("L_F_GT"),value:"GT"},{name:IRm$.r1("L_F_GE"),value:"GTE"},{name:IRm$.r1("L_F_BETWEEN"),value:"BTW"},{name:IRm$.r1("L_F_LIKE"),value:"LIKE"},{name:IRm$.r1("L_F_IN"),value:"IN"}]},listeners:{change:function(e){var t=this.down("[name=delimiter]"),a=e.getValue();t.setVisible("IN"==a||"BTW"==a)},scope:this}},{xtype:"fieldcontainer",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",fieldLabel:IRm$.r1("B_VALUES"),name:"values"},{xtype:"textfield",hidden:!0,fieldLabel:IRm$.r1("B_DELIMITER"),name:"delimiter"}]}]},{xtype:"fieldset",title:IRm$.r1("L_STYLE_OPTION"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_ST_NAME"),name:"stylename",valueField:"value",displayField:"name",editable:!1,queryMode:"local",autoSelect:!0,autoScroll:!0,store:{xtype:"store",fields:["name","value"]}},{xtype:"combobox",name:"apprange",fieldLabel:IRm$.r1("L_HL_RANGE"),valueField:"value",displayField:"name",editable:!1,queryMode:"local",autoSelect:!0,autoScroll:!0,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_HL_CELL"),value:"CELL"},{name:IRm$.r1("L_HL_ROW"),value:"ROW"},{name:IRm$.r1("L_HL_COL"),value:"COL"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_APPL_R"),layout:"anchor",items:[{xtype:"checkbox",name:"aset_1",boxLabel:IRm$.r1("L_BG_COL")},{xtype:"checkbox",name:"aset_2",boxLabel:IRm$.r1("L_FONT_ST")},{xtype:"checkbox",name:"aset_3",boxLabel:IRm$.r1("L_F_STR")},{xtype:"checkbox",name:"aset_4",boxLabel:IRm$.r1("L_F_TMPL")}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.$w_hl_config_item.superclass.initComponent.apply(this,arguments)}});
IG$.reportbase$=IG$.reportbase$||{},window.m$dw=window.m$dw||0,$s.apply(IG$.reportbase$,{doDrillReport:function(e){var t=this;t.updateFormula(e),t._ine_t&&clearTimeout(t._ine_t),t._ine_t=setTimeout((function(){t.executeDrillReport(e.sheetindex,e)}),100)},doLink:function(e,t,o){var i=this;i._ine_t&&clearTimeout(i._ine_t),i._ine_t=setTimeout((function(){var n=new IG$._rpc$;e.setLoading(!0,!1),n.init(i,{ack:"content",payload:{uid:t.uid,type:t.type},mbody:{}},i,(function(n){e.setLoading(!1);var r,a=n.content,s=a.link_option;if("LINK_FIELD"==a.custom_type&&s)if(act=s.l_tp,"DOC"==act){if(dnode&&dnode.downloadurl){var l=(dnode.filename||t.name)+"."+dnode.fileext;$.download(ig$.servlet+"/download",[{name:"ack",value:"download"},{name:"payload",value:dnode.downloadurl},{name:"_mts_",value:IG$._g$a||""},{name:"mbody",value:l},{name:"session_key",value:window.use_session_key?ig$._session_key||"empty":""}],"POST")}}else if("DRILL"==act)r=e.getDrillXML(dobj),dnode={uid:s.l_rpt_uid,name:s.l_rpt_name,type:"Report"},dnode.uid&&i.showDetailView(e,dnode,r);else if("EXTERNAL"==act){if(s.l_elnk&&window[s.l_elnk])window[s.l_elnk].apply(null,[i,e,o,e.mresults.results[0]._tabledata[o.r]]);else s.l_elnk&&"http"==s.l_elnk.substring(0,4)&&window.open(s.l_elnk,s.l_elnk_tgt||"_blank",s.l_elnk_spec||"")}}),(function(){e.setLoading(!1)})),n.send()}),500)},updateAllFilters:function(e,t){var o,i,n=this,r=1,a=n.dzone,s=e?e.sheetoption.docid:null,l=[];return $.each(a.items,(function(e,a){var d=a.view;(t||!1!==a.visible)&&d&&d.sheetoption&&(o=d.sheetoption,i=o.model.filter_options,"FILTER"==o.objtype&&a.docid!=s&&!i.showbutton&&i.f_b_evt?d.checkFilterValues(1,l)?r&&(n.onFilterUpdate(d,1),$.each(l,(function(e,t){d.changeActiveTab(t,void 0)}))):r=0:"RPT_VIEW"==o.objtype&&d.irpt&&d.irpt.dzone&&(d.irpt.updateAllFilters(null,t)||(r=0)))})),r},executeDrillReport:function(e,t){var o,i,n,r,a,s,l,d,p,c,u=this,h=u.sheets,_=(h[e].olapset&&h[e].olapset.jobid,t.sheetoption),m=!!_&&_.model.edrill,f=_&&_.model&&_.model.filter_options?_.model.filter_options.drilltarget:null,b=new IG$.drilltarget(f,m),g=u.dzone,v=!1,w=u.dzone.docitems||{},y=!1,x=[];for(k in!1,$.each(h,(function(i,l){var d=b.isDrillTarget("asheet_"+i,l.sheet_id),p=l.sheetoption;if((m||d&&d.isdrill)&&l.sheetindex!=e){if(!m&&b._e&&(!d||d&&!d.isdrill))return;if(o=p.model.aux_filter,n=p.model.aux_filter)for(var c in n)o[c]=n[c];if((s=t.getDrillXML(d))&&(s.children.length||s.dragselect)){if(y=!0,1==t.activeView&&o["report_"+e])if(_.model.chart_option,s.dragselect)o["report_"+e]=s;else JSON.stringify(o["report_"+e])==JSON.stringify(s)?delete o["report_"+e]:o["report_"+e]=s;else o["report_"+e]=s;r=g.getBox(l.renderBox),v=!0,r&&r.parent&&"TAB"==r.parent.objtype&&(a=r.parent.view,v=a.active==l.renderBox),1==v?x.push({view:l,req:l.procRunReport(null)}):l.btabrun=!0}}})),u._exec_rpt(u,x),w)if(l=w[k].lt.ubody,d=l.view,"RPT_VIEW"==l.objtype){if(d&&d.irpt){var I=[];$.each(d.irpt.sheets,(function(u,h){if(c=h.reportoption,p=h.sheetoption,i=c?b.isDrillTarget(c.uid+"_sheet_"+u,c.uid+"_"+h.sheet_id):null,m||i&&i.isdrill){if(!m&&b._e&&(!i||i&&!i.isdrill))return;if(o=p.model.aux_filter,n=_.model.aux_filter)for(var f in n)o[f]=n[f];(s=t.getDrillXML(i))&&s.length>0&&(y=!0,o["report_"+e]=s,r=g.getBox(h.renderBox),v=!0,r&&r.parent&&"TAB"==r.parent.objtype&&(a=r.parent.view,v=a.active==h.renderBox),1==v?I.push({view:h,req:h.procRunReport(null)}):h.btabrun=!0,l.visible&&(d.f_run=!1))}})),u._exec_rpt(d.irpt,I)}}else"FILTER"==l.objtype&&d&&(i=b.isDrillTarget(l.docid)||null,(m||i&&i.isdrill)&&(s=t.getDrillXML(i))&&s.children&&s.children.length>0&&d.apply_drill_filter(s));return u.broadcastFilter(),y},updateDashboardFilterInfo:function(e){$.each(this.sheets,(function(t,o){o._dfilter=e}))},updateFilterInfo:function(e){var t,o,i,n,r;e&&e.length&&((t=new IG$.clFilterGroup(null)).name="____systemfilter____",o=new IG$.clFilterGroup(null),t.subGroups.push(o),$.each(e,(function(e,t){var a,s=new IG$.clFilter(null);for(s.operator=t.operator,(i=new IG$.clItems).uid=t.uid,i.type=t.type,i.nodepath=t.nodepath,i.name=t.name,s.itemList.push(i),s.delimiter="$%^",r=t.value,a=0;a<r.length;a++)iv=r[a],n={code:iv.code||iv,text:iv.text||iv.code||iv},s.values.push(n);o.subConditions.push(s)}))),t&&$.each(this.sheets,(function(e,o){for(var i=o.sheetoption.filter;i&&i.subGroups.length;)i=i.subGroups[0];i&&i.subGroups.push(t)}))},exportToFile:function(e,t,o,i,n,r){var a,s,l,d,p=this,c=new IG$._rpc$,u=p.reportoption._mc.name||"download",h=p.reportoption._mc.export_option,_=p.dzone;if(!p.sheets||p.sheets&&!p.sheets.length)p.checkReport();else{if(o&&o.sheetoption&&o.sheetoption.model){if(d=o.mresults&&o.mresults.results.length?o.mresults.results[0]:null,!0!==r&&"EXCEL"==e&&d&&d.db_paging&&d.total_records>d.rowcnt)return void IG$.confirmMessages(ig$.appname,IRm$.r1("L_C_EXCEL_CSV"),(function(r){"yes"==r?o.downloadAllCSV():p.exportToFile(e,t,o,i,n,!0)}));(o.sheetoption.name||o.sheetoption.model.name)&&((a=_.docitems[o.renderBox])&&a.lt&&a.lt.ubody&&(l=a.lt.ubody.getTitle()),l&&(u+="_"+l))}if(u=(u=u.replace(/\./g,"_")).replace(/ /g,""),"JASPER_"==e.substring(0,7))return e=e.substring(7).toLowerCase(),void p.toolbarHandler("cmd_export_jasper",e);if("OFFICE_"==e.substring(0,7))return s=Number(e.substring(7)),void(0==isNaN(s)&&s>-1&&h&&h.otmpl[s]&&p.toolbarHandler("cmd_export_office",h.otmpl[s]));switch(e){case"EXCEL":u+=".xls";break;case"PNG":u+=".png";break;case"PDF":u+=".pdf";break;case"SVG":u+=".svg";break;case"HTML":u+=".html";break;case"ODT":case"ODS":case"ODP":case"TMPL":u+="."+e.toLowerCase()}exportdata=p.getExportData(h,e,t,!1,null,o,i,n,new IG$.callBackObj(p,(function(o){c.init(p,{ack:"print",payload:{uid:p.uid,type:e,filename:u,fonttype:h&&h.fonttype?h.fonttype:"",isinstance:t?"T":"F",sheetname:l},mbody:o,meta_type:"print_data"},p,(function(t){p.rexportToFile(t,u,e)}),null),c.send()})))}},rexportToFile:function(e,t,o){var i,n,r=this.instance;if("complete"==e.status)if(i=e.downloadurl,n=e.isinstance,t=e.filename||t,n){a="./print.jsp?mts="+(r.dlgLogin.logininfo.mts_name||"")+"#p1=export&p2="+i,s=window.open(a,"name","height=500,width=800");window.focus&&s.focus()}else if("HTML"==o){var a="./htmlview.jsp?mts="+(r.dlgLogin.logininfo.mts_name||"")+"&p1=export&p2="+i,s=window.open(a,"name","height=500,width=800");window.focus&&s.focus()}else $.download(ig$.servlet+"/download",[{name:"ack",value:"download"},{name:"payload",value:i},{name:"_mts_",value:IG$._g$a||""},{name:"mbody",value:t},{name:"session_key",value:window.use_session_key?ig$._session_key||"empty":""}],"POST")},getExportData:function(e,t,o,i,n,r,a,s,l){var d,p,c,u,h,_,m,f,b,g,v,w,y,x,I=this,R={sheets:[]},k=I.dzone,T=0,G=0,j=0,C={},E=[];if(!r&&a?x=R.sheetpages=[]:y=R.items=[],i?(R.uid=I.uid,R.name=n):(R.layout=e.layout||"portrait",R.option=e),r){if(u=r.renderBox,!r.check_exp())return void IG$.ShowError(IRm$.r1("E_SHEET_EXP"),I);R.sheets.push({docid:u,jobid:r.jobid,sheetname:r.sheetoption&&r.sheetoption.model?r.sheetoption.model.name:null})}else for(d=0;d<k.items.length;d++)if("SHEET"==(c=k.items[d]).objtype){if(u=(_=c.view).renderBox,s&&!s["sheet_"+_.sheetindex])continue;R.sheets.push({docid:u,jobid:_.jobid,title:c.title,sheetname:_.sheetoption&&_.sheetoption.model?_.sheetoption.model.name:null}),C["SHEET_"+d]=c.title||""}else"FILTER"==c.objtype&&c.view&&c.view.updateFilterPrompt(C);for(g in R.layoutinfo=k.getLayout(),R.params=E=[{name:"REPORT_NAME",value:I.reportoption._mc.name}],C)E.push({name:g,value:C[g]});!I.reportoption._mc.name||a||r||(y.push({type:"label",x:T,y:G,sheet_title:!0,text:I.reportoption._mc.name}),G+=j=30);var O=[];for(d=0;d<k.items.length;d++)if(c=k.items[d],f=0,b=0,_=null,!c||(r||a||(T=c.lt.x,G=c.lt.y+j),f=c.lt.w,b=c.lt.h,0!=c.visible))if("SHEET"==c.objtype){if(h=(_=c.view).sheetoption&&_.sheetoption.model?_.sheetoption.model.name:null,r&&r!=_)continue;if(s&&!s["sheet_"+_.sheetindex])continue;_&&_.sheetoption&&(u=_.renderBox,_.sheetoption.name&&(y&&y.push({type:"label",x:T,y:G,d_width:f,d_height:b,docid:c.docid,doc_title:!0,text:h,sheetname:h,sheetindex:_.sheetindex}),G+=20),e.filterdesc&&_.mresults&&_.mresults.results&&(w=(v=_.mresults.results)&&v.length?v[0].filterdesc:null)&&(y&&y.push({type:"label",x:T,y:G,sheet_title:!0,text:w,sheetname:h,sheetindex:_.sheetindex}),G+=j=30,b=b>30?b-30:b),O.push(_))}else"FILTER"==c.objtype&&(m=(_=c.view).getExportData&&_.getExportData(T,G,c.docid,f,b))&&y&&(r||a||y.push(m));if(O&&O.length){var S=0,L=O.length,P=function(){l.execute(R)};$.each(O,(function(o,i){var n,r,a=y||[],s=i.sheetoption&&i.sheetoption.model?i.sheetoption.model.name:null;x&&(x.push({sheetname:s,sheetindex:i.sheetindex,items:a}),T=0,G=0,e.filterdesc&&i.mresults&&i.mresults.results&&(r=(n=i.mresults.results)&&n.length?n[0].filterdesc:null)&&(a.push({type:"label",x:T,y:G,sheet_title:!0,text:r,sheetname:s,sheetindex:i.sheetindex}),30,G+=30,b=b>30?b-30:b)),0==i.activeView?i.grid$&&i.grid$.getExportData(e,new IG$.callBackObj(I,(function(e){e&&a.push({type:"datagrid",x:T,y:G+20,d_width:f,d_height:b,docid:c.docid,sheetindex:i.sheetindex,instance:e,sheetname:s,sheetindex:i.sheetindex}),++S==L&&P()}))):1==i.activeView?i.chart$&&i.chart$.getExportData(e,T,G+20,c.docid,f,b,new IG$.callBackObj(I,(function(e){var o,n=0,r=0;if(e&&"object"==typeof e&&e.length){for(p=0;p<e.length;p++)(o=e[p]).sheetname=s,i.jobid&&(o.instance={jobid:i.jobid}),o.sheetindex=i.sheetindex,a.push(o),n=Math.max((o.x||0)+(o.width||300),n),r=Math.max((o.y||0)+(o.height||200),r);G=r+20}if("EXCEL"==t&&i.sheetoption.model.tb_prt_grd2&&i.mresults){var l={jobid:i.mresults.jobid};tbitem={type:"datagrid",x:T,y:G+20,d_width:f,d_height:b,docid:c.docid,sheetindex:i.sheetindex,instance:l,sheetname:s,sheetindex:i.sheetindex},a.push(tbitem)}++S==L&&P()}))):2==i.activeView?i.rstat$&&i.rstat$.getExportData(e,T,G+20,t,c.docid,f,b,new IG$.callBackObj(I,(function(e){e&&(e.sheetname=s,e.sheetindex=i.sheetindex,a.push(e)),++S==L&&P()}))):i.grid$?i.grid$.getExportData(e,new IG$.callBackObj(I,(function(e){e&&a.push({type:"datagrid",x:T,y:G+20,d_width:f,d_height:b,docid:c.docid,data:e,sheetname:s,sheetindex:i.sheetindex}),++S==L&&P()}))):i.chart$?i.chart$.getExportData(new IG$.callBackObj(I,(function(e){e&&a.push({type:"chart",x:T,y:G+20,d_width:f,d_height:b,width:i.chart$.body.getWidth(),height:i.chart$.body.getHeight(),docid:c.docid,data:e,sheetname:s,sheetindex:i.sheetindex}),++S==L&&P()}))):++S==L&&P()}))}else l.execute(R)},broadcastFilter:function(){var e,t,o={},i=this.dzone.items;for(e=0;e<i.length;e++)(t=i[e].view)&&t.getFilterInfo&&t.getFilterInfo(o);for(e=0;e<i.length;e++)(t=i[e].view)&&t.updateFilterContent&&t.updateFilterContent(o)},doCellClick:function(e,t){var o,i,n,r,a,s=this,l=e.sheetoption,d=t?t.cl:null;d&&(r=d.title,ig$.report_script$&&l.model.rpt_evt_click&&(a=ig$.report_script$[l.model.rpt_evt_click])&&(s._ine_th&&clearTimeout(s._ine_th),s._ine_th=setTimeout((function(){var t;try{t=e.mresults.results[0]._tabledata[d.r];var o=a.handler.call(this,s,e,t,d.r,d.c);if(0==o)return;if(o&&o.err)return mr=0,void IG$.ShowError(IRm$.r1("E_CLICK_EVENT_HANDLER")+err,s)}catch(e){return}}),500)),l&&9==r?(o=d.index,i=d.position,(n=l.getItem(o,i))&&s.doLink(e,n,d)):r>2&&s.doDrillReport(e))},procMenu:function(e,t){var o,i,n,r,a,s,l,d,p,c=this,u=e.sheetoption.model,h=t.menu.cell,_=!1,m=u?u.sortoption:null;switch(u&&(l=u.mdf=u.mdf||{},m=u.sortoption=u.sortoption||{}),h&&(1==(d=h.position)?o="rows":2==d?o="cols":3==d&&(o="measures"),i=o&&u[o].length>h.index?u[o][h.index]:null),t.cmd){case"CMD_REMOVE":if(4==h.position){if(n=u.sheet_formula)for(p=0;p<n.length;p++)if(n[p].node.fid=="formula_"+h.index){n.splice(p,1),_=!0;break}}else o&&u.rows.length+u.cols.length+u.measures.length>1&&(u[o].splice(h.index,1),_=!0);break;case"CMD_SORT":c.toolbarHandler("cmd_sort_option",i);break;case"CMD_FILTER":c.toolbarHandler("cmd_filter",i);break;case"CMD_STYLE":c.toolbarHandler("cmd_style",i);break;case"CMD_ASC":"asc"!=i.sortorder&&(i.sortorder,i.sortorder="asc",_=!0);break;case"CMD_DESC":"desc"!=i.sortorder&&(i.sortorder,i.sortorder="desc",_=!0);break;case"CMD_TOP5":r="top",a=5,s=i.uid;break;case"CMD_TOP10":r="top",a=10,s=i.uid;break;case"CMD_BTM5":r="bottom",a=5,s=i.uid;break;case"CMD_BTM10":r="bottom",a=10,s=i.uid;break;case"CMD_SHOWALL":r="normal",a=0,s=null;break;case"CMD_UNDO":_=e.undolist();break;case"CMD_CLIPBOARD":var f=e.getClipboardContent();IG$.clipboardCopy(f);break;case"CMD_RUN_FILTER":l&&(_=!0,t.menu.mdf?l[h.c]=t.menu.mdf:delete l[h.c]);break;case"T_SUM":case"T_AVG":case"T_MIN":case"T_MAX":case"T_RANK":case"T_POT":case"T_CUMUL":case"T_INCR":case"T_DIFF":case"CL_FM":case"R_FMT":l&&c.formulaHandler(e,i,t.cmd);break;default:if("detail:"==t.cmd.substring(0,7)){var b,g,v,w,y=t.cmd.substring(7),x=u.detailview;for(p=0;p<x.length;p++)if(x[p].uid==y){b=x[p];break}if(b){if(v=(g={titem:{enabled:!1,items:[],item_map:{}},tparams:{enabled:!1,items:[],item_map:{}}}).titem,w=g.tparams,b.titem){for(v.items=b.titem.split(";"),p=0;p<v.items.length;p++)v.items[p]&&(v.item_map[v.items[p]]=1);v.items.length&&(v.enabled=!0)}if(b.tparams){for(w.items=b.tparams.split(";"),p=0;p<w.items.length;p++)w.items[p]&&(w.item_map[w.items[p]]=1);w.items.length&&(w.enabled=!0)}var $=e.getDrillXML(g);$&&$.children.length>0&&c.showDetailView(e,b,$)}}}m&&(r&&r!=m.sortmethod||a&&a!=m.sortcount||s&&s!=m.sortmeasure)&&(_=!0,m.sortmethod=r,m.sortcount=a,m.sortmeasure=s),1==_&&(c.contentchanged=!0,c.updatePivotCnt(c.activeSheet))},makeTempReportMeta:function(e){var t={content:{cube_objects:[],type:e.type,objinfo:{}},type:e.type};return e.cube_objects&&(t.content.cube_objects=e.cube_objects),t},continueReportOption:function(e){var t,o,i,n,r,a,s=this,l=e.cubeobj,d=e.sql_datasource,p=s.reportoption,c=s.dzone,u=s.sheets,h={};if(s.reportoption||(_isnew=1,p=s.reportoption),s.reportlayout&&(s.reportlayout=null),l||"sql_report"==s.meta_type&&d){if("sql_report"==s.meta_type);else{for(p._mc.default_datasource||(p._mc.default_datasource=l.uid),a=p._mc.cube_objects=p._mc.cube_objects||[],t=0;t<a.length;t++)h[a[t].uid]=1;h[l.uid]||(a.push(l),h[l.uid]=1)}0==p.sheets.length&&(o=new IG$.clReport({},p.itemtype,!1),p.sheets.push(o),"sql_report"==s.meta_type&&(o.model.dataquerymode="M_DATA"),u.length||(i=s.appendBox(null,{}),c.setActive(i),n=s.createSheet(0,o,i),o.model.layoutinfo.docid=i.docid,i.setTitle(o.name||""),i.view=n,i.objtype="SHEET",i.validateProperty(),i.setReportOption(o),s.sheets.push(n),s.sheets_id[n.sheet_id]=n),(r=s.sheets[0]).reportoption=p,r.sheetoption=o,r.applyOptions(),c.updateDisplay(),s.editmode||s.toolbarHandler("cmd_editmode"),"sql_report"!=s.meta_type&&setTimeout((function(){s.showPivotConfig(r.renderBox)}),100)),s.refDS(),s.updateTbarAll()}},updateViewMode:function(e){var t=this,o=t.sheets[t.activeSheet];o?("chart"==e&&t.showChartToolbar(),"chart"!=e&&t.hideChartToolbar(),t.setRToolbar("r"==e),t.setPythonToolbar("python"==e),t.updateChartToolbar("chart"!=e),t.updateRToolbar("r"!=e),t.showAnalyToolbar("analysis"==e),t.setFormViewToolbar("form"==e),o.updateViewMode(e)):t.checkReport()},toolbarHandler:function(e,t,o,i,n){var r,a,s,l,d=this,p=d.instance,c=d.dzone,u=d.sheets[d.activeSheet],h=d.down("[name=tbsch]"),_=d.down("[name=t_pivot]");switch(e){case"cmd_editmode":l=(c=d.dzone).body_container,d.editmode=!d.editmode,_.toggle(d.editmode),_.setText(d.editmode?IRm$.r1("B_VIEWMODE"):IRm$.r1("B_EDITMODE")),d.down("[name=t_rpt_conf]").setVisible(d.editmode),d.updateTbarAll(),c.editmode=d.editmode,l.removeClass("igc_design_mode"),l.removeClass("igc_view_mode");var m=d.down("[name=pivot_dlg]"),f=(u&&u.sheetoption&&u.sheetoption.model.viewmode,d.down("[name=t_sql_view]"));"sql_report"==d.meta_type&&f.setText(d.editmode?IRm$.r1("L_EDIT_SQL"):IRm$.r1("L_VIEW_SQL")),d.editmode?l.addClass("igc_design_mode"):l.addClass("igc_view_mode"),c.updateDisplay(),$.each(c.bodylist,(function(e,t){t.view&&t.view.set_mode&&t.view.set_mode(d.editmode)})),m&&m.setVisible(d.editmode),m&&"sql_report"==d.meta_type&&d.editmode&&1==d.sheets.length&&d.sheets[0].renderBox&&0!==t?(m.setVisible(d.editmode),d.showPivotConfig(d.sheets[0].renderBox)):m&&d.editmode&&u&&u.renderBox?d.showPivotConfig(u.renderBox):m&&m.setVisible(!1);break;case"cmd_sheetview":d.updateViewMode("grid");break;case"cmd_chartview":d.updateViewMode("chart");break;case"cmd_rview":"L1"==p.dlgLogin.logininfo.l3?IG$.ShowError("R Viewer is not allowed for license limitation. Please contact amplixbi.com for Enterprise license.",d):d.updateViewMode("r");break;case"cmd_pythonview":"L1"==p.dlgLogin.logininfo.l3?IG$.ShowError("Python Viewer is not allowed for license limitation. Please contact amplixbi.com for Enterprise license.",d):d.updateViewMode("python");break;case"cmd_analysis":"L1"==p.dlgLogin.logininfo.l3?IG$.ShowError("Analysis Viewer is not allowed for license limitation. Please contact amplixbi.com for Enterprise license.",d):d.updateViewMode("analysis");break;case"cmd_formview":"L1"==p.dlgLogin.logininfo.l3?IG$.ShowError("Form Viewer is not allowed for license limitation. Please contact amplixbi.com for Enterprise license.",d):d.updateViewMode("form");break;case"cmd_run":if(d.schedule_load)d.$init_block_run||IG$.confirmMessages(ig$.appname,IRm$.r1("L_C_SCH"),(function(r){"yes"==r&&(h&&h.hide(),d.schedule_load=0,d.toolbarHandler(e,t,o,i,n))})),d.$init_block_run=!1;else{if(d._template_load)return void(d._template_load=0);if(o&&d.updateFilterInfo(o),i&&d.updateDashboardFilterInfo(i),d.activeSheet=0,u=d.sheets[d.activeSheet])r=c.getBox(u.sheetoption?u.sheetoption.model.layoutinfo.docid:null),c.setActive(r);else if(!n){var b=!1,g=d.dzone.docitems||{};for(k in g)if("RPT_VIEW"==g[k].objtype){b=!0;break}if(!b)return void d.checkReport()}d.clearAuxFilter(),d._params=null,d.refreshParameters();var v,w,y=[],x=0,I={};v=function(e,t){var o,i,r,a,s,l,d,p,c,u,h=this,_=h.dzone.docitems||{};if(h.$init_block_run)h.$init_block_run=!1;else{var m=[];for(o=0;o<h.sheets.length;o++)if((i=h.sheets[o]).executioncode=0,i.clearResult&&i.clearResult(),i.beforeRun(),(r=i.sheetoption)&&(!n||1==r.model.openload)&&"M_SYNC"!=r.model.dataquerymode)if(r.model.openload||t&&(!t||1===t[o])){if(1==e||!(!t||1!=t[o])){var f={view:i};if(i.customLoad(!0,!0),i.olapset){if(i.olapset.reportoption._dfilter=i._dfilter,i.updateNoPivot&&0==i.updateNoPivot())continue;u=i.olapset.reportoption.getCurrentPivot(),g=i.olapset.requestUpdateReport(u,"mode",i.sheetindex,i)}else g=i.procRunReport();f.req=g,g&&g.payload&&m.push(f)}}else i.mresults=null,i.updateNoData&&i.updateNoData(!1);for(s in h._exec_rpt(this,m),_)if("RPT_VIEW"==(a=(l=_[s]).lt.ubody).objtype){if(l.parent&&"inner"==l.parent.loc&&l.parent.node&&"TAB"==l.parent.node.objtype&&l.parent.node.active!=a.docid?a.visible=!1:a.visible=!0,1==a.visible&&a.view&&!a.view.validated){for(O in a.view._directFilter=a.view._directFilter||{},a.view.validateFilter=!0,c=a.view._directFilter)(O.indexOf("report_")>-1||O.indexOf("filter_")>-1)&&delete c[O];a.view.validateItems(1==e);continue}if(a.view)if(a.view.irpt){var b=[];for(o=0;o<a.view.irpt.sheets.length;o++){for(O in c=(p=(d=a.view.irpt.sheets[o]).sheetoption).model.aux_filter)(O.indexOf("report_")>-1||O.indexOf("filter_")>-1)&&delete c[O];var g;if(1==a.visible&&1==e&&"M_SYNC"!=p.model.dataquerymode)d.beforeRun(),d.olapset?(u=d.olapset.reportoption.getCurrentPivot(),g=d.olapset.requestUpdateReport(u,"mode",o,d)):p&&(g=d.procRunReport()),b.push({view:d,req:g});else a.view.validateFilter=!0}h._exec_rpt(a.view.irpt,b)}else for(O in a.view._directFilter=a.view._directFilter||{},a.view.validateFilter=!0,c=a.view._directFilter)(O.indexOf("report_")>-1||O.indexOf("filter_")>-1)&&delete c[O]}}};for(let e=0;e<c.items.length;e++)(a=c.items[e].view)&&a.initFilter&&(a.afterInit=null,y.push(a));y.length>0?(w=function(e,t){x++;var o,i,n,r,a,s,l=this,d=e.getFilter(),p=l.sheets,c=e.sheetoption.model.filter_options,u=c.showbutton,h=c.edrill,_=c.drilltarget,m=new IG$.drilltarget(_,h),f=l.dzone.docitems||{},b="filter_"+l.dzone._dzid+"_"+e.sheetoption.docid;if(i=e.checkFilterValues(1,[]),!u)for(o=0;o<p.length;o++)a=f[(r=(n=p[o]).sheetoption).model.layoutinfo?r.model.layoutinfo.docid:null],s=m.isDrillTarget("sheet_"+o,n.sheet_id),(h||!m._e||s)&&(r.model.aux_filter[b]=d,I[o]=void 0===I[o]?1:I[o],I[o]=i&&1==I[o]?1:0,a&&0==a.visible&&(I[o]=1==I[o]?2:I[o]));e.afterInit=null,x==y.length&&v.call(l,2,I)},$.each(y,(function(e,t){t.afterInit={p:d,f:w},t.initFilter(null,1)}))):v.call(d,1),d.broadcastFilter()}break;case"cmd_save":if(d.reportoption){var R=IG$.reportbase$.preSaveContent.call(d).uid;if(R){var T=d.reportoption.getCurrentPivot();d.saveContent(R,T,t)}else d.saveAsContent(!1)}break;case"cmd_saveas":IG$.reportbase$.preSaveContent.call(d),d.saveAsContent(!1);break;case"cmd_chartwizard":s=new IG$.chartwizard({instance:d.instance,reportoption:d.reportoption,sheetoption:d.reportoption.sheets[d.activeSheet],callback:new IG$.callBackObj(d,d.updateChartOpt)}),IG$.checkLogin(this,s);break;case"cmd_analwizard":s=new IG$.analeditor({instance:d.instance,reportoption:d.reportoption,sheetoption:d.reportoption.sheets[d.activeSheet],callback:new IG$.callBackObj(d,d.updateAnalOpt)}),IG$.checkLogin(this,s);break;case"cmd_r_summary":case"cmd_r_script":u.rstat$._ctrlwindow(e);break;case"cmd_r_simage_png":d.exportToFile("PNG");break;case"cmd_r_simage_svg":d.exportToFile("SVG");break;case"cmd_r_wizard":s=new IG$.r_wizard_u({instance:d.instance,dc:u.rstat$.getDataColumns(),callback:new IG$.callBackObj(d,d.closeRWizard)}),IG$.checkLogin(d,s);break;case"cmd_py_edit":u.python$._ctrlwindow(e);break;case"cmd_export_excel":d.exportToFile("EXCEL");break;case"cmd_export_html":d.exportToFile("HTML");break;case"cmd_export_pdf":d.exportToFile("PDF");break;case"cmd_export_csv":u||d.checkReport(),u.downloadAllCSV();break;case"cmd_export_tmpl":d.exportToFile("TMPL");break;case"cmd_export_prt":d.exportToFile("PDF",!0);break;case"cmd_clipboard":d.clipboardCopy();break;case"cmd_export_office":var G,j,C,E=(D=d.reportoption)._mc.export_option,O=D._mc.name,S=new IG$._rpc$,L=t.name,P="TMPL_OC",F="TMPL";O=(O=O.replace(/\./g,"_")).replace(/ /g,""),(j=L.lastIndexOf("."))>0&&("docx"==(G=L.substring(j+1).toLowerCase())||"doc"==G?(P="TMPL_T",t.export_type?(C=t.export_type,O+="."+("field"==C?"fields.xml":C)):O+="."+G):"xlsx"!=G&&"xlsxm"!=G||(O+="."+G)),d.getExportData(E,"office",void 0,void 0,void 0,void 0,void 0,void 0,new IG$.callBackObj(d,(function(e){S.init(d,{ack:"print",payload:{uid:d.uid,type:P,filename:O,utemplate:"T",tmpluid:t.uid,tmplname:t.name,tmpltype:t.type,outputformat:C},mbody:e,meta_type:"print_data"},d,d.rexportToFile,null,O),S.send()})));break;case"cmd_export_jasper":var D;E=(D=d.reportoption)._mc.export_option,O=D.name,S=new IG$._rpc$,F="TMPL";O=(O=O.replace(/\./g,"_")).replace(/ /g,""),O+="."+("excel"==t.toLowerCase()?"xls":t),d.getExportData(E,"jasper",void 0,void 0,void 0,void 0,void 0,void 0,new IG$.callBackObj(d,(function(e){S.init(d,{ack:"print",payload:{uid:d.uid,type:F,filename:O,fonttype:E&&E.fonttype?E.fonttype:"",utemplate:"T",tmplpage:E.jasper&&E.jasper.jasper_template,tmpluid:E.jasper&&E.jasper.jasper_tmpl_uid,jasper_filetype:t},mbody:e,meta_type:"print_data"},d,d.rexportToFile,null,O),S.send()})));break;case"cmd_export_option":s=new IG$.exportWizard({instance:d.instance,reportoption:d.reportoption,sheetoption:u?u.sheetoption:null,dzone:d.dzone,callback:new IG$.callBackObj(d,d.updateExpOpt)}),IG$.checkLogin(this,s);break;case"cmd_filter":u&&t&&u.appendPrompt(t);break;case"cmd_style":u&&t&&u.setStyle(t);break;case"cmd_edit_data":s=new IG$.dateMetric({instance:d.instance,reportoption:d.reportoption,sheetoption:u.sheetoption,callback:new IG$.callBackObj(d,d.updateDataChange)}),IG$.checkLogin(this,s);break;case"cmd_prompt":var B=u.sheetoption.needPrompt();u.showPrompt(B,!0);break;case"cmd_view_sql":if("sql_report"==d.meta_type)s=new IG$.dlgsqlview({instance:d.instance,meta_type:d.meta_type,reportoption:d.reportoption,sheetoption:u?u.sheetoption:null,uid:d.uid,editmode:d.editmode,activeSheet:d.activeSheet,width:650,height:500,title:IRm$.r1("I_SQLCUBE"),edit_callback:new IG$.callBackObj(d,(function(){d.toolbarHandler("cmd_editmode",0),d.toolbarHandler("cmd_view_sql")})),callback:new IG$.callBackObj(d,(function(e){if(d.editmode){var t,o,i,n=d.reportoption._mc,r=n.inlineview_sql_objects,a={},s={};for(r||(r=n.inlineview_sql_objects=[]),i=0;i<e.length;i++)a[e[i].sql_id]=e[i];for(i=r.length-1;i>=0;i--)a[r[i].sql_id]?(o=a[(t=r[i]).sql_id],t.name=o.name,t.sql_inlineview=o.sql_inlineview,s[t.sql_id]=t):r.splice(i,1);for(i=0;i<e.length;i++)s[e[i].sql_id]||r.push(e[i]);d._update_sql_columns(),d.editmode=1,d.toolbarHandler("cmd_editmode",0)}}))}),IG$.checkLogin(this,s);else if(u){if(0==d.checkPivot(u))return;s=new IG$.dlgsqlview({instance:d.instance,meta_type:d.meta_type,reportoption:d.reportoption,sheetoption:u.sheetoption,uid:d.uid,activeSheet:d.activeSheet}),IG$.checkLogin(this,s)}else d.checkReport();break;case"cmd_formview_edit":u&&u.editFormViewer();break;case"cmd_change_type":d.showReportOption();break;case"cmd_rpt_conf":s=new IG$.RptConf({instance:d.instance,rpt:d,dzone:d.dzone,sheets:d.sheets,reportoption:d.reportoption,callback:new IG$.callBackObj(d,(function(){}))}),IG$.checkLogin(this,s);break;case"cmd_add_sheet":s=new IG$.sheetobj({instance:d.instance,dzone:d.dzone,sheets:d.sheets,reportoption:d.reportoption,isnewobject:!0,objtype:t||"SHEET",callback:new IG$.callBackObj(d,d.addSheet)}),IG$.checkLogin(this,s);break;case"cmd_add_story":u&&u.appendStory();break;case"cmd_sort_option":s=new IG$.sortOptionDlg({instance:d.instance,reportoption:d.reportoption,sheetoption:u.sheetoption,callback:new IG$.callBackObj(d,d.updatePivotContent)}),IG$.checkLogin(this,s);break;case"cmd_capture":d._capture_frame();break;case"cmd_reg_template":d._reg_as_tmpl();break;case"cmd_reg_recommend":d._reg_as_recom();break;case"cmd_statistics":if(!u)return void d.checkReport();s=new IG$.statistics({instance:d.instance,report:d,activeview:u}),IG$.checkLogin(d,s);break;case"cmd_loption":d.configDockNotify();break;case"cmd_schedule":if(d.uid){var M=d.getRequests();IG$.showScheduler(d,d.uid,d.itemtype,M,d.reportoption)}break;case"cmd_favorites":if(d.uid)(S=new IG$._rpc$).init(d,{ack:"helpcontent",payload:{uid:d.uid},mbody:{option:"addfavorites"}},d,d.rs_regFavorites,null,null),S.send();break;case"cmd_share":d.uid&&d.showShare()}},_exec_rpt:function(e,t){var o=this,i=new IG$._rpc$,n=e?e.reportoption:o.reportoption,r=[],a=[],s=[],l=0;if(t.length){function d(){pivotxml.bulkload&&r.length?(i._ld=1,i.init(o,{ack:"olapservice",payload:r,mbody:pivotxml,meta_type:o.meta_type||"report"},o,(function(e){o._ldr=null,$.each(e,(function(e,t){var i=a[e],n=(r[e],s[e]),l=n.olapset,d=l.callback,p=new IG$._rpc$;p.init(o,{},o,(function(e){n.setLoading(!1),l[i.method](e,i.params)}),(function(e){n.setLoading(!1),d&&d.execute({xdoc:e,iserror:!0})})),p._sproc(o.instance,t)})),o.instance.navigateCompleted(o)}),(function(e){o._ldr=null,$.each(s,(function(e,t){t&&t.set_exec&&t.set_exec("B_RPT_ERR"),t.setLoading(!1)})),o.instance.navigateCompleted(o)})),o._ldr=i,i.send()):$.each(a,(function(e,t){var i=new IG$._rpc$,n=s[e];i._ld=1,n&&n.set_exec&&n.set_exec("B_RPT_RUN"),n&&n.customLoad(!0,!0),i.init(o,{ack:"olapservice",payload:t.payload,mbody:pivotxml,meta_type:o.meta_type||"report"},o,(function(e){n._ldr=null;var i=t,r=(t.payload,n.olapset),a=r.callback,s=new IG$._rpc$;n.setLoading(!1),s.init(o,{},o,(function(e){r[i.method](e,i.params)}),(function(e){a&&a.execute({xdoc:e,iserror:!0})})),s._sproc(o.instance,{result:e}),o.instance.navigateCompleted(o)}),(function(e){n._ldr=null,n&&n.set_exec&&n.set_exec("B_RPT_ERR"),n.setLoading(!1),o.instance.navigateCompleted(o)})),n._ldr=i,i.send()}))}if(pivotxml=n.getCurrentPivot(),$.each(t,(function(e,t){var o=t.view,i=t.req;i&&i.payload&&(pivotxml.bulkload&&(o.set_exec&&o.set_exec("B_RPT_RUN"),o.customLoad(!0,!0)),s.push(o),a.push(i),r.push(i.payload),i.payload.jobid||l++)})),l){var p=new IG$._rpc$;p.init(o,{ack:"helpcontent",payload:{option:"newid",cnt:""+l},mbody:{}},o,(function(e){var t=0;e.nuid&&e.nuid.length&&$.each(r,(function(o,i){i.jobid||(i.jobid=e.nuid[t++],s[o].jobid=i.jobid)})),d()})),p.send()}else d()}},checkReport:function(){var e=this;IG$.confirmMessages(null,IRm$.r1("E_SEL_BOBJ"),(function(t){"yes"==t&&e.showReportOption()}),e,e)},checkPivot:function(e){var t;return(t=e.updateNoPivot())||IG$.ShowError(IRm$.r1("E_CONFIG_PIVOT"),this),t},showShare:function(){var e=this,t=new IG$.dlg_share({instance:e.instance,uid:e.uid});IG$.checkLogin(e,t)},preSaveContent:function(){var e,t,o,i,n=this,r=n.dzone,a=window.m$dw;if(n.editmode&&$.each(n.sheets,(function(e,t){if("python"==(t.sheetoption?t.sheetoption.model.viewmode:null)){var o=t.python$;o&&o._do_edit&&o._do_edit(n.editmode)}})),n.sheets.length>1)for(t=0;t<n.sheets.length;t++)(o=n.sheets[t]).sheetoption.model[a?"layoutinfo_bs":"layoutinfo"]={docid:o.renderBox,collapsed:o.collapsed,headerposition:o.headerPosition,region:o.region,width:o.getWidth(),height:o.getHeight()};for(t in n.reportoption._mc.uid=n.reportoption._mc.uid||n.uid,e=n.reportoption._mc.uid,a?n.reportoption._mc.layout_bs=r.getLayout():n.reportoption._mc.layout=r.getLayout(),n.reportoption._mc.ctrls={},r.ctrls)(i=r.ctrls[t]).model.docid=i.docid,i.model.objtype=i.objtype,n.reportoption.ctrls[t]&&i.objtype,n.reportoption._mc.ctrls[t]=i.model;return{uid:e}},showDetailView:function(e,t,o){var i,n,r,a=this.instance,s={},l=e.sheetoption.model.aux_filter;for(i in l)n=(n=i.replace(/report/,"pageRPT")).replace(/filter/,"pageFLT"),r=t.uid+"_"+n,i=="report_"+e.sheetindex?s[r]=o:s[r]=l[i];if(s[t.uid+"_pageRPT_"+e.sheetindex]=o,t.showintab&&a.mainPanel){var d={auxfilter:s};a.mainPanel.navigateApp(t.uid,t.type||"report",t.name,t.nodepath,!0,null,null,d)}else{var p=new IG$.detailDrillWin({instance:this.instance,viewinfo:t,auxfilter:s});IG$.checkLogin(this,p)}},saveAsContent:function(e){var t=this,o=new IG$.metaSelectDlg({instance:t.instance,mode:"newitem",initpath:t.nodepath});o.callback=new IG$.callBackObj(t,t.saveAsNew,e),IG$.checkLogin(this,o)},saveAsNew:function(e,t){var o=this,i=o.reportoption.getCurrentPivot(),n=new IG$._rpc$;n.init(o,{ack:"writecontent",payload:{address:e.nodepath+"/"+e.name,name:e.name,type:o.itemtype?o.itemtype:"Report",pid:e.uid},mbody:i,meta_type:o.meta_type||"report"},o,o._rs_procMakeItem,o.rs_procMakeItem,[e.name,t,e.nodepath,e.uid,i]),n.showerror=!1,n.send()},rs_procMakeItem:function(e,t){var o=this,i=t[0],n=t[1],r=t[2],a=t[3],s=t[4];"0x12e0"==IG$.getErrorCode(e)?IG$.confirmMessages(ig$.appname,i+" "+IRm$.r1("M_CONFIRM_OVERWRITE"),(function(e){if("yes"==e){var t=new IG$._rpc$;t.init(o,{ack:"writecontent",payload:{address:r+"/"+i,name:i,type:o.itemtype||"Report",pid:a,overwrite:"T"},mbody:s,meta_type:o.meta_type||"report"},o,o._rs_procMakeItem,null,[i,n,r]),t.send()}}),o,o):IG$.ShowErrorMessage(e,o)},_rs_procMakeItem:function(e,t){var o,i=this,n=t[1],r=i.reportoption,a=e.name;if(1==n)return i.ignoreclose=!0,void i.close();for(i.contentchanged=!1,i.uid=e.uid,o=0;o<i.sheets.length;o++)i.sheets[o].olapset&&(i.sheets[o].olapset.uid=i.uid);r._mc.uid=i.uid,r._mc.name=a,i.id=e.type.toLowerCase()+"_"+e.uid,i.setTitle(a),i.down("[name=tbreportname]").setText(a)},updatePivotContent:function(){this.toolbarHandler("cmd_run")},clearAuxFilter:function(){var e,t,o=this.sheets;if(o&&o.length>0)for(e=0;e<o.length;e++)for(fname in(t=o[e]).clearAuxFilter(),auxfilter=t.sheetoption.model.aux_filter,auxfilter)(fname.indexOf("report_")>-1||fname.indexOf("filter_")>-1)&&delete auxfilter[fname]},updateRptResCnt:function(e){var t,o,i,n=this,r=n.activeSheet,a=r>-1?n.sheets[r]:null,s=n.down("[name=tbrescount]"),l=n.down("[name=tbcache]"),d="",p=0,c="",u=!1,h=n.sheets;if(a&&a.updateNoPivot()&&a.mresults&&a.mresults.results&&a.mresults.results.length>0&&(i=((o=a.mresults.results[0]).db_paging?o.total_records:o.rowcnt)-o.rowfix,d="("+IRm$.r1("B_ROW")+": "+i+", "+IRm$.r1("B_COL")+": "+o.colcnt+")",p=o.cache,c=o.u_cache_time),e){for(t=0;t<h.length;t++)if(1==h[t].executioncode){u=!0;break}u||n.doDbrdExit()}s&&s.setText(d),l&&(l.setVisible(p),l.setTooltip("DATA ON : "+c+"\nClick to refresh data!"))},refDS:function(){var e,t,o,i=this,n=i.down("[name=tbcubepath]"),r=i.sheets[i.activeSheet],a=i.reportoption.cube_objects,s=r?r.sheetoption.model.cube_object:null,l=new IG$._rpc$;s?(n.setText(s.name),n._cobj=s,n.show()):a.length?(e=IG$._dsmap=IG$._dsmap||{},t=(o=a[0]).uid,e[t]?(n.setText(o.name),n._cobj=e[t],n.show()):(n.setText(""),n._cobj=null,n.hide(),l.init(i,{ack:"helpcontent",payload:{uid:t},mbody:{option:"translate"}},i,(function(t){t&&t.length&&(e[t[0].uid]=t[0],n.setText(t[0].name),n._cobj=t[0],n.show(),a[0].name=t[0].name,a[0].nodepath=t[0].nodepath)}),!1),l.send())):(n.setText(""),n._cobj=null,n.hide())},appendBox:function(e,t){var o,i=this.dzone,n=i._root,r={objtype:"SHEET",docid:null,_direction:0,parent:n,width:t&&t.panelwidth||100,height:t&&t.panelheight||100};return t&&t.is_float?n.children_float.push(r):n.children.push(r),o=i.appendWidgetBox(null,{width:r.width?parseInt(r.width):null,height:r.height?parseInt(r.height):null,draggable:i.draggable,is_float:!!t&&t.is_float,fixed_height:t.fixed_height,fixed_width:t.fixed_width,fit_content_h:t.fit_content_h,hidetitle:t.hidetitle,title:t.title,panel_css:t.panel_css,fl_resizable:!t||t.fl_resizable,fl_moveable:!t||t.fl_moveable,hide_maximize:!!t&&t.hide_maximize,fl_collapsed:!!t&&t.fl_collapsed,fl_collapsible:!!t&&t.fl_collapsible,fl_collapse_css:!!t&&t.fl_collapse_css},e||"SHEET"),r.docid=o.docid,o.objtype=r.objtype,r.lt={pos:{x:0,y:0,w:0,h:0},ubody:o},o._pc=r,o.validateProperty(),i._updLnode(o),o},updateLayout:function(e){var t,o,i,n,r=this,a=r.sheets,s=r.dzone;if(e)for(t=0;t<r.sheets.length;t++)i=r.reportoption.sheets[t],a[t].sheetoption=i,a[t].applyOptions();else for(t=0;t<r.reportoption.sheets.length;t++)i=r.reportoption.sheets[t],a.length>t?(o=a[t],n=s.getBox(i.model.layoutinfo.docid)):(n=r.appendBox(null,i.model),i.model.layoutinfo.docid=n.docid,(o=r.createSheet(t,i,n)).reportoption=r.reportoption,n.view=o,n.objtype="SHEET",n.validateProperty(),n.setReportOption(i),r.sheets.push(o),r.sheets_id[o.sheet_id]=o),n&&(n.setTitle(i.name||""),n.showTitle(!i.hidetitle)),a[t].sheetoption=i,a[t].applyOptions()},updateExpOpt:function(){var e=(a=this).reportoption._mc.export_option||{},t=e?e.jasper:null,o=a.down("[name=jasper]"),i=a.down("[name=office]"),n=!1,r=0;if(a._tbar&&($.each(["xls","pdf","html","csv"],(function(t,o){var i=a.down("[name=ig_r_"+o+"]");i&&i.setVisible(e["u_"+("xls"==o?"excel":o)]&&!1===ig$.features["ig_r_"+o])})),e.u_office&&e.otmpl&&e.otmpl.length?(i.show(),i.menu.removeAll(),$.each(e.otmpl,(function(e,t){i.menu.add({xtype:"menuitem",text:t.description||t.name,handler:function(){a.toolbarHandler("cmd_export_office",t)}})}))):i.hide(),t&&t.jasper_template&&e.u_jasper&&(n=!0,o.menu.removeAll(),a.dft_jasp_exp=null,$.each(["pdf","rtf","ppt","csv","excel","xlsx","docx","html","xml"],(function(e,i){"T"==t[i+"_output"]&&(0==r&&(a.dft_jasp_exp=i),o.menu.add({xtype:"menuitem",text:t[i+"_label"]||i,handler:function(){a.toolbarHandler("cmd_export_jasper",i)}}),r++)}))),a.down("[name=jasper]").setVisible(n&&e.u_jasper&&!1===ig$.features.ig_r_jasper),window.IExport)){var a,s,l,d=!1,p=(a=this)._tbar;for(s in window.IExport)window.IExport[s].toolbar&&(l=p.down("[name="+window.IExport[s].name+"]"),d=window.IExport[s].toolbarShow(a),l.setVisible(d))}},formulaHandler:function(e,t,o,i){var n,r,a,s,l,d,p,c=this,u=e.sheetoption,h=u.model.sheet_formula,_=0;if(t){if(r=[],"cl_fm"==o.toLowerCase())for(n=h.length-1;n>=0;n--)h[n].baseuid==t.uid&&(h.splice(n,1),_=1);else if("r_fmt"==o.toLowerCase())p=new IG$.dlgFormulaSelector({instance:c.instance,pR:c,pS:e,sheetoption:u,formulas:h,uitem:t,callback:new IG$.callBackObj(c,(function(e){var o,i=h;for(o=i.length-1;o>=0;o--)i[o].baseuid==t.uid&&i.splice(o,1);for(o=0;o<e.length;o++)i.push(e[o]);c.contentchanged=!0,c.updatePivotCnt(c.activeSheet)}))}),IG$.checkLogin(c,p);else{for(n=0;n<h.length;n++)if(h[n].baseuid==t.uid){if(h[n].expression==o.toUpperCase()&&a.showtoprow==i)return;r.push(h[n])}r.length>0?a=r[0]:(a={},h.push(a)),_=1,a.baseuid=t.uid,a.basename=t.name,a.direction="vertical",a.formatstring="",a.stylename=null,a.type=null,a.separatecolumn=!0,a.subtotalbase=null,a.usecolumnformat=!0,a.showtoprow=i||!1,a.groupresults=!1,a.fid="formula_"+u.si,u.si++,(d=IG$.formulas[o.toLowerCase()])&&(s=d.title,d.lcs&&(s=IRm$.r1(d.lcs)),l=d.expr,void 0!==d.usecolumnformat&&(a.usecolumnformat=d.usecolumnformat),void 0!==d.formatstring&&(a.formatstring=d.formatstring),a.title=s,a.expression=l)}_&&(c.contentchanged=!0,c.updatePivotCnt(c.activeSheet))}},getRequests:function(){var e,t,o,i,n,r,a=this,s=[],l=a.dzone;for(e=0;e<l.items.length;e++)(t=l.items[e].view)&&t.clearResult&&("olapservice",r="rolap"==(n=t.reportoption).reportmode?"run":"sql"==n.reportmode?"sqlrun":"run",i={uid:a.uid,option:r,active:""+t.sheetindex,pivotresult:"T"},o||(o=t.reportoption.getCurrentPivot()),s.push({ack:"olapservice",payload:i,mbody:o,jobkey:""+t.sheetindex,meta_type:a.meta_type||"report"}));return s},createCtrl:function(e,t){var o,i,n,r=this,a=r.instance,s=r.dzone,l=s._root,d=e.model;switch(l.children=l.children||[],l.children_float=l.children_float||[],t||(i={objtype:e.objtype,docid:null,_direction:0,parent:l,width:l.width?.4*l.width:100,height:l.height?.4*l.height:100},d.is_float||"FILTER"!=i.objtype||1!=l.children.length||"SHEET"!=l.children[0].objtype?d.is_float?l.children_float.push(i):l.children.push(i):(n={objtype:"_dc",docid:null,iscontainer:!0,_direction:1,children:[],width:0,height:0,parent:(o=l.children[0]).parent},s.processLayoutWidget(n,!0,null,s.ctrls),l.children.splice(0,1,n),i.parent=n,n.children.push(i),o.parent=n,n.children.push(o)),t=s.appendWidgetBox(null,{width:i.width?parseInt(i.width):null,height:i.height?parseInt(i.height):null,draggable:s.draggable,fixed_height:d.fixed_height,fixed_width:d.fixed_width,fit_content_h:d.fit_content_h,hidetitle:d.hidetitle,title:d.title,panel_css:d.panel_css,is_float:d.is_float,fl_resizable:d.fl_resizable,fl_moveable:d.fl_moveable,hide_maximize:d.hide_maximize,fl_collapsed:d.fl_collapsed,fl_collapsible:d.fl_collapsible,fl_collapse_css:d.fl_collapse_css},e.objtype),i.docid=t.docid,t.objtype=i.objtype,i.lt={pos:{x:0,y:0,w:0,h:0},ubody:t},t._pc=i,t.validateProperty()),e.docid=t.docid,e.objtype){case"NAVI":o=new IG$.rfNavi(a,t.box_container,e,r.reportoption,r);break;case"FILTER":(o=new IG$.dynFilterView(r.instance,t.box_container,e,r)).meta_type=r.meta_type,o._editmode=r.editmode,o.callback=new IG$.callBackObj(r,r.onFilterUpdate);break;case"TEXT":o=new IG$.rfText(a,t.box_container,e,r);break;case"PANEL":o=new IG$.rfBlankPanel(a,t.box_container,e,r);break;case"TAB":o=new IG$.rfTabPanel(a,t.box_container,e,r.dzone,r);break;case"RPT_VIEW":o=new IG$.rfReportViewer(a,t.box_container,e,r);break;case"FB_VIEW":o=new IG$.rfFBViewer(a,t.box_container,e,r)}return t.view=o,t.objtype=e.objtype,t.validateProperty(),t.setReportOption(e),"FILTER"==e.objtype&&o.init_f&&setTimeout((function(){t.box_container.bind("layout_completed",(function(e){s._validateFilterLayout(t)})),o.init_f()}),100),t},_boxresized:function(e,t){var o,i,n,r,a,s,l,d,p=this.dzone.items,c=e.sheetoption,u=c.model.layoutinfo?c.model.layoutinfo.docid:null;for(o=0;o<p.length;o++)if(p[o].docid==u){i=p[o];break}i&&(a=i.box.offset(),l=(s=i.box_container.offset()).left-a.left,d=s.top-a.top,n=IG$.j$ext._w(i.box_container),r=IG$.j$ext._h(i.box_container),n=Math.max(n,t.cw),r=Math.max(r,t.ch),i.fixedW=t.tw>n,i.fixedH=t.th>r,i.width=i.fixedW?t.tw+l:i.width,i.height=i.fixedH?t.th+d:i.height,this.dzone.updateDisplay(!0))},refreshParameters:function(e){var t,o,i,n,r,a=this,s=e?e.mresults:null,l=a.dzone.docitems;if(t=a._params=a._params||{},s&&s.results)for(i=0;i<s.results.length;i++)if(o=s.results[i]._params)for(n in o)t[n]=o[n];for(n in l)r=l[n].lt.ubody,dview=r.view,r._param=t,r.applyFlt()},runSyncRes:function(e){var t=this.sheets,o=e.mresults;o&&$.each(t,(function(t,i){var n;i!=e&&(n=i.sheetoption)&&n.model&&"M_SYNC"==n.model.dataquerymode&&n.model.sync_target&&n.model.sync_target==e.renderBox&&n.model.layoutinfo.docid!=e.renderBox&&setTimeout((function(){i.drawResults(null,o)}),10)}))},updateRptMeasureGroup:function(e,t,o){var i=this.dzone.getBox(e.renderBox);if(t&&t.model&&t.model.measuregroup&&o.results.length>0&&o.results[0].measures&&o.results[0].measures.length>1){var n=i.showMeasureSelector(!0,o.results[0].measures);o._measure_seq=n,o._update_measure_seq(n)}else i.showMeasureSelector(!1)},createSheet:function(e,t,o,i){var n,r,a,s=this,l=$("<div class='igc-sheet-cntbox'></div>").appendTo(o.box_container),d=$("<div></div>").appendTo(o.box_container),p=o.box_title;IG$.j$ext._w(o.box_container),IG$.j$ext._h(o.box_container),window.m$dw;return d.css({position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",overflow:"hidden"}).hide(),s.max_sheet_id=s.max_sheet_id||0,t.model.sheet_id?(a=0,a=(r=t.model.sheet_id).indexOf("_")>0?Number(r.substring(r.indexOf("_")+1)):Number(r),s.max_sheet_id=Math.max(a+1,s.max_sheet_id)):(r="asheet_"+s.max_sheet_id++,t.model.sheet_id=r),n=new IG$.p$SheetView({instance:s.instance,renderTo:l[0],rendermask:d,meta_type:s.meta_type,renderBox:o.docid,reportoption:s.reportoption,sheetoption:t,uid:s.uid,sheet_id:r,sheetindex:e,region:0==e?"center":(t?t.region:null)||"east",collapsible:!1,minSize:100,reportpanel:s,floatable:!1,bindheaderevent:!1,rst:i,border:0,removeObj:function(){this.removeAll(),p.unbind("click")},listeners:{runsheet:function(e,t){s._exec_rpt(s,[{view:e,req:t}])},drillreport:function(e){s.doDrillReport(e)},itemclick:function(e,t){return s.setActSheet(o),0==e.activeView?s.doCellClick(e,t):s.doDrillReport(e),!1},itemdblclick:function(e,t){s.doDrillReport(e);return s.setActSheet(o),!1},menu:function(e,t){s.procMenu(e,t)},pivotchanged:function(e){s.contentchanged=!0},cresized:function(e,t){s._boxresized(e,t)},result_loaded:function(e){e.executioncode=0,s.refreshParameters(e),s.updateRptResCnt(!0),e.sheetoption&&e.sheetoption.model&&"M_SYNC"!=e.sheetoption.model.dataquerymode&&s.runSyncRes(e)},before_result_load:function(e,t,o){s.updateRptMeasureGroup(e,t,o)},export_sheet:function(e,t){s.exportToFile(t.filetype.toUpperCase(),!1,e)},destroy:function(e,t){e.__dx=!0},afterrender:function(e){o.view=e,$(e.body.dom).bind("click",(function(){s.setActSheet(o)})),setTimeout((function(){o.box_container.trigger("i_ready")}),10)},_ld_:function(e){s.dzone.customLoad(!0,e)},_ldx_:function(e){s.dzone.setLoading(!1,e)},scope:this}}),p.bind("click",(function(){s.setActSheet(o)})),n},applyOption:function(e){var t,o,i,n=e.auxfilter,r=!1;if(n){for(o=0;o<this.reportoption.sheets.length;o++){for(t in(i=this.reportoption.sheets[o]).model.aux_filter)delete i.model.aux_filter[t];for(t in n)i.model.aux_filter[t]=n[t]}r=!0}r&&this.toolbarHandler("cmd_run")},updateFormula:function(e){var t,o,i=e,n=(i.sheetindex,this.down("[name=tbresult]")),r=i.getSelection(),a="",s=0;if(r&&r.length>0){for(t=0;t<r.length;t++)!(o=r[t]).code||3!=o.position&&4!=o.position||(s+=parseFloat(o.code));IG$.isNumber(s)&&(a="SUM: "+IG$.NumberFormat("0,000.00",s))}n&&n.setText(a)},onFilterUpdate:function(e,t,o){var i,n,r,a,s,l,d,p,c,u,h,_=this,m=_.sheets,f="filter_"+_.dzone._dzid+"_"+e.sheetoption.docid,b=_.dzone.docitems||{},g=e.sheetoption.model.filter_options,v=g.drilltarget,w=e.sheetoption.model.edrill,y=new IG$.drilltarget(v,w),x=g.f_b_clear,$=e._fr,I=_.down("[name=tbsch]"),R=[];if(_.schedule_load)IG$.confirmMessages(ig$.appname,IRm$.r1("L_C_SCH"),(function(i){"yes"==i&&(I&&I.hide(),_.schedule_load=0,_.onFilterUpdate(e,t,o))}));else{for(_._params=null,_.refreshParameters(),s=0;s<m.length;s++)if(d=b[(n=(i=m[s]).sheetoption).model.layoutinfo?n.model.layoutinfo.docid:null],(h=y.isDrillTarget("sheet_"+s,i.sheet_id)).isdrill){if(x)for(fname in c=n.model.aux_filter)(fname.indexOf("report_")>-1||fname.indexOf("filter_")>-1)&&delete c[fname];o?delete n.model.aux_filter[f]:(l=e.getFilter(h),n.model.aux_filter[f]=l),d&&d.lt&&d.lt.ubody&&!d.lt.ubody.visible||$&&n&&!n.model.openload?i.btabrun=!0:(delete i.btabrun,i.olapset?(i.promptpanel&&i.promptpanel.clear(),a=i.olapset.reportoption.getCurrentPivot(),t||R.push({view:i,req:i.olapset.requestUpdateReport(a,"mode",s,i)})):n&&(t||R.push({view:i,req:i.procRunReport()})))}for(p in _._exec_rpt(this,R),b)if(u=(d=b[p].lt.ubody).view,"RPT_VIEW"==d.objtype){if(u&&u.irpt){var k=[];for(s=0;s<u.irpt.sheets.length;s++)if(r=(i=u.irpt.sheets[s]).reportoption,n=i.sheetoption,h=r?y.isDrillTarget(r.uid+"_sheet_"+s,r.uid+"_"+i.sheet_id):null,w||!y._e||h&&(!h||h.isdrill)){if(x)for(fname in c=n.model.aux_filter)(fname.indexOf("report_")>-1||fname.indexOf("filter_")>-1)&&delete c[fname];if(o?delete n.model.aux_filter[f]:(l=e.getFilter(h),n.model.aux_filter[f]=l),d.visible){if(u.validateFilter=!1,$&&n&&!n.model.openload)continue;var T;i.olapset?(a=i.olapset.reportoption.getCurrentPivot(),t||(T=i.olapset.requestUpdateReport(a,"mode",s,i))):n&&(t||(T=i.procRunReport())),T&&T.payload&&k.push({view:i,req:T})}else u.validateFilter=!0}else $&&n&&n.model.openload&&(delete i.btabrun,i.olapset?(a=i.olapset.reportoption.getCurrentPivot(),t||k.push(i)):n&&(t||k.push({view:i,req:i.procRunReport()})));_._exec_rpt(u.irpt,k),d.visible&&(u.f_run=!1)}}else"FILTER"==d.objtype&&u&&(h=y.isDrillTarget(d.docid),e!=u&&(w||h&&h.isdrill)&&(l=e.getFilter(h))&&l.children&&l.children.length>0&&u.apply_drill_filter(l));_.broadcastFilter()}},updatePivotCnt:function(e){var t,o,i,n=this,r=n.sheets[e];r.setLoading(!0,!0),t=r.sheetoption,r.olapset?(o=r.olapset.reportoption.getCurrentPivot(),i=r.olapset.requestUpdateReport(o,"mode",e,r)):t&&(i=r.procRunReport()),i.payload&&n._exec_rpt(n,[{view:r,req:i}]),n.broadcastFilter()},rs_showPrompt:function(){this.toolbarHandler("cmd_run")},updateFilterChange:function(){this.updatePromptTbar(!0),this.toolbarHandler("cmd_run")},updateDataChange:function(){this.toolbarHandler("cmd_run")},showPivotConfig:function(e){var t,o,i=this,n=i.dzone,r=e?n.getBox(e):null,a=r?r.view:null,s=r?r.objtype:null;if(a){if("FILTER"!=s&&(t=a.sheetindex),i._pivot_dlg=i._pivot_dlg||[],!(o=i.down("[name=pivot_dlg]")))return;o.sheetindex=t,o.meta_type=i.meta_type,o._widget_view=a,o.reportoption=i.reportoption,o.sheet=i.sheets[t],o.objtype=s,o.rptptr=i,o.loadPivotOption(o.sheetindex)}},clipboardCopy:function(){var e,t=this,o=t.sheets[t.activeSheet],i=!o||o.updateNoData();(o&&o.mresults&&o.mresults.results&&(e=o.mresults.results[0]),e&&!i)?new IG$.c$ClpBrd({instance:t.instance,sheetview:o,mresult:e}).show():IG$.ShowError(IRm$.r1("M_NO_DATA"),t)},showReportOption:function(e,t,o,i,n){var r,a,s=this;r=s.itemtype||"Report",s.reportoption||(i=1,a=s.makeTempReportMeta({type:r}),s.reportoption=new IG$.clReports(a,s.meta_type),s.opt_editmode=!0);var l=new IG$._IB6({instance:s.instance,modal:!0,cubeuid:s.cubeuid,fcreate:i,fappend:n,reportoption:s.reportoption,sheetoption:o,callback:new IG$.callBackObj(s,(function(e,o,n){var s=this,l=function(){if(i){if(!0===o)return void s.close();s.reportoption&&!a&&(a=s.makeTempReportMeta({type:r})),a.content.cube_objects=e.cubeobj?[e.cubeobj]:null,s.rs_loadContent(a,!0,!0===o),s.continueReportOption(e),s.load_cube=null,s.cubeuid=null}else!0!==o?(s.continueReportOption(e),t&&t.execute(e.cubeobj)):!0===o&&IG$.ShowWarning(IRm$.r1("E_CANCEL_BOBJ_SEL"),s)};if(n&&n.get("nodepath")){var d=new IG$._rpc$,p=s.reportoption;d.init(s,{ack:"helpcontent",payload:{act:"get",nodepath:n.get("nodepath"),name:n.get("name")},mbody:{option:"rpt_tmpl"}},s,(function(t){t.cube_objects=e.cubeobj?[e.cubeobj]:null;var i={type:p.type,uid:p.uid,nodepath:p.nodepath,name:p.name,content:t};s._template_load=!0,s.rs_loadContent(i,!0,!0===o),s.continueReportOption(e),s.load_cube=null,s.cubeuid=null}),(function(){l()})),d.send()}else l()}))});IG$.checkLogin(s,l)},updateAnalOpt:function(){var e=this,t=e.sheets[e.activeSheet];t.mresults;t._invalAnal=!0,t.updateAnalUI(e)},updateChartOpt:function(){var e,t=this.sheets[this.activeSheet],o=t.mresults;if(o&&o.results)for(e=0;e<o.results.length;e++)o.results[e].__bands=null;t._invalChart=!0,t.cfg_changed(1),t.updateChartUI(t)},afterinit:function(e){var t=this,o=t._par;window.m$dw;t.dzone=new IG$.boDockZone(t.instance,e,t),t.dzone.cmode=t.cmode||0,o&&(o._dzseq=o._dzseq||0),t._dzid=o?o._dzid+"_"+o._dzseq++:"root",t.dzone._dzid=t._dzid,t.dzone.closeDockNoti={f:t.closeDockNoti,s:t},$(t.dzone.box).bind({config_doc:function(e,o,i){t.configDockNotify(o)},config_pivot:function(e,o,i){t.configDockPivot(o,i)},config_selchart:function(e,o,i){var n=t.dzone.getBox(o);t.setActSheet(n),t.toolbarHandler("cmd_chartwizard")},cancel_proc:function(e){t._ldr&&t._ldr.cancel()}}),IG$.__ep&&t.dzone.box.bind("boxresized",(function(){var e=t.getWidth(),o=t.getHeight(),i=borderpanel.getWidth(),n=borderpanel.getHeight(),r=IG$.j$ext._w(t.dzone.box),a=IG$.j$ext._h(t.dzone.box);(i<r||n<a)&&(e-i,o-n)})),t.init_f(1==t.vmode||null)},init_f:function(e){var t,o=this,i=o.uid;o.initTbar(),i&&i.length>0?(o.issheet="Sheet"==o.itemtype,o.activeSheet=0,o.isnewitem||(o.pivot?setTimeout((function(){var e=IG$.loadXML(o.pivot);o.pivot=null,o.rs_loadContent(e)}),10):(o.writable&&"framework"==IG$._source&&IG$.checkLock(o,(function(e){"unlock"!=e&&(o.writable=!1,o.down("[name=t_save]")&&o.down("[name=t_save]").hide())})),(t=new IG$._rpc$).init(o,{ack:"content",payload:{uid:i,revision:o.revision},mbody:{option:o.hiddentoolbar?"":"diagnostics"}},o,o.rs_loadContent,!1,e),t.send()))):o.__jid&&o.__sid?o._doSchJob(o.__sid,o.__jid):(o.doDbrdExit(),1!=o.vmode&&(o.cubeuid?((t=new IG$._rpc$).init(o,{ack:"helpcontent",payload:{uid:o.cubeuid},mbody:{option:"translate"}},o,(function(e){if(e&&e.length){itemtype=o.itemtype||"Report";var t=o.makeTempReportMeta({type:itemtype});o.reportoption=new IG$.clReports(t,o.meta_type),t.content.cube_objects=[e[0]],setTimeout((function(){o.showReportOption(o.load_cube,void 0,void 0,1)}),400)}}),!1),t.send()):setTimeout((function(){o.showReportOption(o.load_cube)}),400)))},doDbrdExit:function(e){var t=this.execallback;t&&t.execute(e)},rs_loadContent:function(e,t,o){var i,n,r,a,s,l,d,p=this,c=p.auxfilter,u={};if(e&&"Export"==e.type){if(a=IG$.XGetNode(xdoc,"/smsg/item/export/report_content/reportxml"),p.reportoption=new IG$.clReports(a,p.meta_type),a=IG$.XGetNode(xdoc,"/smsg/item/export/sheets"))for(s=IG$.XGetChildNodes(a),i=0;i<s.length;i++)(l=IG$.XGetNode(s[i],"gridresult"))&&(u[IG$.XGetAttr(s[i],"docid")]=new IG$.clResults(null,l));p.applRptCnt(u),p.fireEvent("_lc0",p)}else{if(p.reportoption=new IG$.clReports(e,p.meta_type),p.applRptCnt(null,t,o),c)for(i=0;i<p.reportoption.sheets.length;i++)for(n in r=p.reportoption.sheets[i],c)r.model.aux_filter[n]=c[n];p.dzone.updateDisplay(),p.writable&&1==p.opt_editmode&&(p.editmode=!1,p.toolbarHandler("cmd_editmode")),p.fireEvent("_lc0",p),"sql_report"==p.meta_type&&p.reportoption&&p.reportoption._mc&&p.reportoption._mc.sql_datasource&&(!(d=p.reportoption._mc.inlineview_sql_objects)||d&&0==d.length)&&((d=p.reportoption._mc.inlineview_sql_objects=p.reportoption._mc.inlineview_sql_objects||[]).push({sql_id:"sql_1",name:"SQL 1"}),setTimeout((function(){p.toolbarHandler("cmd_view_sql")}),10))}},clearResult:function(){},setActSheet:function(e,t){var o,i,n,r,a=this,s=e.view.sheetindex,l=a.down("[name=tbreportname]"),d=a.dzone;if(t||s!=a.activeSheet){if(r=a.activeSheet="Sheet"==a.itemtype?0:s,n=(o=a.sheets[r])&&o.sheetoption?o.sheetoption.model.viewmode:null,a._tbar){var p=a.down("[name=t_grid]"),c=a.down("[name=t_chart]"),u=a.down("[name=t_r]"),h=a.down("[name=t_python]"),_=a.down("[name=t_anal]"),m=a.down("[name=t_fview]"),f=0;switch(n){case"chart":f=1;break;case"r":f=2;break;case"python":f=3;break;case"analysis":f=4;break;case"form":f=5}p.toggle(0==f,0==f),c.toggle(1==f,1==f),u.toggle(2==f,2==f),h.toggle(3==f,3==f),_.toggle(4==f),m.toggle(5==f),1==f&&a.showChartToolbar(),1!=f&&a.hideChartToolbar(),a.setRToolbar(2==f),a.updateChartToolbar(1!=f),a.updateRToolbar(2!=f),a.setPythonToolbar(3==f),a.setFormViewToolbar(5==f);var b=r.python$;b&&b._do_edit(a.editmode)}(i=d.getBox(o.sheetoption.model.layoutinfo.docid)).setTitle(o.sheetoption.model.name||""),d.setActive(i),a.updatePromptTbar(!1),a.editmode&&a.showPivotConfig(i.docid),l&&(a.reportoption._mc.locale_name?l.setText(a.reportoption._mc.locale_name+" ("+a.reportoption._mc.name+")"):l.setText(a.reportoption._mc.name||""),a.refDS(),a.updateTbar()),a.updateRptResCnt(!1)}},applRptCnt:function(e,t,o){var i,n,r,a,s,l,d,p,c,u,h,_,m,f,b=this,g=b.down("[name=tbreportname]"),v=b.dzone,w=!t,y=b.issheet,x=b.reportoption,I=x.sheets,R=x._mc,k=b.auxfilter;window.m$dw;if(b.updateExpOpt(),v.clearAll(),b.sheets=[],b.sheets_id={},a=x.layoutinfo,b.ctrls=x.ctrls,b.updateTbarAll(),g&&g.setText(x.name||""),y||v.makeLayout(b,a,b.ctrls),I.length>0)if(h=(n=I[0]).model.layoutinfo,y&&0!=b.sheetindex);else{if(!(s=h.docid))for(c=v.items,i=0;i<c.length;i++)if("SHEET"==(u=c[i]).objtype&&!u.view){s=h.docid=u.docid;break}null!=(f=v.getBox(s))||s||(f=b.appendBox(),s=h.docid=f.docid),f&&(f.setTitle(n.name||""),v.setActive(f),l=e?e[s]:null,r=b.createSheet(0,n,f,l),f.view=r,f.objtype="SHEET",f.validateProperty(),f.setReportOption(n),b.sheets.push(r),b.sheets_id[r.sheet_id]=r,(p=b.sheets[0]).sheetindex=0,p.sheetoption=n,p.reportoption=x,p.applyOptions())}if(_=v.items,w&&_&&$.each(_,(function(e,t){"FILTER"==t.objtype&&(w=!1,k&&t.view&&(t.view._init_flt=k))})),R.b_sc_load&&(w=!1,v.cmode=1,b.schedule_load=1),I.length>1){for(i=I.length-1;i>=0;i--)s=(h=(m=I[i]).model.layoutinfo).docid,(f=v.getBox(s))||(y?b.sheetindex==i&&(f=b.appendBox(m.objtype),h.docid=f.docid):(I.splice(i,1),delete b.sheets_id[b.sheets[i].sheet_id],b.sheets.splice(i,1)));for(i=1;i<I.length;i++)h=(n=I[i]).model.layoutinfo,y&&b.sheetindex!=i||(s=h.docid,(f=v.getBox(s))&&(l=e?e[s]:null,r=b.createSheet(i,n,f,l),f.view=r,f.objtype="SHEET",f.setReportOption(n),f.validateProperty(),b.sheets.push(r),b.sheets_id[r.sheet_id]=r,n.model.openload&&(r.sheetindex=i,r.sheetoption=n,r.reportoption=x,r.applyOptions(),w=!0),f.setTitle(n.name||"")))}"sql_report"==b.meta_type?IG$.__ep||R.sql_datasource||!0===o||1!=b.vmode&&(b.opt_editmode=!0,setTimeout((function(){b.showReportOption(),b.instance.navigateCompleted(b)}),200)):IG$.__ep||0!=R.cube_objects.length||!0===o||1!=b.vmode&&(b.opt_editmode=!0,setTimeout((function(){b.showReportOption(),b.instance.navigateCompleted(b)}),200)),IG$.__ep||((d=I.length>0?v.getBox(I[0].model.layoutinfo.docid):null)&&b.setActSheet(d,!0),b.broadcastFilter(),b.updatePromptTbar(!0)),b.updateLayout(!0),w||b.doDbrdExit(),b.__loaded=!0,b._dboardCallback&&b._dboardCallback.execute(),"function"==typeof window.callPhantom&&window.callPhantom({_proc:"S"}),R.b_sc_load&&setTimeout((function(){var e=new IG$._rpc$;e.init(b,{ack:"schedule",payload:{uid:b.uid,action:"latestjob"},mbody:{}},b,(function(e){var t=this;e&&e.sid&&e.jid?t._doSchJob(e.sid,e.jid):t.instance.navigateCompleted(t)}),null),e.send()}),10)},rgetDbPassword:function(e,t){var o=this,i=o.sheets;IG$.dbp[t]=e,i&&i.length>0&&o._exec_rpt(o,[{view:i[0],req:i[0].procRunReport()}])},regbody:function(e,t){var o=this;o.__dreg=o.__dreg||{},o.__dreg[e]={b_init:!1,docid:e,fobj:t}},clearCache:function(){var e,t,o=this,i=new IG$._rpc$,n=[],r=o.dzone;for(o.uid&&n.push({uid:o.uid}),t=0;t<r.items.length;t++)dbox=r.items[t],(e=r.items[t].view)&&e.sheetoption&&(vopt=e.sheetoption,"FILTER"!=vopt.objtype&&"RPT_VIEW"!=vopt.objtype||e.getCacheItems(n));n.length&&(i.init(o,{ack:"helpcontent",payload:n,mbody:{option:"clear_cache"}},o,(function(e){var t=this.down("[name=tbcache]");t&&t.hide()})),i.send())},prepGridStyles:function(e){var t,o,i,n,r,a=this.sheetoption.model,s=a.sheet_formula||[],l=a.rows,d=a.cols,p=a.measures,c={},u=[],h={};for(name_map={},o=a.styles=a.styles||[],t=0;t<o.length;t++)r=(n=o[t]).uid+"_"+(n.rptseq||"0")+(n.fid?"_"+n.fid:""),c[r]=n;if("M_REPORT"==e)for(u.push({items:l,m:0,rptseq:0}),t=0;t<a.report_items.length;t++)i=a.report_items[t],u.push({items:i.cols,m:0,rptseq:t}),u.push({items:i.measures,m:1,rptseq:t});else u=[{items:l,m:0,rptseq:0},{items:d,m:0,rptseq:0},{items:p,m:1,rptseq:0},{items:s||[],m:2,rptseq:0}];for($.each(u,(function(e,t){$.each(t.items,(function(e,o){2!=t.m&&(name_map[o.uid]=o.name)}))})),$.each(u,(function(e,t){$.each(t.items,(function(e,o){var i,n;2==t.m?(i=o.baseuid+"_"+t.rptseq+"_"+o.fid,name_map[o.baseuid]&&(o.basename=name_map[o.baseuid])):i=o.uid+"_"+t.rptseq,h[i]=o,(n=c[i])&&(2==t.m?n.name=o.basename+" ("+(o.title||"")+")":n.name=o.name,n.rptseq=t.rptseq)}))})),t=o.length-1;t>=0;t--)r=(n=o[t]).uid+"_"+(n.rptseq||"0")+(n.fid?"_"+n.fid:""),h[r]||o.splice(t,1)},_capture_frame:function(){var e=this,t=e.dzone,o=t?t.$body_container:null;o&&e.uid&&window.bowser&&!window.bowser.msie&&setTimeout((function(){var t=function(){html2canvas(o[0],{logging:!0,useCORS:!0,imageTimeout:0}).then((function(t){document.body.appendChild(t);var o=t.toDataURL("image/png"),i=new IG$._rpc$;i.init(e,{ack:"uploadcontent",payload:{uid:e.uid},mbody:{option:"scr_capture",data:o}},e,(function(e){IG$.alertmsg(ig$.appname,"Capture completed!",null,null,0,"success")})),i.send()}))};window.html2canvas?t():IG$.getScriptCache(["./js/html2canvas.min.js"],new IG$.callBackObj(e,(function(){t()})))}),500)},_reg_as_tmpl:function(){var e=this;IG$.confirmMessages(ig$.appname,IRm$.r1("L_C_REGTMPL"),(function(t){var o,i;"yes"==t&&(e.reportoption&&(IG$.reportbase$.preSaveContent.call(e),o=e.reportoption.getCurrentPivot(),i=new IG$.rptTmpl({instance:e.instance,pivotxml:o,meta_type:e.meta_type,callback:new IG$.callBackObj(e,(function(){}))}),IG$.checkLogin(e,i)))}))},_reg_as_recom:function(){var e=this;IG$.confirmMessages(ig$.appname,IRm$.r1("L_C_REGRECOM"),(function(t){if("yes"==t&&e.reportoption){var o,i;IG$.reportbase$.preSaveContent.call(e),o=e.reportoption.getCurrentPivot();var n=e.activeSheet;for(i=o.sheets.length-1;i>=0;i--)i!==n&&o.sheets.splice(i,1);var r=new IG$._rpc$;r.init(e,{ack:"olapservice",payload:{option:"register_recommend",uid:e.uid},mbody:o,meta_type:e.meta_type||"report"},e,(function(e){IG$.alertmsg(ig$.appname,"Register template completed!",null,null,0,"success")})),r.send()}}))},mergeRptFilter:function(e){},requestRoboAction:function(e,t,o){var i=this,n=t.message.split("_"),r=(t.query,i.sheets[i.activeSheet]),a=r?r.sheetoption.model:null;if("RPT"==n[1]){let s=function(e,t){let o=t.toUpperCase().trim(),i=null;return $.each(["rows","cols","measures"],(function(t,n){var r=e[n];if(r&&r.length)for(let e=0;e<r.length;e++){let t=r[e].name.toUpperCase().trim();if(t=t.split(" ").join(""),t==o)return i={region:n,item:r[e]},!1}})),i};if(!a)return void o.apply(e,[IRm$.r1("ROBO_ERR_TAB_REPORT")]);n.splice(0,2);let d,p,c,u=n.join("_").split(","),h=null,_=!1;switch(u[0]){case"GRANDTOTAL":d="rows",p=a[d],p&&p.length&&(c=p[0]),h={target:c,cmd:"T_SUM"};break;case"SUBTOTAL":case"SUBTOTAL-TOP":d="rows",p=a[d],p&&p.length&&(c=p[p.length>1?1:0]),h={target:c,cmd:"T_SUM",showtoprow:"SUBTOTAL-TOP"==u[0]};break;case"PoT":u.length>0&&(d=s(a,u[1])),!d&&a.measures.length&&(d={region:"measures",target:a.measures[0]}),d&&"measures"==d.region?h={cmd:"T_POT",target:d.item}:(o.apply(e,[IRm$.r1("ROBO_ERR_FIELD")]),_=!0);break;case"FORMULA":3==u.length&&(d=s(a,u[2])),d&&d.item?h={cmd:u[1],target:d.item}:(o.apply(e,[IRm$.r1("ROBO_ERR_FIELD")]),_=!0);break;case"SORT-ASC":case"SORT-DESC":if(u.length>1)if(d=s(a,u[1]),d){let n="SORT-ASC"==u[0]?"asc":"desc";if("measures"==d.region){u[0]="desc"==n?"RANK-TOP":"RANK-BOTTOM";let r="#ACT_RPT_"+u[0]+","+u[1]+",0";return t.message=r,void i.requestRoboAction(e,t,o)}n!==d.item.sortorder&&(d.item.sortorder=n,i.contentchanged=!0,i.updatePivotCnt(r.sheetindex))}else o.apply(e,[IRm$.r1("ROBO_ERR_FIELD")]),_=!0;else o.apply(e,[IRm$.r1("ROBO_ERR_FIELD")]),_=!0;break;case"RANK-TOP":case"RANK-BOTTOM":u.length>1&&(d=s(a,u[1])),!d&&a.measures&&a.measures.length&&(d={target:a.measures[0],region:"measures"});let n=5;if(u.length>2&&(n=parseInt(u[2])),isNaN(n)&&(n=5),d){let e=a.sortoption=a.sortoption||{};e.sortmethod="RANK-TOP"==u[0]?"top":"bottom",e.sortcount=n,e.showlastrank=!0,"measures"==d.region?(e.sortbyvalue=!0,e.sortmeasure=d.item.uid):e.sortbyvalue=!1,i.contentchanged=!0,i.updatePivotCnt(r.sheetindex)}else o.apply(e,[IRm$.r1("ROBO_ERR_FIELD")]),_=!0;break;case"QRY":i.explain_seq=i.explain_seq||0,(l=new IG$._rpc$).init(i,{ack:"collaborate",payload:{cmd:"explain_report",uid:i.uid,jobid:r.jobid,active:""+r.sheetindex,locale:t.locale,type:u[1],seq:""+i.explain_seq++},mbody:{message:t.query}},i,(function(t){o.apply(e,[t.description])})),l.send(),_=!0;break;case"EXPLAIN":i.explain_seq=i.explain_seq||0,(l=new IG$._rpc$).init(i,{ack:"collaborate",payload:{cmd:"explain_report",uid:i.uid,jobid:r.jobid,active:""+r.sheetindex,locale:t.locale,seq:""+i.explain_seq++},mbody:{message:t.query}},i,(function(t){o.apply(e,[t.description])})),l.send(),_=!0;break;case"EXPLAIN_STAT":case"EXPLAIN_CORR":i.explain_seq=i.explain_seq||0,(l=new IG$._rpc$).init(i,{ack:"collaborate",payload:{cmd:"explain_report",uid:i.uid,jobid:r.jobid,active:""+r.sheetindex,type:"EXPLAIN_CORR"==u[0]?"correlation":"statistics",locale:t.locale,seq:""+i.explain_seq++},mbody:{message:t.query}},i,(function(t){o.apply(e,[t.description])})),l.send(),_=!0;break;case"FILTER":u.length>1&&(d=s(a,u[1])),d&&d.item?i.toolbarHandler("cmd_filter",d.item):(o.apply(e,[IRm$.r1("ROBO_ERR_FIELD")]),_=!0);break;case"CHART":let m=null;if(u.length>1){let e=u[1].toLowerCase();if(e)for(let t=0;t<IG$.chartTypeMenu.length;t++){let o=IG$.chartTypeMenu[t];if(o.subtype==e){m={text:o.lcs?IRm$.r1(o.lcs):o.label,charttype:o.charttype,subtype:o.subtype};break}}}i.updateViewMode("chart"),m&&i.changeChartType(m);break;case"CHART-WIZARD":i.updateViewMode("chart"),i.toolbarHandler("cmd_chartwizard")}if(h){switch(h.cmd=h.cmd.toUpperCase(),h.cmd){case"T_SUM":case"T_AVG":case"T_MIN":case"T_MAX":case"T_RANK":case"T_POT":case"T_CUMUL":case"T_INCR":case"T_DIFF":case"CL_FM":case"R_FMT":break;default:return void o.apply(e,[IRm$.r1("ROBO_ERR_FIELD")])}h.target&&i.formulaHandler(r,h.target,h.cmd,h.showtoprow)}_||o.apply(e,[IRm$.r1("ROBO_SUCCESS")])}else if("DV"==n[1]){var s=n[2].split(",");if("SHEET"==s[0]){var l=new IG$._rpc$,d=i.reportoption._mc;d&&d.cube_objects&&d.cube_objects.length&&(l.init(i,{ack:"collaborate",payload:{cmd:"get_sheets",uid:i.uid,cubeuid:d.cube_objects[0].uid},mbody:{}},i,(function(t){var i=[IRm$.r1("ROBO_SUCCESS")];i.push("<br/><br/>"),t.sub_reports&&$.each(t.sub_reports,(function(e,t){t.sub_reports&&(i.push("<ul>"),$.each(t.sub_reports,(function(e,o){i.push('<li><a amp_reply="#ACT_DV_TSHEET,'+t.uid+","+o.name+'">'+o.name+"</a></li>")})),i.push("</ul>"),i.push("<br/>"))})),o.apply(e,[i.join("")])})),l.send())}else if("TSHEET"==s[0]){(l=new IG$._rpc$).init(i,{ack:"content",payload:{uid:s[1]},mbody:{option:"content"}},i,(function(t){var n,r=[IRm$.r1("ROBO_SUCCESS")],a=t.content;if(a.sheets&&($.each(a.sheets,(function(e,t){if(t.name==s[2])return n=t,!1})),n)){var l=new IG$.clReport(n,i.reportoption.itemtype,!1);i.addSheet({objtype:"SHEET",sheetoption:l,closable:n.close,name:n.name})}o.apply(e,[r.join("")])})),l.send()}else if(s[2]){var p={},c=s[1];if("column"==c&&(c="bar"),!r||!a)return void o.apply(e,[IRm$.r1("ROBO_ERR_TAB_REPORT")]);var u,h,_,m=r.mresults,f=m?m.results[0]:null,b=f?f._tabledata:null;if(s[2]&&b)for(h=0;h<b.length;h++)if(b[h][0].text==s[2]){u=b[h];break}if(u){var g=[],v=[];for(_=f.colfix;_<u.length;_++){var w=Number(u[_].code);isNaN(w)&&(w=0),g.push(w)}for(_=f.colfix;_<b[0].length;_++){w=b[0][_].text;v.push(w)}p.series=[{name:a.measures[0].name,type:c,data:g}],p.xAxis={type:"category",data:v},p.yAxis={type:"value"}}o.apply(e,[IRm$.r1("ROBO_SUCCESS"),p])}}else o.apply(e,[IRm$.r1("ROBO_ERR_TAB_REPORT")])},requestRoboFormat:function(e,t,o){var i=t.message,n=this.sheets[this.activeSheet].sheetoption.model;let r,a,s,l,d,p=i.indexOf("@");for(;p>-1;){switch(r=i.indexOf(" ",p+1),r<0&&(r=i.length),a=i.substring(p+1,r),s=[],a.toUpperCase()){case"ALL_FIELDS":s.push("<ul>"),$.each(["rows","cols","measures"],(function(e,t){let o=n[t];if(o&&o.length)for(let e=0;e<o.length;e++)l=o[e].name,d=l.split(" ").join(""),s.push("<li><a amp_reply='"+d+";"+l+"'>"+o[e].name+"</a></li>")})),s.push("</ul>");break;case"ALL_MEASURES":s.push("<ul>"),$.each(["measures"],(function(e,t){let o=n[t];if(o&&o.length)for(let e=0;e<o.length;e++)l=o[e].name,d=l.split(" ").join(""),s.push("<li><a amp_reply='"+d+";"+l+"'>"+o[e].name+"</a></li>")})),s.push("</ul>");break;case"ALL_DIMENSIONS":s.push("<ul>"),$.each(["rows","cols"],(function(e,t){let o=n[t];if(o&&o.length)for(let e=0;e<o.length;e++)l=o[e].name,d=l.split(" ").join(""),s.push("<li><a amp_reply='"+d+";"+l+"'>"+o[e].name+"</a></li>")})),s.push("</ul>")}if(s&&s.length){let e=s.join("");i=i.substring(0,p)+e+i.substring(r),p+=e.length}p=i.indexOf("@",p+1)}o.apply(e,[i])}}),IG$._doSchJob=function(e,t){var o=new IG$._rpc$;o.init(this,{ack:"schedule",payload:{sid:e,jid:t,action:"jobresult"},mbody:{}},this,(function(o){var i,n,r,a,s,l,d,p,c,u,h,_,m=this,f=m.down("[name=tbsch]"),b=o&&o.length?o:null,g=[],v=m.sheets;if(b){for(i=0;i<b.length;i++)a=(_=b[i]).jobseq,s=_.key,d=_.crdate,p=_.srdate,l=s?parseInt(s):a,(r=_.result&&_.result&&_.result.result?_.result.result:null)&&(h={jobseq:l,crdate:d,srdate:p,crdate_fmt:c,srdate_fmt:u,content:r},g.push(h));if(g.length){for(i=0;i<g.length;i++)jobres=g[i],a=jobres.jobseq,d=jobres.crdate,c=jobres.crdate_fmt,p=jobres.srdate,u=jobres.srdate_fmt,jobres.content&&((n=new IG$.clResults(jobres.content)).srdate=p,n.crdate=d,n.srdate_fmt=u,n.crdate_fmt=c,n._job={sid:e,jid:t,jobid:n.jobid},v[a]&&v[a].procLoadResult(n));f&&(f.show(),f.setText(u||"-"))}}m.instance.navigateCompleted(m)})),o.send()};

IG$.ui_element=function(t){this.config=t,$s.defaults(this,t)},IG$.ui_element.prototype={show:function(){this.$html.show()},hide:function(){this.$html.hide()},setVisible:function(t){t?this.show():this.hide()},toggle:function(t){},setText:function(t){$("#igc_txt",this.$html).html(t)}},IG$.ReportView=function(t){var e=this;(t=t||{}).revision=""+t.revision||"",e.$opt=t,IG$.apply(e,t,null,!0),e.el={dom:t.target_div[0]},setTimeout((function(){var o=t.target_div,i=$("<div class='wrapper wrapper-content igc-toolbar'></div>").appendTo(o),r=$("<div></div>").appendTo(o);menur=$("<div class='ibox-content'></div>").appendTo($("<div class='ibox float-e-margins'></div>").appendTo(i)),e._tbar_div=menur,e.afterinit(r)}),10)},IG$.ReportView.prototype={down:function(t){var e,o=this._item_map;return o&&(e=o[t=t.substring(t.indexOf("=")+1,t.indexOf("]"))]),e},_tbaritems:["t_save","t_save_as","t_run","t_exp","t_tool","t_grid","t_chart","t_anal","t_r","t_python","t_fview","toolbarprompt","t_sql_view","t_sheet","t_pivot","t_chart_wizard","t_chart_type","t_r_rptview","t_r_story","t_r_option","t_r_summary","t_r_script","t_r_wizard","t_anal_menu","t_fview_option","t_share","t_schedule","t_userdoc","t_py_edit"],_tbarChart:[],_tbarR:[],show:function(){this.setVisible(1)},hide:function(){this.setVisible(0)},setVisible:function(t){this.$opt.target_div[t?"show":"hide"]()},fireEvent:function(t,e){},afterinit:IG$.reportbase$.afterinit,init_f:IG$.reportbase$.init_f,rs_loadContent:IG$.reportbase$.rs_loadContent,applRptCnt:IG$.reportbase$.applRptCnt,updateLayout:IG$.reportbase$.updateLayout,updateExpOpt:IG$.reportbase$.updateExpOpt,createCtrl:IG$.reportbase$.createCtrl,_boxresized:IG$.reportbase$._boxresized,createSheet:IG$.reportbase$.createSheet,runSyncRes:IG$.reportbase$.runSyncRes,updateRptMeasureGroup:IG$.reportbase$.updateRptMeasureGroup,procMenu:IG$.reportbase$.procMenu,showDetailView:IG$.reportbase$.showDetailView,applyOption:IG$.reportbase$.applyOption,doCellClick:IG$.reportbase$.doCellClick,doDrillReport:IG$.reportbase$.doDrillReport,broadcastFilter:IG$.reportbase$.broadcastFilter,updateFormula:IG$.reportbase$.updateFormula,updatePivotCnt:IG$.reportbase$.updatePivotCnt,onFilterUpdate:IG$.reportbase$.onFilterUpdate,rs_showPrompt:IG$.reportbase$.rs_showPrompt,updateFilterChange:IG$.reportbase$.updateFilterChange,updateDataChange:IG$.reportbase$.updateDataChange,toolbarHandler:IG$.reportbase$.toolbarHandler,checkReport:IG$.reportbase$.checkReport,checkPivot:IG$.reportbase$.checkPivot,setActSheet:IG$.reportbase$.setActSheet,updateRptResCnt:IG$.reportbase$.updateRptResCnt,clearAuxFilter:IG$.reportbase$.clearAuxFilter,refreshParameters:IG$.reportbase$.refreshParameters,doDbrdExit:IG$.reportbase$.doDbrdExit,showPivotConfig:IG$.reportbase$.showPivotConfig,clipboardCopy:IG$.reportbase$.clipboardCopy,exportToFile:IG$.reportbase$.exportToFile,getExportData:IG$.reportbase$.getExportData,rexportToFile:IG$.reportbase$.rexportToFile,saveAsContent:IG$.reportbase$.saveAsContent,saveAsNew:IG$.reportbase$.saveAsNew,updateViewMode:IG$.reportbase$.updateViewMode,updateChartOpt:IG$.reportbase$.updateChartOpt,appendBox:IG$.reportbase$.appendBox,initTbar:function(){var t,e,o,i,r=this,n=r._tbar_div,a=[];if(n){for(e=0;e<IG$.chartTypeMenu.length;e++)o={text:(i=IG$.chartTypeMenu[e]).lcs?IRm$.r1(i.lcs):i.label,charttype:i.charttype,subtype:i.subtype,handler:function(){r.changeChartType(this)}},a.push(o);var s;if(t=[{iconCls:"icon-toolbar-save",name:"t_save",cls:"ig_r_save;ig_m_save",tooltip:IRm$.r1("L_SAVE_REPORT"),hidden:!0,handler:function(){this.toolbarHandler("cmd_save")},scope:this},{iconCls:"icon-toolbar-saveas",name:"t_save_as",cls:"ig_r_saveas;ig_m_saveas",tooltip:IRm$.r1("L_SAVE_REPORT_AS"),hidden:!0,handler:function(){this.toolbarHandler("cmd_saveas")},scope:this},"-",{iconCls:"icon-toolbar-runreport",name:"t_run",cls:"ig_r_run",hidden:!0,tooltip:IRm$.r1("L_RUN_REPORT"),handler:function(){this.toolbarHandler("cmd_run")},scope:this},"-",{iconCls:"icon-toolbar-pivot",name:"t_pivot",cls:"ig_r_design",hidden:!0,$w:120,enabled:!1,enableToggle:!0,text:this.editmode?IRm$.r1("B_VIEWMODE"):IRm$.r1("B_EDITMODE"),tooltip:IRm$.r1("B_EDITMODE"),handler:function(){this.toolbarHandler("cmd_editmode")},scope:this},"-",{iconCls:"icon-toolbar-grid",cls:"ig_r_grid",name:"t_grid",hidden:!0,toggleGroup:"vm",tooltip:IRm$.r1("L_VIEW_GRID"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_sheetview")},scope:this},{iconCls:"icon-toolbar-chart",name:"t_chart",cls:"ig_r_chart",toggleGroup:"vm",hidden:!0,tooltip:IRm$.r1("L_VIEW_CHART"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_chartview")},scope:this},"-",{iconCls:"icon-toolbar-fview",name:"t_fview",cls:"ig_r_fview",toggleGroup:"vm",hidden:!0,tootip:IRm$.r1("L_VIEW_FVIEW"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_formview")},scope:this},{iconCls:"icon-toolbar-anal",name:"t_anal",cls:"ig_r_anal",toggleGroup:"vm",hidden:!0,tooltip:IRm$.r1("L_VIEW_ANAL"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_analysis")},scope:this},{iconCls:"icon-toolbar-r",name:"t_r",cls:"ig_r_r",toggleGroup:"vm",hidden:!0,tooltip:IRm$.r1("L_VIEW_RSTAT"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_rview")},scope:this},{iconCls:"icon-toolbar-python",name:"t_python",cls:"ig_r_python",toggleGroup:"vm",hidden:!0,tooltip:IRm$.r1("L_VIEW_PYTHON"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_pythonview")},scope:this},"-",{iconCls:"icon-toolbar-pagefilter",name:"toolbarprompt",hidden:!0,tooltip:"Prompt",handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_prompt")},scope:this},{iconCls:"icon-toolbar-export",name:"t_exp",cls:"ig_r_exp",hidden:!0,tooltip:IRm$.r1("L_EXPORT"),xtype:"button",menu:[{text:IRm$.r1("L_EXPORT_EXCEL"),name:"ig_r_xls_",hidden:!0,iconCls:"icon-toolbar-excel",handler:function(){this.toolbarHandler("cmd_export_excel")},scope:this},{text:IRm$.r1("L_EXPORT_PDF"),name:"ig_r_pdf",hidden:!0,iconCls:"icon-toolbar-pdf",handler:function(){this.toolbarHandler("cmd_export_pdf")},scope:this},{text:IRm$.r1("L_EXPORT_CSV"),name:"ig_r_csv",handler:function(){this.toolbarHandler("cmd_export_csv")},scope:this},{text:IRm$.r1("L_EXPORT_HTML"),name:"ig_r_html",iconCls:"icon-toolbar-html",handler:function(){this.toolbarHandler("cmd_export_html")},scope:this},{name:"office",cls:"ig_r_office",text:IRm$.r1("L_EXPORT_OFFICE"),menu:{xtype:"menu",items:[]}},{name:"jasper",cls:"ig_r_jasper",text:IRm$.r1("L_EXPORT_JASPER"),menu:{xtype:"menu",items:[]},handler:function(){this.dft_jasp_exp&&r.toolbarHandler("cmd_export_jasper",this.dft_jasp_exp)}},{text:IRm$.r1("L_CLIPBOARD_COPY"),cls:"ig_r_clb",iconCls:"icon-toolbar-clipboard",handler:function(){this.toolbarHandler("cmd_clipboard")},scope:this}]}],window.IExport)for(s in window.IExport)window.IExport[s].toolbar&&(window.IExport[s].toolbar.scope=this,t.push(window.IExport[s].toolbar));var l=[{text:IRm$.r1("L_NEW_SHEET"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_sheet","SHEET")},scope:this},{text:IRm$.r1("L_NEW_FILTER"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_sheet","FILTER")},scope:this},{text:IRm$.r1("L_NEW_TEXTAREA"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_sheet","TEXT")},scope:this},"-",{text:IRm$.r1("L_NEW_TABPANEL"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_sheet","TAB")},scope:this},{text:IRm$.r1("L_NEW_PANEL"),handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_sheet","PANEL")},scope:this},{text:IRm$.r1("L_NEW_RPT_VIEWER"),name:"t_r_rptview",cls:"ig_r_rpt_vr",handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_sheet","RPT_VIEW")},scope:this},"-",{text:IRm$.r1("L_NEW_STORYVIEW"),name:"t_r_story",cls:"ig_r_story",handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_add_story")},scope:this}];t.push({iconCls:"icon-sql",text:IRm$.r1("L_VIEW_SQL"),cls:"ig_r_sv",name:"t_sql_view",hidden:!0,handler:function(){this.toolbarHandler("cmd_view_sql")},scope:this},"-",{xtype:"button",iconCls:"icon-toolbar-addsheet",name:"t_sheet",cls:"ig_r_adpanel",hidden:!0,text:IRm$.r1("L_ADD_VIEW"),menu:{xtype:"menu",items:l}},{tooltip:IRm$.r1("L_EXPORT_OPTION"),iconCls:"icon-toolbar-popt",hidden:!0,name:"t_exp_opt",cls:"ig_r_eopt",handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_export_option")},scope:this},"-",{iconCls:"icon-toolbar-tools",name:"t_tool",cls:"ig_r_tools",hidden:!0,tooltip:IRm$.r1("L_REPORT_TOOLS"),xtype:"button",menu:[{text:IRm$.r1("L_SCREEN_CAPTURE"),handler:function(){this.toolbarHandler("cmd_capture")},scope:this},{text:IRm$.r1("L_REG_TEMPLATE"),cls:"ig_r_save;ig_m_save",handler:function(){this.toolbarHandler("cmd_reg_template")},scope:this},{text:IRm$.r1("L_STATISTICS"),cls:"ig_r_stat",handler:function(){this.toolbarHandler("cmd_statistics")},scope:this}]},"-",{text:IRm$.r1("B_WIZARD"),iconCls:"icon-toolbar-analysis",name:"t_anal_menu",cls:"ig_anal_menu",hidden:!0,tooltip:IRm$.r1("L_ANAL_WIZARD"),xtype:"button",handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_analwizard")},scope:this},{text:IRm$.r1("T_CHART_WIZARD"),name:"t_chart_wizard",cls:"ig_r_cwz",dtype:"chart",hidden:!0,handler:function(){this.contentchanged=!0,this.toolbarHandler("cmd_chartwizard")},scope:this},{text:IRm$.r1("L_CHART_TYPE"),name:"t_chart_type",cls:"ig_r_ct",hidden:!0,dtype:"chart",menu:a},{text:IRm$.r1("L_R_OPTIONS"),name:"t_r_option",cls:"ig_r_rsce",hidden:!0,menu:[{text:IRm$.r1("L_R_SUMMARY"),tooltip:IRm$.r1("L_R_SUMMARY"),name:"t_r_summary",cls:"ig_r_rsum",iconCls:"icon-toolbar-rsummary",dtype:"r",hidden:!0,handler:function(){this.contentchanged=!0,this.toolbarHandler.call(this,"cmd_r_summary")},scope:this},{text:IRm$.r1("L_R_SCRIPT"),tooltip:IRm$.r1("L_R_SCRIPT"),iconCls:"icon-toolbar-rscript",name:"t_r_script",cls:"ig_r_rsce",dtype:"r",hidden:!0,handler:function(){this.contentchanged=!0,this.toolbarHandler.call(this,"cmd_r_script")},scope:this},{text:IRm$.r1("L_R_WIZARD"),tooltip:IRm$.r1("L_R_WIZARD"),iconCls:"icon-toolbar-rwizard",name:"t_r_wizard",cls:"ig_r_rwzd",dtype:"r",hidden:!0,handler:function(){this.contentchanged=!0,this.toolbarHandler.call(this,"cmd_r_wizard")},scope:this}]},{text:IRm$.r1("L_PY_EDIT"),tooltip:IRm$.r1("L_PY_EDIT"),iconCls:"icon-toolbar-pyedit",name:"t_py_edit",cls:"ig_py_edit",dtype:"py",hidden:!0,handler:function(){this.contentchanged=!0,this.toolbarHandler.call(this,"cmd_py_edit")},scope:this},{text:IRm$.r1("L_FV_OPT"),tooltip:IRm$.r1("L_FV_OPT"),hidden:!0,name:"t_fview_option",handler:function(){this.contentchanged=!0,this.toolbarHandler.call(this,"cmd_formview_edit")},scope:this},"->",{iconCls:"icon-toolbar-schedule",cls:"ig_r_sch",name:"t_schedule",tooltip:IRm$.r1("B_SCHEDULE"),hidden:!0,handler:function(){this.toolbarHandler.call(this,"cmd_schedule")},scope:this},{iconCls:"icon-email",cls:"ig_r_email",hidden:!0,name:"t_share",tooltip:IRm$.r1("B_SHARE"),handler:function(){this.toolbarHandler.call(this,"cmd_share")},scope:this},{iconCls:"icon-toolbar-favorites",cls:"ig_r_fav",hidden:!0,tooltip:IRm$.r1("B_FAVORITES"),handler:function(){this.toolbarHandler.call(this,"cmd_favorites")},scope:this},{iconCls:"icon-toolbar-userdoc",tooltip:IRm$.r1("B_USER_DOC"),name:"t_userdoc",cls:"ig_r_inst",hidden:!0,handler:function(){IG$.showHelp(this.uid,!0,"report",this.instance)},scope:this}),r._item_map=r._item_map||{},$.each(t,(function(t,e){var o,i;if("-"==e);else if("->"==e);else if(e.text&&(e.text="&nbsp;"+e.text),o=$("<button class='btn btn-default btn-sm' type='button'><span class='"+(e.iconCls||"")+"'></span><span id='igc_txt'>"+(e.text||"")+"</span></button>").appendTo(n),e.hidden&&o.hide(),e.$html=o,i=new IG$.ui_element(e),e.name&&(r._item_map[e.name]=i),e.handler&&o.bind("click",(function(t){t.preventDefault(),t.stopPropagation(),e.handler.call(e.scope,t)})),e.menu){e.menu.length&&(e.menu.items=e.menu);var a=$("<div class='btn-group'>").appendTo(n);o.appendTo(a),o.attr("data-toggle","dropdown"),o.addClass("dropdown-toggle");var s=$("<ul class='dropdown-menu'></ul>").appendTo(a);$.each(e.menu.items,(function(t,e){var o,i,n;n=$("<li></li>").appendTo(s),i=$("<a href=''><span id='igc_txt'>"+(e.text||"")+"</span></a>").appendTo(n),e.$html=n,o=new IG$.ui_element(e),e.name&&(r._item_map[e.name]=o),i.bind("click",(function(t){t.preventDefault(),e.handler&&e.handler.call(e.scope||o,t)}))})),o.bind("click",(function(t){}))}})),r._tbar={items:t},r.hiddentoolbar||ig$.features&&!1!==ig$.features.ig_r_tbar?n.hide():n.show()}},updateTbarAll:function(){var t,e,o=this,i=o.instance,r=o._tbar,n=o._tbarcache,a=o._tbaritems,s=[];if(r){for(n=o.cacheTbar(),t=0;t<a.length;t++)n[a[t]].hide();!o.writable&&o.uid||s.push("t_save"),o.writable&&o.uid&&(s.push("t_share"),s.push("t_userdoc"),s.push("t_schedule")),s.push("t_save_as"),s.push(["t_run","t_tool","t_exp","t_grid","t_chart","t_anal","t_pivot","t_r_rptview","t_r_story"]),"P"!=i.dlgLogin.logininfo.l3.charAt(0)&&(s.push("t_r"),s.push("t_python"),s.push("t_fview")),o.updateTbar(),o.updateExpOpt();var l=o.activeSheet>-1?o.sheets[o.activeSheet]:null;for(l&&l.sheetoption&&l.sheetoption.model&&l.sheetoption.model.viewmode&&o.updateViewMode(l.sheetoption.model.viewmode),n.t_sheet[!1===ig$.features[n.t_sheet.cls]&&o.editmode?"show":"hide"](),o.down("[name=t_exp_opt]").setVisible(!1===ig$.features[n.t_exp.cls]&&o.editmode),t=0;t<s.length;t++)if("string"==typeof s[t])o.chk_tbar(n[s[t]]);else for(e=0;e<s[t].length;e++)o.chk_tbar(n[s[t][e]])}},chk_tbar:function(t){var e,o=t.cls.split(";");$.each(o,(function(t,o){if(!1===ig$.features[o]&&(e=1,"t_fview"==o&&(e=0,activeview&&activeview.sheetoption&&activeview.sheetoption.model&&activeview.sheetoption.model.tb_formview&&(e=1))),!e)return!1})),t[e?"show":"hide"]()},updateTbar:function(){var t=this,e=t.cacheTbar();t.reportoption.cube_objects,t.sheets[t.activeSheet];e.t_sql_view.hide(),("sql_report"==t.meta_type||!1!==ig$.features[e.t_sql_view.cls])&&e.t_sql_view.show()},cacheTbar:function(){var t=this,e=t._tbar,o=t._tbaritems,r=t._tbarcache;if(e){if(!r)for(r=t._tbarcache={},i=0;i<o.length;i++)r[o[i]]=t.down("[name="+o[i]+"]"),r[o[i]];return r}},showChartToolbar:function(){var t=this,e=t.cacheTbar();e&&$.each(["t_chart_wizard","t_chart_type"],(function(o,i){!1===ig$.features[e[i].cls]&&t.editmode&&e[i].show()}))},hideChartToolbar:function(){var t=this.cacheTbar();t&&(t.t_chart_wizard.hide(),t.t_chart_type.hide())},showAnalyToolbar:function(t){var e=this,o=e._tbarcache;o&&$.each(["t_anal_menu"],(function(i,r){o[r]&&o[r][!1===ig$.features[o[r].cls]&&t&&e.editmode?"show":"hide"]()}))},setRToolbar:function(t){var e=this._tbarcache;e&&$.each(["t_r_option","t_r_summary","t_r_script","t_r_wizard"],(function(o,i){e[i]&&e[i][!1===ig$.features[e[i].cls]&&t?"show":"hide"]()}))},setPythonToolbar:function(t){var e=this._tbarcache;e&&$.each(["t_py_edit"],(function(o,i){e[i]&&e[i][t?"show":"hide"]()}))},setFormViewToolbar:function(t){var e=this._tbarcache;e&&$.each(["t_fview_option"],(function(o,i){e[i]&&e[i][!1===ig$.features[e[i].cls]&&t?"show":"hide"]()}))},changeChartType:function(t){var e,o=this,i=t.charttype,r=t.subtype,n=o.sheets[o.activeSheet],a=n?n.sheetoption:null;a&&((e=a.model.chart_option).charttype=i,e.subtype=r,"pie"!=r||e.showtitle||e.title||(e.title="{SERIES}",e.showtitle=!0),o.updateChartOpt())},updateChartToolbar:function(t){var e,o=this;for(e=0;e<o._tbarChart.length;e++)t?o._tbar.remove(o._tbarChart[e]):o._tbar.add(o._tbarChart[e])},updateRToolbar:function(t){var e,o=this;for(e=0;e<o._tbarR.length;e++)t?o._tbar.remove(o._tbarR[e]):o._tbar.add(o._tbarR[e])},updatePromptTbar:function(t){},closeDockNoti:function(t){var e,o,i=this,r=i.dzone,n=i.reportoption,a=r.getBox.call(r,t),s=a?a.view:null,l=i.sheets,c=!1;if(i.contentchanged=!0,s)if("FILTER"==a.objtype&&i.onFilterUpdate(s,!1,!0),"SHEET"===a.objtype){for(e=0;e<l.length;e++)if((o=l[e])==s){l.splice(e,1),o.sheetoption&&"SHEET"==o.sheetoption.objtype&&n.sheets.length>e&&n.sheets.splice(e,1),c=!0;break}}else i.ctrls[t]&&(s.__dx=!0,delete i.ctrls[t]),c=!0;else i.ctrls[t]&&delete i.ctrls[t],c=!0;return c},configDockNotify:function(t){var e,o=this,i=o.dzone,r=t?i.getBox.call(i,t):null,n=r?r.view:null;o.sheets;n&&(e=n.sheetindex,o.showSheetOpt(e,n))},configDockPivot:function(t){this.showPivotConfig(t)},showSheetOpt:function(t,e){e.sheetindex=t;var o=this,i=new IG$.sheetobj({instance:o.instance,dzone:o.dzone,sheets:o.sheets,sheetoption:e.sheetoption,sheetindex:t,reportoption:o.reportoption,callback:new IG$.callBackObj(o,o.rshowSheetOpt,e)});IG$.checkLogin(this,i)},rshowSheetOpt:function(t,e){var o,i,r,n,a,s,l,c=this,h=(c.reportoption.sheets,c.reportoption),d=e.sheetoption,_=c.dzone,p=e.sheetindex;if(o="SHEET"==d.objtype?d.model.layoutinfo.docid:d.docid,n=_.getBox.call(_,o)){if(c.contentchanged=!0,l=h.sheets,d.changetype){if(c.activeSheet=0,"SHEET"==d.changetype){for(a=0;a<l.length;a++)if(l[a]==d){l.splice(a,1);break}for(a=0;a<c.sheets.length;a++)if(c.sheets[a]==e){c.sheets.splice(a,1);break}for(a=0;a<c.sheets.length;a++)c.sheets[a].sheetindex=a}if(n.view&&(n.view.removeObj.call(n.view),n.box_container.empty()),"SHEET"==d.objtype)(i=new IG$.clReport(null,c.itemtype,!1)).model.layoutinfo.docid=o,l.push(i),r=c.createSheet(p,i,n),n.view=r,c.sheets.push(r),r.sheetindex=c.sheets.length-1;else{"SHEET"==d.changetype&&((s=new IG$.sheetfiltercomp(null)).objtype=d.model.objtype,s.close=d.model.close,s.name=d.model.name),c.createCtrl(d,n),i=n.view,"SHEET"==d.changetype&&(c.ctrls[n.docid]=s);var m=IG$.j$ext._w(i.container),u=IG$.j$ext._h(i.container);i.setSize(m,u)}c.updateLayout(!1)}"FILTER"!=d.objtype&&"TEXT"!=d.objtype&&"NAVI"!=d.objtype&&"RPT_VIEW"!=d.objtype||("TEXT"==d.objtype&&(n.view.cls_id=null),"FILTER"==d.objtype?n.view.validateItems.call(n.view,null,!1,!1,!0):n.view.validateItems.call(n.view)),_.floatWidget(o),n.setTitle.call(n,d.model.name),n.showTitle.call(n,!d.model.hidetitle),n.setPanelCss(d.model.panel_css),n.fw=d.fw,n.fh=d.fh,n.setReportOption.call(n,d),n.validateProperty.call(n,1)}_.updateDisplay.call(_,!0)},addSheet:function(t){var e,o,i=this,r=t.sheetoption,n=r.model,a=i.dzone;i.sheets.length;if(r.objtype=n.objtype=t.objtype,n.close=t.closable,n.name=t.name,"SHEET"===t.objtype)i.reportoption.sheets.push(r);else e=i.createCtrl(r),i.ctrls[e.docid]=r,n.docid=e.docid,e.setReportOption.call(e,r);"RPT_VIEW"==t.objtype&&IG$.ShowWarning(IRm$.r1("M_PIVOT_CHANGED"),i,"info"),i.updateLayout(!1),a.updateDisplay.call(a,!0),o="SHEET"==r.objtype?r.model.layoutinfo.docid:r.docid,(e=a.getBox.call(a,o))&&(e.setTitle.call(e,r.model.name),e.showTitle.call(e,!r.model.hidetitle),e.fw=r.model.fixed_width,e.fh=r.model.fixed_height,e.setReportOption.call(e,r),e.validateProperty.call(e))},saveContent:function(t,e,o){var i=this,r=new IG$._rpc$;r.init(i,{ack:"writecontent",payload:{uid:t},mbody:e,meta_type:i.meta_type||"report"},i,i.rsaveContent,null,[o]),r.send()},rsaveContent:function(t,e){var o=this;!!e&&e[0]?(o.ignoreclose=!0,o.close()):(o.contentchanged=!1,o.id=t.type.toLowerCase()+"_"+t.uid,IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success"))}};
IG$.SQLReportView=$s.extend(IG$.ReportView,{meta_type:"sql_report",itemtype:"SQLReport",iconCls:"icon-sqlreport",showReportOption:function(e,t,n,o){var i,a,s=this;new IG$._rpc$;s.reportoption||(o=1,i=s.itemtype,a=s.makeTempReportMeta({type:i}),s.reportoption=new IG$.clReports(a,s.meta_type));var l=new IG$._IB6({instance:s.instance,modal:!0,cubeuid:s.cubeuid,reportoption:s.reportoption,sheetoption:n,meta_type:s.meta_type,callback:new IG$.callBackObj(s,(function(e,n,s){var l=this,p=function(){o?(!0!==n&&(l.reportoption&&!a&&(a=l.makeTempReportMeta({type:i})),a.content.sql_datasource=e.sql_datasource?e.sql_datasource:null),l.rs_loadContent(a,!0,!0===n),l.continueReportOption(e),l.load_cube=null,l.cubeuid=null):!0!==n&&(l.continueReportOption(e),e.sql_datasource&&(l.reportoption._mc.sql_datasource=e.sql_datasource),inlineview_sql_objects=l.reportoption._mc.inlineview_sql_objects,(!inlineview_sql_objects||inlineview_sql_objects&&0==inlineview_sql_objects.length)&&(inlineview_sql_objects=l.reportoption._mc.inlineview_sql_objects=l.reportoption._mc.inlineview_sql_objects||[],inlineview_sql_objects.push({sql_id:"sql_1",name:"SQL 1"}),setTimeout((function(){l.toolbarHandler("cmd_view_sql")}),10)),t&&t.execute(e.sql_datasource))};if(s&&s.get("nodepath")){var r=new IG$._rpc$,c=l.reportoption;r.init(l,{ack:"helpcontent",payload:{act:"get",nodepath:s.get("nodepath"),name:s.get("name")},mbody:{option:"rpt_tmpl"}},l,(function(t){t.sql_datasource=e.sql_datasource?e.sql_datasource:null;var o,i={type:c.type,uid:c.uid,nodepath:c.nodepath,name:c.name,content:t};if(t.sheets&&t.sheets.length&&"report"==t.meta_type)for(o=0;o<t.sheets.length;o++)t.sheets[o].dataquerymode="M_DATA";t.meta_type=l.meta_type,l._template_load=!0,l.rs_loadContent(i,!0,!0===n),l.continueReportOption(e),l.load_cube=null,l.cubeuid=null}),(function(){p()})),r.send()}else p()}))});IG$.checkLogin(s,l)},_update_sql_columns:function(){var e=this,t=new IG$._rpc$,n={inline_views:[]},o=e.reportoption._mc.sql_datasource?e.reportoption._mc.sql_datasource.uid:null;$.each(e.reportoption._mc.inlineview_sql_objects,(function(e,t){n.inline_views.push({dbpool:o,uid:t.sql_id,sql:t.sql_inlineview})})),t.init(e,{ack:"olapservice",payload:{uid:e.uid,option:"sqlcubemeta"},mbody:n,meta_type:"inlineviews"},e,(function(t){var n,o={},i=e.reportoption,a=i._mc.inlineview_sql_objects;for(n=0;n<t.length;n++)o[t[n].uid]=t[n];if($.each(a,(function(t,n){var i=o[n.sql_id];i&&e._update_dimensions(i,n)})),i.sheets){var s=0,l=function(e,t){var n,o,i,a={};for(n=0;n<t.length;n++)a[(o=t[n]).uid]=o;for(n=e.length-1;n>=0;n--)(i=a[(o=e[n]).uid])?(o.name=i.name,o.fieldname=i.fieldname,o.attributes=i.attributes,o.datatype=i.datatype,o.db_datatype=i.db_datatype,o.tablename=i.tablename,o.datasize=i.datasize,o.decimaldigits=i.decimaldigits,o.dataprecision=i.dataprecision):e.splice(n,1)};$.each(i.sheets,(function(e,t){var n,o,i=t.model,p=a[0].meta_dimensions;if("M_DATA"==i.dataquerymode){if(l(i.rows,p),!i.rows.length)for(n=0;n<p.length;n++)o=p[n],i.rows.push({uid:o.uid,type:o.type,name:o.name,datatype:o.datatype,sql_id:o.sql_id});s+=i.rows.length}else l(i.rows,p),l(i.cols,p),l(i.measures,p),s+=i.rows.length})),s&&e.toolbarHandler("cmd_run")}}),null),t.send()},_update_dimensions:function(e,t){var n,o,i,a,s=e.columns,l={},p={},r=[];for(t.meta_dimensions=t.meta_dimensions||[],n=t.meta_dimensions,o=0;o<n.length;o++)p[(i=n[o]).name]=i;for(o=0;o<s.length;o++)l[(i=s[o]).name]=i,p[i.name]?((a=p[i.name]).sql_id=t.sql_id,$s.apply(a,i)):r.push(i);for(o=n.length-1;o>=0;o--)l[(i=n[o]).name]||n.splice(o,1);for(o=0;o<r.length;o++)r[o].sql_id=t.sql_id,n.push(r[o])},initComponent:function(){this.on("afterrender",(function(){this.down("[name=mainpanel]")}),this),IG$.SQLReportView.superclass.initComponent.call(this)}});
IG$.detailDrillWin=$s.extend($s.window,{xtype:"window",modal:!0,region:"center",layout:"fit",closable:!0,resizable:!0,maximizable:!0,width:700,height:500,callback:null,poolname:null,confirm:function(){},initComponent:function(){var e=this,t=$(document),i=t.width()||700,n=t.height()||600;$s.apply(e,{width:i-80,height:n-80,title:IRm$.r1("L_DET_VIEW")+" ("+(e.viewinfo.title||e.viewinfo.name)+")",items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",flex:1,border:0,layout:"fit",name:"p_main",items:[]}]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]}),IG$.detailDrillWin.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(e){var t,i=this,n=i.viewinfo,a=i.down("[name=p_main]");n&&(t=IG$.createAppPanel(i.instance,n.uid,"report",n.name,n.nodepath,!1,{closable:!1,hiddentoolbar:!0,auxfilter:i.auxfilter,header:!1}),a.add(t))}}});
window.IG$=window.IG$||{},IG$.fontStyle={P_NONE:0,P_BOLD:1,P_ITALIC:2,P_UNDERLINE:4},IG$.V$grid=function(e){var t,r=this;r._browser=r.browser(),(t=IG$._ccache=IG$._ccache||{}).colorcode=t.colorcode||{},r.V$createComp(e)},IG$.V$grid.prototype={merge:function(e,t){var r;for(r in t)e[r]=t[r]},V$createComp:function(e){var t=this;t.mv=!1,t._scrollX=0,t._scrollY=0,t.rowfix=0,t.colfix=0,t._treecol=-1,t._treerow=-1,t._hastreecol=0,t.rowcnt=0,t.colcnt=0,t._rect={frow:0,fcol:0,trows:0,tcols:0,crows:0,ccols:0},t.timer=0,t.interval=10,t.delay=250,t.styles={},t.cellcharts=[],t.trenderers=[],t.font="sans",t.size=13,t.regv=!1,t.regh=!1,t._scrollSize=13,t.mmax=0,t.width=0,t.height=0,t.selectedItems=[],t.selectedRows=[],t._hasGlobalEv=!1,t._isScrolling=!1,t._isDragging=!1,t.thumbBtnDown=!1,t.thumbMouseSX=-1,t.thumbMouseSY=-1,t._thumbTimer=-1,t._nhidden=0,t.buttondown=!1,t._mouseSX=-1,t._mouseSY=-1,t._scrollSX=0,t._scrollSY=0,t._mouseDownTimer=-1,t._mouseUpTimer=-1,t.mouseAction=0,t.mouseMode="select",t.columnfill=!1,t.treeIndent=20,t.dtm=-1,t._editable=!1,t._enableContextMenu=!0,t.selectionmode="cell",t._loadingTimer=-1,t._invalidateData=!0,t._columnresized=!0,t._rendered=!1,t.cs_x=1,t.cs_y=1,e&&t.merge(t,e)},onRender:function(){},doFilter:function(){var e=this,t={menu:e.context},r=e._dfc.__af,o=e.context.cell,l=0;"between"==e._dfc.f_opt.val()?e._dfc.sval1.val()?e._dfc.sval2.focus():l=1:e._dfc.sval1.val()&&(l=1),l?r[o.c]={op:e._dfc.f_opt.val(),val1:e._dfc.sval1.val(),val2:e._dfc.sval2.val()}:delete r[o.c],t.cmd="cmd_run_filter".toUpperCase(),t.menu.mdf=r[o.c],e.fireEvent("menu",t),e._show_menu(!1)},_show_menu:function(e){var t=this._df,r=function(e){$(document).unbind("mouseup",r),t.hide()};$(document).unbind("mouseup",r),t[e?"show":"hide"](),$(document).bind("mouseup",r)},_hookKeyEvt:function(){var e=this,t=e._focElm;t&&t.bind("keydown",(function(t){67!=t.keyCode||1!=t.ctrlKey&&!t.metaKey?65!=t.keyCode||1!=t.ctrlKey&&!t.metaKey||(e._selectAll(),t.preventDefault(),t.stopImmediatePropagation()):(e._copyclip(),t.preventDefault(),t.stopImmediatePropagation())}))},_selectAll:function(){var e,t,r=this;for(r.removeAllSelection(),e=0;e<r.rows.length;e++)if(!1!==r.rows[e].visible&&!0!==r.rows[e]._treeCollapsed){for(t=0;t<r.cols.length;t++)!1!==r.cols[t].visible&&(r[this._treecol>-1||this._treerow>-1?"treeData":"_dataSet"][e][t].selected=!0,r.selectedItems.push(r[this._treecol>-1||this._treerow>-1?"treeData":"_dataSet"][e][t]));r.selectedRows.push(r.rows[e])}r.refreshSelect()},_copyclip:function(){var e,t,r=this._focElm,o="",l=[],i=this.selectedItems;if(i&&i.length){for(-1,e=0;e<i.length;e++)t=i[e],e>0&&i[e-1]._n_==t._n_&&l.push("\t"),l.push(t.text||t.value),e+1<i.length&&i[e+1]._n_!=t._n_&&l.push("\n");o=l.join("")}window.clipboardData?window.clipboardData.setData("Text",o):r&&(r.val(o),r.focus(),r.select(),document.execCommand("copy"))},initialize:function(e){var t,r,o,l,i,n,a=this;if(clearTimeout(a.timer),a.owner=e,null==a.ctx){a._focElm=$("<textarea style='position:absolute;top:-400px;left:-400px;width:100px;height:100px'></textarea>").appendTo(e);a.ctx=$(['<div class="m-datagrid-container">','<div class="m-datagrid-container-row">','<div class="m-datagrid-container-fixed">','<table class="m-datagrid-fixed-header">',"<colgroup></colgroup>","<thead></thead>","<tbody></tbody>","</table>",'<div class="m-datagrid-data-fixed-container">','<table class="m-datagrid-data-fixed">',"<colgroup></colgroup>","<thead></thead>","<tbody></tbody>","</table>","</div>","</div>",'<div class="m-datagrid-container-main">','<div class="m-datagrid-data-header-container">','<table class="m-datagrid-data-header">',"<colgroup></colgroup>","<thead></thead>","<tbody></tbody>","</table>","</div>",'<div class="m-datagrid-data-container">','<table class="m-datagrid-data">',"<colgroup></colgroup>","<thead></thead>","<tbody></tbody>","</table>","</div>",'<div class="m-datagrid-scroll m-datagrid-hscroll">','<div class="m-datagrid-track m-datagrid-track-h">','<div class="m-datagrid-scrollthumb m-datagrid-scrollthumb-h">','<div class="m-datagrid-end m-datagrid-end-h"></div>',"</div>","</div>","</div>","</div>",'<div class="m-datagrid-scroll m-datagrid-vscroll">','<div class="m-datagrid-track m-datagrid-track-v">','<div class="m-datagrid-scrollthumb m-datagrid-scrollthumb-v">','<div class="m-datagrid-end m-datagrid-end-v">',"</div>","</div>","</div>","</div>","</div>",'<div class="m-datagrid-editor"></div>','<ul class="contextMenu"></ul>',"</div>"].join("")).appendTo(e),a._regData=$(".m-datagrid-data-container",a.ctx),a._regData_hdL=$(".m-datagrid-fixed-header",a.ctx),a._regData_hd=$(".m-datagrid-data-header",a.ctx),a._regData_ogL=$(".m-datagrid-data-fixed",a.ctx),a._regData_og=$(".m-datagrid-data",a.ctx),a.renderers={header_fixed:{name:"header_fixed",html:a._regData_hdL,colgroup:$("colgroup",a._regData_hdL)[0],thead:$("thead",a._regData_hdL)[0],tbody:$("tbody",a._regData_hdL)[0],renderers:[]},header:{name:"header",html:a._regData_hd,colgroup:$("colgroup",a._regData_hd)[0],thead:$("thead",a._regData_hd)[0],tbody:$("tbody",a._regData_hd)[0],renderers:[]},data_fixed:{name:"data_fixed",html:a._regData_ogL,colgroup:$("colgroup",a._regData_ogL)[0],thead:$("thead",a._regData_ogL)[0],tbody:$("tbody",a._regData_ogL)[0],renderers:[]},data:{name:"data",html:a._regData_og,colgroup:$("colgroup",a._regData_og)[0],thead:$("thead",a._regData_og)[0],tbody:$("tbody",a._regData_og)[0],renderers:[]}},a._regHscroll=$(".m-datagrid-hscroll",a.ctx).hide(),t=$(".m-datagrid-track-h",a._regHscroll),a._regHscrollThmb=$(".m-datagrid-scrollthumb-h",t),hend=$(".m-datagrid-end-h",a._regHscrollThmb),a._regVscroll=$(".m-datagrid-vscroll",a.ctx).hide(),r=$(".m-datagrid-track-v",a._regVscroll),a._regVscrollThmb=$(".m-datagrid-scrollthumb-v",r),vend=$(".m-datagrid-end-v",a._regVscrollThmb),a.editor=$(".m-datagrid-editor",a.ctx).hide(),a.contextmenu=$(".contextMenu",a.ctx),a.context={menu:a.contextmenu},a._hookKeyEvt(),$(e).contextMenu&&0!=a.enablecontextmenu&&$(e).contextMenu(a.context,new IG$.callBackObj(a,a.menuProc))}if(a._loadingLayer||(a._loadingLayer=$("<div class='m-datagrid-loading-mask'><div class='m-datagrid-loading'><div class='m-datagrid-loading-indicator'></div></div></div>").appendTo(a.ctx).hide()),a._rendered=a.is_rendered(a.owner),0==a._rendered){var s=$(a.owner).clone();s.css({visibility:"hidden",width:"",height:"",maxWidth:"",maxHeight:""}),$("body").append(s),i=s.outerWidth(),n=s.outerHeight(),s.remove()}else i=IG$.j$ext._w(a.ctx),n=IG$.j$ext._h(a.ctx);i>0&&n>0&&(a._dwidth=i,a._cheight=n),a._scrollX=0,a._scrollY=0,a.rows=[],a.cols=[],a.pad=[2,2,2,2],a.cellcharts=[],a.ctx.bind({touchstart:function(e){return a.onTouchStart(a,e),!1},touchend:function(e){return a.onTouchEnd(a,e),!1},touchmove:function(e){if(!a.mv)return a.onTouchMove(a,e),!1},mousedown:function(e){return a.onMouseDown(a,e)},dblclick:function(e){return a.onMouseDblClick(a,e)},mousewheel:function(e,t){return e.stopPropagation(),e.preventDefault(),a.onMouseWheel(a,e,t)},selectstart:function(){return!1}}),a._regVscroll.bind({touchstart:function(e){return 0==a.mv&&a.onScrollMouseClick(a,e,"v"),!1},click:function(e){return 0==a.mv&&a.onScrollMouseClick(a,e,"v"),!1}}),a._regHscroll.bind({touchstart:function(e){return 0==a.mv&&a.onScrollMouseClick(a,e,"h"),!1},click:function(e){return 0==a.mv&&a.onScrollMouseClick(a,e,"h"),!1}}),a._regVscrollThmb[0].eventtarget="vertical",a._regVscrollThmb.bind({touchstart:function(e){return a.mv=!0,e.stopPropagation(),a.onThumbMouseDown(this,e,"v"),!1},touchend:function(e){a.onThumbMouseUp(this,e,"v")},mousedown:function(e){return a.mv=!0,e.stopPropagation(),a.onThumbMouseDown(this,e,"v"),!1},mouseup:function(e){a.onThumbMouseUp(this,e,"v")}}),a._regHscrollThmb[0].eventtarget="horizontal",a._regHscrollThmb.bind({touchstart:function(e){a.mv=!0,a.onThumbMouseDown(this,e,"h")},touchend:function(e){a.onThumbMouseUp(this,e,"h")},mousedown:function(e){a.mv=!0,a.onThumbMouseDown(this,e,"h")},mouseup:function(e){a.onThumbMouseUp(this,e,"h")}}),l=["<div class='igc-dfilter-m'><div class='igc-dfilter-bg'></div>","<div class='igc-dfilter'>","<div class='flt-line flt-sep' id='cmd_filter'>"+IRm$.r1("B_SET_FILTER")+"</div>","<div class='flt-line flt-sep' id='cmd_style'>"+IRm$.r1("B_SET_STYLE")+"</div>","<div class='flt-line' id='cmd_asc'>"+IRm$.r1("B_ORDER_ASC")+"</div>","<div class='flt-line' id='cmd_desc'>"+IRm$.r1("B_ORDER_DSC")+"</div>","<div class='flt-line flt-sep' id='cmd_sort'>"+IRm$.r1("L_SORT_OPTION")+"</div>","<div class='flt-line' id='b_fm'><span>"+IRm$.r1("L_FORMULA")+"</span><div class='flt-expand'></div></div>","<div class='flt-block' id='d_fm'>","<div class='flt-line-g'><span id='cl_fm'>"+IRm$.r1("L_CLEAR_FORMULA")+"</span><span id='r_fmt'>"+IRm$.r1("B_MORE")+"</span></div>","<div id='c_fm'>","<ul>","<li class='flt-line' id='t_sum'>"+IRm$.r1("F_STOT")+"</li>","<li class='flt-line' id='t_avg'>"+IRm$.r1("F_AVG")+"</li>","<li class='flt-line' id='t_min'>"+IRm$.r1("F_MIN")+"</li>","<li class='flt-line' id='t_max'>"+IRm$.r1("F_MAX")+"</li>","<li class='flt-line' id='t_rank'>"+IRm$.r1("F_RNK")+"</li>","<li class='flt-line' id='t_pot'>"+IRm$.r1("F_P_POT")+"</li>","<li class='flt-line' id='t_cumul'>"+IRm$.r1("F_P_CUM")+"</li>","<li class='flt-line' id='t_incr'>"+IRm$.r1("F_INC")+"</li>","<li class='flt-line' id='t_diff'>"+IRm$.r1("F_DIFF")+"</li>","</ul>","</div>","</div>","<div class='flt-line' id='b_rank'><span>"+IRm$.r1("L_RANK_OPTION")+"</span><div class='flt-expand'></div></div>","<div class='flt-block' id='d_rank'>","<div class='flt-line' id='cmd_showall'>"+IRm$.r1("B_SHOW_ALL")+"</div>","<div class='flt-line' id='cmd_top5'>"+IRm$.r1("B_TOP")+" 5</div>","<div class='flt-line' id='cmd_top10'>"+IRm$.r1("B_TOP")+" 10</div>","<div class='flt-line' id='cmd_btm5'>"+IRm$.r1("B_BOTTOM")+" 5</div>","<div class='flt-line' id='cmd_btm10'>"+IRm$.r1("B_BOTTOM")+" 10</div>","</div>","<div class='flt-line flt-sep-top' id='cmd_remove'>"+IRm$.r1("B_REMOVE_PIVOT")+"</div>","</div></div>"],a._df=$(l.join("")).appendTo(a.ctx).hide(),o=$(".igc-dfilter",a._df),a._dfc={dmain:o,t_sum:$("#t_sum",o),t_avg:$("#t_avg",o),t_min:$("#t_min",o),t_max:$("#t_max",o),t_rank:$("#t_rank",o),t_pot:$("#t_pot",o),t_cumul:$("#t_cumul",o),t_incr:$("#t_incr",o),t_diff:$("#t_diff",o),b_rank:$("#b_rank",o),d_rank:$("#d_rank",o),d_filter:$("#d_filter",o),c_filter:$("#c_filter",o),cmd_filter:$("#cmd_filter",o),cmd_style:$("#cmd_style",o),cmd_asc:$("#cmd_asc",o),cmd_desc:$("#cmd_desc",o),cmd_sort:$("#cmd_sort",o),cmd_top5:$("#cmd_top5",o),cmd_top10:$("#cmd_top10",o),cmd_btm5:$("#cmd_btm5",o),cmd_btm10:$("#cmd_btm10",o),cmd_showall:$("#cmd_showall",o),cmd_remove:$("#cmd_remove",o),r_flt:$("#r_flt",o),cl_flt:$("#cl_flt",o),cl_fm:$("#cl_fm",o),b_fm:$("#b_fm",o),d_fm:$("#d_fm",o),r_fmt:$("#r_fmt",o)};$("<div><div class='igc-c-filter-op'><select id='f_opt'><option value='_like_'>"+IRm$.r1("L_F_LIKE")+"</option><option value='between'>"+IRm$.r1("L_F_BETWEEN")+"</option><option value='gt'>"+IRm$.r1("L_F_GT")+"</option><option value='lt'>"+IRm$.r1("L_F_LT")+"</option></select></div><div class='igc-c-filter-inp'><input type='text' name='sval1'></input><input type='text' name='sval2' style='display: none;'></input></div></div>").appendTo(a._dfc.c_filter);a._dfc.f_opt=$("#f_opt",o),a._dfc.sval1=$("[name=sval1]",o),a._dfc.sval2=$("[name=sval2]",o),a._dfc.d_fm.hide(),a._dfc.f_opt=$("#f_opt",o).bind("change",(function(e){var t=$(this).val();a._dfc.sval2["between"==t?"show":"hide"]()})),a._dfc.sval1.bind("keyup",(function(e){13==e.which&&a.doFilter()})),a._dfc.sval2.bind("keyup",(function(e){13==e.which&&a.doFilter()})),$.each(["cmd_asc","cmd_desc","cmd_sort","cmd_top5","cmd_top10","cmd_btm5","cmd_btm10","cmd_showall","cmd_remove","cmd_filter","cmd_style","r_flt","cl_flt","cl_fm","r_fmt","t_sum","t_avg","t_min","t_max","t_rank","t_pot","t_cumul","t_incr","t_diff"],(function(e,t){a._dfc[t]&&a._dfc[t].length&&a._dfc[t].bind("click",(function(){var e={cmd:t.toUpperCase(),menu:a.context},r=a._dfc.__af,o=a.context.cell,l=1;if("r_flt"==t){if("between"==a._dfc.f_opt.val()?a._dfc.sval1.val()&&a._dfc.sval2.val()||(l=0):a._dfc.sval1.val()||(l=0),!l)return;r[o.c]={op:a._dfc.f_opt.val(),val1:a._dfc.sval1.val(),val2:a._dfc.sval2.val()},e.cmd="cmd_run_filter".toUpperCase()}else"cl_flt"==t?(delete r[o.c],e.cmd="cmd_run_filter".toUpperCase()):"cmd_"==t.substring(0,4)&&(e.cmd=t.toUpperCase());e.menu.mdf=r[o.c],a.fireEvent("menu",e),a._show_menu(!1)}))})),a._dfc.b_rank.bind("click",(function(){a._dfc.d_rank.toggle()})),a._dfc.b_fm.bind("click",(function(){a._dfc.d_fm.toggle()})),a._dfc.dmain.bind({click:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()}}),a._df.bind({click:function(e){e.stopPropagation(),$(this).hide()},mousedown:function(e){e.stopPropagation(),$(this).hide()},mouseup:function(e){e.stopPropagation(),$(this).hide()}})},moveCol:function(e,t,r){var o=this.cols[e];o.width=Math.max(o.width+t,50),this.redraw()},setLoading:function(e){var t=this;t._loadingTimer>-1&&(clearTimeout(t._loadingTimer),t._loadingTimer=-1),1==e?t._loadingLayer.show():t._loadingTimer=setTimeout((function(){t._loadingLayer.fadeOut()}),500)},endEdit:function(e){},initializeDragDrop:function(e){},regGlobalEvent:function(e){var t=this,r=t.owner,o=function(r){return t.glMouseDown(r,e),!1},l=function(r){return r.stopPropagation(),t.mv=!0,t.glMouseMove(r,e),!1},i=function(n){return n.stopPropagation(),t.mv=!0,t.glMouseUp(n,e),$(document).unbind({mousedown:o,mousemove:l,mouseup:i}),$(r).unbind({touchend:i,touchmove:l}),!1};this.ge={mousedown:o,mousemove:l,mouseup:i},this.getc={touchmove:l,touchend:i},$(r).bind({touchmove:l,touchend:i,touchcancel:i}),$(document).bind({mousedown:o,mousemove:l,mouseup:i})},glMouseDown:function(e,t){},glMouseMove:function(e,t){var r;e.preventDefault(),e.stopImmediatePropagation(),r=this.gl_pos(e),this.scrollHandler({x:r.pageX,y:r.pageY},t)},gl_pos:function(e){var t={pageX:e.pageX,pageY:e.pageY};return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length&&(touch=e.originalEvent.touches[0],t.pageX=touch.pageX,t.pageY=touch.pageY),t},glMouseUp:function(e,t){var r=this;r._isScrolling=!1,r._isDragging=!1,r.ge=null,r.getc=null,setTimeout((function(){r.mv=!1}),50)},scrollHandler:function(e,t){var r,o,l,i=this,n=i._rect,a=(i._regVscroll,i._regHscroll,i._regVscrollThmb,i._regHscrollThmb,e.x-i.thumbMouseSX),s=e.y-i.thumbMouseSY,c=i._scrollX,d=i._scrollY;i.__scr||("v"==t?(l=Math.max(30,i.thumbvheight),o=n.cheight,d=Math.min(o-l,Math.max(0,i.sy+s))):(l=Math.max(30,i.thumbhwidth),r=n.cwidth,c=Math.min(r-l,Math.max(0,i.sx+a))),i._scrollX==c&&i._scrollY==d||(i._scrollX=c,i._scrollY=d,i.updateThmbPos(),i.do_scroll(t)))},do_scroll:function(e,t){var r=this;r._thumbTimer&&(clearTimeout(r._thumbTimer),r._thumbTimer,r._thumbTimer=-1),r._thumbTimer=setTimeout((function(){t?r.fireEvent("scroll_request",t.nrow):r.on_thumbTimer(e)}),120)},addCellChart:function(e,t){var r,o=e.width||40,l=e.height||30;t._mcrender?(r=t._mcrender).show():t._mcrender=r=$("<div>&nbsp;</div>").appendTo(t).css({position:"relative",margin:0,padding:0,left:0,top:0,width:"100%",height:"100%",minWidth:o,minHeight:l}).show();var i={defaultPixelsPerValue:e.series&&e.series.length&&e.series[0].code&&e.series[0].code.length?parseInt(o/e.series[0].code.length):o},n=e,a=n.series;return a&&a.length>0&&a[0].datum.length>0&&(i.type="line",IG$.microChartType(n,i),"bar"==i.type&&(i.defaultPixelsPerValue=parseInt(o/a[0].datum.length),i.barWidth=i.defaultPixelsPerValue),i.width="100%",i.height="100%",i.tooltipFormat="{{offset:offset}} {{y:val}}",i.tooltipValueLookups={offset:a[0].disp},"line"==i.type||"area"==i.type||(i.xvalues=a[a.length-1].disp)),t.dobj&&t.dobj.hide(),this.cellcharts.push({el:r,renderer:t,series:a,opt:i}),r},_update_sparkline:function(){var e,t,r=this.cellcharts;for(e=0;e<r.length;e++)(t=r[e]).el.show(),t.opt.width=t.el.width(),t.opt.height=t.el.height(),t.sparkline=t.el.sparkline(t.series&&t.series.length?t.series[0].datum:[],t.opt)},clearCellChart:function(){var e,t=this.cellcharts;for(e=t.length-1;e>=0;e--)t.pop().el.hide()},getMenus:function(e){var t=0,r={};return 1==e.title&&(1!=e.position&&2!=e.position||(r.cmd_filter=1,r.cmd_asc=1,r.cmd_desc=1,r.cmd_sort=1,t=1),3==e.position&&(r.cmd_filter=1,r.b_rank=1,t=1),r.cmd_style=1,r.cmd_remove=1),{active:t,items:r}},prepMenu:function(e){var t,r=this.contextmenu;for(r.html(""),t=0;t<e.length;t++)r.append($("<li"+(e[t].class?" class='"+e[t].class+"'":"")+"><a href='#"+e[t].name+"'>"+e[t].disp+"</a></li>"))},menuProc:function(e){this.fireEvent("menu",e)},setDataProvider:function(e,t,r,o,l,i){var n,a,s,c,d,h=this,m=(h.gs_bs_brd_col,[...e]);for(h._dataSet={header:m.splice(0,h.rowfix),data:m},h.__tpstart<1?!0===l?s=!1:(h._scrollX=0,h._scrollY=0):s=!1,i&&(s=!1),h._invalidateData=!0,h.endEdit(),h._treecol>-1||h._treerow>-1?(h.refreshTree(),h.rowcnt=h.treeData.length):h.rowcnt=h._dataSet.header.length+h._dataSet.data.length,h.rowcnt>0&&(h.colcnt=h._dataSet.header[0].length),n=0;n<h._dataSet.header.length;n++)for(c=h._dataSet.header[n],a=0;a<c.length;a++)(d=c[a]).menus=h.getMenus(d);for(n=0;n<h._dataSet.data.length;n++)for(c=h._dataSet.data[n],a=0;a<c.length;a++)(d=c[a]).menus=h.getMenus(d);if(h.rowcnt<h.rows.length)for(h.rows.splice(h.rowcnt,h.rows.length-h.rowcnt),n=0;n<h.rows.length;n++)h.rows[n].visible=!0,h.rows[n].width=0,h.rows[n].height=0;else{for(n=0;n<h.rows.length;n++)h.rows[n].visible=!0,h.rows[n].width=0,h.rows[n].height=0;for(n=h.rows.length;n<h.rowcnt;n++)h.rows.push({index:n})}if(h.colcnt<h.cols.length)for(h.cols.splice(h.colcnt,h.cols.length-h.colcnt),n=0;n<h.cols.length;n++)h.cols[n].width=0,h.cols[n].visible=!0;else if(h.cols.length==h.colcnt&&!1===s)for(n=0;n<h.cols.length;n++)h.cols[n].visible=!0;else{for(n=0;n<h.cols.length;n++)h.cols[n].width=0,h.cols[n].visible=0;for(n=h.cols.length;n<h.colcnt;n++)h.cols.push({index:n})}if(h.hidden_columns=r,h._nhidden=0,r&&r.length)for(n=0;n<r.length;n++)h.cols[r[n]]&&(r[n]<h.colfix&&h._nhidden++,h.cols[r[n]].visible=!1);else for(n=0;n<h.cols.length;n++)h.cols[n].visible=!0;for(h.hidden_rows=o||[],h.hidden_rows_map={},n=0;n<o.length;n++)h.hidden_rows_map[o[n]]=1;pwidth=h.pad[1]+h.pad[2],pheight=h.pad[0]+h.pad[3],!1!==t&&(h._get_rows(),h.updateThmbPos(),h.redraw(s)),h.__scr=0},_get_rows:function(){var e,t=this,o=t.hidden_rows_map;if(t._rect.trows=0,this._treecol>-1)for(e=0;e<t.treeData.length;e++){for(tcell=t.treeData[e][t._treecol],tparent=tcell.parent,r=t.rows[e],visible=!0;tparent;){if(tparent.treeinfo&&!0!==tparent.treeinfo.opened){visible=!1;break}tparent=tparent.parent}1==visible&&t._rect.trows++}else if(t.__tpstart>0||t.__trow>t.rowcnt)t._rect.trows=t.__trow;else for(e=0;e<t.rowcnt;e++)o[e]||0!=t.rows[e].vcr&&t._rect.trows++},redraw:function(e){var t=this;!1!==e&&(t._regVscroll.hide(),t._regHscroll.hide(),t.regv=!1,t.regh=!1),t._get_rows(),t.initDraw(!1===e||void 0),t.draw()},initDraw:function(e){var t=this;t.hidden_rows_map;t.sh=1,t.sv=1},resize:function(e,t){var r=this;e>0&&t>0&&(r._dwidth=e,r._cheight=t,r._regVscroll.hide(),r.regv=!1,r.initDraw(!1),r.draw())},draw:function(){var e,t=this;t.dtm>-1&&clearTimeout(t.dtm),e=t.checkRequest(),t.__scr=2==e.r?1:0,t.dtm=setTimeout((function(){t.dtm=-1,t.draw_async(e),t.sync_tables(1),t._update_sparkline(),t.validate_scroll()}),5)},validate_scroll:function(){var e=this,t=e._rect,r=e.renderers,o=e.$ow(e._regData[0]),l=e.$oh(e._regData[0]),i=e.$ow(e._regData_og[0]),n=0,a=0;if(e.sh=o/i,e.sv=t.crows/(t.trows-t.frow),e.sh<1){n=0,t.cwidth=o,t.twidth=i,t.fwidth=n;var s={marginLeft:n};e.thumbhwidth=o*e.sh,thumbcalc=Math.max(30,e.thumbhwidth),e._regHscroll.css(s),e._regHscroll.show(),e._regHscrollThmb.css({left:Math.min(e._scrollX,o-thumbcalc),width:thumbcalc}),e.regh=!0}else e._regHscroll.hide(),e.regh=!1;if(e.sv<1){a=r.header.html.outerHeight(),t.cheight=l,t.fheight=a;s={marginTop:a};e.thumbvheight=l*e.sv,thumbcalc=Math.max(30,e.thumbvheight),e._regVscroll.css(s),e._regVscroll.show(),e._regVscrollThmb.css({top:Math.min(e._scrollY,l-thumbcalc),height:thumbcalc}),e.regv=!0}else e._regVscroll.hide(),e.regv=!1},countSubNodes:function(e,t){var r,o,l=this,i=l._treecol,n=(l._treerow,1);for(o=l.treeData.length,r=0;r<e.length;r++)e[r].dr=o;if(l.treeData.push(e),e[i].children&&e[i].children.length>0)for(r=0;r<e[i].children.length;r++)n+=l.countSubNodes(e[i].children[r],t);return n},refreshTree:function(){var e,t=this;if((this._treecol>-1||this._treerow>-1)&&(0,t.treeData=[],t.appDataSet))for(e=0;e<t.appDataSet.length;e++)t.countSubNodes(t.appDataSet[e],e)},updateTreeColumnV2:function(){var e,t,r,o,l,i,n,a,s=this,c=s.colfix,d=s.rowfix,h=s.appDataSet;for(e=c;e<s.colcnt;e++)s.cols[e].visible=!0;for(e=0;e<d;e++)for(o=h[e],t=c;t<s.colcnt;t++)if((i=o[t]).celltree&&i.celltree.childcolumns&&i.celltree.childcolumns.length)for(a=(n=i.celltree).childcolumns,l=!n.opened,r=0;r<a.length;r++)s.cols[a[r]].visible=!l;for(s.sh=1,s.sv=1,e=0;e<s.rowfix;e++)!1!==s.rows[e].visible&&s.rows[e].height;_scrollY=s._scrollY/s.sv,_scrollX=s._scrollX/s.sh},updateTreeColumn:function(){var e,t,r,o,l,i=this,n=i.colfix,a=i.rowfix;for(r=i.treeData[i.rowfix-1],e=1;e<a;e++)i.rows[e].visible=!1;for(t=n;t<i.colcnt;t++){for(o=!1,l=r[t].parent;l;){if(!0!==l.treeinfo.opened){o=!0;break}l=l.parent}!0===r[t].haschild&&r[t].depth>-1&&!0===r[t].treeinfo.opened&&r[t].depth<i.rowfix&&0==o&&(i.rows[r[t].depth+1].visible=!0),i.cols[t].visible=!o}for(i.sh=1,i.sv=1,e=0;e<i.rowfix;e++)!1!==i.rows[e].visible&&i.rows[e].height;i._fixedRowW>i._dwidth&&(i._fixedRowW=0,i.colfix=0),_scrollY=i._scrollY/i.sv,_scrollX=i._scrollX/i.sh},checkRequest:function(){var e,t,r,o=this,l=0,i=0;return o._scrollY>0&&(r=Math.max(30,o.thumbvheight),i=o._scrollY*(o._rect.trows-o._rect.frow-o._rect.crows)/(o._rect.cheight-r)),(o.__tpstart>0||o.__trow>o.rowcnt)&&(o.__tpstart>0&&o.__scr&&o.__scr_a&&(i=o.__scr_a._scrollY),e=(t=Math.floor(i))+o._rect.crows,(o.__tpstart>0&&o.__tpstart>t||o.__trow>o.__tpend&&o.__tpend<e)&&(l=o.__tpstart<o.__tpend||o.__scr_a&&o.__scr_a.nrow!=t?2:1)),{r:l,nrow:t,_scrollY:i}},draw_async:function(e){var t,r,o=this,l=(e.nrow,o._rect),i=o.renderers;for(o.validateRowHidden(),l.frow=0,l.fcol=0,e||(l.crows=0),l.ccols=0,o.colfix>=o.colcnt&&(o.colfix=0),o.clearCellChart(),i.header_fixed.html.width(""),i.header.html.width(""),i.data_fixed.html.width(""),i.data.html.width(""),i.header_fixed.colgroup.innerHTML="",i.header.colgroup.innerHTML="",i.data_fixed.colgroup.innerHTML="",i.data.colgroup.innerHTML="",o.__tpstart>0&&o._tsh*o.__tpstart,o._treerow>-1?o.updateTreeColumn():o._hastreecol&&o.updateTreeColumnV2(),o.mmax=0,o.rowcnt,o._treecol>-1&&o.treeData.length,l.fcol=0,l.dcol=0,t=0;t<o.colcnt;t++)(r=o.cols[t]).autowidth=0,r.columnwidth=0,r.$ow=0,!1!==r.visible&&(t<o.colfix?l.fcol++:l.dcol++);l.frow=o.draw_header(e),o._clean_renderers([i.header_fixed,i.header],l.frow),l.crows=o.draw_data(e),o._clean_renderers([i.data_fixed,i.data],l.crows)},_clean_renderers:function(e,t){$.each(e,(function(e,r){var o,l=r.renderers;if(l.length>t){for(o=t;o<l.length;o++)l[o].el.remove();l.splice(t,l.length-t)}}))},draw_header:function(e){var t=this,r=t._dataSet.header,o=t.hidden_rows_map,l=0,i={skiprowcnt:0,firstRow:1,rowcnt:0,is_data:0,skipy:0},n=new Array(t.colcnt);return $.each(r,(function(e,a){a=r[e],!1===t.rows[e].visible||o[e]||(t.draw_row(a,e,l,n,t.renderers.header_fixed,t.renderers.header,i),t._sync_row(l,t.renderers.header_fixed,t.renderers.header),i.firstRow=0,l++)})),t._table_merge(n),l},draw_data:function(e){var t,r,o=this,l=o._dataSet.data,i=o.hidden_rows_map,n=0,a=0,s={skiprowcnt:0,firstRow:1,rowcnt:0,is_data:1,skipy:0},c=0,d=o._regData.outerHeight(),h=new Array(o.colcnt);if(s.rowcnt=o.rowcnt,o._treecol>-1&&(s.rowcnt=o.treeData.length),o._scrollY>0){var m=Math.max(30,o.thumbvheight);a=o._scrollY*(o._rect.trows-o._rect.frow-o._rect.crows)/(o._rect.cheight-m)}return o.__tpstart>0&&(a-=o.__tpstart),l.length,$.each(l,(function(e,l){if(t=e+o.rowfix,!1!==o.rows[t].visible&&!i[t]){if(r=!0,o._treecol>-1){for(o.rows[t]._treeCollapsed=!1,cell=l[o._treecol],cellparent=cell.parent;cellparent;){if(cellparent.treeinfo&&!0!==cellparent.treeinfo.opened){r=!1;break}cellparent=cellparent.parent}o.rows[t]._treeCollapsed=!r}if(l&&l.length&&l[0].mcelltree&&l[0].mcelltree.length>0)for(cmi=0;cmi<l[0].mcelltree.length;cmi++){if(cmo=l[0].mcelltree[cmi],l[cmo].celltree&&l[cmo].celltree.parent)for(cmop=l[cmo].celltree.parent;cmop&&1==r;)0==cmop.celltree.opened&&(r=!1),cmop=cmop.celltree.parent;if(0==r)break}if(1==r&&a>0&&s.skipy<a?(r=!1,s.skipy+=1,s.skiprowcnt++):1==r&&(r=!0),r){if(o.draw_row(l,t,n,h,o.renderers.data_fixed,o.renderers.data,s),c+=o._sync_row(n,o.renderers.data_fixed,o.renderers.data),n++,c>d)return!1;s.firstRow=0}}})),o._table_merge(h),n},_table_merge:function(e){for(let t=0;t<e.length;t++)if(e[t]&&e[t].rowspan>1){for(let r=0;r<e[t].rows.length;r++)e[t].rows[r].remove();e[t].renderer.setAttribute("rowspan",e[t].rowspan)}},draw_row:function(e,t,r,o,l,i,n){var a,s,c=this,d=0,h=0;if($.each([l,i],(function(e,t){var o,l,i,n=t.renderers,a=(0==e||c._rect.fcol,0==e?c._rect.fcol:c._rect.dcol),s=0==e?"TH":"TD",d=t.tbody;if(n.length<=r)for(i=n.length;i<=r;i++){var h=c.$c("TR");d.appendChild(h),n.push({c:[],el:h})}if((o=n[r]).c.length<=a)for(i=o.c.length;i<a;i++)(l=c.$c(s)).classList.add("m_datagrid-cell"),o.el.appendChild(l),o.c.push(l);else for(i=o.c.length-1;i>=a;i--)(l=o.c[i]).remove(),o.c.splice(i,1)})),$.each(e,(function(a,m){if(!1!==c.cols[a].visible){var _=e[d].merged;n.is_data&&n.firstRow&&8&_&&(_|=1),bmaxwidth=!1,flborder=e[d].flborder;var u=a<c.colfix?l:i,f=a<c.colfix?h:h-c._rect.fcol;if(0==_||1&_||2&_?(mv=!0,(d>=c.colfix&&1&_&&4&_||2&_&&8&_)&&(mv=!1),renderer=c.drawCell(t,d,f,r,e,mv,_,flborder,u,n),h++):(mv=!1,renderer=c.drawCell(t,d,f,r,e,mv,_,flborder,u,n),h++),2&_||4&_)if(0==mv)s&&(s.colspan++,s.cols.push(renderer));else{if(s&&s.colspan>1){for(k=0;k<s.cols.length;k++)s.cols[k].remove();s.renderer.setAttribute("colspan",s.colspan)}s={renderer:renderer,di:h,dj:r,colspan:1,cols:[]}}else if(0==mv)o[h]&&(o[h].rowspan++,o[h].rows.push(renderer));else{if(o[h]&&o[h].rowspan>1){for(k=0;k<o[h].rows.length;k++)o[h].rows[k].remove();o[h].renderer.setAttribute("rowspan",o[h].rowspan)}o[h]={renderer:renderer,di:h,dj:r,rowspan:1,rows:[]}}d++}else d++})),s&&s.colspan>1){for(k=0;k<s.cols.length;k++)s.cols[k].remove();s.renderer.setAttribute("colspan",s.colspan)}var m=l.renderers[r],_=c._rect.fcol;if(m&&m.c.length>_){for(a=_;a<m.c.length;a++)m.c[a].remove();m.c.splice(_,m.c.length-_)}if(m=i.renderers[r],_=d-c._rect.fcol,m&&m.c.length>_){for(a=_;a<m.c.length;a++)m.c[a].remove();m.c.splice(_,m.c.length-_)}},sync_tables:function(e){this.sync_columns(e)},sync_columns:function(e){var t,r,o,l=this,i=l.renderers,n=0,a=[],s=[],c=0;if(o=l._sync_col_init(i.header_fixed,i.data_fixed,a,0),l._sync_col_init(i.header,i.data,s,l.colfix,o),l.columnfill){for(t=l.$ow(l.ctx[0]),r=0;r<a.length;r++)c+=a[r];for(r=0;r<s.length;r++)c+=s[r];t-13>c&&(n=Math.floor((t-13-c)/(a.length+s.length)))}l._sync_col(i.header_fixed,i.data_fixed,a,n,1,e),l._sync_col(i.header,i.data,s,n,2,e)},sync_rows:function(){var e=this,t=e.renderers;e._sync_rows(t.header_fixed,t.header),e._sync_rows(t.data_fixed,t.data)},_sync_rows:function(e,t){var r,o,l,i=e.renderers,n=t.renderers,a=i.length;for(l=0;l<a;l++)r=i[l],o=n[l],r.el.style.height=null,o.el.style.height=null,this._sync_row(l,e,t)},_sync_row:function(e,t,r){var o,l,i,n=t.renderers[e],a=r.renderers[e];return o=n?this.$oh(n.el):0,l=a?this.$oh(a.el):0,i=Math.max(o,l),n&&(n.el.style.height=i+"px"),a&&(a.el.style.height=i+"px"),i},_sync_col_init:function(e,t,r,o){var l,i,n,a,s,c,d=this,h=e.renderers,m=t.renderers,_=e.colgroup,u=t.colgroup;if(e.html.width(""),t.html.width(""),_.innerHTML="",u.innerHTML="",h.length&&m.length)for(i=h[h.length-1],n=m[0],l=0;l<i.c.length;l++)a=d.cols[o],i.c[l].cl&&i.c[l].cl.charts?(c=s=i.c[l].cl.charts.width||120,a&&(s=Math.max(a.$ow||0,s),a.$ow=s)):n.c[l].cl&&n.c[l].cl.charts?(c=s=n.c[l].cl.charts.width||120,a&&(s=Math.max(a.$ow||0,s),a.$ow=s)):(s=d.$ow(i.c[l]),c=n.c[l]?d.$ow(n.c[l]):0,a&&0==a.autowidth&&a.columnwidth?s=a.columnwidth:(s=Math.ceil(Math.max(s,c)),a&&(s=Math.max(a.$ow||0,s),a.$ow=s))),r.push(s),o++;return o},_sync_col:function(e,t,r,o,l,i){var n,a,s,c,d,h=e.colgroup,m=t.colgroup,_=e.renderers,u=t.renderers,f=[],p=[],g=0;if(_.length&&u.length){for(a=_[_.length-1],u[0],n=0;n<a.c.length;n++)g+=d=r[n]+o,s=this.$c("COL"),f.push(s),c=this.$c("COL"),p.push(c),s.setAttribute("width",d+"px"),c.setAttribute("width",d+"px");h.append.apply(h,f),m.append.apply(m,p);var v=e.html.width(),w=t.html.width(),b=g;b!=v&&e.html.width(b),b!=w&&t.html.width(b)}},validateRowHidden:function(){var e,t,r,o,l,i=this;if(0!=i._invalidateData&&(e=i._treecol>-1?i.treeData:i._dataSet)){for(r=0;r<e.header.length;r++)t=e.header[r],i.rows[r].vcr=!0;for(o=e.header.length,r=0;r<e.data.length;r++){if(l=!0,(t=e.data[r])&&t.length>0&&t[0].mcelltree&&t[0].mcelltree.length>0)for(cmi=0;cmi<t[0].mcelltree.length;cmi++)if(cmo=t[0].mcelltree[cmi],t[cmo].celltree&&t[cmo].celltree.parent)for(cmop=t[cmo].celltree.parent;cmop&&1==l;)0==cmop.celltree.opened&&(l=!1),cmop=cmop.celltree.parent;i.rows[o+r].vcr=l}i._invalidateData=!1}},refreshSelect:function(){var e=this;e.selectedItems.length,$.each(e.renderers,(function(t,r){var o,l,i,n,a=r.renderers;for(o=0;o<a.length;o++)for(l=0;l<a[o].c.length;l++)n=(i=a[o].c[l]).cl.selected,"row"==e.selectionmode&&1==e.rows[i.rowIndex].selected&&(n=!0),1==n?i.classList.add("m-datagrid-cell-selected"):i.classList.remove("m-datagrid-cell-selected")}))},$c:function(e){return document.createElement(e)},$oh:function(e){var t=window.getComputedStyle(e),r=parseFloat(t.marginTop)+parseFloat(t.marginBottom);return Math.ceil(e.offsetHeight+r)},$ow:function(e){var t=window.getComputedStyle(e),r=parseFloat(t.marginLeft)+parseFloat(t.marginRight);return Math.ceil(e.offsetWidth+r)},$offset:function(e){var t=e.getBoundingClientRect(),r=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+o,left:t.left+r}},drawCell:function(e,t,r,o,l,i,n,a,s,c){var d,m,_,u,f,p,g,v,w,b,x,y,M=this,T=l[t],D=t>0?l[t-1]:null,I=l[t+1],S=T.text,k=T.stylename,R=T.tex_theight,L=M.styles[k],C={},E={},P=null,Y=null,X=!!(M.rowfix<e+1&&M._treecol>-1&&t==M._treecol&&T.treeinfo||M.rowfix>e&&M._treerow>-1&&!0===T.haschild),H=!(1!=X||!(T.children&&T.children.length>0||!0===T.haschild)),A=null,B=null,V=null;T.r=e,T.c=t;var j,O,U=r,F=o,N=!c.is_data;if(j=s.renderers,O=s.tbody[0],j.length<=F)for(e=j.length;e<=F;e++){var W=M.$c("TR");O.appendChild(W),j.push({c:[],el:W})}if(j[F].c.length<=U)for(e=j[F].c.length;e<=U;e++)(P=M.$c("td")).classList.add("m_datagrid-cell"),j[F].el.appendChild(P),j[F].c.push(P);(P=j[F].c[U]).removeAttribute("rowspan"),P.removeAttribute("colspan"),P.parentNode!=j[F].el&&(0==U?j[F].el.prepend(P):j[F].c[U-1].after(P)),P.rowIndex=e,P.colIndex=t,d=P.cl,P.cl=T,v=T.type||M.cols[t].type,j.v=i,P._cn&&P.classList.remove(P._cn),(!d||d&&d.celltype!=v)&&(P.dobj=null,P.rhandle=null,P.innerHTML="");var G=P.rhandle;if(N){if(!G){var z=0,K=0;P.rhandle=G=M.$c("DIV"),G.classList.add("m-datagrid-rhandle"),P.append(G);const e=function(e){z=e.clientX;const o=window.getComputedStyle(P);K=parseInt(o.width,10),G.classList.add("m-datagrid-resizing"),document.addEventListener("mousemove",t),document.addEventListener("mouseup",r)},t=function(e){const t=e.clientX-z;var r="header_fixed"==s.name?M.renderers.data_fixed:"header"==s.name?M.renderers.data:null,o=P.attributes.colspan,l=0;if(r){o&&parseInt(o)>1&&(l=parseInt(o)-1);var i=s.colgroup.children[U+l],n=r.colgroup.children[U+l];i.setAttribute("width",K+t+"px"),n.setAttribute("width",K+t+"px")}},r=function(){G.classList.remove("m-datagrid-resizing"),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",r),M.validate_scroll(),M.sync_rows()};G.addEventListener("mousedown",e)}}else G&&(G.remove(),P.rhandle=null);if(L?(E.paddingRight=L.paddingright||2,E.paddingLeft=L.paddingleft||2,E.paddingTop=L.paddingtop||2,E.paddingBottom=L.paddingbottom||2):(E.paddingRight=M.pad[2],E.paddingLeft=M.pad[1],E.paddingTop=M.pad[0],E.paddingBottom=M.pad[3]),X&&(E.paddingLeft+=M.treeIndent*((T.treeinfo.nd?0:T.treeinfo.depth)||0)),T.celltree&&!T.celltree.nd&&(E.paddingLeft+=M.treeIndent*T.celltree.depth),P._cn=null,C.whiteSpace="nowrap",C.overflowWrap="normal",L){switch(x=L.bordercolor,y=L.borderoutcolor,b=L.cssname,w=parseInt(L.textalign)){case 1:case 4:case 7:C.textAlign="left";break;case 2:case 5:case 8:C.textAlign="center";break;case 3:case 6:case 9:C.textAlign="right",E.paddingLeft=0}switch(w){case 1:case 2:case 3:C.verticalAlign="top";break;case 4:case 5:case 6:C.verticalAlign="middle";break;case 7:case 8:case 9:C.verticalAlign="bottom"}p=L.backcolor||"#f1f1f1",C.background=p,C.fontSize=Number(L.fontsize)+"px",C.color=L.forecolor||"initial",(x||y)&&(C.borderStyle="solid",y&&(C.borderTopColor=y,C.borderTopWidth=L.borderouttop+"px"),0==L.borderoutbottom?h+=1:y&&(C.borderBottomColor=y,C.borderBottomWidth=L.borderoutbottom+"px"),I&&I.stylename==k||y&&(C.borderRightColor=y,C.borderRightWidth=L.borderoutright+"px"),D&&D.stylename==k?0==L.borderleft&&0==L.borderright?K+=1:x&&(C.borderLeftColor=x,C.borderLeftWidth=Math.max(L.borderleft,L.borderright)+"px"):0==L.borderoutleft?K+=1:y&&(C.borderLeftColor=y,C.borderLeftWidth=L.borderoutleft+"px")),L.fontstyle=Number(L.fontstyle),C.fontWeight="normal",C.fontStyle="normal",C.textDecoration="none",0==isNaN(L.fontstyle)&&(C.fontWeight=L.fontstyle&IG$.fontStyle.P_BOLD?"bold":"normal",C.fontStyle=L.fontstyle&IG$.fontStyle.P_ITALIC?"italic":"normal",C.textDecoration=L.fontstyle&IG$.fontStyle.P_UNDERLINE?"underline":"none");var q=M.cols[t];0==q.autowidth&&(!L.autowidth&&L.columnwidth?q.columnwidth=Math.max(L.columnwidth,q.columnwidth):q.autowidth=-1),!L.autowidth&&L.columnwidth&&L.wordwrap&&(C.whiteSpace="pre-wrap",C.overflowWrap="break-word",E.lineHeight=0)}if(A||1==X||T.celltree,l[t].charts)M.addCellChart(l[t].charts,P);else switch(v){case"checkbox":case"boolean":P.dobj&&(P.dobj.remove(),P.dobj=null),"true"!=S&&"false"!=S||(T.checked="true"==S,T.text=S=""),(Y=P.dobj=M.$c("INPUT")).setAttribute("type","checkbox"),Y.setAttribute("value",S),Y.innerHTML=S||"&nbsp;",P.append(Y),Y.style.visibility="visible",Y.setAttribute("checked",T.checked),Y.addEventListener("click",(function(e){e.stopPropagation(),T.checked=Y.attr("checked")}));break;case"radio":P.dobj&&(P.dobj.remove(),P.dobj=null),(Y=P.dobj=M.$c("INPUT")).setAttribute("type","radio"),Y.setAttribute("value",S),Y.innerHTML=S||"&nbsp;",P.append(Y),Y.style.visibility="visible",Y.setAttribute("checked",T.checked);break;case"action":if(M.columns&&M.columns[t].items)for(U=0;U<M.columns[t].items.length;U++)M.drawCellAction(M.columns[t].items[U],P);break;default:for(m in P.dobj?m=(Y=P.dobj).tcss:((Y=P.dobj=Y=M.$c("DIV")).classList.add("m-cell-text"),P.append(Y)),tl=E.paddingLeft||0,_=1==X&&1==H||T.celltree&&1==T.celltree.haschild?{marginLeft:"0px",marginTop:(E.paddingTop||0)+"px",marginRight:(E.paddingRight||0)+"px",marginBottom:(E.paddingBottom||0)+"px"}:{marginLeft:(E.paddingLeft||0)+"px",marginTop:(E.paddingTop||0)+"px",marginRight:(E.paddingRight||0)+"px",marginBottom:(E.paddingBottom||0)+"px"},0!==E.lineHeight&&(_.lineHeight=R+"px"),_.whiteSpace=C.whiteSpace,_.overflowWrap=C.overflowWrap,S&&"<"==S.charAt(0)&&">"==S.charAt(S.length-1)||(S=(S||"").replace(" ","&nbsp;")),b=b?b.replace("${value}",S):null,Y.style.visibility="visible",Y.innerHTML=S||" ",Y.tcss=_,_)Y.style[m]=_[m]}if(b&&(P._cn=b,P.addClass(b)),3==T.title||5==T.title?(P.addClass("igc-i-link"),P._b_link=1):P._b_link&&(P.removeClass("igc-i-link"),P._b_link=0),4==T.title||5==T.title?(P._drm&&(P._drm.remove(),P._drm=null),(u=M.$c("DIV")).classList.add("igc-dgs-drill"),P.append(u),P._drm=u,$.each({position:"absolute",left:"right"==C.textAlign?0:"initial",right:"right"==C.textAlign?"initial":0},(function(e,t){u.style[e]=t})),u.addEventListener("mousedown",(function(e){})),u.addEventListener("mouseup",(function(e){}))):P._drm&&(P._drm.remove(),P._drm=null),1==X&&1==H||T.celltree&&1==T.celltree.haschild){P.treeicon&&(P.treeicon.remove(),P.treeicon=null),P.treeicon=B=M.$c("DIV"),B.classList.add("m-datagrid-tree-box"),B.innerHTML="<div id='treeicon' class='m-datagrid-tree-icon'></div><div id='treetext' class='m-datagrid-tree-text'></div>",A=B.querySelector("#treeicon"),V=B.querySelector("#treetext"),P.append(B);const e=function(){if(M._invalidateData=!0,T.celltree){if(T.celltree.opened=!T.celltree.opened,M.validateRowHidden(),M._theight=0,T.celltree.opened&&T.celltree.h)return M.fireEvent("hierarchy",{cell:T,row:l}),!1;M.redraw()}else T.treeinfo.opened=!T.treeinfo.opened,M._get_rows(),M.draw();return!1};A.removeEventListener("click",e),A.addEventListener("click",e),V.innerHTML=Y.innerHTML,Y.style.visibility="hidden"}else P.treeicon&&(P.treeicon.remove(),P.treeicon=null,Y.style.visibility="visible");for(m in(1==X&&1==H||T.celltree&&1==T.celltree.haschild)&&(T.celltree?(g=!0===T.celltree.opened,B.style.left=E.paddingLeft+"px",B.style.top=E.paddingTop+"px"):(g=!0===T.treeinfo.opened,B.style.left=E.paddingLeft+"px",B.style.top=E.paddingTop+"px"),A.classList.remove("m-datagrid-treeplus"),A.classList.remove("m-datagrid-treeminus"),A.classList.add(0==g?"m-datagrid-treeplus":"m-datagrid-treeminus")),T.menus&&T.menus.active&&!M.hidemenu?(P.menuobj?((u=P.menuobj).unbind("mouseover"),u.unbind("mouseout"),u.unbind("mousedown"),u.unbind("mouseup")):(u=$("<div class='m-datagrid-menu'></div>").appendTo(P),P.menuobj=u),u.bind({mouseover:function(e){return $(this).addClass("m-datagrid-menu-focus"),!1},mouseout:function(e){return $(this).removeClass("m-datagrid-menu-focus"),!1},mousedown:function(e){return e.stopPropagation(),!1},mouseup:function(e){var t,r,o=M.owner,l=$(this).offset(),i=$(o).offset(),n=(M._df,M._dfc),a=l.left-i.left,s=l.top-i.top+$(this).height();return t=n.__af=n.__af||{},0==M.enablecontextmenu||(e.stopPropagation(),$.each(["cmd_asc","cmd_desc","cmd_sort","b_rank","cmd_remove","cmd_filter","cmd_style"],(function(e,t){var r=0;T.menus.items[t]&&(r=1),n[t][r?"show":"hide"]()})),n.d_rank.hide(),t[T.c]?n.d_filter.show():n.d_filter.hide(),r=t[T.c]=t[T.c]||{},n.f_opt&&n.f_opt.val(r.op||(3==T.position?"between":"_like_")),n.sval1&&n.sval1.val(r.val1||""),n.sval2&&n.sval2.val(r.val2||""),n.sval2["between"==n.f_opt.val()?"show":"hide"](),$.each(["t_sum","t_avg","t_min","t_max","t_rank","t_pot","t_cumul","t_incr","t_diff"],(function(e,t){var r=n[t];1==T.position||2==T.position?r[/(t_sum|t_avg|t_min|t_max)/.test(t)?"show":"hide"]():3==T.position&&r[/(t_min|t_max)/.test(t)?"hide":"show"]()})),M._show_menu(!0),a+n.dmain.width()>$(o).width()&&(a=$(o).width()-n.dmain.width()),M.context.cell=T,n.dmain.css({top:s,left:a})),!1}})):P.menuobj&&(P.menuobj.remove(),P.menuobj=null),e==M.rowfix-1&&M.__gflt&&M.__gflt[t]?P.ficon?f=P.ficon:(f=$("<div class='m-datagrid-filter'></div>").appendTo(P),P.ficon=f,f.css({position:"absolute",right:E.paddingRight+(P.menuobj?16:0),top:E.paddingTop})):P.ficon&&(P.ficon.remove(),P.ficon=null),P.cbg=C.background,1==("row"==M.selectionmode&&1==M.rows[e].selected||T.selected)&&(C.background=M.selcolor),pcss=P.cssobj,P.cssobj=C,C)P.style[m]=C[m];return P},drawCellAction:function(e,t){var r,o=this;e.type,(r=o.$c("button")).innerHTML=e.name,t.append(r),r.addEventListener("click",(function(){return e.action&&e.action(o,t),!1}))},getRendererByPt:function(e,t){var r,o,l,i,n,a,s,c=this,d=c.renderers,h=c.$offset(c.ctx[0]),m=e-h.left,_=t-h.top,u=null;if($.each(d,(function(e,t){var r=t.html,o=r.offset();if(o.top-h.top<_&&_<o.top-h.top+r.outerHeight()&&o.left-h.left<m&&m<o.left-h.left+r.outerWidth())return s=t,!1})),s&&s.renderers.length){var f=s.renderers;for(r=0;r<f.length;r++){if(i=f[r].el,(n=c.$offset(i)).top-h.top<_&&_<n.top-h.top+c.$oh(i))for(o=0;o<f[r].c.length;o++)if(l=f[r].c[o],(a=c.$offset(l)).left-h.left<m&&m<a.left-h.left+c.$ow(l)){u=l;break}if(u)break}}return u},onTouchStart:function(e,t){var r,o=this,l=t.originalEvent;t&&(t.stopPropagation(),1==l.touches.length&&(o.regv||o.regh)?(r=l.touches[0],o.thumbBtnDown=!0,o.sx=o._scrollX,o.sy=o._scrollY,o._isScrolling=!0,o.thumbMouseSX=r.pageX,o.thumbMouseSY=r.pageY):l.touches.length>0?(r=l.touches[0],o.thumbBtnDown=!1,o.mouseDownHandler(r.pageX,r.pageY)):(o.thumbBtnDown=!1,o.mouseUpHandler(t.pageX,t.pageY,!1,!1)))},onTouchEnd:function(e,t){var r=this;t&&(t.stopPropagation(),r.thumbBtnDown||r.mouseUpHandler(t.pageX,t.pageY,!1,!1),r.thumbBtnDown=!1)},onTouchMove:function(e,t){var r,o,l,i,n=this,a=t.originalEvent;a&&a.touches.length>0&&(t.stopPropagation(),r=a.touches[0],n.thumbBtnDown&&n.thumbMouseSX>-1&&n.thumbMouseSY>-1?(o={x:n.thumbMouseSX,y:n.thumbMouseSY},l={x:r.pageX,y:r.pageY},n.regv&&n.regh?i=Math.abs(l.x-o.x)>Math.abs(l.y-o.y)?"h":"v":n.regv?i="v":n.regh&&(i="h"),n.scrollHandler(l,i)):n.mouseMoveHandler(r.pageX,r.pageY))},onMouseDown:function(e,t){var r,o,l,i,n,a=this,s=a.owner,c=!1;if(t&&!a.resizeCol){var d=!(!window.Ext||!Ext.dd.DragDropManager.dragCurrent||1!=Ext.dd.DragDropManager.dragCurrent.dragging);if(0==a._isScrolling&&0==a._isDragging&&!0!==d)if(1==t.which){function h(t){return a.onMouseMove(e,t),!1}a.editing&&(n=a.getRendererByPt(t.pageX,t.pageY))==a.editing?c=!0:t.stopPropagation(),a.mouseDownHandler(t.pageX,t.pageY),$(document).bind("mousemove",h).bind("mouseup",(function t(r){return a.onMouseUp(e,r),$(document).unbind("mousemove",h).unbind("mouseup",t),!1}))}else if(3==t.which){if(0==a.enablecontextmenu)return;var m,_=$(s).offset();if(t.stopPropagation(),r=t.pageX-_.left,o=t.pageY-_.top,l=[],a.selectedItems&&a.selectedItems.length<2&&(n=a.getRendererByPt(t.pageX,t.pageY))&&(a.removeAllSelection(),cl=n.cl,cl.selected=!0,a.rows[n.rowIndex].selected=!0,a.selectedRows.push(a.rows[n.rowIndex]),a.selectedItems.push(cl),a.refreshSelect()),ig$.$l_<5&&a.selectedItems&&a.selectedItems.length>0&&(l.push({disp:IRm$.r1("B_CLIPBOARD"),name:"CMD_CLIPBOARD",class:l.length>0?"separator":null}),a.sheetoption&&a.sheetoption.model.detailview.length>0&&(m=a.sheetoption.model.detailview,n=a.getRendererByPt(t.pageX,t.pageY))))for(i=0;i<m.length;i++)a.sheetoption.mL(m[i],n)&&l.push({disp:m[i].name,name:"detail:"+m[i].uid});l.length>0&&(a.prepMenu(l),a.context.cell=null,$(s).showContextMenu&&$(s).showContextMenu(a.context,r,o))}}return c},onMouseMove:function(e,t){var r=this;if(t&&!r.resizeCol){var o=!(!window.Ext||!Ext.dd.DragDropManager.dragCurrent||1!=Ext.dd.DragDropManager.dragCurrent.dragging);0==r._isScrolling&&0==r._isDragging&&!0!==o&&(t.stopPropagation(),r.mouseMoveHandler(t.pageX,t.pageY))}},onMouseUp:function(e,t){t&&!this.resizeCol&&this.mouseUpHandler(t.pageX,t.pageY,t.which,t.ctrlKey,t.shiftKey)},onMouseDblClick:function(e,t){t&&!this.resizeCol&&this.mouseDblClickHandler(t.pageX,t.pageY,t.which,t.ctrlKey,t.shiftKey)},mouseDownHandler:function(e,t){var r=this;if(1!=r._isScrolling&&1!=r._isDragging&&1!=r.resizeCol){r._scrollSX=r._scrollX,r._scrollSY=r._scrollY,r.buttondown=!0,r._mouseSX=e,r._mouseSY=t,r.prevRenderer=r.getRendererByPt(e,t),r.startRenderer=r.prevRenderer,r.mouseAction=0;var o=(new Date).getTime();r.doubletap=!1,r._mouseDownTimer&&o-r._mouseDownTimer<800&&(r.doubletap=!0),r._mouseDownTimer=o}},mouseMoveHandler:function(e,t){var r,o,l,i,n,a=this,s=!1,c=a.startRenderer;if(1!=a._isScrolling&&1!=a._isDragging)if("scroll"==a.mouseMode)0==a.mouseAction&&1==a.buttondown&&(a._rect.tcols>a._rect.ccols||a._rect.trows>a._rect.crows)&&(r=e-a._mouseSX,o=t-a._mouseSY,a.setOffset(a,r,o,e,t));else if("select"==a.mouseMode&&(Math.abs(a._mouseSX-e)>5||Math.abs(a._mouseSY-t)>5)&&0==a.mouseAction&&1==a.buttondown&&(renderer=a.getRendererByPt(e,t),renderer&&c)){if(n=renderer.cl,renderer==c&&(1!=a.selectedItems.length||1==a.selectedItems.length&&a.selectedItems[0]!=n))a.removeAllSelection(),n.selected=!0,a.rows[renderer.rowIndex].selected=!0,a.selectedRows.push(a.rows[renderer.rowIndex]),a.selectedItems.push(n),s=!0;else if(a.prevRenderer!=renderer){var d=Math.min(c.rowIndex,renderer.rowIndex),h=Math.min(c.colIndex,renderer.colIndex),m=Math.max(c.rowIndex,renderer.rowIndex),_=Math.max(c.colIndex,renderer.colIndex);for(a.removeAllSelection(),l=d;l<=m;l++)if(!1!==a.rows[l].visible&&!0!==a.rows[l]._treeCollapsed){for(i=h;i<=_;i++)if(!1!==a.cols[i].visible){var u=this._treecol>-1||this._treerow>-1?a.treeData:a._dataSet,f=(l<a.rowfix?u.header[l]:u.data[l-a.rowfix])[i];f.selected=!0,a.selectedItems.push(f)}a.selectedRows.push(a.rows[l])}s=!0}1==s&&a.refreshSelect(),a.prevRenderer=renderer}},mouseUpHandler:function(e,t,r,o,l){var i,n,a,s=(new Date).getTime(),c=0,d=this;if(1!=d._isScrolling&&1!=d._isDragging){if("scroll"==d.mouseMode)0==d.mouseAction&&s-d._mouseDownTimer<500&&Math.abs(d._mouseSX-e)<10&&Math.abs(d._mouseSY-t)<10&&(i=d.getRendererByPt(e,t))&&(a=i.cl,d.removeAllSelection(),a.selected=!0,d.selectedItems.push(a),d.rows[i.rowIndex].selected=!0,d.selectedRows.push(d.rows[i.rowIndex]),d.refreshSelect());else if("select"==d.mouseMode){if(i=d.getRendererByPt(e,t))if(d.editing!=i&&d.endEdit(),3==r);else{if(d._mouseUpTimer>-1&&s-d._mouseUpTimer<500&&d.mouseUpRenderer&&d.mouseUpRenderer==i||s-d._mouseDownTimer<500&&(c=1,!1!==d.itemClick(i)&&d.fireEvent("itemclick",i)),a=i.cl,o&&1==c){if(a.selected=!a.selected,d.rows[i.rowIndex].selected=!d.rows[i.rowIndex].selected,1==a.selected)d.selectedItems.push(a),d.selectedRows.push(d.rows[i.rowIndex]);else{for(n=0;n<d.selectedItems.length;n++)if(d.selectedItems[n]==a){d.selectedItems.splice(n,1);break}if("row"==d.selectionmode)for(n=0;n<d.selectedRows.length;n++)if(d.selectedRows[n]==d.rows[i.rowIndex]){d.selectedRows.splice(n,1);break}}d.refreshSelect()}c>0?((c>1||!o)&&d.removeAllSelection(),a.selected=!0,d.selectedItems.push(a),d.rows[i.rowIndex].selected=!0,d.selectedRows.push(d.rows[i.rowIndex]),d.refreshSelect()):d.selectedItems.length>0&&d.fireEvent("selectionchanged")}else d.endEdit();d.mouseUpRenderer=i,d._mouseUpTimer=s}d.buttondown=!1,d._mouseSX=-1,d._mouseSY=-1}},mouseDblClickHandler:function(e,t,r,o,l){var i=this,n=i.getRendererByPt(e,t);i._mouseUpTimer=-1,!1!==i.itemDblClick(n)&&i.fireEvent("itemdblclick",n)},fireEvent:function(e,t){this.ctx.trigger(e,[t])},onMouseWheel:function(e,t,r){void 0===r&&(r=t.originalEvent?-.1*t.originalEvent.deltaY:0);var o=this,l=(o._scrollX,o._scrollY,Math.abs(r));o.__scr||(l=l>15?1.5*l:19,l=r>0?-l:l,o.endEdit(),o._rect.crows&&o._rect.trows>o._rect.crows&&o.setOffset(o,0,void 0,0,0,l>0?10:-10))},itemDblClick:function(e){var t=this;t._editable&&!1!==t.cols[e.colIndex]._editable&&t.beginEdit(e)},beginEdit:function(e){},createEditor:function(){},itemClick:function(e){},removeAllSelection:function(){var e,t=this,r=t.selectedItems,o=t.selectedRows;for(e=r.length-1;e>=0;e--)r[e].selected=!1;for(e=o.length-1;e>=0;e--)o[e].selected=!1;t.selectedItems=[],t.selectedRows=[]},onThumbMouseDown:function(e,t,r){var o,l=this;return t&&(t.preventDefault(),t.stopImmediatePropagation(),o=l.gl_pos(t),l.dt1=(new Date).getTime(),l.thumbBtnDown=!0,l.thumbMouseSX=o.pageX,l.thumbMouseSY=o.pageY,l.sx=l._scrollX,l.sy=l._scrollY,l._isScrolling=!0,l.scrolltarget=e.eventtarget,l.regGlobalEvent(r)),!1},onThumbMouseUp:function(e,t,r){var o=this,l=o,i=(new Date).getTime();if(t&&o.dt1&&o.dt1>-1&&i-o.dt1<200){var n,a=$(e),s=a.offset(),c=t.pageX-s.left,d=t.pageY-s.top,h=IG$.j$ext._w(a),m=IG$.j$ext._h(a),_=o._scrollX,u=o._scrollY;o.dt1=-1,event.stopPropagation(),o.ge&&($(document).unbind(o.ge),o.ge=null),o.getc&&($(o.owner).unbind(o.getc),o.getc=null),o.glMouseUp(t,r),l.thumbBtnDown=!1,l.thumbMouseSX=-1,l.thumbMouseSY=-1,"v"==r?(n=d>m/2?.1:-.1,u=(u+=Math.min(l._theight-l._cheight,.1*l._cheight)*n)<0?0:Math.min(u,l._theight-l._cheight)):"h"==r&&(n=c>h/2?.1:-.1,_=(_+=Math.min(l._twidth-l._dwidth,.1*(l._dwidth-l._fixedRowW))*n)<0?0:Math.min(_,l._twidth-l._dwidth)),l._scrollX==_&&l._scrollY==u||(l._scrollX=_,l._scrollY=u,l.updateThmbPos(),o.do_scroll(r))}},setScrollTop:function(e){this.endEdit(),this.on_thumbTimer()},setScrollRow:function(e){var t,r=this,o=Math.min(e+r.rowfix,r.rows.length),l=0;for(t=r.rowfix;t<o;t++)l+=r.rows[t].height;r.setScrollTop(l*r.sv)},setScrollBtm:function(){var e=this,t=(e._theight-e._cheight)*e.sv+1;e.setScrollTop(t)},onhtmlscroll:function(e,t,r){var o,l=this;t.stopPropagation(),"v"==r?(o=$(e).scrollTop(),o*=l.sv,l._scrollY=o):"h"==r&&(o=$(e).scrollLeft(),o*=l.sh,l._scrollX=o),l.endEdit(),l.do_scroll(r)},onScrollMouseClick:function(e,t,r){var o=this;t.stopPropagation(),o.endEdit();var l,i,n,a=o._scrollX,s=o._scrollY,c=0,d=t.pageX,h=t.pageY,m="v"==r?o._regVscrollThmb.offset():o._regHscrollThmb.offset();if(d=(n=o.gl_pos(t)).pageX,h=n.pageY,"v"==r){if(c=m.top>h?-1:1,s+=o.thumbvheight*c,i=IG$.j$ext._h(o._regVscroll),s=Math.min(i-o.thumbvheight,Math.max(0,s)),o._scrollY==s)return;o._scrollY=s}else{if(c=m.left>d?-1:1,a+=o.thumbhwidth*c,l=IG$.j$ext._w(o._regHscroll),a=Math.min(l-o.thumbhwidth,Math.max(0,a)),o._scrollX==a)return;o._scrollX=a}o.updateThmbPos(),o.do_scroll(r)},on_thumbTimer:function(e){var t,r,o,l=this;if("h"==e)return o=Math.max(30,l.thumbhwidth),t=l._scrollX*(l._rect.twidth-l._rect.cwidth)/(l._rect.cwidth-o),l._regData_hd.css({left:-t}),void l._regData_og.css({left:-t});if((t=l._scrollY/l.sv)>l._theight-l._cheight&&l.fireEvent("scrollend",null),r=l.checkRequest(),l.__scr=2==r.r?1:0,2==r.r)return l.__scr_a={nrow:r.nrow,_scrollY:r._scrollY},void l.do_scroll("v",r);var i=l.draw_data();l._clean_renderers([l.renderers.data_fixed,l.renderers.data],i),l.sync_tables(2),l.validate_scroll()},updateThmbPos:function(){var e,t,r,o,l=this,i=l._rect;l.regh&&(e=i.cwidth,r=Math.max(30,l.thumbhwidth),l._regHscrollThmb.css({left:Math.min(l._scrollX,e-r)})),l.regv&&(t=i.cheight,o=Math.max(30,l.thumbvheight),l._regVscrollThmb.css({top:Math.min(l._scrollY,t-o)}))},setOffset:function(e,t,r,o,l,i){var n,a,s=this,c=e._rect,d=e._scrollX,h=e._scrollY,m=(s._regVscroll,d),_=h;if(e.sh<1&&Math.abs(t)>5&&(a=Math.max(30,e.thumbhwidth),m=Math.min(c.cwidth-a,Math.max(0,d+t))),e.sv<1&&void 0===r?(a=Math.max(30,e.thumbvheight),n=i*e.sv*21,(_=Math.min(c.cheight-a,Math.max(0,e._scrollY+n)))<0&&(_=0)):e.sv<1&&Math.abs(r)>5&&(a=Math.max(30,e.thumbvheight),_=Math.min(c.cheight-a,Math.max(0,h+r))),_!=h){var u=s.checkRequest();if(s.__scr=2==u.r?1:0,2==u.r)return s.__scr_a={nrow:u.nrow,_scrollY:u._scrollY},void e.do_scroll("v",u)}m==d&&_==h||(e._scrollX=m,e._scrollY=_,e.updateThmbPos(),m!=d&&e.do_scroll("h"),_!=h&&e.do_scroll("v"))},getCellValue:function(e,t){var r=null,o=this.appDataSet;return o&&o.length>e&&o[e].length>t&&(r=o[e][t]),r},setCellValue:function(e,t,r){var o=this.appDataSet;o&&o.length>e&&o[e].length>t&&(o[e][t].text=r)},addRow:function(){var e,t,r=this,o=r.appDataSet,l=[],i=[],n=o.length;for(r.endEdit(),r._invalidateData=!0,r._theight=0,e={index:n},r.rows.push(e),t=0;t<r.colcnt;t++)l.push("");r.getRowDataProc(l,i),o.push(i),this.rowcnt=o.length,r.updateThmbPos(r),r.redraw()},removeRow:function(e){var t=this,r=t.appDataSet;t.endEdit(),t._invalidateData=!0,r.splice(e,1),t.rows.splice(e,1),this.rowcnt=r.length,t.updateThmbPos(),t.redraw()},getRowDataProc:function(e,t){var r,o=this,l=o.columns;for(r=0;r<l.length;r++)cell={text:e[l[r].field]||null,mrow:0,mcol:0,merged:0,stylename:l[r].stylename||"normal",chart:null,position:-1,code:null,value:null,index:-1,title:-1,pindex:-1},cell.stylename&&o.styles[cell.stylename]&&(st=o.styles[cell.stylename],"numeric"==l[r].type&&st.formatstring&&(cell.code=cell.text,cell.text=o.formatString(cell.code,st.formatstring))),t.push(cell)},getRowData:function(e,t){var r;for(r=0;r<e.length;r++)row=[],this.getRowDataProc(e[r],row),t.push(row)},is_rendered:function(e){var t=$(e)[0];if(t&&(1!=t.nodeType||t==document.body))return!0;if(t&&t.currentStyle&&"none"!=t.currentStyle.display&&"hidden"!=t.currentStyle.visibility)return this.is_rendered(t.parentNode);if(t&&window.getComputedStyle){var r=document.defaultView.getComputedStyle(t,null);if("none"!=r.getPropertyValue("display")&&"hidden"!=r.getPropertyValue("visibility"))return this.is_rendered(t.parentNode)}return!1},check_rendered:function(e){var t=$(e)[0],r=e;if(1!=t.nodeType||t==document.body)return null;if(t.currentStyle&&("none"==t.currentStyle.display||"hidden"==t.currentStyle.visibility))return r;if(window.getComputedStyle){var o=document.defaultView.getComputedStyle(t,null);if("none"==o.getPropertyValue("display")||"hidden"==o.getPropertyValue("visibility"))return r}else if(r=this.check_rendered(t.parentNode))return r;return r},browser:function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}return e}};
function qigridview(t){this.createComponent(),this.editable=!0,this.enablecontextmenu=!1,this.scrollbar="image",this.drawmode=t&&t.drawmode||"req",this.columnfill=!(!t||1!=t.columnfill),this.processRowFunction=t?t.processRowFunction:null,this.initStyles(),t&&this.merge(t)}qigridview.prototype=new IG$.V$grid,qigridview.prototype.constructor=qigridview,qigridview.prototype.parent=IG$.V$grid.prototype,qigridview.prototype.initStyles=function(){var t;this.styles={normal:{name:"normal",fontsize:11,color:0,backcolor1:16777215,padtop:4,padbottom:4,padright:2,padleft:2,formatstring:null,textalign:"4"}},(t=this.addStyle("fixedrow")).padtop=2,t.padbottom=2,t.textalign="5",t.backcolor1=874901,t.color=16777215,t=this.addStyle("fixedcolumn"),(t=this.addStyle("numeric")).formatstring="#,###",t.textalign="6",(t=this.addStyle("boolean")).textalign="5",(t=this.addStyle("grandtotal","numeric")).backcolor1=16645822,(t=this.addStyle("subtotal","numeric")).backcolor1=16645822,(t=this.addStyle("grandtotallabel")).backcolor1=16645822,(t=this.addStyle("subtotallabel")).backcolor1=16645822},qigridview.prototype.addStyle=function(t,e){var i,a,o=this,n=o.styles[e];for(a in n||(n=o.styles.normal),i={name:t},n)"name"!=a&&(i[a]=n[a]);return o.styles[i.name]=i,i},qigridview.prototype.merge=function(t){var e,i=t;for(e in i)void 0!==this[e]&&(this[e]=i[e])},qigridview.prototype.setColumns=function(t,e,i){var a,o,n,l,r=this,d=[],s=[];if(r.subtotal=e,r.template=i,t){for(r.columns=t,n=r.calculateDepth(t,s,0,0,null).depth,a=0;a<n+1;a++){for(l=[],o=0;o<s.length;o++)l.push(null);d.push(l)}r.makeHeaderData(d,t,0,0),r.colcount=d&&d.length>0?d[0].length:0,r.rowcount=d.length,r.fixedRow=d.length,r.setDataProvider(d)}return r.columns=s,s},qigridview.prototype.calculateDepth=function(t,e,i,a,o){var n,l,r,d,s={depth:0,cols:0};for(n=0;n<t.length;n++)if(t[n].columns&&t[n].columns.length>0)i=(d=this.calculateDepth(t[n].columns,e,i+1,n,t[n].defaults||o)).depth,s.cols+=d.cols,d.cols,a+=d.cols;else{if(o)for(r in o)t[n][r]=o[r];"numeric"==t[n].type?t[n].stylename=t[n].stylename||"numeric":"boolean"==t[n].type&&(t[n].stylename=t[n].stylename||"boolean"),t[n].formatstring&&((l=this.addStyle("column_"+(n+a),t[n].stylename||"normal")).formatstring=t[n].formatstring,t[n].stylename=l.name),e.push(t[n]),s.cols++}return s.depth=i,s},qigridview.prototype.makeHeaderData=function(t,e,i,a){var o,n,l,r=this,d=0;for(o=0;o<e.length;o++)if(l={text:e[o].name||e[o].field,mrow:0,mcol:0,merged:0,stylename:e[o].headerstyle||"fixedrow",chart:null,position:-1,code:null,value:null,index:-1,title:-1,pindex:-1},e[o].columns&&e[o].columns.length>0){for(n=0;n<e[o].columns.length;n++)(l=r.ocopy(l)).merged=0==n?2:4,t[i][d+n+a]=l;d+=r.makeHeaderData(t,e[o].columns,i+1,d)}else{for(n=i;n<t.length;n++)(l=r.ocopy(l)).merged=n==i?1:3,l.type="string",t[n][d+a]=l;d++}return d},qigridview.prototype.ocopy=function(t){var e,i={};for(e in t)i[e]=t[e];return i},qigridview.prototype.setDataProvider=function(t,e){if(t){var i,a=this,o=a.columns;for(qigridview.prototype.parent.setDataProvider(t,!1),i=0;i<o.length;i++)o[i].minwidth&&(a.cols[i].width=Math.max(a.cols[i].width,o[i].minwidth)),o[i].maxwidth&&(a.cols[i].width=Math.min(a.cols[i].width,o[i].maxwidth)),a.cols[i].type=o[i].type;!1!==e&&a.redraw()}},qigridview.prototype.loadData=function(t){var e=this,i=e.dataProvider;e.columns;i.length>e.fixedRow&&i.splice(e.fixedRow,i.length-e.fixedRow),t&&(e.getRowData(t,i),i=e.updateSubtotal(i)||i,e.updateMerge(i)),e.setDataProvider(i)},qigridview.prototype.formatString=function(t,e){return t=this.format(Number(t),e)},qigridview.prototype.format=function(t,e){if("string"!=typeof e)return"";var i=-1<e.indexOf(","),a=this.j5(e).split("."),o=t;if(1<a.length)o=o.toFixed(a[1].length);else{if(2<a.length)throw"NumberFormatException: invalid format, formats should have no more than 1 period: "+e;o=o.toFixed(0)}var n=o.toString();if(i){for(var l=(a=n.split("."))[0],r=[],d=l.length,s=(Math.floor(d/3),l.length%3||3),c=0;c<d;c+=s)0!=c&&(s=3),r[r.length]=l.substr(c,s),1;n=r.join(","),a[1]&&(n+="."+a[1])}return e.replace(/[\d,?,#\.?,#]+/,n)},qigridview.prototype.j5=function(t){t+="";for(var e=/^\d|\.|\#|-$/,i="",a=0;a<t.length;a++)e.test(t.charAt(a))&&("."==t.charAt(a)&&-1!=i.indexOf(".")||"-"==t.charAt(a)&&0!=i.length||(i+=t.charAt(a)));return i},qigridview.prototype.loadAjaxData=function(t){var e=this;t&&(t.datatype=t.datatype||"json",e.setLoading(!0),$.ajax({type:t.method||"GET",url:t.url,dataType:t.datatype||"json",data:t.data,timeout:1e4,success:function(i){t.success&&t.success.call(t.scope||e,i),e.processAjaxData(t,i,"load")},error:function(t,i,a){e.setLoading(!1)}}))},qigridview.prototype.appendAjaxData=function(t){var e=this;t&&(t.datatype=t.datatype||"json",e.setLoading(!0),$.ajax({type:t.method||"GET",url:t.url,dataType:t.datatype||"json",data:t.data,timeout:1e4,success:function(i){e.processAjaxData(t,i,"append")},error:function(t,i,a){e.setLoading(!1)}}))},qigridview.prototype.processAjaxData=function(t,e,i){var a=this;a.setLoading(!1);var o,n,l,r=[],d=a.dataProvider;if("xml"==t.datatype){if(s=a.L7(e,t.rootnode))for(c=a.L14(s),o=0;o<c.length;o++)if((p=a.processRowFunction?a.processRowFunction(a,c[o]):a.L10(c[o]))&&(r.push(p),1==c[o].hasChildNodes()))for(l=this.L14(c[o]),n=0;n<l.length;n++)p[this.L17(l[n])]=this.L12(l[n])}else if("json"==t.datatype){var s,c,p,u,g=t.rootnode.split("/");if(g.length>0){for(o=0;o<g.length;o++)s=0==o?e:s[g[o]];if(s)for(c=s,o=0;o<c.length;o++)(p=a.processRowFunction?a.processRowFunction(a,c[o]):c[o])&&r.push(p)}}"load"==i?(a.dataFullLoaded=!1,a.loadData(r)):"append"==i&&(0==r.length?a.dataFullLoaded=!0:(a.getRowData(r,d),u=a.updateSubtotal(d),a.dataProvider=d=u||d,a.updateMerge(d),a.refreshData()))},qigridview.prototype.updateSubtotal=function(t){var e,i,a,o,n,l,r=this,d=r.columns,s=t||r.dataProvider,c={};for(e=0;e<d.length;e++)c[d[e].field]=e;if(r.subtotal&&r.subtotal.length>0){for(e=0;e<r.subtotal.length;e++)if((o=r.subtotal[e]).colindex=-1,o.field&&void 0!==c[o.field]&&o.datafields&&o.datafields.length>0)for(o.colindex=c[o.field],o.pvalue=null,o.fcalc=[],o.topposition=-1,i=0;i<o.datafields.length;i++)void 0!==c[o.datafields[i]]&&o.fcalc.push({field:o.datafields[i],colindex:c[o.datafields[i]],sum:null,mbody:null});for(e=s.length-1;e>=r.fixedRow;e--)1==s[e][0].issubtotal&&s.splice(e,1);var p,u,g,h=[];for(e=0;e<r.fixedRow;e++)h.push(s[e]);for(e=r.fixedRow;e<s.length;e++)for(p=s[e],h.push(p),i=0;i<r.subtotal.length;i++)if((o=r.subtotal[i]).colindex>-1){for(l=o.toplocate||!1,a=0;a<o.fcalc.length;a++)n=Number(p[o.fcalc[a].colindex].code||p[o.fcalc[a].colindex].text),0==isNaN(n)&&(o.fcalc[a].sum=null==o.fcalc[a].sum?n:o.fcalc[a].sum+n);if(1==o.isgrandtotal)1!=l&&e==s.length-1?(u=r.addSubTotalRow(o,null),h.push(u)):1==l&&e==r.fixedRow?(u=r.addSubTotalRow(o,null),o.srow=u,h.splice(h.length-1,0,u)):1==l&&e==s.length-1&&r.updateSubTotalRow(o,null);else if(g=e+1<s.length?s[e+1][o.colindex].text:null,s[e][o.colindex].text!=g)for(u=r.addSubTotalRow(o,p[o.colindex]),1==l?(o.topposition<0&&(o.topposition=r.fixedRow),h.splice(o.topposition,0,u),o.srow=u,r.updateSubTotalRow(o,p[o.colindex]),o.topposition=h.length):h.push(u),a=0;a<o.fcalc.length;a++)o.fcalc[a].sum=null,o.fcalc[a].cnt=null;o.pvalue=s[e][o.colindex].text}return h}return null},qigridview.prototype.addSubTotalRow=function(t,e){var i,a,o,n,l,r=this,d=r.columns,s=[];for(i=0;i<d.length;i++)n={text:null,mrow:0,mcol:0,merged:0,stylename:null,chart:null,position:-1,code:null,value:null,index:-1,title:-1,pindex:-1,issubtotal:!0,type:"string"},i==t.colindex?(n.text=1==t.isgrandtotal?t.name:e.text,n.stylename=t.labelstylename||(t.isgrandtotal?"grandtotallabel":"subtotallabel")):1!=t.isgrandtotal&&i==t.colindex+1&&(n.text=t.name,n.stylename=t.labelstylename||(t.isgrandtotal?"grandtotallabel":"subtotallabel")),s.push(n);for(i=0;i<t.fcalc.length;i++)a=d[o=t.fcalc[i].colindex],(n=s[o]).code=t.fcalc[i].sum,n.text=n.code,n.stylename=t.stylename||(1==t.isgrandtotal?"grandtotal":"subtotal"),t.stylename&&r.styles[t.stylename]?(st=r.styles[t.stylename],l=st.formatstring):a.stylename&&r.styles[a.stylename]&&(st=r.styles[a.stylename],l=st.formatstring),l&&(n.text=r.formatString(n.code,l));return s},qigridview.prototype.updateSubTotalRow=function(t,e){var i,a,o,n,l,r=this,d=r.columns,s=[];if(s=t.srow)for(i=0;i<t.fcalc.length;i++)a=d[o=t.fcalc[i].colindex],(n=s[o]).code=t.fcalc[i].sum,n.text=n.code,n.stylename=t.stylename||(1==t.isgrandtotal?"grandtotal":"subtotal"),t.stylename&&r.styles[t.stylename]?(st=r.styles[t.stylename],l=st.formatstring):a.stylename&&r.styles[a.stylename]&&(st=r.styles[a.stylename],l=st.formatstring),l&&(n.text=r.formatString(n.code,l));return s},qigridview.prototype.updateMerge=function(t){var e,i,a,o,n,l,r,d,s,c,p,u,g=this,h=g.columns,f=[],m=[],v=!1,y=t||g.dataProvider;for(e=0;e<h.length;e++)1==h[e].merged&&(v=!0,f.push(e),m.push(null));if(1==v)for(e=g.fixedRow;e<y.length;e++)for(a=y[e],o=e>g.fixedRow?y[e-1]:null,n=e+1<y.length?y[e+1]:null,i=0;i<f.length;i++)r=f[i],l=i>0&&f[i-1]==r-1?f[i-1]:-1,i+1<f.length&&f[i+1]==r+1?f[i+1]:-1,d=n?n[r].text:null,c=a[r].text,s=o?o[r].text:null,u=o?o[r].merged:0,p=l>-1?a[l].merged:3,s!=c&&d==c?a[r].merged=1:s==c&&p>1?a[r].merged=3:d==c&&(a[r].merged=p>1&&u>0?3:1)},qigridview.prototype.L7=function(t,e){var a=e.split("/"),o=0,n=t;""==a[0]&&(n=t.getElementsByTagName(a[1])[0],o=2);for(i=o;i<a.length&&(null!=(n=this.L8(n,a[i]))&&null!=n);i++);return n},qigridview.prototype.L8=function(t,e){var i,a=null,o=null;if(null!=t&&1==t.hasChildNodes())for(o=this.L14(t),i=0;i<o.length;i++)if(o[i].nodeName==e){a=o[i];break}return a},qigridview.prototype.L9=function(t,e){return t.getAttribute(e)},qigridview.prototype.L10=function(t){for(var e={},i=window.bowser,a=0;a<t.attributes.length;a++)e[i.msie?t.attributes[a].nodeName:t.attributes[a].localName]=t.attributes[a].value;return e},qigridview.prototype.L14=function(t,e){var i=[];if(null!=t&&1==t.hasChildNodes())for(var a=0;a<t.childNodes.length;a++)"1"==t.childNodes[a].nodeType&&(e&&e!=this.L17(t.childNodes[a])||i.push(t.childNodes[a]));return i},qigridview.prototype.L12=function(t){if(window.bowser.msie){if(t)return t.text||t.textContent||""}else if(null!=t&&void 0!==t.textContent)return t.textContent;return""},qigridview.prototype.L17=function(t){return t.nodeName},qigridview.prototype.expandTemplate=function(t,e){var i=this,a=this.dataProvider[t],o=!1;i.template&&(a[0].expanded=e,a[0].template||(a[0].template=$("<div></div>").css({position:"absolute"}).appendTo(i.regdata),a[0].template.append($(i.template)),i.trenderers.push(a[0].template),o=!0),e?(i.theight+=a[0].template.height(),a[0].template.fadeIn(500)):(0==o&&(i.theight-=a[0].template.height()),a[0].template.fadeOut(500)),i.refreshData())},qigridview.prototype.createEditor=function(t){var e,i,a,o,n,l=this;if(t&&t.editor)switch(t.editor.type){case"select":case"combobox":if(e=$("<select></select>"),t.editor.data)for(i=0;i<t.editor.data.length;i++)a=(n=t.editor.data[i])[t.editor.codename||"value"],o=n[t.editor.displayname||"label"]||a,$("<option value='"+a+"'>"+o+"</option>").appendTo(e);break;default:(e=$("<input type='text'></input>")).bind("keyup",(function(t){return 13==t.keyCode&&l.endEdit("enter"),!1}))}else e=qigridview.prototype.parent.createEditor.call(l);return e},qigridview.prototype.beginEdit=function(t){var e,i,a=this,o=a.ctx.offset(),n=a.columns,l=(a.cols[t.colIndex],n[t.colIndex]),r=!1;if(1==a.editable&&!1!==a.cols[t.colIndex].editable){if(e=t.offset(),{left:0,top:0},t.cl,a.editing=t,a.editor.empty(),l.editor&&l.editor.type)switch(l.editor.type){case"combobox":case"select":i=l.editrenderer=a.createEditor(l),a.editor.append(i),a.editor.css({left:e.left-o.left,top:e.top-o.top,overflow:"visible"}),a.editor.ceditor=i,i.width(t.width()),a.editor.width(t.width()).height(t.height()),a.editor.show(),r=!0}0==r&&qigridview.prototype.parent.beginEdit(t)}};var qigridinstances={instance:0};function qigridpages(t){this.container=t.container,this.template=t.template||"totalcounter",this.totalcount=t.totalcount,this.pagecount=t.pagecount,this.datagrid=t.datagrid,this.prevlabel=t.prevlabel||"Previous",this.nextlabel=t.nextlabel||"Next",this.instance=qigridinstances.instance,qigridinstances.instance++,this.init()}qigridpages.prototype={init:function(){var t,e=this;switch(e.pageindex=0,e.container.empty(),e.template){case"totalcounter":t="<div class='m-datagrid-totalcounter'><div class='m-datagrid-pageinfo-1'><span><b>{START_LABEL}</b> - <b>{END_LABEL}</b> of <b>{TOTAL_LABEL}</b><span></div><div class='m-datagrid-page-btngrp'>{BUTTON_PREV}{BUTTON_NEXT}</div></div>";break;case"pageindex":t="<div class='m-datagrid-pageindex'><div class='m-datagrid-pageinfo-2'><div class='m-datagrid-page-btn-prev10'>{BUTTON_PREV10}</div><div class='m-datagrid-page-indexlist'>{PAGE_INDEX_10}</div><div class='m-datagrid-page-btn-next10'>{BUTTON_NEXT10}</div></div></div>"}e.tmpl=t},updatePage:function(t){var e,i,a,o=this,n=o.tmpl,l=o.pagecount,r=t*l,d=(t+1)*l,s=10*Math.floor(t/10),c=Math.ceil(o.totalcount/o.pagecount),p="";if(o.pageindex=t,o.container.empty(),n){for(a=o.instance,d=Math.min(d,o.totalcount),n=(n=(n=(n=(n=(n=(n=n.replace("{START_LABEL}",r+1)).replace("{END_LABEL}",d+1)).replace("{TOTAL_LABEL}",qigridview.prototype.formatString(o.totalcount,"#,###"))).replace("{BUTTON_PREV}","<div class='m-datagrid-prevpage"+(0==t?" m-datagrid-page-disabled":"")+"' id='qipages_btn_prev_"+a+"'>"+(o.prevlabel||"")+"</div>")).replace("{BUTTON_NEXT}","<div class='m-datagrid-nextpage"+(t==Math.ceil(o.totalcount/o.pagecount)?" m-datagrid-page-disabled":"")+"' id='qipages_btn_next_"+a+"'>"+(o.nextlabel||"")+"</div>")).replace("{BUTTON_PREV10}","<div class='m-datagrid-prevpage"+(0==s?" m-datagrid-page-disabled":"")+"' id='qipages_btn_prev10_"+a+"'>"+(o.prevlabel||"")+"</div>")).replace("{BUTTON_NEXT10}","<div class='m-datagrid-nextpage"+(s+10>=c?" m-datagrid-page-disabled":"")+"' id='qipages_btn_next10_"+a+"'>"+(o.nextlabel||"")+"</div>"),e=s;e<Math.min(s+10,c);e++)p+="<div class='m-datagrid-jumppage"+(e==t?" m-datagrid-currentpage":"")+"' name='qipages_btn_jump_"+a+"'>"+(e+1)+"</div>";n=n.replace("{PAGE_INDEX_10}",p),i=$(n),o.container.append(i),$("#qipages_btn_next_"+a).bind("click",(function(){o.changePage(++o.pageindex)})),$("#qipages_btn_prev_"+a).bind("click",(function(){o.pageindex>0&&o.changePage(--o.pageindex)})),$("#qipages_btn_next10_"+a).bind("click",(function(){c>s+10&&o.changePage(s+10)})),$("#qipages_btn_prev10_"+a).bind("click",(function(){s>0&&o.changePage(s-1)})),i.find("[name='qipages_btn_jump_"+a+"']").bind("click",(function(t){var e=$(t.target).text();e&&(e=parseInt(e))-1!=o.pageindex&&o.changePage(e-1)}))}},changePage:function(t){this.container.trigger("changepage",[this,t])}};
IG$.V$grid.prototype.initializeDragDrop=function(e){var r=this;r.dropFeedback=$('<div class="m-datagrid-feedback"></div>'),r.dropFeedback.appendTo(r.owner),r.dropFeedback.hide()},IG$.V$grid.prototype.isAllowedType=function(e){var r=!1,i=this.getTypeName(e);return"d"!=i&&"m"!=i||(r=!0),r},IG$.V$grid.prototype.getTypeName=function(e){var r="";return"measure"==e||"formulameasure"==e||"measuregroup"==e?r="m":"metric"!=e&&"custommetric"!=e&&"tabdimension"!=e&&"measuregroupdimension"!=e||(r="d"),r};
IG$.makeItem=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!1,width:300,autoHeight:!0,viewmode:"newitem",_init:function(){var e=this,t=e.itemtype.split(";");if(t.length>1){e.itemtype=t[0],e._itemtypes=t;var i,a=e.down("[name=txttitle]"),n=e.down("[name=txtedittitle]"),o=e.down("[name=selitemtype]"),r=[];for(a.setVisible(!1),n.setVisible(!1),o.setVisible(!0),r.push({name:IRm$.r1("L_CR_TP_SEL"),value:""}),i=0;i<t.length;i++)r.push({name:IRm$.r1("D_"+t[i].toUpperCase()),value:t[i]});o.store.loadData(r),o.setValue("")}e.down("[name=fitemname]").focus()},commit_f:function(){var e=this,t=e.down("[name=fitemname]"),i=e.down("[name=fitemname]").getValue(),a=e.down("[name=fdesc]").getValue(),n=e.down("[name=fhelpuid]").getValue()||null,o=e.down("[name=selitemtype]"),r=e.down("[name=group_dim_name]"),d=e.down("[name=groupid]").getValue();if(t.clearInvalid(),!i)return t.markInvalid([t.blankText]),void(e._proc=0);if("Help"!=e.itemtype||n)if(e._itemtypes&&e._itemtypes.length>1&&(e.itemtype=o.getValue(),!e.itemtype))e._proc=0;else{if("MeasureGroup"==e.itemtype&&!r.getValue())return r.markInvalid([r.blankText]),void(e._proc=0);if(0==e.doUpdate)return e.callback&&e.callback.execute(),void(e._proc=0);var l=new IG$._rpc$,p="writecontent",m={address:e.parentnodepath?"/"==e.parentnodepath?e.parentnodepath+i:e.parentnodepath+"/"+i:null,name:i,type:e.itemtype,pid:"/"==e.parentuid?"":e.parentuid,memo:n||null,dimname:r.getValue(),description:a},s={name:i};"Group"==e.itemtype?(p="usercontent",m={address:"/usergroup/"+i,action:"create",pid:e.parentuid,description:a,groupid:d},s={type:"usergroup",pid:e.parentuid,description:a,groupid:d}):"Auth"==e.itemtype?(p="usercontent",m={address:"/Auth/"+i,action:"create",pid:e.parentuid,description:a},s={option:"create",name:i,description:a}):"tenant"==e.itemtype&&(p="usercontent",m={address:"/tenants/"+i,action:"create",pid:e.parentuid,description:a},s={}),l.init(e,{ack:p,payload:m,mbody:s,meta_type:e.meta_type||null},e,e.rs_processMakeMetaItem,(function(){e._proc=0})),l.send()}else e._proc=0},rs_processMakeMetaItem:function(e){var t=this;t.callback&&t.callback.execute(e),t.close()},setGroupActive:function(e){var t=this,i=new IG$._rpc$;i.init(t,{ack:"usercontent",payload:{address:"/usergroup",action:e},mbody:{gid:t.uid}},t,t.rs_setGroupActive,!1,[e]),i.send()},rs_setGroupActive:function(e,t){var i=this,a=t[0],n=i.down("[name=p_grp_desc]"),o=i.down("[name=btn_erase]");switch(a){case"activate":n.setValue("Active"),i.group_active=a,o.setVisible(!1);break;case"delete":n.setValue("Blocked"),i.group_active=a,o.setVisible(!0),i.down("[name=btn_erase]").show();break;case"erase":i.callback&&i.callback.execute(),i.close()}},initComponent:function(){var e=this;e.title=e.title||IRm$.r1("L_MAKEITEM_G");var t=IRm$.r1("D_"+e.itemtype.toUpperCase());$s.apply(this,{items:[{xtype:"container",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_MAKEITEM",t),name:"txttitle",hidden:"newitem"!=e.viewmode,height:30,border:0},{xtype:"displayfield",value:IRm$.r1("L_RENAME_ITEM",IG$._gitemname(e.itemname||"")),name:"txtedittitle",height:30,hidden:"edititem"!=e.viewmode,border:0},{xtype:"panel",layout:"anchor",border:0,defaults:{anchor:"100%",labelWidth:80},items:[{name:"selitemtype",hidden:!0,xtype:"combobox",fieldLabel:IRm$.r1("L_CR_TP_SEL"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"]}},{xtype:"textfield",fieldLabel:IRm$.r1("L_ITEMNAME"),name:"fitemname",_fasl:1,allowBlank:!0,blankText:IRm$.r1("B_REQ"),enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&this.commit_f()},scope:this}},{xtype:"textfield",fieldLabel:"HELPID",name:"fhelpuid",hidden:"Help"!=e.itemtype,allowBlank:!1,blankText:IRm$.r1("B_REQ")},{xtype:"textfield",fieldLabel:IRm$.r1("L_GROUP_ID"),name:"groupid",hidden:"Group"!=e.itemtype,allowBlank:!0},{xtype:"textfield",fieldLabel:IRm$.r1("L_DIMENSION"),name:"group_dim_name",blankText:IRm$.r1("B_REQ"),hidden:"MeasureGroup"!=e.itemtype},{fieldLabel:IRm$.r1("B_DESC"),xtype:"textarea",height:50,name:"fdesc"},{xtype:"fieldset",title:IRm$.r1("L_ENABLE_DISABLE"),name:"p_activate",hidden:"Group"!=e.itemtype||!e.uid,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",name:"p_grp_desc",value:1==e.group_active?"Active":"Deactive"},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"button",iconCls:"icon-toolbar-activate",flex:1,text:IRm$.r1("L_ACTIVATE"),handler:function(){this.setGroupActive("activate")},scope:e},{xtype:"container",width:10},{xtype:"button",iconCls:"icon-toolbar-deprivation",flex:1,text:IRm$.r1("L_DEPRIVATE"),handler:function(){this.setGroupActive("delete")},scope:e}]}]}]}]}],buttons:[{text:IRm$.r1("L_ERASE_GROUP"),name:"btn_erase",hidden:"Group"!=e.itemtype||!e.uid||0!=e.group_active,handler:function(){this.setGroupActive("erase")},scope:e},"->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){var e=this;e._proc?IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVE_PROGRESS"),null,null,0,"warning"):(e._proc=1,e.commit_f())},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){e._init()}}}),IG$.makeItem.superclass.initComponent.apply(this,arguments)}}),IG$.makeItemEditor=$s.extend(IG$.makeItem,{viewmode:"edititem",commit_f:function(){var e,t,i=this,a=this,n=this.down("[name=fitemname]"),o=n.getValue(),r=this.down("[name=fdesc]").getValue(),d=this.down("[name=fhelpuid]").getValue(),l=this.down("[name=selitemtype]"),p="writecontent",m=this.down("[name=groupid]").getValue(),s="rename";if(i._itemtypes&&i._itemtypes.length>1&&(l.clearInvalid(),i.itemtype=l.getValue(),!i.itemtype))return l.markInvalid(IG$._markInvalid),void(i._proc=0);if(n.clearInvalid(),!o)return n.markInvalid(IG$._markInvalid),void(i._proc=0);if(e={uid:i.uid,name:o,itemtype:i.itemtype,pid:i.parentuid,description:r,memo:"Help"==i.itemtype?d:null},"Group"===i.itemtype)p="usercontent",s="update",e={address:"/usergroup/"+o,action:"update",gid:i.uid,description:r,groupid:m};(t=new IG$._rpc$).init(a,{ack:p,payload:e,mbody:{option:s}},a,a.rs_processMakeMetaItem,(function(){i._proc=0})),t.send()},initComponent:function(){var e=this;e.title=IRm$.r1("T_RENAME_ITEM",e.itemname),e.on("afterrender",(function(){var e=this,t=e.down("[name=fitemname]"),i=e.down("[name=fdesc]"),a=e.down("[name=fhelpuid]"),n=e.down("[name=txttitle]"),o=e.down("[name=txtedittitle]"),r=e.down("[name=groupid]");n.setVisible(!1),o.setVisible(!0),t.setValue(e.itemname),i.setValue(e.description),a.setValue(e.memo),r.setValue(e.groupid),t.focus()}),e),IG$.makeItemEditor.superclass.initComponent.apply(e,arguments)}});
IG$.pageParameter=function(t,e,a,i){var n=this;n.owner=t,n.uid=e,n.name=a,n.value=i,n.orig_value=i,n.$rel_params=[]},IG$.pageParameter.prototype={set:function(t){var e=this,a=e.owner.pobj;e.value=t,a&&a.$set_params&&a.$set_params(e)},get:function(){return this.value},val:function(t){if(void 0===t)return this.get();this.set(t)},validate:function(t){var e,a,i,n=this,p=n.owner.page_param_map,r=n.value;if(n.orig_value=r,n.$rel_params=[],r&&r.length)for(n.value.length,e=r.indexOf("${");e>-1&&!((a=r.indexOf("}",e+2))<0);)(i=r.substring(e+2,a))&&p[i]&&i!=n.name&&n.$rel_params.push(p[i]),e=a+1},set_param:function(t,e){var a,i,n,p=this.value,r="${"+t+"}",o="",s=0;if(p&&p.length){for(n=p.length,i=r.length,a=p.indexOf(r);a>-1&&(o=p.substring(s,a)+(e||""),s+=a+i,!((a=p.indexOf(r,a+i))+i<0)););s<n&&(o+=p.substring(s+n))}return o}},IG$.frameEvents=function(t){var e=this;e.type="actionitem",e.inherit=IG$.clEvents,e.inherit(t)},IG$.frameEvents.prototype=new IG$.clEvents,IG$.frameControl=function(t,e,a){var i,n,p,r,o,s,l,u,c=this;if(c.properties={visible:!0,border:0,bordercolor:"#e5e5e5",backgroundcolor:"#ffffff",padding:2},c.parentctrl=e,c.position={},c.layout=[],c.pname=e&&e.name?e.name:null,c.puid=e&&e.uid?e.uid:null,c.actionlist={},c._f_columns=[],t){if(c.uid=t.uid,c.type=t.type,u=t.pos,$.each("top;left;width;height;right;middle;bottom;percentwidth;percentheight".split(";"),(function(t,e){u[e]&&(c.position[e]=Number(u[e]))})),p=t.properties)for(r in p)o=p[r],c.properties[r]=o;if(c.name=c.properties.Name,s=t.appl.actevents_items)for(k in s)c.actionlist[k]=s[k];if((s=t.appl.xparam)&&s.length&&(c._xparam=s),s=t.appl.f_columns)for(c._f_columns=[],i=0;i<s.length;i++){var h=s[i];c._f_columns.push(h)}if((p=t.appl.item)&&(c.item=p,a.regReportContent(c.item,c)),l=t.wgt)for(i=0;i<l.length;i++)(n=new IG$.frameControl(l[i],c,a)).updatePropertyValue(),c.layout.push(n),a&&(a.controls[n.uid]=n)}},IG$.frameControl.prototype={updatePropertyValue:function(t,e){var a,i,n,p=this,r={},o=new IG$.clControlItem(null,null,1,e).getControl(p.type.toLowerCase()),s=p.position;for(a=0;a<o.p.length;a++)r[o.p[a].name]=o.p[a];for(i in p.properties)if(r[i])switch(value=p.properties[i],r[i].datatype){case"boolean":value&&value.length>0&&(p.properties[i]="true"==value);break;case"number":value&&value.length>0&&(p.properties[i]=Number(value))}t&&(n=IG$.getControl(p.type,!1,!0),s.width=n.width,s.height=n.height)},getXML:function(){var t,e,a,i=this,n=(i.actionlist,{uid:i.uid,name:i.name,type:i.type,pos:{},properties:{},appl:{item:null,actevents_items:{},f_columns:[]}}),p=i.position;for(t in $.each("top;left;width;height;right;middle;bottom;percentwidth;percentheight".split(";"),(function(t,e){n.pos[e]=null==p[e]||isNaN(p[e])?"":""+p[e]})),i.properties)null!==i.properties[t]&&void 0!==i.properties[t]&&(n.properties[t]=""+i.properties[t]);for(t in i.item&&i.item.uid&&(n.appl.item=i.item),i.actionlist)ev=i.actionlist[t],n.appl.actevents_items[t]=ev;if(i._f_columns)for(e=0;e<i._f_columns.length;e++)n.appl.f_columns.push(i._f_columns[e]);if(i._xparam&&(n.appl.xparam=i._xparam),i.layout&&i.layout.length>0)for(n.wgt=[],e=0;e<i.layout.length;e++)a=i.layout[e].getXML(),n.wgt.push(a);return n}},IG$.cdxml=function(t,e){var a=this;a.instance=t,a.content=e?e.content:{},e&&(a.item={name:e.name,uid:e.uid,type:e.type,nodepath:e.nodepath,writable:e.writable})},IG$.cdxml.prototype={regReportContent:function(t,e){var a,i=this.dashboardreport,n={uid:t.uid,type:t.type,nodepath:t.nodepath,name:t.name};for(e&&"combobox"==e.type&&(n._control=e,i=this.valueset),a=0;a<i.length;a++)if(i[a].uid==n.uid)return;i.push(n)},parseContent:function(t){var e,a,i,n,p,r,o,s,l,u,c,h,m=this,d=m.instance;if(e=m.content,m.pobj=t,m.tmpl=null,$s.apply(m,{controls:{},eventseq:0,events:{},_applActions:{onload:null,ontimer:null},activescript:"",_funcNames:[],dashboardreport:[],valueset:[],page_params:[],page_param_map:{},rcs:[],cube_objects:[]}),e){for(m.tmpl=e.tmpl,m.layout=[],$s.apply(m,{autowidth:e.autowidth,autoheight:e.autoheight,vscroll:e.vscroll,hscroll:e.hscroll,gridsize:e.gridsize||12,width:e.width||800,height:e.height||600,minwidth:e.minwidth||500,minheight:e.minheight||500,cls:e.cls||"",background:e.background||"",title:e.title||"",cube_objects:e.cube_objects||[]}),e.wgt=e.wgt||[],i=e.wgt,n=0;n<i.length;n++)(s=new IG$.frameControl(i[n],null,m)).updatePropertyValue(void 0,m.pobj),m.layout.push(s),m.controls[s.uid]=s;if(m.activescript=e.activescript,m._condScript=e.conditionscript,t&&m.parseScriptFunc(),a=e.page_params){for(n=0;n<a.length;n++)c=a[n].uid||a[n].name,l=a[n].name,u=a[n].value,(h=new IG$.pageParameter(m,c,l,u)).type=a[n].type||"var",h.ctrltype=a[n].ctrltype,m.page_params.push(h),m.page_param_map[h.uid]=h;m.page_param_map.userid?m.page_param_map.userid.value=d.dlgLogin.logininfo.userid:((h=new IG$.pageParameter(m,"userid","userid",d.dlgLogin.logininfo.userid)).type="var",m.page_params.push(h),m.page_param_map[h.uid]=h)}var g,f,_,v;if(a=e.acteventitems)for(n=0;n<a.length;n++)if(v={uid:a[n].uid,name:a[n].name,type:a[n].type,description:a[n].description},(g=a[n].uid).indexOf("_")>-1&&""!=(f=g.substring(g.lastIndexOf("_")+1))&&f.length>0&&(m.eventseq=Math.max(m.eventseq,Number(f)+1)),"actiongroup"==v.type)for(v.actitem=[],a[n].actitem=a[n].actitem||[],m.events[g]=v,p=0;p<a[n].actitem.length;p++)_=new IG$.frameEvents(a[n].actitem[p]),(g=a[n].actitem[p].uid).indexOf("_")>-1&&""!=(f=g.substring(g.lastIndexOf("_")+1))&&f.length>0&&(m.eventseq=Math.max(m.eventseq,Number(f)+1)),_.updateParamValue(m),v.actitem.push(_);else"actionitem"==v.type&&((v=new IG$.frameEvents(a[n])).updateParamValue(m),m.events[g]=v);if(a=e.appl_acts_items)for(n in a){var y=n,w=a[n];for(m._applActions[y]=[],p=0;p<w.length;p++)m._applActions[y].push(w[p])}if(a=e.appl_data)for(m.applicationdata=[],n=0;n<a.length;n++){for(r=!1,o=a[n],p=0;p<m.applicationdata.length;p++)if(m.applicationdata[p].uid==o.uid){r=!0;break}0==r&&m.applicationdata.push(o)}}},parseScriptFunc:function(){ig$._scfunc=ig$._scfunc||0;var t=this,e=t.content.uid||"scfunc_"+ig$._scfunc++,a=Base64.decode(t.activescript);t.mainDynScript=new IG$.cDynScript("cls_"+e.replace("-","_"),"IG$.dyn_base"),t.mainDynScript.loadScript(a),t.mainDynScript.preparePrototype(t.controls,t.pobj),t._funcNames=t.mainDynScript.getFunctionList()},getLayout:function(){var t,e=this,a={};if($s.apply(a,{autowidth:e.autowidth,autoheight:e.autoheight,vscroll:e.vscroll,hscroll:e.hscroll,gridsize:e.gridsize||12,width:e.width,height:e.height,minwidth:e.minwidth,minheight:e.minheight,title:e.title,cls:e.cls,background:e.background,wgt:[]}),e.layout&&e.layout.length>0)for(t=0;t<e.layout.length;t++)a.wgt.push(e.layout[t].getXML());return a},setLayout:function(t){var e,a,i,n=this,p=JSON.parse(t),r=!1;if(p&&(e=p.wgt))for(r=!0,n.layout=[],n.controls={},a=0;a<e.length;a++)(i=new IG$.frameControl(e[a],null,n)).updatePropertyValue(),n.layout.push(i),n.controls[i.uid]=i;return r},getXML:function(){var t,e,a,i,n=this,p=n.events,r=n.content,o={uid:r.uid,name:r.name,nodepath:r.nodepath,type:r.type};for(e in n.tmpl&&n.tmpl.uid&&(o.tmpl=n.tmpl),i=n.getLayout(),o.autowidth=i.autowidth,o.autoheight=i.autoheight,o.vscroll=i.vscroll,o.hscroll=i.hscroll,o.gridsize=i.gridsize,o.width=i.width,o.height=i.height,o.minwidth=i.minwidth,o.minheight=i.minheight,o.cls=i.cls,o.title=i.title,o.background=i.background,o.wgt=i.wgt,o.activescript=n.activescript,o.acteventitems=[],$.each(p,(function(t,e){var a;"actiongroup"==e.type?(a={name:e.name,description:e.description,uid:e.uid,type:e.type,actitem:[]},$.each(e.actitem,(function(t,e){a.actitem.push(e.getXML())}))):"actionitem"==e.type&&(a=e.getXML()),a&&o.acteventitems.push(a)})),o.appl_acts_items={},o.cube_objects=n.cube_objects,n._applActions)if(n._applActions[e]){o.appl_acts_items[e]=[];var s=n._applActions[e];for(t=0;t<s.length;t++)o.appl_acts_items[e].push({uid:s[t].uid,name:s[t].name,description:s[t].description})}for(o.page_params=[],t=0;t<n.page_params.length;t++)o.page_params.push({uid:n.page_params[t].uid,type:n.page_params[t].type,ctrltype:n.page_params[t].ctrltype,name:n.page_params[t].name,value:n.page_params[t].value});if(o.appl_data=[],n.applicationdata)for(t=0;t<n.applicationdata.length;t++)a=n.applicationdata[t],o.appl_data.push({nodepath:a.nodepath,lastupdatedate:a.lastupdatedate,memo:a.memo,name:a.name,type:a.type,uid:a.uid});return o}},IG$.pluginResults=function(t){this.resultmap={},t&&this.parse(t)},IG$.pluginResults.prototype={parse:function(t){this.resultmap=t||{}}};
IG$.__global=IG$.__global||{},IG$.DashboardView=$s.extend(IG$.v$pnl,{layout:"fit",iconCls:"icon-doc-dashboard",_atimer:10,gridsize:12,entryLogin:function(t){t.procRunDashboard()},refreshCode:function(){var t=this;t.refreshControl&&t.refreshControl(),t.layoutControls(),t.validateSize()},applyOption:function(t){var e=this;e._cache_cnf(new IG$.callBackObj(e,(function(a){t.bt?e.rs_loadContent(t.bt,!0):t._ipcnt&&(e.applyParameters(),e.executeAction(e.framecontent._applActions.onload,{ctrl:null,ptr:e,event:"onload"})),e.bt=null})))},procRunDashboard:function(){var t,e,a=this,o=a.uid,r=a.dashboardcnt,n=a.dashboardview,i=window.bowser;o&&o.length>0&&(t=r.width(),e=r.height(),a.initialized=!0,$(n).empty(),i.msie&&t>0&&e>0&&(IG$.j$ext._w(n,t),IG$.j$ext._h(n,e)),a.bt&&a.bt.content?a.applyOption({bt:a.bt}):a._cache_cnf(new IG$.callBackObj(a,(function(){a.loadCnt()}))))},loadCnt:function(){var t,e=this;e.setLoading(!0),(t=new IG$._rpc$).init(e,{ack:"content",payload:{uid:e.uid},mbody:{}},e,e.rs_loadContent,!1),t.send()},_cache_cnf:function(t){if(IG$.$cache=IG$.$cache||{},IG$.$cache.extra_sys_con)t&&t.execute();else{var e=new IG$._rpc$;e.init(this,{ack:"content",payload:{address:"/SYS_Config/extra_sys_config"},mbody:{}},this,(function(e){IG$.$cache.extra_sys_con=e,t&&t.execute()}),!1),e.send()}},rs_loadContent:function(t,e,a){var o,r,n=this;n.setLoading(!1),(r=n.framecontent=new IG$.cdxml(n.instance,t)).parseContent(n),o=n.framecontent.item,n.gridsize=r.gridsize||12,o&&o.uid&&(n.uid=o.uid),a||(n.fireEvent("meta_loaded",n,r),n.parseEvents(t.content),n.layoutControls(),n.validateSize(),n.parseScript(t.content),n.loadvalueset(n.framecontent.valueset,!0,new IG$.callBackObj(n,(function(t){n.applyParameters(),n.executeAction(r._applActions.onload,{ctrl:null,ptr:n,event:"onload"})}))))},getHFilter:function(t,e){var a,o,r=t.property,n=t.control.applicationItem,i=r.caseinsensitive,l=t.getSelectionData();if(n&&(l&&l.length||e))for(a={ftype:"condition",fields:[{name:n.name,uid:n.uid,type:n.type}],operator:"EQ",values:[]},i&&(a.left_expression="UPPER(["+n.name+"])"),j=0;j<l.length;j++)o=l[j],valueformat="",i?a.values.push({code:o.code?o.code.toUpperCase():null,value:o.value,valueformat:valueformat,valuetype:o.valuetype,dateseltype:o.dateseltype}):a.values.push({code:o.code,value:o.value,valueformat:valueformat,valuetype:o.valuetype,dateseltype:o.dateseltype});return a},checkHFilter:function(t){var e,a,o,r,n=null,i=t.property;if(i.hierarchy)for(e=i.hierarchy.split(";"),a=0;a<e.length;a++){if(!(r=this.ControlDict[e[a]])){n=!1;break}if(!(o=this.getHFilter(r))){r.property.isnecessary&&r.control.html.addClass("df-title-error"),n=!1;break}r.control.html.removeClass("df-title-error"),(n=n||[]).push(o)}return n},_valueChangeHandler:function(t){var e=this,a=e.ControlDict[t.uid],o=[];a&&($.each(e.ControlItems,(function(t,e){if(t!=a.uid&&"combobox"==e.ctrltype){var r=e.property.hierarchy;if(r&&r.indexOf(a.uid)>-1&&e.control.applicationItem){var n=e.control.applicationItem,i={uid:n.uid,type:n.type,name:n.name};i._control=e,e.control.loadData({data:[]}),o.push(i)}}})),o.length&&e.loadvalueset(o,!1,new IG$.callBackObj(e,(function(t){}))))},loadvalueset:function(t,e,a){var o=this,r=[],n={items:[]},i=new IG$._rpc$;n.option="ValueInfo",$.each(t,(function(t,e){var a=e._control?o.ControlDict[e._control.uid]:null,i=a?o.checkHFilter(a):null;!1!==i&&(r.push({uid:e.uid,type:e.type,rptid:e.uid}),n.items.push({uid:e.uid,hfilter:i}))})),0==e&&0==r.length||(i.init(o,{ack:"olapservice",payload:r,mbody:n,meta_type:"valueinfo"},o,(function(t){$.each(t.value_results,(function(t,e){var a,r=IG$.parseValueList([e]);r&&r.length&&(a=r[0],$.each(o.framecontent.controls,(function(t,e){"combobox"==e.type&&e.item&&e.item.uid==a.uid&&o.ControlDict[e.uid].control.loadData(a)})))})),a.execute()}),(function(t){a.execute()})),i.send())},applyParameters:function(){var t,e,a,o,r,n=this,i=n._ipcnt;if($.each(n.framecontent.page_param_map,(function(t,e){e.validate()})),i&&i.data)for(t=i.data,e=n.framecontent.page_param_map,a=0;a<t.length;a++)o=t[a].name,r=t[a].value,e[o]&&(e[o].value=r);n._ipcnt=null,$.each(n.framecontent.page_param_map,(function(t,e){n.$set_params(e)}))},parseEvents:function(t){var e,a,o=this,r=t.acteventitems;if(o.ActionEvents={},o.ApplicationActions={onload:null,ontimer:null},r)for(e=0;e<r.length;e++)if(a=r[e].uid,"actiongroup"==r[e].type){o.ActionEvents[a]={uid:a,name:r[e].name,type:r[e].type,description:r[e].description,actitem:[]};for(let t=0;t<r[e].actitem.length;t++)o.ActionEvents[a].actitem.push(new IG$.clEvents(r[e].actitem[t]))}else"actionitem"==r[e].type&&(o.ActionEvents[a]=new IG$.clEvents(r[e]));if(r=t.appl_acts_items)for(e in r){var n=e;o.ApplicationActions[n]=r[e]}},layoutControls:function(t,e){var a=this,o=a.dashboardcnt,r=a.dashboardview;t&&(a.framecontent=t),fc=a.framecontent,a.ControlItems&&$.each(a.ControlItems,(function(t,e){var a=e.control;a&&a.destroy&&a.destroy()})),a.ControlItems=[],a.ControlDict={},a.ControlDictNames={},a.RootControlItems=[],r.empty(),IG$.setScrRect(o),!0!==e&&r.addClass("ig-ds-viewmode"),a.parseLayout(),!0!==e&&$.each(a.ControlItems,(function(t,e){var a=e.control;a&&(a.__ivp_=1,a.__ivp&&a.__ivp())}))},parseScript:function(t){var e,a,o=this,r={};for(a=0;a<o.ControlItems.length;a++)r[(e=o.ControlItems[a]).ctrlname]=e.control;o.mainDynScript=o.framecontent.mainDynScript,o.mainDynScript.preparePrototype(r,o)},parseLayout:function(){var t=this,e=t.framecontent,a=t.dashboardcnt,o=IG$.j$ext._w(a),r=IG$.j$ext._h(a);t._parseLayout(e.layout,null,o,r)},_parseLayout:function(t,e,a,o){var r,n,i=this;r=e?e.control.getContainer?e.control.getContainer():e.control.el$:i.dashboardview,n=e?e.layouts:i.RootControlItems,t&&t.length&&$.each(t,(function(t,l){var c=i.appendControl(l,r,e,a,o,i.dsmode);if(c.layouts=[],l.layout.length){var s=c.control.el$,p=IG$.j$ext._w(s),u=IG$.j$ext._h(s);i._parseLayout(l.layout,c,p,u)}n.push(c),setTimeout((function(){c.control.applyApplication()}),10)}))},appendControl:function(t,e,a,o,r,n){var i,l,c,s,p,u=this,d=new IG$.clControlItem(t,a,n,u),m={};for(d.dashboard=u,d.parentcontrol=u,s=d.property.flex||2,p=Math.floor(o/u.gridsize*s),d.control.html.outerWidth(p),u.ControlItems.push(d),u.ControlDict[d.uid.toLowerCase()]=d,u.ControlDictNames[d.name]=d,i=0;i<d.control.p.length;i++)m[d.control.p[i].name]=d.control.p[i];for(l in d.property)if(m[l])switch(c=d.property[l],m[l].datatype){case"boolean":d.property[l]="true"==c||1==c;break;case"number":d.property[l]=Number(c)}return d.control.html.appendTo(e),null!=d.control&&null!=d.control.html&&(d.control.layout=t,d.control.initDrawing()),d.control&&d.control.invalidate(),d},executeAction:function(t,e){var a,o,r,n,i=this,l=[];if(i.ActionEvents&&t&&t.length>0){for(r=0;r<t.length;r++)if(a=t[r],i.ActionEvents[a.uid])if("actiongroup"==(o=i.ActionEvents[a.uid]).type)for(n=0;n<o.actitem.length;n++)l.push(o.actitem[n]);else"actionitem"==o.type&&l.push(o);i.processRunEvents.apply(i,[l,e])}},processRunEvents:function(t,e){var a=this,o=arguments;o=Array.prototype.slice.call(o,1),a._$running?IG$.ShowError(IRm$.r1("E_LOCK_JOB")):(a.customLoad(!0),clearTimeout(a.executionTimer),a.executionTimer=setTimeout((function(){var e=[];for(let a=0;a<t.length;a++)e.push({event:t[a],args:o});$.each(a.ControlDict,(function(t,e){e&&e.control&&e.control.commit&&e.control.commit()})),a._do_actions(e)}),5))},customLoad:function(t){var e,a,o=this;1==t?(a={msg:IRm$.r1("B_PROC")+" <button id='m-mec-loader'>"+IRm$.r1("B_PROC_CANCEL")+"</button>"},ld=o.setLoading(a),e=$(o.rendermask),btn=$("#m-mec-loader",e).bind("click",(function(){o.cancelQuery()}))):o.setLoading(!1,void 0,!0)},cancelQuery:function(t){t&&t.splice(0,t.length),this._$running=!1,this.setLoading(!1)},_do_actions:function(t){var e=this;if(t&&t.length>0){var a=t.shift(),o=a.event,r=0,n=!0,i=a.args;try{o.condition_script&&(i.unshift(o.condition_script),n=e.mainDynScript.executeScript.apply(e.mainDynScript,i),e.mainDynScript.lastError&&(IG$.ShowError(e.mainDynScript.lastError),r=3)),!0===n||1===n?e._proc_action(t,a):r||0===n?(e._close_actions(t),r=4):e._do_actions(t)}catch(a){IG$.ShowError(IRm$.r1("E_D_EVNT",o.name),null,null,{errstack:a.stack}),e._close_actions(t)}}else e._close_actions(t)},_proc_action:function(t,e,a){var o=this,r=e.event;switch(e._has_error=!1,r.purpose.toLowerCase()){case"thread_start":o._proc_action_thread(t,e,a);break;case"onlinereport":o._proc_action_onlinereport(t,e,a);break;case"valuelist":o._proc_action_valuelist(t,e,a);break;case"execute_script":o._proc_action_execute_script(t,e,a);break;case"export":o._proc_action_export(t,e,a);break;case"servercall":o._proc_action_servercall(t,e,a);break;case"restcall":o._proc_action_restcall(t,e,a);break;case"open_win":o._proc_action_open_win(t,e,a);break;case"open_dlg":o._proc_action_open_dlg(t,e,a);break;case"close":this.fireEvent("close_win",this,r.dlgresult||"ID_OK");break;case"update_params":case"upload_file":break;case"mapping":o._proc_action_mapping(t,r)}},_do_next:function(t,e,a){var o=this;a?a.execute(e,!1):setTimeout((function(){o._do_actions(t)}),o._atimer)},_proc_action_thread:function(t,e,a){var o=this;if(t&&t.length){for(var r=[];;){var n=t[0];if(!n)break;if("thread_end"==n.purpose){t.shift();break}"thread_start"==n.purpose||(t.shift(),r.push(n))}if(r.length){var i=new IG$.callBackObj(this,(function(a){if(a._has_error)return o._close_actions(t),void(e._has_error=!0);$.each(r,(function(n,i){if(i==a)return r.splice(n,1),0==r.length&&(e._has_error?o._close_actions(t):o._do_next(t,e,null)),!1}))}));$.each(r,(function(e,a){o._proc_action(t,a,i)}))}}return{}},_proc_action_onlinereport:function(t,e,a){var o,r,n=this,i=e.event,l={};o=n.ControlDict[(i.item?i.item.uid:null)||null];var c={source:"dashboard",params:n.getInputParams(i)};if(null==c.params)return e._has_error=!0,n._close_actions(t),l;if(o&&o.control.applicationItem){var s=o.control;o.property;r=new IG$.callBackObj(n,(function(o){1!=o?this._do_next(t,e,a):this._close_actions(t)})),s.eRun&&s.eRun(r,c)}else e._has_error=!0,IG$.ShowError("Item not found!"),n._close_actions(t);return l},_proc_action_valuelist:function(t,e,a){var o=this,r=(o.ControlDict,e.event);if(r.item&&r.item.uid){var n=new IG$._rpc$;return n.init(o,{ack:"olapservice",payload:{uid:r.item.uid,option:"valuelist"},mbody:{}},o,(function(a){var o=this,n=a?IG$.parseValueList([a]):null,i=n&&n.length?n[0]:null;(i=i||{}).data=i.data||[],$.each(r.params.oparams,(function(t,e){if("ctrl"==e.maptype&&e.value){var a=o.framecontent.controls[e.value.toLowerCase()];rctrl=o.ControlDict[e.value.toLowerCase()],rctrl=rctrl?rctrl.control:null,a&&rctrl&&rctrl.loadData&&rctrl.loadData(i)}})),o._do_next(t,e,null)}),null),void n.send()}return e._has_error=!0,IG$.ShowError("Item not found!"),o._close_actions(t),{}},_proc_action_execute_script:function(t,e,a){var o=this,r=e.event,n=e.args;if(o.mainDynScript){if(r.script){n.unshift(r.script);var i=o.mainDynScript.executeScript.apply(o.mainDynScript,n);o.mainDynScript.lastError?(IG$.ShowError(o.mainDynScript.lastError),e._has_error=!0,o._close_actions(t)):2===i||(0==i?o._close_actions(t):o._do_next(t,e,null))}}else e._has_error=!0,IG$.ShowError("Script loading error!"),o._close_actions(t);return{}},_proc_action_export:function(t,e,a){var o=this,r=e.event;if(r.exp_tmpl&&r.exp_out){var n,i=o.getExportData(),l=o.framecontent.item?o.framecontent.item.name:"",c=new IG$._rpc$;switch(r.exp_out){case"excel":n="xls";break;case"word":n="doc";break;default:n=r.exp_out}l=(l=(l=l||"unnamed").replace(/\./g,"_")).replace(/ /g,""),l+="."+n,c.init(o,{ack:"print",payload:{uid:o.uid,type:"TMPL",filename:l,fonttype:"",utemplate:"T",tmplpage:r.exp_tmpl,jasper_filetype:r.exp_out},mbody:i},o,o.rexportToFile,null,l),c.send()}else e._has_error=!0,IG$.ShowError("Error on export (template not loaded)!"),o._close_actions(t);return{}},_proc_action_servercall:function(t,e,a){var o=this,r=e.event,n={};if(r.jmodule&&r.jmethod){var i=new IG$._rpc$,l={};if(l.data=o.getInputParams(r),null==l.data)return e._has_error=!0,o._close_actions(t),n;i.init(o,{ack:"plugin",payload:{uid:o.uid,option:"exec",jmodule:r.jmodule,jmethod:r.jmethod},mbody:l,meta_type:"sysparams"},o,(function(o){var n,i,l,c,s,p,u=this,d=0,m={},h=0;if((i=new IG$.pluginResults(o)).resultmap)for(n in i.resultmap)if("grid"==i.resultmap[n].type)for(d=1,(l=i.resultmap[n])._headermap={},c=0;c<l.headers.length;c++)l._headermap[l.headers[c]]=c;for(n in r.params.oparams)(h=u.procSetParamValue(r.params.oparams[n],i))&&0==h.value&&(m[n]=r.params.oparams[n]);if(d)for(n in i.resultmap)if("grid"==i.resultmap[n].type)for(c in d=1,s=(l=i.resultmap[n]).data[0],m)void 0!==l._headermap[c]&&((p={resultmap:{}}).resultmap[c]={value:s?s[l._headermap[c]]:""},u.procSetParamValue(r.params.oparams[c],p));u._do_next(t,e,a)}),(function(){t.splice(0,t.length),o._$running=!1,o.customLoad(!1)})),i.send()}else e._has_error=!0,IG$.ShowError("Item not found!"),o._close_actions(t);return n},_proc_action_restcall:function(t,e,a){var o=this,r=e.event,n={};if(r.rmodule&&r.rmethod&&r.rhttpmethod){var i=new IG$._rpc$,l={};if(l.data=o.getInputParams(r),null==l.data)return e._has_error=!0,o._close_actions(t),n;i.init(o,{ack:"plugin",payload:{uid:o.uid,option:"exec",rmodule:r.rmodule,rmethod:r.rmethod,rhttpmethod:r.rhttpmethod},mbody:l,meta_type:"sysparams"},o,(function(o){var n,i,l,c,s,p,u=this,d=0,m={},h=0;if((i=new IG$.pluginResults(o)).resultmap)for(n in i.resultmap)if("grid"==i.resultmap[n].type)for(d=1,(l=i.resultmap[n])._headermap={},c=0;c<l.headers.length;c++)l._headermap[l.headers[c]]=c;for(n in r.params.oparams)(h=u.procSetParamValue(r.params.oparams[n],i))&&0==h.value&&(m[n]=r.params.oparams[n]);if(d)for(n in i.resultmap)if("grid"==i.resultmap[n].type)for(c in d=1,s=(l=i.resultmap[n]).data[0],m)void 0!==l._headermap[c]&&((p={resultmap:{}}).resultmap[c]={value:s?s[l._headermap[c]]:""},u.procSetParamValue(r.params.oparams[c],p));u._do_next(t,e,a)}),(function(){t.splice(0,t.length),o._$running=!1,o.customLoad(!1)})),i.send()}else e._has_error=!0,IG$.ShowError("Item not found!"),o._close_actions(t);return n},_proc_action_open_win:function(t,e,a){var o,r=this,n=e.event,i=n.item&&n.item.uid,l=n.params,c={},s={};if((o=l.iparams&&l.iparams.target_window?l.iparams.target_window:null)&&o.value&&o.type){var p=r.procGetParamValue(l.iparams.target_window);p&&p.value&&(i=p)}if(i){if(c.data=r.getInputParams(n),null==c.data)return e._has_error=!0,r._close_actions(t),s;var u=new IG$._rpc$;u.init(r,{ack:"helpcontent",payload:{uid:i},mbody:{option:"translate"}},r,(function(o){var r=o[0];if(r&&"Dashboard"==r.type&&1==n.ispopup){var i=this,l=r.attributes,s=l&&l.attrb1||"800",p=l&&l.attrb2||"600",u=new IG$.DashboardViewDlg({instance:i.instance,uid:r.uid,title:r.name,width:Number(s),height:Number(p),_ipcnt:c,callback:new IG$.callBackObj(i,(function(o){i._do_next(t,e,a)}))});u.on("close_win",(function(o,r){if("ID_OK"!=r)return t.splice(0,t.length),i._$running=!1,void i.customLoad(!1);if(o.framecontent&&o.framecontent.page_param_map){var l=o.framecontent.page_param_map,c=i.framecontent.page_param_map,s=n.params.oparams;$.each(s,(function(t,e){if(e.maptype&&"var"==e.maptype){var a=l[e.uid];c[e.uid]&&a&&c[e.uid].set(a.value)}}))}i._do_next(t,e,a)})),IG$.checkLogin(this,u)}else{var d=(i=this).instance.mainPanel;d&&d.navigateApp(r.uid,r.type.toLowerCase(),r.name,r.nodepath,!1,r.writable,null,{_ipcnt:c}),i._do_next(t,e,a)}}),!1),u.send()}else e._has_error=!0,IG$.ShowError("Error windows item!"),r._close_actions(t);return s},_proc_action_open_dlg:function(t,e,a){var o=this,r=e.event;switch(o.setLoading(!1),r.btntype){case"yesno":IG$.confirmMessages(r.dlgtitle,r.dlgmsg,(function(r){o._do_next(t,e,a)}),null,null,6);break;case"yesnocancel":IG$.confirmMessages(r.dlgtitle,r.dlgmsg,(function(r){o._do_next(t,e,a)}),null,null,14);break;default:IG$.alertmsg(r.dlgtitle,r.dlgmsg,(function(){o._do_next(t,e,a)}),null,2)}return{}},_proc_action_mapping:function(t,e,a){var o,r,n,l,c,s=this,p=e.event,u=p.params,d=(u.iparams,u.oparams),m={},h={};if(null==(o=s.getInputParams(p)))return e._has_error=!0,s._close_actions(t),h;for(i=0;i<o.length;i++)m[o[i].name]=o[i];for(r in d)l=d[r],(n=m[r])&&l.maptype&&l.value&&((c={resultmap:{}}).resultmap[l.name]={value:n.value},s.procSetParamValue(l,c));return s._do_next(t,e,null),h},_close_actions:function(t){this.setLoading(!1),t&&t.splice(0,t.length),this._$running=!1},updateEventValue:function(t){var e,a,o,r,n=this.framecontent.page_param_map;if(t.filtervalue=null,t.operator){if("control"==(e=t.valuemode)){var i=this.ControlDict[t.valuefield.toLowerCase()];i&&null!=(a=i.getSelectionData(t.valuefield))&&(t.filtervalue=a)}else"value"==e&&(a=[{code:t.valuetext}],t.filtervalue=a);if(a&&a.length>0)for(o=0;o<a.length;o++)(r=a[o].code)&&"{"==r.charAt(0)&&"}"==r.charAt(r.length-1)&&n[r=r.substring(1,r.length-1)]&&(r=n[r].get(),a[o].code=r)}},procGetParamValue:function(t){return this.procGetParamValueItem(t)},procGetParamValueItem:function(t){var e,a,o,r={},n=this.framecontent,i=t.maptype;return r.maptype=i,"var"==i?(a=n.page_param_map[t.value],r.ctrl=a,e=a?a.get():null):"ctrl"==i&&(t.value&&(a=this.ControlDict[t.value.toLowerCase()]),r.ctrl=a,a.clearInvalid(),a&&a.control&&a.control.getSelectionData?(o=a.control.getSelectionData(t))&&o.length>0&&(e=o[0].code):a&&a.control&&(e=a.control.get("text"))),r.value=e,r},procSetParamValue:function(t,e){var a,o=IG$.$cache.extra_sys_con?IG$.$cache.extra_sys_con.definitions:null,r=t.type,n=t.$ref;"array"==r||"object"==r?n&&o&&o[n]&&(a=o[n],$.each(a.properties,(function(t,e){}))):this.procSetParamValueItem(t,e)},procSetParamValueItem:function(t,e){var a,o,r,n,i,l={},c=this.framecontent,s=e?e.resultmap:null,p=s?s[t.name]:null,u=t.maptype;if(l.maptype=u,"var"==u)o=c.page_param_map[t.value],l.ctrl=o,p&&o.set("dataset"==p.type?p:p.value);else if("ctrl"==u)if(t.value&&(o=this.ControlDict[t.value.toLowerCase()]),l.ctrl=o,p)if("grid"==p.type)if(o.control.applyDataSet)o.control.applyDataSet(p);else{if(!p._headermap)for(p._headermap={},r=0;r<p.headers.length;r++)p._headermap[p.headers[r]]=r;void 0!==(i=p._headermap[o.ctrlname])&&p.data.length&&p.data[0].length>i&&(n=p.data[0][i]),o.control.set("text",n)}else o.control.set("text",p.value);else a=!1;return l.value=a,l},getInputParams:function(t){var e,a,o,r,n=[];if(t.params)for(e in t.params.iparams)a=t.params.iparams[e],"ctrl"==(o=this.procGetParamValue(a)).maptype&&o.ctrl&&o.ctrl.clearInvalid(),a.required&&!o.value&&"ctrl"==o.maptype&&(r=1,o.ctrl&&o.ctrl.markInvalid()),n.push({uid:a.uid,name:a.name,value:o?o.value:null});return r?null:n},rexportToFile:IG$.reportbase$.rexportToFile,getExportData:function(){var t={items:[]};return $.each(this.ControlItems,(function(e,a){var o,r=a.control;if(r)switch(o=r.ctrl.ctrlname||"",r.type){case"olapreport":r.viewer&&t.items.push(r.viewer.getExportData({},"jasper",!1,!0,o));break;case"dashboard":r.viewer&&t.items.push({name:o,type:"dashboard",data:r.viewer.getExportData()});break;case"label":t.items.push({type:"text",name:o,data:r.get("text")})}})),t},validateSize:function(){var t=this,e=t.dashboardcnt;t._vtimer&&clearTimeout(t._vtimer),t._vtimer=setTimeout((function(){t._validating||(t._validating=!0,cw=IG$.j$ext._w(e),ch=IG$.j$ext._h(e),t.fieldlabelwidth=0,t.validateSubSize(null,t.RootControlItems,cw,ch,!0),t.fieldlabelwidth&&t.validateLabelSize(t.RootControlItems),t._validating=!1)}),10)},validateSubSize:function(t,e,a,o,r){var n,i,l,c,s,p,u=this,d=[],m=0,h=u.dashboardcnt.offset(),_=0;for(n=0;n<e.length;n++){if(i=e[n],cstr=i.control.html,i.control.el$.css({minWidth:"",minHeight:i.property.minHeight?i.property.minHeight+"px":""}),l=i.property.flex||2,c=Math.floor(a/u.gridsize*l),cstr[0].style.width=c-2+"px",s=i.property.flexHeight||0,i.control.tl$.css("width","auto"),s&&(d.push(i),m+=s),i.control.invalidate(),i.layouts&&i.layouts.length&&(c=cstr.width(),s=cstr.height(),u.validateSubSize(i,i.layouts,c,s,!1)),i.property.visible&&i.property.fieldlabel){var f=i.property.labelwidth||0;u.fieldlabelwidth=Math.max(u.fieldlabelwidth,f||i.control.tl$.width())}p=cstr.offset(),_=Math.max(p.top-h.top+cstr.height()+2,_)}if(m){var v,g,y=0;for(n=0;n<d.length;n++)y+=d[n].control.html.height();if(v=o-_+y)for(g=v/m,n=0;n<d.length;n++){i=d[n],cstr=i.control.html,s=i.property.flexHeight;var $=Math.floor(s*g);cstr[0].style.height=$+"px",i.control.invalidate(),i.layouts&&i.layouts.length&&(c=cstr.width(),s=cstr.height(),u.validateSubSize(i,i.layouts,c,s))}}},validateLabelSize:function(t){var e,a,o=this.fieldlabelwidth;for(e=0;e<t.length;e++){if((a=t[e]).property.visible&&a.property.fieldlabel){var r=a.property.labelwidth||0;a.control.tl$.width(r||o)}a.layouts&&a.layouts.length&&this.validateLabelSize(a.layouts)}},_capture_frame:function(){var t=this,e=t.dashboardview;e&&t.uid&&window.bowser&&!window.bowser.msie&&setTimeout((function(){var a=function(){html2canvas(e[0],{logging:!0}).then((function(e){document.body.appendChild(e);var a=e.toDataURL("image/png"),o=new IG$._rpc$;o.init(t,{ack:"uploadcontent",payload:{uid:t.uid},mbody:{option:"scr_capture",data:a}},t,(function(t){IG$.alertmsg(ig$.appname,IRm$.r1("L_COMP_CAPTURE"),null,null,0,"success")})),o.send()}))};window.html2canvas?a():IG$.getScriptCache(["./js/html2canvas.min.js"],new IG$.callBackObj(t,(function(){a()})))}),500)},$set_params:function(t){var e;t.$rel_params.length&&(t.value=t.orig_value,$.each(t.$rel_params,(function(e,a){var o=t.set_param(a.name,a.val());t.value=o})),"ctrl"==t.type&&(e=this.ControlDict[t.uid.toLowerCase()])&&e.control.set("text",t.value))},$load_data:function(t,e){var a,o,r,n,i=[],l={},c=t.rowfix,s=t.colcnt,p=t._tabledata;for(a=0;a<s;a++){for(o=0;o<c;o++)r=p[o][a],n=0==o?r.code:n+":"+r.code;i.push(n),l[n]=a+1}this._loaded_data={rowfix:c,data:t,headers:i,header_map:l,length:p.length-c},this._load_data(e)},_load_data:function(t,e){var a=this,o=a._loaded_data;if(o&&!(e&&(o.index=o.index||0,(t=o.index+e)<0||t>=o.length))){o.index=t;var r,n=o.data._tabledata,i=o.rowfix,l=o.header_map;r=n[i+t],$.each(l,(function(t,e){var o=a.ControlDict[t.toLowerCase()],n=r?r[e-1].code:null;o&&o.control.set("text",n)}))}},initComponent:function(){var t=this;$s.apply(t,{hiddenPkgs:[],_emode:1,ActionEvents:{},ControlDict:{},ControlDictNames:{},ControlItems:[],RootControlItems:[],initialized:!1,refreshmode:"F",closable:!0,autoScroll:!1,collapseFirst:!1}),t.on("afterrender",(function(t){t.dashboardcnt=$(".dashboard_cnt",t.body.dom),t.dashboardview=$(".dashboardview",t.dashboardcnt)}),t),t.items||(t.items=[{xtype:"container",html:"<div class='dashboard_cnt'><div class='dashboardview'></div></div>"}],t.listeners={afterrender:function(t){var e=t;!e.initialized&&e.uid&&e.uid.length>0&&e.procRunDashboard()},resize:function(t,e,a,o,r){t.validateSize()}}),IG$.DashboardView.superclass.initComponent.call(this)}}),IG$.DashboardViewDlg=$s.extend($s.window,{modal:!0,layout:"fit",closable:!0,resizable:!1,width:600,height:500,confirmSettings:function(){var t=this;t.callback&&t.callback.execute(["ok",t]),t.close()},initComponent:function(){var t=this;t.on("close",(function(){t._ignore_close||t.fireEvent("close_win",t.dmain,"CLOSE")})),$s.apply(this,{items:[],listeners:{afterrender:function(t){var e=this;e.dmain=new IG$.DashboardView({instance:e.instance,uid:e.uid,closable:!0,header:!1,border:0,_ipcnt:e._ipcnt}),e.dmain.on("meta_loaded",(function(t,a){a.title&&e.setTitle(a.title)})),e.dmain.on("close_win",(function(){e._ignore_close=!0,setTimeout((function(){e.close()}),10)})),e.add(e.dmain)}}}),IG$.DashboardViewDlg.superclass.initComponent.apply(this,arguments)}});
IG$.dlgCellConfig=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!1,width:600,height:620,sheetoption:null,callback:null,_confirm:function(){var e=this,t=e.item||null,o=e.record||null;if(t&&o){var a=e.down("[name=cb_sortdir]").getGroupValue(),i=(e.down("[name=cb_sorttype]"),e.down("[name=cb_sorttype]").getGroupValue()),l=e.item.itemtype;e.sheetoption&&e.sheetoption.model.sheet_formula;o.set("sortorder",""==a?null:a),o.set("memo",""==i?null:i),o.set("aggrfunc",e.down("[name=aggrfunc]").getValue()),o.set("disp_title",e.down("[name=disp_title]").getValue()),o.set("hidecolumn",e.down("[name=hidecolumn]").getValue()),o.set("timeformat",e.down("[name=timeformat]").getValue()),"Measure"!=l&&"FormulaMeasure"!=l&&"MeasureGroup"!=l||o.set("activeformula",null)}e.callback&&e.callback.execute(),e.close()},init_f:function(){var e=this;if(e.formulas=[],e.item){var t,o,a=e.item.sortorder||"",i=e.down("[name=optsortdir]"),l=e.item.memo||"",n=e.down("[name=optsorttype]"),r=e.down("[name=aggrfunc]"),s=e.down("[name=disp_title]"),m=e.down("[name=timeformat]"),d=e.down("[name=hidecolumn]");e.item.itemtype;if(i.setValue({cb_sortdir:[a]}),n.setValue({cb_sorttype:[l]}),r.setValue(e.item.aggrfunc||""),s.setValue(e.item.disp_title||""),m.setValue(e.item.timeformat||""),d.setValue(e.item.hidecolumn),e.sheetoption&&e.sheetoption.model.sheet_formula){for(o=e.sheetoption.model.sheet_formula,t=0;t<o.length;t++)o[t].baseuid==e.item.uid&&e.formulas.push(o[t]);e.down("[name=grd_formula]").store.loadData(e.formulas)}}},editFormula:function(e){var t=this,o=t.sheetoption.model.sheet_formula,a=t.item;dlg=e?new IG$.dlgFormulaConfig({instance:t.instance,rec:e,sheetoption:t.sheetoption,uitem:a}):new IG$.dlgFormulaSelector({instance:t.instance,baseconfig:t,sheetoption:t.sheetoption,formulas:o,uitem:a,pselect:e,callback:new IG$.callBackObj(t,(function(e){var t,i=o;for(t=i.length-1;t>=0;t--)i[t].baseuid==a.uid&&i.splice(t,1);for(t=0;t<e.length;t++)i.push(e[t]);this.down("[name=grd_formula]").store.loadData(e)}))}),IG$.checkLogin(t,dlg)},initComponent:function(){var e=this,t=e.item;t&&t.itemtype;$s.apply(this,{title:IRm$.r1("T_METRIC_SETTING"),padding:ig$.padding,items:[{xtype:"panel",layout:"anchor",autoScroll:!0,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_SORT_SEL"),layout:"anchor",defaults:{anchor:"100%"},disabled:"mea"==e.loc,items:[{xtype:"radiogroup",name:"optsortdir",fieldLabel:IRm$.r1("L_SORT_ORD"),plain:!0,items:[{boxLabel:IRm$.r1("B_DEFAULT"),name:"cb_sortdir",inputValue:"",checked:!0},{boxLabel:IRm$.r1("B_ASC"),name:"cb_sortdir",inputValue:"asc"},{boxLabel:IRm$.r1("B_DSC"),name:"cb_sortdir",inputValue:"desc"}]},{xtype:"radiogroup",name:"optsorttype",fieldLabel:IRm$.r1("L_SORT_TP"),plain:!0,items:[{boxLabel:IRm$.r1("B_DEFAULT"),name:"cb_sorttype",inputValue:"",checked:!0},{boxLabel:IRm$.r1("B_STRING"),name:"cb_sorttype",inputValue:"VARCHAR"},{boxLabel:IRm$.r1("B_NUMERIC"),name:"cb_sorttype",inputValue:"NUMBER"}]}]},{xtype:"fieldset",title:IRm$.r1("L_OTHER_OPTION"),layout:"anchor",$w:400,defaults:{anchor:"100%",$w:400},items:[{xtype:"textfield",name:"disp_title",fieldLabel:IRm$.r1("L_DISP_TITLE")},{xtype:"checkbox",name:"hidecolumn",fieldLabel:IRm$.r1("L_COL_VIS"),boxLabel:IRm$.r1("B_HIDE")},{xtype:"textfield",name:"timeformat",fieldLabel:IRm$.r1("L_TIME_FMT")},{xtype:"displayfield",value:IRm$.r1("L_TIME_FMT_DSC")}]},{xtype:"fieldset",title:IRm$.r1("L_AGGR"),layout:"anchor",hidden:"Metric"!=e.item.type||"mea"!=e.loc,defaults:{anchor:"100%"},items:[{xtype:"combobox",name:"aggrfunc",fieldLabel:IRm$.r1("L_FUNC"),displayField:"name",valueField:"value",queryMode:"local",editable:!1,store:{xtype:"store",fields:["name","value"],data:[{name:"Not Use",value:""},{name:"Sum values",value:"SUM"},{name:"Count rows",value:"COUNT"},{name:"Distinct count",value:"COUNT_DISTINCT"},{name:"Minimum",value:"MIN"},{name:"Maximum",value:"MAX"},{name:"Average",value:"AVG"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_FORMULA"),layout:"fit",height:160,items:[{xtype:"gridpanel",border:0,name:"grd_formula",bbar:[{text:IRm$.r1("L_CONFIG_FORMULA"),handler:function(){this.editFormula()},scope:this}],store:{xtype:"store",fields:["title","expression","baseuid","fid"]},columns:[{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"title"},{text:IRm$.r1("L_EXPRESSION"),flex:1,dataIndex:"expression"},{xtype:"actioncolumn",width:50,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_EDIT"),handler:function(e,t,o){var a=e.store.getAt(t);this.editFormula(a)},scope:this},{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(t,o,a){var i,l=t.store,n=l.getAt(o),r=e.sheetoption.model.sheet_formula,s=n.get("baseuid"),m=n.get("fid");for(l.removeAt(o),i=0;i<r.length;i++)if(r[i].baseuid==s&&r[i].fid==m){r.splice(i,1);break}}}]}]}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this.init_f()}}}),IG$.dlgCellConfig.superclass.initComponent.apply(this,arguments)}});
IG$.metricSetting=$s.extend($s.window,{modal:!0,layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!1,width:480,height:430,_confirm:function(){var e=this;if(e.item){var t,a=e.down("[name=cb_sortdir]").getGroupValue(),n=(e.down("[name=cb_sorttype]"),e.down("[name=cb_sorttype]").getGroupValue()),i=e.down("[name=optstyle]"),o=e.down("[name=optremoveblank]"),l=e.down("[name=isdatetype]"),m=e.down("[name=dateformat]"),d=IG$.majorDateformat,s="";for(e.item.sortorder=""==a?null:a,e.item.sorttype=""==n?null:n,e.item.removeblank=o.getValue(),e.item.stylename=i.getValue(),e.item.isdatetype=l.getValue(),e.item.dateformat=m.getValue(),t=0;t<d.length;t++)1==e.down("[name=datediv_"+d[t].name+"]").getValue()&&(s=""==s?d[t].name:s+";"+d[t]);e.item.dateitems=s,e.item.datecustom=e.down("[name=customdatetype]").getValue()}e.callback&&e.callback.execute(e.item),e.close()},init_f:function(){var e=this;e.formulas=[],e.item&&e.applyItemInfo()},applyItemInfo:function(){var e,t,a=this,n=a.item.sortorder||"",i=a.down("[name=optsortdir]"),o=a.item.sorttype||"",l=a.down("[name=optsorttype]"),m=a.down("[name=optstyle]"),d=a.down("[name=optremoveblank]"),s=a.down("[name=isdatetype]"),r=a.down("[name=dateformat]");IG$.majorDateformat;if(i.setValue({cb_sortdir:[n]}),l.setValue({cb_sorttype:[o]}),d.setValue(a.item.removeblank||!1),s.setValue(a.item.isdatetype||!1),r.setValue(a.item.dateformat||""),m.setValue(a.item.stylename||""),a.item.dateitems)for(t=a.item.dateitems.split(";"),e=0;e<t.length;e++)a.down("[name=datediv_"+t[e]+"]").setValue(!0);a.down("[name=customdatetype]").setValue(a.item.datecustom||"")},changeDateFormat:function(){this.down("[name=dateformat]").setValue("")},initComponent:function(){var e,t=this,a=[];if(t.title=IRm$.r1("T_METRIC_SETTING"),a.push({name:"-Item Default-",value:""}),t.styles&&t.styles.length>0)for(e=0;e<t.styles.length;e++)a.push({name:t.styles[e].name,value:t.styles[e].name});$s.apply(t,{border:0,padding:ig$.padding,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:ig$.padding,border:0,autoScroll:!0,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_SORTING"),layout:"anchor",padding:ig$.padding,defaults:{anchor:"100%"},items:[{xtype:"radiogroup",name:"optsortdir",fieldLabel:IRm$.r1("L_SORT_DIR"),plain:!0,items:[{boxLabel:IRm$.r1("B_DEFAULT"),name:"cb_sortdir",inputValue:"",checked:!0},{boxLabel:IRm$.r1("B_ASC"),name:"cb_sortdir",inputValue:"asc"},{boxLabel:IRm$.r1("B_DESC"),name:"cb_sortdir",inputValue:"desc"}]},{xtype:"radiogroup",name:"optsorttype",fieldLabel:IRm$.r1("L_SORT_TYPE"),plain:!0,items:[{boxLabel:IRm$.r1("B_DEFAULT"),name:"cb_sorttype",inputValue:"",checked:!0},{boxLabel:IRm$.r1("B_STRING"),name:"cb_sorttype",inputValue:"VARCHAR"},{boxLabel:IRm$.r1("B_NUMERIC"),name:"cb_sorttype",inputValue:"NUMBER"}]}]},{xtype:"fieldset",title:IRm$.r1("L_STYLE"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"combobox",name:"optstyle",fieldLabel:IRm$.r1("L_BASE_STYLE"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:a}}]},{xtype:"fieldset",title:IRm$.r1("L_OTHER_OPTIONS"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"checkbox",name:"optremoveblank",boxLabel:IRm$.r1("L_IGN_BLK_VAL")},{xtype:"checkbox",name:"isdatetype",boxLabel:IRm$.r1("L_DT_TYPE_FIELD"),listeners:{change:function(e,t,a,n){var i=this,o=e.getValue(),l=i.down("[name=datedivision]"),m=i.down("[name=customdatetypecontainer]"),d=i.down("[name=datediv_CUSTOM]");l.setVisible(o),1==o&&1==d.getValue()?m.setVisible(!0):m.setVisible(!1)},scope:this}},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_DATE_FORMAT"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"dateformat",flex:1},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),menu:{items:[{text:"2001.07.04 AM 12:08:56",value:"yyyy.MM.dd a HH:mm:ss",handler:function(){t.down("[name=dateformat]").setValue(this.value)}},{text:"2001-07-04 AM 12:08:56",value:"yyyy-MM-dd a HH:mm:ss",handler:function(){t.down("[name=dateformat]").setValue(this.value)}},{text:"Wed, Jul 4, '01",value:"EEE, MMM d, ''yy",handler:function(){t.down("[name=dateformat]").setValue(this.value)}},{text:"20010704120856",value:"yyyyMMddHHmmss",handler:function(){t.down("[name=dateformat]").setValue(this.value)}}]}}]}]},{fieldLabel:IRm$.r1("L_GROUP_LEVEL"),name:"datedivision",hidden:!0,xtype:"checkboxgroup",columns:3,plain:!0,items:[{boxLabel:IRm$.r1("B_YEAR"),name:"datediv_YYYY",inputValue:"YYYY"},{boxLabel:IRm$.r1("B_QUARTER"),name:"datediv_QUARTER",inputValue:"QUARTER"},{boxLabel:IRm$.r1("B_MONTH"),name:"datediv_MM",inputValue:"MM"},{boxLabel:IRm$.r1("B_DAY"),name:"datediv_DD",inputValue:"DD"},{boxLabel:IRm$.r1("B_WEEKMONTH"),name:"datediv_WM",inputValue:"WM"},{boxLabel:IRm$.r1("B_WEEK"),name:"datediv_WEEK",inputValue:"WEEK"},{boxLabel:IRm$.r1("B_AMPM"),name:"datediv_AMPM",inputValue:"AMPM"},{boxLabel:IRm$.r1("B_HOUR"),name:"datediv_HH",inputValue:"HH"},{boxLabel:IRm$.r1("B_MINUTE"),name:"datediv_MI",inputValue:"MI"},{boxLabel:IRm$.r1("B_CUSTOM"),name:"datediv_CUSTOM",inputValue:"CUSTOM",listeners:{change:function(e,t,a,n){var i=e.getValue();this.down("[name=customdatetypecontainer]").setVisible(1==i)},scope:this}}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_CUSTOM"),name:"customdatetypecontainer",hidden:!0,layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"customdatetype",flex:1},{xtype:"button",text:IRm$.r1("B_EXAMPLE"),menu:{items:[{text:"2001.07.04 AM 12:08:56",value:"yyyy.MM.dd a HH:mm:ss",handler:function(){t.down("[name=customdatetype]").setValue(this.value)}},{text:"2001-07-04 AM 12:08:56",value:"yyyy-MM-dd a HH:mm:ss",handler:function(){t.down("[name=customdatetype]").setValue(this.value)}},{text:"Wed, Jul 4, '01",value:"EEE, MMM d, ''yy",handler:function(){t.down("[name=customdatetype]").setValue(this.value)}},{text:"20010704120856",value:"yyyyMMddHHmmss",handler:function(){t.down("[name=customdatetype]").setValue(this.value)}}]}}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this.init_f()}}}),IG$.metricSetting.superclass.initComponent.apply(this,arguments)}});
IG$.c$pivot=$s.extend($s.gridpanel,{border:0,initComponent:function(){var e=this,t=e.ptr_p;$s.apply(this,{hideHeaders:!0,tools:[{type:"clear",handler:function(){var e,o,i=this;for(e=i.store.data.items.length-1;e>=0;e--)(o=i.store.data.items[e]).data.uid&&i.__loc&&(i.store.remove(o),t.postDropItem(o.data.location,o.data.li,i.__loc1))},scope:this}],store:{xtype:"store",fields:["name","nodepath","li","activeformula","itemtype","memo","sortorder","type","uid","iupd","disp_title","hidecolumn","timeformat","aggrfunc","iconcls","lname","ispageitem"]},viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_"},__ing:1,listeners:{beforedrop:function(e,o,i,n,r){var a,s,l,c,d,p,m,u,_,g,h,f,v,y,w=!1,I=i?i.data.li:-1,b=!1,C=(t.reportmode,t.down("[name=bcluster]").getValue()),R=0,x=this.panel,T=t.down("[name=dataquerymode]").getValue();for("M_PIVOT_CLUSTER"==T&&(T="M_PIVOT"),o.copy=!o.view.__ing,l=x.location,a=i?x.store.indexOf(i):0,"after"==n&&a++,u="rc"==l||"rm"==l,m=0;m<o.records.length;m++){if(s=o.records[m],b=!1,u)h=["pivotgrid_row","pivotgrid_rpt_col","pivotgrid_rpt_mea"],$.each(h,(function(e,o){var i,n=t.down("[name="+o+"]").store.data.items;for(i=0;i<n.length;i++)if(trec=n[i],trec.get("uid")==s.get("uid")){b=!0;break}if(1==b)return!1}));else if("M_DATA"==T?(h=["pivotgrid_row"],f=["pivotgrid_col","pivotgrid_mea","pivotgrid_cls"]):h=["pivotgrid_row","pivotgrid_col","pivotgrid_mea","pivotgrid_cls"],$.each(h,(function(e,o){var i,n=t.down("[name="+o+"]").store.data.items;if("pivotgrid_cls"!=o||C){for(i=0;i<n.length;i++)if(n[i].get("uid")==s.get("uid")){b=!0;break}return 1!=b&&void 0}})),f)for(p=0;p<f.length;p++)for(d=(y=(v=t.down("[name="+f[p]+"]")).store.data.items).length-1;d>=0;d--)y[d].get("uid")==s.get("uid")&&v.store.remove(y[d]);if(s&&0==b)switch("link"==(c=(_={type:(g=s.data).type,rawtype:g.rawtype,uid:g.uid,name:g.name,address:g.address,nodepath:g.nodepath,lname:g.lname,datatype:g.datatype,sql_id:g.sql_id}).type.toLowerCase())&&(c=_.rawtype?_.rawtype.toLowerCase():null),c){case"measure":case"measuregroup":case"formulameasure":case"chartmeasure":case"metric":case"measuregroupdimension":case"tabdimension":case"custommetric":case"groupfield":case"hierarchy":case"udg":_.location=l,_.li=I,_.iconcls=IG$.get_metatype_icon(c,_),"m"!=l&&"rm"!=l||"measure"==c||_.aggrfunc||("NUMERIC"==_.datatype?_.aggrfunc="SUM":_.aggrfunc="COUNT"),_=this.store.insert(a+R++,_),t.postDropItem(_.location,_.li,u)}else s&&0==o.copy&&("link"==(c=(g=s.data).type.toLowerCase())&&(c=g.rawtype?g.rawtype.toLowerCase():null),w="datemetric"!=c,"m"!=l&&"rm"!=l||"measure"==c||g.aggrfunc?!g.aggrfunc||"c"!=l&&"rc"!=l&&"r"!=l&&"rr"!=l||s.set("aggrfunc",""):s.set("aggrfunc","COUNT"),t.postDropItem(g.location,g.li,u))}return w},drop:function(e,t,o,i){var n=!1;if(0==t.copy&&o){t.records[0].get("li"),o&&this.panel.store.indexOf(o);"after"==i&&0,n=!1}return n}}},columns:[{text:"",dataIndex:"iconcls",menuDisabled:!0,width:30,renderer:function(e,t,o,i,n,r){return"<div class='igc_g_icon "+e+"' title='"+(o.get("nodepath")||"")+"'></div>"}},{dataIndex:"name",flex:1,renderer:function(o,i,n,r,a,s){var l=n.get("type").toLowerCase(),c=[];"link"==l&&(l=(n.get("rawtype")||l).toLowerCase());var d=n.get("aggrfunc"),p="M_DATA"==t.down("[name=dataquerymode]").getValue(),m=n.get("has_error"),u=n.get("error_messages"),_=("metric"==l||"custommetric"==l||"udg"==l)&&(p||"rm"==e.location||"m"==e.location||d),g=n.get("hidecolumn")?"color:#C7C7C7":"";return m&&(g="color:#ff0000"),c.push("<div class='igc-pivot-field' style='"+g+"' title='"+(n.get("nodepath")||"")+"'>"),c.push(n.get("lname")||n.get("name")),u&&c.push(" * "+u.join(",")),c.push(_?"<div class='igc-aggr-sel'><div class='sel-icon'></div><span>"+(d?d.toLowerCase():"")+"</span></div>":""),c.push("</div>"),c.join("")}},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-config",tooltip:"Config Item",handler:function(e,o,i){var n,r=e.store.data.items[o];e.__loc||(e=e.ownerCt),r.get("uid")&&("link"==(n=r.get("type").toLowerCase())&&(n=(r.get("rawtype")||n).toLowerCase()),"hierarchy"!=n&&"hierarchymetric"!=n&&(r.set("iupd",!0),t.beginItemCfg(r,e.__loc,e.__loc1)))},scope:this},{iconCls:"icon-grid-delete",tooltip:"Remove Item",handler:function(e,o,i){var n=e.store.data.items[o];e.__loc||(e=e.ownerCt),n.data.uid&&(e.store.remove(n),t.postDropItem(n.data.location,n.data.li,e.__loc1))},scope:this}]}],listeners:{afterrender:function(e){var o=e,i=$(e.el.dom);i.on("click",".igc-aggr-sel",(function(e){e.stopPropagation();var n=o.getSelectionModel().selected;n&&n.length&&t.showAggr(n.items[0],i,this)}))},scope:this}}),IG$.c$pivot.superclass.initComponent.call(this)}}),IG$.c$pivotRpt=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:450,autoHeight:!0,initApp:function(){var e=this,t=e._dt;e._f=["name","measureposition","measuretitle","ext_title"],t&&$.each(e._f,(function(o,i){var n,r=e.down("[name="+("name"==i?"t":"")+i+"]");n=t[i],r.setValue(n)}))},_confirm:function(){var e=this,t=e.callback,o=e._dt;o&&$.each(e._f,(function(t,i){var n;n=e.down("[name="+("name"==i?"t":"")+i+"]").getValue(),o[i]=n})),t&&t.execute(),e.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_P_RPT_C"),items:[{xtype:"panel",bodyPadding:ig$.padding,layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"textfield",name:"tname",fieldLabel:IRm$.r1("B_NAME")},{xtype:"numberfield",name:"measureposition",fieldLabel:IRm$.r1("L_M_POSITION"),minValue:0,maxValue:99,value:0,anchor:"60%"},{xtype:"checkbox",name:"measuretitle",fieldLabel:IRm$.r1("L_M_TITLE"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"textfield",name:"ext_title",fieldLabel:IRm$.r1("L_M_EXT_TITLE")}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.c$pivotRpt.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(e){e.initApp()}}}),IG$.c$pivotPnl=$s.extend($s.panel,{floatable:!1,collapseFirst:!1,bodyBorder:!1,activeItem:0,margins:"0 0 0 0",cmargins:"0 0 0 0",browser:null,pivotchanged:!1,autoScroll:!1,border:0,layout:{type:"vbox",align:"stretch"},droptarget:null,metriclistview:null,sheetoption:null,spl:"5.Splice with",_pivotChanged:!1,fct:"uid;name;itemtype;rawtype;rawuid;sql_id;type;sortorder;nodepath;memo;pid;description;activeformula;rankcount;aggrfunc;disp_title;hidecolumn;timeformat;ispageitem;datatype",setPivotInfo:function(e){var t=this;t.sheetoption=e,t.rendered&&t.applCurPivotInfo()},applCurPivotInfo:function(){var e,t=this,o=t.reportoption,i=t.sheetoption?t.sheetoption.model:null;if(i&&t.peditor){var n,r,a,s=t.down("[name=dataquerymode]"),l=(t.down("[name=pivotgrid_rpt]"),t.down("[name=pivotgrid_rpt_item]")),c=t.down("[name=bcluster]"),d=t.down("[name=syncrows]"),p=t.down("[name=sync_view]"),m=t.down("[name=sync_target]"),u=[];n=i.dataquerymode,r=[{aname:"rows",bname:"row",li:0},{aname:"cols",bname:"col",li:2},{aname:"measures",bname:"mea",li:1},{aname:"clusters",bname:"cls",li:1}],$.each(r,(function(e,o){var n,r,a=i[o.aname],s=[];if(a&&a.length)for(n=0;n<a.length;n++)"link"==(r=a[n].type.toLowerCase())&&(r=(a[n].rawtype||r).toLowerCase()),a[n].li=o.li,a[n].iconcls=IG$.get_metatype_icon(r,a[n]),s.push(a[n]);t.down("[name=pivotgrid_"+o.bname+"]").store.loadData(s)})),4,i.report_items&&i.report_items.length?(a=i.report_items,t.procRptItems(a,4)):a=i.report_items=[{name:t.pivot_unit,itemtype:"unit",measures:t.measures,cols:t.cols}],d.setValue(i.syncrows),l.store.loadData(a),t.updateColor(i.c1),t._dmode_sys=1,i.bcluster&&(n="M_PIVOT_CLUSTER"),s.setValue(n),t._dmode_sys=0,u=[{name:"Select Sheet",value:""}],$.each(o.sheets,(function(e,t){t.model&&t.model!=i&&t.model.layoutinfo&&u.push({name:t.name||"sheet "+e,value:t.model.layoutinfo.docid})})),m.store.loadData(u),m.setValue(i.sync_target||""),p.setVisible("M_SYNC"==n),c.setValue(i.bcluster),(e=t.down("[name=feditor]")).reportoption=o,e.sheetoption=t.sheetoption,e._init()}t.checkCubeJoins()},checkCubeJoins:function(){var e=this;"sql_report"!=e.meta_type&&(e._check_join_timer&&clearTimeout(e._check_join_timer),e._check_join_timer=setTimeout((function(){var t=new IG$._rpc$,o=[];e.sheetoption&&e.gatherMetrics(o,e.sheetoption.model),o.length?(t.init(e,{ack:"olapservice",payload:{option:"checkjoins"},mbody:{children:o},meta_type:"metrics"},e,(function(t){e.fireEvent("join_tables",t)})),t.send()):e.fireEvent("join_tables",null)}),500))},gatherMetrics:function(e,t){var o=this;t&&$.each(["pivotgrid_row","pivotgrid_col","pivotgrid_mea","pivotgrid_cls"],(function(t,i){var n=o.down("[name="+i+"]").store.data.items;if(n.length)for(t=0;t<n.length;t++)e.push(n[t].data)}))},loadReport:function(){var e=this,t=e.down("[name=pivotgrid_rpt_col]"),o=e.down("[name=pivotgrid_rpt_mea]");t.store.loadData(e._a_rpt.cols||[]),o.store.loadData(e._a_rpt.measures||{}),e.updateColor(e._a_rpt.c1)},procRptItems:function(e,t){var o,i,n,r;for(o=0;o<e.length;o++){if((r=e[o]).name=r.name||this.pivot_unit,r.cols&&r.cols.length>0)for(i=0;i<r.cols.length;i++)(n=r.cols[i]).li=t,n.iconcls=IG$.get_metatype_icon(n.type.toLowerCase(),n);if(r.measures&&r.measures.length>0)for(i=0;i<r.measures.length;i++)(n=r.measures[i]).li=t,n.iconcls=IG$.get_metatype_icon(n.type.toLowerCase(),n)}},hasPivotField:function(e){var t=this,o=null,i=t.down("[name=bcluster]").getValue();return $.each(["pivotgrid_row","pivotgrid_col","pivotgrid_mea","pivotgrid_cls"],(function(n,r){var a,s,l=t.down("[name="+r+"]").store;if("pivotgrid_cls"!=r||i){for(s=0;s<l.data.items.length;s++)if((a=l.data.items[s]).get("uid")==e.uid){o=a;break}return!o&&void 0}})),o},postDropItem:function(e,t,o){var i=this;i.checkCubeJoins(),o&&i.confirmRptItem(i._a_rpt)},confirmRptItem:function(e){var t=this;t.fct.split(";");e.cols=[],e.measures=[],$.each(["pivotgrid_rpt_col","pivotgrid_rpt_mea"],(function(o,i){var n,r,a,s,l=t.down("[name="+i+"]");for(s=l.location,n=0;n<l.store.data.items.length;n++)if((r=l.store.data.items[n].data).uid)switch(a={},r.itemtype=r.type||r.itemtype,IG$.CopyObject(r,a,t.fct),r.iupd=!1,s){case"rc":e.cols.push(a);break;case"rm":e.measures.push(a)}}))},beginItemCfg:function(e,t,o){new IG$.dlgCellConfig({sheetoption:this.sheetoption,item:e.data,record:e,loc:t,reportoption:this.reportoption,callback:new IG$.callBackObj(this,(function(){this.rbeginItemCfg(e),o&&this.postDropItem(null,null,!0)}),null)}).show()},rbeginItemCfg:function(e){},listeners:{afterrender:function(){var e=this;e.peditor=e.down("[name=peditor]"),e.sheetoption&&e.applCurPivotInfo()}},initUI:function(){var e=this,t=this.down("[name=c_z]"),o=$(".igc-p-color",t.el.dom),i=$(".igc-p-remove",t.el.dom),n=$("span",o);i.bind("click",(function(){e.setColor(null)})),n.bind("click",(function(){})),this._dropzone=$s.create($s.dropzone,o[0],{ddGroup:"_I$RD_G_",nodeouttimer:-1,getTargetFromEvent:function(e){e.browserEvent.pageX||e.browserEvent.clientX,e.browserEvent.pageY||e.browserEvent.clientY;return t},onNodeEnter:function(e,t,o,i){var n=!1;i.records&&i.records.length>0&&"Measure"==i.records[0].get("type")&&(n=!0),this.accept=n},onNodeOver:function(e,t,o,i){var n=1==this.accept;return 1==this.accept&&i.records&&i.records.length>0&&i.records[0].data,n},onNodeDrop:function(t,o,i,n){var r,a;return 1==this.accept&&n.records&&n.records.length>0&&(a=n.records[0].data,r={},IG$.CopyObject(a,r,e.fct),e.setColor([r])),this.accept=!1,!0}})},setColor:function(e){var t=this,o=t.sheetoption.model,i=t.down("[name=dataquerymode]").getValue();"M_PIVOT_CLUSTER"==i&&(i="M_PIVOT"),"M_REPORT"==i?t._a_rpt&&(t._a_rpt.c1=e):"M_PIVOT"==i&&(o.c1=e),t.updateColor(e)},showAggr:function(e,t,o){var i,n,r,a=$(o),s=$(document),l=s.width(),c=(s.height(),a.parent(),a.offset()),d=(a.width(),a.height());i=new $s.menu({instance:this.instance,margin:"0 0 10 0",floating:!0,items:[{text:IRm$.r1("L_COUNT_ROWS"),handler:function(){e.set("aggrfunc","COUNT")}},{text:IRm$.r1("L_DISTINCT_COUNT"),handler:function(){e.set("aggrfunc","COUNT_DISTINCT")}},{text:IRm$.r1("L_SUM"),handler:function(){e.set("aggrfunc","SUM")}},{text:IRm$.r1("B_MINIMUM"),handler:function(){e.set("aggrfunc","MIN")}},{text:IRm$.r1("B_MAXIMUM"),handler:function(){e.set("aggrfunc","MAX")}},{text:IRm$.r1("S_AVG"),handler:function(){e.set("aggrfunc","AVG")}},"-",{text:IRm$.r1("B_CLEAR"),handler:function(){e.set("aggrfunc","")}}]}),n=c.left,r=c.top+d,n+200>l&&(n=l-200),i.showAt(n,r)},updateColor:function(e){var t=this.down("[name=c_z]").el.dom,o=$(".igc-p-color",t),i=$("span",o);bdom=$(".igc-p-remove",t),i.empty(),e&&e.length?(bdom.show(),i.attr("title",e[0].nodepath),i.html(e[0].name||"")):(bdom.hide(),i.removeAttr("title"),i.html(""))},_confirm:function(){var e,t,o,i=this,n=i.sheetoption.model,r=i.down("[name=dataquerymode]"),a=i.down("[name=pivotgrid_rpt_item]"),s=i.down("[name=syncrows]"),l=a.store,c=i._pivotChanged,d=[],p=[],m=[],u=[],_=i.fct.split(";"),g=n.report_items,h=r.getValue();for("M_PIVOT_CLUSTER"==h&&(h="M_PIVOT"),c=n.dataquerymode!=h||c,n.dataquerymode=h,n.bcluster=i.down("[name=bcluster]").getValue(),n.syncrows=s.getValue(),n.sync_target=i.down("[name=sync_target]").getValue(),o=function(e,t){var o,i=!1;if(e&&t)for(o=0;o<_.length&&1!=(i=e[_[o]]!=t[_[o]]||i);o++);else i=!0;return i},$.each(["pivotgrid_row","pivotgrid_col","pivotgrid_mea","pivotgrid_cls"],(function(e,t){var r,a,s,l,_=i.down("[name="+t+"]");for(l=_.location,r=0;r<_.store.data.items.length;r++)if((a=_.store.data.items[r].data).uid)switch(s={},a.itemtype=a.type||a.itemtype,IG$.CopyObject(a,s,i.fct),c=!!a.iupd||c,a.iupd=!1,l){case"r":c=!!o(s,n.rows[d.length])||c,d.push(s);break;case"c":c=!!o(s,n.cols[p.length])||c,p.push(s);break;case"m":c=!!o(s,n.measures[m.length])||c,m.push(s);break;case"l":c=!!o(s,n.clusters[u.length])||c,u.push(s)}})),"M_REPORT"==n.dataquerymode&&i._a_rpt&&i.confirmRptItem(i._a_rpt),c=n.rows.length!=d.length||c,c=n.cols.length!=p.length||c,c=n.measures.length!=m.length||c,n.rows=d,n.cols=p,n.measures=m,n.clusters=u,n.queryItems=[],e=0;e<l.data.items.length;e++)t=l.data.items[e],g&&g.length>e&&(g[e].name=t.get("name"));return this.down("[name=feditor]").confirmFilterSetting(),c},_confirmRptItems:function(e,t){var o,i,n,r,a,s,l,c,d;for(o=0;o<e.childNodes.length;o++){for(d={cols:[],measures:[]},c=e.childNodes[o],n=0;n<c.childNodes.length;n++)if("pivot_mea"==(l=c.childNodes[n]).get("itemtype")&&l.childNodes)for(i=0;i<l.childNodes.length;i++)s=l.childNodes[i].data,r=new IG$.clItems(null),s.itemtype=s.type||s.itemtype,IG$.CopyObject(s,r,me.fct),a=!!s.iupd||a,s.iupd=!1,d.measures.push(r);else if("pivot_col"==l.get("itemtype")&&l.childNodes)for(i=0;i<l.childNodes.length;i++)s=l.childNodes[i].data,r=new IG$.clItems(null),s.itemtype=s.type||s.itemtype,IG$.CopyObject(s,r,me.fct),a=!!s.iupd||a,s.iupd=!1,d.cols.push(r);d.cols.length+d.measures.length>0&&t.push(d)}},validateViewMd:function(){var e=this,t=e.down("[name=dataquerymode]"),o=e.down("[name=pivotgrid_cls]"),i=e.down("[name=sync_view]"),n=e.down("[name=mv]"),r=e.down("[name=vc]"),a=e.down("[name=vr]"),s=e.down("[name=bcluster]"),l=t.getValue(),c=e.down("[name=pivotgrid_rpt_item]"),d=e.sheetoption.model;"M_PIVOT_CLUSTER"==l?(l="M_PIVOT",e.down("[name=bcluster]").setValue(!0)):e.down("[name=bcluster]").setValue(!1),n.setVisible("M_DATA"!=l&&"M_SYNC"!=l),r.setVisible("M_PIVOT"==l),a.setVisible("M_REPORT"==l),i.setVisible("M_SYNC"==l),c.setVisible("M_REPORT"==l),o.setVisible(s.getValue()&&"M_PIVOT"==l),"M_REPORT"==l&&d&&(c.getSelectionModel().select(c.store.data.items[0]),e._a_rpt=d.report_items[0],e.loadReport())},changeDataViewMd:function(){var e,t,o,i,n,r=this,a=r.down("[name=dataquerymode]").getValue(),s=r.down("[name=pivotgrid_row]"),l=r.down("[name=pivotgrid_mea]"),c=[];if("M_PIVOT_CLUSTER"==a&&(a="M_PIVOT"),"M_DATA"==a?(i=l.store,n=s.store):"M_PIVOT"==a&&(i=s.store,n=l.store),i&&n){for(l.getView().refresh(),s.getView().refresh(),e=0;e<i.data.items.length;e++)"Measure"==(t=i.data.items[e]).get("type")&&c.push(t);if(c.length)for(o=n.data.items.length,e=c.length-1;e>=0;e--)i.remove(c[e]),n.insert(o,c[e])}},updateFilterChange:function(){this._pivotChanged=!0},updatePivotContent:function(){this._pivotChanged=!0},prepGridStyles:IG$.reportbase$.prepGridStyles,moveGridSelection:function(e,t,o){var i=e.getSelectionModel().getSelection(),n=i.length?i[0]:null;if(n){var r,a=e.getStore().indexOf(n),s=a;if(t<0){if(--s<0)return}else if(++s>=e.getStore().getCount())return;o&&o.length&&(r=o[a],o.splice(a,1),o.splice(s,0,r)),e.getStore().remove(n),n=e.getStore().insert(s,n),e.getSelectionModel().select(n,!0)}},_changeTargetSheet:function(){},validate_rename:function(e){var t=this;$.each(["pivotgrid_row","pivotgrid_col","pivotgrid_mea","pivotgrid_cls"],(function(o,i){var n,r,a,s=t.down("[name="+i+"]").store;for(n=0;n<s.data.items.length;n++)a=(r=s.data.items[n]).get("sql_id")+";"+r.get("uid"),e[a]&&r.set("name",e[a].name)}))},initComponent:function(){var e,t=this;t.row=IRm$.r1("L_P_ROW"),t.column=IRm$.r1("L_P_COL"),t.measure=IRm$.r1("L_P_MEASURE"),t.pivot_unit=IRm$.r1("L_P_PIVOT_UNIT"),t.cluster=IRm$.r1("L_P_CLUSTER"),1!=t._pivotEdtMd?t.browser=new IG$.naviTree({instance:t.instance,showtoolbar:!1,cubebrowse:!0,collapsible:!1,floatable:!1,floating:!1,ddGroup:"_I$RD_G_",layout:"fit",enabledrag:!0,flex:1,border:0,_search:!0}):e={name:"peditor",layout:"fit",floatable:!1,border:0,flex:1,items:[{xtype:"container",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",name:"dataquerymode_bar",layout:{type:"hbox",align:"stretch"},border:1,items:[{xtype:"combobox",name:"dataquerymode",labelAlign:"right",queryMode:"lcoal",displayField:"name",valueField:"value",editable:!1,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_VIEW_MODE_LBL"),value:"M_DATA"},{name:IRm$.r1("L_V_PIVOT"),value:"M_PIVOT"},{name:IRm$.r1("L_V_RPT"),value:"M_REPORT"},{name:IRm$.r1("L_V_SYNC"),value:"M_SYNC"},{name:IRm$.r1("L_V_PIVOT_CLS"),value:"M_PIVOT_CLUSTER"}]},listeners:{change:function(e,o,i,n){t.validateViewMd()},select:function(e,o,i){t._dmode_sys||t.changeDataViewMd()}}},{xtype:"displayfield",value:"..",hidden:!0,listeners:{afterrender:function(e){IG$.r___.registerTooltip(e,"data_query_viewer")}}}]},{xtype:"checkbox",name:"bcluster",hidden:!0,labelAlign:"right",fieldLabel:IRm$.r1("L_CLUSTER"),boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e){var t=this,o=t.down("[name=pivotgrid_cls]"),i=t.down("[name=dataquerymode]");t.down("[name=sync_view]");o.setVisible(e.getValue()&&("M_PIVOT"==i.getValue()||"M_PIVOT_CLUSTER"==i.getValue()))},scope:this}},{xtype:"container",name:"sync_view",layout:{type:"hbox",align:"stretch"},items:[{xtype:"combobox",name:"sync_target",store:{},labelAlign:"right",queryMode:"lcoal",displayField:"name",valueField:"value",handler:{change:function(e){this._changeTargetSheet()},scope:this}}]},{xtype:"container",layout:{type:"vbox",align:"stretch"},flex:1,border:0,padding:ig$.padding,items:[{xtype:"container",flex:1,region:"center",layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"pivotgrid_rpt_item",title:IRm$.r1("L_P_RPT"),region:"north",height:140,hidden:!0,hideHeaders:!0,store:{fields:["name"]},tbar:[{iconCls:"icon-toolbar-addsheet",handler:function(){var e=this,t={name:e.pivot_unit,itemtype:"unit",measuretitle:!0,ext_title:null,cols:[],measures:[]},o=e.down("[name=pivotgrid_rpt_item]"),i=o.getSelectionModel();e.sheetoption.model.report_items.push(t),o.store.loadData(e.sheetoption.model.report_items),i.select(o.store.data.items.length-1),e._a_rpt=t,e.loadReport()},scope:this},{iconCls:"icon-toolbar-moveup",handler:function(){var e=this;e.moveGridSelection(e.down("[name=pivotgrid_rpt_item]"),-1,e.sheetoption.model.report_items)},scope:this},{iconCls:"icon-toolbar-movedown",handler:function(){var e=this;e.moveGridSelection(e.down("[name=pivotgrid_rpt_item]"),1,e.sheetoption.model.report_items)},scope:this},"-",{xtype:"checkbox",boxLabel:IRm$.r1("L_SYNC_ROWS"),name:"syncrows"}],selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},plugins:[{ptype:"cellediting",clicksToEdit:!1}],columns:[{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name",editor:{allowBlank:!0}},{xtype:"actioncolumn",width:60,items:[{iconCls:"icon-grid-config",tooltip:"Config Item",handler:function(e,t,o){var i,n=this,r=e.store.data.items[t],a=n.sheetoption.model.report_items[t];a&&(i=new IG$.c$pivotRpt({instance:n.instance,_dt:a,callback:new IG$.callBackObj(n,(function(){r.set("name",a.name)}))}),IG$.checkLogin(this,i))},scope:this},{iconCls:"icon-toolbar-filter",tooltip:"Filter",handler:function(e,t,o){var i,n=this,r=(e.store.data.items[t],n.sheetoption.model.report_items[t]);r&&(r.filter=r.filter||new IG$.clFilterGroup(null),r.havingfilter=r.havingfilter||new IG$.clFilterGroup(null),i=new IG$.filterEditorWindow({instance:n.instance,meta_type:n.meta_type,report:n.reportoption,sheetoption:{filter:r.filter,havingfilter:r.havingfilter},reportoption:{cube_objects:n.reportoption.cube_objects},callback:new IG$.callBackObj(n,(function(e){r.filter=e.filter,r.havingfilter=e.havingfilter}))}),IG$.checkLogin(n,i))},scope:this},{iconCls:"icon-grid-delete",tooltip:"Remove Item",handler:function(e,t,o){var i=this,n=e.store.data.items[t];e.store.data.items.length>1&&(e.store.remove(n),i.sheetoption.model.report_items.splice(t,1),e.getSelectionModel().select(e.store.data.items[0]),i._a_rpt=i.sheetoption.model.report_items[0],i.loadReport())},scope:this}]}],listeners:{cellclick:function(e,t,o,i,n,r){},selectionchange:function(e,t,o){var i,n=this,r=t.length?e.store.indexOf(t.items[0]):-1;r>-1&&(i=n.sheetoption.model.report_items[r])&&(n._a_rpt&&n.confirmRptItem(n._a_rpt),n._a_rpt=i,n.loadReport())},scope:this}},new IG$.c$pivot({name:"pivotgrid_row",ptr_p:t,title:t.row,location:"r",flex:1,__loc:"row"})]},{xtype:"container",layout:{type:"vbox",align:"stretch"},region:"compact"==t.layoutmode?"south":"east",name:"mv",flex:1,items:[{xtype:"container",flex:1,layout:"border",border:0,name:"vc",padding:ig$.padding,items:[new IG$.c$pivot({name:"pivotgrid_col",ptr_p:t,flex:1,region:"south",title:t.column,location:"c",__loc:"col"}),new IG$.c$pivot({name:"pivotgrid_mea",ptr_p:t,flex:1,region:"center",title:t.measure,location:"m",__loc:"mea"}),new IG$.c$pivot({name:"pivotgrid_cls",ptr_p:t,flex:1,region:"south",title:t.cluster,hidden:!0,location:"l",__loc:"cls"})]},{xtype:"container",flex:1,layout:"fit",border:0,region:"north",name:"vr",hidden:!0,padding:ig$.padding,items:[{xtype:"panel",name:"pivotgrid_rpt",border:0,flex:1,location:"p",layout:{type:"vbox",align:"stretch"},items:[new IG$.c$pivot({name:"pivotgrid_rpt_mea",ptr_p:t,flex:1,region:"center",title:t.measure,location:"rm",__loc:"mea",__loc1:!0}),new IG$.c$pivot({name:"pivotgrid_rpt_col",ptr_p:t,flex:1,region:"south",title:t.column,location:"rc",__loc:"col",__loc1:!0})]}]},{xtype:"panel",border:0,region:"south",height:30,layout:{type:"hbox",align:"stretch"},items:[{html:"<div><div class='igc-p-color'><span></span></div><div class='igc-p-color-ic' title='Color Measure'></div><div class='igc-p-remove'></div></div>",name:"c_z",flex:1,listeners:{afterrender:function(){setTimeout((function(){t.initUI()}),100)}}},{html:"<div class='igc-p-color'></div>",name:"s_z",hidden:!0,flex:1,listeners:{afterrender:function(){t.initUI()}}}]}]}]}]}]},t.items=[],t.browser&&t.items.push({xtype:"container",layout:"fit",flex:1,region:"center",autoScroll:!1,items:[t.browser]}),e&&t.items.push({xtype:"panel",layout:"card",region:t._pivotEdtMd>1?"east":"center",name:"p_editor",border:0,flex:1,deferredRender:!1,tbar:[{type:"button",iconCls:"icon-toolbar-pivot",name:"btn_pivot",pressed:1,tooltip:IRm$.r1("L_PIVOT"),handler:function(){var e=this,t=e.down("[name=p_editor]"),o=e.down("[name=btn_filter]"),i=e.down("[name=btn_pivot]");t.getLayout().setActiveItem(0),i.toggle(!0),o.toggle(!1)},scope:this},{type:"button",iconCls:"icon-toolbar-filter",name:"btn_filter",tooltip:IRm$.r1("L_FILTER"),handler:function(){var e=this,t=e.down("[name=p_editor]"),o=e.down("[name=btn_filter]"),i=e.down("[name=btn_pivot]");t.getLayout().setActiveItem(1),i.toggle(!1),o.toggle(!0)},scope:this},{xtype:"button",iconCls:"icon-toolbar-pagefilter",name:"btn_pagefilter",tooltip:IRm$.r1("L_PAGE_FILTER"),handler:function(){var e,t=this;e=new IG$.dlgPromptEditor({instance:t.instance,reportoption:t.reportoption,sheetoption:t.sheetoption,callback:new IG$.callBackObj(t,t.updatePivotContent)}),IG$.checkLogin(t,e)},scope:this},{type:"button",iconCls:"icon-toolbar-sort",tooltip:IRm$.r1("L_SORT_OPTION"),handler:function(){var e=this,t=new IG$.sortOptionDlg({instance:e.instance,reportoption:e.reportoption,sheetoption:e.sheetoption,callback:new IG$.callBackObj(e,e.updatePivotContent)});IG$.checkLogin(e,t)},scope:this},{type:"button",iconCls:"icon-toolbar-style",name:"btn_grid_style",tooltip:IRm$.r1("L_GRID_STYLE"),handler:function(){var e,t=this,o=t.down("[name=dataquerymode]").getValue();"M_PIVOT_CLUSTER"==o&&(o="M_PIVOT"),t.prepGridStyles(o),e=new IG$.globalReportStyle({instance:t.instance,cmode:"report",meta_type:t.meta_type,activeSheet:t.activeSheet,reportoption:t.reportoption,sheetoption:t.sheetoption,callback:new IG$.callBackObj(t,t.updatePivotContent)}),IG$.checkLogin(this,e)},scope:this},"->",{type:"button",name:"btn_adv",iconCls:"icon-grid-config",tooltip:IRm$.r1("L_ADV_OPTION"),handler:function(){var e=new IG$.d$PivotAdvOpt({instance:t.instance,sheetoption:this.sheetoption});this._pivotChanged=!0,IG$.checkLogin(this,e)},listeners:{afterrender:function(e){IG$.r___.registerTooltip(e,"advanced_pivot")}},scope:this}],items:[e,new IG$.filterMainEditor({instance:t.instance,meta_type:t.meta_type,reportoption:t.reportoption,name:"feditor",deferredRender:!1,bodyPadding:ig$.padding})]}),IG$.c$pivotPnl.superclass.initComponent.call(this)}});
IG$.d$PivotAdvOpt=$s.extend($s.window,{modal:!0,layout:"fit",closable:!1,resizable:!1,width:500,autoScroll:!1,height:550,maxHeight:550,bodyPadding:ig$.padding,_confirm:function(){var e,a=this,l=a.sheetoption,t=0,o=a.down("[name=cb_mloc]"),i=a.down("[name=measureposition]");a.down("[name=measuregroup]");l&&(e=o.getGroupValue(),t=i.getValue(),"row"==e&&l.model.rows.length<t?t=l.model.rows.length:"column"==e&&l.model.cols.length<t&&(t=l.model.cols.length),t=t<0?0:t,$.each(a._f,(function(o,i){var m,n=a.down("[name="+i+"]");switch(i){case"measurelocation":m=e;break;case"measureposition":m=t;break;default:m=n.getValue()}l.model[i]=m}))),a.callback&&a.callback.execute(),a.close()},init_f:function(){var e=this,a=e.sheetoption;e._f=["measurelocation","measureposition","measuretitle","isdistinct","treeview","columntree","isbigdecimal","showlnum","customfix","customfixcols","usepaging","rowperpage","pagestyle","measureformat","measureformatname","fetchmode","measuregroup"],a&&(a.model.measureposition=a.model.measureposition<0?0:a.model.measureposition,$.each(e._f,(function(l,t){var o=e.down("[name="+t+"]"),i=a.model[t];switch(t){case"measurelocation":o.setValue({cb_mloc:[i]});break;case"customfix":case"usepaging":case"measuretitle":o.setValue(i),"customfix"==t&&e.down("[name=customfixcols]").setVisible(i);break;case"customfixcols":o.setValue(i||0);break;case"rowperpage":o.setValue(i||20);break;case"pagestyle":o.setValue(i||"normal");break;default:o.setValue(i)}})))},initComponent:function(){this.title=IRm$.r1("L_ADV_OPTION"),$s.apply(this,{items:[{xtype:"panel",layout:"anchor",autoScroll:!0,border:0,defaults:{anchor:"100%"},fieldDefaults:{labelWidth:100},padding:ig$.padding,items:[{xtype:"fieldset",title:IRm$.r1("L_M_POSITION"),collapsible:!1,defaults:{anchor:"100%"},items:[{name:"measurelocation",fieldLabel:IRm$.r1("L_MEASURE_ON"),xtype:"radiogroup",plain:!0,items:[{boxLabel:IRm$.r1("L_P_ROW"),name:"cb_mloc",inputValue:"row"},{boxLabel:IRm$.r1("L_P_COL"),name:"cb_mloc",inputValue:"column",checked:!0}],listeners:{}},{xtype:"numberfield",name:"measureposition",fieldLabel:IRm$.r1("L_M_POSITION"),minValue:0,maxValue:99,value:0,anchor:"60%"},{xtype:"checkbox",name:"measuretitle",fieldLabel:IRm$.r1("L_M_TITLE"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_FIX_COLUMN"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"customfix",boxLabel:IRm$.r1("L_CUSTOM_FIX"),listeners:{change:function(e,a,l,t){this.down("[name=customfixcols]").setVisible(a)},scope:this}},{xtype:"numberfield",name:"customfixcols",minValue:0,maxValue:10,value:0}]},{xtype:"checkbox",name:"measuregroup",fieldLabel:IRm$.r1("L_M_GROUP"),boxLabel:IRm$.r1("B_ENABLED")}]},{xtype:"fieldset",layout:"anchor",title:IRm$.r1("L_M_FORMAT"),items:[{xtype:"textfield",fieldLabel:IRm$.r1("L_M_FORMAT"),name:"measureformat"},{xtype:"textfield",fieldLabel:IRm$.r1("L_M_NAME"),name:"measureformatname"},{xtype:"displayfield",value:"* Merge multiple measure in single column"}]},{xtype:"fieldset",layout:"anchor",title:IRm$.r1("L_PAGING"),items:[{xtype:"checkbox",name:"usepaging",fieldLabel:IRm$.r1("L_USE_PAGING"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"numberfield",name:"rowperpage",fieldLabel:IRm$.r1("L_ROW_P_PAGE"),minValue:10,maxValue:1e3,value:20},{xtype:"combobox",name:"pagestyle",fieldLabel:IRm$.r1("L_PAGE_STYLE"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:"Normal",value:"normal"},{name:"10 pages",value:"p10"},{name:"5 pages",value:"p5"},{name:"2 buttons",value:"button2"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_TREE_VIEW"),collapsible:!1,items:[{xtype:"form",layout:"anchor",border:0,hidden:!1,defaults:{anchor:"100%"},items:[{xtype:"checkbox",boxLabel:IRm$.r1("L_ENABLE_TREE_VIEW"),name:"treeview",bodyPadding:ig$.padding},{xtype:"checkbox",boxLabel:IRm$.r1("L_COL_TREE"),name:"columntree",bodyPadding:ig$.padding}]}]},{xtype:"fieldset",title:IRm$.r1("L_OTHER_OPTION"),collapsible:!1,items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_DISTINCT"),name:"isdistinct",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"combobox",fieldLabel:IRm$.r1("L_FETCH_MODE"),name:"fetchmode",valueField:"value",displayField:"name",store:{data:[{name:IRm$.r1("B_DEFAULT"),value:""},{name:IRm$.r1("L_FETCH_APPPAGE"),value:"fetch_page"},{name:IRm$.r1("L_FETCH_DBPAGE"),value:"fetch_page_db"},{name:IRm$.r1("L_FETCH_ALL"),value:"fetch_all"}]}},{xtype:"checkbox",fieldLabel:IRm$.r1("L_NUM_PREC"),boxLabel:IRm$.r1("L_HIGH_PREC"),bodyPadding:ig$.padding,name:"isbigdecimal"},{xtype:"checkbox",fieldLabel:IRm$.r1("L_LINE_NUM"),name:"showlnum",boxLabel:IRm$.r1("B_ENABLED")}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.d$PivotAdvOpt.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(e){e.init_f()}}});
IG$.p$PivotBrws=$s.extend($s.panel,{region:"center",layout:{type:"fit",align:"stretch"},loadSheetOption:function(e,t,o,n){var i=this;i.down("[name=pivoteditor]");i.sheetoption=e,i.reportoption=t,i.filteroption=n,i._cache_tree=o,i._init()},_init:function(){var e,t,o,n=this,i=n.reportoption,a=n.down("[name=custom_formula]"),c=i._mc.calculation_custom_dims,d=[];if("sql_report"==n.meta_type?n._load_columns(i._mc.inlineview_sql_objects):(o=i._mc.cube_objects&&i._mc.cube_objects.length?i._mc.cube_objects:null,n.getCube(o)),c)for(e=0;e<c.length;e++)t=c[e],d.push({name:t.name,uid:t.uid,type:t.type});a.store.loadData(d)},_confirm:function(){this.down("[name=pivoteditor]")._confirm()},getCube:function(e){var t,o=this,n=o.down("[name=cube_tree]"),i=(o.reportoption,o.sheetoption),a=o.filteroption,c=i?i.model:null,d=c&&c.cube_object?c.cube_object:null,r=o._cache_tree;t={type:"ROOT",name:"Cubes",leaf:!1,expanded:!0,children:[{type:"load",name:"Loading..."}]},!d&&a&&a.model&&a.model.cube_object&&(d=a.model.cube_object),!d&&e&&e.length&&(d=e[0]),d&&(t.uid=d.uid,t.name=d.name,t.nodepath=d.nodepath,t.type=d.type),r&&(r.uid==t.uid&&(t.children=[],o._update_cache_tree(t,r.children)),o._cache_tree=null),n.setRootNode(t).expand(),o.fireEvent("cube_changed",o)},_load_columns:function(e){var t,o=this,n=o.sheetoption,i=o.down("[name=cube_tree]");o._cache_tree;t={type:"ROOT",name:"Cubes",leaf:!1,expanded:!0,children:[]},$.each(e,(function(e,i){if(!n||!n.model.sql_id||n.model.sql_id==i.sql_id){var a=i.meta_dimensions,c={sql_id:i.sql_id,name:i.name,type:"InlineView",children:[],expanded:!0,leaf:!1};c.iconcls=IG$.get_metatype_icon(c.type.toLowerCase()),t.children.push(c),$.each(a,(function(e,t){var n=o._clone(t);t.attributes&&t.attributes.attrb4&&(n.datatype=IG$.get_datatype(t.attributes.attrb4)),n.typename=n.type?n.type.toLowerCase():"",n.iconcls=IG$.get_metatype_icon(n.typename,n),n.writable=!0,n.leaf=!0,c.children.push(n)}))}})),i.setRootNode(t).expand(),o.fireEvent("cube_changed",o)},_update_cache_tree:function(e,t){var o,n,i;for(o=0;o<t.length;o++)i=t[o],n=this._clone(i),e.children.push(n),i.children&&i.children.length?(n.expanded=!0,n.children=[],this._update_cache_tree(n,i.children)):i.leaf||(n.children=[{type:"load",name:"Loading..."}])},_clone:function(e){return{name:e.name,nodepath:e.nodepath,type:e.type,uid:e.uid,sql_id:e.sql_id,writable:e.writable,leaf:e.leaf,address:e.address,description:e.description,attributes:e.attributes,icon:e.icon,iconCls:e.iconCls,is_sub:e.is_sub,lfd:e.lfd,locale_name:e.local_name,ltype:e.ltype,manage:e.manage,memo:e.memo,mid:e.mid,modifier:e.modifier,objinfo:e.objinfo,owner:e.owner,pid:e.pid,revision:e.revision,sid:e.sid,text:e.text,updatedate:e.updatedate,updatedatefm:e.updatedatefm,datatype:e.datatype}},createItem:function(e){var t=this,o=t.instance.mainPanel,n=t.reportoption,i=t.down("[name=cube_tree]").getRootNode(),a=n._mc.calculation_custom_dims,c=t.down("[name=custom_formula]");a=n._mc.calculation_custom_dims=n._mc.calculation_custom_dims||[],o.navigateApp(null,e.toLowerCase(),"",null,!0,!0,{editmode:!0,dmode_cnt:{type:e},cubeuid:i.get("uid"),cubepath:i.get("nodepath"),dmode:1,callback:new IG$.callBackObj(t,(function(e){var t=IG$.getKeyName(e.name),o={},n=0;for($.each(a,(function(e,t){o[t.uid]=1}));o[t];)t+="_"+n++;e.uid=t,a.push(e),c.store.add({uid:e.uid,type:e.type,name:e.name})}))})},editCustomItem:function(e){var t,o,n=this,i=n.instance.mainPanel,a=n.reportoption,c=n.down("[name=cube_tree]").getRootNode(),d=a._mc.calculation_custom_dims,r=e.get("uid");for(t=0;t<d.length;t++)if(d[t].uid==r){o=d[t];break}o&&i.navigateApp(o.uid,o.type.toLowerCase(),o.name,null,!0,!0,{editmode:n.writable,dmode:1,dmode_cnt:o,cubeuid:c.get("uid"),cubepath:c.get("nodepath"),callback:new IG$.callBackObj(n,(function(t){e.set("name",t.name)}))})},setFilter:function(e){this.down("[name=cube_tree]").setFilter(e)},$getTreeData:function(){return this.down("[name=cube_tree]").$getTreeData()},initComponent:function(){var e=this;e.addEvents("cube_changed"),$s.apply(e,{title:IRm$.r1("T_RPT_PIVOT"),header:!1,items:[{xtype:"panel",title:IRm$.r1("L_BOBJ"),border:1,layout:{type:"vbox",align:"stretch"},items:[new IG$.naviTree({instance:e.instance,showtoolbar:!1,cubebrowse:!0,ddGroup:"_I$RD_G_",name:"cube_tree",layout:"fit",enabledrag:!0,rootuid:"none",flex:1,border:0,_search:"sql_report"!=e.meta_type,meta_type:e.meta_type,rptptr:e.rptptr,hiddenItems:{cubemodel:1},tools:[{xtype:"button",iconCls:"icon-toolbar-addsheet",tooltip:IRm$.r1("B_ADD"),handler:function(){var e=this;e.rptptr.showReportOption(null,new IG$.callBackObj(e,(function(e){var t,o=this,n=o.reportoption,i=o.sheetoption,a=o.filteroption,c=0;for(t=0;t<n._mc.cube_objects.length;t++)if(n._mc.cube_objects[t].uid==e.uid){c=1;break}c||n._mc.cube_objects.push(e),i?i.model.cube_object=e:a&&a.model&&(a.model.cube_object=e),o.getCube(n._mc.cube_objects)})),e.sheetoption,!1,!0)},scope:e}]}),{xtype:"gridpanel",ddGroup:"_I$RD_G_",enabledrop:!1,enabledrag:!0,height:150,name:"custom_formula",hideHeaders:!0,hidden:!1!==ig$.features.ig_p_cmt||"sql_report"==e.meta_type||"form_editor"==e.meta_type,columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-config",tooltip:"Config Item",handler:function(e,t,o){var n=e.store.data.items[t];this.editCustomItem(n)},scope:this},{iconCls:"icon-grid-delete",tooltip:"Remove Item",handler:function(e,t,o){var n,i=e.store.data.items[t],a=this.reportoption._mc.calculation_custom_dims,c=i.get("uid");for(n=0;n<a.length;n++)if(a[n].uid==c){a.splice(n,1);break}e.store.removeAt(t)},scope:this}]}],store:{fields:[]},tbar:[{xtype:"displayfield",value:IRm$.r1("L_CUSTOM_FIELD")},"->",{xtype:"button",iconCls:"icon-toolbar-addsheet",tooltip:IRm$.r1("B_ADD"),menu:{xtype:"menu",items:[{text:IRm$.r1("D_CUSTOMMETRIC"),hidden:!1!==ig$.features.ig_n_cm,handler:function(){this.createItem("CustomMetric")},scope:this},{text:IRm$.r1("D_MEASURE"),hidden:!1!==ig$.features.ig_n_ms,handler:function(){this.createItem("Measure")},scope:this},{text:IRm$.r1("D_FORMULA"),hidden:!1!==ig$.features.ig_n_fm,handler:function(){this.createItem("FormulaMeasure")},scope:this}]}}]}]}]}),"sql_report"==e.meta_type&&(this.items[0].tools=[{type:"refresh",handler:function(){var e=this,t=e.reportoption;"sql_report"==e.meta_type&&e._load_columns(t._mc.inlineview_sql_objects)},scope:this}]),IG$.p$PivotBrws.superclass.initComponent.apply(e,arguments)}});
IG$.pivot_dlg=$s.extend($s.panel,{modal:!1,layout:{type:"hbox",align:"stretch"},_init:function(){var e=this,t=e.down("[name=p_recom]");$(".p_menu_refresh",t.el.dom).bind("click",(function(){e._recom(!0)}))},loadPivotOption:function(e){var t,o,n=this,i=n.down("[name=pivotbrowser]"),a=n.down("[name=pivoteditor]"),p=n.down("[name=sheetobj_panel]"),l=n.down("[name=main_panel]"),s=n.rptptr,r=n.objtype,c=n._widget_view?n._widget_view._browser_tree:null;n.activeSheet=e,n._prev_objtype!==n.objtype&&l.getLayout().setActiveItem(0),a.on("join_tables",(function(e){this.down("[name=pivotbrowser]").setFilter(e)}),n),"FILTER"==n.objtype&&n._widget_view&&(o=n._widget_view.sheetoption),t=n.reportoption.sheets[e],a.activeSheet=e,a.reportoption=n.reportoption,a.sheetoption=t,a.filteroption=o,n.down("[name=b_p_recom]").setVisible("SHEET"==r),n._recom(),n.down("[name=b_opt_report]").setVisible("SHEET"==r),n.down("[name=b_opt_filter]").setVisible("FILTER"==r),n.down("[name=b_opt_text]").setVisible("TEXT"==r),n.down("[name=b_opt_viewer]").setVisible("RPT_VIEW"==r),n.down("[name=b_opt_fviewer]").setVisible("FB_VIEW"==r),n.down("[name=b_opt_panel]").setVisible("PANEL"==r),n.down("[name=b_opt_tab]").setVisible("TAB"==r),n.down("[name=b_pnldetail]").setVisible("SHEET"==r||"FILTER"==r),$s.apply(p,{dzone:s.dzone,sheets:s.sheets,sheetoption:n._widget_view.sheetoption,sheetindex:e,reportoption:n.reportoption,callback:new IG$.callBackObj(s,s.rshowSheetOpt,[n._widget_view,null])}),p.init_f(),n._prev_objtype=n.objtype,setTimeout((function(){i.loadSheetOption(n.reportoption.sheets[n.activeSheet],n.reportoption,c,o),"SHEET"==n.objtype?(a.show(),a.applCurPivotInfo()):a.hide(),a._c=1}),20)},_recom:function(e){var t=this,o=t.down("[name=p_recom]"),n=t.reportoption;if(n&&n.cube_objects&&n.cube_objects.length&&(1==e||t._loaded_recom!==n.cube_objects[0].uid)){var i=new IG$._rpc$;i.init(t,{ack:"olapservice",payload:{option:"get_recommend",uid:n.cube_objects[0].uid},mbody:{}},t,(function(e){t._loaded_recom=n.cube_objects[0].uid;var i=o.el.dom,a=$(".p_recom_ul",i);a.empty(),$.each(e,(function(e,o){var n=$("<li></li>").appendTo(a);if($("<div class='d_recom_name'>"+(o.locale_name||o.name)+"</div>").appendTo(n).bind("click",(function(e){e.preventDefault(),e.stopPropagation(),t._load_recom(o)})),o.description&&$("<div class='d_recom_desc'>"+o.description+"</div>").appendTo(n),o.writable){var i=$("<div class='d_recom_bbox'></div>").appendTo(n);rname=$("<span class='d_recom_btn'>Edit</span>").appendTo(i),rname.bind("click",(function(e){e.preventDefault(),e.stopPropagation(),IG$._renameMetaObject.apply(t,[o.name,o.uid,o.nodepath,{data:o},function(e,o){t._recom(!0)}])}))}}))})),i.send()}},_load_recom:function(e){var t=this,o=new IG$._rpc$;o.init(t,{ack:"content",payload:{uid:e.uid},mbody:{option:"internal"}},t,(function(e){var o=new IG$.clReports(e,e.content.meta_type),n=t.activeSheet,i=t.reportoption.sheets[n],a=function(e,o){var n=o.sheets[0];n.si=e.si,n.model.index=e.model.index,n.docid=e.docid,n.model.layoutinfo=e.model.layoutinfo,e.model=n.model;t.down("[name=pivotbrowser]");var i=t.down("[name=pivoteditor]"),a=t.rptptr;i.applCurPivotInfo(),a.mergeRptFilter(o),t._confirm()};i&&i.model&&i.model.rows.length+i.model.cols.length+i.model.measures.length>0?IG$.confirmMessages(ig$.appname,IRm$.r1("L_C_UPD_RECOM"),(function(e){"yes"==e&&a(i,o)})):a(i,o)})),o.send()},_confirm:function(){var e=this,t=e.down("[name=pivoteditor]"),o=e.down("[name=sheetobj_panel]"),n=e.sheet;"SHEET"==e.objtype&&t._confirm&&t._confirm(),o._confirm(!0),n&&(n.updateViewMode(n.sheetoption.model.viewmode),n._confirm()),IG$.ShowWarning(IRm$.r1("M_PIVOT_CHANGED"),e,"info"),e.fireEvent("pivot_confirm",e)},_validate_rename:function(){var e=this,t=e.reportoption,o=t._mc,n=t.sheets,i=o.inlineview_sql_objects,a={},p=e.down("[name=pivoteditor]");$.each(i,(function(e,t){var o=t.sql_id;$.each(t.meta_dimensions,(function(e,t){var n=o+";"+t.uid;a[n]=t}))})),$.each(n,(function(e,t){var o=t.model;$.each(["rows","cols","measures"],(function(e,t){if(o[t]){var n,i,p=o[t];for(n=0;n<p.length;n++)i=p[n].sql_id+";"+p[n].uid,a[i]&&(p[n].name=a[i].name)}}))})),"FILTER"!=e.objtype&&p.validate_rename(a)},_show_intro:function(){var e=this,t=[{intro:IRm$.r1("L_VIEW_MODE"),element:e.down("[name=dataquerymode_bar]").body.dom},{intro:e.down("[name=pivotgrid_row]").title,element:e.down("[name=pivotgrid_row]").body.dom}];"M_PIVOT"==e.down("[name=dataquerymode]").getValue()&&(t.push({intro:e.down("[name=pivotgrid_mea]").title,element:e.down("[name=pivotgrid_mea]").body.dom}),t.push({intro:e.down("[name=pivotgrid_col]").title,element:e.down("[name=pivotgrid_col]").body.dom})),IG$.showIntro(t)},toggle_collapse:function(e){var t=this,o=t.down("[name=btn_collapse]"),n=t.down("[name=cont_panel]");t.__collapsed=void 0!==e?e:!t.__collapsed,o.setIconCls(t.__collapsed?"icon-toolbar-arrow_left":"icon-toolbar-arrow_right"),n.setVisible(!t.__collapsed),t.fireEvent("toggle_collapsed",t)},initComponent:function(){var e=this;$s.apply(e,{border:1,items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},bodyCls:"ig-head-left",width:$s.__hh,items:[{xtype:"button",iconCls:"icon-toolbar-hl",name:"b_p_recom",handler:function(){var e=this.down("[name=main_panel]");this.toggle_collapse(!1),e.getLayout().setActiveItem(2)},scope:this},{xtype:"button",iconCls:"icon-toolbar-pivot",handler:function(){var e=this.down("[name=main_panel]");this.toggle_collapse(!1),e.getLayout().setActiveItem(0)},scope:this},{xtype:"button",iconCls:"icon-grid-config",pname:"p_general",handler:function(){var e=this,t=e.down("[name=main_panel]"),o=e.down("[name=sheetobj_panel]").down("[name=__tab]");e.toggle_collapse(!1),t.getLayout().setActiveItem(1),o.getLayout().setActiveItem(0)},scope:this},{xtype:"button",iconCls:"icon-toolbar-pagefilter",name:"b_opt_tab",hidden:!0,pname:"opt_tab",handler:function(){var e=this,t=e.down("[name=main_panel]"),o=e.down("[name=sheetobj_panel]").down("[name=__tab]");e.toggle_collapse(!1),t.getLayout().setActiveItem(1),o.getLayout().setActiveItem(1)},scope:this},{xtype:"button",iconCls:"icon-toolbar-pagefilter",name:"b_opt_report",hidden:!0,pname:"opt_report",handler:function(){var e=this,t=e.down("[name=main_panel]"),o=e.down("[name=sheetobj_panel]").down("[name=__tab]");e.toggle_collapse(!1),t.getLayout().setActiveItem(1),o.getLayout().setActiveItem(2)},scope:this},{xtype:"button",iconCls:"icon-toolbar-pagefilter",name:"b_opt_text",hidden:!0,pname:"opt_text",handler:function(){var e=this,t=e.down("[name=main_panel]"),o=e.down("[name=sheetobj_panel]").down("[name=__tab]");e.toggle_collapse(!1),t.getLayout().setActiveItem(1),o.getLayout().setActiveItem(3)},scope:this},{xtype:"button",iconCls:"icon-toolbar-pagefilter",name:"b_opt_viewer",hidden:!0,pname:"opt_viewer",handler:function(){var e=this,t=e.down("[name=main_panel]"),o=e.down("[name=sheetobj_panel]").down("[name=__tab]");e.toggle_collapse(!1),t.getLayout().setActiveItem(1),o.getLayout().setActiveItem(4)},scope:this},{xtype:"button",iconCls:"icon-toolbar-pagefilter",name:"b_opt_fviewer",hidden:!0,pname:"opt_fviewer",handler:function(){var e=this,t=e.down("[name=main_panel]"),o=e.down("[name=sheetobj_panel]").down("[name=__tab]");e.toggle_collapse(!1),t.getLayout().setActiveItem(1),o.getLayout().setActiveItem(5)},scope:this},{xtype:"button",name:"b_opt_filter",iconCls:"icon-toolbar-filter",hidden:!0,pname:"opt_filter",handler:function(){var e=this,t=e.down("[name=main_panel]"),o=e.down("[name=sheetobj_panel]").down("[name=__tab]");e.toggle_collapse(!1),t.getLayout().setActiveItem(1),o.getLayout().setActiveItem(6)},scope:this},{xtype:"button",iconCls:"icon-toolbar-filter",name:"b_pnldetail",hidden:!0,pname:"pnldetail",handler:function(){var e=this,t=e.down("[name=main_panel]"),o=e.down("[name=sheetobj_panel]").down("[name=__tab]");e.toggle_collapse(!1),t.getLayout().setActiveItem(1),o.getLayout().setActiveItem(7)},scope:this},{xtype:"button",iconCls:"icon-toolbar-pagefilter",name:"b_opt_panel",hidden:!0,pname:"opt_panel",handler:function(){var e=this,t=e.down("[name=main_panel]"),o=e.down("[name=sheetobj_panel]").down("[name=__tab]");e.toggle_collapse(!1),t.getLayout().setActiveItem(1),o.getLayout().setActiveItem(8)},scope:this},{xtype:"container",height:20},{xtype:"button",bodyCls:"ig-btn-confirm",iconCls:"icon-toolbar-arrow_right",name:"btn_collapse",handler:function(){this.toggle_collapse()},scope:this},{xtype:"container",flex:1}]},{xtype:"container",layout:{type:"vbox",align:"stretch"},name:"cont_panel",items:[{xtype:"panel",layout:"card",name:"main_panel",items:[{xtype:"panel",layout:{type:"hbox",align:"stretch"},flex:1,items:[new IG$.p$PivotBrws({instance:e.instance,name:"pivotbrowser",region:"center",meta_type:e.meta_type,flex:1,border:1,resizable:"FILTER"!=e.objtype,rptptr:e.rptptr,callback:new IG$.callBackObj(e,e.updatePivotContent),listeners:{cube_changed:function(e,t){},node_rename:function(t,o){e._validate_rename()},scope:this}}),new IG$.c$pivotPnl({instance:e.instance,name:"pivoteditor",meta_type:e.meta_type,reportoption:e.reportoption,layoutmode:"panel",region:"east",flex:1,split:"FILTER"!=e.objtype,resizable:!0,_pivotEdtMd:!0,border:0})]},new IG$.sheetobj_panel({instance:e.instance,name:"sheetobj_panel",viewmode:"panel"}),{xtype:"container",name:"p_recom",html:"<div class='p_recom'><div class='p_menu'><span class='p_menu_refresh'>Refresh</span></div><ul class='p_recom_ul'></ul></div>"}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},border:1,items:[{xtype:"button",text:IRm$.r1("B_HELP"),hidden:"FILTER"==e.objtype,handler:function(){this._show_intro()},scope:this},{xtype:"container",flex:1},{xtype:"button",text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",name:"btn_confirm",hidden:"FILTER"==e.objtype,handler:function(){this._confirm()},scope:this},{xtype:"button",text:"FILTER"==e.objtype?IRm$.r1("B_CLOSE"):IRm$.r1("B_CANCEL"),handler:function(){this.__collapsed=!1,this.toggle_collapse()},scope:this},{xtype:"container",width:5}]}]}],listeners:{afterrender:function(){this._init()},beforeclose:function(){var e,t=this;e=t.down("[name=pivotbrowser]").$getTreeData(),t._widget_view&&(t._widget_view._browser_tree=e)}}}),IG$.pivot_dlg.superclass.initComponent.apply(this,arguments)}});
IG$.filterEditorPanel=$s.extend($s.panel,{fields:[],selvalues:null,init_f:function(){var e,t,l,a,i,n=this,o=n.filteritem,s=o?o.model:null,d=n.down("[name=rbeditortype]"),r=n.down("[name=rbvaluetype]"),u=n.down("[name=delimiter]"),m=n.down("[name=prompttype]"),c=n.down("[name=cnormalvalue]"),p=n.down("[name=clongvalue]"),h=n.down("[name=csecondvalue]");if(n.fields=[],n.right_fields=[],n.formula="",n.useprompt=!1,n.iscustom=!1,n.issqlvalue=!1,n.selvalues=null,s){if(n.targetitem&&(s.fields=[n.targetitem]),(a=s.fields)&&a.length)for(n.down("[name=itemname]").setValue(a[0].name),e=0;e<a.length;e++)n.fields.push(a[e]);if((a=s.right_fields)&&a.length)for(n.down("[name=right_fields1]").setValue(a[0].name),a.length>1&&n.down("[name=right_fields2]").setValue(a[1].name),e=0;e<a.length;e++)n.right_fields.push(a[e]);if((a=s.values)&&a.length>0)for(n.selvalues=[],e=0;e<a.length;e++)n.selvalues.push(a[e]);n.down("[name=cop]").setValue(s.operator||"EQ"),n.down("[name=opisnot]").setValue(s.opisnot),u.setValue(s.delimiter),m.setValue(s.promptEditor);"field"==s.valuetype?r.setValue("field"):s.useprompt?r.setValue("prompt"):s.issqlvalue?r.setValue("sql"):r.setValue("normal"),d.setValue(s.iscustom?"input":"list"),n._updLayout(),t=c.isVisible(),l=p.isVisible(),h.isVisible()?((a=s.values)&&a.length>1&&(i=a[1].value||a[1].code,i=IG$._decodeVal(i),n.down("[name=secondvalue]").setValue(i)),a&&a.length&&("{enc}"==(i=a[0].value||a[0].code).substring(0,5)&&(i=Base64.decode(i.substring(5))),n.down("[name="+(t?"normalvalue":"longvalue")+"]").setValue(i))):(t&&n.setFilterDesc(n.down("[name=normalvalue]")),l&&n.setFilterDesc(n.down("[name=longvalue]")))}},_confirm:function(){var e,t,l=this,a=l.filteritem,i=a.model,n=l.down("[name=rbeditortype]").getGroupValue(),o=l.down("[name=rbvaluetype]").getGroupValue(),s=l.down("[name=delimiter]").getValue(),d=l.down("[name=prompttype]").getValue(),r=l.down("[name=cnormalvalue]"),u=l.down("[name=clongvalue]");if(i.fields=l.fields,i.operator=l.down("[name=cop]").getValue(),i.opisnot=l.down("[name=opisnot]").getValue(),i.valuetype=o,i.useprompt="prompt"==o,i.issqlvalue="sql"==o,i.iscustom=!0,i.delimiter=s||";",i.promptEditor=d,i.right_fields=l.right_fields,i.useprompt||i.issqlvalue)e=l.down("[name=longvalue]").getValue(),i.issqlvalue&&(e=IG$._encodeVal(e)),i.values=[{code:e,value:null}];else if("input"==n){if(r.isVisible())e=l.down("[name=normalvalue]").getValue(),i.values=[{code:e,value:e}];else if(u.isVisible())if(e=l.down("[name=longvalue]").getValue(),6==a.operator)for(e=e.split(s),i.values=[],t=0;t<e.length;t++)""!=e[t]&&i.values.push({code:e[t],value:e[t]});else i.values=[{code:e,value:e}];if(8==a.operator){var m=l.down("[name=secondvalue]").getValue();i.values.push({code:m,value:m})}}else i.iscustom=!1,i.values=l.selvalues},_updLayout:function(){var e=this,t=e.down("[name=rbeditortype]").getGroupValue(),l=e.down("[name=fieldeditortype]"),a=e.down("[name=rbvaluetype]").getGroupValue(),i=e.down("[name=cop]").getValue(),n=e.down("[name=btnnormalvalue]"),o=e.down("[name=btnlongvalue]"),s=e.down("[name=btnsecondvalue]"),d=e.down("[name=delimiter]"),r=e.down("[name=normalvalue]"),u=e.down("[name=longvalue]"),m=e.down("[name=secondvalue]"),c=e.down("[name=prompttype]"),p=e.down("[name=csfield]"),h=e.down("[name=cs_f2]"),f=e.down("[name=cnormalvalue]"),b=e.down("[name=clongvalue]"),y=e.down("[name=csecondvalue]"),v=!1,_=!1,w=!1;if("normal"==a){switch(l.show(),c.hide(),i){case"EQ":case"GTE":case"GT":case"LTE":case"LT":switch(t){case"list":case"input":case"fileload":v=!0;break;case"textarea":_=!0}break;case"IN":case"NOTIN":_=!0;break;case"LIKE":v=!0;break;case"BETWEEN":v=!0,w=!0}"input"==t?(n.hide(),o.hide(),s.hide(),r.setReadOnly(!1),u.setReadOnly(!1),m.setReadOnly(!1),_?d.show():d.hide()):"list"==t&&(n.show(),o.show(),s.show(),r.setReadOnly(!0),u.setReadOnly(!0),m.setReadOnly(!0),d.hide()),p.hide()}else"field"==a?(n.hide(),o.hide(),s.hide(),d.hide(),l.hide(),u.setReadOnly(!1),p.show(),h.setVisible(8==i),c.hide()):(n.hide(),o.hide(),s.hide(),d.hide(),l.hide(),u.setReadOnly(!1),"prompt"==a?c.show():c.hide(),p.hide(),_=!0);v?f.show():f.hide(),_?b.show():b.hide(),w?y.show():y.hide()},showValueEditor:function(e){var t=this;if(t.fields.length>0){var l=new IG$.valueSelectWindow({instance:t.instance,field:t.fields[0],meta_type:t.meta_type,reportoption:t.reportoption,callback:new IG$.callBackObj(this,(function(e,t){var l=this,a=l.down("[name="+t+"]");e&&e.length>0&&(l.selvalues=e),l.setFilterDesc(a)}),e)});IG$.checkLogin(this,l)}},setFilterDesc:function(e){var t=this.filteritem.getValueDesc(this.selvalues);e.setValue(t)},selectItem:function(e,t,l){var a,i=this,n=i.reportoption;a=i.cubeuid||(n&&n.datasource?n.datasource.uid:"");var o=new IG$.metaSelectDlg({instance:i.instance,visibleItems:"folder;metric;measure;formulameasure;custommetric",tree_options:{cubebrowse:!0,rootuid:a},callback:new IG$.callBackObj(i,(function(a){var i=this;l?(i[t||e]=i[t||e]||[],i[t||e].push(a)):i[t||e]=[a],i.down("[name="+e+"]").setValue(a.name)}))});IG$.checkLogin(this,o)},initComponent:function(){var e=[],t=this;t.addEvents("add_filter"),$.each(IG$.filteropcodes,(function(t,l){e.push({field:t,label:l.locale})})),$s.apply(this,{layout:{type:1==t._cmode?"hbox":"vbox",align:"stretch"},fieldDefaults:{labelWidth:150,anchor:"100%"},items:[{xtype:"fieldset",defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%",labelAlign:1==t._cmode?"top":"left"},items:[{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_ITEM"),layout:"hbox",items:[{name:"itemname",xtype:"textfield",allowBlank:!1,readOnly:!0,emptyText:IRm$.r1("M_SEL_ITEM"),flex:1},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),width:20,handler:function(){this.selectItem("itemname","fields")},scope:this}]},{xtype:"fieldcontainer",layout:"hbox",items:[{fieldLabel:IRm$.r1("B_OP"),name:"cop",xtype:"combobox",queryMode:"local",valueField:"field",displayField:"label",editable:!1,store:{fields:["field","label"],data:e},listeners:{select:function(){this._updLayout()},scope:this}},{xtype:"checkbox",name:"opisnot",boxLabel:IRm$.r1("L_OP_NOT"),listeners:{change:function(e){var t,l,a=this.down("[name=cop]"),i=e.getValue(),n={},o=IG$.filteropcodes,s=a.getValue();for($.each(o,(function(e,t){n[e]=t.lcode})),l=0;l<a.store.data.items.length;l++)(t=a.store.data.items[l]).set("label",IRm$.r1(n[t.get("field")]+(i?"_NOT":"")));a.setValue(s)},scope:this}}]},{name:"valuetype",xtype:"radiogroup",fieldLabel:IRm$.r1("L_VALUE_TYPE"),vertical:!1,defaults:{width:70},items:[{boxLabel:IRm$.r1("B_NORMAL"),name:"rbvaluetype",inputValue:"normal",checked:!0},{boxLabel:IRm$.r1("B_SQL"),name:"rbvaluetype",inputValue:"sql"},{boxLabel:IRm$.r1("B_FIELD"),name:"rbvaluetype",inputValue:"field"},{boxLabel:IRm$.r1("B_PROMPT"),hidden:!0,name:"rbvaluetype",inputValue:"prompt"}],listeners:{change:function(e,t,l,a){this._updLayout()},scope:this}}]},{xtype:"panel",layout:"anchor",border:0,autoScroll:!0,padding:0,defaults:{labelAlign:1==t._cmode?"top":"left"},dockedItems:[1==t._cmode?{dock:"bottom",xtype:"toolbar",items:["->",{xtype:"button",text:IRm$.r1("B_ADD"),handler:function(){this.fireEvent("add_filter",this)},scope:this}]}:null],items:[{fieldLabel:IRm$.r1("L_EDITOR_TYPE"),xtype:"fieldcontainer",layout:"anchor",name:"fieldeditortype",defaults:{flex:1,anchor:"100%",hideLabel:!0},items:[{name:"editortype",xtype:"radiogroup",vertical:!1,plain:!0,items:[{boxLabel:IRm$.r1("L_E_VALUE"),name:"rbeditortype",inputValue:"input",checked:!0},{boxLabel:IRm$.r1("L_E_LIST"),name:"rbeditortype",inputValue:"list"}],listeners:{change:function(){this._updLayout()},scope:this}}]},{fieldLabel:IRm$.r1("L_VAL_DELIM"),xtype:"textfield",name:"delimiter",width:120},{fieldLabel:IRm$.r1("L_PROMPT_TYPE"),name:"prompttype",xtype:"combobox",queryMode:"local",valueField:"field",displayField:"label",editable:!1,hidden:!0,store:{fields:["field","label"],data:[{field:1,label:"Text input"},{field:2,label:"Combobox"},{field:3,label:"Date field"},{field:4,label:"Select window"}]},listeners:{select:function(){this._updLayout()},scope:this}},{xtype:"fieldcontainer",name:"cnormalvalue",fieldLabel:IRm$.r1("L_F_VALUE"),layout:{type:"hbox",align:"stretch"},items:[{name:"normalvalue",flex:1,emptyText:IRm$.r1("M_SEL_ITEM"),xtype:"textfield"},{xtype:"button",name:"btnnormalvalue",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),width:20,handler:function(){this.showValueEditor("normalvalue")},scope:this}]},{xtype:"fieldcontainer",name:"clongvalue",fieldLabel:IRm$.r1("L_F_VALUE_LNG"),layout:{type:"hbox",align:"stretch"},hidden:!0,items:[{name:"longvalue",flex:1,height:120,xtype:"textarea"},{xtype:"button",name:"btnlongvalue",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),width:20,handler:function(){this.showValueEditor("longvalue")},scope:this}]},{xtype:"fieldcontainer",name:"csecondvalue",fieldLabel:IRm$.r1("L_F_VALUE_TO"),layout:{type:"hbox",align:"stretch"},hidden:!0,items:[{name:"secondvalue",flex:1,xtype:"textfield"},{xtype:"button",name:"btnsecondvalue",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),width:20,handler:function(){this.showValueEditor("secondvalue")},scope:this}]},{xtype:"fieldcontainer",name:"csfield",hidden:!0,layout:"vbox",items:[{xtype:"fieldcontainer",name:"cs_f1",fieldLabel:IRm$.r1("L_ITEM"),layout:"hbox",items:[{name:"right_fields1",xtype:"textfield",allowBlank:!1,readOnly:!0,emptyText:IRm$.r1("M_SEL_ITEM"),flex:1},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),width:20,handler:function(){this.selectItem("right_fields1","right_fields")},scope:this}]},{xtype:"fieldcontainer",name:"cs_f2",fieldLabel:IRm$.r1("L_ITEM"),layout:"hbox",items:[{name:"right_fields2",xtype:"textfield",allowBlank:!1,readOnly:!0,emptyText:IRm$.r1("M_SEL_ITEM"),flex:1},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),width:20,handler:function(){this.selectItem("right_fields2","right_fields",1)},scope:this}]}]}]}]}),IG$.filterEditorPanel.superclass.initComponent.apply(this,arguments)}}),IG$.filterEditor=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:450,reportoption:null,callback:null,init_f:function(){this.mainpanel.init_f()},_confirm:function(){var e=this;e.mainpanel._confirm(),e.callback&&e.callback.execute(),e.close()},initComponent:function(){var e=this;e.title=IRm$.r1("T_FILTER"),$s.apply(this,{defaults:{padding:ig$.padding},layout:"fit",items:[new IG$.filterEditorPanel({instance:e.instance,filteritem:e.filteritem,meta_type:e.meta_type,name:"mainp",padding:ig$.padding,targetitem:e.targetitem,cubeuid:e.cubeuid,reportoption:e.reportoption})],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){var t=this;e.mainpanel=t.down("[name=mainp]"),setTimeout((function(){t.init_f()}),300)}}}),IG$.filterEditor.superclass.initComponent.apply(this,arguments)}});
IG$.d$ValSel=$s.extend($s.panel,{field:null,layout:{type:"hbox",align:"stretch"},init_f:function(){var e,t,l=this,o=l.initial_values,i=[];if(l.down("[name=_3]").setValue("START"),o&&o.length){for(t=0;t<o.length;t++)(e=o[t])&&e.code&&i.push({code:e.code,text:e.text||e.code});l.down("[name=_2]").store.loadData(i)}},getValLst:function(){var e,t=this;if(t.prompt)e=new IG$.callBackObj(t,t.rs_getValLst,prompt),t.prompt.loadData(t,e);else if(t.field){var l,o={},i=new IG$._rpc$,n=t.down("[name=_4]").getValue(),a=t.down("[name=_3]").getValue(),s="filter";if(n){if(o.operator="LIKE",o.ftype="condition",n.indexOf("%")<0)switch(a){case"INCLUDE":n="%"+n+"%";break;case"START":n+="%";break;case"END":n="%"+n}o.values=[{code:n}]}l={uid:t.field?t.field.uid:t.prompt.name,option:"valuelist"},"sql_report"==t.meta_type&&t.reportoption&&(s="sql_report",o=t.reportoption.getCurrentPivot()),i.init(t,{ack:"olapservice",payload:l,mbody:o,meta_type:s},t,t.rs_getValLst,null,t.field?t.field.uid:t.prompt.name),i.send()}},rs_getValLst:function(e,t){var l,o=e.inline_data,i=[],n=this.down("[name=_1]");for(l=0;l<o.length;l++)i.push({code:o[l][0],text:o[l][1]||o[l][0]});n.store.loadData(i)},selectItem:function(e){var t,l,o=this.down("[name=_1]"),i=o.store,n=i.data.items,a=this.down("[name=_2]").store;a.data.items;if(0==e){var s=o.selModel.selected.items;if(s&&s.length>0)for(t=s.length-1;t>=0;t--)l=s[t],i.remove(l),a.insert(0,l.data)}else for(t=n.length-1;t>=0;t--)l=n[t],i.remove(l),a.insert(0,l.data)},removeItem:function(e){var t,l,o=this.down("[name=_1]").store,i=(o.data.items,this.down("[name=_2]")),n=i.store,a=n.data.items;if(0==e){var s=i.selModel.selected.items;if(s&&s.length>0)for(t=s.length-1;t>=0;t--)l=s[t],n.remove(l),o.insert(0,l.data)}else for(t=a.length-1;t>=0;t--)l=a[t],n.remove(l),o.insert(0,l.data)},initComponent:function(){this.items=[{xtype:"container",layout:{type:"vbox",align:"stretch"},flex:1,padding:ig$.padding,defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},fieldLabel:IRm$.r1("L_BTN_SEARCH"),labelWidth:35,items:[{xtype:"combobox",name:"_3",queryMode:"local",fieldLabel:"",displayField:"name",valueField:"value",editable:!1,autoSelect:!1,width:100,store:{fields:["name","value"],data:[{name:"Include",value:"INCLUDE"},{name:"Start",value:"START"},{name:"End",value:"END"}]}},{xtype:"textfield",name:"_4",flex:1,emptyText:IRm$.r1("L_SEARCH_KWD"),enableKeyEvents:!0,listeners:{keydown:function(e,t,l){13==t.keyCode&&this.getValLst()},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),width:20,handler:function(){this.getValLst()},scope:this}]},{xtype:"grid",name:"_1",store:{fields:[{name:"code"},{name:"text"}]},stateful:!0,flex:1,columnLines:!0,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},columns:[{text:IRm$.r1("B_CODE"),flex:1,sortable:!0,dataIndex:"code"},{text:IRm$.r1("B_TEXT"),flex:1,sortable:!0,dataIndex:"text"}],viewConfig:{stripeRows:!0}}]},{layout:{type:"vbox",align:"stretch",pack:"center"},items:[{xtype:"container",flxe:1},{xtype:"button",text:">>",handler:function(){this.selectItem(!0)},scope:this},{xtype:"button",text:">",handler:function(){this.selectItem(!1)},scope:this},{xtype:"button",text:"<",handler:function(){this.removeItem(!1)},scope:this},{xtype:"button",text:"<<",handler:function(){this.removeItem(!0)},scope:this},{xtype:"container",flex:1}]},{xtype:"container",flex:1,layout:{type:"vbox",align:"stretch"},border:1,bodyPadding:6,items:[{xtype:"grid",name:"_2",store:{fields:[{name:"code"},{name:"text"}]},stateful:!0,flex:1,columnLines:!0,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},columns:[{text:IRm$.r1("B_CODE"),flex:1,sortable:!1,dataIndex:"code"},{text:IRm$.r1("B_TEXT"),flex:1,sortable:!1,dataIndex:"text"}],viewConfig:{stripeRows:!0}}]}],IG$.d$ValSel.superclass.initComponent.apply(this)},listeners:{afterrender:function(){this.init_f()}}}),IG$.valueSelectWindow=$s.extend($s.window,{modal:!0,region:"center",layout:"card",closable:!1,resizable:!1,width:630,height:500,field:null,callback:null,selmode:0,_confirm:function(){var e,t=this,l=[];if(0==t.selmode){if((o=this.down("[name=_2]").store.data.items)&&o.length>0)for(e=0;e<o.length;e++)l.push(o[e].data)}else if(1==t.selmode){var o,i=t.down("[name=txtselvalues]").getValue();if(i)for(o=i.split(";"),e=0;e<o.length;e++)o[e]&&l.push({code:o[e],text:o[e]})}this.callback&&this.callback.execute(l),this.close()},swapSelMode:function(){var e,t=this,l=t.getLayout(),o=t.down("[name=btnSelMode]");0==t.selmode?(t.selmode=1,e=IRm$.r1("B_COMBO_VAL")):(t.selmode=0,e=IRm$.r1("B_CUST_VAL")),o.setText(e),l.setActiveItem(t.selmode)},initComponent:function(){var e=this,t=new IG$.d$ValSel({sheetoption:e.sheetoption,reportoption:e.reportoption,meta_type:e.meta_type,flex:1,prompt:e.prompt,field:e.field,initial_values:e.initial_values});this.title=IRm$.r1("T_VALUE_SELECT"),$s.apply(this,{defaults:{padding:ig$.padding},items:[t,{xtype:"form",layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_CVAL_DESC")},{xtype:"textarea",fieldLabel:IRm$.r1("B_VALUES"),name:"txtselvalues",labelPosition:"top",flex:1}]}],buttons:["->",{text:IRm$.r1("B_CUST_VAL"),name:"btnSelMode",handler:function(){this.swapSelMode()},scope:this},{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.valueSelectWindow.superclass.initComponent.apply(this,arguments)}});
IG$.helpWindow=$s.extend($s.window,{modal:!0,layout:"fit",closable:!0,resizable:!1,uid:null,width:600,height:400,sK2:function(e){var t=this,n=t.down("[name=memo]"),i=new IG$._rpc$;t.uid=e,n.setValue(e),i.init(t,{ack:"manual",payload:{uid:e,doctype:t.dm},mbody:{option:"get"}},t,t.rs_u4x,null),i.send()},rs_u4x:function(e){var t,n,i=this,l=this.down("[name=helpdoc]"),a=this.down("[name=memo]"),d=this.down("[name=helptitle]");i.u5x("cmd_cancel"),t=i._ldoc=e,a.setValue(i._ldoc.memo);var o=window.useLocale||"en_US";n=t.contents[o]=t.contents[o]||{lang:o},i.setTitle(n.title||IRm$.r1("B_HELP"));var s=i.down("[name=helpdoc]"),m=(l=i.down("[name=helpdocedit]"),n.text||"");$(".igc-user-help",$(s.body.dom)).html(m),l.setValue(m),d.setValue(n.title||"")},u5x:function(e){var t=this,n=t.instance,i=t.win,l=i?i.down("[name=btnedit]"):null,a=i?i.down("[name=btnsave]"):null,d=(i&&i.down("[name=btncancel]"),t.down("[name=helpmain]")),o=-1,s=n.dlgLogin.jS2;switch(e){case"cmd_edit":o=1;break;case"cmd_save":t.u6x();break;case"cmd_cancel":l&&s&&(l.setVisible(!0),a.setVisible(!1)),o=0}o>-1&&d.setActiveItem(o)},u7l:function(){var e=this.down("[name=helpdocedit]"),t=(this.down("[name=memo]"),this.down("[name=helptitle]")),n=window.useLocale||"en_US",i=this._ldoc.contents[n];i.text=e.getValue(),i.title=t.getValue()},u6x:function(){var e,t,n,i,l=this,a=new IG$._rpc$,d=window.useLocale||"en_US";i=l._ldoc||{},lcontent=i.contents[d]=i.contents[d]||{lang:d},l.u7l(),t=i,(n={uid:l.uid,doctype:l.dm,option:"save"}).uid||(n.name=n.memo,n.type="Help"),e=n,a.init(l,{ack:"manual",payload:e,mbody:t,meta_type:"help_content"},l,l.rs_u6x,null),a.send()},rs_u6x:function(e){var t=e?e.uid:null;t&&(this._ldoc.uid=t),IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")},initComponent:function(){var e=this;$s.apply(this,{title:IRm$.r1("B_HELP"),items:[{xtype:"panel",layout:"fit",padding:ig$.padding,items:[{xtype:"panel",name:"helpmain",layout:"card",items:[{xtype:"panel",name:"helpdoc",html:"<div class='igc-user-help'></div>"},{xtype:"panel",name:"helpedit",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",hidden:"report"==e.dm,fieldLabel:"DOCID",name:"memo"},{xtype:"textfield",fieldLabel:IRm$.r1("B_TITLE"),name:"helptitle"},{xtype:"textarea",name:"helpdocedit",flex:1,enableColors:!0,enableAlignments:!0}]}]}]}],buttons:[{text:IRm$.r1("B_EDIT"),hidden:"report"!=this.dm,name:"btnedit",handler:function(){var e=this;e.down("[name=peditor]");e.down("[name=btnsave]").setVisible(!0),e.down("[name=btnedit]").setVisible(!1),e.u5x("cmd_edit")},scope:e},{text:IRm$.r1("L_SAVE_CONTENT"),name:"btnsave",hidden:!0,handler:function(){this.down("[name=peditor]");this.u5x("cmd_save")},scope:e},{text:IRm$.r1("B_CLOSE"),name:"btncancel",handler:function(){e.close()},scope:e}],listeners:{afterrender:function(){var e=this;if(null!=e.t&&null!=e.c){e.setTitle(e.t||IRm$.r1("B_HELP"));var t=this.down("[name=helpdoc]");t.body&&$(t.body.dom).html(e.c)}else e.uid&&e.sK2(e.uid)}}}),IG$.helpWindow.superclass.initComponent.apply(this,arguments)}});
IG$.r___={},IG$.r___.registerTooltip=function(r,e){if(IG$.r___.C){var t=IG$.r___.C?IG$.r___.C[e]:null;t&&window.Ext&&Ext.tip.QuickTipManager.register({target:r.getId(),title:t.title,text:t.html})}else $.ajax({type:"GET",url:"./data/tip.json?uniquekey="+IG$.getUniqueKey(),dataType:"json",timeout:1e4,success:function(t){IG$.r___.C=t,IG$.r___.registerTooltip(r,e)},error:function(r,e,t){}})},IG$.loadHelp=function(r,e){if(IG$.r___.bC){var t=IG$.r___.bC?IG$.r___.bC[r]:null;t?(e.t=t.t,e.c=t.h,e.show()):IG$.alertmsg("Error!","Document for ("+r+") is not prepared yet!",null,null,1,"error")}else $.ajax({type:"GET",url:"./data/manual.json?uniquekey="+IG$.getUniqueKey(),dataType:"json",timeout:1e4,success:function(t){IG$.r___.bC=t;var _=IG$.r___.bC?IG$.r___.bC[r]:null;_?(e.t=_.t,e.c=_.h,e.show()):IG$.alertmsg("Error!","Document for ("+r+") is not prepared yet!",null,null,1,"error")},error:function(r,e,t){}})};
IG$.dlgsqlview=$s.extend($s.window,{xtype:"window",modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:500,height:400,defaults:{padding:ig$.padding},_confirm:function(){var e=this,t=e.down("[name=sql_name_sel]");if(!e.getAllValues({}))if(e._confirm_csql(),e._$eopt)IG$.alertmsg(ig$.appname,IRm$.r1("M_CONFIRM_CLOSE"));else{if(e.sheetoption)if(e.sheetoption.model.sql_id){if(e.sheetoption.model.sql_id!=t.getValue())return void IG$.confirmMessages(ig$.appname,IRm$.r1("L_C_SWAPSQL"),(function(n){"yes"==n&&(e.sheetoption.model.sql_id=t.getValue(),e.callback&&e.callback.execute(e.inlineview_sql_objects),e.close())}))}else e.sheetoption.model.sql_id=t.getValue();e.callback&&e.callback.execute(e.inlineview_sql_objects),e.close()}},validateQuery:function(){var e=this,t=new IG$._rpc$,n={inline_views:[]},l={};e.getAllValues(l)||(n.inline_views.push({dbpool:e.reportoption._mc.sql_datasource?e.reportoption._mc.sql_datasource.uid:null,sql:IG$._encodeVal(l.sql)}),t.init(e,{ack:"olapservice",payload:{uid:e.sheetoption.uid,option:"sqlcubemeta"},mbody:n,meta_type:"inlineviews"},e,(function(e){var t;e&&e.length&&(t=e[0],IG$.alertmsg(ig$.appname,IRm$.r1("M_VALIDATED")+"("+(t.columns?t.columns.length:"0")+" columns)",null,null,0,"success"))}),null),t.send())},requestSQLResult:function(){var e=this;if("sql_report"==e.meta_type&&e.editmode){var t,n=[],l=e.down("[name=sql_name_sel]");e.inlineview_sql_objects=n,t=e.reportoption._mc.inlineview_sql_objects=e.reportoption._mc.inlineview_sql_objects||[],$.each(t,(function(e,t){n.push({sql_id:t.sql_id,name:t.name,description:t.description,sql_inlineview:t.sql_inlineview})})),0==t.length&&n.push({sql_id:"sql_1",name:"SQL 1",description:null,sql_inlineview:null}),e._refresh_sql(),e.sheetoption&&e.sheetoption.model.sql_id?l.setValue(e.sheetoption.model.sql_id):l.setValue(n[0].sql_id)}else if(null!=e.sheetoption&&null!=e.reportoption){var s=e.reportoption.getCurrentPivot(),i=new IG$._rpc$;i.init(e,{ack:"olapservice",payload:{uid:e.uid,option:"sql",active:""+e.activeSheet},mbody:s,meta_type:e.meta_type||"report"},e,e.rs_requestSQLResult,null),i.send()}else e.sql&&e.rs_requestSQLResult({sql:e.sql})},_refresh_sql:function(){var e=this.down("[name=sql_name_sel]"),t=this.inlineview_sql_objects;e.store.loadData(t)},rs_requestSQLResult:function(e){this.down("[name=sql]").setValue(e?e.sql:null)},_update_sql:function(){var e,t,n=this,l=n.down("[name=sql_name_sel]"),s=n.down("[name=sql_id]"),i=n.down("[name=sql]"),o=n.inlineview_sql_objects,a=l.getValue();for(n._confirm_csql(),t=0;t<o.length;t++)if(o[t].sql_id==a){e=o[t];break}n.$rpt_sql=e,s.setValue(e?e.sql_id:null),i.setValue(e?IG$._decodeVal(e.sql_inlineview):null),setTimeout((function(){i.focus()}),100)},_get_max:function(){var e,t,n=this.inlineview_sql_objects,l=1;for(e=0;e<n.length;e++)(t=n[e].sql_id).indexOf("_")>0&&(t=Number(t.substring(t.indexOf("_")+1)),l=Math.max(t+1,l));return l},_confirm_csql:function(){var e=this,t=e.down("[name=sql]");e.$rpt_sql&&(e.$rpt_sql.sql_inlineview=IG$._encodeVal(t.getValue()))},_confirm_editname:function(){var e=this,t=e.down("[name=frm_sql_sel]"),n=e.down("[name=frm_sql_new]"),l=e.down("[name=sql_name]"),s=e.down("[name=sql]"),i=e.down("[name=sql_name_sel]"),o=e.inlineview_sql_objects;l.clearInvalid(),s.clearInvalid(),l.getValue()?(s.getValue()||s.setInvalid("Required!"),"edit"==e._$eopt?e.$rpt_sql.name=l.getValue():(e.$rpt_sql={sql_id:"sql_"+e._get_max(),name:l.getValue(),sql_inlineview:IG$._encodeVal(s.getValue())},o.push(e.$rpt_sql)),e._$eopt=null,e._refresh_sql(),i.setValue(e.$rpt_sql.sql_id),t.show(),n.hide()):l.setInvalid("Required!")},_edit:function(){var e=this;e.close(),e.edit_callback&&e.edit_callback.execute()},initComponent:function(){var e=this;$s.apply(e,{title:e.title||IRm$.r1("L_VIEW_SQL"),items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:ig$.padding,items:[{xtype:"container",name:"frm_sql_sel",hidden:"sql_report"!=e.meta_type||!e.editmode,layout:{type:"hbox",align:"stretch"},items:[{xtype:"combobox",fieldLabel:IRm$.r1("B_NAME"),name:"sql_name_sel",labelAlign:"left",valueField:"sql_id",displayField:"name",value:"",editable:!1,store:{xtype:"store",fields:[]},listeners:{change:function(e){this._update_sql()},scope:this}},{xtype:"button",name:"btn_edit",text:IRm$.r1("B_EDIT"),handler:function(){var e=this,t=e.down("[name=frm_sql_sel]"),n=e.down("[name=frm_sql_new]"),l=e.down("[name=sql_name]");e.$rpt_sql&&(e._$eopt="edit",l.setValue(e.$rpt_sql?e.$rpt_sql.name:null),t.hide(),n.show(),setTimeout((function(){l.focus()}),100))},scope:this},{xtype:"button",text:IRm$.r1("B_ADD"),handler:function(){var e=this,t=e.down("[name=frm_sql_sel]"),n=e.down("[name=frm_sql_new]"),l=e.down("[name=sql_name]"),s=e.down("[name=sql]");e._confirm_csql(),e._$eopt="new",l.setValue(""),s.setValue(""),e.$rpt_sql=null,t.hide(),n.show(),setTimeout((function(){l.focus()}),100)},scope:this}]},{xtype:"container",name:"frm_sql_new",hidden:!0,layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",fieldLabel:IRm$.r1("B_NAME"),name:"sql_name",enableKeyEvents:!0,listeners:{keyup:function(e,t,n){13==t.keyCode&&this._confirm_editname()},scope:this}},{xtype:"button",text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm_editname()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){var e=this,t=e.down("[name=frm_sql_sel]"),n=e.down("[name=frm_sql_new]");e._$eopt=null,e._update_sql(),t.show(),n.hide()},scope:this}]},{xtype:"textfield",fieldLabel:IRm$.r1("L_SQL_ID"),name:"sql_id",hidden:!0,readOnly:!0},{xtype:"textarea",name:"sql",required:!0,readOnly:"sql_report"!=e.meta_type||!e.editmode}]}],buttons:[{text:IRm$.r1("B_EDIT"),hidden:!("sql_report"==e.meta_type&&!e.editmode),handler:function(){this._edit()},scope:this},{text:IRm$.r1("B_VALIDATE"),hidden:"sql_report"!=e.meta_type||!e.editmode,handler:function(){this.validateQuery()},scope:this},{xtype:"button",text:IRm$.r1("B_REMOVE"),hidden:"sql_report"!=e.meta_type||!e.editmode,handler:function(){var e=this,t=e.inlineview_sql_objects,n=e.down("[name=sql_name_sel]");t.length<2?IG$.alertmsg(ig$.appname,IRm$.r1("L_C_SQL_NON"),null,null,0,"success"):IG$.confirmMessages(ig$.appname,IRm$.r1("L_C_REMSQL"),(function(l){if("yes"==l){var s;for(s=0;s<t.length;s++)if(t[s].sql_id==e.$rpt_sql.sql_id){t.splice(s,1);break}e._refresh_sql(),n.setValue(t[0].sql_id)}}))},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",hidden:"sql_report"!=e.meta_type||!e.editmode,handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this.requestSQLResult()}}}),IG$.dlgsqlview.superclass.initComponent.apply(this,arguments)}});
IG$.cellwizard=$s.extend($s.window,{modal:!1,layout:"fit",resizable:!1,isWindow:!0,closeAction:"destroy",width:600,height:620,_confirm:function(){this.saveContent()},_init:function(){var e=this,t=new IG$._rpc$;e.uid?(t.init(e,{ack:"content",payload:{uid:e.uid},mbody:{option:"diagnostics"}},e,e.rs_loadCnt,null),t.send()):e.parentuid&&e.rs_loadCnt({content:{meta_type:"chart_measure"}})},rs_loadCnt:function(e){var t,a=this,i=e.content;new IG$._rpc$;for(a.down("[name=itemname]").setValue(e.name),a.down("[name=description]").setValue(e.description),a.item=i,a._ropt="basedatatype;valuemax;valuemin;cellwidth;cellheight".split(";"),t=0;t<a._ropt.length;t++)a.down("[name="+a._ropt[t]+"]").setValue(i[a._ropt[t]]);$.each(["linecolor","fillcolor"],(function(e,t){a.down("[name="+t+"]").setValue(i[t])})),a.down("[name=axismetric]").store.loadData(i.axis_metrics),i.value_metric&&a.down("[name=valuemetric]").setValue(i.value_metric.name),a.item.cubeuid||IG$.getParentCube.call(a,a.uid,a.parentuid,new IG$.callBackObj(a,(function(e){a.rs_getCubeInfo(e)})))},rs_getCubeInfo:function(e){var t=e&&e.length?e[0]:null;t&&(this.item.cubeuid=t.uid)},saveContent:function(){var e,t,a=this,i=a.item;if(IG$.checkFields(a,["itemname"])){for(i.name=a.down("[name=itemname]").getValue(),i.description=a.down("[name=description]").getValue(),t=0;t<a._ropt.length;t++)e=a.down("[name="+a._ropt[t]+"]"),i[a._ropt[t]]=e.getValue();for($.each(["linecolor","fillcolor"],(function(e,t){i[t]=a.down("[name="+t+"]").getValue()})),i.axis_metrics=[],e=a.down("[name=axismetric]"),t=0;t<e.store.data.items.length;t++){var n=e.store.data.items[t].data;i.axis_metrics.push(n)}var l=new IG$._rpc$;l.init(a,{ack:"writecontent",payload:{uid:a.uid,pid:a.parentuid,name:i.name,description:i.description,type:a.itemtype,nodepath:a.parentnodepath?a.parentnodepath+"/"+i.name:null},mbody:i,meta_type:"chart_measure"},a,a.rs_saveContent,null,null),l.send()}},rs_saveContent:function(e){var t=this;IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success"),t.callback&&t.callback.execute(t.item),t.close()},valSelHdlr:function(e){this.item.value_metric=e,this.down("[name=valuemetric]").setValue(e.name)},initComponent:function(){var e=this;e.title="Cell Chart Options",$s.apply(this,{items:[{xtype:"panel",border:0,layout:"anchor",autoScroll:!0,padding:ig$.padding,items:[{xtype:"fieldset",title:IRm$.r1("B_GENERAL"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",name:"itemname",_fasl:1,fieldLabel:IRm$.r1("B_NAME"),required:!0},{xtype:"textarea",hidezoom:!0,name:"description",fieldLabel:IRm$.r1("B_DESC")}]},{xtype:"combobox",name:"basedatatype",fieldLabel:IRm$.r1("L_DATA_TYPE"),queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_CH_PERCENT_GAUGE"),value:0},{name:IRm$.r1("L_CH_AREA"),value:2},{name:IRm$.r1("L_CH_LINE"),value:3},{name:IRm$.r1("L_CH_COLUMN"),value:4},{name:IRm$.r1("L_CH_WINLOSE"),value:7},{name:IRm$.r1("L_CH_PIE"),value:8},{name:IRm$.r1("L_CH_BOXPLOT"),value:9}]}},{xtype:"fieldset",title:IRm$.r1("L_YAXIS_SETTING"),layout:"anchor",items:[{xtype:"numberfield",name:"valuemin",fieldLabel:IRm$.r1("L_MINIMUM"),flex:1},{xtype:"numberfield",name:"valuemax",fieldLabel:IRm$.r1("L_MAXIMUM"),flex:1}]},{xtype:"fieldset",title:IRm$.r1("L_FIELD_SELECTIONS"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_VALUE_FIELD"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"valuemetric",readOnly:!0,emptyText:IRm$.r1("M_SEL_ITEM")},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){var t=new IG$.metaSelectDlg({instance:e.instance,visibleItems:"bobject;table;folder;metric;measure;dataset;formulameasure;custommetric;datemetric",tree_options:{cubebrowse:!0,rootuid:e.item.cubeuid}});t.callback=new IG$.callBackObj(this,this.valSelHdlr),IG$.checkLogin(this,t)},scope:this}]},{xtype:"container",layout:{type:"hbox",align:"stretch",pack:"center"},items:[{xtype:"gridpanel",name:"axismetric",title:IRm$.r1("L_XAXIS_FIELD"),hideHeaders:!0,stateful:!0,store:{fields:["name","type","uid","nodepath"]},flex:1,height:110,viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_"},listeners:{beforedrop:function(e,t,a,i,n){var l,o=!1,r=t.records&&t.records.length>0?t.records[0]:null;if(this==t.view?t.copy=!1:t.copy=!0,a?this.me.store.indexOf(a):0,r&&("Metric"==r.data.type||"Measure"==r.data.type||"CustomMetric"==r.data.type||"FormulaMeasure"==r.data.type||"DateMetric"==r.data.type)){for(l=0;l<this.store.data.items.length;l++)if(this.store.data.items[l].data.uid==r.data.uid){o=!0;break}0==o&&this.store.add(r.data)}return!1},drop:function(e,t,a,i){a&&a.get("name");return!1}}},columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:!1,dataIndex:"name"},{text:IRm$.r1("B_TYPE"),flex:1,sortable:!1,dataIndex:"type"},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(e,t,a){var i=e.store;i.getAt(t);i.remove(i.data.items[t])}}]}]},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),width:40,handler:function(){var t=new IG$.metaSelectDlg({instance:e.instance,visibleItems:"bobject;table;folder;metric;measure;formulameasure;custommetric;datemetric",tree_options:{cubebrowse:!0,rootuid:e.item.cubeuid},multiselect:!0,callback:new IG$.callBackObj(this,(function(e){var t,a=this.down("[name=axismetric]").store,i=!1;for(t=0;t<a.data.items.length;t++)if(a.data.items[t].get("uid")==e.uid){i=!0;break}0==i&&a.add(e)}))});IG$.checkLogin(this,t)},scope:this}]}]},{xtype:"fieldset",title:IRm$.r1("L_OPTIONS"),layout:"anchor",items:[{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_LINE_COLOR"),layout:"hbox",items:[{xtype:"textfield",name:"linecolor",width:120},{xtype:"splitter"},{xtype:"splitbutton",width:30,menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=linecolor]").setValue("#"+t)},scope:e}},"-"]}}]},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_FILL_COLOR"),layout:"hbox",items:[{xtype:"textfield",name:"fillcolor",width:120},{xtype:"splitter"},{xtype:"splitbutton",width:30,menu:{showSeparator:!1,items:[{xtype:"colorpicker",listeners:{select:function(e,t){this.down("[name=fillcolor]").setValue("#"+t)},scope:e}},"-"]}}]},{xtype:"numberfield",fieldLabel:IRm$.r1("B_WIDTH"),name:"cellwidth",minValue:50,maxValue:400},{xtype:"numberfield",fieldLabel:IRm$.r1("B_HEIGHT"),name:"cellheight",minValue:20,maxValue:300}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this._init()}}}),IG$.cellwizard.superclass.initComponent.apply(this,arguments)}});
IG$._IB6=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!0,width:550,height:500,_init:function(){var e=this,t=e.reportoption,n=t._mc;e._is_sql_report||(e.cube_datasource=n?t._mc.cube_datasource:null)},cubeSelectedHandler:function(){var e=this,t=new IG$._rpc$,n=e.cubeobj;t.init(e,{ack:"helpcontent",payload:n,mbody:{option:"recent",btype:"L",mode:"register"}},e,(function(e){})),t.send()},_ld_tmpl:function(e,t,n){var a=this,l=new IG$._rpc$;l.init(a,{ack:"helpcontent",payload:{act:"list"},mbody:{option:"rpt_tmpl"}},a,(function(l){var i=[{name:IRm$.r1("B_SELECT"),value:""}],o=a.down("[name=folder_name]"),s=a.reportoption;l.length&&(a._folders={},a._parse_f(l,i,a._folders,null,n)),o.store.loadData(i),o.setValue(e||""),t&&s&&s._mc&&(a._is_sql_report?s._mc.sql_datasource&&(a.sql_datasource=s._mc.sql_datasource,!a.fappend&&a._card_next()):s._mc.cube_objects&&s._mc.cube_objects.length&&(a.cubeobj=s._mc.cube_objects[0],a._a1(),!a.fappend&&a._card_next()))})),l.send()},load_cnt:function(){var e=this,t=e.down("[name=folder_name]"),n=e.down("[name=_b]"),a=e._folders,l=t.getValue(),i=[];l&&a[l]?$.each(a[l].children,(function(e,t){i.push(t)})):a&&$.each(a,(function(e,t){$.each(t.children,(function(e,t){i.push(t)}))})),n.store.loadData(i)},_parse_f:function(e,t,n,a,l){var i,o,s,c,r;for(i=0;i<e.length;i++)if(o=e[i],(s=a&&a.nodepath||"")&&(s+="/"),s+=o.name,c={name:o.name,type:o.type,nodepath:s},"Folder"==o.type){c.children=[];var d={name:o.name,value:s};n[s]=c,this._parse_f(o.children,t,n,c,l),c.children.length&&t.push(d)}else l&&l.uid?(r=o.attributes&&o.attributes.attrb1?o.attributes.attrb1:"")&&r.includes(l.uid)&&a&&a.children.push(c):a&&a.children.push(c)},_a1:function(){var e=this.cubeobj;e&&this.down("[name=fcube]").setValue(e.name)},p$2E:function(e){this.cubeobj=e[0],this._a1()},a1:function(e,t){var n=this;t.empty(),e&&$.each(e,(function(e,a){a.itemtype=a.type,$("<li class='ig-r-clist'><div></div><span title='"+IG$.hEE(a.name)+"'>"+a.name+"</span></li>").appendTo(t).bind("click",(function(){n.cubeobj=a,n._a1()}))}))},_d1:function(){var e=this,t=e.down("[name=m_k]"),n={option:"search",name:t.getValue(),typelist:"Bobject;DataSet",typemode:"1"},a=new IG$._rpc$,l=e.down("[name=recentitems]"),i=$(l.el.dom),o=$(".recentcube",i),s=$("<ul></ul>"),c=$("#search",i),r=$(".recentcontainer",i),d=$(".searchcontainer",i);c.hide(),t.clearInvalid(),n.name?(c.show(),d.empty(),s.appendTo(d),a.init(e,{ack:"helpcontent",payload:{},mbody:n},e,(function(e){this.a1(e.children,s,1);var t=r.height();o.scrollTop(t+10)}),null,null),a.send()):t.markInvalid(IRm$.r1("B_REQ"))},_d2_search:function(){var e=this.down("[name=d2_kwd]");IG$._dofilter(this,"dsource",["name","local_name","description"],e)},_card_next:function(){var e=this,t=e.down("[name=maintab]"),n=e.down("[name=fcube]");2!=t.getLayout().selectedIndex&&(e._is_sql_report||(n.clearInvalid(),e.cubeobj)?(t.getLayout().setActiveItem(2),e._ld_tmpl(null,!0,e.cubeobj),e.down("[name=card_prev]").setDisabled(!1),e.down("[name=card_next]").setDisabled(!0)):n.markInvalid(IRm$.r1("B_REQ")))},_load_ds:function(){var e=new IG$._rpc$;e.init(this,{ack:"userdb",payload:{address:"/Connections",option:"list"},mbody:{}},this,(function(e){var t,n=e.children,a=this.down("[name=dsource]"),l=[];if(n&&n.length)for(t=0;t<n.length;t++)l.push(n[t]);a.store.loadData(l)}),!1),e.send()},initComponent:function(){var e=this;e.instance.dlgLogin.logininfo.l3.charAt(0);e._is_sql_report="sql_report"==e.meta_type,$s.apply(this,{defaults:{bodyStyle:"padding:10px"},title:IRm$.r1("L_T_CUBE_SEL"),items:[{xtype:"panel",layout:"card",name:"maintab",items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:ig$.padding,items:[{html:IRm$.r1("L_M_CUBE_SEL"),height:30,border:!1},{xtype:"panel",region:"center",flex:1,border:0,layout:{type:"vbox",align:"stretch"},region:"center",items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},fieldLabel:IRm$.r1("L_M_SUBJ"),items:[{xtype:"textfield",width:160,name:"fcube",emptyText:IRm$.r1("M_SEL_ITEM"),allowBlank:!1},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){new IG$.metaSelectDlg({targetobj:"bobject;dataset;",visibleItems:"workspace;folder;bobject;dataset",callback:new IG$.callBackObj(this,(function(e){this.cubeobj=e,this._a1()}))}).show()},scope:this}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},fieldLabel:IRm$.r1("B_SEARCH"),items:[{xtype:"textfield",name:"m_k",flex:1,enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&this._d1()},scope:this}},{xtype:"button",cls:"ig-link-btn",text:IRm$.r1("B_SEARCH"),handler:function(){this._d1()},scope:this}]},{xtype:"fieldset",title:IRm$.r1("L_M_SUBJ_REC"),flex:1,layout:"fit",border:1,items:[{xtype:"panel",border:0,flex:1,html:"<div class='recentcube'><span class='title'>"+IRm$.r1("L_RECENT_SUBJECT")+"</span><div class='recentcontainer'></div><span id='search' class='title' style='display:none;'>"+IRm$.r1("L_SEARCH_RESULT")+"</span><div class='searchcontainer'></div></div>",name:"recentitems"}]}]}]},{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:ig$.padding,items:[{xtype:"fieldset",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"d2_kwd",emptyText:IRm$.r1("L_SEARCH_KWD"),fieldLabel:IRm$.r1("B_SEARCH"),enableKeyEvents:!0,listeners:{keyup:function(e,t){13==t.keyCode&&this._d2_search()},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){this._d2_search()},scope:this},{xtype:"button",text:IRm$.r1("B_REFRESH"),handler:function(){this._load_ds()},scope:this}]},{xtype:"gridpanel",name:"dsource",flex:1,selType:"checkboxmodel",selModel:{mode:"SINGLE",checkSelector:".x-grid-cell"},store:{fields:[]},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",tdCls:"igc-td-link"},{text:IRm$.r1("B_DESC"),dataIndex:"description"}]}]},{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:ig$.padding,items:[{xtype:"combobox",name:"folder_name",fieldLabel:IRm$.r1("B_CATEGORY"),displayField:"name",labelWidth:60,labelAlign:"right",valueField:"value",editable:!1,queryMode:"local",flex:1,store:{fields:["name","value"]},listeners:{change:function(e,t,n,a){this.load_cnt()},scope:this}},{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",flex:1,layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",fieldLabel:IRm$.r1("B_SEARCH"),name:"m_ts",flex:1,emptyText:IRm$.r1("L_SEARCH_KWD"),enableKeyEvents:!0,listeners:{keyup:function(e,t,n){13==t.keyCode&&IG$._dofilter(this,"_b",["name","description"],this.down("[name=m_ts]"))},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){IG$._dofilter(this,"_b",["name","description"],this.down("[name=m_ts]"))},scope:this}]},{xtype:"button",text:IRm$.r1("B_REFRESH"),handler:function(){this._ld_tmpl()},scope:this}]},{xtype:"gridpanel",name:"_b",store:{},selType:"checkboxmodel",selModel:{mode:"SINGLE",checkSelector:".x-grid-cell"},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1}]}]}]}],buttons:[{text:"&laquo; "+IRm$.r1("B_PREVIOUS"),name:"card_prev",hidden:e.fappend,disabled:!0,handler:function(){var e=this,t=e.down("[name=maintab]");2==t.getLayout().selectedIndex&&(t.getLayout().setActiveItem(e._is_sql_report?1:0),e.down("[name=card_prev]").setDisabled(!0),e.down("[name=card_next]").setDisabled(!1))},scope:this},{text:IRm$.r1("B_NEXT")+" &raquo;",name:"card_next",hidden:e.fappend,handler:function(){this._card_next()},scope:this},{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){var e,t=this,n=t.down("[name=fcube]"),a=t.down("[name=_b]"),l=t.down("[name=dsource]"),i=a.selModel.selected.items;if(t._is_sql_report){if(!(e=l.getSelectionModel().selected)||e&&0==e.length)return void maintab.getLayout().setActiveItem(1);t._proc_p=1,t.sql_datasource=e&&e.length?e.items[0].data:null,t.callback&&t.callback.execute(t,!1,i&&i.length?i[0]:null)}else{if(n.clearInvalid(),!t.cubeobj)return void n.markInvalid(IRm$.r1("B_REQ"));t._proc_p=1,t.cubeSelectedHandler(),t.callback&&t.callback.execute(t,!1,i&&i.length?i[0]:null)}t.close()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){var e=this;e.fcreate?IG$.confirmMessages(ig$.appname,IRm$.r1("M_CONFIRM"),(function(t){"yes"==t&&(e._proc_p=1,e.callback&&e.callback.execute(e,!0),e.close())})):(e._proc_p=1,e.callback&&e.callback.execute(e,!0),e.close())},scope:this}],listeners:{afterrender:function(){var e,t=this,n=t.reportoption,a=t.sheetoption,l=this.down("[name=recentitems]"),i=$(l.el.dom),o=$("<ul></ul>"),s=$(".recentcontainer",i),c=new IG$._rpc$,r=t.down("[name=maintab]");t._init(),e=a&&a.datasource?a.datasource.uid:n._mc.default_datasource,t.cubeuid=t.cubeuid||e,n&&n._mc.cube_objects&&n._mc.cube_objects.length&&(t.p$2E(n._mc.cube_objects),t._card_next()),o.appendTo(s),t._is_sql_report?(r.getLayout().setActiveItem(1),t._load_ds()):(c.init(t,{ack:"helpcontent",payload:{},mbody:{option:"recent",btype:"L"}},t,(function(e){var n=e&&e.length?e:null;n&&t.a1(n,o)}),null,null),c.send())},close:function(e){var t=this;t._proc_p||(t.callback&&t.callback.execute(t,!0),t.close())}}}),IG$._IB6.superclass.initComponent.apply(this,arguments)}}),IG$.rptTmpl=$s.extend($s.window,{modal:!0,region:"center",layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!0,width:550,height:500,_init:function(){this._ld_tmpl()},_ld_tmpl:function(e){var t=this,n=new IG$._rpc$;n.init(t,{ack:"helpcontent",payload:{act:"list"},mbody:{option:"rpt_tmpl"}},t,(function(n){var a=[{name:IRm$.r1("B_SELECT"),value:""}],l=t.down("[name=folder_name]");n.length&&(t._folders={},t._parse_f(n,a,t._folders,null)),l.store.loadData(a),l.setValue(e||"")})),n.send()},_parse_f:function(e,t,n,a){var l,i,o,s;for(l=0;l<e.length;l++)i=e[l],(o=a&&a.nodepath||"")&&(o+="/"),o+=i.name,s={name:i.name,type:i.type,nodepath:o},"Folder"==i.type&&(s.children=[],t.push({name:i.name,value:o}),n[o]=s,this._parse_f(i.children,t,n,s)),a&&a.children.push(s)},load_cnt:function(){var e,t=this,n=t._folders,a=t.down("[name=folder_name]"),l=[],i=t.down("[name=dsource]");a.getValue()&&n&&(e=n[a.getValue()])&&e.children&&(l=e.children),i.store.loadData(l)},_confirm:function(){var e=(n=this).down("[name=folder_name]"),t=n.down("[name=tmpl_name]");if(e.clearInvalid(),e.getValue())if(n.pivotxml){if(t.clearInvalid(),!t.getValue())return void t.markInvalid(IRm$.r1("B_REQ"));var n=this,a=new IG$._rpc$;a.init(n,{ack:"helpcontent",payload:{act:"save",option:"rpt_tmpl",folder:e.getValue(),name:t.getValue()},mbody:n.pivotxml,meta_type:n.meta_type||"report"},n,(function(t){n.callback&&n.callback.execute(n,e.getValue()),n.close()})),a.send()}else n.callback&&n.callback.execute(n,e.getValue()),n.close();else e.markInvalid(IRm$.r1("B_REQ"))},initComponent:function(){$s.apply(this,{defaults:{padding:ig$.padding},title:IRm$.r1("L_T_TMPL_SEL"),items:[{xtype:"panel",padding:ig$.padding,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("B_FOLDER"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",name:"m_selector",layout:{type:"hbox",align:"stretch"},items:[{xtype:"combobox",name:"folder_name",fieldLabel:IRm$.r1("B_NAME"),displayField:"name",labelWidth:60,labelAlign:"right",valueField:"value",editable:!1,queryMode:"local",flex:1,store:{fields:["name","value"]},listeners:{change:function(e,t,n,a){this.load_cnt()},scope:this}},{xtype:"button",text:IRm$.r1("L_ADD_NEW"),handler:function(){var e=this,t=e.down("[name=m_new_item]"),n=e.down("[name=m_selector]");e.down("[name=folder_new_name]").setValue(""),t.setVisible(!0),n.setVisible(!1)},scope:this}]},{xtype:"container",name:"m_new_item",hidden:!0,layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"folder_new_name",fieldLabel:IRm$.r1("B_NAME"),flex:1},{xtype:"button",text:IRm$.r1("B_ADD"),handler:function(){var e,t,n=(o=this).down("[name=m_new_item]"),a=o.down("[name=m_selector]"),l=o.down("[name=folder_new_name]"),i=o.down("[name=folder_name]");for(l.clearInvalid(),e=l.getValue(),t=0;t<i.store.data.items.length;t++)if(i.store.data.items[t].get("value")==e){e=null;break}if(!e||e&&e.indexOf("..")>-1)return l.markInvalid(),!1;var o=this,s=new IG$._rpc$;s.init(o,{ack:"helpcontent",payload:{act:"create_folder",name:e},mbody:{option:"rpt_tmpl"}},o,(function(e){l.setValue(""),n.setVisible(!1),a.setVisible(!0),o._ld_tmpl()})),s.send()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){var e=this.down("[name=m_new_item]"),t=this.down("[name=m_selector]");e.setVisible(!1),t.setVisible(!0)},scope:this}]}]}]},{xtype:"gridpanel",name:"dsource",flex:1,selType:"checkboxmodel",selModel:{mode:"SINGLE"},store:{fields:[]},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"}],tbar:[{xtype:"button",text:IRm$.r1("L_REMOVE_SELECTED"),handler:function(){var e,t=this.down("[name=dsource]"),n=t.getSelectionModel().selected;for(e=n.length-1;e>=0;e--)t.store.remove(n.items[e])},scope:this}]},{xtype:"textfield",fieldLabel:IRm$.r1("B_TEMPLATE_NAME"),hidden:!this.pivotxml,name:"tmpl_name"}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this._init()}}}),IG$.rptTmpl.superclass.initComponent.apply(this,arguments)}});
IG$.metaSelectDlg=$s.extend($s.window,{width:680,height:550,layout:"fit",modal:!0,mode:"select",xtype:"window",open_folder_clickhandler:function(e){var t=this,n=e.type.toLowerCase(),a=e.name,i=e.nodepath,o=e.uid||e.address,l=e.is_sub,r=!1,s=new IG$._rpc$;return(IG$.testVal("folder|table|inlineview|javapackage|metrics|root|datemetric|dataset",n)||l||"bobject"==n&&e.root)&&(t.selectedPath={uid:o,nodepath:i,name:a},s.init(null,{ack:"content",payload:{uid:o},mbody:{option:"folder"}},t,t.rs_open_folder_clickhandler,null),s.send(),r=!0),r},rs_open_folder_clickhandler:function(e){var t=e?e.children:null;this.processItemNodes(t,e)},load_content:IG$.load_content,rload_content:function(e,t){var n,a,i,o=this,l=o.down("[name=datagrid]"),r=[],s=null;if(o.openItem=null,o.ltype=t,0!=t&&5!=t&&1!=t||(o.openItem=e,o.openItem.name,s=o.openItem.nodepath,i=o.openItem.uid,o.openItem.type.toLowerCase()),o.setBreadCrumb(s,i),e.children)for(n=0;n<e.children.length;n++)(a=e.children[n]).ltype=a.type.toLowerCase(),a.iconcls=IG$.get_metatype_icon(a.ltype,a),r.push(a);IG$.sortMeta(r),l.store.loadData(r)},processItemNodes:function(e,t){var n,a=[],i=this,o=i.down("[name=datagrid]");if(i.setBreadCrumb(t.nodepath,t.uid),e)for(n=0;n<e.length;n++){var l=e[n];l.itemtype=l.type||l.itemtype,0==!(null==i.visibleItems||i.visibleItems&&(i.visibleItems+";").indexOf((l.type+";").toLowerCase())>-1)&&a.push(l)}o.store.clearData(),IG$.sortMeta(a),o.store.loadData(a)},setBreadCrumb:function(e,t){var n,a,i,o,l,r=this,s=r.down("[name=_bc]"),d=s?$(s.body.dom):null,c=[];if(d.empty(),r.bcuid=t,r._breadcrumbitems=[],e){for(n=e.split("/"),i=1;i<n.length;i++){for(a={name:n[i],cpath:""},o=1;o<i+1;o++)a.cpath+="/"+n[o];c.push(a)}l=$("<ul class='ig-navi-breadcrumb'></ul>").appendTo(d),$.each(c,(function(e,t){var n,a=e<c.length-1;e>0&&$("<li class='ig-navi-breadcrumb-sep'>&gt;</li>").appendTo(l),(n=$("<li class='"+(a?"qlink":"")+"'>"+(t.lname||t.name)+"</li>").appendTo(l)).appendTo(l),r._breadcrumbitems.push(t),a&&n.bind("click",(function(){r.load_content(0,t.cpath)}))}))}},_confirm:function(){var e,t,n=this,a=n.selectedItem,i=n.down("[name=datagrid]").getSelectionModel().selected;if("select"==n.mode){if(!a&&"folder"!=n.targetobj)return void IG$.alertmsg(ig$.appname,IRm$.r1("L_SELECT_ITEM"),null,n,1,"error");if("folder"==n.targetobj){if(!n.selectedPath)return void IG$.alertmsg(ig$.appname,IRm$.r1("L_SELECT_ITEM"),null,n,1,"error");a=n.selectedPath}if(n.multiselect)for(a=[],e=0;e<i.length;e++)t=i.items[e],a.push(t.data);n.callback&&n.callback.execute(a)}else if("newitem"==n.mode){var o=n.txtItemName.getValue();if(""==o)return void IG$.alertmsg(ig$.appname,IRm$.r1("L_TYPE_ITEM_NAME"),null,n,1,"error");if(!n.selectedPath)return void IG$.alertmsg(ig$.appname,IRm$.r1("L_SELECT_PATH"),null,n,1,"error");n.selectedPath.name=o,n.callback&&n.callback.execute(n.selectedPath)}n.close()},custom_expanded_func:function(e){var t=this.tree;"newitem"==this.mode&&e.isRoot()&&0==e.childNodes.length&&setTimeout((function(){IG$.alertmsg(ig$.appname,IRm$.r1("B_SELECT_FOLDER"),null,null,0,""),t.m_0._createMetaObject("Folder",e.get("uid")||"/",e.get("nodepath")||"/",e)}),1e3)},initComponent:function(){var e,t=this,n={instance:t.instance,showtoolbar:!1,_search:!0,custom_click_func:new IG$.callBackObj(t,(function(e,n){t.open_folder_clickhandler(n)})),custom_expanded_func:new IG$.callBackObj(t,t.custom_expanded_func),region:"center",name:"__mtree",flex:1,visibleItems:t.folderItems||"folder;table;inlineview;dataset;",tree_options:t.tree_options};t.title="newitem"==t.mode?IRm$.r1("T_META_SAVE"):IRm$.r1("T_META_SELECT"),n.initpath=t.initpath,t.tree=new IG$.naviTree(n),e={items:[{xtype:"container",layout:"border",padding:0,items:[{xtype:"container",width:210,region:"west",split:!0,layout:"fit",margins:0,border:1,items:[t.tree]},{xtype:"panel",region:"center",flex:2,border:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",name:"_bc",height:32,border:0},{xtype:"grid",name:"datagrid",store:{xtype:"store",fields:["name","lname","description","type","nodepath","memo","uid"]},selModel:{mode:t.multiselect?"MULTI":"SINGLE"},tbar:[{xtype:"textfield",flex:1,emptyText:IRm$.r1("L_SEARCH_KWD"),name:"_filter",enableKeyEvents:!0,listeners:{keyup:function(e,t,n){13==t.keyCode&&IG$._dofilter(this,"datagrid",["name","lname","description"])},scope:this}},{xtype:"button",iconCls:"icon-toolbar-search",tooltip:IRm$.r1("B_SEARCH"),handler:function(){IG$._dofilter(this,"datagrid",["name","lname","description"])},scope:this}],columns:[{header:IRm$.r1("B_NAME"),dataIndex:"name",flex:1,renderer:function(e,t,n){return n.get("lname")||n.get("name")}},{header:IRm$.r1("B_TYPE"),dataIndex:"type"},{header:IRm$.r1("B_DESC"),dataIndex:"description"}],stripeRows:!0,stateful:!0,stateId:"grid",flex:1,listeners:{itemdblclick:function(e,t,n,a,i){var o=this,l=o.down("[name=datagrid]").store.data.items[a].data,r=l.type.toLowerCase();if(IG$.testVal("folder|table|inlineview|datemetric|bobject",r)){if(o.targetobj&&o.targetobj.indexOf(r+";")>-1)return;o.open_folder_clickhandler(l)}},itemclick:function(e,t,n,a,i){if(a>-1){var o,l,r,s=this,d=s.down("[name=datagrid]"),c=d.store.data.items[a].data,m=c.type.toLowerCase(),p=d.getSelectionModel().selected;if(1==/folder|table|inlineview|bobject/.test(m)&&(!s.targetobj||s.targetobj&&s.targetobj.indexOf(m+";")<0))s.open_folder_clickhandler(c);else if(s.selectedItem=c,s.multiselect){for(o=[],r=0;r<p.length;r++)l=p.items[r],o.push(l.get("name"));s.txtItemName.setValue(o.join(","))}else s.txtItemName.setValue(c.name)}},scope:this}}],bbar:[{name:"txtItemName",fieldLabel:IRm$.r1("B_NAME"),xtype:"textfield",enableKeyEvents:!0,listeners:{keyup:function(e,t){var n=this;13==t.keyCode&&setTimeout((function(){n._confirm()}),10)},scope:this}}]}]}],buttons:[{xtype:"button",text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e,t){var n=e;n.tree.down("[name=m_0]");n.datagrid=n.down("[name=datagrid]"),n.txtItemName=n.down("[name=txtItemName]")}}},t.cancelable&&(e.buttons.splice(0,0,"->"),e.buttons.splice(0,0,{xtype:"button",text:IRm$.r1("B_CLEAR"),handler:function(){var e=this;e.callback&&e.callback.execute(null),e.close()},scope:this})),$s.apply(t,e),IG$.metaSelectDlg.superclass.initComponent.call(this)}});
IG$.ltW=IG$.ltW||[{name:"jobcategory",type:"select",categ:"jobcategory",shortdesc:"Begin Here",title:"Before You Begin",items:[{name:"rdbms",title:"Connect Data",actiontype:"gotomenu",action:"rdbms;cube;report",desc:"Follow step for relational database analysis."},{name:"excel",title:"Excel file analysis",actiontype:"gotomenu",action:"excel;report",desc:"Local file to analysis report."},{name:"report",title:"Make report",actiontype:"gotomenu",action:"report",desc:"Make new report with easy guides."}]},{name:"connectdb",categ:"rdbms",shortdesc:"Database",title:"Connect Data.",type:"cmd",btnname:"New DataSource Instance",desc:"<b>Click [button] to open connect database manager.</b>"},{name:"businessobject",categ:"rdbms",shortdesc:"Business Object",title:"Make Business Object",type:"cmd",btnname:"New Business Object",desc:"<b>Click [button] to create business object.</b>"},{name:"registertable",categ:"rdbms",shortdesc:"Register Tables",title:"Register Tables.",type:"cmd",btnname:"Table Register Manager",desc:"<b>Click [button] to open register table manager.</b>"},{name:"datamodel",categ:"rdbms",shortdesc:"Data Modelling",title:"Make relations between tables.",type:"cmd",btnname:"New Relational Model",desc:"<b>Click [button] to make new datamodel.</b>"},{name:"codmapping",categ:"cube",shortdesc:"Code Mapping",title:"Define Code Mapping DataSet.",type:"cmd",btnname:"Define Code Mapping",desc:"<b>Click [button] to Code Mapping Manager.</b>"},{name:"openexcel",categ:"excel",enabled:!1,shortdesc:"Upload Excel or CSV file",title:"Upload file and change Metric attribute or options.",type:"cmd",btnname:"Load Excel or CSV file",desc:"<b>Click [button] to set detailed information on columns</b>"},{name:"beforerstat",categ:"rstatistics",shortdesc:"Before begin",title:"Before begin R statistics",type:"html",html:"<p>R statistics is available on each report. You can transfer between items with sheet/chart/R statistics on report toolbar menu.</p><p>R runs with script running on server. Make your R script or select one on the templates.</p>"},{name:"report",categ:"report",shortdesc:"Make Report",title:"Make Report with Pivot.",type:"cmd",btnname:"New Report",desc:"<b>Click [button] to make new Report</b>"}];
IG$.smartWizardButton=function(){},IG$.smartWizardButton.prototype={show:function(){this.klink.removeClass("disabled"),this.klink.addClass("selected"),this.content.fadeIn()},hide:function(){this.klink.removeClass("selected"),this.klink.addClass("disabled"),this.content.hide()}},IG$.smartProcess=function(e,t,a,i,n){var s=t,d=e.mainPanel||null,o=1;switch(a){case"registertable":IG$.procMenuCommand(e,"CMD_TABLE_REGISTER");break;case"connectdb":IG$.procMenuCommand(e,"CMD_CONNECT_DB");break;case"businessobject":IG$.create_meta(e);break;case"datamodel":d.navigateApp(null,"CubeModel".toLowerCase(),"New DataModel",null,null,!0);break;case"rcube":d.navigateApp(null,"Cube".toLowerCase(),"New Cube",null,null,!0);break;case"report":d.navigateApp(null,"Report".toLowerCase(),"New Report",null,null,!0);break;case"dashboard":d.navigateApp(null,"Dashboard".toLowerCase(),"New Dashboard",null,null,!0,n);break;case"molapcube":d.navigateApp(null,"MCube".toLowerCase(),"New MCube",null,null,!0,n);break;case"setmicrocube":d.navigateApp(null,"DataCube".toLowerCase(),"LocalFileLoader",null,null,!0);break;case"openexcel":d.navigateApp(null,"DataSet".toLowerCase(),"LocalFileLoader",null,null,!0);break;case"sqlloading":d.navigateApp(null,"SQLCube".toLowerCase(),"SQL Cube",null,null,!0);break;case"close_wizard":s.close_wizard();break;case"codmapping":IG$.procMenuCommand(e,"CMD_LOOKUP");break;case"variables":IG$.procMenuCommand(e,"CMD_VAR");break;default:o=0}s.dwizard&&s.dwizard.dwizard_main&&o&&s.dwizard.dwizard_main.customClose()},IG$.smartwizard=function(e,t,a){var i=this,n=$(t.dwizard.el.dom),s=$(t.dwizard_bar.el.dom);i.instance=e,i.dwizard=t,i.container=n,i.cbar_area=s,n.empty(),s.empty();$("<div class='app-wizard-bg'></div>").appendTo(i.container);i.html=$("<div class='idv-wz-cntl'></div>").appendTo(i.container),i.categ=a,i.categmap=[],i.initialize()},IG$.smartwizard.prototype={initialize:function(){var e,t=this,a=t.categ,i=t.instance;for(this.html.empty(),t.categmap={},t.c_nstep=0,e=0;e<a.length;e++)t.categmap[a[e].name]=a[e];t.c_step=a[0],t.drawStep();var n,s={};s.bar=$("<div class='idv-st-abar'></div>").appendTo(this.cbar_area),s.finish=$("<button class='idv-st-btn idv-st-btn-finish'>Finish</button>").appendTo(s.bar),n=$("<div class='idv-st-btn-box'></div>").appendTo(s.bar),s.prev=$("<button class='idv-st-btn idv-st-btn-prev'>Previous</button>").appendTo(n),s.next=$("<button class='idv-st-btn idv-st-btn-next'>Next</button>").appendTo(n),s.next.addClass("idv-st-btn-disable"),s.prev.addClass("idv-st-btn-disable"),s.finish.bind("click",(function(){IG$.smartProcess(i,t,"close_wizard")})),s.next.bind("click",(function(){t.doStep(1)})),s.prev.bind("click",(function(){t.doStep(-1)})),this.actionbar=s},close_wizard:function(){var e=this,t=e.instance;e.dwizard&&e.dwizard.dwizard_main?e.dwizard.dwizard_main.close():IG$.procMenuCommand(t,"CMD_HOME")},drawStep:function(){var e=this,t=e.html,a=e.categ,i=e.instance;e.stepcontainer=$("<div class='idv-st-cnter'></div>").appendTo(t),e.stepul=$("<ul class='idv-st-anch'></ul>").appendTo(t),e.stepitems=[],$.each(a,(function(t,a){var n,s=t+1,d=t==e.c_nstep?"selected":"disabled",o=new IG$.smartWizardButton;switch(o.kul=$("<li></li>").appendTo(e.stepul),o.klink=$("<a href='#' class='"+d+"'></a>").appendTo(o.kul),o.item=a,o.label=$("<label class='idv-st-nbr'>"+s+"</label>").appendTo(o.klink),o.stepdesc=$("<span class='idv-st-desc'>"+a.shortdesc+"</span>").appendTo(o.klink),o.content=$("<div class='idv-st-cnt'></div>").appendTo(e.stepcontainer),o.ctitle=$("<h2 class='idv-st-stitle'><span id='mstep'>Step"+s+"</span> : "+a.title+"</h2>").appendTo(o.content),a.type){case"select":var l=$("<ul class='idv-st-sel'></ul>").appendTo(o.content);a.divdesc=$("<div class='idv-st-sel-desc'></div>").appendTo(o.content),$.each(a.items,(function(t,i){0!=i.enabled&&$("<li class='idv-st-sel-item'><a href='#'>"+i.title+"</a></li>").appendTo(l).bind("click",(function(){if("gotomenu"===i.actiontype){var t=i.action;e.loadedAction==t?e.doStep(1):e.loadActionMenu(t,a,i)}}))}));break;case"cmd":n=$("<div class='idv-st-inr'></div>").appendTo(o.content),$("<div>"+o.item.desc+"</div>").appendTo(n),$("<div class='idv-st-btn'>"+(o.item.btnname||"Continue")+"</div>").appendTo(n).bind("click",(function(){IG$.smartProcess(i,e,o.item.name)}));break;case"html":n=$("<div class='idv-st-inr'></div>").appendTo(o.content),$(o.item.html).appendTo(n),o.item.buttons&&o.item.buttons.length>0&&$.each(o.item.buttons,(function(t,a){$("#"+a,n).bind("click",(function(){IG$.smartProcess(i,e,o.item.name,a)}))})),o.item.post&&o.item.post(e,n)}t>0&&(o.kul.hide(),o.content.hide()),o.klink.bind("click",(function(){var t,a=-1,i=o.item.name;if(i==e.stepitems[0].item.name)a=0;else for(t=0;t<e.actionsteps.length;t++)if(e.actionsteps[t].item.name==i){a=t+1;break}a>-1&&e.goStep(a)})),e.stepitems.push(o)}))},loadActionMenu:function(e,t,a){var i,n,s=this,d=2;for(s.loadedAction=e,s.actionbar.next.removeClass("idv-st-btn-disable"),e=";"+e+";",s.actionsteps=[],s.c_nstep=0,s.hidemsg(),t.divdesc.show(),t.divdesc.html(a.desc),i=1;i<s.stepitems.length;i++)n=s.stepitems[i],e.indexOf(";"+n.item.categ+";")>-1?(n.hide(),n.label.html(""+d),n.kul.fadeIn(),$("#mstep",n.stepdesc).html("Step "+d),$("#mstep",n.ctitle).html("Step "+d),d++,s.actionsteps.push(n)):n.kul.hide()},doStep:function(e){var t=this,a=t.c_nstep+e;if(t.actionsteps&&t.actionsteps.length>0&&a>-1&&a<t.actionsteps.length+1)t.goStep(a);else{var i="";(!t.actionsteps||t.actionsteps&&0==t.actionsteps.length)&&(i="Click work category to proceed!"),t.showmsg(i)}},goStep:function(e){var t,a=this;if(a.hidemsg(),0==e?(a.stepitems[0].show(),a.actionbar.next.removeClass("idv-st-btn-disable"),a.actionbar.prev.addClass("idv-st-btn-disable")):(a.stepitems[0].hide(),a.actionsteps.length==e?a.actionbar.next.addClass("idv-st-btn-disable"):a.actionbar.next.removeClass("idv-st-btn-disable"),a.actionbar.prev.removeClass("idv-st-btn-disable")),a.actionsteps)for(t=0;t<a.actionsteps.length;t++)t+1==e?a.actionsteps[t].show():a.actionsteps[t].hide();a.c_nstep=e},showmsg:function(e){},hidemsg:function(){}},IG$.dlgSmartWizard=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!0,width:650,height:440,header:!1,init_f:function(){var e=this,t=e.down("[name=dwizard]"),a=e.down("[name=dwizard_bar]");e._loaded||(e._wizard=new IG$.smartwizard(e.instance,{dwizard_main:e,dwizard:t,dwizard_bar:a},IG$.ltW),e._loaded=1)},customClose:function(){this.hide()},initComponent:function(){$s.apply(this,{items:[{xtype:"panel",layout:"fit",bodyPadding:20,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:"fit",flex:1,name:"dwizard",autoScroll:!0},{xtype:"container",layout:"fit",height:40,name:"dwizard_bar"}]}]}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.dlgSmartWizard.superclass.initComponent.apply(this,arguments)}});
IG$.scheduler=$s.extend(IG$.v$pnl,{closable:!0,iconCls:"icon-schedule",layout:{type:"vbox",align:"stretch"},init_f:function(){this.getSrvStat()},getSrvStat:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"schedule",payload:{action:"checkstatus"},mbody:{}},e,e.rs_getSrvStat,null),t.send()},rs_getSrvStat:function(e){var t,a=this.down("[name=txtstatus]"),n="Failed to check status";e&&("100"==(t=e.code)?n="Schedule Server is running and normal":"1"==t?n="Scheduler is running and normal":"5"==t?(e.message,n="Error while connect schedule server. errorcode: ("+e.errcode+") "+e.errmsg):(t="6")&&(n="Server result xml is not well formed")),a.setValue(n),this.getJobs()},getJobs:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"schedule",payload:{action:"list"},mbody:{sccmd:e.mod_type}},e,e.rs_getJobs,null),t.send()},rs_getJobs:function(e){var t,a,n,i,s,o=this,l=[],r=o.down("[name=grdjoblist]"),d=(o.down("[name=grddetail]"),o.down("[name=detailpanel]")),c=o.mod_type;if(e)for(t=0;t<e.length;t++){switch(n="Unknown",(a=e[t]).pstatus){case"A":n="Ready to Pickup";break;case"C":n="Completed";break;case"E":n="User Cancelled"}c&&a.sccmd!=c||(a.pstatus_desc=n,a.crtdate_desc=IG$.formatDate(a.crtdate),a.uptdate_desc=IG$.formatDate(a.uptdate),a.pickdate_desc=a.pickdate?IG$.formatDate(a.pickdate):null,a.enddate_desc=a.enddate?IG$.formatDate(a.enddate):null,s=IRm$.r1("L_SC_"+a.sctype),a.sc=s+" "+a.scoption,(i=a.program)&&(a.objname=i.name),l.push(a))}d.setVisible(!1),r.store.loadData(l)},getJobDtl:function(e){var t=this,a=new IG$._rpc$;a.init(t,{ack:"schedule",payload:{sid:e,action:"joblist"},mbody:{}},t,t.rs_getJobDtl,null),a.send()},rs_getJobDtl:function(e){var t,a,n,i=this.down("[name=grddetail]"),s=this.down("[name=detailpanel]"),o=[];if(e&&e.length)for(t=0;t<e.length;t++){switch(n="Unknown",(a=e[t]).pstatus){case"C":n="Completed";break;case"I":n="Initalizaed";break;case"F":n="Failed";break;case"T":n="Cancel Queue";break;case"Q":n="Queue ","T"==a.trigger?n+=" (^o^)":n+=" (@.@)"}a.pstatusdesc=n,a.crtdate_desc=IG$.formatDate(a.crtdate),a.uptdate_desc=IG$.formatDate(a.uptdate),a.pickdate_desc=IG$.formatDate(a.pickdate),o.push(a)}s.setVisible(!0),i.store.loadData(o)},registerJob:function(e){var t=this,a=new IG$._rpc$;a.init(t,{ack:"appoption",payload:{address:"schedule_config"},mbody:{}},t,(function(a){var n,i,s=[];if(a&&a.programs){for(n=0;n<a.programs.length;n++)i=a.programs[n],s.push(i);var o=new IG$.d$RegSch({instance:t.instance,sid:e?e.get("sid"):null,uid:null,objtype:e?null:"program",_cur_job:e,callback:new IG$.callBackObj(t,(function(a){e?t.getJobDtl(e.get("sid")):t.getSrvStat()})),req:null,programs:s});IG$.checkLogin(t,o)}})),a.send()},cancelJob:function(e){var t,a=this,n=new IG$._rpc$,i=e.get("sid"),s=a.down("[name=grddetail]");s.store.data.items.length&&(t=s.store.data.items[0].get("jid")),t&&(n.init(a,{ack:"schedule",payload:{action:"cancel"},mbody:{sid:i,jid:t}},a,(function(e){this.getJobDtl(i)}),null),n.send())},purgeJob:function(e){IG$.confirmMessages(ig$.appname,IRm$.r1("M_CONFIRM_DELETE"),(function(t){if("yes"==t){var a=new IG$._rpc$,n=e.get("sid"),i=e.get("jid");a.init(this,{ack:"schedule",payload:{action:"delete"},mbody:{sid:n,jid:i}},this,(function(e){this.getJobDtl(n)}),null),a.send()}}))},deleteJob:function(e){var t=new IG$._rpc$;t.init(this,{ack:"schedule",payload:{action:"delete"},mbody:{sid:e.get("sid"),jid:e.get("jid")}},this,(function(t){this.getJobDtl(e.get("sid"))}),null),t.send()},getLog:function(e,t,a){var n=new IG$.schLog({instance:this.instance,sid:e,jid:t,executeid:a});IG$.checkLogin(this,n)},initComponent:function(){var e=this;e.items=[{xtype:"fieldset",title:IRm$.r1("L_SCH_SVR_STAT"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"txtstatus",value:"Server status checking...",readOnly:!0,width:280},{xtype:"button",text:IRm$.r1("B_REFRESH"),handler:function(){this.getSrvStat()},scope:this},{xtype:"button",text:IRm$.r1("L_REG_SCH"),handler:function(){this.registerJob()},scope:this},{xtype:"container",flex:1},{xtype:"button",text:IRm$.r1("L_PROGRAMS"),name:"btn_prog",accl:"ig_schedule_prog",handler:function(){IG$.procMenuCommand(e.instance,"CMD_SCH_PROG","scheduler_quartz")},scope:this}]}]},{xtype:"gridpanel",flex:1,name:"grdjoblist",store:{xtype:"store"},columns:[{text:IRm$.r1("B_NICKNAME"),flex:1,dataIndex:"name"},{text:IRm$.r1("L_OBJNAME_CLASS"),flex:1,dataIndex:"objname"},{text:IRm$.r1("B_OWNER"),dataIndex:"uuname"},{text:IRm$.r1("B_STATUS"),dataIndex:"pstatus_desc"},{text:IRm$.r1("B_SCHEDULE"),dataIndex:"sc"},{text:IRm$.r1("L_PICKUP_TIME"),dataIndex:"pickdate_desc"},{text:IRm$.r1("L_END_TIME"),dataIndex:"enddate_desc"},{text:IRm$.r1("L_HEART_BEAT"),dataIndex:"heartbeat"},{text:IRm$.r1("L_CRT_DATE"),dataIndex:"crtdate_desc"},{text:IRm$.r1("L_MOD_DATE"),dataIndex:"uptdate_desc"}],listeners:{itemclick:function(e,t,a,n,i,s){this._cur_job=t,this.getJobDtl(t.get("sid"))},scope:this}},{xtype:"fieldset",title:IRm$.r1("L_DETAILED_STAT"),name:"detailpanel",flex:1,layout:{type:"vbox",align:"stretch"},hidden:!0,collapsed:!1,defaults:{anchor:"100%"},items:[{xtype:"panel",flex:1,layout:{type:"vbox",align:"stretch"},tbar:[{text:IRm$.r1("L_EDIT_JOB"),handler:function(){var e=this;e._cur_job&&e.registerJob(e._cur_job)},scope:this},{text:IRm$.r1("L_CANCEL_JOB"),handler:function(){var e=this;e._cur_job&&e.cancelJob(e._cur_job)},scope:this},{text:IRm$.r1("L_PURGE_JOB"),handler:function(){var e=this;e._cur_job&&e.purgeJob(e._cur_job)},scope:this}],items:[{xtype:"gridpanel",name:"grddetail",flex:1,store:{xtype:"store",fields:["sid","jid","crtdate","crtdate_desc","uptdate","uptdate_desc","pstatus","pstatusdesc"]},columns:[{xtype:"gridcolumn",text:IRm$.r1("L_PICKUP_DATE"),dataIndex:"pickdate_desc",flex:1},{xtype:"gridcolumn",text:IRm$.r1("L_STARTED_DATE"),dataIndex:"crtdate_desc",flex:1},{xtype:"gridcolumn",text:IRm$.r1("B_STATUS"),dataIndex:"pstatusdesc",tdCls:"igc-td-link"},{xtype:"actioncolumn",width:60,items:[{iconCls:"icon-grid-log",tooltip:"Log",handler:function(e,t,a){var n=e.store.getAt(t),i=n.get("sid"),s=n.get("jid"),o=n.get("executeid");i&&s&&o&&this.getLog(i,s,o)},scope:this},{iconCls:"icon-grid-delete",tooltip:IRm$.r1("L_REMOVE"),handler:function(e,t,a){var n=this,i=e.store.getAt(t);IG$.confirmMessages(ig$.appname,IRm$.r1("M_CONFIRM"),(function(e){"yes"==e&&n.deleteJob(i)}))},scope:this}]}],listeners:{cellclick:function(e,t,a,n,i,s){var o=n.get("sid"),l=n.get("jid"),r=n.get("executeid");2==a&&o&&l&&r&&this.getLog(o,l,r)},scope:this}}]}]}],IG$.scheduler.superclass.initComponent.call(this)},listeners:{afterrender:function(e){e.init_f()}}}),IG$.d$RegSch=$s.extend($s.window,{modal:!0,region:"center",layout:"fit",closable:!1,resizable:!1,width:520,height:620,autoHeight:!1,parentnodepath:null,itemtype:null,parentuid:null,callback:null,init_f:function(){var e=this,t=e.opt,a=e._cur_job,n=a?"mapreduce"==a.get("sccmd")?"mongomr":a.get("objtype").toLowerCase():e.objtype,i=(a&&a.get("objuid"),"report"==n),s="mongomr"==n;e._is_report=i,e._is_mongomr=s,e.down("[name=c2_rp]").setValue("M"),e.down("[name=c2_r1]").setValue(""),e.down("[name=scname]").setValue((t?t.name:"")||e.sname),e.sid?e.getSID():setTimeout((function(){e.down("[name=sctype]").setValue(""),e._sctype_h(),e._set_syncopt()}),40)},commit_f:function(){var e,t,a,n,i,s,o=(x=this).down("[name=mform]"),l=x.down("[name=sctype]"),r=x.down("[name=f_dw]"),d=r.checkboxCmp,c=x.down("[name=fs_dm]"),m=c.checkboxCmp,u=x.down("[name=fs_m]"),p=x.down("[name=scp]"),_=u.checkboxCmp,h=x.req,g=x._is_report,f=x._is_mongomr;if(1==o.getForm().isValid()){if(l.clearInvalid(),!l.getValue())return void l.markInvalid();if(!g&&!f&&(p.clearInvalid(),x.programs&&!p.getValue()))return void p.markInvalid();if(g||f||!x.programs||x.req){if(h&&h.length&&"metatables"==h[0].meta_type){var y=x.down("[name=_params]").down("[name=sync_incremental]").getValue();for(a=0;a<h.length;a++)h[a].payload.sync_incremental=y?"T":"F"}}else{for(a=0;a<x.programs.length;a++)if(x.programs[a].java_class==p.getValue()){n=x.programs[a];break}if(i=[],n.ui_layout&&n.ui_layout.length){var b={};for(a in n.__dw&&n.__dw.getAllValues(b,"T"),b)i.push({name:a,value:b[a]})}x.req=[{ack:"schedule",payload:{action:"exec_program"},mbody:{name:n.name,java_class:n.java_class,params:i},meta_type:"schedule_program"}]}e=l.getValue();var x,I,w,v,R,L={sid:(x=this).sid,sctype:e,action:"register",rid:x.uid,pstatus:x.down("[name=pstatus]").getValue()},V=x.req;h=new IG$._rpc$;if(L.name=x.down("[name=scname]").getValue(),L.a_1=x.down("[name=a_1]").getValue()?"T":"F",L.a_1a=x.down("[name=a_1a]").getValue(),L.mailcc=x.down("[name=a_1b]").getValue(),L.message=x.down("[name=a_1c]").getValue(),"C1"==e)L.hour=""+x.down("[name=c1_hh]").getValue(),L.minute=""+x.down("[name=c1_mm]").getValue(),L.seconds=""+x.down("[name=c1_ss]").getValue();else if("C2"==e){if(v=x.down("[name=c2_from]"),R=x.down("[name=c2_to]"),!v.getValue())return void v.markInvalid();if(v.clearInvalid(),!R.getValue())return void R.markInvalid();if(R.clearInvalid(),L.c2_from=IG$.dateFormat(v.getValue(),"yyyymmdd"),L.c2_to=IG$.dateFormat(R.getValue(),"yyyymmdd"),w=x.down("[name=c2_hh]").getValue(),L.c2_hh=w<10?"0"+w:""+w,w=x.down("[name=c2_mm]").getValue(),L.c2_mm=w<10?"0"+w:""+w,w=x.down("[name=c2_ss]").getValue(),L.c2_ss=w<10?"0"+w:""+w,L.c2_r1="R"==x.down("[name=c2_r1]").getValue()?"T":"F",L.c2_ri=""+x.down("[name=c2_ri]").getValue(),L.c2_rp=x.down("[name=c2_rp]").getValue(),L.c2_pt1=x.getTime(1),L.c2_pt2=x.getTime(2),d.getValue()&&(L.wd=[],$.each(["SU","MO","TU","WE","TH","FR","SA"],(function(e,t){r.down("[name=c_"+t+"]").getValue()&&L.wd.push(t)})),L.wd=L.wd.join(";")),m.getValue()){for(L.dm=[],a=0;a<31;a++){(b=c.down("[name=f_"+a+"]")).getValue()&&L.dm.push(""+a)}c.down("[name=f_lday]").getValue()&&L.dm.push("lday"),L.dm=L.dm.join(";")}if(_.getValue()){for(L.mon=[],a=0;a<12;a++){(b=u.down("[name=m_"+a+"]")).getValue()&&L.mon.push(""+a)}L.mon=L.mon.join(";")}}else"C3"==e&&(L.hour=""+x.down("[name=c3_hh]").getValue(),L.minute=""+x.down("[name=c3_mm]").getValue());for(I={jobs:[]},a=0;a<V.length;a++)s={key:V[a].jobkey||""+a,ack:V[a].ack,payload:V[a].payload||{},mbody:V[a].mbody,meta_type:V[a].meta_type},I.jobs.push(s);t=L,h.init(x,{ack:"schedule",payload:t,mbody:I,meta_type:"schedule_reqs"},x,x._rs_procMakeItem,null),h.send()}},getTime:function(e){var t=this,a="";return $.each(["h","m","s"],(function(n,i){var s=t.down("[name=c2_r"+i+e+"]").getValue();a+=(n>0?":":"")+(s<10?"0":"")+s})),a},_rs_procMakeItem:function(e){this.callback&&this.callback.execute(),this.close()},getSID:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"schedule",payload:{uid:this.uid,sid:this.sid,action:"getinfo"},mbody:{}},e,e.rs_getSID,null),t.send()},rs_getSID:function(e){var t,a,n,s,o=this,l=e&&e.length?e[0]:null,r=o._is_report,d=o._is_mongomr;if(l)if(r||d?(o.req=l.requests||[],o.uid=l.objuid,o._set_syncopt()):l.programs&&l.programs.length?(o.down("[name=scp]").setValue(l.programs[0].java_class),setTimeout((function(){var e=l.programs[0].params;if(e){var t=o.down("[name=_params]"),a={};$.each(e,(function(e,t){a[t.name]=t.value})),t.setAllValues(a,!0)}}),10)):o._set_syncopt(),o.down("[name=scname]").setValue(l.name),o.down("[name=sctype]").setValue(l.sctype),o.down("[name=pstatus]").setValue("N"==l.pstatus?"N":"A"),o.down("[name=a_1]").setValue("T"==l.a_1),o.down("[name=a_1a]").setValue(l.a_1a),o.down("[name=a_1b]").setValue(l.mailcc),o.down("[name=a_1c]").setValue(l.message),t=l.scoption||"","C1"==l.sctype)(t=t.split(":"))[0]&&o.down("[name=c1_hh]").setValue(Number(t[0])),t[1]&&o.down("[name=c1_mm]").setValue(Number(t[1])),t[2]&&o.down("[name=c1_ss]").setValue(Number(t[2]));else if("C2"==l.sctype){var c=function(e){var t,a=IG$.getDateParse(e);return a.y&&a.M&&a.d&&(t=new Date(Number(a.y),Number(a.M)-1,Number(a.d))),t};if(a=(a=(t=t.split("|"))[2]||"").split(":"),t[0]&&o.down("[name=c2_from]").setValue(c(t[0])),t[1]&&o.down("[name=c2_to]").setValue(c(t[1])),a[0]&&o.down("[name=c2_hh]").setValue(a[0]),a[1]&&o.down("[name=c2_mm]").setValue(a[1]),a[2]&&o.down("[name=c2_ss]").setValue(a[2]),t[3]&&(n=";"+t[3]+";",(s=o.down("[name=f_dw]")).checkboxCmp.setValue(!0),$.each(["SU","MO","TU","WE","TH","FR","SA"],(function(e,t){var a=s.down("[name=c_"+t+"]");n.indexOf(";"+t+";")>-1&&a.setValue(!0)}))),t[4]){for(n=";"+t[4]+";",(s=o.down("[name=fs_dm]")).checkboxCmp.setValue(!0),i=0;i<31;i++){var m=s.down("[name=f_"+i+"]");n.indexOf(";"+i+";")>-1&&m.setValue(!0)}n.indexOf(";lday;")>-1&&s.down("[name=f_lday]").setValue(!0)}if(t[5])for(n=";"+t[4]+";",(s=o.down("[name=fs_m]")).checkboxCmp.setValue(!0),i=0;i<12;i++){m=s.down("[name=m_"+i+"]");n.indexOf(";"+i+";")>-1&&m.setValue(!0)}t[6]&&o.down("[name=c2_r1]").setValue("T"==t[6]?"R":""),t[7]&&o.down("[name=c2_ri]").setValue(t[7]),t[8]&&o.down("[name=c2_rp]").setValue(t[8]),t[9]&&3==(n=t[9].split(":")).length&&(o.down("[name=c2_rh1]").setValue(parseInt(n[0])),o.down("[name=c2_rm1]").setValue(parseInt(n[1])),o.down("[name=c2_rs1]").setValue(parseInt(n[2]))),t[10]&&3==(n=t[10].split(":")).length&&(o.down("[name=c2_rh2]").setValue(parseInt(n[0])),o.down("[name=c2_rm2]").setValue(parseInt(n[1])),o.down("[name=c2_rs2]").setValue(parseInt(n[2])))}else"C3"==l.sctype&&((t=t.split(":"))[0]&&o.down("[name=c3_hh]").setValue(Number(t[0])),t[1]&&o.down("[name=c3_mm]").setValue(Number(t[1])))},_update_parmas:function(e){var t,a,n=this,i=n.programs,s=n.down("[name=_params]");for(s.removeAll(),t=0;t<i.length;t++)if(i[t].java_class==e){a=i[t];break}if(s.setVisible(!1),ig$._sc_scr=ig$._sc_scr||{},a.ui_screen&&a.ui_screen.length){var o=a.ui_screen.join("\n");try{var l=new IG$.cDynScript("cls_prog_scr"+a.name,0),r=IG$._decodeVal(o);l.loadScript(r)}catch(e){IG$.ShowError("Error on dynamic screen loader",null,null,{errstack:e.stack})}}if(a.ui_script&&a.ui_script.length){o=a.ui_script.join("\n");try{l=new IG$.cDynScript("cls_prog"+a.name,0),r="ig$._sc_scr['"+a.name+"'] = "+IG$._decodeVal(o);l.loadScript(r)}catch(e){IG$.ShowError("Error on dynamic script loader",null,null,{errstack:e.stack})}}var d=ig$._sc_scr[a.name]||{};if(a&&a.ui_layout&&a.ui_layout.length)try{var c=function(e){if(e.listeners)$.each(e.listeners,(function(t,a){var i=a;e.listeners[t]=function(){var e=arguments;if(d[i])return d[i].apply(n,e);IG$.ShowError("script "+i+" not defined!")}}));else if(e.handler){var t=e.handler,a=d[e.handler];e.handler=function(){if(a)return a.apply(n);IG$.ShowError("handler "+t+" not defined!")}}e.items&&e.items.length&&$.each(e.items,(function(e,t){c(t)}))};o=JSON.parse(IG$._decodeVal(a.ui_layout.join("\n")));c(o),o&&"object"==typeof o&&(s.setVisible(!0),a.__dw=s.add(o))}catch(e){IG$.ShowError("Error on layout info : ",null,null,{errstack:e.stack})}},_refresh_prog:function(e){var t=new IG$._rpc$;t.init(this,{ack:"appoption",payload:{address:"schedule_config"},mbody:{}},this,(function(e){var t,a,n=this.down("[name=scp]"),i=[];if(e&&e.programs)for(t=0;t<e.programs.length;t++)a=e.programs[t],i.push(a);this.programs=i,n.store.loadData(i)})),t.send()},_sctype_h:function(){var e=this,t=e.down("[name=sctype]").getValue(),a=e.down("[name=f_runafter]"),n=e.down("[name=f_cron]"),i=e.down("[name=f_runat]"),s=e.down("[name=c2_r1]");a.setVisible("C1"==t),n.setVisible("C2"==t),i.setVisible("C3"==t),s.setVisible("C2"==t)},_set_syncopt:function(){var e,t=this.req;t&&t.length&&"metatables"==t[0].meta_type&&((e=this.down("[name=_params]")).removeAll(),e.add({xtype:"checkbox",fieldLabel:IRm$.r1("L_INCREMENT"),name:"sync_incremental",boxLabel:IRm$.r1("B_ENABLED")}),e.setVisible(!0),"T"==t[0].payload.sync_incremental&&e.down("[name=sync_incremental]").setValue(!0))},initComponent:function(){var e,t=this,a=new Date,n=new Date,i=[],s=[],o=[],l=t._cur_job,r=l?"mapreduce"==l.get("sccmd")?"mongomr":l.get("objtype").toLowerCase():t.objtype;l&&l.get("objuid");for(t.title=IRm$.r1("L_REG_SCH"),n.setDate(n.getDate()+7),e=0;e<31;e++)i.push({xtype:"checkbox",boxLabel:""+(e+1),name:"f_"+e});for(i.push({xtype:"checkbox",name:"f_lday",boxLabel:"Last day"}),e=0;e<12;e++)s.push({xtype:"checkbox",boxLabel:""+(e+1),name:"m_"+e});if(t.programs&&t.programs.length)for(e=0;e<t.programs.length;e++)o.push({name:t.programs[e].name,value:t.programs[e].java_class});$s.apply(this,{items:[{xtype:"form",name:"mform",layout:"anchor",autoScroll:!0,defaults:{anchor:"100%"},padding:ig$.padding,items:[{xtype:"fieldset",title:IRm$.r1("L_GENERAL_OPTION"),layout:"anchor",items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},hidden:"report"==r||"mongomr"==r||!t.programs||!t.programs.length,items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_JOB_TYPE"),name:"scp",store:{fields:["name","value"],data:o},queryMode:"local",eidtable:!1,valueField:"value",labelField:"name",displayField:"name",allowBlank:"report"==r||"mongomr"==r||!t.programs||!t.programs.lengths,emptyText:IRm$.r1("B_REQ"),listeners:{change:function(e,t,a,n){this._update_parmas(t)},scope:this}},{xtype:"button",text:IRm$.r1("B_REFRESH"),handler:function(){this._refresh_prog()},scope:this}]},{xtype:"textfield",fieldLabel:IRm$.r1("L_JOB_NAME"),name:"scname",allowBlank:!1,emptyText:IRm$.r1("B_REQ")},{xtype:"combobox",fieldLabel:IRm$.r1("L_JB_STAT"),name:"pstatus",hidden:!this.sid,editable:!1,queryMode:"local",store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("B_ACTIVE"),value:"A",selected:!0},{name:IRm$.r1("B_INACTIVE"),value:"N"}]},valueField:"value",labelField:"name",displayField:"name"}]},{xtype:"fieldset",name:"_params",title:IRm$.r1("B_PARAMTERS"),items:[],hidden:"report"==r||"mongomr"==r,layout:{type:"vbox",align:"stretch"}},{xtype:"fieldset",title:IRm$.r1("L_SC_ACTION"),layout:"anchor",items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_NOTI_EMAIL"),name:"a_1",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(e){var t=e.getValue();this.down("[name=f_opt_em]").setVisible(t)},scope:this}},{xtype:"fieldcontainer",layout:"anchor",name:"f_opt_em",items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_OUTP_TYPE"),name:"a_1a",editable:!1,queryMode:"local",store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("B_SELECT"),value:""},{name:"HTML Link",value:"link"},{name:"CSV Data",value:"csv"},{name:"Excel File",value:"excel"}]},valueField:"value",displayField:"name",value:""},{xtype:"textarea",name:"a_1b",anchor:"100%",fieldLabel:IRm$.r1("L_MAIL_CC")},{xtype:"textarea",name:"a_1c",anchor:"100%",fieldLabel:IRm$.r1("L_MAIL_BD")}]}]},{xtype:"fieldset",title:IRm$.r1("B_SCHEDULE"),layout:"anchor",items:[{xtype:"combobox",name:"sctype",editable:!1,queryMode:"local",fieldLabel:IRm$.r1("L_SC_CT"),store:{xtype:"store",fields:["name","value"],data:[{name:"Select One",value:"",selected:!0},{name:IRm$.r1("L_SC_C1"),value:"C1"},{name:IRm$.r1("L_SC_C3"),value:"C3"},{name:IRm$.r1("L_SC_C2"),value:"C2"}]},valueField:"value",displayField:"name",listeners:{change:function(e,t,a,n){this._sctype_h()},scope:this}},{xtype:"combobox",fieldLabel:IRm$.r1("L_SCC_TYPE"),name:"c2_r1",editable:!1,queryMode:"local",valueField:"value",labelField:"name",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_SCC_DATE"),value:""},{name:IRm$.r1("L_SCC_REC"),value:"R"}]},listeners:{change:function(e){var t="R"==e.getValue(),a=this.down("[name=p_r1]"),n=this.down("[name=p_r2]");a.setVisible(!t),n.setVisible(t)},scope:this}}]},{xtype:"fieldset",title:IRm$.r1("L_SC_C1"),name:"f_runafter",layout:"anchor",items:[{xtype:"numberfield",name:"c1_hh",minValue:0,maxValue:24,fieldLabel:IRm$.r1("B_HOUR"),value:0},{xtype:"numberfield",name:"c1_mm",minValue:0,maxValue:59,fieldLabel:IRm$.r1("B_MINUTE"),value:20},{xtype:"numberfield",name:"c1_ss",minValue:0,maxValue:59,fieldLabel:IRm$.r1("B_SECOND"),value:0}]},{xtype:"fieldset",title:IRm$.r1("L_SC_C3"),name:"f_runat",layout:"anchor",items:[{xtype:"numberfield",name:"c3_hh",minValue:0,maxValue:24,fieldLabel:IRm$.r1("B_HOUR"),value:0},{xtype:"numberfield",name:"c3_mm",minValue:0,maxValue:59,fieldLabel:IRm$.r1("B_MINUTE"),value:10}]},{xtype:"fieldcontainer",layout:{type:"vbox",align:"stretch"},name:"f_cron",items:[{xtype:"fieldset",title:IRm$.r1("L_SCC_REC"),name:"p_r2",layout:"anchor",items:[{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_EVERY"),layout:{type:"hbox"},defaults:{labelWidth:10},items:[{xtype:"numberfield",name:"c2_ri",minValue:1,maxValue:59,value:5,width:140},{xtype:"combobox",name:"c2_rp",editable:!1,queryMode:"local",width:160,emptyText:IRm$.r1("B_REQ"),store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("B_MINUTE"),value:"M"},{name:IRm$.r1("B_HOUR"),value:"H"}]},valueField:"value",displayField:"name"},{xtype:"container",flex:1}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_T_FR"),layout:{type:"hbox"},items:[{xtype:"container",width:40},{xtype:"container",flex:1,layout:{type:"vbox",align:"stretch"},defaults:{labelAlign:"right",labelWidth:80},items:[{xtype:"numberfield",name:"c2_rh1",minValue:0,maxValue:23,value:0,fieldLabel:IRm$.r1("B_HOUR")},{xtype:"numberfield",name:"c2_rm1",minValue:0,maxValue:59,value:0,fieldLabel:IRm$.r1("B_MINUTE")},{xtype:"numberfield",name:"c2_rs1",minValue:0,maxValue:59,value:0,hidden:!0}]}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_T_TO"),layout:{type:"hbox"},items:[{xtype:"container",width:40},{xtype:"container",layout:{type:"vbox",align:"stretch"},defaults:{labelWidth:80,labelAlign:"right"},items:[{xtype:"numberfield",name:"c2_rh2",minValue:0,maxValue:23,value:23,fieldLabel:IRm$.r1("B_HOUR")},{xtype:"numberfield",name:"c2_rm2",minValue:0,maxValue:59,value:59,fieldLabel:IRm$.r1("B_MINUTE")},{xtype:"numberfield",name:"c2_rs2",minValue:0,maxValue:59,value:59,hidden:!0}]}]}]},{xtype:"fieldset",title:IRm$.r1("L_SCC_DATE"),name:"p_r1",layout:"anchor",items:[{xtype:"numberfield",fieldLabel:IRm$.r1("B_HOUR"),name:"c2_hh",minValue:0,maxValue:23,value:23},{xtype:"numberfield",fieldLabel:IRm$.r1("B_MINUTE"),name:"c2_mm",minValue:0,maxValue:59,value:0},{xtype:"numberfield",fieldLabel:IRm$.r1("B_SECOND"),name:"c2_ss",minValue:0,maxValue:59,value:0}]},{xtype:"fieldset",title:IRm$.r1("L_SC_PR"),name:"f_period",layout:"anchor",items:[{xtype:"datefield",fieldLabel:IRm$.r1("B_DT_FR"),name:"c2_from",format:"Y-m-d",value:a},{xtype:"datefield",fieldLabel:IRm$.r1("B_DT_TO"),name:"c2_to",format:"Y-m-d",value:n}]},{xtype:"fieldset",title:IRm$.r1("L_DAY_OF_WEEK"),name:"f_dw",checkboxToggle:!0,collapsed:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",boxLabel:"Sunday",name:"c_SU"},{xtype:"checkbox",boxLabel:"Monday",name:"c_MO"},{xtype:"checkbox",boxLabel:"Tuesday",name:"c_TU"},{xtype:"checkbox",boxLabel:"Wednesday",name:"c_WE"},{xtype:"checkbox",boxLabel:"Thursday",name:"c_TH"},{xtype:"checkbox",boxLabel:"Friday",name:"c_FR"},{xtype:"checkbox",boxLabel:"Saturday",name:"c_SA"}]},{xtype:"fieldset",title:IRm$.r1("L_DAY_OF_MONTH"),name:"fs_dm",checkboxName:"fs_dm_c",checkboxToggle:!0,collapsed:!0,items:i},{xtype:"fieldset",title:IRm$.r1("B_MONTH"),name:"fs_m",checkboxName:"fs_m_c",checkboxToggle:!0,collapsed:!0,layout:"anchor",items:s},{xtype:"fieldset",title:IRm$.r1("B_YEARLY"),name:"f_y",checkboxName:"f_y_c",checkboxToggle:!0,collapsed:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield"}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this.commit_f()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.d$RegSch.superclass.initComponent.apply(this,arguments)}}),IG$.dlgScheduleList=$s.extend($s.window,{modal:!1,region:"center",layout:{type:"vbox",align:"stretch"},closable:!1,resizable:!1,width:680,height:520,autoHeight:!1,init_f:function(){var e=this;e.reportoption&&e.reportoption._mc?(e.down("[name=b_sc_load]").setVisible(!0),e.down("[name=b_sc_load]").setValue(e.reportoption._mc.b_sc_load)):e.down("[name=b_sc_load]").hide(),e.getHist()},getHist:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"schedule",payload:{uid:e.uid,action:"list"},mbody:{}},e,e.rs_getHist,null),t.send()},rs_getHist:function(e){var t,a,n,i=this,s=[],o=i.down("[name=scgrid]"),l=i.opt;if(e)for(t=0;t<e.length;t++){switch((a=e[t]).pstatus){case"A":a.pstatusdesc="Active";break;case"N":a.pstatusdesc="Inactive";break;case"F":desc="Failed";break;default:a.pstatusdesc="N/A"}a.uptdate_desc=IG$.formatDate(a.uptdate),a.crtdate_desc=IG$.formatDate(a.crtdate),a.pickdate_desc=IG$.formatDate(a.pickdate),s.push(a),l&&l.name&&l.name==a.name&&(n=a)}if(o.store.loadData(s),l&&l.name)if(n){for(t=0;t<o.store.data.items.length;t++)if(o.store.data.items[t].get("sid")==n.sid){i.regJob(o.store.data.items[t]);break}}else i.regJob(null,l)},regJob:function(e,t){var a,n,i,s,o=this,l=o.down("[name=scgrid]"),r={};for(o.reportoption&&(o.reportoption._mc?n="report -> "+o.reportoption._mc.name:o.reportoption.name&&(n=o.reportoption.name)),i=0;i<l.store.data.items.length;i++)r[l.store.data.items[i].get("name")]=1;for(s=n,i=0;r[s];)s=n+"_"+ ++i;a=new IG$.d$RegSch({instance:o.instance,uid:o.uid,sid:e?e.get("sid"):null,objtype:"report",opt:t,req:o.req,sname:s,callback:new IG$.callBackObj(o,o.getHist)}),IG$.checkLogin(o,a)},deleteJob:function(e){var t=this,a=new IG$._rpc$;a.init(t,{ack:"schedule",payload:{uid:t.uid,action:"delete"},mbody:{uid:t.uid,sid:e.get("sid")}},t,(function(e){}),null),a.send()},getSchJob:function(e){var t=this,a=new IG$._rpc$;a.init(t,{ack:"schedule",payload:{uid:t.uid,sid:e,action:"joblist"},mbody:{}},t,t.rs_getSchJob,null),a.send()},rs_getSchJob:function(e){var t,a,n=e&&e.length?e:null,i=[],s=this.down("[name=jobgrid]");if(n)for(t=0;t<n.length;t++){switch((a=n[t]).pstatus){case"I":a.pstatusdesc="Initialized";break;case"C":a.pstatusdesc="Completed";break;case"F":a.pstatusdesc="Failed";break;case"T":a.pstatusdesc="Cancel Queue";break;case"Q":a.pstatusdesc="Waiting ","T"==a.trigger?a.pstatusdesc+=" (^o^)":a.pstatusdesc+=" (@.@)";break;default:a.pstatusdesc="N/A"}a.crtdate_desc=IG$.formatDate(a.crtdate),a.uptdate_desc=IG$.formatDate(a.uptdate),a.pickdate_desc=IG$.formatDate(a.pickdate),i.push(a)}s.store.loadData(i)},confirmSch:function(){var e=this;e.reportoption&&e.reportoption._mc&&(e.reportoption._mc.b_sc_load=e.down("[name=b_sc_load]").getValue()),e.close()},openSchResult:function(e,t){var a=this;a.runner&&a.runner._doSchJob&&a.runner._doSchJob(e,t)},getLog:function(e,t,a){var n=new IG$.schLog({instance:this.instance,sid:e,jid:t,executeid:a});IG$.checkLogin(this,n)},initComponent:function(){var e=this;e.title=IRm$.r1("L_LST_SCH"),$s.apply(this,{padding:ig$.padding,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},autoScroll:!0,defaults:{anchor:"100%"},items:[{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},height:160,title:IRm$.r1("L_REL_SCHEDULE"),items:[{xtype:"gridpanel",flex:1,name:"scgrid",store:{xtype:"store",fields:["sid","userid","objuid","crtdate","uptdate","name","pstatus","pstatusdesc","uptdate_desc","sctype","scoption","a_1","a_1a","mailcc","message"]},columns:[{xtype:"gridcolumn",text:IRm$.r1("L_SCH_NAME"),dataIndex:"name",tdCls:"igc-td-link",flex:1},{xtype:"gridcolumn",text:IRm$.r1("B_STATUS"),tdCls:"igc-td-link",dataIndex:"pstatusdesc",width:50},{xtype:"gridcolumn",text:IRm$.r1("B_UPD_DATE"),dataIndex:"uptdate_desc",width:110},{xtype:"gridcolumn",text:IRm$.r1("L_PICKUP_DATE"),dataIndex:"pickdate_desc",width:110},{xtype:"actioncolumn",width:80,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_EDIT"),handler:function(t,a,n){var i=t.store.getAt(a);e.regJob(i)},scope:this},{iconCls:"icon-grid-log",tooltip:"Log",handler:function(e,t,a){var n=e.store.getAt(t);sid=n.get("sid"),sid&&this.getSchJob(sid)},scope:this},{iconCls:"icon-grid-delete",tooltip:IRm$.r1("L_REMOVE"),handler:function(e,t,a){var n=this,i=e.store.getAt(t);IG$.confirmMessages(ig$.appname,IRm$.r1("M_CONFIRM"),(function(e){n.deleteJob(i)}))},scope:this}]}],listeners:{cellclick:function(e,t,a,n,i,s){var o=n.get("sid");o&&this.getSchJob(o)},scope:this}},{xtype:"checkbox",name:"b_sc_load",labelWidth:200,fieldLabel:IRm$.r1("L_LOAD_LAST_SCH"),boxLabel:IRm$.r1("B_ENABLE")}]},{xtype:"fieldset",layout:"fit",height:240,title:IRm$.r1("L_JOB_HISTORY"),items:[{xtype:"gridpanel",name:"jobgrid",store:{xtype:"store",fields:["sid","jid","crtdate","uptdate","pstatus","executeid","uptdate_desc","crtdate_desc","pstatusdesc"]},columns:[{text:IRm$.r1("B_UPD_DATE"),flex:1,tdCls:"igc-td-link",dataIndex:"uptdate_desc"},{text:IRm$.r1("L_PICKUP_DATE"),width:110,dataIndex:"pickdate_desc"},{text:IRm$.r1("B_STATUS"),width:80,dataIndex:"pstatusdesc",tdCls:"igc-td-link"},{text:"ExID",width:110,hidden:!0,dataIndex:"executeid"}],listeners:{cellclick:function(e,t,a,n,i,s){var o=e.store.getAt(i);0==a?this.openSchResult(o.get("sid"),o.get("jid")):2==a&&this.getLog(o.get("sid"),o.get("jid"),o.get("executeid"))},scope:this}}]}]}],buttons:[{text:IRm$.r1("B_REGISTER"),handler:function(){this.regJob()},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this.confirmSch()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.dlgScheduleList.superclass.initComponent.apply(this,arguments)}}),IG$.schLog=$s.extend($s.window,{modal:!1,region:"center",layout:"fit",closable:!1,resizable:!1,width:650,height:520,init_f:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"schedule",payload:{action:"logfile",sid:e.sid,jid:e.jid,executeid:e.executeid},mbody:{}},e,(function(t){e.down("[name=logtxt]").setValue(t)}),null),t.send()},initComponent:function(){this.title="Execution log",$s.apply(this,{defaults:{padding:ig$.padding},items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:ig$.padding,defaults:{anchor:"100%"},items:[{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},flex:1,title:IRm$.r1("L_EXEC_LOG"),items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:IRm$.r1("B_REFRESH"),handler:function(){this.init_f()},scope:this}]},{xtype:"textarea",name:"logtxt"}]}]}],buttons:["->",{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.schLog.superclass.initComponent.apply(this,arguments)}});
IG$.BC$base=$s.extend($s.panel,{region:"center",layout:"fit",callback:null,init_f:function(){var e=this,t=e.job;t&&(e.down("[name=dsname]").setValue(t.dsname),e.down("[name=dsdesc]").setValue(t.dsdesc),e.down("[name=dsignoreerror]").setValue(t.dsignoreerror),e.rL())},_confirm:function(e){var t=this,a=t.job;a&&(a.dsname=t.down("[name=dsname]").getValue(),a.dsdesc=t.down("[name=dsdesc]").getValue(),a.dsignoreerror=t.down("[name=dsignoreerror]").getValue()),!0!==e&&(t.callback&&t.callback.execute(t.job),t.fireEvent("close_dlg",t))},rL:function(){var e=this,t=new IG$._rpc$;e.job&&e.job.sid&&e.s_hist&&(t.init(e,{ack:"hadoophelper",payload:{sid:e.job.sid},mbody:{option:"logcontent"}},e,e.rs_rL,!1),t.send())},rs_rL:function(e){var t,a,i,o,n,s,l,d=IG$.XGetNode(e,"/smsg"),r=d?IG$.XGetChildNodes(d):null,c=[],p=this.down("[name=grdloghist]");if(r)for(t=0;t<r.length;t++){switch((a=IG$.XGetAttrProp(r[t])).pstatus=parseInt(a.pstatus),a.created_desc=IG$.formatDate(a.created),a.updated_desc=IG$.formatDate(a.updated),o=Number(a.duration),null!=(o=isNaN(o)?null:o)&&(o-=6e4*(n=Math.floor(o/6e4)),l=o-=1e3*(s=Math.floor(o/1e3)),a.duration=(n>0?n+"m ":"")+(s>0?s+"s ":"")+(l>-1?l+"ms":"")),i="Unknown",a.pstatus){case 1:i="Running";break;case 10:i="Completed";break;case 20:i="Error: No result";break;case 21:i="Error: Dataformat mismatch";break;case 29:i="Error: Execution failed"}a.pstatus_desc=i,c.push(a)}p.store.loadData(c)},g1:function(e){var t=this,a=new IG$._rpc$;a.init(t,{ack:"hadoophelper",payload:{lid:e},mbody:{option:"logdetail"}},t,t.rs_g1,!1),a.send()},rs_g1:function(e){var t,a,i,o,n=IG$.XGetNode(e,"/smsg"),s=n?IG$.XGetChildNodes(n):null,l=!1;if(s){for(i=0;i<s.length;i++)(t=IG$._I19(s[i],"errormessage"))?(a=IG$.XGetTextVal(t),a=Base64.decode(a),l=!0):(t=IG$._I19(s[i],"message"))&&(a=IG$.XGetTextVal(t),a=Base64.decode(a)),o=o?o+"\n"+a:a;this.down("[name=logdetail]").setValue(o),1==l&&IG$.alertmsg(ig$.appname,"One or more command failed. See log for detail",null,this,1,"error")}},GG1:function(e){var t=new IG$.metaSelectDlg({instance:this.instance,visibleItems:"javapackage;folder;javaclass",tree_options:{cubebrowse:!1,rootuid:"/BusinessLogic",visibleItems:"javapackage;folder;javaclass"},callback:new IG$.callBackObj(this,this.rs_GG1,e)});IG$.checkLogin(this,t)},rs_GG1:function(e,t){var a,i="";e&&e.nodepath&&((a=(a=e.nodepath).split("/")).splice(0,2),i=a.join(".")),t.setValue(i)},_pot_type_changed:function(){var e=this,t=e.down("[name=potential_type]").getValue();switch(g_p1=e.down("[name=g_p1]"),g_p2=e.down("[name=g_p2]"),g_p1.show(),g_p2.hide(),t){case"":break;case"CYCLE_LENGTH_SHIFT":g_p1.hide()}},initComponent:function(){var e,t=this,a=[];if(t.addEvents("close_dlg"),a.push({xtype:"fieldset",title:"Basic Option",layout:{type:"vbox",align:"stretch"},defaults:{labelPosition:"top"},items:[{xtype:"textfield",name:"dsname",fieldLabel:IRm$.r1("B_NAME")},{xtype:"textarea",name:"dsdesc",fieldLabel:IRm$.r1("B_DESC")},{xtype:"checkbox",name:"dsignoreerror",hidden:!!t.hide_ierr,fieldLabel:"Ignore Error",labelAlign:"left",boxLabel:"Ignore and continue"}]}),t.moption)for(e=0;e<t.moption.length;e++)a.push(t.moption[e]);$s.apply(this,{items:[{xtype:"tabpanel",layout:"fit",items:[{xtype:"form",layout:{type:"vbox",align:"stretch"},title:"Configuration",autoScroll:!0,items:a},{xtype:"form",title:"History",hidden:0==t.s_hist,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Execute Log",layout:"fit",flex:1,items:[{xtype:"gridpanel",name:"grdloghist",store:{xtype:"store",fields:["sid","lid","jobtype","pstatus","created","updated","pstatus_desc","created_desc","updated_desc","duration"]},columns:[{xtype:"gridcolumn",text:"Start time",flex:1,dataIndex:"created_desc"},{xtype:"gridcolumn",text:"End time",flex:1,dataIndex:"updated_desc"},{xtype:"gridcolumn",text:"Duration",dataIndex:"duration",flex:1},{xtype:"gridcolumn",text:"Status",width:120,dataIndex:"pstatus_desc"}],tbar:[{xtype:"button",text:"Refresh",handler:function(){this.rL()},scope:this}],listeners:{itemclick:function(e,t,a,i,o){var n=t.get("lid");n&&this.g1(n)},scope:this}}]},{xtype:"fieldset",title:"Log Details",layout:"fit",flex:2,items:[{xtype:"textarea",name:"logdetail"}]}]},{xtype:"panel",hidden:0!=t.s_hist,title:"Probability",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",fieldLabel:"Relation Type",layout:"hbox",items:[{xtype:"combobox",name:"potential_type",labelWidth:80,width:200,queryMode:"local",displayField:"name",valueField:"value",editable:!1,autoSelect:!0,store:{xtype:"store",fields:["name","value"]},listeners:{change:function(e){this._pot_type_changed()},scope:this}},{xtype:"button",text:"Reorder Potential"}]},{xtype:"gridpanel",hideHeaders:!1,columnLines:!0,name:"g_p1",editable:!0,title:"",height:400,viewConfig:{enableTextSelection:!0,ForceFit:!0,loadMask:!0},flex:1,store:{fields:["name"]},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1},{text:IRm$.r1("B_VALUE"),dataIndex:"value",flex:1}],listeners:{itemdblclick:function(e,t,a,i,o,n){var s,l,d,r=this.down("[name=g_p1]"),c=this.$probability;return c&&(l=(s=c.table_result).colmap,d=s.hc,s.hr||1,l[n]>0&&d<=i&&r.edit_cell(t,i,n,{},!0,!0)),!1},edit:function(e,t){var a,i,o=this,n=t.record,s=t.oldvalue,l=t.value,d=Number(l),r=t.column,c=t.dataIndex,p=t.row,u=o.$probability.table_result.hc,m=o.down("[name=g_p1]"),h=o._prob_value_edit;if(isNaN(d))n.set(c,s);else for(h.push({row:p,col:r}),i=u;i<m.store.data.items.length;i++)if(a=m.store.data.items[i],i!=p){var f=1-d;a.set(c,f),h.push({row:i,col:r})}},scope:this}},{xtype:"gridpanel",hideHeaders:!1,columnLines:!0,name:"g_p2",hidden:!0,title:"Edit Variance Potential",viewConfig:{enableTextSelection:!0,ForceFit:!0,loadMask:!0},flex:1,store:{fields:["name"]},columns:[{text:"Name",dataIndex:"name",flex:1},{text:"Value",dataIndex:"value",flex:1,editor:{type:"number"}}]}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),bodyCls:"ig-btn-confirm",handler:function(){this._confirm()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.fireEvent("close_dlg",this)},scope:this}],listeners:{afterrender:function(e){this.init_f()}}}),IG$.BC$base.superclass.initComponent.apply(this,arguments)}});