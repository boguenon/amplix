IG$.showLogin=function(s,i,o,n){$("#idv-mnu-pnl",s.target).hide();var e,a=s.dlgLogin;if(window.$sso_try_count=window.$sso_try_count||0,!IG$._g$a){var t=IG$._parse_url().params;e=t.mts||"ROOT"}a&&(a.callback=new IG$.callBackObj(this,(function(){$("#loginWindow",s.target).hide(),IG$.showLoginProc.call(this,s)}))),window.hist&&window.hist.addHistory("");var g,l,d,r=$("#loginWindow",s.target),c=$(".login-container",r),_=$("#login-progress",r),u=window.bowser;l="<div class='login-smc'><div class='login-ic'><img class='login-logo' src='./images/logo_7186.png'><div class='login-sso-msg'><span>"+("ko_KR"==useLocale?"잠시만 기다려 주십시오.":"")+("en_US"==useLocale?"Please Wait a minutes.":"")+"<span></div><div id='license'>Licensed to: "+(ig$.appInfo?ig$.appInfo.licensed||"xxx":"...")+"</div>",l+="</div></div>",(d=$(".login-smc",r)).length||(d=$(l).appendTo(c).hide()),g=$(".login-mc",r),r.css({zIndex:99}),u.msie&&r.css({position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",margin:0,padding:0}),r.show();var f=function(o){if(IG$.sessionUtils){var e=s.dlgLogin;if(0==n){var a=new IG$._rpc$,t=[o,""];a.init(e,{ack:"login",payload:{userid:t[0],passwd:t[1],sso_module:ig$.$sso_module_name||"dbsync",encrypt:"no",keyvar:s.rsa_kinfo},mbody:{lang:useLocale,mts:IG$._g$a||"",app:"",session_expire:""+ig$.session_expire||"0"}},e,e.rdoStartSession,(function(s){var o;return i&&(o=i.execute(s)),_&&_.hide(),o}),_),a.send()}else e.getKeyPair(o,"",_,IG$._g$a,new IG$.callBackObj(this,(function(s){d.show(),g.hide(),ig$.$sso_config=ig$.$sso_config||{},$(".login-sso-msg",d).html(ig$.$sso_config.sso_fail_msg||"<span>Session key expired! Please refresh browser and login again!</span>"),_.hide();var i,o,n,e,a,t=window.location.href,l={},r=0;return t&&t.indexOf("?")>0&&(i=t.substring(0,t.indexOf("?")),o=(t=t.substring(t.indexOf("?")+1)).split("&"),r=0,$.each(o,(function(s,i){i.indexOf("=")>0&&(l[i.substring(0,i.indexOf("="))]=i.substring(i.indexOf("=")+1))})),r=Number(l.retry||"0")||0,l.retry=""+ ++r,window.$sso_try_count>0&&r<window.$sso_try_count&&(e=[],$.each(l,(function(s,i){e.push(s+"="+i)})),n=e.join("&"),a=1,setTimeout((function(){window.location.href=i+"?"+n}),5e3))),!a&&o&&window.$sso_try_count>0&&r<window.$sso_try_count?(a=1,setTimeout((function(){window.location.reload(!1)}),5e3)):a||(ig$.$sso_config=ig$.$sso_config||{},ig$.$sso_config.sso_fail_handler&&ig$.$sso_config.sso_fail_handler.apply(null)),!1})),ig$.$sso_module_name||"dbsync")}else IG$.doStartSession(s,o,"",_,null,new IG$.callBackObj(this,(function(s){d.fadeOut(),_.hide(),g.fadeIn()})))};1!=o?(d.show(),g.hide(),_.show(),setTimeout((function(){var i=window.$session_key||"sso_sim_b6118e61573e4aaa_key_map:";if(e&&e.length){var o=new IG$._rpc$;o.init(this,{ack:"security",payload:{mts:e},mbody:{}},this,(function(o){var n=o.p1,e=o.p2;n&&e?(s.rsaPublicKeyModules=n,s.rsaPublicKeyExpoenent=e,s.rsa_kinfo=o.p3,IG$._g$a=o.mts,f(i)):f(i)}),(function(){f(i)})),o.send(s)}else f(i)}),10)):(ig$.$sso_config=ig$.$sso_config||{},d.show(),g.hide(),$(".login-sso-msg",d).html(ig$.$sso_config.logout_msg||"<span>Session expired! Please refresh browser and login again!</span>"),_.hide())};