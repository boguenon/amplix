{"version":3,"sources":["jquery.jsPlumb-2.1.2.js","node_tree_viewer.js","dlg_datasource.js","dlg_hivejob.js","dlg_shellcommand.js","dlg_output.js","dlg_mapreduce.js","dlg_mongoreduce.js","dlg_mongodoc.js","dlg_logview.js","jclass.js","bflow.js","bpeditor.js","hadoop_config.js","db_generator.js","cost_effectiveness.js","learning_dialog.js","interactive_learning.js","network_properties_dialog.js","bayes_node_properties.js","tornado_spider.js","bayes.js","bayes_obj.js","bayes_pgmx.js"],"names":["Math","sgn","x","Vectors","v1","v2","y","v","sqrt","s","flatnessTolerance","pow","_distanceFromCurve","point","curve","candidates","w","_convertToBezier","degree","length","numSolutions","_findRoots","dist","t","i","_bezier","newDist","location","distance","higherDegree","c","d","cdTable","z","row","column","parseFloat","n","m","k","lb","max","ub","min","j","depth","left_count","right_count","left","right","left_t","right_t","_getCrossingCount","_isFlatEnough","_computeXIntercept","sign","old_sign","n_crossings","intercept_1","intercept_2","left_intercept","a","b","a2","b2","max_distance_above","max_distance_below","value","XNM","YNM","XMK","temp","_curveFunctionCache","_pointOnPath","cc","order","fns","c_term","t_term","one_minus_t_term","_termFunc","terms","p","push","_getCurveFunctions","_x","_y","_dist","p1","p2","_isPoint","_pointAlongPath","prev","tally","curLoc","direction","cur","abs","_gradientAtPoint","slice","dy","dx","Infinity","atan","this","jsBezier","distanceFromCurve","gradientAtPoint","gradientAtPointAlongCurveFrom","nearestPointOnCurve","td","pointOnCurve","pointAlongCurveFrom","perpendicularToCurveAt","_theta2","sin","cos","locationAlongCurveFrom","getLength","call","window","Biltong","_isa","Object","prototype","toString","_pointHelper","fn","_gradient","gradient","_p1","_p2","_quadrant","normal","lineLength","quadrant","_segmentMultipliers","theta","PI","intersects","r1","r2","x1","x2","y1","y2","h","a1","b1","encloses","allowSharedEdges","v3","v4","_inverseSegmentMultipliers","pointOnLine","fromPoint","toPoint","segmentMultiplier","perpendicularLineTo","theta2","Sniff","navigator","userAgent","toLowerCase","indexOf","matchesSelector","el","selector","ctx","possibles","parentNode","querySelectorAll","_gel","constructor","String","document","getElementById","_t","e","srcElement","target","_pi","obj","doCompute","path","end","out","_one","_d","l","splice","guid","_store","event","g","__ta","__tauid","_curryChildFilter","children","evt","split","_fn","pathInfo","apply","arguments","registerExtraFunction","newFn","__taExtra","DefaultHandler","isTouchDevice","touchMap","tfn","_bind","getAttribute","setAttribute","_tapProfiles","tap","touches","taps","dbltap","contextmenu","TapHandler","clickThreshold","dblClickThreshold","isMouseDevice","__taTapHandler","tt","down","downSelectors","clearSingle","clearDouble","finished","setTimeout","tc","_touchCount","eventId","hasOwnProperty","pLoop","__taUnstore","meeHelper","type","__tamee","MouseEnterExitHandler","activeElements","over","mouseenter","mouseexit","relatedTarget","toElement","documentElement","mousedown","mouseup","mousemove","iev","rv","appName","ua","RegExp","exec","$1","isIELT9","_genLoc","prefix","ts","_touches","_getTouch","_pageLocation","clientX","scrollLeft","clientY","scrollTop","idx","item","changedTouches","targetTouches","originalFn","addEventListener","attachEvent","key","_unbind","_each","_el","_unstore","removeEventListener","detachEvent","__taTouchProxy","Window","top","tagName","Mottle","params","mouseEnterExitHandler","tapHandler","_smartClicks","smartClicks","_doBind","__taSmartClicks","__tad","__tau","SmartClickHandler","remove","removeChild","on","_c","_e","_f","off","trigger","originalEvent","payload","originalIsMouse","MouseEvent","eventToBind","bindingAMouseEvent","pl","sl","cl","_clientLocation","screenX","screenY","_decorate","_evt","eventGenerators","TouchEvent","touch","createTouch","createTouchList","initTouchEvent","MouseEvents","initMouseEvent","createEvent","evtName","dispatchEvent","createEventObject","eventType","eventName","fireEvent","consume","doNotPreventDefault","stopPropagation","returnValue","preventDefault","pageLocation","setForceTouchEvents","setForceMouseEvents","_suggest","list","head","unshift","_vanquish","_difference","l1","l2","_isString","f","getOffsetRect","elem","box","getBoundingClientRect","body","docElem","pageYOffset","pageXOffset","clientTop","clientLeft","round","isIE9","_pl","pageX","pageY","_classes","draggable","droppable","drag","selected","active","hover","noSelect","ghostProxy","_events","_devNull","_true","_foreach","from","_setDroppablesActive","dd","val","andHover","setActive","updatePosition","setHover","_consume","_inputFilter","_katavorio","getInputFilterSelector","Super","css","scope","addClass","_class","uuid","_uuid","enabled","setEnabled","isEnabled","toggleEnabled","setScope","scopes","addScope","removeScope","toggleScope","katavorio","TRUE","FALSE","Drag","rightButtonCanDrag","constrain","downAt","posAtDown","pagePosAtDown","pageDelta","moving","consumeStartEvent","dragEl","clone","_multipleDrop","scroll","multipleDrop","isConstrained","useGhostProxy","cloneNode","snapThreshold","_snap","pos","thresholdX","thresholdY","_dxl","floor","_dxt","_dyl","_dyt","posses","posseRoles","toGrid","grid","snap","getPosition","setPosition","setUseGhostProxy","revertFunction","negativeFilter","allowNegative","_setConstrain","constrainRect","size","bind","containment","setConstrain","setRevert","_assignId","_katavorioId","_filters","_testFilter","_setFilter","setFilter","_exclude","addFilter","removeFilter","clearAllFilters","canDrag","matchingDroppables","intersectingDroppables","downListener","which","button","style","position","appendChild","moveListener","upListener","markSelection","markPosses","_dispatch","consumeFilteredEvents","mark","ignoreZoom","getZoom","moveBy","updateSelection","updatePosses","unbind","removeClass","unmark","unmarkSelection","unmarkPosses","stop","notifySelectionDragStop","notifyPosseDragStop","getFilters","abort","getDragElement","listeners","start","beforeStart","revert","events","ghostProxyOffsets","notifyStart","force","positions","sel","getSelection","dPos","finalPos","selection","andNotify","getSize","getMatchingDroppables","dragClass","cs","notifySelectionDragStart","doNotCheckDroppables","offsetLeft","offsetTop","drop","desiredLoc","cPos","gp","rect","pageRect","focusDropElement","pagePosition","canDrop","isHover","destroy","handle","filter","filterExclude","Drop","_activeClass","activeClass","_hoverClass","hoverClass","allowLoopback","_katavorioDragHover","replace","r","random","Katavorio","katavorioParams","_selection","_selectionMap","_dragsByScope","_dropsByScope","_zoom","_reg","map","_obj","_unreg","_prepareParams","_m","_dd","_p","_mistletoe","existingDrag","_css","overrideCss","_scope","inputFilterSelector","setInputFilterSelector","o","_katavorioDrag","_katavorioDrop","select","deselect","_s","deselectAll","_posses","members","_posseAction","setZoom","_scopeManip","kObj","_kObj","snapToGrid","getDragsForScope","getDropsForScope","_destroy","elementRemoved","destroyDraggable","destroyDroppable","reset","_processOneSpec","_spec","dontAddExisting","posseId","id","posse","name","addToPosse","spec","setPosse","diff","Array","removeFromPosse","TypeError","removeFromAllPosses","setPosseState","state","_iss","_isb","_iso","_isd","_isf","root","exports","jsPlumbUtil","isArray","isString","isBoolean","isNull","isObject","isDate","isFunction","isEmpty","isNumber","Date","getTime","merge","collations","ar","cMap","inObj","term","lc","str","array","match","_getArray","functionChain","successValue","failValue","populate","model","values","functionPrefix","fromString","matches","substring","getValue","findWithFunction","removeWithFunction","addWithFunction","hashFunction","addToList","insertAtStart","suggest","insertAtHead","extend","child","parent","_protoFn","_makeFn","protoFn","_oneSet","logEnabled","log","console","msg","wrap","wrappedFunction","newFunction","returnOnThisValue","EventGenerator","_listeners","eventsSuspended","eventsToDieOn","ready","listener","__jsPlumb","fire","_gone","ret","shouldFireEvent","eventOrListener","getListener","forEvent","setSuspendEvents","isSuspendEvents","silently","cleanupListeners","cleanup","sizeElement","height","width","rendererTypes","connectorTypes","_ju","_timestamp","_updateHoverStyle","component","_jsPlumb","paintStyle","hoverPaintStyle","mergedHoverStyle","jsPlumb","fillStyle","_splitType","_mapType","typeId","_applyTypes","doNotRepaint","getDefaultType","getTypeDescriptor","defType","types","tid","instance","getType","applyType","repaint","jsPlumbUIComponent","self","idPrefix","parameters","paintStyleInUse","beforeDetach","beforeDrop","overlayPlacements","Defaults","HoverClass","typeCache","cacheTypeItem","getCachedTypeItem","getId","overlays","oo","defaultOverlayKeys","fo","convertToFullOverlaySpec","_defaultType","getDefaultScope","appendToDefaultType","create","isDetachAllowed","connection","isDropAllowed","sourceId","targetId","dropEndpoint","source","checkCondition","domListeners","setListenerComponent","_removeTypeCssHelper","typeIndex","cssClass","canvas","getParameter","setParameter","getParameters","setParameters","getClass","hasClass","clazz","updateClasses","classesToAdd","classesToRemove","setType","clearTypes","reapplyTypes","hasType","addType","_cont","removeType","toggleType","setPaintStyle","setHoverPaintStyle","getPaintStyle","getHoverPaintStyle","ignoreAttachedElements","timestamp","currentlyDragging","isHoverSuspended","method","isSuspendDrawing","recalc","getAttachedElements","sourceElement","affectedElements","_updateAttachedElements","_jsPlumbInstanceIndex","jsPlumbInstance","_defaults","Anchor","Anchors","ConnectionsDetachable","ConnectionOverlays","Connector","Container","DoNotThrowErrors","DragOptions","DropOptions","Endpoint","EndpointOverlays","Endpoints","EndpointStyle","EndpointStyles","EndpointHoverStyle","EndpointHoverStyles","HoverPaintStyle","LabelStyle","color","LogEnabled","Overlays","MaxConnections","PaintStyle","lineWidth","strokeStyle","ReattachConnections","RenderMode","Scope","_connectionTypes","_endpointTypes","_currentInstance","_instanceIndex","getInstanceIndex","_bb","_initialDefaults","_info","nodeType","text","getElement","_getId","repaintEverything","_container","_containerDelegations","unbindContainer","setContainer","each","conn","moveParent","selectEndpoints","ep","previousContainer","eventAliases","endpointclick","endpointdblclick","_oneDelegateHandler","componentType","jp","alias","_addOneDelegate","_oneDelegate","elId","managedElements","getContainer","initialized","importDefaults","restoreDefaults","connections","endpointsByElement","endpointsByUUID","offsets","offsetTimestamps","draggableStates","connectionBeingDragged","sizes","_suspendDrawing","_suspendedAt","DEFAULT_SCOPE","_curIdStamp","_idstamp","_appendElement","appendToRoot","_draw","element","ui","clearEdits","headless","repaintEls","getDragManager","getElementsForDraggable","_updateOffset","offset","anchorManager","redraw","_getEndpoint","_prepareConnectionParams","referenceParams","endpoint","sourceEndpoint","targetEndpoint","uuids","isFull","connectionType","connectorOverlays","connectorPointerEvents","_addEndpoint","def","addEndpoint","_mergeOverrides","anchor","anchors","endpoints","endpointStyles","endpointStyle","endpointHoverStyles","endpointHoverStyle","_oneElementDef","defs","matchType","newConnection","tep","newEndpoint","_doNotDeleteOnDetach","_deleteOnDetach","uniqueEndpoint","finalEndpoint","sourceEndpointDefinitions","targetEndpointDefinitions","e1","e2","s1","s2","_scopeMatch","_newConnection","connectionFunc","ConnectionType","getDefaultConnectionType","_newEndpoint","finaliseConnection","_finaliseConnection","con","isDetachable","initDraggable","jpc","doInformAnchorManager","suspendedEndpoint","pending","isTemporarySource","doNotFireConnectionEvent","eventArgs","endpointFunc","EndpointType","fireDetachEvent","elementId","_manage","endpointAdded","_operation","func","ii","jj","_setVisible","alsoChangeEndpoints","setVisible","info","oidx","isVisible","doNotCreateIfNotFound","undefined","setConnectionBeingDragged","isConnectionBeingDragged","getManagedElements","getRenderMode","connectorClass","connectorOutlineClass","editableConnectorClass","connectedClass","endpointClass","endpointConnectedClass","endpointFullClass","endpointDropAllowedClass","endpointDropForbiddenClass","overlayClass","draggingClass","elementDraggingClass","sourceElementDraggingClass","targetElementDraggingClass","endpointAnchorClassPrefix","hoverSourceClass","hoverTargetClass","dragSelectClass","Connectors","svg","ConnectorRenderers","SVG","results","inputs","_ensureContainer","myOffset","paint","anchorLoc","compute","xy","wh","addEndpoints","animate","properties","options","animationSupported","del","stepFunction","animEvents","step","completeFunction","complete","revalidate","doAnimate","conditionName","args","connect","stTypes","epDefs","_set","sid","sep","_st","cId","oldEndpoint","evtParams","index","originalSourceId","newSourceId","originalTargetId","newTargetId","addConnection","makeEndpoint","detachFromConnection","fireMoveEvent","setSource","sourceChanged","setTarget","updateOtherEndpoint","deleteEndpoint","object","dontUpdateHover","deleteAttachedObjects","deleteObject","deleteEveryEndpoint","_is","setSuspendDrawing","doFireEvent","connType","connectionDetached","unregisterEndpoint","newEndpoints","detach","firstArgIsConnection","forceDetach","ignoreTarget","detachFrom","detachAllConnections","detachAll","detachEveryConnection","batch","result","endpointCount","connectionCount","unravelConnection","unravelEndpoint","doNotCleanup","isDraggable","dragOptions","isDragSupported","isAlreadyDraggable","dragEvent","dragEvents","stopEvent","startEvent","_del","_ancestor","getDragAncestor","_noOffset","_ancestorOffset","_started","getOffset","setHoverSuspended","getUIPosition","elements","uip","dragEnded","disabled","register","_initDraggableIfNecessary","initDroppable","_setOperation","_getOperation","setter","getter","prepareList","input","doNotGetIds","filterList","missingIsFalse","getConnections","flat","sources","targets","_addOne","ss","proxies","originalEp","_curryEach","executor","_curryGet","_makeCommonSelectHandler","get","setters","getters","_makeConnectionSelectHandler","common","setDetachable","setReattach","setConnector","isReattach","_makeEndpointSelectHandler","setAnchor","noElementFilters","either","sourceMatchExact","targetMatchExact","inner","_ep","noMatchSource","isSource","noMatchTarget","isTarget","getAllConnections","getEndpoint","getEndpoints","getDefaultEndpointType","Connection","appendElement","_hoverSuspended","hide","changeEndpoints","idstamp","connectorsInitialized","registerConnectorType","connector","candidate","can","offsetParent","manage","_transient","updateOffset","bottom","centerx","centery","init","getRenderModes","_oneType","renderer","AnchorManager","makeAnchor","pp","_a","specimen","newAnchor","getOrientation","DynamicAnchor","anchorParams","orientation","makeAnchors","makeDynamicAnchor","anchorSelector","_makeElementDropHandler","elInfo","dropOptions","proxyComponent","_drop","EndpointDropHandler","targetCount","maxConnections","onDrop","locked","isRedrop","suspendedElement","eps","deriveEndpointAndAnchorSpec","join","_mtNew","positionFinder","dropPosition","elPosition","elSize","ap","constructorParams","maybeCleanup","dropEvent","_drag","_jsPlumbRelatedElement","makeTarget","deleteEndpointsOnDetach","_doOne","elid","_def","targetDef","unmakeTarget","doNotClearArrays","makeSource","aae","onMaxConnections","existingStop","endpointAddedButNoDragYet","anchorDef","oldAnchor","oldConnection","mouseDownListener","_instance","negate","ok","getSelector","selectorFilter","sourceCount","elxy","getPositionOnElement","tempEndpointParams","_delTempEndpoint","extract","att","setDragFilter","unmakeSource","eldefs","unmakeEverySource","_getScope","_setScope","getScope","getSourceScope","getTargetScope","setSourceScope","setTargetScope","setDragScope","setDropScope","unmakeEveryTarget","_setEnabled","toggle","_first","toggleSourceEnabled","isSourceEnabled","setSourceEnabled","toggleTargetEnabled","isTargetEnabled","setTargetEnabled","_elEach","isIdAlready","removeAllEndpoints","recurse","ebe","childNodes","_doRemove","clearFor","removeFloatingConnection","floatingConnections","removeElement","ae","empty","dontRemoveFocus","removeAllGroups","removeGroupManager","doReset","_clearObject","clear","setDefaultScope","setDraggable","setElementDraggable","dontPrependDefault","bits","as","setId","newId","doNotSetAttribute","sConns","tConns","setElementId","setReferenceElement","changeId","_conns","epIdx","setDebugLog","debugLog","repaintAfterwards","curVal","getSuspendedAt","doNotRepaintAfterwards","_wasSuspended","doWhileSuspended","getCachedData","show","toggleVisible","toggleDraggable","addListener","registerConnectionType","to","registerConnectionTypes","registerEndpointType","registerEndpointTypes","typeDescriptor","setIdChanged","oldId","setParent","newParent","_dom","_id","_pdom","_pid","o1","o2","names","getFloatingAnchorIndex","isFloating","getInstance","define","module","SVGAngle","implementation","hasFeature","DragManager","_draggables","_dlist","_delements","_elementsWithEndpoints","_draggablesForElements","parentOffset","_oneLevel","cEl","cid","cOff","updateOffsets","childOffsetOverrides","domEl","cel","pid","pLoc","cLoc","endpointDeleted","ancestor","pId","currentChildLocation","current","clearParent","revalidateParent","childOffset","co","de","aid","_setClassName","cn","className","baseVal","_getClassName","_classManip","curClasses","add","classes","screenLocation","clientLocation","dragManager","recalculateOffsets","createElement","tag","atts","createElementNS","ns","attName","setAttributes","node","classList","contains","toAdd","toRemove","setClass","prop","getStyle","getComputedStyle","getPropertyValue","currentStyle","relativeToRoot","container","op","_maybeAdjustScroll","zoom","offsetWidth","offsetHeight","getAbsolutePosition","setAbsolutePosition","animateFrom","animateOptions","getWidth","getHeight","_jp","OverlayCapableJsPlumbUIComponent","overlayPositions","label","labelLocation","defaultLabelLocation","labelStyle","keep","existing","updateFrom","reattach","addOverlay","removeOverlay","overlay","_newOverlay","_processOverlay","getOverlay","getOverlays","hideOverlay","hideOverlays","showOverlay","showOverlays","removeAllOverlays","overlayId","dontCleanup","removeOverlays","bgCanvas","isAppendedAtTopLevel","getLabel","lo","getLabelOverlay","setLabel","Function","setLocation","_params","mergedParams","Label","_makeLabelOverlay","setAbsoluteOverlayPosition","getAbsoluteOverlayPosition","_clazzManip","action","dontUpdateOverlays","_makeConnectionDragHandler","placeholder","stopped","_ui","anchorPoint","getCurrentLocation","stopDrag","_makeDraggablePlaceholder","ipco","ips","_makeFloatingEndpoint","referenceAnchor","referenceCanvas","FloatingAnchor","reference","typeParameters","findConnectionToUseForDynamicAnchor","elementWithPrecedence","connectorStyle","connectorHoverStyle","connectorHoverClass","connectorTooltip","visible","floatingEndpoint","inPlaceCopy","dragProxy","connectionCost","connectionsDirected","currentAnchorClass","_updateAnchorClass","oldAnchorClass","getCssClass","anchorClass","prepareAnchor","currentAnchor","setPreparedAnchor","continuousAnchorFactory","internalHover","prepareEndpoint","rm","endpointArgs","tooltip","setEndpoint","setPreparedEndpoint","reattachConnections","connectionsDetachable","detachable","dragAllowedWhenFull","_forceDeleteOnDetach","connectionIndex","endpointBeingDeleted","actuallyDetached","_forceDetach","unaffectedConns","setElement","parentId","curId","rehomeEndpoint","makeInPlaceCopy","loc","acc","inPlaceAnchor","hideOnDrag","connectorSelector","setStyle","connectorPaintStyle","dimensions","isDynamic","oIdx","oId","oInfo","oOffset","oWH","txy","twh","tElement","draw","draggingInitialised","placeholderInfo","existingJpc","existingJpcParams","_dragHandler","beforeStartEvent","startParams","_continue","beforeDrag","canvasElement","dragId","endpointToFloat","centerAnchor","_savedAnchor","data","anchorIdx","dragScope","getDragScope","suspendedElementId","suspendedElementType","referenceEndpoint","getDropEvent","deleteConnectionNow","floatingElement","floatingId","floatingIndex","fe","_forceReattach","deleteAfterDragStop","visibility","beforeStartParams","anchorParamsToUse","_initDropTarget","isTransient","isDropSupported","overEvent","outEvent","dhParams","getDragObject","_jpc","bb","doNotChangeConnections","doNotNotifyOtherEndpoint","display","isConnectedTo","found","getConnectionCost","setConnectionCost","areConnectionsDirected","setConnectionsDirected","_elId","setDragAllowedWhenFull","allowed","equals","getUuid","computeAnchor","existingConnection","_doContinue","continueFunction","optionalData","aParam","originalSourceEndpoint","newSourceEndpoint","originalTargetEndpoint","newTargetEndpoint","mergeData","dontContinueFunction","makeConnector","renderMode","connectorName","connectorArgs","forComponent","_makeAnchor","_updateConnectedClass","_jsPlumbConnections","previousConnection","editable","pointer-events","editorParams","lastPaintedAt","editableRequested","setEditable","isEditable","isEditing","eS","eT","_detachable","_reattach","myInfo","myWH","otherInfo","otherOffset","otherWH","initialTimestamp","cost","directed","geometry","setGeometry","getData","setData","_types","test","updateConnectedClass","typeMap","_anchors","informEndpoints","getUuids","getCost","setCost","isDirected","getConnector","getGeometry","prepareConnector","connectorSpec","setPreparedConnector","doNotChangeListenerComponent","previous","previousClasses","transfer","tId","sId","sourceInfo","targetInfo","sE","tE","sAnchorP","tAnchorP","resetBounds","sourcePos","targetPos","overlayExtents","minX","minY","maxX","maxY","outlineWidth","extents","xmin","bounds","ymin","xmax","ymax","es","outlineColor","ehs","drawEndpoints","_amEndpoints","continuousAnchorLocations","userDefinedContinuousAnchorLocations","continuousAnchorOrientations","Orientation","axes","connectionsByElementId","anchorLists","calculateOrientation","sd","sourceAnchor","targetAnchor","atan2","midpoints","dim","sf","tf","sort","sourceEdge","targetEdge","isContinuous","isEdgeSupported","currySort","reverseAngles","edgeSortFunctions","placeAnchors","_anchorLists","cd","sS","sO","placeSomeAnchors","desc","elementDimensions","elementPosition","unsortedConnections","isHorizontal","otherMultiplier","horizontal","reverse","other","xp","yp","placeAnchorsOnLine","_setAnchorLocation","anchorPos","weAreSource","weAreTarget","addFloatingConnection","doRegisterTarget","registerConnection","otherIndex","otherEndpoint","otherAnchor","removeEndpointFromAnchorLists","eId","connInfo","doNotRedraw","removeConnection","getConnectionsFor","getEndpointsFor","_updateAnchorList","lists","aBoolean","otherElId","edgeId","connsToPaint","endpointsToPaint","firstMatchingElIdx","endpointId","listToAddTo","listToRemoveFrom","_continuousAnchorEdge","rIdx","insertIdx","sourceElId","oldTargetId","sIndex","tIndex","originalId","newElement","tIdx","currentId","offsetToUI","doNotRecalcEndpoint","endpointConnections","connectionsToPaint","anchorsToUpdate","orientationCache","sourceContinuous","targetContinuous","oKey","getDefaultFace","fc","ContinuousAnchor","faces","clockwise","availableFaces","opposites","clockwiseOptions","antiClockwiseOptions","secondBest","lastChoice","verifyEdge","edge","clearUserDefinedLocation","setUserDefinedLocation","userDefinedLocation","lastReturnValue","ao","getUserDefinedLocation","ref","refCanvas","xDir","yDir","_lastResult","_endpoint","_convertAnchor","getAnchors","_curAnchor","_lastAnchor","_distance","cx","cy","ax","ay","acx","acy","_anchorSelector","minIdx","minDist","udl","_curryAnchor","ox","oy","fnInit","DynamicAnchors","AutoDefault","_curryContinuousAnchor","Continuous","pf","AnchorPositionFinders","Fixed","dp","Grid","gx","gy","mx","my","Perimeter","anchorCount","shape","Error","_circle","_path","segments","anchorsPerFace","_computeFace","fractionalLength","_shape","_rectangle","_shapes","Circle","Ellipse","Diamond","Rectangle","Square","Triangle","Path","points","tl","da","rotation","amountInDegrees","_rotate","_jg","Segments","AbstractSegment","findClosestPointOnPath","getBounds","Straight","m2","_recalc","getGradient","getCoordinates","setCoordinates","coords","pointOnPath","absolute","_","pointAlongPathFrom","farAwayPoint","within","closest","_x1","_y1","fractionInSegment","Arc","_calcAngle","_calcAngleForLocation","segment","anticlockwise","sa","startAngle","endAngle","TWO_PI","ea","radius","ac","sweep","circumference","frac","VERY_SMALL_VALUE","gentleRound","ceil","angle","arcSpan","dir","Bezier","cp1x","cp1y","cp2x","cp2y","_translateLocation","_curve","AbstractComponent","AbstractConnector","totalLength","segmentProportions","segmentProportionalLengths","stub","sourceStub","targetStub","gap","sourceGap","targetGap","userProvidedSegments","edited","paintInfo","ConnectorEditors","_setGeometry","internallyComputed","_getGeometry","hasBeenEdited","editor","isActive","overrideSetEditable","findSegmentForPoint","_updateSegmentProportions","_findSegmentForLocation","inSegmentProportion","proportion","_addSegment","updateBounds","_clearSegments","setSegments","_segs","_prepareCompute","swapX","swapY","lw","so","oIndex","sx","sy","tx","ty","oProduct","xSpan","ySpan","startStubX","startStubY","endStubX","endStubY","isXGreaterThanStubTimes2","isYGreaterThanStubTimes2","opposite","perpendicular","orthogonal","sourceAxis","anchorOrientation","getSegments","segBounds","seg","_compute","addSegment","prepareCompute","maxStub","maxGap","_super","AbstractEndpoint","Dot","defaultOffset","defaultInnerRadius","DOMElementEndpoint","displayElements","getDisplayElements","appendDisplayElement","Image","_onload","onload","src","url","img","deleted","widthToUse","heightToUse","setImage","_img","margin","padding","outline","actuallyPaint","Blank","background","AbstractOverlay","endpointLoc","endpointLocation","incrementLocation","amount","getLocation","Arrow","foldback","computeMaxSize","elementCreated","currentConnectionPaintStyle","hxy","mid","tail","parseInt","fromLoc","__","cxy","PlainArrow","SingleLine","DoubleLine","_getDimensions","forceRefresh","cachedDimensions","getDimensions","AbstractDOMOverlay","detached","div","initialised","initiallyInvisible","webkitTransform","mozTransform","msTransform","oTransform","transform","absolutePosition","locToUse","minx","miny","clearCachedDimensions","containerExtents","Custom","GuideLines","tailLine","headLine","labelText","font","borderWidth","dStyle","borderStyle","border","update","lt","innerHTML","getEventManager","_mottle","callback","_jpi","GROUP","GroupManager","_managedGroups","_connectionSourceMap","_connectionTargetMap","group","getMembers","_cleanupDetachedConnection","addGroup","manager","_updateConnectionsForGroup","addToGroup","doNotFireEvent","getGroup","removeFromGroup","groupId","getGroups","removeGroup","deleteMembers","expandGroup","getEl","_groups","_collapseConnection","collapseConnection","proxyEp","groupEl","groupElId","originalElementId","otherEl","shouldProxy","collapsed","getAnchor","isProxyEndpoint","collapseGroup","_collapseSet","conns","_expandConnection","expandConnection","originalElement","c1","c2","processed","oneSet","_jsPlumbGroup","_expandSet","repaintGroup","updateConnectionsForGroup","refreshAllGroups","Group","_isJsPlumbGroup","dragArea","ghost","orphan","prune","dropOverride","proxied","internal","endpointIndex","opts","groupManager","getGroupManager","currentGroup","elpos","cpos","overrideDrop","handleDroppedConnections","els","_isInsideParent","_findParent","leftEdge","rightEdge","topEdge","bottomEdge","_orphan","_unbindDragHandlers","_pruneOrOrphan","_revalidate","_bindDragHandlers","__el","targetGroup","manipulateDOM","removeAll","orphanAll","dragParams","toggleGroup","mgr","getGroupFor","Flowchart","midpoint","alwaysRespectStubs","lastx","lasty","cornerRadius","loopbackRadius","lx","ly","sgnx","sgny","segLength","_cloneArray","writeSegments","next","radiusToUse","sgnEqual","commonStubCalculator","stubs","axis","pi","oss","oes","midx","midy","orientations","midLines","linesToEnd","startToEnd","startToMidToEnd","otherStubs","soIdx","toIdx","_so","_to","otherFlipped","stub1","stub2","segmentIndexes","startStub","otherStartStub","endStub","otherEndStub","extent","otherAxis","comparator","toUpperCase","_val","AbstractBezierConnector","showLoopback","curviness","proximityLimit","isLoopbackCurrently","sp","tp","_w","_h","loopback","_computeBezier","majorAnchor","minorAnchor","getCurviness","_findControlPoint","sourceAnchorPosition","targetAnchorPosition","soo","too","_CP","_CP2","_sx","_sy","_tx","_ty","controlPoints","_segment","StateMachine","_controlPoint","_midx","_midy","svgAttributeMap","stroke-linejoin","stroke-dashoffset","stroke-linecap","_attr","attributes","_node","version","xmlns","_pos","_clearGradient","_applyStyles","uiComponent","gradientUnits","stops","styleToUse","stopColor","stop-color","applyGradientTo","_updateGradient","parts","forEach","_appendAtIndex","insertBefore","attr","SvgComponent","pointerEventsSpec","originalArgs","svgParams","useDivWrapper","class","_superSetEditable","SegmentRenderer","getPath","outlineStyle","outlineStrokeWidth","bgPath","laf","SvgEndpoint","strokeWidth","makeNode","updateNode","AbstractSvgArrowOverlay","superclass","makePath","stroke","fill","isNaN","p1_1","p1_2","attachListeners","d1","d2","_jk","_getDragManager","category","enctype","pName","_animProps","ldist","tdist","duration","steps","linc","tinc","_int","setInterval","clearInterval","isElementDraggable","oc","specs","dm","addToDragSelection","removeFromDragSelection","clearDragSelection","_do","readyState","node_tree_viewer","loadTreeData","tul","tw","th","coff","me","_treebgc","$","appendTo","_treebg","Raphael","appendNodeTree","scrollWidth","scrollHeight","rootData","setSize","updateLink","ul","cul","tdivzone","tbtn","tli","tdiv","__div","__v","validateLinks","cnode","tnode","line","st","toff","is_best_decistion","IG$","BC$ds","$s","BC$base","region","layout","autoHeight","init_f","job","dsmapper","dstype","dsfname","dstname","dsskipexist","setValue","_confirm","closeDlg","execute","initComponent","panel","__m","title","IRm$","moption","xtype","defaults","labelPosition","items","fieldLabel","queryMode","displayField","valueField","autoSelect","store","fields","change","tobj","tval","f_f1","f_f2","minHeight","hidden","boxLabel","align","flex","emptyText","iconCls","handler","GG1","BC$hj","modal","isWindow","closable","resizable","dsscript","Base64","decode","encode","BC$scD","bodyStyle","buttons","close","afterrender","BC$sc","req","_rpc$","cnt","command","ack","option","mbody","rs_ts","send","xdoc","snode","tmsg","XGetNode","tnodes","XGetChildNodes","haserr","_I19","XGetTextVal","dlg","checkLogin","alertmsg","ig$","appname","BC$op","dscnames","dsmname","dsruntype","dsdelim","dsdelimval","dstcube","dsmeasuredelim","dsmeasuredelimval","dscsdatause","dscsdatafile","dstcubeuid","m1","dlgitemsel","metaSelectDlg","mode","callBackObj","rs_m1","address","nodepath","uid","rs_m1b","rs_m1a","showerror","opt","itemname","pitemuid","getErrorCode","confirmMessages","overwrite","ShowErrorMessage","XGetAttrProp","BC$mr","grdparams","param","hinput","houtput","confparams","loadData","selType","selModel","checkSelector","plugins","ptype","clicksToEdit","columns","dataIndex","allowBlank","tbar","grd","getSelectionModel","BC$mr1","pval","aval","rowregex","rowsample","mrtype","cfields","isdate","dformat","_g1","_g2","rec","date","set","pack","minWidth","checkchange","rowindex","checked","eopts","edit","context","BC$mr2","doctmpl","mrnode","mrdb","mrcol","mrdocname","mrsmode","dbtype","nodename","mitems","av","mp","mval","mfields","is_date","dateformat","_Ia0","rL","lreq","rs_rL","pdesc","logs","grdloghist","pstatus","created_desc","formatDate","created","updated_desc","updated","Number","gg2","gg1","pstatus_desc","ms","g1","rs_g1","grdjobhist","itemclick","view","record","_I9e","P1","iteminfo","javasource","P2","pname","sourcecode","mr_javaeditor","bodyPadding","loadItemContent","rs_loadItemContent","jdom","jdomeditor","jview","dom","j$ext","ace","getSession","setMode","scriptview","scripteditor","getScriptCache","bootconfig","scmap","igcg","saveMetaContent","smode","rs_saveMetaContent","doCompile","rs_doCompile","errmsg","toolbarHandler","cmd","html","resize","ow","oh","_baN","lnode","coordinates","lname","lvalue","role","property","dsname","dsignoreeror","dsignoreerror","comment","additional_properties","states","precision","unit","_cs","emode","dul","dg","visualstates","statview","sviewarea","sname","gval","sgraph","barlength","visualStateClick","_bf","graphic","_I99","_I9a","mainarea","gpt","doc","mwidth","mheight","a_boxes","m_boxes","render","plumb","lnk","tgt","getBoxObject","t1","t2","source_0","source_1","target_0","target_1","gf_mousemove","mpt","mw","mh","om","ot","gf_mouseup","getID","stat","lid","statdv","status","addBox","isnew","checkUID","jdoc","suid","rs_addBox","dv","dvc","bg","dv_dsname","__tL","removeBox","u1","rs_loadOption","nodelength","s4","txt","titlearea","bconfirm","rs_removeBox","twidth","theight","boxes","addLink","did1","did2","dashstyle","ptr_link","L1","itemobj","nodes","links","pnames","mtype","mtypename","variables","vobj","lobj","ab","probnet","vmap","toffset","typename","dsdesc","dsreducer","linkname","linknodes","cons","potential","revealing_condition","lcond","elem_id","_IB7","rs_L1","_IB8","bf","pnode","content","L2","flowEditor","sgap","fmenu","farea","dt","bccall","topmenu","l4","ev","expand","collapse","M1","rs_M1","mobj","cobj","nitem","opacity","helper","mposition","fV6","fV7","lll","rs_regFavorites","mreq","jobkey","showScheduler","itemtype","contentxml","rs_lll","rs_lllE","XGetAttr","ll4","stimer","clearTimeout","ll3","rs_ll2","afterclose","meta_type","rs_fV6","contentchanged","initpath","fV8","_rs_procMakeItem","rs_procMakeItem","setTitle","rs_ll3","mstatus","stats","borderColor","collapsible","collapseMode","cls","features","enable_scheduler","BC$hcp","hconfig","dconfig","CURDATE","PREVDATE","PREVMONTH","PREVYEAR","USERNAME","GROUPNAME","USERID","DEPTNAME","hadoop_config","_uid","rs_loadContent","rs_F1e","errcode","rs_F1w","baseparams","gparams","dsource","sql_exec_type","save_content","rs_save_content","tdCls","cellclick","rindex","$Dhadoop_cfg","load_dbpool","locale_name","setAllValues","commit_f","getAllValues","refresh","$Dhadoop_cfg_edititem","bA_3","num_cases","filetype","minValue","maxValue","bA_4","atype","b$Am","deterministic_axis_variation_type","p3","analysis_types","scope_types","horizontalAxisParam","analysis_type","scope_type","decision","horizontal_axis_parameter","axitype","instanceid","bA_5","p6","p1v","decisionV","autoScroll","labelWidth","d$MLearn","jobid","lP","appuse","mnode","hnode","headers","sheader","__pfile","downloadurl","_a1","snodes","tdata","titem","algorithm","tmissing","learn_algorithms","missing_names","__learn_opt","sheader_store","modelnet","mainPanel","pfile","alg_ind_test","alg_metric","alg_sig_level","alg_alpha","learn_mode","model_net","use_model_net","use_start_learn","allow_link_addition","allow_link_removal","allow_link_inversion","descretize","treat_missing_val","use_same_num_interval","same_num_interval","variable_use","var_use","selected_header","missing_value","discretization","num_of_interval","navigateApp","fmode","deferredRender","msgTarget","buttonText","fname","mform","getForm","isValid","submit","servlet","waitMsg","success","fp","errorReader","jsonData","nvalue","ovalue","eopt","m_p1","m_pc1","m_pc2","m_pc3","vertical","inputValue","labelAlign","m2ER","bA_6","interactive_learning","showable_edit_proposals","dlgML_NetProp","network_types","variable_types","net_type","var_type","clearInvalid","markInvalid","BY_1","hide_ierr","s_hist","purpose_types","potential_types","_instanceid","dnode","dnodes","potential_type","p_data","crow","cols","uncertain_columns","ucols","g_p1","_prob_value_edit","node_definition","relavance","purpose","domain_values_table","variable_type","node_parents","probability","$probability","get_cell","table_result","colmap","colcnt","rowcnt","hc","rows","header","menuDisabled","_lastcolumn","reconfigure","dnames","rd","closedlg","ctrl","$variable","description","cname","_upd_node_prob","domain_table","_v1","state_num","_std_dom","tvalue","_job_name","hideHeaders","menu","_r","cost_effectiveness_results","rnode","tornado","spider_chart","d3","plot_chart","tchart","bnode","rval","p_tornado","p_tornado_doc","categories","chart","xAxis","reversed","linkedTo","labels","yAxis","formatter","plotOptions","series","stacking","minvalues","maxvalues","category_key","renderTo","reference_markers","bars","starts","ends","Highcharts","Chart","p_spider","p_spider_doc","legend","verticalAlign","xvalues","yvalues","_IB9b","__dlg","_vmode","_sustain","updateNetwork","setNewFinding","tname","is_learn","_IB8b","bfirst","do1","interactive_run","A1","restore_pgmx","np","lv","b_first","actiontype","node_name","new_inst","_IB9c","JSON","parse","setNewWorkingMode","toggleDecisionTree","fpath","filename","luid","download","_g$a","learn_opt","interactive_opt","oval","s_learn_opt","interactive_do","paint_decision_tree","eldom","mdom","m_decision_tree","dnd_viewer","build_decision_data","ndname","branch_state","gnode","pn","vn","vstat","visualnodes","ispropagationactive","formatvalue","nd","errormessage","evidence","inference_options","m_main_card","getLayout","setActiveItem","tools","beforeclose","_IB8r","vnode","thresholds","belongs_to","_IB8p","uval","uncertain_values","utility_variable","top_variable","timeslice","branches","subpotentials","time_variable","coefficients","covariates","covariance_matrix","cholesky_decomposition","numeric_value","distribution","potentials","arr1","arr2","decision_criteria","from_node","to_node","criterion","arr","kobj","knode","vnodes","vrow","knodes","vname","XGetNodeName","blocked_edit_proposals","criteria","txtpgmx","stringify","_l1","fuid","m1val","km1","dval","txtfilename"],"mappings":"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","file":"../../../../../../igc9.min.js","sourcesContent":["/**\n * jsBezier-0.8\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * licensed under the MIT license.\n *\n * a set of Bezier curve functions that deal with Beziers, used by jsPlumb, and perhaps useful for other people.  These functions work with Bezier\n * curves of arbitrary degree.\n *\n * - functions are all in the 'jsBezier' namespace.\n *\n * - all input points should be in the format {x:.., y:..}. all output points are in this format too.\n *\n * - all input curves should be in the format [ {x:.., y:..}, {x:.., y:..}, {x:.., y:..}, {x:.., y:..} ]\n *\n * - 'location' as used as an input here refers to a decimal in the range 0-1 inclusive, which indicates a point some proportion along the length\n * of the curve.  location as output has the same format and meaning.\n *\n *\n * Function List:\n * --------------\n *\n * distanceFromCurve(point, curve)\n *\n *     Calculates the distance that the given point lies from the given Bezier.  Note that it is computed relative to the center of the Bezier,\n * so if you have stroked the curve with a wide pen you may wish to take that into account!  The distance returned is relative to the values\n * of the curve and the point - it will most likely be pixels.\n *\n * gradientAtPoint(curve, location)\n *\n *     Calculates the gradient to the curve at the given location, as a decimal between 0 and 1 inclusive.\n *\n * gradientAtPointAlongCurveFrom (curve, location)\n *\n *    Calculates the gradient at the point on the given curve that is 'distance' units from location.\n *\n * nearestPointOnCurve(point, curve)\n *\n *    Calculates the nearest point to the given point on the given curve.  The return value of this is a JS object literal, containing both the\n *point's coordinates and also the 'location' of the point (see above), for example:  { point:{x:551,y:150}, location:0.263365 }.\n *\n * pointOnCurve(curve, location)\n *\n *     Calculates the coordinates of the point on the given Bezier curve at the given location.\n *\n * pointAlongCurveFrom(curve, location, distance)\n *\n *     Calculates the coordinates of the point on the given curve that is 'distance' units from location.  'distance' should be in the same coordinate\n * space as that used to construct the Bezier curve.  For an HTML Canvas usage, for example, distance would be a measure of pixels.\n *\n * locationAlongCurveFrom(curve, location, distance)\n *\n *     Calculates the location on the given curve that is 'distance' units from location.  'distance' should be in the same coordinate\n * space as that used to construct the Bezier curve.  For an HTML Canvas usage, for example, distance would be a measure of pixels.\n *\n * perpendicularToCurveAt(curve, location, length, distance)\n *\n *     Calculates the perpendicular to the given curve at the given location.  length is the length of the line you wish for (it will be centered\n * on the point at 'location'). distance is optional, and allows you to specify a point along the path from the given location as the center of\n * the perpendicular returned.  The return value of this is an array of two points: [ {x:...,y:...}, {x:...,y:...} ].\n *\n *\n */\n\n(function() {\n\n    var root = this;\n\n    if(typeof Math.sgn == \"undefined\") {\n        Math.sgn = function(x) { return x == 0 ? 0 : x > 0 ? 1 :-1; };\n    }\n\n    var Vectors = {\n            subtract     :     function(v1, v2) { return {x:v1.x - v2.x, y:v1.y - v2.y }; },\n            dotProduct    :     function(v1, v2) { return (v1.x * v2.x)  + (v1.y * v2.y); },\n            square        :    function(v) { return Math.sqrt((v.x * v.x) + (v.y * v.y)); },\n            scale        :    function(v, s) { return {x:v.x * s, y:v.y * s }; }\n        },\n\n        maxRecursion = 64,\n        flatnessTolerance = Math.pow(2.0,-maxRecursion-1);\n\n    /**\n     * Calculates the distance that the point lies from the curve.\n     *\n     * @param point a point in the form {x:567, y:3342}\n     * @param curve a Bezier curve in the form [{x:..., y:...}, {x:..., y:...}, {x:..., y:...}, {x:..., y:...}].  note that this is currently\n     * hardcoded to assume cubiz beziers, but would be better off supporting any degree.\n     * @return a JS object literal containing location and distance, for example: {location:0.35, distance:10}.  Location is analogous to the location\n     * argument you pass to the pointOnPath function: it is a ratio of distance travelled along the curve.  Distance is the distance in pixels from\n     * the point to the curve.\n     */\n    var _distanceFromCurve = function(point, curve) {\n        var candidates = [],\n            w = _convertToBezier(point, curve),\n            degree = curve.length - 1, higherDegree = (2 * degree) - 1,\n            numSolutions = _findRoots(w, higherDegree, candidates, 0),\n            v = Vectors.subtract(point, curve[0]), dist = Vectors.square(v), t = 0.0;\n\n        for (var i = 0; i < numSolutions; i++) {\n            v = Vectors.subtract(point, _bezier(curve, degree, candidates[i], null, null));\n            var newDist = Vectors.square(v);\n            if (newDist < dist) {\n                dist = newDist;\n                t = candidates[i];\n            }\n        }\n        v = Vectors.subtract(point, curve[degree]);\n        newDist = Vectors.square(v);\n        if (newDist < dist) {\n            dist = newDist;\n            t = 1.0;\n        }\n        return {location:t, distance:dist};\n    };\n    /**\n     * finds the nearest point on the curve to the given point.\n     */\n    var _nearestPointOnCurve = function(point, curve) {\n        var td = _distanceFromCurve(point, curve);\n        return {point:_bezier(curve, curve.length - 1, td.location, null, null), location:td.location};\n    };\n    var _convertToBezier = function(point, curve) {\n        var degree = curve.length - 1, higherDegree = (2 * degree) - 1,\n            c = [], d = [], cdTable = [], w = [],\n            z = [ [1.0, 0.6, 0.3, 0.1], [0.4, 0.6, 0.6, 0.4], [0.1, 0.3, 0.6, 1.0] ];\n\n        for (var i = 0; i <= degree; i++) c[i] = Vectors.subtract(curve[i], point);\n        for (var i = 0; i <= degree - 1; i++) {\n            d[i] = Vectors.subtract(curve[i+1], curve[i]);\n            d[i] = Vectors.scale(d[i], 3.0);\n        }\n        for (var row = 0; row <= degree - 1; row++) {\n            for (var column = 0; column <= degree; column++) {\n                if (!cdTable[row]) cdTable[row] = [];\n                cdTable[row][column] = Vectors.dotProduct(d[row], c[column]);\n            }\n        }\n        for (i = 0; i <= higherDegree; i++) {\n            if (!w[i]) w[i] = [];\n            w[i].y = 0.0;\n            w[i].x = parseFloat(i) / higherDegree;\n        }\n        var n = degree, m = degree-1;\n        for (var k = 0; k <= n + m; k++) {\n            var lb = Math.max(0, k - m),\n                ub = Math.min(k, n);\n            for (i = lb; i <= ub; i++) {\n                j = k - i;\n                w[i+j].y += cdTable[j][i] * z[j][i];\n            }\n        }\n        return w;\n    };\n    /**\n     * counts how many roots there are.\n     */\n    var _findRoots = function(w, degree, t, depth) {\n        var left = [], right = [],\n            left_count, right_count,\n            left_t = [], right_t = [];\n\n        switch (_getCrossingCount(w, degree)) {\n            case 0 : {\n                return 0;\n            }\n            case 1 : {\n                if (depth >= maxRecursion) {\n                    t[0] = (w[0].x + w[degree].x) / 2.0;\n                    return 1;\n                }\n                if (_isFlatEnough(w, degree)) {\n                    t[0] = _computeXIntercept(w, degree);\n                    return 1;\n                }\n                break;\n            }\n        }\n        _bezier(w, degree, 0.5, left, right);\n        left_count  = _findRoots(left,  degree, left_t, depth+1);\n        right_count = _findRoots(right, degree, right_t, depth+1);\n        for (var i = 0; i < left_count; i++) t[i] = left_t[i];\n        for (var i = 0; i < right_count; i++) t[i+left_count] = right_t[i];\n        return (left_count+right_count);\n    };\n    var _getCrossingCount = function(curve, degree) {\n        var n_crossings = 0, sign, old_sign;\n        sign = old_sign = Math.sgn(curve[0].y);\n        for (var i = 1; i <= degree; i++) {\n            sign = Math.sgn(curve[i].y);\n            if (sign != old_sign) n_crossings++;\n            old_sign = sign;\n        }\n        return n_crossings;\n    };\n    var _isFlatEnough = function(curve, degree) {\n        var  error,\n            intercept_1, intercept_2, left_intercept, right_intercept,\n            a, b, c, det, dInv, a1, b1, c1, a2, b2, c2;\n        a = curve[0].y - curve[degree].y;\n        b = curve[degree].x - curve[0].x;\n        c = curve[0].x * curve[degree].y - curve[degree].x * curve[0].y;\n\n        var max_distance_above = max_distance_below = 0.0;\n\n        for (var i = 1; i < degree; i++) {\n            var value = a * curve[i].x + b * curve[i].y + c;\n            if (value > max_distance_above)\n                max_distance_above = value;\n            else if (value < max_distance_below)\n                max_distance_below = value;\n        }\n\n        a1 = 0.0; b1 = 1.0; c1 = 0.0; a2 = a; b2 = b;\n        c2 = c - max_distance_above;\n        det = a1 * b2 - a2 * b1;\n        dInv = 1.0/det;\n        intercept_1 = (b1 * c2 - b2 * c1) * dInv;\n        a2 = a; b2 = b; c2 = c - max_distance_below;\n        det = a1 * b2 - a2 * b1;\n        dInv = 1.0/det;\n        intercept_2 = (b1 * c2 - b2 * c1) * dInv;\n        left_intercept = Math.min(intercept_1, intercept_2);\n        right_intercept = Math.max(intercept_1, intercept_2);\n        error = right_intercept - left_intercept;\n        return (error < flatnessTolerance)? 1 : 0;\n    };\n    var _computeXIntercept = function(curve, degree) {\n        var XLK = 1.0, YLK = 0.0,\n            XNM = curve[degree].x - curve[0].x, YNM = curve[degree].y - curve[0].y,\n            XMK = curve[0].x - 0.0, YMK = curve[0].y - 0.0,\n            det = XNM*YLK - YNM*XLK, detInv = 1.0/det,\n            S = (XNM*YMK - YNM*XMK) * detInv;\n        return 0.0 + XLK * S;\n    };\n    var _bezier = function(curve, degree, t, left, right) {\n        var temp = [[]];\n        for (var j =0; j <= degree; j++) temp[0][j] = curve[j];\n        for (var i = 1; i <= degree; i++) {\n            for (var j =0 ; j <= degree - i; j++) {\n                if (!temp[i]) temp[i] = [];\n                if (!temp[i][j]) temp[i][j] = {};\n                temp[i][j].x = (1.0 - t) * temp[i-1][j].x + t * temp[i-1][j+1].x;\n                temp[i][j].y = (1.0 - t) * temp[i-1][j].y + t * temp[i-1][j+1].y;\n            }\n        }\n        if (left != null)\n            for (j = 0; j <= degree; j++) left[j]  = temp[j][0];\n        if (right != null)\n            for (j = 0; j <= degree; j++) right[j] = temp[degree-j][j];\n\n        return (temp[degree][0]);\n    };\n\n    var _curveFunctionCache = {};\n    var _getCurveFunctions = function(order) {\n        var fns = _curveFunctionCache[order];\n        if (!fns) {\n            fns = [];\n            var f_term = function() { return function(t) { return Math.pow(t, order); }; },\n                l_term = function() { return function(t) { return Math.pow((1-t), order); }; },\n                c_term = function(c) { return function(t) { return c; }; },\n                t_term = function() { return function(t) { return t; }; },\n                one_minus_t_term = function() { return function(t) { return 1-t; }; },\n                _termFunc = function(terms) {\n                    return function(t) {\n                        var p = 1;\n                        for (var i = 0; i < terms.length; i++) p = p * terms[i](t);\n                        return p;\n                    };\n                };\n\n            fns.push(new f_term());  // first is t to the power of the curve order\n            for (var i = 1; i < order; i++) {\n                var terms = [new c_term(order)];\n                for (var j = 0 ; j < (order - i); j++) terms.push(new t_term());\n                for (var j = 0 ; j < i; j++) terms.push(new one_minus_t_term());\n                fns.push(new _termFunc(terms));\n            }\n            fns.push(new l_term());  // last is (1-t) to the power of the curve order\n\n            _curveFunctionCache[order] = fns;\n        }\n\n        return fns;\n    };\n\n\n    /**\n     * calculates a point on the curve, for a Bezier of arbitrary order.\n     * @param curve an array of control points, eg [{x:10,y:20}, {x:50,y:50}, {x:100,y:100}, {x:120,y:100}].  For a cubic bezier this should have four points.\n     * @param location a decimal indicating the distance along the curve the point should be located at.  this is the distance along the curve as it travels, taking the way it bends into account.  should be a number from 0 to 1, inclusive.\n     */\n    var _pointOnPath = function(curve, location) {\n        var cc = _getCurveFunctions(curve.length - 1),\n            _x = 0, _y = 0;\n        for (var i = 0; i < curve.length ; i++) {\n            _x = _x + (curve[i].x * cc[i](location));\n            _y = _y + (curve[i].y * cc[i](location));\n        }\n\n        return {x:_x, y:_y};\n    };\n\n    var _dist = function(p1,p2) {\n        return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n    };\n\n    var _isPoint = function(curve) {\n        return curve[0].x == curve[1].x && curve[0].y == curve[1].y;\n    };\n\n    /**\n     * finds the point that is 'distance' along the path from 'location'.  this method returns both the x,y location of the point and also\n     * its 'location' (proportion of travel along the path); the method below - _pointAlongPathFrom - calls this method and just returns the\n     * point.\n     */\n    var _pointAlongPath = function(curve, location, distance) {\n\n        if (_isPoint(curve)) {\n            return {\n                point:curve[0],\n                location:location\n            };\n        }\n\n        var prev = _pointOnPath(curve, location),\n            tally = 0,\n            curLoc = location,\n            direction = distance > 0 ? 1 : -1,\n            cur = null;\n\n        while (tally < Math.abs(distance)) {\n            curLoc += (0.005 * direction);\n            cur = _pointOnPath(curve, curLoc);\n            tally += _dist(cur, prev);\n            prev = cur;\n        }\n        return {point:cur, location:curLoc};\n    };\n\n    var _length = function(curve) {\n        if (_isPoint(curve)) return 0;\n\n        var prev = _pointOnPath(curve, 0),\n            tally = 0,\n            curLoc = 0,\n            direction = 1,\n            cur = null;\n\n        while (curLoc < 1) {\n            curLoc += (0.005 * direction);\n            cur = _pointOnPath(curve, curLoc);\n            tally += _dist(cur, prev);\n            prev = cur;\n        }\n        return tally;\n    };\n\n    /**\n     * finds the point that is 'distance' along the path from 'location'.\n     */\n    var _pointAlongPathFrom = function(curve, location, distance) {\n        return _pointAlongPath(curve, location, distance).point;\n    };\n\n    /**\n     * finds the location that is 'distance' along the path from 'location'.\n     */\n    var _locationAlongPathFrom = function(curve, location, distance) {\n        return _pointAlongPath(curve, location, distance).location;\n    };\n\n    /**\n     * returns the gradient of the curve at the given location, which is a decimal between 0 and 1 inclusive.\n     *\n     * thanks // http://bimixual.org/AnimationLibrary/beziertangents.html\n     */\n    var _gradientAtPoint = function(curve, location) {\n        var p1 = _pointOnPath(curve, location),\n            p2 = _pointOnPath(curve.slice(0, curve.length - 1), location),\n            dy = p2.y - p1.y, dx = p2.x - p1.x;\n        return dy == 0 ? Infinity : Math.atan(dy / dx);\n    };\n\n    /**\n     returns the gradient of the curve at the point which is 'distance' from the given location.\n     if this point is greater than location 1, the gradient at location 1 is returned.\n     if this point is less than location 0, the gradient at location 0 is returned.\n     */\n    var _gradientAtPointAlongPathFrom = function(curve, location, distance) {\n        var p = _pointAlongPath(curve, location, distance);\n        if (p.location > 1) p.location = 1;\n        if (p.location < 0) p.location = 0;\n        return _gradientAtPoint(curve, p.location);\n    };\n\n    /**\n     * calculates a line that is 'length' pixels long, perpendicular to, and centered on, the path at 'distance' pixels from the given location.\n     * if distance is not supplied, the perpendicular for the given location is computed (ie. we set distance to zero).\n     */\n    var _perpendicularToPathAt = function(curve, location, length, distance) {\n        distance = distance == null ? 0 : distance;\n        var p = _pointAlongPath(curve, location, distance),\n            m = _gradientAtPoint(curve, p.location),\n            _theta2 = Math.atan(-1 / m),\n            y =  length / 2 * Math.sin(_theta2),\n            x =  length / 2 * Math.cos(_theta2);\n        return [{x:p.point.x + x, y:p.point.y + y}, {x:p.point.x - x, y:p.point.y - y}];\n    };\n\n    this.jsBezier = {\n        distanceFromCurve : _distanceFromCurve,\n        gradientAtPoint : _gradientAtPoint,\n        gradientAtPointAlongCurveFrom : _gradientAtPointAlongPathFrom,\n        nearestPointOnCurve : _nearestPointOnCurve,\n        pointOnCurve : _pointOnPath,\n        pointAlongCurveFrom : _pointAlongPathFrom,\n        perpendicularToCurveAt : _perpendicularToPathAt,\n        locationAlongCurveFrom:_locationAlongPathFrom,\n        getLength:_length\n    };\n}).call(typeof window !== 'undefined' ? window : this);\n\n/**\n * Biltong v0.3\n *\n * Various geometry functions written as part of jsPlumb and perhaps useful for others.\n *\n * Copyright (c) 2016 jsPlumb\n * https://jsplumbtoolkit.com\n *\n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \"Software\"), to deal in the Software without\n * restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following\n * conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n */\n;(function() {\n\n    \"use strict\";\n    var root = this;\n\n    var Biltong = root.Biltong = {};\n\n    var _isa = function(a) { return Object.prototype.toString.call(a) === \"[object Array]\"; },\n        _pointHelper = function(p1, p2, fn) {\n            p1 = _isa(p1) ? p1 : [p1.x, p1.y];\n            p2 = _isa(p2) ? p2 : [p2.x, p2.y];\n            return fn(p1, p2);\n        },\n        /**\n         * @name Biltong.gradient\n         * @function\n         * @desc Calculates the gradient of a line between the two points.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Float} The gradient of a line between the two points.\n         */\n        _gradient = Biltong.gradient = function(p1, p2) {\n            return _pointHelper(p1, p2, function(_p1, _p2) {\n                if (_p2[0] == _p1[0])\n                    return _p2[1] > _p1[1] ? Infinity : -Infinity;\n                else if (_p2[1] == _p1[1])\n                    return _p2[0] > _p1[0] ? 0 : -0;\n                else\n                    return (_p2[1] - _p1[1]) / (_p2[0] - _p1[0]);\n            });\n        },\n        /**\n         * @name Biltong.normal\n         * @function\n         * @desc Calculates the gradient of a normal to a line between the two points.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Float} The gradient of a normal to a line between the two points.\n         */\n        _normal = Biltong.normal = function(p1, p2) {\n            return -1 / _gradient(p1, p2);\n        },\n        /**\n         * @name Biltong.lineLength\n         * @function\n         * @desc Calculates the length of a line between the two points.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Float} The length of a line between the two points.\n         */\n        _lineLength = Biltong.lineLength = function(p1, p2) {\n            return _pointHelper(p1, p2, function(_p1, _p2) {\n                return Math.sqrt(Math.pow(_p2[1] - _p1[1], 2) + Math.pow(_p2[0] - _p1[0], 2));\n            });\n        },\n        /**\n         * @name Biltong.quadrant\n         * @function\n         * @desc Calculates the quadrant in which the angle between the two points lies.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Integer} The quadrant - 1 for upper right, 2 for lower right, 3 for lower left, 4 for upper left.\n         */\n        _quadrant = Biltong.quadrant = function(p1, p2) {\n            return _pointHelper(p1, p2, function(_p1, _p2) {\n                if (_p2[0] > _p1[0]) {\n                    return (_p2[1] > _p1[1]) ? 2 : 1;\n                }\n                else if (_p2[0] == _p1[0]) {\n                    return _p2[1] > _p1[1] ? 2 : 1;\n                }\n                else {\n                    return (_p2[1] > _p1[1]) ? 3 : 4;\n                }\n            });\n        },\n        /**\n         * @name Biltong.theta\n         * @function\n         * @desc Calculates the angle between the two points.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Float} The angle between the two points.\n         */\n        _theta = Biltong.theta = function(p1, p2) {\n            return _pointHelper(p1, p2, function(_p1, _p2) {\n                var m = _gradient(_p1, _p2),\n                    t = Math.atan(m),\n                    s = _quadrant(_p1, _p2);\n                if ((s == 4 || s== 3)) t += Math.PI;\n                if (t < 0) t += (2 * Math.PI);\n\n                return t;\n            });\n        },\n        /**\n         * @name Biltong.intersects\n         * @function\n         * @desc Calculates whether or not the two rectangles intersect.\n         * @param {Rectangle} r1 First rectangle, as a js object in the form `{x:.., y:.., w:.., h:..}`\n         * @param {Rectangle} r2 Second rectangle, as a js object in the form `{x:.., y:.., w:.., h:..}`\n         * @return {Boolean} True if the rectangles intersect, false otherwise.\n         */\n        _intersects = Biltong.intersects = function(r1, r2) {\n            var x1 = r1.x, x2 = r1.x + r1.w, y1 = r1.y, y2 = r1.y + r1.h,\n                a1 = r2.x, a2 = r2.x + r2.w, b1 = r2.y, b2 = r2.y + r2.h;\n\n            return  ( (x1 <= a1 && a1 <= x2) && (y1 <= b1 && b1 <= y2) ) ||\n                ( (x1 <= a2 && a2 <= x2) && (y1 <= b1 && b1 <= y2) ) ||\n                ( (x1 <= a1 && a1 <= x2) && (y1 <= b2 && b2 <= y2) ) ||\n                ( (x1 <= a2 && a1 <= x2) && (y1 <= b2 && b2 <= y2) ) ||\n                ( (a1 <= x1 && x1 <= a2) && (b1 <= y1 && y1 <= b2) ) ||\n                ( (a1 <= x2 && x2 <= a2) && (b1 <= y1 && y1 <= b2) ) ||\n                ( (a1 <= x1 && x1 <= a2) && (b1 <= y2 && y2 <= b2) ) ||\n                ( (a1 <= x2 && x1 <= a2) && (b1 <= y2 && y2 <= b2) );\n        },\n        /**\n         * @name Biltong.encloses\n         * @function\n         * @desc Calculates whether or not r2 is completely enclosed by r1.\n         * @param {Rectangle} r1 First rectangle, as a js object in the form `{x:.., y:.., w:.., h:..}`\n         * @param {Rectangle} r2 Second rectangle, as a js object in the form `{x:.., y:.., w:.., h:..}`\n         * @param {Boolean} [allowSharedEdges=false] If true, the concept of enclosure allows for one or more edges to be shared by the two rectangles.\n         * @return {Boolean} True if r1 encloses r2, false otherwise.\n         */\n        _encloses = Biltong.encloses = function(r1, r2, allowSharedEdges) {\n            var x1 = r1.x, x2 = r1.x + r1.w, y1 = r1.y, y2 = r1.y + r1.h,\n                a1 = r2.x, a2 = r2.x + r2.w, b1 = r2.y, b2 = r2.y + r2.h,\n                c = function(v1, v2, v3, v4) { return allowSharedEdges ? v1 <= v2 && v3>= v4 : v1 < v2 && v3 > v4; };\n\n            return c(x1,a1,x2,a2) && c(y1,b1,y2,b2);\n        },\n        _segmentMultipliers = [null, [1, -1], [1, 1], [-1, 1], [-1, -1] ],\n        _inverseSegmentMultipliers = [null, [-1, -1], [-1, 1], [1, 1], [1, -1] ],\n        /**\n         * @name Biltong.pointOnLine\n         * @function\n         * @desc Calculates a point on the line from `fromPoint` to `toPoint` that is `distance` units along the length of the line.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Point} Point on the line, in the form `{ x:..., y:... }`.\n         */\n        _pointOnLine = Biltong.pointOnLine = function(fromPoint, toPoint, distance) {\n            var m = _gradient(fromPoint, toPoint),\n                s = _quadrant(fromPoint, toPoint),\n                segmentMultiplier = distance > 0 ? _segmentMultipliers[s] : _inverseSegmentMultipliers[s],\n                theta = Math.atan(m),\n                y = Math.abs(distance * Math.sin(theta)) * segmentMultiplier[1],\n                x =  Math.abs(distance * Math.cos(theta)) * segmentMultiplier[0];\n            return { x:fromPoint.x + x, y:fromPoint.y + y };\n        },\n        /**\n         * @name Biltong.perpendicularLineTo\n         * @function\n         * @desc Calculates a line of length `length` that is perpendicular to the line from `fromPoint` to `toPoint` and passes through `toPoint`.\n         * @param {Point} p1 First point, either as a 2 entry array or object with `left` and `top` properties.\n         * @param {Point} p2 Second point, either as a 2 entry array or object with `left` and `top` properties.\n         * @return {Line} Perpendicular line, in the form `[ { x:..., y:... }, { x:..., y:... } ]`.\n         */\n        _perpendicularLineTo = Biltong.perpendicularLineTo = function(fromPoint, toPoint, length) {\n            var m = _gradient(fromPoint, toPoint),\n                theta2 = Math.atan(-1 / m),\n                y =  length / 2 * Math.sin(theta2),\n                x =  length / 2 * Math.cos(theta2);\n            return [{x:toPoint.x + x, y:toPoint.y + y}, {x:toPoint.x - x, y:toPoint.y - y}];\n        };\n}).call(typeof window !== 'undefined' ? window : this);\n;\n(function () {\n\n    \"use strict\";\n\n    var root = this,\n        Sniff = {\n            android: navigator.userAgent.toLowerCase().indexOf(\"android\") > -1\n        },\n        matchesSelector = function (el, selector, ctx) {\n            ctx = ctx || el.parentNode;\n            var possibles = ctx.querySelectorAll(selector);\n            for (var i = 0; i < possibles.length; i++) {\n                if (possibles[i] === el) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        _gel = function (el) {\n            return (typeof el == \"string\" || el.constructor === String) ? document.getElementById(el) : el;\n        },\n        _t = function (e) {\n            return e.srcElement || e.target;\n        },\n    //\n    // gets path info for the given event - the path from target to obj, in the event's bubble chain. if doCompute\n    // is false we just return target for the path.\n    //\n        _pi = function(e, target, obj, doCompute) {\n            if (!doCompute) return { path:[target], end:1 };\n            else if (typeof e.path !== \"undefined\") {\n                return { path: e.path, end: e.path.indexOf(obj) };\n            } else {\n                var out = { path:[], end:-1 }, _one = function(el) {\n                    out.path.push(el);\n                    if (el === obj) {\n                        out.end = out.path.length - 1;\n                    }\n                    else if (el.parentNode != null) {\n                        _one(el.parentNode)\n                    }\n                };\n                _one(target);\n                return out;\n            }\n        },\n        _d = function (l, fn) {\n            for (var i = 0, j = l.length; i < j; i++) {\n                if (l[i] == fn) break;\n            }\n            if (i < l.length) l.splice(i, 1);\n        },\n        guid = 1,\n    //\n    // this function generates a guid for every handler, sets it on the handler, then adds\n    // it to the associated object's map of handlers for the given event. this is what enables us\n    // to unbind all events of some type, or all events (the second of which can be requested by the user,\n    // but it also used by Mottle when an element is removed.)\n        _store = function (obj, event, fn) {\n            var g = guid++;\n            obj.__ta = obj.__ta || {};\n            obj.__ta[event] = obj.__ta[event] || {};\n            // store each handler with a unique guid.\n            obj.__ta[event][g] = fn;\n            // set the guid on the handler.\n            fn.__tauid = g;\n            return g;\n        },\n        _unstore = function (obj, event, fn) {\n            obj.__ta && obj.__ta[event] && delete obj.__ta[event][fn.__tauid];\n            // a handler might have attached extra functions, so we unbind those too.\n            if (fn.__taExtra) {\n                for (var i = 0; i < fn.__taExtra.length; i++) {\n                    _unbind(obj, fn.__taExtra[i][0], fn.__taExtra[i][1]);\n                }\n                fn.__taExtra.length = 0;\n            }\n            // a handler might have attached an unstore callback\n            fn.__taUnstore && fn.__taUnstore();\n        },\n        _curryChildFilter = function (children, obj, fn, evt) {\n            if (children == null) return fn;\n            else {\n                var c = children.split(\",\"),\n                    _fn = function (e) {\n                        _fn.__tauid = fn.__tauid;\n                        var t = _t(e), target = t;  // t is the target element on which the event occurred. it is the\n                        // element we will wish to pass to any callbacks.\n                        var pathInfo = _pi(e, t, obj, children != null)\n                        if (pathInfo.end != -1) {\n                            for (var p = 0; p < pathInfo.end; p++) {\n                                target = pathInfo.path[p];\n                                for (var i = 0; i < c.length; i++) {\n                                    if (matchesSelector(target, c[i], obj)) {\n                                        fn.apply(target, arguments);\n                                    }\n                                }\n                            }\n                        }\n                    };\n                registerExtraFunction(fn, evt, _fn);\n                return _fn;\n            }\n        },\n    //\n    // registers an 'extra' function on some event listener function we were given - a function that we\n    // created and bound to the element as part of our housekeeping, and which we want to unbind and remove\n    // whenever the given function is unbound.\n        registerExtraFunction = function (fn, evt, newFn) {\n            fn.__taExtra = fn.__taExtra || [];\n            fn.__taExtra.push([evt, newFn]);\n        },\n        DefaultHandler = function (obj, evt, fn, children) {\n            if (isTouchDevice && touchMap[evt]) {\n                var tfn = _curryChildFilter(children, obj, fn, touchMap[evt]);\n                _bind(obj, touchMap[evt], tfn , fn);\n            }\n            if (evt === \"focus\" && obj.getAttribute(\"tabindex\") == null) {\n                obj.setAttribute(\"tabindex\", \"1\");\n            }\n            _bind(obj, evt, _curryChildFilter(children, obj, fn, evt), fn);\n        },\n        SmartClickHandler = function (obj, evt, fn, children) {\n            if (obj.__taSmartClicks == null) {\n                var down = function (e) {\n                        obj.__tad = _pageLocation(e);\n                    },\n                    up = function (e) {\n                        obj.__tau = _pageLocation(e);\n                    },\n                    click = function (e) {\n                        if (obj.__tad && obj.__tau && obj.__tad[0] === obj.__tau[0] && obj.__tad[1] === obj.__tau[1]) {\n                            for (var i = 0; i < obj.__taSmartClicks.length; i++)\n                                obj.__taSmartClicks[i].apply(_t(e), [ e ]);\n                        }\n                    };\n                DefaultHandler(obj, \"mousedown\", down, children);\n                DefaultHandler(obj, \"mouseup\", up, children);\n                DefaultHandler(obj, \"click\", click, children);\n                obj.__taSmartClicks = [];\n            }\n\n            // store in the list of callbacks\n            obj.__taSmartClicks.push(fn);\n            // the unstore function removes this function from the object's listener list for this type.\n            fn.__taUnstore = function () {\n                _d(obj.__taSmartClicks, fn);\n            };\n        },\n        _tapProfiles = {\n            \"tap\": {touches: 1, taps: 1},\n            \"dbltap\": {touches: 1, taps: 2},\n            \"contextmenu\": {touches: 2, taps: 1}\n        },\n        TapHandler = function (clickThreshold, dblClickThreshold) {\n            return function (obj, evt, fn, children) {\n                // if event is contextmenu, for devices which are mouse only, we want to\n                // use the default bind.\n                if (evt == \"contextmenu\" && isMouseDevice)\n                    DefaultHandler(obj, evt, fn, children);\n                else {\n                    // the issue here is that this down handler gets registered only for the\n                    // child nodes in the first registration. in fact it should be registered with\n                    // no child selector and then on down we should cycle through the registered\n                    // functions to see if one of them matches. on mouseup we should execute ALL of\n                    // the functions whose children are either null or match the element.\n                    if (obj.__taTapHandler == null) {\n                        var tt = obj.__taTapHandler = {\n                            tap: [],\n                            dbltap: [],\n                            contextmenu: [],\n                            down: false,\n                            taps: 0,\n                            downSelectors: []\n                        };\n                        var down = function (e) {\n                                var target = _t(e), pathInfo = _pi(e, target, obj, children != null), finished = false;\n                                for (var p = 0; p < pathInfo.end; p++) {\n                                    if (finished) return;\n                                    target = pathInfo.path[p];\n                                    for (var i = 0; i < tt.downSelectors.length; i++) {\n                                        if (tt.downSelectors[i] == null || matchesSelector(target, tt.downSelectors[i], obj)) {\n                                            tt.down = true;\n                                            setTimeout(clearSingle, clickThreshold);\n                                            setTimeout(clearDouble, dblClickThreshold);\n                                            finished = true;\n                                            break; // we only need one match on mousedown\n                                        }\n                                    }\n                                }\n                            },\n                            up = function (e) {\n                                if (tt.down) {\n                                    var target = _t(e), pathInfo;\n                                    tt.taps++;\n                                    var tc = _touchCount(e);\n                                    for (var eventId in _tapProfiles) {\n                                        if (_tapProfiles.hasOwnProperty(eventId)) {\n                                            var p = _tapProfiles[eventId];\n                                            if (p.touches === tc && (p.taps === 1 || p.taps === tt.taps)) {\n                                                for (var i = 0; i < tt[eventId].length; i++) {\n                                                    pathInfo = _pi(e, target, obj, tt[eventId][i][1] != null);\n                                                    for (var pLoop = 0; pLoop < pathInfo.end; pLoop++) {\n                                                        target = pathInfo.path[pLoop];\n                                                        // this is a single event registration handler.\n                                                        if (tt[eventId][i][1] == null || matchesSelector(target, tt[eventId][i][1], obj)) {\n                                                            tt[eventId][i][0].apply(target, [ e ]);\n                                                            break;\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            },\n                            clearSingle = function () {\n                                tt.down = false;\n                            },\n                            clearDouble = function () {\n                                tt.taps = 0;\n                            };\n\n                        DefaultHandler(obj, \"mousedown\", down);\n                        DefaultHandler(obj, \"mouseup\", up);\n                    }\n                    // add this child selector (it can be null, that's fine).\n                    obj.__taTapHandler.downSelectors.push(children);\n\n                    obj.__taTapHandler[evt].push([fn, children]);\n                    // the unstore function removes this function from the object's listener list for this type.\n                    fn.__taUnstore = function () {\n                        _d(obj.__taTapHandler[evt], fn);\n                    };\n                }\n            };\n        },\n        meeHelper = function (type, evt, obj, target) {\n            for (var i in obj.__tamee[type]) {\n                if (obj.__tamee[type].hasOwnProperty(i)) {\n                    obj.__tamee[type][i].apply(target, [ evt ]);\n                }\n            }\n        },\n        MouseEnterExitHandler = function () {\n            var activeElements = [];\n            return function (obj, evt, fn, children) {\n                if (!obj.__tamee) {\n                    // __tamee holds a flag saying whether the mouse is currently \"in\" the element, and a list of\n                    // both mouseenter and mouseexit functions.\n                    obj.__tamee = { over: false, mouseenter: [], mouseexit: [] };\n                    // register over and out functions\n                    var over = function (e) {\n                            var t = _t(e);\n                            if ((children == null && (t == obj && !obj.__tamee.over)) || (matchesSelector(t, children, obj) && (t.__tamee == null || !t.__tamee.over))) {\n                                meeHelper(\"mouseenter\", e, obj, t);\n                                t.__tamee = t.__tamee || {};\n                                t.__tamee.over = true;\n                                activeElements.push(t);\n                            }\n                        },\n                        out = function (e) {\n                            var t = _t(e);\n                            // is the current target one of the activeElements? and is the\n                            // related target NOT a descendant of it?\n                            for (var i = 0; i < activeElements.length; i++) {\n                                if (t == activeElements[i] && !matchesSelector((e.relatedTarget || e.toElement), \"*\", t)) {\n                                    t.__tamee.over = false;\n                                    activeElements.splice(i, 1);\n                                    meeHelper(\"mouseexit\", e, obj, t);\n                                }\n                            }\n                        };\n\n                    _bind(obj, \"mouseover\", _curryChildFilter(children, obj, over, \"mouseover\"), over);\n                    _bind(obj, \"mouseout\", _curryChildFilter(children, obj, out, \"mouseout\"), out);\n                }\n\n                fn.__taUnstore = function () {\n                    delete obj.__tamee[evt][fn.__tauid];\n                };\n\n                _store(obj, evt, fn);\n                obj.__tamee[evt][fn.__tauid] = fn;\n            };\n        },\n        isTouchDevice = \"ontouchstart\" in document.documentElement,\n        isMouseDevice = \"onmousedown\" in document.documentElement,\n        touchMap = { \"mousedown\": \"touchstart\", \"mouseup\": \"touchend\", \"mousemove\": \"touchmove\" },\n        touchstart = \"touchstart\", touchend = \"touchend\", touchmove = \"touchmove\",\n        iev = (function () {\n            var rv = -1;\n            if (navigator.appName == 'Microsoft Internet Explorer') {\n                var ua = navigator.userAgent,\n                    re = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n                if (re.exec(ua) != null)\n                    rv = parseFloat(RegExp.$1);\n            }\n            return rv;\n        })(),\n        isIELT9 = iev > -1 && iev < 9,\n        _genLoc = function (e, prefix) {\n            if (e == null) return [ 0, 0 ];\n            var ts = _touches(e), t = _getTouch(ts, 0);\n            return [t[prefix + \"X\"], t[prefix + \"Y\"]];\n        },\n        _pageLocation = function (e) {\n            if (e == null) return [ 0, 0 ];\n            if (isIELT9) {\n                return [ e.clientX + document.documentElement.scrollLeft, e.clientY + document.documentElement.scrollTop ];\n            }\n            else {\n                return _genLoc(e, \"page\");\n            }\n        },\n        _screenLocation = function (e) {\n            return _genLoc(e, \"screen\");\n        },\n        _clientLocation = function (e) {\n            return _genLoc(e, \"client\");\n        },\n        _getTouch = function (touches, idx) {\n            return touches.item ? touches.item(idx) : touches[idx];\n        },\n        _touches = function (e) {\n            return e.touches && e.touches.length > 0 ? e.touches :\n                    e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches :\n                    e.targetTouches && e.targetTouches.length > 0 ? e.targetTouches :\n                [ e ];\n        },\n        _touchCount = function (e) {\n            return _touches(e).length;\n        },\n    //http://www.quirksmode.org/blog/archives/2005/10/_and_the_winner_1.html\n        _bind = function (obj, type, fn, originalFn) {\n            _store(obj, type, fn);\n            originalFn.__tauid = fn.__tauid;\n            if (obj.addEventListener)\n                obj.addEventListener(type, fn, false);\n            else if (obj.attachEvent) {\n                var key = type + fn.__tauid;\n                obj[\"e\" + key] = fn;\n                // TODO look at replacing with .call(..)\n                obj[key] = function () {\n                    obj[\"e\" + key] && obj[\"e\" + key](window.event);\n                };\n                obj.attachEvent(\"on\" + type, obj[key]);\n            }\n        },\n        _unbind = function (obj, type, fn) {\n            if (fn == null) return;\n            _each(obj, function () {\n                var _el = _gel(this);\n                _unstore(_el, type, fn);\n                // it has been bound if there is a tauid. otherwise it was not bound and we can ignore it.\n                if (fn.__tauid != null) {\n                    if (_el.removeEventListener) {\n                        _el.removeEventListener(type, fn, false);\n                        if (isTouchDevice && touchMap[type]) _el.removeEventListener(touchMap[type], fn, false);\n                    }\n                    else if (this.detachEvent) {\n                        var key = type + fn.__tauid;\n                        _el[key] && _el.detachEvent(\"on\" + type, _el[key]);\n                        _el[key] = null;\n                        _el[\"e\" + key] = null;\n                    }\n                }\n\n                // if a touch event was also registered, deregister now.\n                if (fn.__taTouchProxy) {\n                    _unbind(obj, fn.__taTouchProxy[1], fn.__taTouchProxy[0]);\n                }\n            });\n        },\n        _each = function (obj, fn) {\n            if (obj == null) return;\n            // if a list (or list-like), use it. if a string, get a list\n            // by running the string through querySelectorAll. else, assume\n            // it's an Element.\n            // obj.top is \"unknown\" in IE8.\n            obj = (typeof Window !== \"undefined\" && (typeof obj.top !== \"unknown\" && obj == obj.top)) ? [ obj ] :\n                    (typeof obj !== \"string\") && (obj.tagName == null && obj.length != null) ? obj :\n                    typeof obj === \"string\" ? document.querySelectorAll(obj)\n                : [ obj ];\n\n            for (var i = 0; i < obj.length; i++)\n                fn.apply(obj[i]);\n        };\n\n    /**\n     * Mottle offers support for abstracting out the differences\n     * between touch and mouse devices, plus \"smart click\" functionality\n     * (don't fire click if the mouse has moved between mousedown and mouseup),\n     * and synthesized click/tap events.\n     * @class Mottle\n     * @constructor\n     * @param {Object} params Constructor params\n     * @param {Number} [params.clickThreshold=250] Threshold, in milliseconds beyond which a touchstart followed by a touchend is not considered to be a click.\n     * @param {Number} [params.dblClickThreshold=450] Threshold, in milliseconds beyond which two successive tap events are not considered to be a click.\n     * @param {Boolean} [params.smartClicks=false] If true, won't fire click events if the mouse has moved between mousedown and mouseup. Note that this functionality\n     * requires that Mottle consume the mousedown event, and so may not be viable in all use cases.\n     */\n    root.Mottle = function (params) {\n        params = params || {};\n        var clickThreshold = params.clickThreshold || 250,\n            dblClickThreshold = params.dblClickThreshold || 450,\n            mouseEnterExitHandler = new MouseEnterExitHandler(),\n            tapHandler = new TapHandler(clickThreshold, dblClickThreshold),\n            _smartClicks = params.smartClicks,\n            _doBind = function (obj, evt, fn, children) {\n                if (fn == null) return;\n                _each(obj, function () {\n                    var _el = _gel(this);\n                    if (_smartClicks && evt === \"click\")\n                        SmartClickHandler(_el, evt, fn, children);\n                    else if (evt === \"tap\" || evt === \"dbltap\" || evt === \"contextmenu\") {\n                        tapHandler(_el, evt, fn, children);\n                    }\n                    else if (evt === \"mouseenter\" || evt == \"mouseexit\")\n                        mouseEnterExitHandler(_el, evt, fn, children);\n                    else\n                        DefaultHandler(_el, evt, fn, children);\n                });\n            };\n\n        /**\n         * Removes an element from the DOM, and deregisters all event handlers for it. You should use this\n         * to ensure you don't leak memory.\n         * @method remove\n         * @param {String|Element} el Element, or id of the element, to remove.\n         * @return {Mottle} The current Mottle instance; you can chain this method.\n         */\n        this.remove = function (el) {\n            _each(el, function () {\n                var _el = _gel(this);\n                if (_el.__ta) {\n                    for (var evt in _el.__ta) {\n                        if (_el.__ta.hasOwnProperty(evt)) {\n                            for (var h in _el.__ta[evt]) {\n                                if (_el.__ta[evt].hasOwnProperty(h))\n                                    _unbind(_el, evt, _el.__ta[evt][h]);\n                            }\n                        }\n                    }\n                }\n                _el.parentNode && _el.parentNode.removeChild(_el);\n            });\n            return this;\n        };\n\n        /**\n         * Register an event handler, optionally as a delegate for some set of descendant elements. Note\n         * that this method takes either 3 or 4 arguments - if you supply 3 arguments it is assumed you have\n         * omitted the `children` parameter, and that the event handler should be bound directly to the given element.\n         * @method on\n         * @param {Element[]|Element|String} el Either an Element, or a CSS spec for a list of elements, or an array of Elements.\n         * @param {String} [children] Comma-delimited list of selectors identifying allowed children.\n         * @param {String} event Event ID.\n         * @param {Function} fn Event handler function.\n         * @return {Mottle} The current Mottle instance; you can chain this method.\n         */\n        this.on = function (el, event, children, fn) {\n            var _el = arguments[0],\n                _c = arguments.length == 4 ? arguments[2] : null,\n                _e = arguments[1],\n                _f = arguments[arguments.length - 1];\n\n            _doBind(_el, _e, _f, _c);\n            return this;\n        };\n\n        /**\n         * Cancel delegate event handling for the given function. Note that unlike with 'on' you do not supply\n         * a list of child selectors here: it removes event delegation from all of the child selectors for which the\n         * given function was registered (if any).\n         * @method off\n         * @param {Element[]|Element|String} el Element - or ID of element - from which to remove event listener.\n         * @param {String} event Event ID.\n         * @param {Function} fn Event handler function.\n         * @return {Mottle} The current Mottle instance; you can chain this method.\n         */\n        this.off = function (el, event, fn) {\n            _unbind(el, event, fn);\n            return this;\n        };\n\n        /**\n         * Triggers some event for a given element.\n         * @method trigger\n         * @param {Element} el Element for which to trigger the event.\n         * @param {String} event Event ID.\n         * @param {Event} originalEvent The original event. Should be optional of course, but currently is not, due\n         * to the jsPlumb use case that caused this method to be added.\n         * @param {Object} [payload] Optional object to set as `payload` on the generated event; useful for message passing.\n         * @return {Mottle} The current Mottle instance; you can chain this method.\n         */\n        this.trigger = function (el, event, originalEvent, payload) {\n            // MouseEvent undefined in old IE; that's how we know it's a mouse event.  A fine Microsoft paradox.\n            var originalIsMouse = isMouseDevice && (typeof MouseEvent === \"undefined\" || originalEvent == null || originalEvent.constructor === MouseEvent);\n\n            var eventToBind = (isTouchDevice && !isMouseDevice && touchMap[event]) ? touchMap[event] : event,\n                bindingAMouseEvent = !(isTouchDevice && !isMouseDevice && touchMap[event]);\n\n            var pl = _pageLocation(originalEvent), sl = _screenLocation(originalEvent), cl = _clientLocation(originalEvent);\n            _each(el, function () {\n                var _el = _gel(this), evt;\n                originalEvent = originalEvent || {\n                    screenX: sl[0],\n                    screenY: sl[1],\n                    clientX: cl[0],\n                    clientY: cl[1]\n                };\n\n                var _decorate = function (_evt) {\n                    if (payload) _evt.payload = payload;\n                };\n\n                var eventGenerators = {\n                    \"TouchEvent\": function (evt) {\n                        var touch = document.createTouch(window, _el, 0, pl[0], pl[1],\n                            sl[0], sl[1],\n                            cl[0], cl[1],\n                            0, 0, 0, 0);\n\n                        // https://gist.github.com/sstephenson/448808\n                        var touches = document.createTouchList(touch);\n                        var targetTouches = document.createTouchList(touch);\n                        var changedTouches = document.createTouchList(touch);\n                        evt.initTouchEvent(eventToBind, true, true, window, null, sl[0], sl[1],\n                            cl[0], cl[1], false, false, false, false,\n                            touches, targetTouches, changedTouches, 1, 0);\n                    },\n                    \"MouseEvents\": function (evt) {\n                        evt.initMouseEvent(eventToBind, true, true, window, 0,\n                            sl[0], sl[1],\n                            cl[0], cl[1],\n                            false, false, false, false, 1, _el);\n\n                        if (Sniff.android) {\n                            // Android's touch events are not standard.\n                            var t = document.createTouch(window, _el, 0, pl[0], pl[1],\n                                sl[0], sl[1],\n                                cl[0], cl[1],\n                                0, 0, 0, 0);\n\n                            evt.touches = evt.targetTouches = evt.changedTouches = document.createTouchList(t);\n                        }\n                    }\n                };\n\n                if (document.createEvent) {\n\n                    var ite = !bindingAMouseEvent && !originalIsMouse && (isTouchDevice && touchMap[event] && !Sniff.android),\n                        evtName = ite ? \"TouchEvent\" : \"MouseEvents\";\n\n                    evt = document.createEvent(evtName);\n                    eventGenerators[evtName](evt);\n                    _decorate(evt);\n                    _el.dispatchEvent(evt);\n                }\n                else if (document.createEventObject) {\n                    evt = document.createEventObject();\n                    evt.eventType = evt.eventName = eventToBind;\n                    evt.screenX = sl[0];\n                    evt.screenY = sl[1];\n                    evt.clientX = cl[0];\n                    evt.clientY = cl[1];\n                    _decorate(evt);\n                    _el.fireEvent('on' + eventToBind, evt);\n                }\n            });\n            return this;\n        }\n    };\n\n    /**\n     * Static method to assist in 'consuming' an element: uses `stopPropagation` where available, or sets\n     * `e.returnValue=false` where it is not.\n     * @method Mottle.consume\n     * @param {Event} e Event to consume\n     * @param {Boolean} [doNotPreventDefault=false] If true, does not call `preventDefault()` on the event.\n     */\n    root.Mottle.consume = function (e, doNotPreventDefault) {\n        if (e.stopPropagation)\n            e.stopPropagation();\n        else\n            e.returnValue = false;\n\n        if (!doNotPreventDefault && e.preventDefault)\n            e.preventDefault();\n    };\n\n    /**\n     * Gets the page location corresponding to the given event. For touch events this means get the page location of the first touch.\n     * @method Mottle.pageLocation\n     * @param {Event} e Event to get page location for.\n     * @return {Number[]} [left, top] for the given event.\n     */\n    root.Mottle.pageLocation = _pageLocation;\n\n    /**\n     * Forces touch events to be turned \"on\". Useful for testing: even if you don't have a touch device, you can still\n     * trigger a touch event when this is switched on and it will be captured and acted on.\n     * @method setForceTouchEvents\n     * @param {Boolean} value If true, force touch events to be on.\n     */\n    root.Mottle.setForceTouchEvents = function (value) {\n        isTouchDevice = value;\n    };\n\n    /**\n     * Forces mouse events to be turned \"on\". Useful for testing: even if you don't have a mouse, you can still\n     * trigger a mouse event when this is switched on and it will be captured and acted on.\n     * @method setForceMouseEvents\n     * @param {Boolean} value If true, force mouse events to be on.\n     */\n    root.Mottle.setForceMouseEvents = function (value) {\n        isMouseDevice = value;\n    };\n\n}).call(typeof window === \"undefined\" ? this : window);\n\n/**\n drag/drop functionality for use with jsPlumb but with\n no knowledge of jsPlumb. supports multiple scopes (separated by whitespace), dragging\n multiple elements, constrain to parent, drop filters, drag start filters, custom\n css classes.\n\n a lot of the functionality of this script is expected to be plugged in:\n\n addClass\n removeClass\n\n addEvent\n removeEvent\n\n getPosition\n setPosition\n getSize\n\n indexOf\n intersects\n\n the name came from here:\n\n http://mrsharpoblunto.github.io/foswig.js/\n\n copyright 2016 jsPlumb\n */\n\n;(function() {\n\n    \"use strict\";\n    var root = this;\n\n    var _suggest = function(list, item, head) {\n        if (list.indexOf(item) === -1) {\n            head ? list.unshift(item) : list.push(item);\n            return true;\n        }\n        return false;\n    };\n\n    var _vanquish = function(list, item) {\n        var idx = list.indexOf(item);\n        if (idx != -1) list.splice(idx, 1);\n    };\n\n    var _difference = function(l1, l2) {\n        var d = [];\n        for (var i = 0; i < l1.length; i++) {\n            if (l2.indexOf(l1[i]) == -1)\n                d.push(l1[i]);\n        }\n        return d;\n    };\n\n    var _isString = function(f) {\n        return f == null ? false : (typeof f === \"string\" || f.constructor == String);\n    };\n\n    var getOffsetRect = function (elem) {\n        // (1)\n        var box = elem.getBoundingClientRect(),\n            body = document.body,\n            docElem = document.documentElement,\n        // (2)\n            scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop,\n            scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft,\n        // (3)\n            clientTop = docElem.clientTop || body.clientTop || 0,\n            clientLeft = docElem.clientLeft || body.clientLeft || 0,\n        // (4)\n            top  = box.top +  scrollTop - clientTop,\n            left = box.left + scrollLeft - clientLeft;\n\n        return { top: Math.round(top), left: Math.round(left) };\n    };\n\n    var matchesSelector = function(el, selector, ctx) {\n        ctx = ctx || el.parentNode;\n        var possibles = ctx.querySelectorAll(selector);\n        for (var i = 0; i < possibles.length; i++) {\n            if (possibles[i] === el)\n                return true;\n        }\n        return false;\n    };\n\n    var iev = (function() {\n            var rv = -1;\n            if (navigator.appName == 'Microsoft Internet Explorer') {\n                var ua = navigator.userAgent,\n                    re = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n                if (re.exec(ua) != null)\n                    rv = parseFloat(RegExp.$1);\n            }\n            return rv;\n        })(),\n        DEFAULT_GRID_X = 50,\n        DEFAULT_GRID_Y = 50,\n        isIELT9 = iev > -1 && iev < 9,\n        isIE9 = iev == 9,\n        _pl = function(e) {\n            if (isIELT9) {\n                return [ e.clientX + document.documentElement.scrollLeft, e.clientY + document.documentElement.scrollTop ];\n            }\n            else {\n                var ts = _touches(e), t = _getTouch(ts, 0);\n                // for IE9 pageX might be null if the event was synthesized. We try for pageX/pageY first,\n                // falling back to clientX/clientY if necessary. In every other browser we want to use pageX/pageY.\n                return isIE9 ? [t.pageX || t.clientX, t.pageY || t.clientY] : [t.pageX, t.pageY];\n            }\n        },\n        _getTouch = function(touches, idx) { return touches.item ? touches.item(idx) : touches[idx]; },\n        _touches = function(e) {\n            return e.touches && e.touches.length > 0 ? e.touches :\n                    e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches :\n                    e.targetTouches && e.targetTouches.length > 0 ? e.targetTouches :\n                [ e ];\n        },\n        _classes = {\n            draggable:\"katavorio-draggable\",    // draggable elements\n            droppable:\"katavorio-droppable\",    // droppable elements\n            drag : \"katavorio-drag\",            // elements currently being dragged\n            selected:\"katavorio-drag-selected\", // elements in current drag selection\n            active : \"katavorio-drag-active\",   // droppables that are targets of a currently dragged element\n            hover : \"katavorio-drag-hover\",     // droppables over which a matching drag element is hovering\n            noSelect : \"katavorio-drag-no-select\", // added to the body to provide a hook to suppress text selection\n            ghostProxy:\"katavorio-ghost-proxy\"  // added to a ghost proxy element in use when a drag has exited the bounds of its parent.\n        },\n        _defaultScope = \"katavorio-drag-scope\",\n        _events = [ \"stop\", \"start\", \"drag\", \"drop\", \"over\", \"out\", \"beforeStart\" ],\n        _devNull = function() {},\n        _true = function() { return true; },\n        _foreach = function(l, fn, from) {\n            for (var i = 0; i < l.length; i++) {\n                if (l[i] != from)\n                    fn(l[i]);\n            }\n        },\n        _setDroppablesActive = function(dd, val, andHover, drag) {\n            _foreach(dd, function(e) {\n                e.setActive(val);\n                if (val) e.updatePosition();\n                if (andHover) e.setHover(drag, val);\n            });\n        },\n        _each = function(obj, fn) {\n            if (obj == null) return;\n            obj = !_isString(obj) && (obj.tagName == null && obj.length != null) ? obj : [ obj ];\n            for (var i = 0; i < obj.length; i++)\n                fn.apply(obj[i], [ obj[i] ]);\n        },\n        _consume = function(e) {\n            if (e.stopPropagation) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n            else {\n                e.returnValue = false;\n            }\n        },\n        _defaultInputFilterSelector = \"input,textarea,select,button,option\",\n    //\n    // filters out events on all input elements, like textarea, checkbox, input, select.\n        _inputFilter = function(e, el, _katavorio) {\n            var t = e.srcElement || e.target;\n            return !matchesSelector(t, _katavorio.getInputFilterSelector(), el);\n        };\n\n    var Super = function(el, params, css, scope) {\n        this.params = params || {};\n        this.el = el;\n        this.params.addClass(this.el, this._class);\n        this.uuid = _uuid();\n        var enabled = true;\n        this.setEnabled = function(e) { enabled = e; };\n        this.isEnabled = function() { return enabled; };\n        this.toggleEnabled = function() { enabled = !enabled; };\n        this.setScope = function(scopes) {\n            this.scopes = scopes ? scopes.split(/\\s+/) : [ scope ];\n        };\n        this.addScope = function(scopes) {\n            var m = {};\n            _each(this.scopes, function(s) { m[s] = true;});\n            _each(scopes ? scopes.split(/\\s+/) : [], function(s) { m[s] = true;});\n            this.scopes = [];\n            for (var i in m) this.scopes.push(i);\n        };\n        this.removeScope = function(scopes) {\n            var m = {};\n            _each(this.scopes, function(s) { m[s] = true;});\n            _each(scopes ? scopes.split(/\\s+/) : [], function(s) { delete m[s];});\n            this.scopes = [];\n            for (var i in m) this.scopes.push(i);\n        };\n        this.toggleScope = function(scopes) {\n            var m = {};\n            _each(this.scopes, function(s) { m[s] = true;});\n            _each(scopes ? scopes.split(/\\s+/) : [], function(s) {\n                if (m[s]) delete m[s];\n                else m[s] = true;\n            });\n            this.scopes = [];\n            for (var i in m) this.scopes.push(i);\n        };\n        this.setScope(params.scope);\n        this.k = params.katavorio;\n        return params.katavorio;\n    };\n\n    var TRUE = function() { return true; };\n    var FALSE = function() { return false; };\n\n    var Drag = function(el, params, css, scope) {\n        this._class = css.draggable;\n        var k = Super.apply(this, arguments);\n        this.rightButtonCanDrag = this.params.rightButtonCanDrag;\n        var downAt = [0,0], posAtDown = null, pagePosAtDown = null, pageDelta = [0,0], moving = false,\n            consumeStartEvent = this.params.consumeStartEvent !== false,\n            dragEl = this.el,\n            clone = this.params.clone,\n            scroll = this.params.scroll,\n            _multipleDrop = params.multipleDrop !== false,\n            isConstrained = false,\n            useGhostProxy = params.ghostProxy === true ? TRUE : params.ghostProxy && typeof params.ghostProxy === \"function\" ? params.ghostProxy : FALSE,\n            ghostProxy = function(el) { return el.cloneNode(true); };\n\n        var snapThreshold = params.snapThreshold || 5,\n            _snap = function(pos, x, y, thresholdX, thresholdY) {\n                thresholdX = thresholdX || snapThreshold;\n                thresholdY = thresholdY || snapThreshold;\n                var _dx = Math.floor(pos[0] / x),\n                    _dxl = x * _dx,\n                    _dxt = _dxl + x,\n                    _x = Math.abs(pos[0] - _dxl) <= thresholdX ? _dxl : Math.abs(_dxt - pos[0]) <= thresholdX ? _dxt : pos[0];\n\n                var _dy = Math.floor(pos[1] / y),\n                    _dyl = y * _dy,\n                    _dyt = _dyl + y,\n                    _y = Math.abs(pos[1] - _dyl) <= thresholdY ? _dyl : Math.abs(_dyt - pos[1]) <= thresholdY ? _dyt : pos[1];\n\n                return [ _x, _y];\n            };\n\n        this.posses = [];\n        this.posseRoles = {};\n\n        this.toGrid = function(pos) {\n            if (this.params.grid == null) {\n                return pos;\n            }\n            else {\n                return _snap(pos, this.params.grid[0], this.params.grid[1]);\n            }\n        };\n\n        this.snap = function(x, y) {\n            if (dragEl == null) return;\n            x = x || (this.params.grid ? this.params.grid[0] : DEFAULT_GRID_X);\n            y = y || (this.params.grid ? this.params.grid[1] : DEFAULT_GRID_Y);\n            var p = this.params.getPosition(dragEl);\n            this.params.setPosition(dragEl, _snap(p, x, y, x, y));\n        };\n\n        this.setUseGhostProxy = function(val) {\n            useGhostProxy = val ? TRUE : FALSE;\n        };\n\n        var constrain;\n        var negativeFilter = function(pos) {\n            return (params.allowNegative === false) ? [ Math.max (0, pos[0]), Math.max(0, pos[1]) ] : pos;\n        };\n\n        var _setConstrain = function(value) {\n            constrain = typeof value === \"function\" ? value : value ? function(pos) {\n                return negativeFilter([\n                    Math.max(0, Math.min(constrainRect.w - this.size[0], pos[0])),\n                    Math.max(0, Math.min(constrainRect.h - this.size[1], pos[1]))\n                ]);\n            }.bind(this) : function(pos) { return negativeFilter(pos); };\n        }.bind(this);\n\n        _setConstrain(typeof this.params.constrain === \"function\" ? this.params.constrain  : (this.params.constrain || this.params.containment));\n\n\n        /**\n         * Sets whether or not the Drag is constrained. A value of 'true' means constrain to parent bounds; a function\n         * will be executed and returns true if the position is allowed.\n         * @param value\n         */\n        this.setConstrain = function(value) {\n            _setConstrain(value);\n        };\n\n        var revertFunction;\n        /**\n         * Sets a function to call on drag stop, which, if it returns true, indicates that the given element should\n         * revert to its position before the previous drag.\n         * @param fn\n         */\n        this.setRevert = function(fn) {\n            revertFunction = fn;\n        };\n\n        var _assignId = function(obj) {\n                if (typeof obj == \"function\") {\n                    obj._katavorioId = _uuid();\n                    return obj._katavorioId;\n                } else {\n                    return obj;\n                }\n            },\n        // a map of { spec -> [ fn, exclusion ] } entries.\n            _filters = {},\n            _testFilter = function(e) {\n                for (var key in _filters) {\n                    var f = _filters[key];\n                    var rv = f[0](e);\n                    if (f[1]) rv = !rv;\n                    if (!rv) return false;\n                }\n                return true;\n            },\n            _setFilter = this.setFilter = function(f, _exclude) {\n                if (f) {\n                    var key = _assignId(f);\n                    _filters[key] = [\n                        function(e) {\n                            var t = e.srcElement || e.target, m;\n                            if (_isString(f)) {\n                                m = matchesSelector(t, f, el);\n                            }\n                            else if (typeof f === \"function\") {\n                                m = f(e, el);\n                            }\n                            return m;\n                        },\n                            _exclude !== false\n                    ];\n\n                }\n            },\n            _addFilter = this.addFilter = _setFilter,\n            _removeFilter = this.removeFilter = function(f) {\n                var key = typeof f == \"function\" ? f._katavorioId : f;\n                delete _filters[key];\n            };\n\n        this.clearAllFilters = function() {\n            _filters = {};\n        };\n\n        this.canDrag = this.params.canDrag || _true;\n\n        var constrainRect,\n            matchingDroppables = [], intersectingDroppables = [];\n\n        this.downListener = function(e) {\n            var isNotRightClick = this.rightButtonCanDrag || (e.which !== 3 && e.button !== 2);\n            if (isNotRightClick && this.isEnabled() && this.canDrag()) {\n                var _f =  _testFilter(e) && _inputFilter(e, this.el, this.k);\n                if (_f) {\n                    if (!clone)\n                        dragEl = this.el;\n                    else {\n                        dragEl = this.el.cloneNode(true);\n                        dragEl.setAttribute(\"id\", null);\n                        dragEl.style.position = \"absolute\";\n                        // the clone node is added to the body; getOffsetRect gives us a value\n                        // relative to the body.\n                        var b = getOffsetRect(this.el);\n                        dragEl.style.left = b.left + \"px\";\n                        dragEl.style.top = b.top + \"px\";\n                        document.body.appendChild(dragEl);\n                    }\n                    consumeStartEvent && _consume(e);\n                    downAt = _pl(e);\n                    //\n                    this.params.bind(document, \"mousemove\", this.moveListener);\n                    this.params.bind(document, \"mouseup\", this.upListener);\n                    k.markSelection(this);\n                    k.markPosses(this);\n                    this.params.addClass(document.body, css.noSelect);\n                    _dispatch(\"beforeStart\", {el:this.el, pos:posAtDown, e:e, drag:this});\n                }\n                else if (this.params.consumeFilteredEvents) {\n                    _consume(e);\n                }\n            }\n        }.bind(this);\n\n        this.moveListener = function(e) {\n            if (downAt) {\n                if (!moving) {\n                    var _continue = _dispatch(\"start\", {el:this.el, pos:posAtDown, e:e, drag:this});\n                    if (_continue !== false) {\n                        if (!downAt) return;\n                        this.mark(true);\n                        moving = true;\n                    }\n                }\n\n                // it is possible that the start event caused the drag to be aborted. So we check\n                // again that we are currently dragging.\n                if (downAt) {\n                    intersectingDroppables.length = 0;\n                    var pos = _pl(e), dx = pos[0] - downAt[0], dy = pos[1] - downAt[1],\n                        z = this.params.ignoreZoom ? 1 : k.getZoom();\n                    dx /= z;\n                    dy /= z;\n                    this.moveBy(dx, dy, e);\n                    k.updateSelection(dx, dy, this);\n                    k.updatePosses(dx, dy, this);\n                }\n            }\n        }.bind(this);\n\n        this.upListener = function(e) {\n            if (downAt) {\n                downAt = null;\n                this.params.unbind(document, \"mousemove\", this.moveListener);\n                this.params.unbind(document, \"mouseup\", this.upListener);\n                this.params.removeClass(document.body, css.noSelect);\n                this.unmark(e);\n                k.unmarkSelection(this, e);\n                k.unmarkPosses(this, e);\n                this.stop(e);\n                k.notifySelectionDragStop(this, e);\n                k.notifyPosseDragStop(this, e);\n                moving = false;\n                if (clone) {\n                    dragEl && dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n                    dragEl = null;\n                }\n\n                if (revertFunction && revertFunction(this.el, this.params.getPosition(this.el)) === true) {\n                    this.params.setPosition(this.el, posAtDown);\n                    _dispatch(\"revert\", this.el);\n                }\n            }\n        }.bind(this);\n\n        this.getFilters = function() { return _filters; };\n\n        this.abort = function() {\n            if (downAt != null)\n                this.upListener();\n        };\n\n        this.getDragElement = function() {\n            return dragEl || this.el;\n        };\n\n        var listeners = {\"start\":[], \"drag\":[], \"stop\":[], \"over\":[], \"out\":[], \"beforeStart\":[], \"revert\":[] };\n        if (params.events.start) listeners.start.push(params.events.start);\n        if (params.events.beforeStart) listeners.beforeStart.push(params.events.beforeStart);\n        if (params.events.stop) listeners.stop.push(params.events.stop);\n        if (params.events.drag) listeners.drag.push(params.events.drag);\n        if (params.events.revert) listeners.revert.push(params.events.revert);\n\n        this.on = function(evt, fn) {\n            if (listeners[evt]) listeners[evt].push(fn);\n        };\n\n        this.off = function(evt, fn) {\n            if (listeners[evt]) {\n                var l = [];\n                for (var i = 0; i < listeners[evt].length; i++) {\n                    if (listeners[evt][i] !== fn) l.push(listeners[evt][i]);\n                }\n                listeners[evt] = l;\n            }\n        };\n\n        var _dispatch = function(evt, value) {\n            if (listeners[evt]) {\n                for (var i = 0; i < listeners[evt].length; i++) {\n                    try {\n                        listeners[evt][i](value);\n                    }\n                    catch (e) { }\n                }\n            }\n        };\n\n        this.notifyStart = function(e) {\n            _dispatch(\"start\", {el:this.el, pos:this.params.getPosition(dragEl), e:e, drag:this});\n        };\n\n        this.stop = function(e, force) {\n            if (force || moving) {\n                var positions = [],\n                    sel = k.getSelection(),\n                    dPos = this.params.getPosition(dragEl);\n\n                if (sel.length > 1) {\n                    for (var i = 0; i < sel.length; i++) {\n                        var p = this.params.getPosition(sel[i].el);\n                        positions.push([ sel[i].el, { left: p[0], top: p[1] }, sel[i] ]);\n                    }\n                }\n                else {\n                    positions.push([ dragEl, {left:dPos[0], top:dPos[1]}, this ]);\n                }\n\n                _dispatch(\"stop\", {\n                    el: dragEl,\n                    pos: ghostProxyOffsets || dPos,\n                    finalPos:dPos,\n                    e: e,\n                    drag: this,\n                    selection:positions\n                });\n            }\n        };\n\n        this.mark = function(andNotify) {\n            posAtDown = this.params.getPosition(dragEl);\n            pagePosAtDown = this.params.getPosition(dragEl, true);\n            pageDelta = [pagePosAtDown[0] - posAtDown[0], pagePosAtDown[1] - posAtDown[1]];\n            this.size = this.params.getSize(dragEl);\n            matchingDroppables = k.getMatchingDroppables(this);\n            _setDroppablesActive(matchingDroppables, true, false, this);\n            this.params.addClass(dragEl, this.params.dragClass || css.drag);\n            //if (this.params.constrain || this.params.containment) {\n            var cs = this.params.getSize(dragEl.parentNode);\n            constrainRect = { w:cs[0], h:cs[1] };\n            //}\n            if (andNotify) {\n                k.notifySelectionDragStart(this);\n            }\n        };\n        var ghostProxyOffsets;\n        this.unmark = function(e, doNotCheckDroppables) {\n            _setDroppablesActive(matchingDroppables, false, true, this);\n\n\n            if (isConstrained && useGhostProxy(this.el)) {\n                ghostProxyOffsets = [dragEl.offsetLeft, dragEl.offsetTop];\n                this.el.parentNode.removeChild(dragEl);\n                dragEl = this.el;\n            }\n            else {\n                ghostProxyOffsets = null;\n            }\n\n            this.params.removeClass(dragEl, this.params.dragClass || css.drag);\n            matchingDroppables.length = 0;\n            isConstrained = false;\n            if (!doNotCheckDroppables) {\n                if (intersectingDroppables.length > 0 && ghostProxyOffsets) {\n                    params.setPosition(this.el, ghostProxyOffsets);\n                }\n                for (var i = 0; i < intersectingDroppables.length; i++) {\n                    var retVal = intersectingDroppables[i].drop(this, e);\n                    if (retVal === true) break;\n                }\n            }\n        };\n        this.moveBy = function(dx, dy, e) {\n            intersectingDroppables.length = 0;\n            var desiredLoc = this.toGrid([posAtDown[0] + dx, posAtDown[1] + dy]),\n                cPos = constrain(desiredLoc, dragEl);\n\n            if (useGhostProxy(this.el)) {\n                if (desiredLoc[0] != cPos[0] || desiredLoc[1] != cPos[1]) {\n                    if (!isConstrained) {\n                        var gp = ghostProxy(this.el);\n                        params.addClass(gp, _classes.ghostProxy);\n                        this.el.parentNode.appendChild(gp);\n                        dragEl = gp;\n                        isConstrained = true;\n                    }\n                    cPos = desiredLoc;\n                }\n                else {\n                    if (isConstrained) {\n                        this.el.parentNode.removeChild(dragEl);\n                        dragEl = this.el;\n                        isConstrained = false;\n                    }\n                }\n            }\n\n            var rect = { x:cPos[0], y:cPos[1], w:this.size[0], h:this.size[1]},\n                pageRect = { x:rect.x + pageDelta[0], y:rect.y + pageDelta[1], w:rect.w, h:rect.h},\n                focusDropElement = null;\n\n\n\n            this.params.setPosition(dragEl, cPos);\n            for (var i = 0; i < matchingDroppables.length; i++) {\n                var r2 = { x:matchingDroppables[i].pagePosition[0], y:matchingDroppables[i].pagePosition[1], w:matchingDroppables[i].size[0], h:matchingDroppables[i].size[1]};\n                if (this.params.intersects(pageRect, r2) && (_multipleDrop || focusDropElement == null || focusDropElement == matchingDroppables[i].el) && matchingDroppables[i].canDrop(this)) {\n                    if (!focusDropElement) focusDropElement = matchingDroppables[i].el;\n                    intersectingDroppables.push(matchingDroppables[i]);\n                    matchingDroppables[i].setHover(this, true, e);\n                }\n                else if (matchingDroppables[i].isHover()) {\n                    matchingDroppables[i].setHover(this, false, e);\n                }\n            }\n\n            _dispatch(\"drag\", {el:this.el, pos:cPos, e:e, drag:this});\n\n            /* test to see if the parent needs to be scrolled (future)\n             if (scroll) {\n             var pnsl = dragEl.parentNode.scrollLeft, pnst = dragEl.parentNode.scrollTop;\n             console.log(\"scroll!\", pnsl, pnst);\n             }*/\n        };\n        this.destroy = function() {\n            this.params.unbind(this.el, \"mousedown\", this.downListener);\n            this.params.unbind(document, \"mousemove\", this.moveListener);\n            this.params.unbind(document, \"mouseup\", this.upListener);\n            this.downListener = null;\n            this.upListener = null;\n            this.moveListener = null;\n        };\n\n        // init:register mousedown, and perhaps set a filter\n        this.params.bind(this.el, \"mousedown\", this.downListener);\n\n        // if handle provded, use that.  otherwise, try to set a filter.\n        // note that a `handle` selector always results in filterExclude being set to false, ie.\n        // the selector defines the handle element(s).\n        if (this.params.handle)\n            _setFilter(this.params.handle, false);\n        else\n            _setFilter(this.params.filter, this.params.filterExclude);\n    };\n\n    var Drop = function(el, params, css, scope) {\n        this._class = css.droppable;\n        this.params = params || {};\n        this._activeClass = this.params.activeClass || css.active;\n        this._hoverClass = this.params.hoverClass || css.hover;\n        Super.apply(this, arguments);\n        var hover = false;\n        this.allowLoopback = this.params.allowLoopback !== false;\n\n        this.setActive = function(val) {\n            this.params[val ? \"addClass\" : \"removeClass\"](this.el, this._activeClass);\n        };\n\n        this.updatePosition = function() {\n            this.position = this.params.getPosition(this.el);\n            this.pagePosition = this.params.getPosition(this.el, true);\n            this.size = this.params.getSize(this.el);\n        };\n\n        this.canDrop = this.params.canDrop || function(drag) {\n            return true;\n        };\n\n        this.isHover = function() { return hover; };\n\n        this.setHover = function(drag, val, e) {\n            // if turning off hover but this was not the drag that caused the hover, ignore.\n            if (val || this.el._katavorioDragHover == null || this.el._katavorioDragHover == drag.el._katavorio) {\n                this.params[val ? \"addClass\" : \"removeClass\"](this.el, this._hoverClass);\n                //this.el._katavorioDragHover = val ? drag.el._katavorio : null;\n                this.el._katavorioDragHover = val ? drag.el._katavorio : null;\n                if (hover !== val)\n                    this.params.events[val ? \"over\" : \"out\"]({el:this.el, e:e, drag:drag, drop:this});\n                hover = val;\n            }\n        };\n\n        this.drop = function(drag, event) {\n            return this.params.events[\"drop\"]({ drag:drag, e:event, drop:this });\n        };\n\n        this.destroy = function() {\n            this._class = null;\n            this._activeClass = null;\n            this._hoverClass = null;\n            //this.params = null;\n            hover = null;\n            //this.el = null;\n        };\n    };\n\n    var _uuid = function() {\n        return ('xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n            return v.toString(16);\n        }));\n    };\n\n    var _gel = function(el) {\n        if (el == null) return null;\n        el = (typeof el === \"string\" || el.constructor == String)  ? document.getElementById(el) : el;\n        if (el == null) return null;\n        el._katavorio = el._katavorio || _uuid();\n        return el;\n    };\n\n    root.Katavorio = function(katavorioParams) {\n\n        var _selection = [],\n            _selectionMap = {};\n\n        this._dragsByScope = {};\n        this._dropsByScope = {};\n        var _zoom = 1,\n            _reg = function(obj, map) {\n                _each(obj, function(_obj) {\n                    for(var i = 0; i < _obj.scopes.length; i++) {\n                        map[_obj.scopes[i]] = map[_obj.scopes[i]] || [];\n                        map[_obj.scopes[i]].push(_obj);\n                    }\n                });\n            },\n            _unreg = function(obj, map) {\n                var c = 0;\n                _each(obj, function(_obj) {\n                    for(var i = 0; i < _obj.scopes.length; i++) {\n                        if (map[_obj.scopes[i]]) {\n                            var idx = katavorioParams.indexOf(map[_obj.scopes[i]], _obj);\n                            if (idx != -1) {\n                                map[_obj.scopes[i]].splice(idx, 1);\n                                c++;\n                            }\n                        }\n                    }\n                });\n\n                return c > 0 ;\n            },\n            _getMatchingDroppables = this.getMatchingDroppables = function(drag) {\n                var dd = [], _m = {};\n                for (var i = 0; i < drag.scopes.length; i++) {\n                    var _dd = this._dropsByScope[drag.scopes[i]];\n                    if (_dd) {\n                        for (var j = 0; j < _dd.length; j++) {\n                            if (_dd[j].canDrop(drag) &&  !_m[_dd[j].uuid] && (_dd[j].allowLoopback || _dd[j].el !== drag.el)) {\n                                _m[_dd[j].uuid] = true;\n                                dd.push(_dd[j]);\n                            }\n                        }\n                    }\n                }\n                return dd;\n            },\n            _prepareParams = function(p) {\n                p = p || {};\n                var _p = {\n                    events:{}\n                }, i;\n                for (i in katavorioParams) _p[i] = katavorioParams[i];\n                for (i in p) _p[i] = p[i];\n                // events\n\n                for (i = 0; i < _events.length; i++) {\n                    _p.events[_events[i]] = p[_events[i]] || _devNull;\n                }\n                _p.katavorio = this;\n                return _p;\n            }.bind(this),\n            _mistletoe = function(existingDrag, params) {\n                for (var i = 0; i < _events.length; i++) {\n                    if (params[_events[i]]) {\n                        existingDrag.on(_events[i], params[_events[i]]);\n                    }\n                }\n            }.bind(this),\n            _css = {},\n            overrideCss = katavorioParams.css || {},\n            _scope = katavorioParams.scope || _defaultScope;\n\n        // prepare map of css classes based on defaults frst, then optional overrides\n        for (var i in _classes) _css[i] = _classes[i];\n        for (var i in overrideCss) _css[i] = overrideCss[i];\n\n        var inputFilterSelector = katavorioParams.inputFilterSelector || _defaultInputFilterSelector;\n        /**\n         * Gets the selector identifying which input elements to filter from drag events.\n         * @method getInputFilterSelector\n         * @return {String} Current input filter selector.\n         */\n        this.getInputFilterSelector = function() { return inputFilterSelector; };\n\n        /**\n         * Sets the selector identifying which input elements to filter from drag events.\n         * @method setInputFilterSelector\n         * @param {String} selector Input filter selector to set.\n         * @return {Katavorio} Current instance; method may be chained.\n         */\n        this.setInputFilterSelector = function(selector) {\n            inputFilterSelector = selector;\n            return this;\n        };\n\n        this.draggable = function(el, params) {\n            var o = [];\n            _each(el, function(_el) {\n                _el = _gel(_el);\n                if (_el != null) {\n                    if (_el._katavorioDrag == null) {\n                        var p = _prepareParams(params);\n                        _el._katavorioDrag = new Drag(_el, p, _css, _scope);\n                        _reg(_el._katavorioDrag, this._dragsByScope);\n                        o.push(_el._katavorioDrag);\n                        katavorioParams.addClass(_el, _css.draggable);\n                    }\n                    else {\n                        _mistletoe(_el._katavorioDrag, params);\n                    }\n                }\n            }.bind(this));\n            return o;\n\n        };\n\n        this.droppable = function(el, params) {\n            var o = [];\n            _each(el, function(_el) {\n                _el = _gel(_el);\n                if (_el != null) {\n                    var drop = new Drop(_el, _prepareParams(params), _css, _scope);\n                    _el._katavorioDrop = _el._katavorioDrop || [];\n                    _el._katavorioDrop.push(drop);\n                    _reg(drop, this._dropsByScope);\n                    o.push(drop);\n                    katavorioParams.addClass(_el, _css.droppable);\n                }\n            }.bind(this));\n            return o;\n        };\n\n        /**\n         * @name Katavorio#select\n         * @function\n         * @desc Adds an element to the current selection (for multiple node drag)\n         * @param {Element|String} DOM element - or id of the element - to add.\n         */\n        this.select = function(el) {\n            _each(el, function() {\n                var _el = _gel(this);\n                if (_el && _el._katavorioDrag) {\n                    if (!_selectionMap[_el._katavorio]) {\n                        _selection.push(_el._katavorioDrag);\n                        _selectionMap[_el._katavorio] = [ _el, _selection.length - 1 ];\n                        katavorioParams.addClass(_el, _css.selected);\n                    }\n                }\n            });\n            return this;\n        };\n\n        /**\n         * @name Katavorio#deselect\n         * @function\n         * @desc Removes an element from the current selection (for multiple node drag)\n         * @param {Element|String} DOM element - or id of the element - to remove.\n         */\n        this.deselect = function(el) {\n            _each(el, function() {\n                var _el = _gel(this);\n                if (_el && _el._katavorio) {\n                    var e = _selectionMap[_el._katavorio];\n                    if (e) {\n                        var _s = [];\n                        for (var i = 0; i < _selection.length; i++)\n                            if (_selection[i].el !== _el) _s.push(_selection[i]);\n                        _selection = _s;\n                        delete _selectionMap[_el._katavorio];\n                        katavorioParams.removeClass(_el, _css.selected);\n                    }\n                }\n            });\n            return this;\n        };\n\n        this.deselectAll = function() {\n            for (var i in _selectionMap) {\n                var d = _selectionMap[i];\n                katavorioParams.removeClass(d[0], _css.selected);\n            }\n\n            _selection.length = 0;\n            _selectionMap = {};\n        };\n\n        this.markSelection = function(drag) {\n            _foreach(_selection, function(e) { e.mark(); }, drag);\n        };\n\n        this.markPosses = function(drag) {\n            if (drag.posses) {\n                _each(drag.posses, function(p) {\n                    if (drag.posseRoles[p] && _posses[p]) {\n                        _foreach(_posses[p].members, function (d) {\n                            d.mark();\n                        }, drag);\n                    }\n                })\n            }\n        };\n\n        this.unmarkSelection = function(drag, event) {\n            _foreach(_selection, function(e) { e.unmark(event); }, drag);\n        };\n\n        this.unmarkPosses = function(drag, event) {\n            if (drag.posses) {\n                _each(drag.posses, function(p) {\n                    if (drag.posseRoles[p] && _posses[p]) {\n                        _foreach(_posses[p].members, function (d) {\n                            d.unmark(event, true);\n                        }, drag);\n                    }\n                });\n            }\n        };\n\n        this.getSelection = function() { return _selection.slice(0); };\n\n        this.updateSelection = function(dx, dy, drag) {\n            _foreach(_selection, function(e) { e.moveBy(dx, dy); }, drag);\n        };\n\n        var _posseAction = function(fn, drag) {\n            if (drag.posses) {\n                _each(drag.posses, function(p) {\n                    if (drag.posseRoles[p] && _posses[p]) {\n                        _foreach(_posses[p].members, function (e) {\n                            fn(e);\n                        }, drag);\n                    }\n                });\n            }\n        };\n\n        this.updatePosses = function(dx, dy, drag) {\n            _posseAction(function(e) { e.moveBy(dx, dy); }, drag);\n        };\n\n        this.notifyPosseDragStop = function(drag, evt) {\n            _posseAction(function(e) { e.stop(evt, true); }, drag);\n        };\n\n        this.notifySelectionDragStop = function(drag, evt) {\n            _foreach(_selection, function(e) { e.stop(evt, true); }, drag);\n        };\n\n        this.notifySelectionDragStart = function(drag, evt) {\n            _foreach(_selection, function(e) { e.notifyStart(evt);}, drag);\n        };\n\n        this.setZoom = function(z) { _zoom = z; };\n        this.getZoom = function() { return _zoom; };\n\n        // does the work of changing scopes\n        var _scopeManip = function(kObj, scopes, map, fn) {\n            _each(kObj, function(_kObj) {\n                _unreg(_kObj, map);  // deregister existing scopes\n                _kObj[fn](scopes); // set scopes\n                _reg(_kObj, map); // register new ones\n            });\n        };\n\n        _each([ \"set\", \"add\", \"remove\", \"toggle\"], function(v) {\n            this[v + \"Scope\"] = function(el, scopes) {\n                _scopeManip(el._katavorioDrag, scopes, this._dragsByScope, v + \"Scope\");\n                _scopeManip(el._katavorioDrop, scopes, this._dropsByScope, v + \"Scope\");\n            }.bind(this);\n            this[v + \"DragScope\"] = function(el, scopes) {\n                _scopeManip(el.constructor === Drag ? el : el._katavorioDrag, scopes, this._dragsByScope, v + \"Scope\");\n            }.bind(this);\n            this[v + \"DropScope\"] = function(el, scopes) {\n                _scopeManip(el.constructor === Drop ? el : el._katavorioDrop, scopes, this._dropsByScope, v + \"Scope\");\n            }.bind(this);\n        }.bind(this));\n\n        this.snapToGrid = function(x, y) {\n            for (var s in this._dragsByScope) {\n                _foreach(this._dragsByScope[s], function(d) { d.snap(x, y); });\n            }\n        };\n\n        this.getDragsForScope = function(s) { return this._dragsByScope[s]; };\n        this.getDropsForScope = function(s) { return this._dropsByScope[s]; };\n\n        var _destroy = function(el, type, map) {\n            el = _gel(el);\n            if (el[type]) {\n                if (_unreg(el[type], map)) {\n                    _each(el[type], function(kObj) { kObj.destroy() });\n                }\n\n                delete el[type];\n            }\n        };\n\n        this.elementRemoved = function(el) {\n            this.destroyDraggable(el);\n            this.destroyDroppable(el);\n        };\n\n        this.destroyDraggable = function(el) {\n            _destroy(el, \"_katavorioDrag\", this._dragsByScope);\n        };\n\n        this.destroyDroppable = function(el) {\n            _destroy(el, \"_katavorioDrop\", this._dropsByScope);\n        };\n\n        this.reset = function() {\n            this._dragsByScope = {};\n            this._dropsByScope = {};\n            _selection = [];\n            _selectionMap = {};\n            _posses = {};\n        };\n\n        // ----- groups\n        var _posses = {};\n\n        var _processOneSpec = function(el, _spec, dontAddExisting) {\n            var posseId = _isString(_spec) ? _spec : _spec.id;\n            var active = _isString(_spec) ? true : _spec.active !== false;\n            var posse = _posses[posseId] || (function() {\n                var g = {name:posseId, members:[]};\n                _posses[posseId] = g;\n                return g;\n            })();\n            _each(el, function(_el) {\n                if (_el._katavorioDrag) {\n\n                    if (dontAddExisting && _el._katavorioDrag.posseRoles[posse.name] != null) return;\n\n                    _suggest(posse.members, _el._katavorioDrag);\n                    _suggest(_el._katavorioDrag.posses, posse.name);\n                    _el._katavorioDrag.posseRoles[posse.name] = active;\n                }\n            });\n            return posse;\n        };\n\n        /**\n         * Add the given element to the posse with the given id, creating the group if it at first does not exist.\n         * @method addToPosse\n         * @param {Element} el Element to add.\n         * @param {String...|Object...} spec Variable args parameters. Each argument can be a either a String, indicating\n         * the ID of a Posse to which the element should be added as an active participant, or an Object containing\n         * `{ id:\"posseId\", active:false/true}`. In the latter case, if `active` is not provided it is assumed to be\n         * true.\n         * @returns {Posse|Posse[]} The Posse(s) to which the element(s) was/were added.\n         */\n        this.addToPosse = function(el, spec) {\n\n            var posses = [];\n\n            for (var i = 1; i < arguments.length; i++) {\n                posses.push(_processOneSpec(el, arguments[i]));\n            }\n\n            return posses.length == 1 ? posses[0] : posses;\n        };\n\n        /**\n         * Sets the posse(s) for the element with the given id, creating those that do not yet exist, and removing from\n         * the element any current Posses that are not specified by this method call. This method will not change the\n         * active/passive state if it is given a posse in which the element is already a member.\n         * @method setPosse\n         * @param {Element} el Element to set posse(s) on.\n         * @param {String...|Object...} spec Variable args parameters. Each argument can be a either a String, indicating\n         * the ID of a Posse to which the element should be added as an active participant, or an Object containing\n         * `{ id:\"posseId\", active:false/true}`. In the latter case, if `active` is not provided it is assumed to be\n         * true.\n         * @returns {Posse|Posse[]} The Posse(s) to which the element(s) now belongs.\n         */\n        this.setPosse = function(el, spec) {\n\n            var posses = [];\n\n            for (var i = 1; i < arguments.length; i++) {\n                posses.push(_processOneSpec(el, arguments[i], true).name);\n            }\n\n            _each(el, function(_el) {\n                if (_el._katavorioDrag) {\n                    var diff = _difference(_el._katavorioDrag.posses, posses);\n                    var p = [];\n                    Array.prototype.push.apply(p, _el._katavorioDrag.posses);\n                    for (var i = 0; i < diff.length; i++) {\n                        this.removeFromPosse(_el, diff[i]);\n                    }\n                }\n            }.bind(this));\n\n            return posses.length == 1 ? posses[0] : posses;\n        };\n\n        /**\n         * Remove the given element from the given posse(s).\n         * @method removeFromPosse\n         * @param {Element} el Element to remove.\n         * @param {String...} posseId Varargs parameter: one value for each posse to remove the element from.\n         */\n        this.removeFromPosse = function(el, posseId) {\n            if (arguments.length < 2) throw new TypeError(\"No posse id provided for remove operation\");\n            for(var i = 1; i < arguments.length; i++) {\n                posseId = arguments[i];\n                _each(el, function (_el) {\n                    if (_el._katavorioDrag && _el._katavorioDrag.posses) {\n                        var d = _el._katavorioDrag;\n                        _each(posseId, function (p) {\n                            _vanquish(_posses[p].members, d);\n                            _vanquish(d.posses, p);\n                            delete d.posseRoles[p];\n                        });\n                    }\n                });\n            }\n        };\n\n        /**\n         * Remove the given element from all Posses to which it belongs.\n         * @method removeFromAllPosses\n         * @param {Element|Element[]} el Element to remove from Posses.\n         */\n        this.removeFromAllPosses = function(el) {\n            _each(el, function(_el) {\n                if (_el._katavorioDrag && _el._katavorioDrag.posses) {\n                    var d = _el._katavorioDrag;\n                    _each(d.posses, function(p) {\n                        _vanquish(_posses[p].members, d);\n                    });\n                    d.posses.length = 0;\n                    d.posseRoles = {};\n                }\n            });\n        };\n\n        /**\n         * Changes the participation state for the element in the Posse with the given ID.\n         * @param {Element|Element[]} el Element(s) to change state for.\n         * @param {String} posseId ID of the Posse to change element state for.\n         * @param {Boolean} state True to make active, false to make passive.\n         */\n        this.setPosseState = function(el, posseId, state) {\n            var posse = _posses[posseId];\n            if (posse) {\n                _each(el, function(_el) {\n                    if (_el._katavorioDrag && _el._katavorioDrag.posses) {\n                        _el._katavorioDrag.posseRoles[posse.name] = state;\n                    }\n                });\n            }\n        };\n    };\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.1.1\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains utility functions that run in both browsers and headless.\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n\n;\n(function () {\n\n    var _isa = function (a) {\n            return Object.prototype.toString.call(a) === \"[object Array]\";\n        },\n        _isnum = function (n) {\n            return Object.prototype.toString.call(n) === \"[object Number]\";\n        },\n        _iss = function (s) {\n            return typeof s === \"string\";\n        },\n        _isb = function (s) {\n            return typeof s === \"boolean\";\n        },\n        _isnull = function (s) {\n            return s == null;\n        },\n        _iso = function (o) {\n            return o == null ? false : Object.prototype.toString.call(o) === \"[object Object]\";\n        },\n        _isd = function (o) {\n            return Object.prototype.toString.call(o) === \"[object Date]\";\n        },\n        _isf = function (o) {\n            return Object.prototype.toString.call(o) === \"[object Function]\";\n        },\n        _isNamedFunction = function(o) {\n            return _isf(o) && o.name != null && o.name.length > 0;\n        },\n        _ise = function (o) {\n            for (var i in o) {\n                if (o.hasOwnProperty(i)) return false;\n            }\n            return true;\n        };\n\n    var root = this;\n    var exports = root.jsPlumbUtil = {\n        isArray: _isa,\n        isString: _iss,\n        isBoolean: _isb,\n        isNull: _isnull,\n        isObject: _iso,\n        isDate: _isd,\n        isFunction: _isf,\n        isEmpty: _ise,\n        isNumber: _isnum,\n        clone: function (a) {\n            if (_iss(a)) return \"\" + a;\n            else if (_isb(a)) return !!a;\n            else if (_isd(a)) return new Date(a.getTime());\n            else if (_isf(a)) return a;\n            else if (_isa(a)) {\n                var b = [];\n                for (var i = 0; i < a.length; i++)\n                    b.push(this.clone(a[i]));\n                return b;\n            }\n            else if (_iso(a)) {\n                var c = {};\n                for (var j in a)\n                    c[j] = this.clone(a[j]);\n                return c;\n            }\n            else return a;\n        },\n        merge: function (a, b, collations) {\n            // first change the collations array - if present - into a lookup table, because its faster.\n            var cMap = {}, ar, i;\n            collations = collations || [];\n            for (i = 0; i < collations.length; i++)\n                cMap[collations[i]] = true;\n\n            var c = this.clone(a);\n            for (i in b) {\n                if (c[i] == null) {\n                    c[i] = b[i];\n                }\n                else if (_iss(b[i]) || _isb(b[i])) {\n                    if (!cMap[i]) {\n                        c[i] = b[i]; // if we dont want to collate, just copy it in.\n                    }\n                    else {\n                        ar = [];\n                        // if c's object is also an array we can keep its values.\n                        ar.push.apply(ar, _isa(c[i]) ? c[i] : [ c[i] ]);\n                        ar.push.apply(ar, _isa(b[i]) ? b[i] : [ b[i] ]);\n                        c[i] = ar;\n                    }\n                }\n                else {\n                    if (_isa(b[i])) {\n                        ar = [];\n                        // if c's object is also an array we can keep its values.\n                        if (_isa(c[i])) ar.push.apply(ar, c[i]);\n                        ar.push.apply(ar, b[i]);\n                        c[i] = ar;\n                    }\n                    else if (_iso(b[i])) {\n                        // overwite c's value with an object if it is not already one.\n                        if (!_iso(c[i]))\n                            c[i] = {};\n                        for (var j in b[i]) {\n                            c[i][j] = b[i][j];\n                        }\n                    }\n                }\n\n            }\n            return c;\n        },\n        replace: function (inObj, path, value) {\n            if (inObj == null) return;\n            var q = inObj, t = q;\n            path.replace(/([^\\.])+/g, function (term, lc, pos, str) {\n                var array = term.match(/([^\\[0-9]+){1}(\\[)([0-9+])/),\n                    last = pos + term.length >= str.length,\n                    _getArray = function () {\n                        return t[array[1]] || (function () {\n                            t[array[1]] = [];\n                            return t[array[1]];\n                        })();\n                    };\n\n                if (last) {\n                    // set term = value on current t, creating term as array if necessary.\n                    if (array)\n                        _getArray()[array[3]] = value;\n                    else\n                        t[term] = value;\n                }\n                else {\n                    // set to current t[term], creating t[term] if necessary.\n                    if (array) {\n                        var a = _getArray();\n                        t = a[array[3]] || (function () {\n                            a[array[3]] = {};\n                            return a[array[3]];\n                        })();\n                    }\n                    else\n                        t = t[term] || (function () {\n                            t[term] = {};\n                            return t[term];\n                        })();\n                }\n            });\n\n            return inObj;\n        },\n        //\n        // chain a list of functions, supplied by [ object, method name, args ], and return on the first\n        // one that returns the failValue. if none return the failValue, return the successValue.\n        //\n        functionChain: function (successValue, failValue, fns) {\n            for (var i = 0; i < fns.length; i++) {\n                var o = fns[i][0][fns[i][1]].apply(fns[i][0], fns[i][2]);\n                if (o === failValue) {\n                    return o;\n                }\n            }\n            return successValue;\n        },\n        // take the given model and expand out any parameters.\n        // 'functionPrefix' is optional, and if present, helps jsplumb figure out what to do if a value is a Function.\n        // if you do not provide it, jsplumb will run the given values through any functions it finds, and use the function's\n        // output as the value in the result. if you do provide the prefix, only functions that are named and have this prefix\n        // will be executed; other functions will be passed as values to the output.\n        populate: function (model, values, functionPrefix) {\n            // for a string, see if it has parameter matches, and if so, try to make the substitutions.\n            var getValue = function (fromString) {\n                    var matches = fromString.match(/(\\${.*?})/g);\n                    if (matches != null) {\n                        for (var i = 0; i < matches.length; i++) {\n                            var val = values[matches[i].substring(2, matches[i].length - 1)] || \"\";\n                            if (val != null) {\n                                fromString = fromString.replace(matches[i], val);\n                            }\n                        }\n                    }\n                    return fromString;\n                },\n            // process one entry.\n                _one = function (d) {\n                    if (d != null) {\n                        if (_iss(d)) {\n                            return getValue(d);\n                        }\n                        else if (_isf(d) && (functionPrefix == null || (d.name || \"\").indexOf(functionPrefix) === 0)) {\n                            return d(values);\n                        }\n                        else if (_isa(d)) {\n                            var r = [];\n                            for (var i = 0; i < d.length; i++)\n                                r.push(_one(d[i]));\n                            return r;\n                        }\n                        else if (_iso(d)) {\n                            var s = {};\n                            for (var j in d) {\n                                s[j] = _one(d[j]);\n                            }\n                            return s;\n                        }\n                        else {\n                            return d;\n                        }\n                    }\n                };\n\n            return _one(model);\n        },\n        findWithFunction: function (a, f) {\n            if (a)\n                for (var i = 0; i < a.length; i++) if (f(a[i])) return i;\n            return -1;\n        },\n        removeWithFunction: function (a, f) {\n            var idx = exports.findWithFunction(a, f);\n            if (idx > -1) a.splice(idx, 1);\n            return idx != -1;\n        },\n        remove: function (l, v) {\n            var idx = l.indexOf(v);\n            if (idx > -1) l.splice(idx, 1);\n            return idx != -1;\n        },\n        // TODO support insert index\n        addWithFunction: function (list, item, hashFunction) {\n            if (exports.findWithFunction(list, hashFunction) == -1) list.push(item);\n        },\n        addToList: function (map, key, value, insertAtStart) {\n            var l = map[key];\n            if (l == null) {\n                l = [];\n                map[key] = l;\n            }\n            l[insertAtStart ? \"unshift\" : \"push\"](value);\n            return l;\n        },\n        suggest : function(list, item, insertAtHead) {\n            if (list.indexOf(item) === -1) {\n                if (insertAtHead) {\n                    list.unshift(item);\n                } else {\n                    list.push(item);\n                }\n                return true;\n            }\n            return false;\n        },\n        //\n        // extends the given obj (which can be an array) with the given constructor function, prototype functions, and\n        // class members, any of which may be null.\n        //\n        extend: function (child, parent, _protoFn) {\n            var i;\n            parent = _isa(parent) ? parent : [ parent ];\n\n            for (i = 0; i < parent.length; i++) {\n                for (var j in parent[i].prototype) {\n                    if (parent[i].prototype.hasOwnProperty(j)) {\n                        child.prototype[j] = parent[i].prototype[j];\n                    }\n                }\n            }\n\n            var _makeFn = function (name, protoFn) {\n                return function () {\n                    for (i = 0; i < parent.length; i++) {\n                        if (parent[i].prototype[name])\n                            parent[i].prototype[name].apply(this, arguments);\n                    }\n                    return protoFn.apply(this, arguments);\n                };\n            };\n\n            var _oneSet = function (fns) {\n                for (var k in fns) {\n                    child.prototype[k] = _makeFn(k, fns[k]);\n                }\n            };\n\n            if (arguments.length > 2) {\n                for (i = 2; i < arguments.length; i++)\n                    _oneSet(arguments[i]);\n            }\n\n            return child;\n        },\n        uuid: function () {\n            return ('xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n                return v.toString(16);\n            }));\n        },\n        logEnabled: true,\n        log: function () {\n            if (exports.logEnabled && typeof console != \"undefined\") {\n                try {\n                    var msg = arguments[arguments.length - 1];\n                    console.log(msg);\n                }\n                catch (e) {\n                }\n            }\n        },\n\n        /**\n         * Wraps one function with another, creating a placeholder for the\n         * wrapped function if it was null. this is used to wrap the various\n         * drag/drop event functions - to allow jsPlumb to be notified of\n         * important lifecycle events without imposing itself on the user's\n         * drag/drop functionality.\n         * @method jsPlumbUtil.wrap\n         * @param {Function} wrappedFunction original function to wrap; may be null.\n         * @param {Function} newFunction function to wrap the original with.\n         * @param {Object} [returnOnThisValue] Optional. Indicates that the wrappedFunction should\n         * not be executed if the newFunction returns a value matching 'returnOnThisValue'.\n         * note that this is a simple comparison and only works for primitives right now.\n         */\n        wrap: function (wrappedFunction, newFunction, returnOnThisValue) {\n            wrappedFunction = wrappedFunction || function () {\n            };\n            newFunction = newFunction || function () {\n            };\n            return function () {\n                var r = null;\n                try {\n                    r = newFunction.apply(this, arguments);\n                } catch (e) {\n                    exports.log(\"jsPlumb function failed : \" + e);\n                }\n                if (returnOnThisValue == null || (r !== returnOnThisValue)) {\n                    try {\n                        r = wrappedFunction.apply(this, arguments);\n                    } catch (e) {\n                        exports.log(\"wrapped function failed : \" + e);\n                    }\n                }\n                return r;\n            };\n        }\n    };\n\n    exports.EventGenerator = function () {\n        var _listeners = {},\n            eventsSuspended = false,\n        // this is a list of events that should re-throw any errors that occur during their dispatch. it is current private.\n            eventsToDieOn = { \"ready\": true };\n\n        this.bind = function (event, listener, insertAtStart) {\n            var _one = function(evt) {\n                exports.addToList(_listeners, evt, listener, insertAtStart);\n                listener.__jsPlumb = listener.__jsPlumb || {};\n                listener.__jsPlumb[root.jsPlumbUtil.uuid()] = evt;\n            };\n\n            if (typeof event === \"string\") _one(event);\n            else if (event.length != null) {\n                for (var i = 0; i < event.length; i++) {\n                    _one(event[i]);\n                }\n            }\n\n            return this;\n        };\n\n        this.fire = function (event, value, originalEvent) {\n            if (!eventsSuspended && _listeners[event]) {\n                var l = _listeners[event].length, i = 0, _gone = false, ret = null;\n                if (!this.shouldFireEvent || this.shouldFireEvent(event, value, originalEvent)) {\n                    while (!_gone && i < l && ret !== false) {\n                        // doing it this way rather than catching and then possibly re-throwing means that an error propagated by this\n                        // method will have the whole call stack available in the debugger.\n                        if (eventsToDieOn[event])\n                            _listeners[event][i].apply(this, [ value, originalEvent]);\n                        else {\n                            try {\n                                ret = _listeners[event][i].apply(this, [ value, originalEvent ]);\n                            } catch (e) {\n                                exports.log(\"jsPlumb: fire failed for event \" + event + \" : \" + e);\n                            }\n                        }\n                        i++;\n                        if (_listeners == null || _listeners[event] == null)\n                            _gone = true;\n                    }\n                }\n            }\n            return this;\n        };\n\n        this.unbind = function (eventOrListener, listener) {\n\n            if (arguments.length === 0) {\n                _listeners = {};\n            }\n            else if (arguments.length === 1) {\n                if (typeof eventOrListener === \"string\")\n                    delete _listeners[eventOrListener];\n                else if (eventOrListener.__jsPlumb) {\n                    var evt;\n                    for (var i in eventOrListener.__jsPlumb) {\n                        evt = eventOrListener.__jsPlumb[i];\n                        exports.remove(_listeners[evt] || [], eventOrListener);\n                    }\n                }\n            }\n            else if (arguments.length === 2) {\n                exports.remove(_listeners[eventOrListener] || [], listener);\n            }\n\n            return this;\n        };\n\n        this.getListener = function (forEvent) {\n            return _listeners[forEvent];\n        };\n        this.setSuspendEvents = function (val) {\n            eventsSuspended = val;\n        };\n        this.isSuspendEvents = function () {\n            return eventsSuspended;\n        };\n        this.silently = function(fn) {\n            this.setSuspendEvents(true);\n            try {\n                fn();\n            }\n            catch (e) {\n                root.jsPlumbUtil.log(\"Cannot execute silent function \" + e);\n            }\n            this.setSuspendEvents(false);\n        };\n        this.cleanupListeners = function () {\n            for (var i in _listeners) {\n                _listeners[i] = null;\n            }\n        };\n    };\n\n    exports.EventGenerator.prototype = {\n        cleanup: function () {\n            this.cleanupListeners();\n        }\n    };\n\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.1.1\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains utility functions that run in browsers only.\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n ;(function() {\n\n  \"use strict\";\n\n   var root = this;\n   var exports = root.jsPlumbUtil;\n\n   exports.matchesSelector = function(el, selector, ctx) {\n       ctx = ctx || el.parentNode;\n       var possibles = ctx.querySelectorAll(selector);\n       for (var i = 0; i < possibles.length; i++) {\n           if (possibles[i] === el)\n               return true;\n       }\n       return false;\n   };\n\n   exports.consume = function(e, doNotPreventDefault) {\n       if (e.stopPropagation)\n           e.stopPropagation();\n       else\n           e.returnValue = false;\n\n       if (!doNotPreventDefault && e.preventDefault)\n            e.preventDefault();\n   };\n\n   /*\n    * Function: sizeElement\n    * Helper to size and position an element. You would typically use\n    * this when writing your own Connector or Endpoint implementation.\n    *\n    * Parameters:\n    *  x - [int] x position for the element origin\n    *  y - [int] y position for the element origin\n    *  w - [int] width of the element\n    *  h - [int] height of the element\n    *\n    */\n   exports.sizeElement = function(el, x, y, w, h) {\n       if (el) {\n           el.style.height = h + \"px\";\n           el.height = h;\n           el.style.width = w + \"px\";\n           el.width = w;\n           el.style.left = x + \"px\";\n           el.style.top = y + \"px\";\n       }\n   };\n\n\n }).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.1.1\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the core code.\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n(function () {\n\n    \"use strict\";\n\n    var root = this;\n    var connectorTypes = [], rendererTypes;\n\n    var _ju = root.jsPlumbUtil,\n        _getOffset = function (el, _instance, relativeToRoot) {\n            return _instance.getOffset(el, relativeToRoot);\n        },\n\n        /**\n         * creates a timestamp, using milliseconds since 1970, but as a string.\n         */\n        _timestamp = function () {\n            return \"\" + (new Date()).getTime();\n        },\n\n    // helper method to update the hover style whenever it, or paintStyle, changes.\n    // we use paintStyle as the foundation and merge hoverPaintStyle over the\n    // top.\n        _updateHoverStyle = function (component) {\n            if (component._jsPlumb.paintStyle && component._jsPlumb.hoverPaintStyle) {\n                var mergedHoverStyle = {};\n                jsPlumb.extend(mergedHoverStyle, component._jsPlumb.paintStyle);\n                jsPlumb.extend(mergedHoverStyle, component._jsPlumb.hoverPaintStyle);\n                delete component._jsPlumb.hoverPaintStyle;\n                // we want the fillStyle of paintStyle to override a gradient, if possible.\n                if (mergedHoverStyle.gradient && component._jsPlumb.paintStyle.fillStyle)\n                    delete mergedHoverStyle.gradient;\n                component._jsPlumb.hoverPaintStyle = mergedHoverStyle;\n            }\n        },\n        events = [\"tap\", \"dbltap\", \"click\", \"dblclick\", \"mouseover\", \"mouseout\", \"mousemove\", \"mousedown\", \"mouseup\", \"contextmenu\" ],\n        eventFilters = { \"mouseout\": \"mouseleave\", \"mouseexit\": \"mouseleave\" },\n        _updateAttachedElements = function (component, state, timestamp, sourceElement) {\n            var affectedElements = component.getAttachedElements();\n            if (affectedElements) {\n                for (var i = 0, j = affectedElements.length; i < j; i++) {\n                    if (!sourceElement || sourceElement != affectedElements[i])\n                        affectedElements[i].setHover(state, true, timestamp);            // tell the attached elements not to inform their own attached elements.\n                }\n            }\n        },\n        _splitType = function (t) {\n            return t == null ? null : t.split(\" \");\n        },\n        _mapType = function(map, obj, typeId) {\n            for (var i in obj)\n                map[i] = typeId;\n        },\n        _each = function(fn, obj) {\n            obj = _ju.isArray(obj) || (obj.length != null && !_ju.isString(obj)) ? obj : [ obj ];\n            for (var i = 0; i < obj.length; i++) {\n                try {\n                    fn.apply(obj[i], [ obj[i] ]);\n                }\n                catch (e) {\n                    _ju.log(\".each iteration failed : \" + e);\n                }\n            }\n        },\n        _applyTypes = function (component, params, doNotRepaint) {\n            if (component.getDefaultType) {\n                var td = component.getTypeDescriptor(), map = {};\n                var defType = component.getDefaultType();\n                var o = _ju.merge({}, defType);\n                _mapType(map, defType, \"__default\");\n                for (var i = 0, j = component._jsPlumb.types.length; i < j; i++) {\n                    var tid = component._jsPlumb.types[i];\n                    if (tid !== \"__default\") {\n                        var _t = component._jsPlumb.instance.getType(tid, td);\n                        if (_t != null) {\n                            o = _ju.merge(o, _t, [ \"cssClass\" ]);\n                            _mapType(map, _t, tid);\n                        }\n                    }\n                }\n\n                if (params) {\n                    o = _ju.populate(o, params, \"_\");\n                }\n\n                component.applyType(o, doNotRepaint, map);\n                if (!doNotRepaint) component.repaint();\n            }\n        },\n\n// ------------------------------ BEGIN jsPlumbUIComponent --------------------------------------------\n\n        jsPlumbUIComponent = root.jsPlumbUIComponent = function (params) {\n\n            _ju.EventGenerator.apply(this, arguments);\n\n            var self = this,\n                a = arguments,\n                idPrefix = self.idPrefix,\n                id = idPrefix + (new Date()).getTime();\n\n            this._jsPlumb = {\n                instance: params._jsPlumb,\n                parameters: params.parameters || {},\n                paintStyle: null,\n                hoverPaintStyle: null,\n                paintStyleInUse: null,\n                hover: false,\n                beforeDetach: params.beforeDetach,\n                beforeDrop: params.beforeDrop,\n                overlayPlacements: [],\n                hoverClass: params.hoverClass || params._jsPlumb.Defaults.HoverClass,\n                types: [],\n                typeCache:{}\n            };\n\n            this.cacheTypeItem = function(key, item, typeId) {\n                this._jsPlumb.typeCache[typeId] = this._jsPlumb.typeCache[typeId] || {};\n                this._jsPlumb.typeCache[typeId][key] = item;\n            };\n            this.getCachedTypeItem = function(key, typeId) {\n                return this._jsPlumb.typeCache[typeId] ? this._jsPlumb.typeCache[typeId][key] : null;\n            };\n\n            this.getId = function () {\n                return id;\n            };\n\n// ----------------------------- default type --------------------------------------------\n\n\n            var o = params.overlays || [], oo = {};\n            if (this.defaultOverlayKeys) {\n                for (var i = 0; i < this.defaultOverlayKeys.length; i++)\n                    Array.prototype.push.apply(o, this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[i]] || []);\n\n                for (i = 0; i < o.length; i++) {\n                    // if a string, convert to object representation so that we can store the typeid on it.\n                    // also assign an id.\n                    var fo = jsPlumb.convertToFullOverlaySpec(o[i]);\n                    oo[fo[1].id] = fo;\n                }\n            }\n\n            var _defaultType = {\n                overlays:oo,\n                parameters: params.parameters || {},\n                scope: params.scope || this._jsPlumb.instance.getDefaultScope()\n            };\n            this.getDefaultType = function() {\n                return _defaultType;\n            };\n            this.appendToDefaultType = function(obj) {\n                for (var i in obj) _defaultType[i] = obj[i];\n            };\n\n// ----------------------------- end default type --------------------------------------------\n\n            // all components can generate events\n\n            if (params.events) {\n                for (i in params.events)\n                    self.bind(i, params.events[i]);\n            }\n\n            // all components get this clone function.\n            // TODO issue 116 showed a problem with this - it seems 'a' that is in\n            // the clone function's scope is shared by all invocations of it, the classic\n            // JS closure problem.  for now, jsPlumb does a version of this inline where\n            // it used to call clone.  but it would be nice to find some time to look\n            // further at this.\n            this.clone = function () {\n                var o = Object.create(this.constructor.prototype);\n                this.constructor.apply(o, a);\n                return o;\n            }.bind(this);\n\n            // user can supply a beforeDetach callback, which will be executed before a detach\n            // is performed; returning false prevents the detach.\n            this.isDetachAllowed = function (connection) {\n                var r = true;\n                if (this._jsPlumb.beforeDetach) {\n                    try {\n                        r = this._jsPlumb.beforeDetach(connection);\n                    }\n                    catch (e) {\n                        _ju.log(\"jsPlumb: beforeDetach callback failed\", e);\n                    }\n                }\n                return r;\n            };\n\n            // user can supply a beforeDrop callback, which will be executed before a dropped\n            // connection is confirmed. user can return false to reject connection.\n            this.isDropAllowed = function (sourceId, targetId, scope, connection, dropEndpoint, source, target) {\n                var r = this._jsPlumb.instance.checkCondition(\"beforeDrop\", {\n                    sourceId: sourceId,\n                    targetId: targetId,\n                    scope: scope,\n                    connection: connection,\n                    dropEndpoint: dropEndpoint,\n                    source: source, target: target\n                });\n                if (this._jsPlumb.beforeDrop) {\n                    try {\n                        r = this._jsPlumb.beforeDrop({\n                            sourceId: sourceId,\n                            targetId: targetId,\n                            scope: scope,\n                            connection: connection,\n                            dropEndpoint: dropEndpoint,\n                            source: source, target: target\n                        });\n                    }\n                    catch (e) {\n                        _ju.log(\"jsPlumb: beforeDrop callback failed\", e);\n                    }\n                }\n                return r;\n            };\n\n            var boundListeners = [],\n                bindAListener = function (obj, type, fn) {\n                    boundListeners.push([obj, type, fn]);\n                    obj.bind(type, fn);\n                },\n                domListeners = [];\n\n            // sets the component associated with listener events. for instance, an overlay delegates\n            // its events back to a connector. but if the connector is swapped on the underlying connection,\n            // then this component must be changed. This is called by setConnector in the Connection class.\n            this.setListenerComponent = function (c) {\n                for (var i = 0; i < domListeners.length; i++)\n                    domListeners[i][3] = c;\n            };\n\n\n        };\n\n    var _removeTypeCssHelper = function (component, typeIndex) {\n        var typeId = component._jsPlumb.types[typeIndex],\n            type = component._jsPlumb.instance.getType(typeId, component.getTypeDescriptor());\n\n        if (type != null) {\n\n            if (type.cssClass && component.canvas)\n                component._jsPlumb.instance.removeClass(component.canvas, type.cssClass);\n        }\n    };\n\n    _ju.extend(root.jsPlumbUIComponent, _ju.EventGenerator, {\n\n        getParameter: function (name) {\n            return this._jsPlumb.parameters[name];\n        },\n\n        setParameter: function (name, value) {\n            this._jsPlumb.parameters[name] = value;\n        },\n\n        getParameters: function () {\n            return this._jsPlumb.parameters;\n        },\n\n        setParameters: function (p) {\n            this._jsPlumb.parameters = p;\n        },\n\n        getClass:function() {\n            return jsPlumb.getClass(this.canvas);\n        },\n\n        hasClass:function(clazz) {\n            return jsPlumb.hasClass(this.canvas, clazz);\n        },\n\n        addClass: function (clazz) {\n            jsPlumb.addClass(this.canvas, clazz);\n        },\n\n        removeClass: function (clazz) {\n            jsPlumb.removeClass(this.canvas, clazz);\n        },\n\n        updateClasses: function (classesToAdd, classesToRemove) {\n            jsPlumb.updateClasses(this.canvas, classesToAdd, classesToRemove);\n        },\n\n        setType: function (typeId, params, doNotRepaint) {\n            this.clearTypes();\n            this._jsPlumb.types = _splitType(typeId) || [];\n            _applyTypes(this, params, doNotRepaint);\n        },\n\n        getType: function () {\n            return this._jsPlumb.types;\n        },\n\n        reapplyTypes: function (params, doNotRepaint) {\n            _applyTypes(this, params, doNotRepaint);\n        },\n\n        hasType: function (typeId) {\n            return this._jsPlumb.types.indexOf(typeId) != -1;\n        },\n\n        addType: function (typeId, params, doNotRepaint) {\n            var t = _splitType(typeId), _cont = false;\n            if (t != null) {\n                for (var i = 0, j = t.length; i < j; i++) {\n                    if (!this.hasType(t[i])) {\n                        this._jsPlumb.types.push(t[i]);\n                        _cont = true;\n                    }\n                }\n                if (_cont) _applyTypes(this, params, doNotRepaint);\n            }\n        },\n\n        removeType: function (typeId, params, doNotRepaint) {\n            var t = _splitType(typeId), _cont = false, _one = function (tt) {\n                var idx = this._jsPlumb.types.indexOf(tt);\n                if (idx != -1) {\n                    // remove css class if necessary\n                    _removeTypeCssHelper(this, idx);\n                    this._jsPlumb.types.splice(idx, 1);\n                    return true;\n                }\n                return false;\n            }.bind(this);\n\n            if (t != null) {\n                for (var i = 0, j = t.length; i < j; i++) {\n                    _cont = _one(t[i]) || _cont;\n                }\n                if (_cont) _applyTypes(this, params, doNotRepaint);\n            }\n        },\n        clearTypes: function (params, doNotRepaint) {\n            var i = this._jsPlumb.types.length;\n            for (var j = 0; j < i; j++) {\n                _removeTypeCssHelper(this, 0);\n                this._jsPlumb.types.splice(0, 1);\n            }\n            _applyTypes(this, params, doNotRepaint);\n        },\n\n        toggleType: function (typeId, params, doNotRepaint) {\n            var t = _splitType(typeId);\n            if (t != null) {\n                for (var i = 0, j = t.length; i < j; i++) {\n                    var idx = this._jsPlumb.types.indexOf(t[i]);\n                    if (idx != -1) {\n                        _removeTypeCssHelper(this, idx);\n                        this._jsPlumb.types.splice(idx, 1);\n                    }\n                    else\n                        this._jsPlumb.types.push(t[i]);\n                }\n\n                _applyTypes(this, params, doNotRepaint);\n            }\n        },\n        applyType: function (t, doNotRepaint) {\n            this.setPaintStyle(t.paintStyle, doNotRepaint);\n            this.setHoverPaintStyle(t.hoverPaintStyle, doNotRepaint);\n            if (t.parameters) {\n                for (var i in t.parameters)\n                    this.setParameter(i, t.parameters[i]);\n            }\n            this._jsPlumb.paintStyleInUse = this.getPaintStyle();\n        },\n        setPaintStyle: function (style, doNotRepaint) {\n//                this._jsPlumb.paintStyle = jsPlumb.extend({}, style);\n// TODO figure out if we want components to clone paintStyle so as not to share it.\n            this._jsPlumb.paintStyle = style;\n            this._jsPlumb.paintStyleInUse = this._jsPlumb.paintStyle;\n            _updateHoverStyle(this);\n            if (!doNotRepaint) this.repaint();\n        },\n        getPaintStyle: function () {\n            return this._jsPlumb.paintStyle;\n        },\n        setHoverPaintStyle: function (style, doNotRepaint) {\n            //this._jsPlumb.hoverPaintStyle = jsPlumb.extend({}, style);\n// TODO figure out if we want components to clone paintStyle so as not to share it.                \n            this._jsPlumb.hoverPaintStyle = style;\n            _updateHoverStyle(this);\n            if (!doNotRepaint) this.repaint();\n        },\n        getHoverPaintStyle: function () {\n            return this._jsPlumb.hoverPaintStyle;\n        },\n        destroy: function (force) {\n            if (force || this.typeId == null) {\n                this.cleanupListeners(); // this is on EventGenerator\n                this.clone = null;\n                this._jsPlumb = null;\n            }\n        },\n\n        isHover: function () {\n            return this._jsPlumb.hover;\n        },\n\n        setHover: function (hover, ignoreAttachedElements, timestamp) {\n            // while dragging, we ignore these events.  this keeps the UI from flashing and\n            // swishing and whatevering.\n            if (this._jsPlumb && !this._jsPlumb.instance.currentlyDragging && !this._jsPlumb.instance.isHoverSuspended()) {\n\n                this._jsPlumb.hover = hover;\n\n                if (this.canvas != null) {\n                    if (this._jsPlumb.instance.hoverClass != null) {\n                        var method = hover ? \"addClass\" : \"removeClass\";\n                        this._jsPlumb.instance[method](this.canvas, this._jsPlumb.instance.hoverClass);\n                    }\n                    if (this._jsPlumb.hoverClass != null) {\n                        this._jsPlumb.instance[method](this.canvas, this._jsPlumb.hoverClass);\n                    }\n                }\n                if (this._jsPlumb.hoverPaintStyle != null) {\n                    this._jsPlumb.paintStyleInUse = hover ? this._jsPlumb.hoverPaintStyle : this._jsPlumb.paintStyle;\n                    if (!this._jsPlumb.instance.isSuspendDrawing()) {\n                        timestamp = timestamp || _timestamp();\n                        this.repaint({timestamp: timestamp, recalc: false});\n                    }\n                }\n                // get the list of other affected elements, if supported by this component.\n                // for a connection, its the endpoints.  for an endpoint, its the connections! surprise.\n                if (this.getAttachedElements && !ignoreAttachedElements)\n                    _updateAttachedElements(this, hover, _timestamp(), this);\n            }\n        }\n    });\n\n// ------------------------------ END jsPlumbUIComponent --------------------------------------------\n\n    var _jsPlumbInstanceIndex = 0,\n        getInstanceIndex = function () {\n            var i = _jsPlumbInstanceIndex + 1;\n            _jsPlumbInstanceIndex++;\n            return i;\n        };\n\n    var jsPlumbInstance = root.jsPlumbInstance = function (_defaults) {\n\n        this.Defaults = {\n            Anchor: \"Bottom\",\n            Anchors: [ null, null ],\n            ConnectionsDetachable: true,\n            ConnectionOverlays: [ ],\n            Connector: \"Bezier\",\n            Container: null,\n            DoNotThrowErrors: false,\n            DragOptions: { },\n            DropOptions: { },\n            Endpoint: \"Dot\",\n            EndpointOverlays: [ ],\n            Endpoints: [ null, null ],\n            EndpointStyle: { fillStyle: \"#456\" },\n            EndpointStyles: [ null, null ],\n            EndpointHoverStyle: null,\n            EndpointHoverStyles: [ null, null ],\n            HoverPaintStyle: null,\n            LabelStyle: { color: \"black\" },\n            LogEnabled: false,\n            Overlays: [ ],\n            MaxConnections: 1,\n            PaintStyle: { lineWidth: 4, strokeStyle: \"#456\" },\n            ReattachConnections: false,\n            RenderMode: \"svg\",\n            Scope: \"jsPlumb_DefaultScope\"\n        };\n        if (_defaults) jsPlumb.extend(this.Defaults, _defaults);\n\n        this.logEnabled = this.Defaults.LogEnabled;\n        this._connectionTypes = {};\n        this._endpointTypes = {};\n\n        _ju.EventGenerator.apply(this);\n\n        var _currentInstance = this,\n            _instanceIndex = getInstanceIndex(),\n            _bb = _currentInstance.bind,\n            _initialDefaults = {},\n            _zoom = 1,\n            _info = function (el) {\n                if (el == null) return null;\n                else if (el.nodeType == 3 || el.nodeType == 8) {\n                    return { el:el, text:true };\n                }\n                else {\n                    var _el = _currentInstance.getElement(el);\n                    return { el: _el, id: (_ju.isString(el) && _el == null) ? el : _getId(_el) };\n                }\n            };\n\n        this.getInstanceIndex = function () {\n            return _instanceIndex;\n        };\n\n        this.setZoom = function (z, repaintEverything) {\n            _zoom = z;\n            _currentInstance.fire(\"zoom\", _zoom);\n            if (repaintEverything) _currentInstance.repaintEverything();\n            return true;\n        };\n        this.getZoom = function () {\n            return _zoom;\n        };\n\n        for (var i in this.Defaults)\n            _initialDefaults[i] = this.Defaults[i];\n\n        var _container, _containerDelegations = [];\n        this.unbindContainer = function() {\n            if (_container != null && _containerDelegations.length > 0) {\n                for (var i = 0; i < _containerDelegations.length; i++) {\n                    _currentInstance.off(_container, _containerDelegations[i][0], _containerDelegations[i][1]);\n                }\n            }\n        };\n        this.setContainer = function (c) {\n\n            this.unbindContainer();\n\n            // get container as dom element.\n            c = this.getElement(c);\n            // move existing connections and endpoints, if any.\n            this.select().each(function (conn) {\n                conn.moveParent(c);\n            });\n            this.selectEndpoints().each(function (ep) {\n                ep.moveParent(c);\n            });\n\n            // set container.\n            var previousContainer = _container;\n            _container = c;\n            _containerDelegations.length = 0;\n            var eventAliases = {\n                \"endpointclick\":\"endpointClick\",\n                \"endpointdblclick\":\"endpointDblClick\"\n            };\n\n            var _oneDelegateHandler = function (id, e, componentType) {\n                var t = e.srcElement || e.target,\n                    jp = (t && t.parentNode ? t.parentNode._jsPlumb : null) || (t ? t._jsPlumb : null) || (t && t.parentNode && t.parentNode.parentNode ? t.parentNode.parentNode._jsPlumb : null);\n                if (jp) {\n                    jp.fire(id, jp, e);\n                    var alias = componentType ? eventAliases[componentType + id] || id : id;\n                    // jsplumb also fires every event coming from components/overlays. That's what the test for `jp.component` is for.\n                    _currentInstance.fire(alias, jp.component || jp, e);\n                }\n            };\n\n            var _addOneDelegate = function(eventId, selector, fn) {\n                _containerDelegations.push([eventId, fn]);\n                _currentInstance.on(_container, eventId, selector, fn);\n            };\n\n            // delegate one event on the container to jsplumb elements. it might be possible to\n            // abstract this out: each of endpoint, connection and overlay could register themselves with\n            // jsplumb as \"component types\" or whatever, and provide a suitable selector. this would be\n            // done by the renderer (although admittedly from 2.0 onwards we're not supporting vml anymore)\n            var _oneDelegate = function (id) {\n                // connections.\n                _addOneDelegate(id, \".jsplumb-connector\", function (e) {\n                    _oneDelegateHandler(id, e);\n                });\n                // endpoints. note they can have an enclosing div, or not.\n                //_addOneDelegate(id, \".jsplumb-endpoint, .jsplumb-endpoint > *, .jsplumb-endpoint svg *\", function (e) {\n                _addOneDelegate(id, \".jsplumb-endpoint\", function (e) {\n                    _oneDelegateHandler(id, e, \"endpoint\");\n                });\n                // overlays\n                _addOneDelegate(id, \".jsplumb-overlay\", function (e) {\n                    _oneDelegateHandler(id, e);\n                });\n            };\n\n            for (var i = 0; i < events.length; i++)\n                _oneDelegate(events[i]);\n\n            // managed elements\n            for (var elId in managedElements) {\n                var el = managedElements[elId].el;\n                if (el.parentNode === previousContainer) {\n                    previousContainer.removeChild(el);\n                    _container.appendChild(el);\n                }\n            }\n\n        };\n        this.getContainer = function () {\n            return _container;\n        };\n\n        this.bind = function (event, fn) {\n            if (\"ready\" === event && initialized) fn();\n            else _bb.apply(_currentInstance, [event, fn]);\n        };\n\n        _currentInstance.importDefaults = function (d) {\n            for (var i in d) {\n                _currentInstance.Defaults[i] = d[i];\n            }\n            if (d.Container)\n                _currentInstance.setContainer(d.Container);\n\n            return _currentInstance;\n        };\n\n        _currentInstance.restoreDefaults = function () {\n            _currentInstance.Defaults = jsPlumb.extend({}, _initialDefaults);\n            return _currentInstance;\n        };\n\n        var log = null,\n            initialized = false,\n        // TODO remove from window scope\n            connections = [],\n        // map of element id -> endpoint lists. an element can have an arbitrary\n        // number of endpoints on it, and not all of them have to be connected\n        // to anything.\n            endpointsByElement = {},\n            endpointsByUUID = {},\n            managedElements = {},\n            offsets = {},\n            offsetTimestamps = {},\n            draggableStates = {},\n            connectionBeingDragged = false,\n            sizes = [],\n            _suspendDrawing = false,\n            _suspendedAt = null,\n            DEFAULT_SCOPE = this.Defaults.Scope,\n            renderMode = null,  // will be set in init()\n            _curIdStamp = 1,\n            _idstamp = function () {\n                return \"\" + _curIdStamp++;\n            },\n\n        //\n        // appends an element to some other element, which is calculated as follows:\n        //\n        // 1. if Container exists, use that element.\n        // 2. if the 'parent' parameter exists, use that.\n        // 3. otherwise just use the root element.\n        //\n        //\n            _appendElement = function (el, parent) {\n                if (_container)\n                    _container.appendChild(el);\n                else if (!parent)\n                    this.appendToRoot(el);\n                else\n                    this.getElement(parent).appendChild(el);\n            }.bind(this),\n\n        //\n        // Draws an endpoint and its connections. this is the main entry point into drawing connections as well\n        // as endpoints, since jsPlumb is endpoint-centric under the hood.\n        //\n        // @param element element to draw (of type library specific element object)\n        // @param ui UI object from current library's event system. optional.\n        // @param timestamp timestamp for this paint cycle. used to speed things up a little by cutting down the amount of offset calculations we do.\n        // @param clearEdits defaults to false; indicates that mouse edits for connectors should be cleared\n        ///\n            _draw = function (element, ui, timestamp, clearEdits) {\n\n                // TODO is it correct to filter by headless at this top level? how would a headless adapter ever repaint?\n                // NO. it is not correct.\n                if (!jsPlumb.headless && !_suspendDrawing) {\n                    var id = _getId(element),\n                        repaintEls = _currentInstance.getDragManager().getElementsForDraggable(id);\n\n                    if (timestamp == null) timestamp = _timestamp();\n\n                    // update the offset of everything _before_ we try to draw anything.\n                    var o = _updateOffset({ elId: id, offset: ui, recalc: false, timestamp: timestamp });\n\n                    if (repaintEls) {\n                        for (var i in repaintEls) {\n                            _updateOffset({\n                                elId: repaintEls[i].id,\n                                offset: {\n                                    left: o.o.left + repaintEls[i].offset.left,\n                                    top: o.o.top + repaintEls[i].offset.top\n                                },\n                                recalc: false,\n                                timestamp: timestamp\n                            });\n                        }\n                    }\n\n                    _currentInstance.anchorManager.redraw(id, ui, timestamp, null, clearEdits);\n\n                    if (repaintEls) {\n                        for (var j in repaintEls) {\n                            _currentInstance.anchorManager.redraw(repaintEls[j].id, ui, timestamp, repaintEls[j].offset, clearEdits, true);\n                        }\n                    }\n                }\n            },\n\n        //\n        // gets an Endpoint by uuid.\n        //\n            _getEndpoint = function (uuid) {\n                return endpointsByUUID[uuid];\n            },\n\n            /**\n             * inits a draggable if it's not already initialised.\n             * TODO: somehow abstract this to the adapter, because the concept of \"draggable\" has no\n             * place on the server.\n             */\n            _initDraggableIfNecessary = function (element, isDraggable, dragOptions, id, fireEvent) {\n                // move to DragManager?\n                if (!jsPlumb.headless) {\n                    var _draggable = isDraggable == null ? false : isDraggable;\n                    if (_draggable) {\n                        if (jsPlumb.isDragSupported(element, _currentInstance)) {\n                            var options = dragOptions || _currentInstance.Defaults.DragOptions;\n                            options = jsPlumb.extend({}, options); // make a copy.\n                            if (!jsPlumb.isAlreadyDraggable(element, _currentInstance)) {\n                                var dragEvent = jsPlumb.dragEvents.drag,\n                                    stopEvent = jsPlumb.dragEvents.stop,\n                                    startEvent = jsPlumb.dragEvents.start,\n                                    _del = _currentInstance.getElement(element),\n                                    _ancestor = _currentInstance.getDragManager().getDragAncestor(_del),\n                                    _noOffset = {left: 0, top: 0},\n                                    _ancestorOffset = _noOffset,\n                                    _started = false;\n\n                                _manage(id, element);\n\n                                options[startEvent] = _ju.wrap(options[startEvent], function () {\n                                    _ancestorOffset = _ancestor != null ? _currentInstance.getOffset(_ancestor) : _noOffset;\n                                    _currentInstance.setHoverSuspended(true);\n                                    _currentInstance.select({source: element}).addClass(_currentInstance.elementDraggingClass + \" \" + _currentInstance.sourceElementDraggingClass, true);\n                                    _currentInstance.select({target: element}).addClass(_currentInstance.elementDraggingClass + \" \" + _currentInstance.targetElementDraggingClass, true);\n                                    _currentInstance.setConnectionBeingDragged(true);\n                                    if (options.canDrag) return dragOptions.canDrag();\n                                }, false);\n\n                                options[dragEvent] = _ju.wrap(options[dragEvent], function () {\n                                    // TODO: here we could actually use getDragObject, and then compute it ourselves,\n                                    // since every adapter does the same thing. but i'm not sure why YUI's getDragObject\n                                    // differs from getUIPosition so much\n                                    var ui = _currentInstance.getUIPosition(arguments, _currentInstance.getZoom());\n                                    if (ui != null) {\n                                        // adjust by ancestor offset if there is one: this is for the case that a draggable\n                                        // is contained inside some other element that is not the Container.\n                                        ui.left += _ancestorOffset.left;\n                                        ui.top += _ancestorOffset.top;\n                                        _draw(element, ui, null, true);\n                                        if (_started) _currentInstance.addClass(element, \"jsplumb-dragged\");\n                                        _started = true;\n                                    }\n                                });\n                                options[stopEvent] = _ju.wrap(options[stopEvent], function () {\n                                    var elements = arguments[0].selection;\n                                    var uip = _currentInstance.getUIPosition(arguments);\n\n                                    // this is one element\n                                    var _one = function (_e) {\n                                        if (uip != null) _draw(_e[0], uip);\n                                        _currentInstance.removeClass(_e[0], \"jsplumb-dragged\");\n                                        _currentInstance.select({source: _e[0]}).removeClass(_currentInstance.elementDraggingClass + \" \" + _currentInstance.sourceElementDraggingClass, true);\n                                        _currentInstance.select({target: _e[0]}).removeClass(_currentInstance.elementDraggingClass + \" \" + _currentInstance.targetElementDraggingClass, true);\n                                        _currentInstance.getDragManager().dragEnded(_e[0]);\n                                    };\n\n                                    for (var i = 0; i < elements.length; i++)\n                                        _one(elements[i]);\n\n                                    // this is common across all\n                                    _started = false;\n                                    _currentInstance.setHoverSuspended(false);\n                                    _currentInstance.setConnectionBeingDragged(false);\n                                });\n                                var elId = _getId(element); // need ID\n                                draggableStates[elId] = true;\n                                var draggable = draggableStates[elId];\n                                options.disabled = draggable == null ? false : !draggable;\n                                _currentInstance.initDraggable(element, options);\n                                _currentInstance.getDragManager().register(element);\n                                if (fireEvent) _currentInstance.fire(\"elementDraggable\", {el:element, options:options});\n                            }\n                            else {\n                                // already draggable. attach any start, drag or stop listeners to the current Drag.\n                                if (dragOptions.force) {\n                                    _currentInstance.initDraggable(element, options);\n                                }\n                            }\n                        }\n                    }\n                }\n            },\n\n            _scopeMatch = function (e1, e2) {\n                var s1 = e1.scope.split(/\\s/), s2 = e2.scope.split(/\\s/);\n                for (var i = 0; i < s1.length; i++)\n                    for (var j = 0; j < s2.length; j++)\n                        if (s2[j] == s1[i]) return true;\n\n                return false;\n            },\n\n        /*\n         * prepares a final params object that can be passed to _newConnection, taking into account defaults, events, etc.\n         */\n            _prepareConnectionParams = function (params, referenceParams) {\n                var _p = jsPlumb.extend({ }, params);\n                if (referenceParams) jsPlumb.extend(_p, referenceParams);\n\n                // hotwire endpoints passed as source or target to sourceEndpoint/targetEndpoint, respectively.\n                if (_p.source) {\n                    if (_p.source.endpoint)\n                        _p.sourceEndpoint = _p.source;\n                    else\n                        _p.source = _currentInstance.getElement(_p.source);\n                }\n                if (_p.target) {\n                    if (_p.target.endpoint)\n                        _p.targetEndpoint = _p.target;\n                    else\n                        _p.target = _currentInstance.getElement(_p.target);\n                }\n\n                // test for endpoint uuids to connect\n                if (params.uuids) {\n                    _p.sourceEndpoint = _getEndpoint(params.uuids[0]);\n                    _p.targetEndpoint = _getEndpoint(params.uuids[1]);\n                }\n\n                // now ensure that if we do have Endpoints already, they're not full.\n                // source:\n                if (_p.sourceEndpoint && _p.sourceEndpoint.isFull()) {\n                    _ju.log(_currentInstance, \"could not add connection; source endpoint is full\");\n                    return;\n                }\n\n                // target:\n                if (_p.targetEndpoint && _p.targetEndpoint.isFull()) {\n                    _ju.log(_currentInstance, \"could not add connection; target endpoint is full\");\n                    return;\n                }\n\n                // if source endpoint mandates connection type and nothing specified in our params, use it.\n                if (!_p.type && _p.sourceEndpoint)\n                    _p.type = _p.sourceEndpoint.connectionType;\n\n                // copy in any connectorOverlays that were specified on the source endpoint.\n                // it doesnt copy target endpoint overlays.  i'm not sure if we want it to or not.\n                if (_p.sourceEndpoint && _p.sourceEndpoint.connectorOverlays) {\n                    _p.overlays = _p.overlays || [];\n                    for (var i = 0, j = _p.sourceEndpoint.connectorOverlays.length; i < j; i++) {\n                        _p.overlays.push(_p.sourceEndpoint.connectorOverlays[i]);\n                    }\n                }\n\n                // scope\n                if (_p.sourceEndpoint && _p.sourceEndpoint.scope) {\n                    _p.scope = _p.sourceEndpoint.scope;\n                }\n\n                // pointer events\n                if (!_p[\"pointer-events\"] && _p.sourceEndpoint && _p.sourceEndpoint.connectorPointerEvents)\n                    _p[\"pointer-events\"] = _p.sourceEndpoint.connectorPointerEvents;\n\n                var _mergeOverrides = function (def, values) {\n                    var m = jsPlumb.extend({}, def);\n                    for (var i in values) {\n                        if (values[i]) m[i] = values[i];\n                    }\n                    return m;\n                };\n\n                var _addEndpoint = function (el, def, idx) {\n                    return _currentInstance.addEndpoint(el, _mergeOverrides(def, {\n                        anchor: _p.anchors ? _p.anchors[idx] : _p.anchor,\n                        endpoint: _p.endpoints ? _p.endpoints[idx] : _p.endpoint,\n                        paintStyle: _p.endpointStyles ? _p.endpointStyles[idx] : _p.endpointStyle,\n                        hoverPaintStyle: _p.endpointHoverStyles ? _p.endpointHoverStyles[idx] : _p.endpointHoverStyle\n                    }));\n                };\n\n                // check for makeSource/makeTarget specs.\n\n                var _oneElementDef = function (type, idx, defs, matchType) {\n                    if (_p[type] && !_p[type].endpoint && !_p[type + \"Endpoint\"] && !_p.newConnection) {\n                        var tid = _getId(_p[type]), tep = defs[tid];\n\n                        tep = tep ? tep[matchType] : null;\n\n                        if (tep) {\n                            // if not enabled, return.\n                            if (!tep.enabled) return false;\n                            var newEndpoint = tep.endpoint != null && tep.endpoint._jsPlumb ? tep.endpoint : _addEndpoint(_p[type], tep.def, idx);\n                            if (newEndpoint.isFull()) return false;\n                            _p[type + \"Endpoint\"] = newEndpoint;\n                            newEndpoint._doNotDeleteOnDetach = false; // reset.\n                            newEndpoint._deleteOnDetach = true;\n                            if (tep.uniqueEndpoint) {\n                                if (!tep.endpoint) {\n                                    tep.endpoint = newEndpoint;\n                                    newEndpoint._deleteOnDetach = false;\n                                    newEndpoint._doNotDeleteOnDetach = true;\n                                }\n                                else\n                                    newEndpoint.finalEndpoint = tep.endpoint;\n                            }\n                        }\n                    }\n                };\n\n                if (_oneElementDef(\"source\", 0, this.sourceEndpointDefinitions, _p.type || \"default\") === false) return;\n                if (_oneElementDef(\"target\", 1, this.targetEndpointDefinitions, _p.type || \"default\") === false) return;\n\n                // last, ensure scopes match\n                if (_p.sourceEndpoint && _p.targetEndpoint)\n                    if (!_scopeMatch(_p.sourceEndpoint, _p.targetEndpoint)) _p = null;\n\n                return _p;\n            }.bind(_currentInstance),\n\n            _newConnection = function (params) {\n                var connectionFunc = _currentInstance.Defaults.ConnectionType || _currentInstance.getDefaultConnectionType();\n\n                params._jsPlumb = _currentInstance;\n                params.newConnection = _newConnection;\n                params.newEndpoint = _newEndpoint;\n                params.endpointsByUUID = endpointsByUUID;\n                params.endpointsByElement = endpointsByElement;\n                params.finaliseConnection = _finaliseConnection;\n                params.id = \"con_\" + _idstamp();\n                var con = new connectionFunc(params);\n\n                // if the connection is draggable, then maybe we need to tell the target endpoint to init the\n                // dragging code. it won't run again if it already configured to be draggable.\n                if (con.isDetachable()) {\n                    con.endpoints[0].initDraggable(\"_jsPlumbSource\");\n                    con.endpoints[1].initDraggable(\"_jsPlumbTarget\");\n                }\n\n                return con;\n            },\n\n        //\n        // adds the connection to the backing model, fires an event if necessary and then redraws\n        //\n            _finaliseConnection = _currentInstance.finaliseConnection = function (jpc, params, originalEvent, doInformAnchorManager) {\n                params = params || {};\n                // add to list of connections (by scope).\n                if (!jpc.suspendedEndpoint)\n                    connections.push(jpc);\n\n                jpc.pending = null;\n\n                // turn off isTemporarySource on the source endpoint (only viable on first draw)\n                jpc.endpoints[0].isTemporarySource = false;\n\n                // always inform the anchor manager\n                // except that if jpc has a suspended endpoint it's not true to say the\n                // connection is new; it has just (possibly) moved. the question is whether\n                // to make that call here or in the anchor manager.  i think perhaps here.\n                if (doInformAnchorManager !== false)\n                    _currentInstance.anchorManager.newConnection(jpc);\n\n                // force a paint\n                _draw(jpc.source);\n\n                // fire an event\n                if (!params.doNotFireConnectionEvent && params.fireEvent !== false) {\n\n                    var eventArgs = {\n                        connection: jpc,\n                        source: jpc.source, target: jpc.target,\n                        sourceId: jpc.sourceId, targetId: jpc.targetId,\n                        sourceEndpoint: jpc.endpoints[0], targetEndpoint: jpc.endpoints[1]\n                    };\n\n                    _currentInstance.fire(\"connection\", eventArgs, originalEvent);\n                }\n            },\n\n        /*\n         factory method to prepare a new endpoint.  this should always be used instead of creating Endpoints\n         manually, since this method attaches event listeners and an id.\n         */\n            _newEndpoint = function (params, id) {\n                var endpointFunc = _currentInstance.Defaults.EndpointType || jsPlumb.Endpoint;\n                var _p = jsPlumb.extend({}, params);\n                _p._jsPlumb = _currentInstance;\n                _p.newConnection = _newConnection;\n                _p.newEndpoint = _newEndpoint;\n                _p.endpointsByUUID = endpointsByUUID;\n                _p.endpointsByElement = endpointsByElement;\n                _p.fireDetachEvent = fireDetachEvent;\n                _p.elementId = id || _getId(_p.source);\n                var ep = new endpointFunc(_p);\n                ep.id = \"ep_\" + _idstamp();\n                _manage(_p.elementId, _p.source);\n\n                if (!jsPlumb.headless)\n                    _currentInstance.getDragManager().endpointAdded(_p.source, id);\n\n                return ep;\n            },\n\n        /*\n         * performs the given function operation on all the connections found\n         * for the given element id; this means we find all the endpoints for\n         * the given element, and then for each endpoint find the connectors\n         * connected to it. then we pass each connection in to the given\n         * function.\n         */\n            _operation = function (elId, func, endpointFunc) {\n                var endpoints = endpointsByElement[elId];\n                if (endpoints && endpoints.length) {\n                    for (var i = 0, ii = endpoints.length; i < ii; i++) {\n                        for (var j = 0, jj = endpoints[i].connections.length; j < jj; j++) {\n                            var retVal = func(endpoints[i].connections[j]);\n                            // if the function passed in returns true, we exit.\n                            // most functions return false.\n                            if (retVal) return;\n                        }\n                        if (endpointFunc) endpointFunc(endpoints[i]);\n                    }\n                }\n            },\n\n            _setDraggable = function (element, draggable) {\n                return jsPlumb.each(element, function (el) {\n                    if (_currentInstance.isDragSupported(el)) {\n                        draggableStates[_currentInstance.getAttribute(el, \"id\")] = draggable;\n                        _currentInstance.setElementDraggable(el, draggable);\n                    }\n                });\n            },\n        /*\n         * private method to do the business of hiding/showing.\n         *\n         * @param el\n         *            either Id of the element in question or a library specific\n         *            object for the element.\n         * @param state\n         *            String specifying a value for the css 'display' property\n         *            ('block' or 'none').\n         */\n            _setVisible = function (el, state, alsoChangeEndpoints) {\n                state = state === \"block\";\n                var endpointFunc = null;\n                if (alsoChangeEndpoints) {\n                    endpointFunc = function (ep) {\n                        ep.setVisible(state, true, true);\n                    };\n                }\n                var info = _info(el);\n                _operation(info.id, function (jpc) {\n                    if (state && alsoChangeEndpoints) {\n                        // this test is necessary because this functionality is new, and i wanted to maintain backwards compatibility.\n                        // this block will only set a connection to be visible if the other endpoint in the connection is also visible.\n                        var oidx = jpc.sourceId === info.id ? 1 : 0;\n                        if (jpc.endpoints[oidx].isVisible()) jpc.setVisible(true);\n                    }\n                    else  // the default behaviour for show, and what always happens for hide, is to just set the visibility without getting clever.\n                        jpc.setVisible(state);\n                }, endpointFunc);\n            },\n        /*\n         * toggles the draggable state of the given element(s).\n         * el is either an id, or an element object, or a list of ids/element objects.\n         */\n            _toggleDraggable = function (el) {\n                var state;\n                jsPlumb.each(el, function (el) {\n                    var elId = _currentInstance.getAttribute(el, \"id\");\n                    state = draggableStates[elId] == null ? false : draggableStates[elId];\n                    state = !state;\n                    draggableStates[elId] = state;\n                    _currentInstance.setDraggable(el, state);\n                    return state;\n                }.bind(this));\n                return state;\n            },\n            /**\n             * private method to do the business of toggling hiding/showing.\n             */\n            _toggleVisible = function (elId, changeEndpoints) {\n                var endpointFunc = null;\n                if (changeEndpoints) {\n                    endpointFunc = function (ep) {\n                        var state = ep.isVisible();\n                        ep.setVisible(!state);\n                    };\n                }\n                _operation(elId, function (jpc) {\n                    var state = jpc.isVisible();\n                    jpc.setVisible(!state);\n                }, endpointFunc);\n            },\n\n        // TODO comparison performance\n            _getCachedData = function (elId) {\n                var o = offsets[elId];\n                if (!o)\n                    return _updateOffset({elId: elId});\n                else\n                    return {o: o, s: sizes[elId]};\n            },\n\n            /**\n             * gets an id for the given element, creating and setting one if\n             * necessary.  the id is of the form\n             *\n             *    jsPlumb_<instance index>_<index in instance>\n             *\n             * where \"index in instance\" is a monotonically increasing integer that starts at 0,\n             * for each instance.  this method is used not only to assign ids to elements that do not\n             * have them but also to connections and endpoints.\n             */\n            _getId = function (element, uuid, doNotCreateIfNotFound) {\n                if (_ju.isString(element)) return element;\n                if (element == null) return null;\n                var id = _currentInstance.getAttribute(element, \"id\");\n                if (!id || id === \"undefined\") {\n                    // check if fixed uuid parameter is given\n                    if (arguments.length == 2 && arguments[1] !== undefined)\n                        id = uuid;\n                    else if (arguments.length == 1 || (arguments.length == 3 && !arguments[2]))\n                        id = \"jsPlumb_\" + _instanceIndex + \"_\" + _idstamp();\n\n                    if (!doNotCreateIfNotFound) _currentInstance.setAttribute(element, \"id\", id);\n                }\n                return id;\n            };\n\n        this.setConnectionBeingDragged = function (v) {\n            connectionBeingDragged = v;\n        };\n        this.isConnectionBeingDragged = function () {\n            return connectionBeingDragged;\n        };\n\n        /**\n         * Returns a map of all the elements this jsPlumbInstance is currently managing.\n         * @returns {Object} Map of [id-> {el, endpoint[], connection, position}] information.\n         */\n        this.getManagedElements = function() {\n            return managedElements;\n        };\n\n        this.getRenderMode = function() { return \"svg\"; };\n\n        this.connectorClass = \"jsplumb-connector\";\n        this.connectorOutlineClass = \"jsplumb-connector-outline\";\n        this.editableConnectorClass = \"jsplumb-connector-editable\";\n        this.connectedClass = \"jsplumb-connected\";\n        this.hoverClass = \"jsplumb-hover\";\n        this.endpointClass = \"jsplumb-endpoint\";\n        this.endpointConnectedClass = \"jsplumb-endpoint-connected\";\n        this.endpointFullClass = \"jsplumb-endpoint-full\";\n        this.endpointDropAllowedClass = \"jsplumb-endpoint-drop-allowed\";\n        this.endpointDropForbiddenClass = \"jsplumb-endpoint-drop-forbidden\";\n        this.overlayClass = \"jsplumb-overlay\";\n        this.draggingClass = \"jsplumb-dragging\";\n        this.elementDraggingClass = \"jsplumb-element-dragging\";\n        this.sourceElementDraggingClass = \"jsplumb-source-element-dragging\";\n        this.targetElementDraggingClass = \"jsplumb-target-element-dragging\";\n        this.endpointAnchorClassPrefix = \"jsplumb-endpoint-anchor\";\n        this.hoverSourceClass = \"jsplumb-source-hover\";\n        this.hoverTargetClass = \"jsplumb-target-hover\";\n        this.dragSelectClass = \"jsplumb-drag-select\";\n\n        this.Anchors = {};\n        this.Connectors = {  \"svg\": {} };\n        this.Endpoints = { \"svg\": {} };\n        this.Overlays = { \"svg\": {} } ;\n        this.ConnectorRenderers = {};\n        this.SVG = \"svg\";\n\n// --------------------------- jsPlumbInstance public API ---------------------------------------------------------\n\n\n        this.addEndpoint = function (el, params, referenceParams) {\n            referenceParams = referenceParams || {};\n            var p = jsPlumb.extend({}, referenceParams);\n            jsPlumb.extend(p, params);\n            p.endpoint = p.endpoint || _currentInstance.Defaults.Endpoint;\n            p.paintStyle = p.paintStyle || _currentInstance.Defaults.EndpointStyle;\n\n            var results = [],\n                inputs = (_ju.isArray(el) || (el.length != null && !_ju.isString(el))) ? el : [ el ];\n\n            for (var i = 0, j = inputs.length; i < j; i++) {\n                p.source = _currentInstance.getElement(inputs[i]);\n                _ensureContainer(p.source);\n\n                var id = _getId(p.source), e = _newEndpoint(p, id);\n\n                // SP new. here we have introduced a class-wide element manager, which is responsible\n                // for getting object dimensions and width/height, and for updating these values only\n                // when necessary (after a drag, or on a forced refresh call).\n                var myOffset = _manage(id, p.source).info.o;\n                _ju.addToList(endpointsByElement, id, e);\n\n                if (!_suspendDrawing) {\n                    e.paint({\n                        anchorLoc: e.anchor.compute({ xy: [ myOffset.left, myOffset.top ], wh: sizes[id], element: e, timestamp: _suspendedAt }),\n                        timestamp: _suspendedAt\n                    });\n                }\n\n                results.push(e);\n                e._doNotDeleteOnDetach = true; // mark this as being added via addEndpoint.\n            }\n\n            return results.length == 1 ? results[0] : results;\n        };\n\n        this.addEndpoints = function (el, endpoints, referenceParams) {\n            var results = [];\n            for (var i = 0, j = endpoints.length; i < j; i++) {\n                var e = _currentInstance.addEndpoint(el, endpoints[i], referenceParams);\n                if (_ju.isArray(e))\n                    Array.prototype.push.apply(results, e);\n                else results.push(e);\n            }\n            return results;\n        };\n\n        this.animate = function (el, properties, options) {\n            if (!this.animationSupported) return false;\n\n            options = options || {};\n            var del = _currentInstance.getElement(el),\n                id = _getId(del),\n                stepFunction = jsPlumb.animEvents.step,\n                completeFunction = jsPlumb.animEvents.complete;\n\n            options[stepFunction] = _ju.wrap(options[stepFunction], function () {\n                _currentInstance.revalidate(id);\n            });\n\n            // onComplete repaints, just to make sure everything looks good at the end of the animation.\n            options[completeFunction] = _ju.wrap(options[completeFunction], function () {\n                _currentInstance.revalidate(id);\n            });\n\n            _currentInstance.doAnimate(del, properties, options);\n        };\n\n        /**\n         * checks for a listener for the given condition, executing it if found, passing in the given value.\n         * condition listeners would have been attached using \"bind\" (which is, you could argue, now overloaded, since\n         * firing click events etc is a bit different to what this does).  i thought about adding a \"bindCondition\"\n         * or something, but decided against it, for the sake of simplicity. jsPlumb will never fire one of these\n         * condition events anyway.\n         */\n        this.checkCondition = function (conditionName, args) {\n            var l = _currentInstance.getListener(conditionName),\n                r = true;\n\n            if (l && l.length > 0) {\n                var values = Array.prototype.slice.call(arguments, 1);\n                try {\n                    for (var i = 0, j = l.length; i < j; i++) {\n                        r = r && l[i].apply(l[i], values);\n                    }\n                }\n                catch (e) {\n                    _ju.log(_currentInstance, \"cannot check condition [\" + conditionName + \"]\" + e);\n                }\n            }\n            return r;\n        };\n\n        this.connect = function (params, referenceParams) {\n            // prepare a final set of parameters to create connection with\n            var _p = _prepareConnectionParams(params, referenceParams), jpc;\n            // TODO probably a nicer return value if the connection was not made.  _prepareConnectionParams\n            // will return null (and log something) if either endpoint was full.  what would be nicer is to\n            // create a dedicated 'error' object.\n            if (_p) {\n                if (_p.source == null && _p.sourceEndpoint == null) {\n                    _ju.log(\"Cannot establish connection - source does not exist\");\n                    return;\n                }\n                if (_p.target == null && _p.targetEndpoint == null) {\n                    _ju.log(\"Cannot establish connection - target does not exist\");\n                    return;\n                }\n                _ensureContainer(_p.source);\n                // create the connection.  it is not yet registered\n                jpc = _newConnection(_p);\n                // now add it the model, fire an event, and redraw\n                _finaliseConnection(jpc, _p);\n            }\n            return jpc;\n        };\n\n        var stTypes = [\n            { el: \"source\", elId: \"sourceId\", epDefs: \"sourceEndpointDefinitions\" },\n            { el: \"target\", elId: \"targetId\", epDefs: \"targetEndpointDefinitions\" }\n        ];\n\n        var _set = function (c, el, idx, doNotRepaint) {\n            var ep, _st = stTypes[idx], cId = c[_st.elId], cEl = c[_st.el], sid, sep,\n                oldEndpoint = c.endpoints[idx];\n\n            var evtParams = {\n                index: idx,\n                originalSourceId: idx === 0 ? cId : c.sourceId,\n                newSourceId: c.sourceId,\n                originalTargetId: idx == 1 ? cId : c.targetId,\n                newTargetId: c.targetId,\n                connection: c\n            };\n\n            if (el.constructor == jsPlumb.Endpoint) { // TODO here match the current endpoint class; users can change it {\n                ep = el;\n                ep.addConnection(c);\n                el = ep.element;\n            }\n            else {\n                sid = _getId(el);\n                sep = this[_st.epDefs][sid];\n\n                if (sid === c[_st.elId])\n                    ep = null;  // dont change source/target if the element is already the one given.\n                else if (sep) {\n                    for (var t in sep) {\n                        if (!sep[t].enabled) return;\n                        ep = sep[t].endpoint != null && sep[t].endpoint._jsPlumb ? sep[t].endpoint : this.addEndpoint(el, sep[t].def);\n                        if (sep[t].uniqueEndpoint) sep[t].endpoint = ep;\n                        ep._doNotDeleteOnDetach = false;\n                        ep._deleteOnDetach = true;\n                        ep.addConnection(c);\n                    }\n                }\n                else {\n                    ep = c.makeEndpoint(idx === 0, el, sid);\n                    ep._doNotDeleteOnDetach = false;\n                    ep._deleteOnDetach = true;\n                }\n            }\n\n            if (ep != null) {\n                oldEndpoint.detachFromConnection(c);\n                c.endpoints[idx] = ep;\n                c[_st.el] = ep.element;\n                c[_st.elId] = ep.elementId;\n                evtParams[idx === 0 ? \"newSourceId\" : \"newTargetId\"] = ep.elementId;\n\n                fireMoveEvent(evtParams);\n\n                if (!doNotRepaint)\n                    c.repaint();\n            }\n\n            evtParams.element = el;\n            return evtParams;\n\n        }.bind(this);\n\n        this.setSource = function (connection, el, doNotRepaint) {\n            var p = _set(connection, el, 0, doNotRepaint);\n            this.anchorManager.sourceChanged(p.originalSourceId, p.newSourceId, connection, p.el);\n        };\n        this.setTarget = function (connection, el, doNotRepaint) {\n            var p = _set(connection, el, 1, doNotRepaint);\n            this.anchorManager.updateOtherEndpoint(p.originalSourceId, p.originalTargetId, p.newTargetId, connection);\n        };\n\n        this.deleteEndpoint = function (object, dontUpdateHover, deleteAttachedObjects) {\n            var endpoint = (typeof object === \"string\") ? endpointsByUUID[object] : object;\n            if (endpoint) {\n                _currentInstance.deleteObject({ endpoint: endpoint, dontUpdateHover: dontUpdateHover, deleteAttachedObjects:deleteAttachedObjects });\n            }\n            return _currentInstance;\n        };\n\n        this.deleteEveryEndpoint = function () {\n            var _is = _currentInstance.setSuspendDrawing(true);\n            for (var id in endpointsByElement) {\n                var endpoints = endpointsByElement[id];\n                if (endpoints && endpoints.length) {\n                    for (var i = 0, j = endpoints.length; i < j; i++) {\n                        _currentInstance.deleteEndpoint(endpoints[i], true);\n                    }\n                }\n            }\n            endpointsByElement = {};\n            // SP new\n            managedElements = {};\n            endpointsByUUID = {};\n            offsets = {};\n            offsetTimestamps = {};\n            _currentInstance.anchorManager.reset();\n            _currentInstance.getDragManager().reset();\n            if (!_is) _currentInstance.setSuspendDrawing(false);\n            return _currentInstance;\n        };\n\n        var fireDetachEvent = function (jpc, doFireEvent, originalEvent) {\n            // may have been given a connection, or in special cases, an object\n            var connType = _currentInstance.Defaults.ConnectionType || _currentInstance.getDefaultConnectionType(),\n                argIsConnection = jpc.constructor == connType,\n                params = argIsConnection ? {\n                    connection: jpc,\n                    source: jpc.source, target: jpc.target,\n                    sourceId: jpc.sourceId, targetId: jpc.targetId,\n                    sourceEndpoint: jpc.endpoints[0], targetEndpoint: jpc.endpoints[1]\n                } : jpc;\n\n            if (doFireEvent)\n                _currentInstance.fire(\"connectionDetached\", params, originalEvent);\n\n            _currentInstance.anchorManager.connectionDetached(params);\n        };\n\n        var fireMoveEvent = _currentInstance.fireMoveEvent = function (params, evt) {\n            _currentInstance.fire(\"connectionMoved\", params, evt);\n        };\n\n        this.unregisterEndpoint = function (endpoint) {\n            //if (endpoint._jsPlumb == null) return;\n            if (endpoint._jsPlumb.uuid) endpointsByUUID[endpoint._jsPlumb.uuid] = null;\n            _currentInstance.anchorManager.deleteEndpoint(endpoint);\n            // TODO at least replace this with a removeWithFunction call.\n            for (var e in endpointsByElement) {\n                var endpoints = endpointsByElement[e];\n                if (endpoints) {\n                    var newEndpoints = [];\n                    for (var i = 0, j = endpoints.length; i < j; i++)\n                        if (endpoints[i] != endpoint) newEndpoints.push(endpoints[i]);\n\n                    endpointsByElement[e] = newEndpoints;\n                }\n                if (endpointsByElement[e].length < 1) {\n                    delete endpointsByElement[e];\n                }\n            }\n        };\n\n        this.detach = function () {\n\n            if (arguments.length === 0) return;\n            var connType = _currentInstance.Defaults.ConnectionType || _currentInstance.getDefaultConnectionType(),\n                firstArgIsConnection = arguments[0].constructor == connType,\n                params = arguments.length == 2 ? firstArgIsConnection ? (arguments[1] || {}) : arguments[0] : arguments[0],\n                fireEvent = (params.fireEvent !== false),\n                forceDetach = params.forceDetach,\n                conn = firstArgIsConnection ? arguments[0] : params.connection,\n                deleteAttachedObjects = firstArgIsConnection ? null : params.deleteAttachedObjects;\n\n            if (conn) {\n                if (forceDetach || _ju.functionChain(true, false, [\n                    [ conn.endpoints[0], \"isDetachAllowed\", [ conn ] ],\n                    [ conn.endpoints[1], \"isDetachAllowed\", [ conn ] ],\n                    [ conn, \"isDetachAllowed\", [ conn ] ],\n                    [ _currentInstance, \"checkCondition\", [ \"beforeDetach\", conn ] ]\n                ])) {\n\n                    conn.endpoints[0].detach({\n                        connection:conn,\n                        ignoreTarget:false,\n                        forceDetach:true,\n                        fireEvent:fireEvent,\n                        deleteAttachedObjects:deleteAttachedObjects\n                    });\n                }\n            }\n            else {\n                var _p = jsPlumb.extend({}, params); // a backwards compatibility hack: source should be thought of as 'params' in this case.\n                // test for endpoint uuids to detach\n                if (_p.uuids) {\n                    _getEndpoint(_p.uuids[0]).detachFrom(_getEndpoint(_p.uuids[1]), fireEvent);\n                } else if (_p.sourceEndpoint && _p.targetEndpoint) {\n                    _p.sourceEndpoint.detachFrom(_p.targetEndpoint);\n                } else {\n                    var sourceId = _getId(_currentInstance.getElement(_p.source)),\n                        targetId = _getId(_currentInstance.getElement(_p.target));\n                    _operation(sourceId, function (jpc) {\n                        if ((jpc.sourceId == sourceId && jpc.targetId == targetId) || (jpc.targetId == sourceId && jpc.sourceId == targetId)) {\n                            if (_currentInstance.checkCondition(\"beforeDetach\", jpc)) {\n                                jpc.endpoints[0].detach({\n                                    connection:jpc,\n                                    ignoreTarget:false,\n                                    forceDetach:true,\n                                    fireEvent:fireEvent\n                                });\n                            }\n                        }\n                    });\n                }\n            }\n        };\n\n        this.detachAllConnections = function (el, params) {\n            params = params || {};\n            el = _currentInstance.getElement(el);\n            var id = _getId(el),\n                endpoints = endpointsByElement[id];\n            if (endpoints && endpoints.length) {\n                for (var i = 0, j = endpoints.length; i < j; i++) {\n                    endpoints[i].detachAll(params.fireEvent !== false, params.forceDetach);\n                }\n            }\n            return _currentInstance;\n        };\n\n        this.detachEveryConnection = function (params) {\n            params = params || {};\n            _currentInstance.batch(function () {\n                for (var id in endpointsByElement) {\n                    var endpoints = endpointsByElement[id];\n                    if (endpoints && endpoints.length) {\n                        for (var i = 0, j = endpoints.length; i < j; i++) {\n                            endpoints[i].detachAll(params.fireEvent !== false, params.forceDetach);\n                        }\n                    }\n                }\n                connections.length = 0;\n            });\n            return _currentInstance;\n        };\n\n        /// not public.  but of course its exposed. how to change this.\n        this.deleteObject = function (params) {\n            var result = {\n                    endpoints: {},\n                    connections: {},\n                    endpointCount: 0,\n                    connectionCount: 0\n                },\n                fireEvent = params.fireEvent !== false,\n                deleteAttachedObjects = params.deleteAttachedObjects !== false;\n\n            var unravelConnection = function (connection) {\n                if (connection != null && result.connections[connection.id] == null) {\n                    if (!params.dontUpdateHover && connection._jsPlumb != null) connection.setHover(false);\n                    result.connections[connection.id] = connection;\n                    result.connectionCount++;\n                    if (deleteAttachedObjects) {\n                        for (var j = 0; j < connection.endpoints.length; j++) {\n                            if (connection.endpoints[j]._deleteOnDetach)\n                                unravelEndpoint(connection.endpoints[j]);\n                        }\n                    }\n                }\n            };\n            var unravelEndpoint = function (endpoint) {\n                if (endpoint != null && result.endpoints[endpoint.id] == null) {\n                    if (!params.dontUpdateHover && endpoint._jsPlumb != null) endpoint.setHover(false);\n                    result.endpoints[endpoint.id] = endpoint;\n                    result.endpointCount++;\n\n                    if (deleteAttachedObjects) {\n                        for (var i = 0; i < endpoint.connections.length; i++) {\n                            var c = endpoint.connections[i];\n                            unravelConnection(c);\n                        }\n                    }\n                }\n            };\n\n            if (params.connection)\n                unravelConnection(params.connection);\n            else unravelEndpoint(params.endpoint);\n\n            // loop through connections\n            for (var i in result.connections) {\n                var c = result.connections[i];\n                if (c._jsPlumb) {\n                    _ju.removeWithFunction(connections, function (_c) {\n                        return c.id == _c.id;\n                    });\n\n                    fireDetachEvent(c, params.fireEvent === false ? false : !c.pending, params.originalEvent);\n                    var doNotCleanup = params.deleteAttachedObjects == null ? null : !params.deleteAttachedObjects;\n\n                    // SP GROUPS. this works but blows up lots of original tests\n                    c.endpoints[0].detachFromConnection(c, null, doNotCleanup);\n                    c.endpoints[1].detachFromConnection(c, null, doNotCleanup);\n\n                    // SP GROUPS. this does not work but makes all the original tests work.\n                    //c.endpoints[0].detachFromConnection(c);\n                    //c.endpoints[1].detachFromConnection(c);\n\n                    c.cleanup(true);\n                    c.destroy(true);\n                }\n            }\n\n            // loop through endpoints\n            for (var j in result.endpoints) {\n                var e = result.endpoints[j];\n                if (e._jsPlumb) {\n                    _currentInstance.unregisterEndpoint(e);\n                    // FIRE some endpoint deleted event?\n                    e.cleanup(true);\n                    e.destroy(true);\n                }\n            }\n\n            return result;\n        };\n\n        this.draggable = function (el, options) {\n            var info;\n            _each(function(_el) {\n                 info = _info(_el);\n                if (info.el) _initDraggableIfNecessary(info.el, true, options, info.id, true);\n            }, el);\n            return _currentInstance;\n        };\n\n        this.droppable = function(el, options) {\n            var info;\n            options = options || {};\n            options.allowLoopback = false;\n            _each(function(_el) {\n                info = _info(_el);\n                if (info.el) _currentInstance.initDroppable(info.el, options);\n            }, el);\n            return _currentInstance;\n        };\n\n        // helpers for select/selectEndpoints\n        var _setOperation = function (list, func, args, selector) {\n                for (var i = 0, j = list.length; i < j; i++) {\n                    list[i][func].apply(list[i], args);\n                }\n                return selector(list);\n            },\n            _getOperation = function (list, func, args) {\n                var out = [];\n                for (var i = 0, j = list.length; i < j; i++) {\n                    out.push([ list[i][func].apply(list[i], args), list[i] ]);\n                }\n                return out;\n            },\n            setter = function (list, func, selector) {\n                return function () {\n                    return _setOperation(list, func, arguments, selector);\n                };\n            },\n            getter = function (list, func) {\n                return function () {\n                    return _getOperation(list, func, arguments);\n                };\n            },\n            prepareList = function (input, doNotGetIds) {\n                var r = [];\n                if (input) {\n                    if (typeof input == 'string') {\n                        if (input === \"*\") return input;\n                        r.push(input);\n                    }\n                    else {\n                        if (doNotGetIds) r = input;\n                        else {\n                            if (input.length) {\n                                for (var i = 0, j = input.length; i < j; i++)\n                                    r.push(_info(input[i]).id);\n                            }\n                            else\n                                r.push(_info(input).id);\n                        }\n                    }\n                }\n                return r;\n            },\n            filterList = function (list, value, missingIsFalse) {\n                if (list === \"*\") return true;\n                return list.length > 0 ? list.indexOf(value) != -1 : !missingIsFalse;\n            };\n\n        // get some connections, specifying source/target/scope\n        this.getConnections = function (options, flat) {\n            if (!options) {\n                options = {};\n            } else if (options.constructor == String) {\n                options = { \"scope\": options };\n            }\n            var scope = options.scope || _currentInstance.getDefaultScope(),\n                scopes = prepareList(scope, true),\n                sources = prepareList(options.source),\n                targets = prepareList(options.target),\n                results = (!flat && scopes.length > 1) ? {} : [],\n                _addOne = function (scope, obj) {\n                    if (!flat && scopes.length > 1) {\n                        var ss = results[scope];\n                        if (ss == null) {\n                            ss = results[scope] = [];\n                        }\n                        ss.push(obj);\n                    } else results.push(obj);\n                };\n\n            for (var j = 0, jj = connections.length; j < jj; j++) {\n                var c = connections[j],\n                    sourceId = c.proxies && c.proxies[0] ? c.proxies[0].originalEp.elementId : c.sourceId,\n                    targetId = c.proxies && c.proxies[1] ? c.proxies[1].originalEp.elementId : c.targetId;\n\n                if (filterList(scopes, c.scope) && filterList(sources, sourceId) && filterList(targets, targetId))\n                    _addOne(c.scope, c);\n            }\n\n            return results;\n        };\n\n        var _curryEach = function (list, executor) {\n                return function (f) {\n                    for (var i = 0, ii = list.length; i < ii; i++) {\n                        f(list[i]);\n                    }\n                    return executor(list);\n                };\n            },\n            _curryGet = function (list) {\n                return function (idx) {\n                    return list[idx];\n                };\n            };\n\n        var _makeCommonSelectHandler = function (list, executor) {\n            var out = {\n                    length: list.length,\n                    each: _curryEach(list, executor),\n                    get: _curryGet(list)\n                },\n                setters = [\"setHover\", \"removeAllOverlays\", \"setLabel\", \"addClass\", \"addOverlay\", \"removeOverlay\",\n                    \"removeOverlays\", \"showOverlay\", \"hideOverlay\", \"showOverlays\", \"hideOverlays\", \"setPaintStyle\",\n                    \"setHoverPaintStyle\", \"setSuspendEvents\", \"setParameter\", \"setParameters\", \"setVisible\",\n                    \"repaint\", \"addType\", \"toggleType\", \"removeType\", \"removeClass\", \"setType\", \"bind\", \"unbind\" ],\n\n                getters = [\"getLabel\", \"getOverlay\", \"isHover\", \"getParameter\", \"getParameters\", \"getPaintStyle\",\n                    \"getHoverPaintStyle\", \"isVisible\", \"hasType\", \"getType\", \"isSuspendEvents\" ],\n                i, ii;\n\n            for (i = 0, ii = setters.length; i < ii; i++)\n                out[setters[i]] = setter(list, setters[i], executor);\n\n            for (i = 0, ii = getters.length; i < ii; i++)\n                out[getters[i]] = getter(list, getters[i]);\n\n            return out;\n        };\n\n        var _makeConnectionSelectHandler = function (list) {\n            var common = _makeCommonSelectHandler(list, _makeConnectionSelectHandler);\n            return jsPlumb.extend(common, {\n                // setters\n                setDetachable: setter(list, \"setDetachable\", _makeConnectionSelectHandler),\n                setReattach: setter(list, \"setReattach\", _makeConnectionSelectHandler),\n                setConnector: setter(list, \"setConnector\", _makeConnectionSelectHandler),\n                detach: function () {\n                    for (var i = 0, ii = list.length; i < ii; i++)\n                        _currentInstance.detach(list[i]);\n                },\n                // getters\n                isDetachable: getter(list, \"isDetachable\"),\n                isReattach: getter(list, \"isReattach\")\n            });\n        };\n\n        var _makeEndpointSelectHandler = function (list) {\n            var common = _makeCommonSelectHandler(list, _makeEndpointSelectHandler);\n            return jsPlumb.extend(common, {\n                setEnabled: setter(list, \"setEnabled\", _makeEndpointSelectHandler),\n                setAnchor: setter(list, \"setAnchor\", _makeEndpointSelectHandler),\n                isEnabled: getter(list, \"isEnabled\"),\n                detachAll: function () {\n                    for (var i = 0, ii = list.length; i < ii; i++)\n                        list[i].detachAll();\n                },\n                \"remove\": function () {\n                    for (var i = 0, ii = list.length; i < ii; i++)\n                        _currentInstance.deleteObject({endpoint: list[i]});\n                }\n            });\n        };\n\n        this.select = function (params) {\n            params = params || {};\n            params.scope = params.scope || \"*\";\n            return _makeConnectionSelectHandler(params.connections || _currentInstance.getConnections(params, true));\n        };\n\n        this.selectEndpoints = function (params) {\n            params = params || {};\n            params.scope = params.scope || \"*\";\n            var noElementFilters = !params.element && !params.source && !params.target,\n                elements = noElementFilters ? \"*\" : prepareList(params.element),\n                sources = noElementFilters ? \"*\" : prepareList(params.source),\n                targets = noElementFilters ? \"*\" : prepareList(params.target),\n                scopes = prepareList(params.scope, true);\n\n            var ep = [];\n\n            for (var el in endpointsByElement) {\n                var either = filterList(elements, el, true),\n                    source = filterList(sources, el, true),\n                    sourceMatchExact = sources != \"*\",\n                    target = filterList(targets, el, true),\n                    targetMatchExact = targets != \"*\";\n\n                // if they requested 'either' then just match scope. otherwise if they requested 'source' (not as a wildcard) then we have to match only endpoints that have isSource set to to true, and the same thing with isTarget.\n                if (either || source || target) {\n                    inner:\n                        for (var i = 0, ii = endpointsByElement[el].length; i < ii; i++) {\n                            var _ep = endpointsByElement[el][i];\n                            if (filterList(scopes, _ep.scope, true)) {\n\n                                var noMatchSource = (sourceMatchExact && sources.length > 0 && !_ep.isSource),\n                                    noMatchTarget = (targetMatchExact && targets.length > 0 && !_ep.isTarget);\n\n                                if (noMatchSource || noMatchTarget)\n                                    continue inner;\n\n                                ep.push(_ep);\n                            }\n                        }\n                }\n            }\n\n            return _makeEndpointSelectHandler(ep);\n        };\n\n        // get all connections managed by the instance of jsplumb.\n        this.getAllConnections = function () {\n            return connections;\n        };\n        this.getDefaultScope = function () {\n            return DEFAULT_SCOPE;\n        };\n        // get an endpoint by uuid.\n        this.getEndpoint = _getEndpoint;\n        // get endpoints for some element.\n        this.getEndpoints = function (el) {\n            return endpointsByElement[_info(el).id];\n        };\n        // gets the default endpoint type. used when subclassing. see wiki.\n        this.getDefaultEndpointType = function () {\n            return jsPlumb.Endpoint;\n        };\n        // gets the default connection type. used when subclassing.  see wiki.\n        this.getDefaultConnectionType = function () {\n            return jsPlumb.Connection;\n        };\n        /*\n         * Gets an element's id, creating one if necessary. really only exposed\n         * for the lib-specific functionality to access; would be better to pass\n         * the current instance into the lib-specific code (even though this is\n         * a static call. i just don't want to expose it to the public API).\n         */\n        this.getId = _getId;\n\n        this.appendElement = _appendElement;\n\n        var _hoverSuspended = false;\n        this.isHoverSuspended = function () {\n            return _hoverSuspended;\n        };\n        this.setHoverSuspended = function (s) {\n            _hoverSuspended = s;\n        };\n\n        // set an element's connections to be hidden\n        this.hide = function (el, changeEndpoints) {\n            _setVisible(el, \"none\", changeEndpoints);\n            return _currentInstance;\n        };\n\n        // exposed for other objects to use to get a unique id.\n        this.idstamp = _idstamp;\n\n        this.connectorsInitialized = false;\n        this.registerConnectorType = function (connector, name) {\n            connectorTypes.push([connector, name]);\n        };\n\n        // ensure that, if the current container exists, it is a DOM element and not a selector.\n        // if it does not exist and `candidate` is supplied, the offset parent of that element will be set as the Container.\n        // this is used to do a better default behaviour for the case that the user has not set a container:\n        // addEndpoint, makeSource, makeTarget and connect all call this method with the offsetParent of the\n        // element in question (for connect it is the source element). So if no container is set, it is inferred\n        // to be the offsetParent of the first element the user tries to connect.\n        var _ensureContainer = function (candidate) {\n            if (!_container && candidate) {\n                var can = _currentInstance.getElement(candidate);\n                if (can.offsetParent) _currentInstance.setContainer(can.offsetParent);\n            }\n        };\n\n        var _getContainerFromDefaults = function () {\n            if (_currentInstance.Defaults.Container)\n                _currentInstance.setContainer(_currentInstance.Defaults.Container);\n        };\n\n        // check if a given element is managed or not. if not, add to our map. if drawing is not suspended then\n        // we'll also stash its dimensions; otherwise we'll do this in a lazy way through updateOffset.\n        var _manage = _currentInstance.manage = function (id, element, _transient) {\n            if (!managedElements[id]) {\n                managedElements[id] = {\n                    el: element,\n                    endpoints: [],\n                    connections: []\n                };\n\n                managedElements[id].info = _updateOffset({ elId: id, timestamp: _suspendedAt });\n                if (!_transient) {\n                    _currentInstance.fire(\"manageElement\", { id:id, info:managedElements[id].info, el:element });\n                }\n            }\n\n            return managedElements[id];\n        };\n\n        var _unmanage = function(id) {\n            if (managedElements[id]) {\n                delete managedElements[id];\n                _currentInstance.fire(\"unmanageElement\", id);\n            }\n        };\n\n        /**\n         * updates the offset and size for a given element, and stores the\n         * values. if 'offset' is not null we use that (it would have been\n         * passed in from a drag call) because it's faster; but if it is null,\n         * or if 'recalc' is true in order to force a recalculation, we get the current values.\n         */\n        var _updateOffset = this.updateOffset = function (params) {\n\n            var timestamp = params.timestamp, recalc = params.recalc, offset = params.offset, elId = params.elId, s;\n            if (_suspendDrawing && !timestamp) timestamp = _suspendedAt;\n            if (!recalc) {\n                if (timestamp && timestamp === offsetTimestamps[elId]) {\n                    return {o: params.offset || offsets[elId], s: sizes[elId]};\n                }\n            }\n            if (recalc || (!offset && offsets[elId] == null)) { // if forced repaint or no offset available, we recalculate.\n\n                // get the current size and offset, and store them\n                s = managedElements[elId] ? managedElements[elId].el : null;\n                if (s != null) {\n                    sizes[elId] = _currentInstance.getSize(s);\n                    offsets[elId] = _currentInstance.getOffset(s);\n                    offsetTimestamps[elId] = timestamp;\n                }\n            } else {\n                offsets[elId] = offset || offsets[elId];\n                if (sizes[elId] == null) {\n                    s = managedElements[elId].el;\n                    if (s != null) sizes[elId] = _currentInstance.getSize(s);\n                }\n                offsetTimestamps[elId] = timestamp;\n            }\n\n            if (offsets[elId] && !offsets[elId].right) {\n                offsets[elId].right = offsets[elId].left + sizes[elId][0];\n                offsets[elId].bottom = offsets[elId].top + sizes[elId][1];\n                offsets[elId].width = sizes[elId][0];\n                offsets[elId].height = sizes[elId][1];\n                offsets[elId].centerx = offsets[elId].left + (offsets[elId].width / 2);\n                offsets[elId].centery = offsets[elId].top + (offsets[elId].height / 2);\n            }\n\n            return {o: offsets[elId], s: sizes[elId]};\n        };\n\n        /**\n         * callback from the current library to tell us to prepare ourselves (attach\n         * mouse listeners etc; can't do that until the library has provided a bind method)\n         */\n        this.init = function () {\n            rendererTypes = root.jsPlumb.getRenderModes();\n\n            var _oneType = function (renderer, name, fn) {\n                root.jsPlumb.Connectors[renderer][name] = function () {\n                    fn.apply(this, arguments);\n                    root.jsPlumb.ConnectorRenderers[renderer].apply(this, arguments);\n                };\n                _ju.extend(root.jsPlumb.Connectors[renderer][name], [ fn, root.jsPlumb.ConnectorRenderers[renderer]]);\n            };\n\n            if (!root.jsPlumb.connectorsInitialized) {\n                for (var i = 0; i < connectorTypes.length; i++) {\n                    for (var j = 0; j < rendererTypes.length; j++) {\n                        _oneType(rendererTypes[j], connectorTypes[i][1], connectorTypes[i][0]);\n                    }\n\n                }\n                root.jsPlumb.connectorsInitialized = true;\n            }\n\n            if (!initialized) {\n                _getContainerFromDefaults();\n                _currentInstance.anchorManager = new root.jsPlumb.AnchorManager({jsPlumbInstance: _currentInstance});\n                initialized = true;\n                _currentInstance.fire(\"ready\", _currentInstance);\n            }\n        }.bind(this);\n\n        this.log = log;\n        this.jsPlumbUIComponent = jsPlumbUIComponent;\n\n        /*\n         * Creates an anchor with the given params.\n         *\n         *\n         * Returns: The newly created Anchor.\n         * Throws: an error if a named anchor was not found.\n         */\n        this.makeAnchor = function () {\n            var pp, _a = function (t, p) {\n                if (root.jsPlumb.Anchors[t]) return new root.jsPlumb.Anchors[t](p);\n                if (!_currentInstance.Defaults.DoNotThrowErrors)\n                    throw { msg: \"jsPlumb: unknown anchor type '\" + t + \"'\" };\n            };\n            if (arguments.length === 0) return null;\n            var specimen = arguments[0], elementId = arguments[1], jsPlumbInstance = arguments[2], newAnchor = null;\n            // if it appears to be an anchor already...\n            if (specimen.compute && specimen.getOrientation) return specimen;  //TODO hazy here about whether it should be added or is already added somehow.\n            // is it the name of an anchor type?\n            else if (typeof specimen == \"string\") {\n                newAnchor = _a(arguments[0], {elementId: elementId, jsPlumbInstance: _currentInstance});\n            }\n            // is it an array? it will be one of:\n            //         an array of [spec, params] - this defines a single anchor, which may be dynamic, but has parameters.\n            //        an array of arrays - this defines some dynamic anchors\n            //        an array of numbers - this defines a single anchor.\n            else if (_ju.isArray(specimen)) {\n                if (_ju.isArray(specimen[0]) || _ju.isString(specimen[0])) {\n                    // if [spec, params] format\n                    if (specimen.length == 2 && _ju.isObject(specimen[1])) {\n                        // if first arg is a string, its a named anchor with params\n                        if (_ju.isString(specimen[0])) {\n                            pp = root.jsPlumb.extend({elementId: elementId, jsPlumbInstance: _currentInstance}, specimen[1]);\n                            newAnchor = _a(specimen[0], pp);\n                        }\n                        // otherwise first arg is array, second is params. we treat as a dynamic anchor, which is fine\n                        // even if the first arg has only one entry. you could argue all anchors should be implicitly dynamic in fact.\n                        else {\n                            pp = root.jsPlumb.extend({elementId: elementId, jsPlumbInstance: _currentInstance, anchors: specimen[0]}, specimen[1]);\n                            newAnchor = new root.jsPlumb.DynamicAnchor(pp);\n                        }\n                    }\n                    else\n                        newAnchor = new jsPlumb.DynamicAnchor({anchors: specimen, selector: null, elementId: elementId, jsPlumbInstance: _currentInstance});\n\n                }\n                else {\n                    var anchorParams = {\n                        x: specimen[0], y: specimen[1],\n                        orientation: (specimen.length >= 4) ? [ specimen[2], specimen[3] ] : [0, 0],\n                        offsets: (specimen.length >= 6) ? [ specimen[4], specimen[5] ] : [ 0, 0 ],\n                        elementId: elementId,\n                        jsPlumbInstance: _currentInstance,\n                        cssClass: specimen.length == 7 ? specimen[6] : null\n                    };\n                    newAnchor = new root.jsPlumb.Anchor(anchorParams);\n                    newAnchor.clone = function () {\n                        return new root.jsPlumb.Anchor(anchorParams);\n                    };\n                }\n            }\n\n            if (!newAnchor.id) newAnchor.id = \"anchor_\" + _idstamp();\n            return newAnchor;\n        };\n\n        /**\n         * makes a list of anchors from the given list of types or coords, eg\n         * [\"TopCenter\", \"RightMiddle\", \"BottomCenter\", [0, 1, -1, -1] ]\n         */\n        this.makeAnchors = function (types, elementId, jsPlumbInstance) {\n            var r = [];\n            for (var i = 0, ii = types.length; i < ii; i++) {\n                if (typeof types[i] == \"string\")\n                    r.push(root.jsPlumb.Anchors[types[i]]({elementId: elementId, jsPlumbInstance: jsPlumbInstance}));\n                else if (_ju.isArray(types[i]))\n                    r.push(_currentInstance.makeAnchor(types[i], elementId, jsPlumbInstance));\n            }\n            return r;\n        };\n\n        /**\n         * Makes a dynamic anchor from the given list of anchors (which may be in shorthand notation as strings or dimension arrays, or Anchor\n         * objects themselves) and the given, optional, anchorSelector function (jsPlumb uses a default if this is not provided; most people will\n         * not need to provide this - i think).\n         */\n        this.makeDynamicAnchor = function (anchors, anchorSelector) {\n            return new root.jsPlumb.DynamicAnchor({anchors: anchors, selector: anchorSelector, elementId: null, jsPlumbInstance: _currentInstance});\n        };\n\n// --------------------- makeSource/makeTarget ---------------------------------------------- \n\n        this.targetEndpointDefinitions = {};\n        var _setEndpointPaintStylesAndAnchor = function (ep, epIndex, _instance) {\n           /* ep.paintStyle = ep.paintStyle ||\n                _instance.Defaults.EndpointStyles[epIndex] ||\n                _instance.Defaults.EndpointStyle;\n\n            ep.hoverPaintStyle = ep.hoverPaintStyle ||\n                _instance.Defaults.EndpointHoverStyles[epIndex] ||\n                _instance.Defaults.EndpointHoverStyle;\n\n            ep.anchor = ep.anchor ||\n                _instance.Defaults.Anchors[epIndex] ||\n                _instance.Defaults.Anchor;\n\n            ep.endpoint = ep.endpoint ||\n                _instance.Defaults.Endpoints[epIndex] ||\n                _instance.Defaults.Endpoint;*/\n        };\n\n        // TODO put all the source stuff inside one parent, keyed by id.\n        this.sourceEndpointDefinitions = {};\n\n        var selectorFilter = function (evt, _el, selector, _instance, negate) {\n            var t = evt.target || evt.srcElement, ok = false,\n                sel = _instance.getSelector(_el, selector);\n            for (var j = 0; j < sel.length; j++) {\n                if (sel[j] == t) {\n                    ok = true;\n                    break;\n                }\n            }\n            return negate ? !ok : ok;\n        };\n\n        // SP target source refactor\n        var _makeElementDropHandler = function (elInfo, p, dropOptions, isSource, isTarget) {\n            var proxyComponent = new jsPlumbUIComponent(p);\n            var _drop = p._jsPlumb.EndpointDropHandler({\n                jsPlumb: _currentInstance,\n                enabled: function () {\n                    return elInfo.def.enabled;\n                },\n                isFull: function () {\n                    var targetCount = _currentInstance.select({target: elInfo.id}).length;\n                    return elInfo.def.maxConnections > 0 && targetCount >= elInfo.def.maxConnections;\n                },\n                element: elInfo.el,\n                elementId: elInfo.id,\n                isSource: isSource,\n                isTarget: isTarget,\n                addClass: function (clazz) {\n                    _currentInstance.addClass(elInfo.el, clazz);\n                },\n                removeClass: function (clazz) {\n                    _currentInstance.removeClass(elInfo.el, clazz);\n                },\n                onDrop: function (jpc) {\n                    var source = jpc.endpoints[0];\n                    source.anchor.locked = false;\n                },\n                isDropAllowed: function () {\n                    return proxyComponent.isDropAllowed.apply(proxyComponent, arguments);\n                },\n                isRedrop:function(jpc) {\n                    return (jpc.suspendedElement != null && jpc.suspendedEndpoint != null && jpc.suspendedEndpoint.element === elInfo.el);\n                },\n                getEndpoint: function (jpc) {\n\n                    // make a new Endpoint for the target, or get it from the cache if uniqueEndpoint\n                    // is set. if its a redrop the new endpoint will be immediately cleaned up.\n\n                    var newEndpoint = elInfo.def.endpoint;\n\n                    // if no cached endpoint, or there was one but it has been cleaned up\n                    // (ie. detached), create a new one\n                    if (newEndpoint == null || newEndpoint._jsPlumb == null) {\n                        var eps = _currentInstance.deriveEndpointAndAnchorSpec(jpc.getType().join(\" \"), true);\n                        var pp = eps.endpoints ? root.jsPlumb.extend(p, {\n                            endpoint:elInfo.def.def.endpoint || eps.endpoints[1]\n                        }) :p;\n                        if (eps.anchors) {\n                            pp = root.jsPlumb.extend(pp, {\n                                anchor:elInfo.def.def.anchor || eps.anchors[1]\n                            });\n                        }\n                        newEndpoint = _currentInstance.addEndpoint(elInfo.el, pp);\n                        newEndpoint._mtNew = true;\n                    }\n\n                    if (p.uniqueEndpoint) elInfo.def.endpoint = newEndpoint;  // may of course just store what it just pulled out. that's ok.\n                    // TODO test options to makeTarget to see if we should do this?\n                    newEndpoint._doNotDeleteOnDetach = false; // reset.\n                    newEndpoint._deleteOnDetach = true;\n\n                    // if connection is detachable, init the new endpoint to be draggable, to support that happening.\n                    if (jpc.isDetachable())\n                        newEndpoint.initDraggable();\n\n                    // if the anchor has a 'positionFinder' set, then delegate to that function to find\n                    // out where to locate the anchor.\n                    if (newEndpoint.anchor.positionFinder != null) {\n                        var dropPosition = _currentInstance.getUIPosition(arguments, _currentInstance.getZoom()),\n                            elPosition = _currentInstance.getOffset(elInfo.el),\n                            elSize = _currentInstance.getSize(elInfo.el),\n                            ap = dropPosition == null ? [0,0] : newEndpoint.anchor.positionFinder(dropPosition, elPosition, elSize, newEndpoint.anchor.constructorParams);\n\n                        newEndpoint.anchor.x = ap[0];\n                        newEndpoint.anchor.y = ap[1];\n                        // now figure an orientation for it..kind of hard to know what to do actually. probably the best thing i can do is to\n                        // support specifying an orientation in the anchor's spec. if one is not supplied then i will make the orientation\n                        // be what will cause the most natural link to the source: it will be pointing at the source, but it needs to be\n                        // specified in one axis only, and so how to make that choice? i think i will use whichever axis is the one in which\n                        // the target is furthest away from the source.\n                    }\n\n                    return newEndpoint;\n                },\n                maybeCleanup: function (ep) {\n                    if (ep._mtNew && ep.connections.length === 0) {\n                        _currentInstance.deleteObject({endpoint: ep});\n                    }\n                    else\n                        delete ep._mtNew;\n                }\n            });\n\n            // wrap drop events as needed and initialise droppable\n            var dropEvent = root.jsPlumb.dragEvents.drop;\n            dropOptions.scope = dropOptions.scope || (p.scope || _currentInstance.Defaults.Scope);\n            dropOptions[dropEvent] = _ju.wrap(dropOptions[dropEvent], _drop, true);\n\n            // if target, return true from the over event. this will cause katavorio to stop setting drops to hover\n            // if multipleDrop is set to false.\n            if (isTarget) {\n                dropOptions[root.jsPlumb.dragEvents.over] = function () { return true; };\n            }\n\n            // vanilla jsplumb only\n            if (p.allowLoopback === false) {\n                dropOptions.canDrop = function (_drag) {\n                    var de = _drag.getDragElement()._jsPlumbRelatedElement;\n                    return de != elInfo.el;\n                };\n            }\n            _currentInstance.initDroppable(elInfo.el, dropOptions, \"internal\");\n\n            return _drop;\n\n        };\n\n        // see API docs\n        this.makeTarget = function (el, params, referenceParams) {\n\n            // put jsplumb ref into params without altering the params passed in\n            var p = root.jsPlumb.extend({_jsPlumb: this}, referenceParams);\n            root.jsPlumb.extend(p, params);\n\n            // calculate appropriate paint styles and anchor from the params given\n            _setEndpointPaintStylesAndAnchor(p, 1, this);\n\n            var deleteEndpointsOnDetach = !(p.deleteEndpointsOnDetach === false),\n                maxConnections = p.maxConnections || -1,\n\n                _doOne = function (el) {\n\n                    // get the element's id and store the endpoint definition for it.  jsPlumb.connect calls will look for one of these,\n                    // and use the endpoint definition if found.\n                    // decode the info for this element (id and element)\n                    var elInfo = _info(el),\n                        elid = elInfo.id,\n                        dropOptions = root.jsPlumb.extend({}, p.dropOptions || {}),\n                        type = \"default\";\n\n                    this.targetEndpointDefinitions[elid] = this.targetEndpointDefinitions[elid] || {};\n\n                    _ensureContainer(elid);\n\n                    // store the definition\n                    var _def = {\n                        def: root.jsPlumb.extend({}, p),\n                        uniqueEndpoint: p.uniqueEndpoint,\n                        maxConnections: maxConnections,\n                        enabled: true\n                    };\n                    elInfo.def = _def;\n                    this.targetEndpointDefinitions[elid][type] = _def;\n                    _makeElementDropHandler(elInfo, p, dropOptions, p.isSource === true, true);\n                    // stash the definition on the drop\n                    elInfo.el._katavorioDrop[elInfo.el._katavorioDrop.length - 1].targetDef = _def;\n\n                }.bind(this);\n\n            // make an array if only given one element\n            var inputs = el.length && el.constructor != String ? el : [ el ];\n\n            // register each one in the list.\n            for (var i = 0, ii = inputs.length; i < ii; i++) {\n                _doOne(inputs[i]);\n            }\n\n            return this;\n        };\n\n        // see api docs\n        this.unmakeTarget = function (el, doNotClearArrays) {\n            var info = _info(el);\n            _currentInstance.destroyDroppable(info.el, \"internal\");\n            if (!doNotClearArrays) {\n                delete this.targetEndpointDefinitions[info.id];\n            }\n\n            return this;\n        };\n\n        // see api docs\n        this.makeSource = function (el, params, referenceParams) {\n            var p = root.jsPlumb.extend({_jsPlumb: this}, referenceParams);\n            root.jsPlumb.extend(p, params);\n            var type = p.connectionType || \"default\";\n            var aae = _currentInstance.deriveEndpointAndAnchorSpec(type);\n            p.endpoint = p.endpoint || aae.endpoints[0];\n            p.anchor = p.anchor || aae.anchors[0];\n            _setEndpointPaintStylesAndAnchor(p, 0, this);\n            var maxConnections = p.maxConnections || -1,\n                onMaxConnections = p.onMaxConnections,\n                _doOne = function (elInfo) {\n                    // get the element's id and store the endpoint definition for it.  jsPlumb.connect calls will look for one of these,\n                    // and use the endpoint definition if found.\n                    var elid = elInfo.id,\n                        _del = this.getElement(elInfo.el);\n\n                    this.sourceEndpointDefinitions[elid] = this.sourceEndpointDefinitions[elid] || {};\n                    _ensureContainer(elid);\n\n                    var _def = {\n                        def:root.jsPlumb.extend({}, p),\n                        uniqueEndpoint: p.uniqueEndpoint,\n                        maxConnections: maxConnections,\n                        enabled: true\n                    };\n\n\n                    this.sourceEndpointDefinitions[elid][type] = _def;\n                    elInfo.def = _def;\n\n                    var stopEvent = root.jsPlumb.dragEvents.stop,\n                        dragEvent = root.jsPlumb.dragEvents.drag,\n                        dragOptions = root.jsPlumb.extend({ }, p.dragOptions || {}),\n                        existingDrag = dragOptions.drag,\n                        existingStop = dragOptions.stop,\n                        ep = null,\n                        endpointAddedButNoDragYet = false;\n\n                    // set scope if its not set in dragOptions but was passed in in params\n                    dragOptions.scope = dragOptions.scope || p.scope;\n\n                    dragOptions[dragEvent] = _ju.wrap(dragOptions[dragEvent], function () {\n                        if (existingDrag) existingDrag.apply(this, arguments);\n                        endpointAddedButNoDragYet = false;\n                    });\n\n                    dragOptions[stopEvent] = _ju.wrap(dragOptions[stopEvent], function () {\n\n                        if (existingStop) existingStop.apply(this, arguments);\n                        this.currentlyDragging = false;\n                        if (ep._jsPlumb != null) { // if not cleaned up...\n\n                            // reset the anchor to the anchor that was initially provided. the one we were using to drag\n                            // the connection was just a placeholder that was located at the place the user pressed the\n                            // mouse button to initiate the drag.\n                            var anchorDef = p.anchor || this.Defaults.Anchor,\n                                oldAnchor = ep.anchor,\n                                oldConnection = ep.connections[0];\n\n                            var    newAnchor = this.makeAnchor(anchorDef, elid, this),\n                                _el = ep.element;\n\n                            // if the anchor has a 'positionFinder' set, then delegate to that function to find\n                            // out where to locate the anchor. issue 117.\n                            if (newAnchor.positionFinder != null) {\n                                var elPosition = _currentInstance.getOffset(_el),\n                                    elSize = this.getSize(_el),\n                                    dropPosition = { left: elPosition.left + (oldAnchor.x * elSize[0]), top: elPosition.top + (oldAnchor.y * elSize[1]) },\n                                    ap = newAnchor.positionFinder(dropPosition, elPosition, elSize, newAnchor.constructorParams);\n\n                                newAnchor.x = ap[0];\n                                newAnchor.y = ap[1];\n                            }\n\n                            ep.setAnchor(newAnchor, true);\n                            ep.repaint();\n                            this.repaint(ep.elementId);\n                            if (oldConnection != null) this.repaint(oldConnection.targetId);\n                        }\n                    }.bind(this));\n\n                    // when the user presses the mouse, add an Endpoint, if we are enabled.\n                    var mouseDownListener = function (e) {\n                        // on right mouse button, abort.\n                        if (e.which === 3 || e.button === 2) return;\n\n                        // TODO store def on element.\n                        var def = this.sourceEndpointDefinitions[elid][type];\n\n                        // if disabled, return.\n                        if (!def.enabled) return;\n\n                        elid = this.getId(this.getElement(elInfo.el)); // elid might have changed since this method was called to configure the element.\n\n                        // if a filter was given, run it, and return if it says no.\n                        if (p.filter) {\n                            var r = _ju.isString(p.filter) ? selectorFilter(e, elInfo.el, p.filter, this, p.filterExclude) : p.filter(e, elInfo.el);\n                            if (r === false) return;\n                        }\n\n                        // if maxConnections reached\n                        var sourceCount = this.select({source: elid}).length;\n                        if (def.maxConnections >= 0 && (sourceCount >= def.maxConnections)) {\n                            if (onMaxConnections) {\n                                onMaxConnections({\n                                    element: elInfo.el,\n                                    maxConnections: maxConnections\n                                }, e);\n                            }\n                            return false;\n                        }\n\n                        // find the position on the element at which the mouse was pressed; this is where the endpoint\n                        // will be located.\n                        var elxy = root.jsPlumb.getPositionOnElement(e, _del, _zoom);\n\n                        // we need to override the anchor in here, and force 'isSource', but we don't want to mess with\n                        // the params passed in, because after a connection is established we're going to reset the endpoint\n                        // to have the anchor we were given.\n                        var tempEndpointParams = {};\n                        root.jsPlumb.extend(tempEndpointParams, p);\n                        tempEndpointParams.isTemporarySource = true;\n                        tempEndpointParams.anchor = [ elxy[0], elxy[1] , 0, 0];\n                        tempEndpointParams.dragOptions = dragOptions;\n\n                        if (def.def.scope) tempEndpointParams.scope = def.def.scope;\n\n                        ep = this.addEndpoint(elid, tempEndpointParams);\n                        endpointAddedButNoDragYet = true;\n                        ep._doNotDeleteOnDetach = false; // reset.\n                        ep._deleteOnDetach = true;\n\n                        // if unique endpoint and it's already been created, push it onto the endpoint we create. at the end\n                        // of a successful connection we'll switch to that endpoint.\n                        // TODO this is the same code as the programmatic endpoints create on line 1050 ish\n                        if (def.uniqueEndpoint) {\n                            if (!def.endpoint) {\n                                def.endpoint = ep;\n                                ep._deleteOnDetach = false;\n                                ep._doNotDeleteOnDetach = true;\n                            }\n                            else\n                                ep.finalEndpoint = def.endpoint;\n                        }\n\n                        var _delTempEndpoint = function () {\n                            // this mouseup event is fired only if no dragging occurred, by jquery and yui, but for mootools\n                            // it is fired even if dragging has occurred, in which case we would blow away a perfectly\n                            // legitimate endpoint, were it not for this check.  the flag is set after adding an\n                            // endpoint and cleared in a drag listener we set in the dragOptions above.\n                            _currentInstance.off(ep.canvas, \"mouseup\", _delTempEndpoint);\n                            _currentInstance.off(elInfo.el, \"mouseup\", _delTempEndpoint);\n                            if (endpointAddedButNoDragYet) {\n                                endpointAddedButNoDragYet = false;\n                                _currentInstance.deleteEndpoint(ep);\n                            }\n                        };\n\n                        _currentInstance.on(ep.canvas, \"mouseup\", _delTempEndpoint);\n                        _currentInstance.on(elInfo.el, \"mouseup\", _delTempEndpoint);\n\n                        // optionally check for attributes to extract from the source element\n                        var payload = {};\n                        if (def.def.extract) {\n                            for (var att in def.def.extract) {\n                                var v = (e.srcElement || e.target).getAttribute(att);\n                                if (v) {\n                                    payload[def.def.extract[att]] = v;\n                                }\n                            }\n                        }\n\n                        // and then trigger its mousedown event, which will kick off a drag, which will start dragging\n                        // a new connection from this endpoint.\n                        _currentInstance.trigger(ep.canvas, \"mousedown\", e, payload);\n\n                        _ju.consume(e);\n\n                    }.bind(this);\n\n                    this.on(elInfo.el, \"mousedown\", mouseDownListener);\n                    _def.trigger = mouseDownListener;\n\n                    // if a filter was provided, set it as a dragFilter on the element,\n                    // to prevent the element drag function from kicking in when we want to\n                    // drag a new connection\n                    if (p.filter && (_ju.isString(p.filter) || _ju.isFunction(p.filter))) {\n                        _currentInstance.setDragFilter(elInfo.el, p.filter);\n                    }\n\n                    var dropOptions = root.jsPlumb.extend({}, p.dropOptions || {});\n\n                    _makeElementDropHandler(elInfo, p, dropOptions, true, p.isTarget === true);\n\n                }.bind(this);\n\n            var inputs = el.length && el.constructor != String ? el : [ el ];\n            for (var i = 0, ii = inputs.length; i < ii; i++) {\n                _doOne(_info(inputs[i]));\n            }\n\n            return this;\n        };\n\n        // see api docs\n        this.unmakeSource = function (el, connectionType, doNotClearArrays) {\n            var info = _info(el);\n            _currentInstance.destroyDroppable(info.el, \"internal\");\n            var eldefs = this.sourceEndpointDefinitions[info.id];\n            if (eldefs) {\n                for (var def in eldefs) {\n                    if (connectionType == null || connectionType === def) {\n                        var mouseDownListener = eldefs[def].trigger;\n                        if (mouseDownListener)\n                            _currentInstance.off(info.el, \"mousedown\", mouseDownListener);\n                        if (!doNotClearArrays) {\n                            delete this.sourceEndpointDefinitions[info.id][def];\n                        }\n                    }\n                }\n            }\n\n            return this;\n        };\n\n        // see api docs\n        this.unmakeEverySource = function () {\n            for (var i in this.sourceEndpointDefinitions)\n                _currentInstance.unmakeSource(i, null, true);\n\n            this.sourceEndpointDefinitions = {};\n            return this;\n        };\n\n        var _getScope = function (el, types, connectionType) {\n            types = _ju.isArray(types) ? types : [ types ];\n            var id = _getId(el);\n            connectionType = connectionType || \"default\";\n            for (var i = 0; i < types.length; i++) {\n                var eldefs = this[types[i]][id];\n                if (eldefs && eldefs[connectionType]) return eldefs[connectionType].def.scope || this.Defaults.Scope;\n            }\n        }.bind(this);\n\n        var _setScope = function (el, scope, types, connectionType) {\n            types = _ju.isArray(types) ? types : [ types ];\n            var id = _getId(el);\n            connectionType = connectionType || \"default\";\n            for (var i = 0; i < types.length; i++) {\n                var eldefs = this[types[i]][id];\n                if (eldefs && eldefs[connectionType]) {\n                    eldefs[connectionType].def.scope = scope;\n                }\n            }\n\n        }.bind(this);\n\n        this.getScope = function (el, scope) {\n            return _getScope(el, [ \"sourceEndpointDefinitions\", \"targetEndpointDefinitions\" ]);\n        };\n        this.getSourceScope = function (el) {\n            return _getScope(el, \"sourceEndpointDefinitions\");\n        };\n        this.getTargetScope = function (el) {\n            return _getScope(el, \"targetEndpointDefinitions\");\n        };\n        this.setScope = function (el, scope, connectionType) {\n            this.setSourceScope(el, scope, connectionType);\n            this.setTargetScope(el, scope, connectionType);\n        };\n        this.setSourceScope = function (el, scope, connectionType) {\n            _setScope(el, scope, \"sourceEndpointDefinitions\", connectionType);\n            // we get the source scope during the mousedown event, but we also want to set this.\n            this.setDragScope(el, scope);\n        };\n        this.setTargetScope = function (el, scope, connectionType) {\n            _setScope(el, scope, \"targetEndpointDefinitions\", connectionType);\n            this.setDropScope(el, scope);\n        };\n\n        // see api docs\n        this.unmakeEveryTarget = function () {\n            for (var i in this.targetEndpointDefinitions)\n                _currentInstance.unmakeTarget(i, true);\n\n            this.targetEndpointDefinitions = {};\n            return this;\n        };\n\n        // does the work of setting a source enabled or disabled.\n        var _setEnabled = function (type, el, state, toggle, connectionType) {\n            var a = type == \"source\" ? this.sourceEndpointDefinitions : this.targetEndpointDefinitions;\n            connectionType = connectionType || \"default\";\n\n\n            if (_ju.isString(el) && a[el] && a[el][connectionType]) {\n                a[el][connectionType].enabled = toggle ? !a[el][connectionType].enabled : state;\n            }\n            else if (el.length) {\n                for (var i = 0, ii = el.length; i < ii; i++) {\n                    var info = _info(el[i]);\n                    if (a[info.id] && a[info.id][connectionType])\n                        a[info.id][connectionType].enabled = toggle ? !a[info.id][connectionType].enabled : state;\n                }\n            }\n            // otherwise a DOM element\n            else {\n                var id = _info(el).id;\n                if (a[id] && a[id][connectionType])\n                    a[id][connectionType].enabled = toggle ? !a[id][connectionType].enabled : state;\n            }\n            return this;\n        }.bind(this);\n\n        var _first = function (el, fn) {\n            if (_ju.isString(el) || !el.length)\n                return fn.apply(this, [ el ]);\n            else if (el.length)\n                return fn.apply(this, [ el[0] ]);\n\n        }.bind(this);\n\n        this.toggleSourceEnabled = function (el, connectionType) {\n            _setEnabled(\"source\", el, null, true, connectionType);\n            return this.isSourceEnabled(el, connectionType);\n        };\n\n        this.setSourceEnabled = function (el, state, connectionType) {\n            return _setEnabled(\"source\", el, state, null, connectionType);\n        };\n        this.isSource = function (el, connectionType) {\n            connectionType = connectionType || \"default\";\n            return _first(el, function (_el) {\n                var eldefs = this.sourceEndpointDefinitions[_info(_el).id];\n                return eldefs != null && eldefs[connectionType] != null;\n            }.bind(this));\n        };\n        this.isSourceEnabled = function (el, connectionType) {\n            connectionType = connectionType || \"default\";\n            return _first(el, function (_el) {\n                var sep = this.sourceEndpointDefinitions[_info(_el).id];\n                return sep && sep[connectionType] && sep[connectionType].enabled === true;\n            }.bind(this));\n        };\n\n        this.toggleTargetEnabled = function (el, connectionType) {\n            _setEnabled(\"target\", el, null, true, connectionType);\n            return this.isTargetEnabled(el, connectionType);\n        };\n\n        this.isTarget = function (el, connectionType) {\n            connectionType = connectionType || \"default\";\n            return _first(el, function (_el) {\n                var eldefs = this.targetEndpointDefinitions[_info(_el).id];\n                return eldefs != null && eldefs[connectionType] != null;\n            }.bind(this));\n        };\n        this.isTargetEnabled = function (el, connectionType) {\n            connectionType = connectionType || \"default\";\n            return _first(el, function (_el) {\n                var tep = this.targetEndpointDefinitions[_info(_el).id];\n                return tep && tep[connectionType] && tep[connectionType].enabled === true;\n            }.bind(this));\n        };\n        this.setTargetEnabled = function (el, state, connectionType) {\n            return _setEnabled(\"target\", el, state, null, connectionType);\n        };\n\n// --------------------- end makeSource/makeTarget ----------------------------------------------                 \n\n        this.ready = function (fn) {\n            _currentInstance.bind(\"ready\", fn);\n        };\n\n        var _elEach = function(el, fn) {\n            // support both lists...\n            if (typeof el == 'object' && el.length)\n                for (var i = 0, ii = el.length; i < ii; i++) {\n                    fn(el[i]);\n                }\n            else // ...and single strings or elements.\n                fn(el);\n\n            return _currentInstance;\n        };\n\n        // repaint some element's endpoints and connections\n        this.repaint = function (el, ui, timestamp) {\n            return _elEach(el, function(_el) {\n                _draw(_el, ui, timestamp);\n            });\n        };\n\n        this.revalidate = function (el, timestamp, isIdAlready) {\n            return _elEach(el, function(_el) {\n                var elId = isIdAlready ? _el : _currentInstance.getId(_el);\n                _currentInstance.updateOffset({ elId: elId, recalc: true, timestamp:timestamp });\n                _currentInstance.repaint(_el);\n            });\n        };\n\n        // repaint every endpoint and connection.\n        this.repaintEverything = function () {\n            // TODO this timestamp causes continuous anchors to not repaint properly.\n            // fix this. do not just take out the timestamp. it runs a lot faster with\n            // the timestamp included.\n            var timestamp = _timestamp(), elId;\n\n            for (elId in endpointsByElement) {\n                _currentInstance.updateOffset({ elId: elId, recalc: true, timestamp: timestamp });\n            }\n\n            for (elId in endpointsByElement) {\n                _draw(elId, null, timestamp);\n            }\n\n            return this;\n        };\n\n        this.removeAllEndpoints = function (el, recurse, affectedElements) {\n            affectedElements = affectedElements || [];\n            var _one = function (_el) {\n                var info = _info(_el),\n                    ebe = endpointsByElement[info.id],\n                    i, ii;\n\n                if (ebe) {\n                    affectedElements.push(info);\n                    for (i = 0, ii = ebe.length; i < ii; i++)\n                        _currentInstance.deleteEndpoint(ebe[i], false);\n                }\n                delete endpointsByElement[info.id];\n\n                if (recurse) {\n                    if (info.el && info.el.nodeType != 3 && info.el.nodeType != 8) {\n                        for (i = 0, ii = info.el.childNodes.length; i < ii; i++) {\n                            _one(info.el.childNodes[i]);\n                        }\n                    }\n                }\n\n            };\n            _one(el);\n            return this;\n        };\n\n        var _doRemove = function(info, affectedElements) {\n            _currentInstance.removeAllEndpoints(info.id, true, affectedElements);\n            var _one = function(_info) {\n                _currentInstance.getDragManager().elementRemoved(_info.id);\n                _currentInstance.anchorManager.clearFor(_info.id);\n                _currentInstance.anchorManager.removeFloatingConnection(_info.id);\n\n                if (_currentInstance.isSource(_info.el)) _currentInstance.unmakeSource(_info.el);\n                if (_currentInstance.isTarget(_info.el)) _currentInstance.unmakeTarget(_info.el);\n                _currentInstance.destroyDraggable(_info.el);\n                _currentInstance.destroyDroppable(_info.el);\n\n\n                delete _currentInstance.floatingConnections[_info.id];\n                delete managedElements[_info.id];\n                delete offsets[_info.id];\n                if (_info.el) {\n                    _currentInstance.removeElement(_info.el);\n                    _info.el._jsPlumb = null;\n                }\n            };\n\n            // remove all affected child elements\n            for (var ae = 1; ae < affectedElements.length; ae++) {\n                _one(affectedElements[ae]);\n            }\n            // and always remove the requested one from the dom.\n            _one(info);\n        };\n\n        /**\n         * Remove the given element, including cleaning up all endpoints registered for it.\n         * This is exposed in the public API but also used internally by jsPlumb when removing the\n         * element associated with a connection drag.\n         */\n        this.remove = function (el, doNotRepaint) {\n            var info = _info(el), affectedElements = [];\n            if (info.text) {\n                info.el.parentNode.removeChild(info.el);\n            }\n            else if (info.id) {\n                _currentInstance.batch(function () {\n                    _doRemove(info, affectedElements);\n                }, doNotRepaint === false);\n            }\n            return _currentInstance;\n        };\n\n        this.empty = function (el, doNotRepaint) {\n            var affectedElements = [];\n            var _one = function(el, dontRemoveFocus) {\n                var info = _info(el);\n                if (info.text) {\n                    info.el.parentNode.removeChild(info.el);\n                }\n                else if (info.el) {\n                    while(info.el.childNodes.length > 0) {\n                        _one(info.el.childNodes[0]);\n                    }\n                    if (!dontRemoveFocus) _doRemove(info, affectedElements);\n                }\n            };\n\n            _currentInstance.batch(function() {\n                _one(el, true);\n            }, doNotRepaint === false);\n\n            return _currentInstance;\n        };\n\n        this.reset = function () {\n            _currentInstance.silently(function() {\n                _currentInstance.removeAllGroups();\n                _currentInstance.removeGroupManager();\n                _currentInstance.deleteEveryEndpoint();\n                _currentInstance.unbind();\n                this.targetEndpointDefinitions = {};\n                this.sourceEndpointDefinitions = {};\n                connections.length = 0;\n                if (this.doReset) this.doReset();\n            }.bind(this));\n        };\n\n        var _clearObject = function (obj) {\n            if (obj.canvas && obj.canvas.parentNode)\n                obj.canvas.parentNode.removeChild(obj.canvas);\n            obj.cleanup();\n            obj.destroy();\n        };\n\n        this.clear = function () {\n            _currentInstance.select().each(_clearObject);\n            _currentInstance.selectEndpoints().each(_clearObject);\n\n            endpointsByElement = {};\n            endpointsByUUID = {};\n        };\n\n        this.setDefaultScope = function (scope) {\n            DEFAULT_SCOPE = scope;\n            return _currentInstance;\n        };\n\n        // sets whether or not some element should be currently draggable.\n        this.setDraggable = _setDraggable;\n\n        this.deriveEndpointAndAnchorSpec = function(type, dontPrependDefault) {\n            var bits = ((dontPrependDefault ? \"\" : \"default \") + type).split(/[\\s]/), eps = null, ep = null, a = null, as = null;\n            for (var i = 0; i < bits.length; i++) {\n                var _t = _currentInstance.getType(bits[i], \"connection\");\n                if (_t) {\n                    if (_t.endpoints) eps = _t.endpoints;\n                    if (_t.endpoint) ep = _t.endpoint;\n                    if (_t.anchors) as = _t.anchors;\n                    if (_t.anchor) a = _t.anchor;\n                }\n            }\n            return { endpoints: eps ? eps : [ ep, ep ], anchors: as ? as : [a, a ]};\n        };\n\n        // sets the id of some element, changing whatever we need to to keep track.\n        this.setId = function (el, newId, doNotSetAttribute) {\n            //\n            var id;\n\n            if (_ju.isString(el)) {\n                id = el;\n            }\n            else {\n                el = this.getElement(el);\n                id = this.getId(el);\n            }\n\n            var sConns = this.getConnections({source: id, scope: '*'}, true),\n                tConns = this.getConnections({target: id, scope: '*'}, true);\n\n            newId = \"\" + newId;\n\n            if (!doNotSetAttribute) {\n                el = this.getElement(id);\n                this.setAttribute(el, \"id\", newId);\n            }\n            else\n                el = this.getElement(newId);\n\n            endpointsByElement[newId] = endpointsByElement[id] || [];\n            for (var i = 0, ii = endpointsByElement[newId].length; i < ii; i++) {\n                endpointsByElement[newId][i].setElementId(newId);\n                endpointsByElement[newId][i].setReferenceElement(el);\n            }\n            delete endpointsByElement[id];\n\n            this.sourceEndpointDefinitions[newId] = this.sourceEndpointDefinitions[id];\n            delete this.sourceEndpointDefinitions[id];\n            this.targetEndpointDefinitions[newId] = this.targetEndpointDefinitions[id];\n            delete this.targetEndpointDefinitions[id];\n\n            this.anchorManager.changeId(id, newId);\n            this.getDragManager().changeId(id, newId);\n            managedElements[newId] = managedElements[id];\n            delete managedElements[id];\n\n            var _conns = function (list, epIdx, type) {\n                for (var i = 0, ii = list.length; i < ii; i++) {\n                    list[i].endpoints[epIdx].setElementId(newId);\n                    list[i].endpoints[epIdx].setReferenceElement(el);\n                    list[i][type + \"Id\"] = newId;\n                    list[i][type] = el;\n                }\n            };\n            _conns(sConns, 0, \"source\");\n            _conns(tConns, 1, \"target\");\n\n            this.repaint(newId);\n        };\n\n        this.setDebugLog = function (debugLog) {\n            log = debugLog;\n        };\n\n        this.setSuspendDrawing = function (val, repaintAfterwards) {\n            var curVal = _suspendDrawing;\n            _suspendDrawing = val;\n            if (val) _suspendedAt = new Date().getTime(); else _suspendedAt = null;\n            if (repaintAfterwards) this.repaintEverything();\n            return curVal;\n        };\n\n        // returns whether or not drawing is currently suspended.\n        this.isSuspendDrawing = function () {\n            return _suspendDrawing;\n        };\n\n        // return timestamp for when drawing was suspended.\n        this.getSuspendedAt = function () {\n            return _suspendedAt;\n        };\n\n        this.batch = function (fn, doNotRepaintAfterwards) {\n            var _wasSuspended = this.isSuspendDrawing();\n            if (!_wasSuspended)\n                this.setSuspendDrawing(true);\n            try {\n                fn();\n            }\n            catch (e) {\n                _ju.log(\"Function run while suspended failed\", e);\n            }\n            if (!_wasSuspended)\n                this.setSuspendDrawing(false, !doNotRepaintAfterwards);\n        };\n\n        this.doWhileSuspended = this.batch;\n\n        this.getCachedData = _getCachedData;\n        this.timestamp = _timestamp;\n        this.show = function (el, changeEndpoints) {\n            _setVisible(el, \"block\", changeEndpoints);\n            return _currentInstance;\n        };\n\n        // TODO: update this method to return the current state.\n        this.toggleVisible = _toggleVisible;\n        this.toggleDraggable = _toggleDraggable;\n        this.addListener = this.bind;\n    };\n\n    _ju.extend(root.jsPlumbInstance, _ju.EventGenerator, {\n        setAttribute: function (el, a, v) {\n            this.setAttribute(el, a, v);\n        },\n        getAttribute: function (el, a) {\n            return this.getAttribute(root.jsPlumb.getElement(el), a);\n        },\n        convertToFullOverlaySpec: function(spec) {\n            if (_ju.isString(spec)) {\n                spec = [ spec, { } ];\n            }\n            spec[1].id = spec[1].id || _ju.uuid();\n            return spec;\n        },\n        registerConnectionType: function (id, type) {\n            this._connectionTypes[id] = root.jsPlumb.extend({}, type);\n            if (type.overlays) {\n                var to = {};\n                for (var i = 0; i < type.overlays.length; i++) {\n                    // if a string, convert to object representation so that we can store the typeid on it.\n                    // also assign an id.\n                    var fo = this.convertToFullOverlaySpec(type.overlays[i]);\n                    to[fo[1].id] = fo;\n                }\n                this._connectionTypes[id].overlays = to;\n            }\n        },\n        registerConnectionTypes: function (types) {\n            for (var i in types)\n                this.registerConnectionType(i, types[i]);\n        },\n        registerEndpointType: function (id, type) {\n            this._endpointTypes[id] = root.jsPlumb.extend({}, type);\n            if (type.overlays) {\n                var to = {};\n                for (var i = 0; i < type.overlays.length; i++) {\n                    // if a string, convert to object representation so that we can store the typeid on it.\n                    // also assign an id.\n                    var fo = this.convertToFullOverlaySpec(type.overlays[i]);\n                    to[fo[1].id] = fo;\n                }\n                this._endpointTypes[id].overlays = to;\n            }\n        },\n        registerEndpointTypes: function (types) {\n            for (var i in types)\n                //this._endpointTypes[i] = jsPlumb.extend({}, types[i]);\n                this.registerEndpointType(i, types[i]);\n        },\n        getType: function (id, typeDescriptor) {\n            return typeDescriptor === \"connection\" ? this._connectionTypes[id] : this._endpointTypes[id];\n        },\n        setIdChanged: function (oldId, newId) {\n            this.setId(oldId, newId, true);\n        },\n        // set parent: change the parent for some node and update all the registrations we need to.\n        setParent: function (el, newParent) {\n            var _dom = this.getElement(el),\n                _id = this.getId(_dom),\n                _pdom = this.getElement(newParent),\n                _pid = this.getId(_pdom);\n\n            _dom.parentNode.removeChild(_dom);\n            _pdom.appendChild(_dom);\n            this.getDragManager().setParent(_dom, _id, _pdom, _pid);\n        },\n        extend: function (o1, o2, names) {\n            var i;\n            if (names) {\n                for (i = 0; i < names.length; i++)\n                    o1[names[i]] = o2[names[i]];\n            }\n            else\n                for (i in o2) o1[i] = o2[i];\n            return o1;\n        },\n        floatingConnections: {},\n        getFloatingAnchorIndex: function (jpc) {\n            return jpc.endpoints[0].isFloating() ? 0 : jpc.endpoints[1].isFloating() ? 1 : -1;\n        }\n    });\n\n// --------------------- static instance + AMD registration -------------------------------------------    \n\n// create static instance and assign to window if window exists.    \n    var jsPlumb = new jsPlumbInstance();\n    // register on 'root' (lets us run on server or browser)\n    root.jsPlumb = jsPlumb;\n    // add 'getInstance' method to static instance\n    jsPlumb.getInstance = function (_defaults) {\n        var j = new jsPlumbInstance(_defaults);\n        j.init();\n        return j;\n    };\n    jsPlumb.each = function (spec, fn) {\n        if (spec == null) return;\n        if (typeof spec === \"string\")\n            fn(jsPlumb.getElement(spec));\n        else if (spec.length != null) {\n            for (var i = 0; i < spec.length; i++)\n                fn(jsPlumb.getElement(spec[i]));\n        }\n        else\n            fn(spec); // assume it's an element.\n    };\n// maybe register static instance as an AMD module, and getInstance method too.\n    if (typeof define === \"function\") {\n        define(\"jsplumb\", [], function () {\n            return jsPlumb;\n        });\n        define(\"jsplumbinstance\", [], function () {\n            return jsPlumb.getInstance();\n        });\n    }\n    // CommonJS\n    if (typeof exports !== 'undefined') {\n        exports.jsPlumb = jsPlumb;\n    }\n\n    // npm\n    if (typeof module !== \"undefined\") {\n        module.exports = jsPlumb;\n    }\n\n// --------------------- end static instance + AMD registration -------------------------------------------        \n\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.1.1\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains the base functionality for DOM type adapters.\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    var root = this, _ju = root.jsPlumbUtil;\n\n    var svgAvailable = !!window.SVGAngle || document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\"),\n\n        _genLoc = function (e, prefix) {\n            if (e == null) return [ 0, 0 ];\n            var ts = _touches(e), t = _getTouch(ts, 0);\n            return [t[prefix + \"X\"], t[prefix + \"Y\"]];\n        },\n        _pageLocation = function (e) {\n            if (e == null) return [ 0, 0 ];\n            return _genLoc(e, \"page\");\n        },\n        _screenLocation = function (e) {\n            return _genLoc(e, \"screen\");\n        },\n        _clientLocation = function (e) {\n            return _genLoc(e, \"client\");\n        },\n        _getTouch = function (touches, idx) {\n            return touches.item ? touches.item(idx) : touches[idx];\n        },\n        _touches = function (e) {\n            return e.touches && e.touches.length > 0 ? e.touches :\n                    e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches :\n                    e.targetTouches && e.targetTouches.length > 0 ? e.targetTouches :\n                [ e ];\n        };\n\n    /**\n     Manages dragging for some instance of jsPlumb.\n\n     TODO instead of this being accessed directly, it should subscribe to events on the jsPlumb instance: every method\n     in here is called directly by jsPlumb. But what should happen is that we have unpublished events that this listens\n     to.  The only trick is getting one of these instantiated with every jsPlumb instance: it needs to have a hook somehow.\n     Basically the general idea is to pull ALL the drag code out (prototype method registrations plus this) into a\n     dedicated drag script), that does not necessarily need to be included.\n\n\n     */\n    var DragManager = function (_currentInstance) {\n        var _draggables = {}, _dlist = [], _delements = {}, _elementsWithEndpoints = {},\n        // elementids mapped to the draggable to which they belong.\n            _draggablesForElements = {};\n\n        /**\n         register some element as draggable.  right now the drag init stuff is done elsewhere, and it is\n         possible that will continue to be the case.\n         */\n        this.register = function (el) {\n            var id = _currentInstance.getId(el),\n                parentOffset = _currentInstance.getOffset(el);\n\n            if (!_draggables[id]) {\n                _draggables[id] = el;\n                _dlist.push(el);\n                _delements[id] = {};\n            }\n\n            // look for child elements that have endpoints and register them against this draggable.\n            var _oneLevel = function (p) {\n                if (p) {\n                    for (var i = 0; i < p.childNodes.length; i++) {\n                        if (p.childNodes[i].nodeType != 3 && p.childNodes[i].nodeType != 8) {\n                            var cEl = jsPlumb.getElement(p.childNodes[i]),\n                                cid = _currentInstance.getId(p.childNodes[i], null, true);\n                            if (cid && _elementsWithEndpoints[cid] && _elementsWithEndpoints[cid] > 0) {\n                                var cOff = _currentInstance.getOffset(cEl);\n                                _delements[id][cid] = {\n                                    id: cid,\n                                    offset: {\n                                        left: cOff.left - parentOffset.left,\n                                        top: cOff.top - parentOffset.top\n                                    }\n                                };\n                                _draggablesForElements[cid] = id;\n                            }\n                            _oneLevel(p.childNodes[i]);\n                        }\n                    }\n                }\n            };\n\n            _oneLevel(el);\n        };\n\n        // refresh the offsets for child elements of this element.\n        this.updateOffsets = function (elId, childOffsetOverrides) {\n            if (elId != null) {\n                childOffsetOverrides = childOffsetOverrides || {};\n                var domEl = jsPlumb.getElement(elId),\n                    id = _currentInstance.getId(domEl),\n                    children = _delements[id],\n                    parentOffset = _currentInstance.getOffset(domEl);\n\n                if (children) {\n                    for (var i in children) {\n                        if (children.hasOwnProperty(i)) {\n                            var cel = jsPlumb.getElement(i),\n                                cOff = childOffsetOverrides[i] || _currentInstance.getOffset(cel);\n\n                            // do not update if we have a value already and we'd just be writing 0,0\n                            if (cel.offsetParent == null && _delements[id][i] != null) continue;\n\n                            _delements[id][i] = {\n                                id: i,\n                                offset: {\n                                    left: cOff.left - parentOffset.left,\n                                    top: cOff.top - parentOffset.top\n                                }\n                            };\n                            _draggablesForElements[i] = id;\n                        }\n                    }\n                }\n            }\n        };\n\n        /**\n         notification that an endpoint was added to the given el.  we go up from that el's parent\n         node, looking for a parent that has been registered as a draggable. if we find one, we add this\n         el to that parent's list of elements to update on drag (if it is not there already)\n         */\n        this.endpointAdded = function (el, id) {\n\n            id = id || _currentInstance.getId(el);\n\n            var b = document.body,\n                p = el.parentNode;\n\n            _elementsWithEndpoints[id] = _elementsWithEndpoints[id] ? _elementsWithEndpoints[id] + 1 : 1;\n\n            while (p != null && p != b) {\n                var pid = _currentInstance.getId(p, null, true);\n                if (pid && _draggables[pid]) {\n                    var pLoc = _currentInstance.getOffset(p);\n\n                    if (_delements[pid][id] == null) {\n                        var cLoc = _currentInstance.getOffset(el);\n                        _delements[pid][id] = {\n                            id: id,\n                            offset: {\n                                left: cLoc.left - pLoc.left,\n                                top: cLoc.top - pLoc.top\n                            }\n                        };\n                        _draggablesForElements[id] = pid;\n                    }\n                    break;\n                }\n                p = p.parentNode;\n            }\n        };\n\n        this.endpointDeleted = function (endpoint) {\n            if (_elementsWithEndpoints[endpoint.elementId]) {\n                _elementsWithEndpoints[endpoint.elementId]--;\n                if (_elementsWithEndpoints[endpoint.elementId] <= 0) {\n                    for (var i in _delements) {\n                        if (_delements.hasOwnProperty(i) && _delements[i]) {\n                            delete _delements[i][endpoint.elementId];\n                            delete _draggablesForElements[endpoint.elementId];\n                        }\n                    }\n                }\n            }\n        };\n\n        this.changeId = function (oldId, newId) {\n            _delements[newId] = _delements[oldId];\n            _delements[oldId] = {};\n            _draggablesForElements[newId] = _draggablesForElements[oldId];\n            _draggablesForElements[oldId] = null;\n        };\n\n        this.getElementsForDraggable = function (id) {\n            return _delements[id];\n        };\n\n        this.elementRemoved = function (elementId) {\n            var elId = _draggablesForElements[elementId];\n            if (elId) {\n                delete _delements[elId][elementId];\n                delete _draggablesForElements[elementId];\n            }\n        };\n\n        this.reset = function () {\n            _draggables = {};\n            _dlist = [];\n            _delements = {};\n            _elementsWithEndpoints = {};\n        };\n\n        //\n        // notification drag ended. We check automatically if need to update some\n        // ancestor's offsets.\n        //\n        this.dragEnded = function (el) {\n            if (el.offsetParent != null) {\n                var id = _currentInstance.getId(el),\n                    ancestor = _draggablesForElements[id];\n\n                if (ancestor) this.updateOffsets(ancestor);\n            }\n        };\n\n        this.setParent = function (el, elId, p, pId, currentChildLocation) {\n            var current = _draggablesForElements[elId];\n            if (!_delements[pId]) {\n                _delements[pId] = {};\n            }\n            var pLoc = _currentInstance.getOffset(p),\n                cLoc = currentChildLocation || _currentInstance.getOffset(el);\n            if (current) {\n                delete _delements[current][elId];\n            }\n\n            _delements[pId][elId] = {\n                id:elId,\n                offset : {\n                    left: cLoc.left - pLoc.left,\n                    top: cLoc.top - pLoc.top\n                }\n            };\n            _draggablesForElements[elId] = pId;\n        };\n\n        this.clearParent = function(el, elId) {\n            var current = _draggablesForElements[elId];\n            if (current) {\n                delete _delements[current][elId];\n                delete _draggablesForElements[elId];\n            }\n        };\n\n        this.revalidateParent = function(el, elId, childOffset) {\n            var current = _draggablesForElements[elId];\n            if (current) {\n                var co = {};\n                co[elId] = childOffset;\n                this.updateOffsets(current, co);\n                _currentInstance.revalidate(current);\n            }\n        };\n\n        this.getDragAncestor = function (el) {\n            var de = jsPlumb.getElement(el),\n                id = _currentInstance.getId(de),\n                aid = _draggablesForElements[id];\n\n            if (aid)\n                return jsPlumb.getElement(aid);\n            else\n                return null;\n        };\n\n    };\n\n    var trim = function (str) {\n            return str == null ? null : (str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, ''));\n        },\n        _setClassName = function (el, cn) {\n            cn = trim(cn);\n            if (typeof el.className.baseVal != \"undefined\")  // SVG\n                el.className.baseVal = cn;\n            else\n                el.className = cn;\n        },\n        _getClassName = function (el) {\n            return (typeof el.className.baseVal == \"undefined\") ? el.className : el.className.baseVal;\n        },\n        _classManip = function (el, classesToAdd, classesToRemove) {\n            classesToAdd = classesToAdd == null ? [] : _ju.isArray(classesToAdd) ? classesToAdd : classesToAdd.split(/\\s+/);\n            classesToRemove = classesToRemove == null ? [] : _ju.isArray(classesToRemove) ? classesToRemove : classesToRemove.split(/\\s+/);\n\n            var className = _getClassName(el),\n                curClasses = className.split(/\\s+/);\n\n            var _oneSet = function (add, classes) {\n                for (var i = 0; i < classes.length; i++) {\n                    if (add) {\n                        if (curClasses.indexOf(classes[i]) == -1)\n                            curClasses.push(classes[i]);\n                    }\n                    else {\n                        var idx = curClasses.indexOf(classes[i]);\n                        if (idx != -1)\n                            curClasses.splice(idx, 1);\n                    }\n                }\n            };\n\n            _oneSet(true, classesToAdd);\n            _oneSet(false, classesToRemove);\n\n            _setClassName(el, curClasses.join(\" \"));\n        };\n\n    root.jsPlumb.extend(root.jsPlumbInstance.prototype, {\n\n        headless: false,\n\n        pageLocation: _pageLocation,\n        screenLocation: _screenLocation,\n        clientLocation: _clientLocation,\n\n        getDragManager:function() {\n            if (this.dragManager == null)\n                this.dragManager = new DragManager(this);\n\n            return this.dragManager;\n        },\n\n        recalculateOffsets:function(elId) {\n            this.getDragManager().updateOffsets(elId);\n        },\n\n        createElement:function(tag, style, clazz, atts) {\n            return this.createElementNS(null, tag, style, clazz, atts);\n        },\n\n        createElementNS:function(ns, tag, style, clazz, atts) {\n            var e = ns == null ? document.createElement(tag) : document.createElementNS(ns, tag);\n            var i;\n            style = style || {};\n            for (i in style)\n                e.style[i] = style[i];\n\n            if (clazz)\n                e.className = clazz;\n\n            atts = atts || {};\n            for (i in atts)\n                e.setAttribute(i, \"\" + atts[i]);\n\n            return e;\n        },\n\n        getAttribute: function (el, attName) {\n            return el.getAttribute != null ? el.getAttribute(attName) : null;\n        },\n\n        setAttribute: function (el, a, v) {\n            if (el.setAttribute != null) el.setAttribute(a, v);\n        },\n\n        setAttributes: function (el, atts) {\n            for (var i in atts)\n                if (atts.hasOwnProperty(i)) el.setAttribute(i, atts[i]);\n        },\n        appendToRoot: function (node) {\n            document.body.appendChild(node);\n        },\n        getRenderModes: function () {\n            return [ \"svg\"  ];\n        },\n        getClass:_getClassName,\n        addClass: function (el, clazz) {\n            jsPlumb.each(el, function (e) {\n                _classManip(e, clazz);\n            });\n        },\n        hasClass: function (el, clazz) {\n            el = jsPlumb.getElement(el);\n            if (el.classList) return el.classList.contains(clazz);\n            else {\n                return _getClassName(el).indexOf(clazz) != -1;\n            }\n        },\n        removeClass: function (el, clazz) {\n            jsPlumb.each(el, function (e) {\n                _classManip(e, null, clazz);\n            });\n        },\n        updateClasses: function (el, toAdd, toRemove) {\n            jsPlumb.each(el, function (e) {\n                _classManip(e, toAdd, toRemove);\n            });\n        },\n        setClass: function (el, clazz) {\n            jsPlumb.each(el, function (e) {\n                _setClassName(e, clazz);\n            });\n        },\n        setPosition: function (el, p) {\n            el.style.left = p.left + \"px\";\n            el.style.top = p.top + \"px\";\n        },\n        getPosition: function (el) {\n            var _one = function (prop) {\n                var v = el.style[prop];\n                return v ? v.substring(0, v.length - 2) : 0;\n            };\n            return {\n                left: _one(\"left\"),\n                top: _one(\"top\")\n            };\n        },\n        getStyle:function(el, prop) {\n            if (typeof window.getComputedStyle !== 'undefined') {\n                return getComputedStyle(el, null).getPropertyValue(prop);\n            } else {\n                return el.currentStyle[prop];\n            }\n        },\n        getSelector: function (ctx, spec) {\n            var sel = null;\n            if (arguments.length == 1) {\n                sel = ctx.nodeType != null ? ctx : document.querySelectorAll(ctx);\n            }\n            else\n                sel = ctx.querySelectorAll(spec);\n\n            return sel;\n        },\n        getOffset:function(el, relativeToRoot, container) {\n            el = jsPlumb.getElement(el);\n            container = container || this.getContainer();\n            var out = {\n                    left: el.offsetLeft,\n                    top: el.offsetTop\n                },\n                op = (relativeToRoot  || (container != null && (el != container && el.offsetParent != container))) ?  el.offsetParent : null,\n                _maybeAdjustScroll = function(offsetParent) {\n                    if (offsetParent != null && offsetParent !== document.body && (offsetParent.scrollTop > 0 || offsetParent.scrollLeft > 0)) {\n                        out.left -= offsetParent.scrollLeft;\n                        out.top -= offsetParent.scrollTop;\n                    }\n                }.bind(this);\n\n            while (op != null) {\n                out.left += op.offsetLeft;\n                out.top += op.offsetTop;\n                _maybeAdjustScroll(op);\n                op = relativeToRoot ? op.offsetParent :\n                        op.offsetParent == container ? null : op.offsetParent;\n            }\n\n            // if container is scrolled and the element (or its offset parent) is not absolute or fixed, adjust accordingly.\n            if (container != null && !relativeToRoot && (container.scrollTop > 0 || container.scrollLeft > 0)) {\n                var pp = el.offsetParent != null ? this.getStyle(el.offsetParent, \"position\") : \"static\",\n                    p = this.getStyle(el, \"position\");\n                if (p !== \"absolute\" && p !== \"fixed\" && pp !== \"absolute\" && pp != \"fixed\") {\n                    out.left -= container.scrollLeft;\n                    out.top -= container.scrollTop;\n                }\n            }\n            return out;\n        },\n        //\n        // return x+y proportion of the given element's size corresponding to the location of the given event.\n        //\n        getPositionOnElement: function (evt, el, zoom) {\n            var box = typeof el.getBoundingClientRect !== \"undefined\" ? el.getBoundingClientRect() : { left: 0, top: 0, width: 0, height: 0 },\n                body = document.body,\n                docElem = document.documentElement,\n                scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop,\n                scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft,\n                clientTop = docElem.clientTop || body.clientTop || 0,\n                clientLeft = docElem.clientLeft || body.clientLeft || 0,\n                pst = 0,\n                psl = 0,\n                top = box.top + scrollTop - clientTop + (pst * zoom),\n                left = box.left + scrollLeft - clientLeft + (psl * zoom),\n                cl = jsPlumb.pageLocation(evt),\n                w = box.width || (el.offsetWidth * zoom),\n                h = box.height || (el.offsetHeight * zoom),\n                x = (cl[0] - left) / w,\n                y = (cl[1] - top) / h;\n\n            return [ x, y ];\n        },\n\n        /**\n         * Gets the absolute position of some element as read from the left/top properties in its style.\n         * @method getAbsolutePosition\n         * @param {Element} el The element to retrieve the absolute coordinates from. **Note** this is a DOM element, not a selector from the underlying library.\n         * @return {Number[]} [left, top] pixel values.\n         */\n        getAbsolutePosition: function (el) {\n            var _one = function (s) {\n                var ss = el.style[s];\n                if (ss) return parseFloat(ss.substring(0, ss.length - 2));\n            };\n            return [ _one(\"left\"), _one(\"top\") ];\n        },\n\n        /**\n         * Sets the absolute position of some element by setting the left/top properties in its style.\n         * @method setAbsolutePosition\n         * @param {Element} el The element to set the absolute coordinates on. **Note** this is a DOM element, not a selector from the underlying library.\n         * @param {Number[]} xy x and y coordinates\n         * @param {Number[]} [animateFrom] Optional previous xy to animate from.\n         * @param {Object} [animateOptions] Options for the animation.\n         */\n        setAbsolutePosition: function (el, xy, animateFrom, animateOptions) {\n            if (animateFrom) {\n                this.animate(el, {\n                    left: \"+=\" + (xy[0] - animateFrom[0]),\n                    top: \"+=\" + (xy[1] - animateFrom[1])\n                }, animateOptions);\n            }\n            else {\n                el.style.left = xy[0] + \"px\";\n                el.style.top = xy[1] + \"px\";\n            }\n        },\n        /**\n         * gets the size for the element, in an array : [ width, height ].\n         */\n        getSize: function (el) {\n            return [ el.offsetWidth, el.offsetHeight ];\n        },\n        getWidth: function (el) {\n            return el.offsetWidth;\n        },\n        getHeight: function (el) {\n            return el.offsetHeight;\n        }\n\n    });\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.1.1\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains code for components that support overlays.\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;(function() {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n\n    // ------------------------------ BEGIN OverlayCapablejsPlumbUIComponent --------------------------------------------\n\n    var _internalLabelOverlayId = \"__label\",\n    // this is a shortcut helper method to let people add a label as\n    // overlay.\n        _makeLabelOverlay = function (component, params) {\n\n            var _params = {\n                    cssClass: params.cssClass,\n                    labelStyle: component.labelStyle,\n                    id: _internalLabelOverlayId,\n                    component: component,\n                    _jsPlumb: component._jsPlumb.instance  // TODO not necessary, since the instance can be accessed through the component.\n                },\n                mergedParams = _jp.extend(_params, params);\n\n            return new _jp.Overlays[component._jsPlumb.instance.getRenderMode()].Label(mergedParams);\n        },\n        _processOverlay = function (component, o) {\n            var _newOverlay = null;\n            if (_ju.isArray(o)) {    // this is for the shorthand [\"Arrow\", { width:50 }] syntax\n                // there's also a three arg version:\n                // [\"Arrow\", { width:50 }, {location:0.7}]\n                // which merges the 3rd arg into the 2nd.\n                var type = o[0],\n                // make a copy of the object so as not to mess up anyone else's reference...\n                    p = _jp.extend({component: component, _jsPlumb: component._jsPlumb.instance}, o[1]);\n                if (o.length == 3) _jp.extend(p, o[2]);\n                _newOverlay = new _jp.Overlays[component._jsPlumb.instance.getRenderMode()][type](p);\n            } else if (o.constructor == String) {\n                _newOverlay = new _jp.Overlays[component._jsPlumb.instance.getRenderMode()][o]({component: component, _jsPlumb: component._jsPlumb.instance});\n            } else {\n                _newOverlay = o;\n            }\n\n            _newOverlay.id = _newOverlay.id || _ju.uuid();\n            component.cacheTypeItem(\"overlay\", _newOverlay, _newOverlay.id);\n            //component._jsPlumb.overlays.push(_newOverlay);\n            component._jsPlumb.overlays[_newOverlay.id] = _newOverlay;\n\n            return _newOverlay;\n        };\n\n    _jp.OverlayCapableJsPlumbUIComponent = function (params) {\n\n        root.jsPlumbUIComponent.apply(this, arguments);\n        this._jsPlumb.overlays = {};\n        this._jsPlumb.overlayPositions = {};\n\n        if (params.label) {\n            this.getDefaultType().overlays[_internalLabelOverlayId] = [\"Label\", {\n                label: params.label,\n                location: params.labelLocation || this.defaultLabelLocation || 0.5,\n                labelStyle: params.labelStyle || this._jsPlumb.instance.Defaults.LabelStyle,\n                id:_internalLabelOverlayId\n            }];\n        }\n\n        this.setListenerComponent = function (c) {\n            if (this._jsPlumb) {\n                for (var i in this._jsPlumb.overlays)\n                    this._jsPlumb.overlays[i].setListenerComponent(c);\n            }\n        };\n    };\n\n    _jp.OverlayCapableJsPlumbUIComponent.applyType = function (component, t) {\n        if (t.overlays) {\n            // loop through the ones in the type. if already present on the component,\n            // dont remove or re-add.\n            var keep = {}, i;\n\n            for (i in t.overlays) {\n\n                var existing = component._jsPlumb.overlays[t.overlays[i][1].id];\n                if (existing) {\n                    // maybe update from data, if there were parameterised values for instance.\n                    existing.updateFrom(t.overlays[i][1]);\n                    keep[t.overlays[i][1].id] = true;\n                }\n                else {\n                    var c = component.getCachedTypeItem(\"overlay\", t.overlays[i][1].id);\n                    if (c != null) {\n                        c.reattach(component._jsPlumb.instance);\n                        c.setVisible(true);\n                        // maybe update from data, if there were parameterised values for instance.\n                        c.updateFrom(t.overlays[i][1]);\n                        component._jsPlumb.overlays[c.id] = c;\n                    }\n                    else {\n                        c = component.addOverlay(t.overlays[i], true);\n                    }\n                    keep[c.id] = true;\n                }\n            }\n\n            // now loop through the full overlays and remove those that we dont want to keep\n            for (i in component._jsPlumb.overlays) {\n                if (keep[component._jsPlumb.overlays[i].id] == null)\n                    component.removeOverlay(component._jsPlumb.overlays[i].id, true); // remove overlay but dont clean it up.\n                    // that would remove event listeners etc; overlays are never discarded by the types stuff, they are\n                    // just detached/reattached.\n            }\n        }\n    };\n\n    _ju.extend(_jp.OverlayCapableJsPlumbUIComponent, root.jsPlumbUIComponent, {\n\n        setHover: function (hover, ignoreAttachedElements) {\n            if (this._jsPlumb && !this._jsPlumb.instance.isConnectionBeingDragged()) {\n                for (var i in this._jsPlumb.overlays) {\n                    this._jsPlumb.overlays[i][hover ? \"addClass\" : \"removeClass\"](this._jsPlumb.instance.hoverClass);\n                }\n            }\n        },\n        addOverlay: function (overlay, doNotRepaint) {\n            var o = _processOverlay(this, overlay);\n            if (!doNotRepaint) this.repaint();\n            return o;\n        },\n        getOverlay: function (id) {\n            return this._jsPlumb.overlays[id];\n        },\n        getOverlays: function () {\n            return this._jsPlumb.overlays;\n        },\n        hideOverlay: function (id) {\n            var o = this.getOverlay(id);\n            if (o) o.hide();\n        },\n        hideOverlays: function () {\n            for (var i in this._jsPlumb.overlays)\n                this._jsPlumb.overlays[i].hide();\n        },\n        showOverlay: function (id) {\n            var o = this.getOverlay(id);\n            if (o) o.show();\n        },\n        showOverlays: function () {\n            for (var i in this._jsPlumb.overlays)\n                this._jsPlumb.overlays[i].show();\n        },\n        removeAllOverlays: function (doNotRepaint) {\n            for (var i in this._jsPlumb.overlays) {\n                if (this._jsPlumb.overlays[i].cleanup) this._jsPlumb.overlays[i].cleanup();\n            }\n\n            this._jsPlumb.overlays = {};\n            this._jsPlumb.overlayPositions = null;\n            if (!doNotRepaint)\n                this.repaint();\n        },\n        removeOverlay: function (overlayId, dontCleanup) {\n            var o = this._jsPlumb.overlays[overlayId];\n            if (o) {\n                o.setVisible(false);\n                if (!dontCleanup && o.cleanup) o.cleanup();\n                delete this._jsPlumb.overlays[overlayId];\n                if (this._jsPlumb.overlayPositions)\n                    delete this._jsPlumb.overlayPositions[overlayId];\n            }\n        },\n        removeOverlays: function () {\n            for (var i = 0, j = arguments.length; i < j; i++)\n                this.removeOverlay(arguments[i]);\n        },\n        moveParent: function (newParent) {\n            if (this.bgCanvas) {\n                this.bgCanvas.parentNode.removeChild(this.bgCanvas);\n                newParent.appendChild(this.bgCanvas);\n            }\n\n            if (this.canvas && this.canvas.parentNode) {\n                this.canvas.parentNode.removeChild(this.canvas);\n                newParent.appendChild(this.canvas);\n\n                for (var i in this._jsPlumb.overlays) {\n                    if (this._jsPlumb.overlays[i].isAppendedAtTopLevel) {\n                        var el = this._jsPlumb.overlays[i].getElement();\n                        el.parentNode.removeChild(el);\n                        newParent.appendChild(el);\n                    }\n                }\n            }\n        },\n        getLabel: function () {\n            var lo = this.getOverlay(_internalLabelOverlayId);\n            return lo != null ? lo.getLabel() : null;\n        },\n        getLabelOverlay: function () {\n            return this.getOverlay(_internalLabelOverlayId);\n        },\n        setLabel: function (l) {\n            var lo = this.getOverlay(_internalLabelOverlayId);\n            if (!lo) {\n                var params = l.constructor == String || l.constructor == Function ? { label: l } : l;\n                lo = _makeLabelOverlay(this, params);\n                this._jsPlumb.overlays[_internalLabelOverlayId] = lo;\n            }\n            else {\n                if (l.constructor == String || l.constructor == Function) lo.setLabel(l);\n                else {\n                    if (l.label) lo.setLabel(l.label);\n                    if (l.location) lo.setLocation(l.location);\n                }\n            }\n\n            if (!this._jsPlumb.instance.isSuspendDrawing())\n                this.repaint();\n        },\n        cleanup: function (force) {\n            for (var i in this._jsPlumb.overlays) {\n                this._jsPlumb.overlays[i].cleanup(force);\n                this._jsPlumb.overlays[i].destroy(force);\n            }\n            if (force) {\n                this._jsPlumb.overlays = {};\n                this._jsPlumb.overlayPositions = null;\n            }\n        },\n        setVisible: function (v) {\n            this[v ? \"showOverlays\" : \"hideOverlays\"]();\n        },\n        setAbsoluteOverlayPosition: function (overlay, xy) {\n            this._jsPlumb.overlayPositions[overlay.id] = xy;\n        },\n        getAbsoluteOverlayPosition: function (overlay) {\n            return this._jsPlumb.overlayPositions ? this._jsPlumb.overlayPositions[overlay.id] : null;\n        },\n        _clazzManip:function(action, clazz, dontUpdateOverlays) {\n            if (!dontUpdateOverlays) {\n                for (var i in this._jsPlumb.overlays) {\n                    this._jsPlumb.overlays[i][action + \"Class\"](clazz);\n                }\n            }\n        },\n        addClass:function(clazz, dontUpdateOverlays) {\n            this._clazzManip(\"add\", clazz, dontUpdateOverlays)\n        },\n        removeClass:function(clazz, dontUpdateOverlays) {\n            this._clazzManip(\"remove\", clazz, dontUpdateOverlays)\n        }\n    });\n\n// ------------------------------ END OverlayCapablejsPlumbUIComponent --------------------------------------------\n\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.1.1\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the code for Endpoints.\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n\n    // create the drag handler for a connection\n    var _makeConnectionDragHandler = function (endpoint, placeholder, _jsPlumb) {\n        var stopped = false;\n        return {\n            drag: function () {\n                if (stopped) {\n                    stopped = false;\n                    return true;\n                }\n\n                if (placeholder.element) {\n                    var _ui = _jsPlumb.getUIPosition(arguments, _jsPlumb.getZoom());\n                    if (_ui != null) jsPlumb.setPosition(placeholder.element, _ui);\n                    _jsPlumb.repaint(placeholder.element, _ui);\n                    // always repaint the source endpoint, because only continuous/dynamic anchors cause the endpoint\n                    // to be repainted, so static anchors need to be told (or the endpoint gets dragged around)\n                    endpoint.paint({anchorPoint:endpoint.anchor.getCurrentLocation({element:endpoint.element})});\n                }\n            },\n            stopDrag: function () {\n                stopped = true;\n            }\n        };\n    };\n\n    // creates a placeholder div for dragging purposes, adds it, and pre-computes its offset.\n    var _makeDraggablePlaceholder = function (placeholder, _jsPlumb, ipco, ips) {\n        var n = jsPlumb.createElement(\"div\", { position : \"absolute\" });\n        _jsPlumb.appendElement(n);\n        var id = _jsPlumb.getId(n);\n        jsPlumb.setPosition(n, ipco);\n        n.style.width = ips[0] + \"px\";\n        n.style.height = ips[1] + \"px\";\n        _jsPlumb.manage(id, n, true); // TRANSIENT MANAGE\n        // create and assign an id, and initialize the offset.\n        placeholder.id = id;\n        placeholder.element = n;\n    };\n\n    // create a floating endpoint (for drag connections)\n    var _makeFloatingEndpoint = function (paintStyle, referenceAnchor, endpoint, referenceCanvas, sourceElement, _jsPlumb, _newEndpoint, scope) {\n        var floatingAnchor = new _jp.FloatingAnchor({ reference: referenceAnchor, referenceCanvas: referenceCanvas, jsPlumbInstance: _jsPlumb });\n        //setting the scope here should not be the way to fix that mootools issue.  it should be fixed by not\n        // adding the floating endpoint as a droppable.  that makes more sense anyway!\n        // TRANSIENT MANAGE\n        return _newEndpoint({\n            paintStyle: paintStyle,\n            endpoint: endpoint,\n            anchor: floatingAnchor,\n            source: sourceElement,\n            scope: scope\n        });\n    };\n\n    var typeParameters = [ \"connectorStyle\", \"connectorHoverStyle\", \"connectorOverlays\",\n        \"connector\", \"connectionType\", \"connectorClass\", \"connectorHoverClass\" ];\n\n    // a helper function that tries to find a connection to the given element, and returns it if so. if elementWithPrecedence is null,\n    // or no connection to it is found, we return the first connection in our list.\n    var findConnectionToUseForDynamicAnchor = function (ep, elementWithPrecedence) {\n        var idx = 0;\n        if (elementWithPrecedence != null) {\n            for (var i = 0; i < ep.connections.length; i++) {\n                if (ep.connections[i].sourceId == elementWithPrecedence || ep.connections[i].targetId == elementWithPrecedence) {\n                    idx = i;\n                    break;\n                }\n            }\n        }\n\n        return ep.connections[idx];\n    };\n\n    _jp.Endpoint = function (params) {\n        var _jsPlumb = params._jsPlumb,\n            _newConnection = params.newConnection,\n            _newEndpoint = params.newEndpoint;\n\n        this.idPrefix = \"_jsplumb_e_\";\n        this.defaultLabelLocation = [ 0.5, 0.5 ];\n        this.defaultOverlayKeys = [\"Overlays\", \"EndpointOverlays\"];\n        _jp.OverlayCapableJsPlumbUIComponent.apply(this, arguments);\n\n// TYPE\n\n        this.appendToDefaultType({\n            connectionType:params.connectionType,\n            maxConnections: params.maxConnections == null ? this._jsPlumb.instance.Defaults.MaxConnections : params.maxConnections, // maximum number of connections this endpoint can be the source of.,\n            paintStyle: params.endpointStyle || params.paintStyle || params.style || this._jsPlumb.instance.Defaults.EndpointStyle || _jp.Defaults.EndpointStyle,\n            hoverPaintStyle: params.endpointHoverStyle || params.hoverPaintStyle || this._jsPlumb.instance.Defaults.EndpointHoverStyle || _jp.Defaults.EndpointHoverStyle,\n            connectorStyle: params.connectorStyle,\n            connectorHoverStyle: params.connectorHoverStyle,\n            connectorClass: params.connectorClass,\n            connectorHoverClass: params.connectorHoverClass,\n            connectorOverlays: params.connectorOverlays,\n            connector: params.connector,\n            connectorTooltip: params.connectorTooltip\n        });\n\n// END TYPE\n\n        this._jsPlumb.enabled = !(params.enabled === false);\n        this._jsPlumb.visible = true;\n        this.element = _jp.getElement(params.source);\n        this._jsPlumb.uuid = params.uuid;\n        this._jsPlumb.floatingEndpoint = null;\n        var inPlaceCopy = null;\n        if (this._jsPlumb.uuid) params.endpointsByUUID[this._jsPlumb.uuid] = this;\n        this.elementId = params.elementId;\n        this.dragProxy = params.dragProxy;\n\n        this._jsPlumb.connectionCost = params.connectionCost;\n        this._jsPlumb.connectionsDirected = params.connectionsDirected;\n        this._jsPlumb.currentAnchorClass = \"\";\n        this._jsPlumb.events = {};\n\n        var _updateAnchorClass = function () {\n            // stash old, get new\n            var oldAnchorClass = _jsPlumb.endpointAnchorClassPrefix + \"-\" + this._jsPlumb.currentAnchorClass;\n            this._jsPlumb.currentAnchorClass = this.anchor.getCssClass();\n            var anchorClass = _jsPlumb.endpointAnchorClassPrefix + (this._jsPlumb.currentAnchorClass ? \"-\" + this._jsPlumb.currentAnchorClass : \"\");\n\n            this.removeClass(oldAnchorClass);\n            this.addClass(anchorClass);\n            // add and remove at the same time to reduce the number of reflows.\n            jsPlumb.updateClasses(this.element, anchorClass, oldAnchorClass);\n        }.bind(this);\n\n        this.prepareAnchor = function(anchorParams) {\n            var a = this._jsPlumb.instance.makeAnchor(anchorParams, this.elementId, _jsPlumb);\n            a.bind(\"anchorChanged\", function (currentAnchor) {\n                this.fire(\"anchorChanged\", {endpoint: this, anchor: currentAnchor});\n                _updateAnchorClass();\n            }.bind(this));\n            return a;\n        };\n\n        this.setPreparedAnchor = function(anchor, doNotRepaint) {\n            this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId);\n            this.anchor = anchor;\n            _updateAnchorClass();\n\n            if (!doNotRepaint)\n                this._jsPlumb.instance.repaint(this.elementId);\n\n            return this;\n        };\n\n        this.setAnchor = function (anchorParams, doNotRepaint) {\n            var a = this.prepareAnchor(anchorParams);\n            this.setPreparedAnchor(a, doNotRepaint);\n            return this;\n        };\n\n        var internalHover = function (state) {\n            if (this.connections.length > 0) {\n                for (var i = 0; i < this.connections.length; i++)\n                    this.connections[i].setHover(state, false);\n            }\n            else\n                this.setHover(state);\n        }.bind(this);\n\n        this.bind(\"mouseover\", function () {\n            internalHover(true);\n        });\n        this.bind(\"mouseout\", function () {\n            internalHover(false);\n        });\n\n        // ANCHOR MANAGER\n        if (!params._transient) // in place copies, for example, are transient.  they will never need to be retrieved during a paint cycle, because they dont move, and then they are deleted.\n            this._jsPlumb.instance.anchorManager.add(this, this.elementId);\n\n        this.prepareEndpoint = function(ep, typeId) {\n            var _e = function (t, p) {\n                var rm = _jsPlumb.getRenderMode();\n                if (_jp.Endpoints[rm][t]) return new _jp.Endpoints[rm][t](p);\n                if (!_jsPlumb.Defaults.DoNotThrowErrors)\n                    throw { msg: \"jsPlumb: unknown endpoint type '\" + t + \"'\" };\n            };\n\n            var endpointArgs = {\n                _jsPlumb: this._jsPlumb.instance,\n                cssClass: params.cssClass,\n                container: params.container,\n                tooltip: params.tooltip,\n                connectorTooltip: params.connectorTooltip,\n                endpoint: this\n            };\n\n            var endpoint;\n\n            if (_ju.isString(ep))\n                endpoint = _e(ep, endpointArgs);\n            else if (_ju.isArray(ep)) {\n                endpointArgs = _ju.merge(ep[1], endpointArgs);\n                endpoint = _e(ep[0], endpointArgs);\n            }\n            else {\n                endpoint = ep.clone();\n            }\n\n            // assign a clone function using a copy of endpointArgs. this is used when a drag starts: the endpoint that was dragged is cloned,\n            // and the clone is left in its place while the original one goes off on a magical journey.\n            // the copy is to get around a closure problem, in which endpointArgs ends up getting shared by\n            // the whole world.\n            //var argsForClone = jsPlumb.extend({}, endpointArgs);\n            endpoint.clone = function () {\n                // TODO this, and the code above, can be refactored to be more dry.\n                if (_ju.isString(ep))\n                    return _e(ep, endpointArgs);\n                else if (_ju.isArray(ep)) {\n                    endpointArgs = _ju.merge(ep[1], endpointArgs);\n                    return _e(ep[0], endpointArgs);\n                }\n            }.bind(this);\n\n            endpoint.typeId = typeId;\n            return endpoint;\n        };\n\n        this.setEndpoint = function(ep, doNotRepaint) {\n            var _ep = this.prepareEndpoint(ep);\n            this.setPreparedEndpoint(_ep, true);\n        };\n\n        this.setPreparedEndpoint = function (ep, doNotRepaint) {\n            if (this.endpoint != null) {\n                this.endpoint.cleanup();\n                this.endpoint.destroy();\n            }\n            this.endpoint = ep;\n            this.type = this.endpoint.type;\n            this.canvas = this.endpoint.canvas;\n        };\n\n        _jp.extend(this, params, typeParameters);\n\n        this.isSource = params.isSource || false;\n        this.isTemporarySource = params.isTemporarySource || false;\n        this.isTarget = params.isTarget || false;\n\n        this.connections = params.connections || [];\n        this.connectorPointerEvents = params[\"connector-pointer-events\"];\n\n        this.scope = params.scope || _jsPlumb.getDefaultScope();\n        this.timestamp = null;\n        this.reattachConnections = params.reattach || _jsPlumb.Defaults.ReattachConnections;\n        this.connectionsDetachable = _jsPlumb.Defaults.ConnectionsDetachable;\n        if (params.connectionsDetachable === false || params.detachable === false)\n            this.connectionsDetachable = false;\n        this.dragAllowedWhenFull = params.dragAllowedWhenFull !== false;\n\n        if (params.onMaxConnections)\n            this.bind(\"maxConnections\", params.onMaxConnections);\n\n        //\n        // add a connection. not part of public API.\n        //\n        this.addConnection = function (connection) {\n            this.connections.push(connection);\n            this[(this.connections.length > 0 ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointConnectedClass);\n            this[(this.isFull() ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointFullClass);\n        };\n\n        this.detachFromConnection = function (connection, idx, doNotCleanup) {\n            idx = idx == null ? this.connections.indexOf(connection) : idx;\n            if (idx >= 0) {\n                this.connections.splice(idx, 1);\n                this[(this.connections.length > 0 ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointConnectedClass);\n                this[(this.isFull() ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointFullClass);\n            }\n\n            if ((this._forceDeleteOnDetach || (!doNotCleanup && this._deleteOnDetach)) && this.connections.length === 0) {\n                _jsPlumb.deleteObject({\n                    endpoint: this,\n                    fireEvent: false,\n                    //deleteAttachedObjects: false\n                    deleteAttachedObjects: doNotCleanup !== true\n                });\n            }\n        };\n\n        //this.detach = function (connection, ignoreTarget, forceDetach, fireEvent, originalEvent, endpointBeingDeleted, connectionIndex) {\n\n        this.detach = function (params) {\n            var connectionIndex = params.connectionIndex,\n                connection = params.connection,\n                ignoreTarget = params.ignoreTarget,\n                fireEvent = params.fireEvent,\n                originalEvent = params.originalEvent,\n                endpointBeingDeleted = params.endpointBeingDeleted,\n                forceDetach = params.forceDetach;\n\n            var idx = connectionIndex == null ? this.connections.indexOf(connection) : connectionIndex,\n                actuallyDetached = false;\n            fireEvent = (fireEvent !== false);\n\n            if (idx >= 0) {\n\n                if (forceDetach || connection._forceDetach || (connection.isDetachable() && connection.isDetachAllowed(connection) && this.isDetachAllowed(connection) && _jsPlumb.checkCondition(\"beforeDetach\", connection, endpointBeingDeleted) )) {\n\n                    _jsPlumb.deleteObject({\n                        connection: connection,\n                        fireEvent: (!ignoreTarget && fireEvent),\n                        originalEvent: originalEvent,\n                        deleteAttachedObjects:params.deleteAttachedObjects\n                        //deleteAttachedObjects:null\n                    });\n                    actuallyDetached = true;\n                }\n            }\n            return actuallyDetached;\n        };\n\n        this.detachAll = function (fireEvent, forceDetach) {\n            var unaffectedConns = [];\n            while (this.connections.length > 0) {\n                // TODO this could pass the index in to the detach method to save some time (index will always be zero in this while loop)\n                var actuallyDetached = this.detach({\n                    connection:this.connections[0],\n                    ignoreTarget:false,\n                    forceDetach:forceDetach === true,\n                    fireEvent:fireEvent !== false,\n                    originalEvent:null,\n                    endpointBeingDeleted:this,\n                    connectionIndex:0\n                });\n                if (!actuallyDetached) {\n                    unaffectedConns.push(this.connections[0]);\n                    this.connections.splice(0, 1);\n                }\n            }\n            this.connections = unaffectedConns;\n            return this;\n        };\n        this.detachFrom = function (targetEndpoint, fireEvent, originalEvent) {\n            var c = [];\n            for (var i = 0; i < this.connections.length; i++) {\n                if (this.connections[i].endpoints[1] == targetEndpoint || this.connections[i].endpoints[0] == targetEndpoint) {\n                    c.push(this.connections[i]);\n                }\n            }\n            for (var j = 0; j < c.length; j++) {\n                this.detach({\n                    connection:c[j],\n                    ignoreTarget:false,\n                    forceDetach:true,\n                    fireEvent:fireEvent,\n                    originalEvent:originalEvent\n                });\n            }\n            return this;\n        };\n\n        this.getElement = function () {\n            return this.element;\n        };\n\n        this.setElement = function (el) {\n            var parentId = this._jsPlumb.instance.getId(el),\n                curId = this.elementId;\n            // remove the endpoint from the list for the current endpoint's element\n            _ju.removeWithFunction(params.endpointsByElement[this.elementId], function (e) {\n                return e.id == this.id;\n            }.bind(this));\n            this.element = jsPlumb.getElement(el);\n            this.elementId = _jsPlumb.getId(this.element);\n            _jsPlumb.anchorManager.rehomeEndpoint(this, curId, this.element);\n            _jsPlumb.dragManager.endpointAdded(this.element);\n            _ju.addToList(params.endpointsByElement, parentId, this);\n            return this;\n        };\n\n        /**\n         * private but must be exposed.\n         */\n        this.makeInPlaceCopy = function () {\n            var loc = this.anchor.getCurrentLocation({element: this}),\n                o = this.anchor.getOrientation(this),\n                acc = this.anchor.getCssClass(),\n                inPlaceAnchor = {\n                    bind: function () {\n                    },\n                    compute: function () {\n                        return [ loc[0], loc[1] ];\n                    },\n                    getCurrentLocation: function () {\n                        return [ loc[0], loc[1] ];\n                    },\n                    getOrientation: function () {\n                        return o;\n                    },\n                    getCssClass: function () {\n                        return acc;\n                    }\n                };\n\n            return _newEndpoint({\n                dropOptions: params.dropOptions,\n                anchor: inPlaceAnchor,\n                source: this.element,\n                paintStyle: this.getPaintStyle(),\n                endpoint: params.hideOnDrag ? \"Blank\" : this.endpoint,\n                _transient: true,\n                scope: this.scope,\n                reference:this\n            });\n        };\n\n        /**\n         * returns a connection from the pool; used when dragging starts.  just gets the head of the array if it can.\n         */\n        this.connectorSelector = function () {\n            var candidate = this.connections[0];\n            // SP target source refactor\n            if (/*this.isTarget && */candidate) return candidate;\n            else {\n                return (this.connections.length < this._jsPlumb.maxConnections) || this._jsPlumb.maxConnections == -1 ? null : candidate;\n            }\n        };\n\n        this.setStyle = this.setPaintStyle;\n\n        this.paint = function (params) {\n            params = params || {};\n            var timestamp = params.timestamp, recalc = !(params.recalc === false);\n            if (!timestamp || this.timestamp !== timestamp) {\n\n                var info = _jsPlumb.updateOffset({ elId: this.elementId, timestamp: timestamp });\n\n                var xy = params.offset ? params.offset.o : info.o;\n                if (xy != null) {\n                    var ap = params.anchorPoint, connectorPaintStyle = params.connectorPaintStyle;\n                    if (ap == null) {\n                        var wh = params.dimensions || info.s,\n                            anchorParams = { xy: [ xy.left, xy.top ], wh: wh, element: this, timestamp: timestamp };\n                        if (recalc && this.anchor.isDynamic && this.connections.length > 0) {\n                            var c = findConnectionToUseForDynamicAnchor(this, params.elementWithPrecedence),\n                                oIdx = c.endpoints[0] == this ? 1 : 0,\n                                oId = oIdx === 0 ? c.sourceId : c.targetId,\n                                oInfo = _jsPlumb.getCachedData(oId),\n                                oOffset = oInfo.o, oWH = oInfo.s;\n                            anchorParams.txy = [ oOffset.left, oOffset.top ];\n                            anchorParams.twh = oWH;\n                            anchorParams.tElement = c.endpoints[oIdx];\n                        }\n                        ap = this.anchor.compute(anchorParams);\n                    }\n\n                    this.endpoint.compute(ap, this.anchor.getOrientation(this), this._jsPlumb.paintStyleInUse, connectorPaintStyle || this.paintStyleInUse);\n                    this.endpoint.paint(this._jsPlumb.paintStyleInUse, this.anchor);\n                    this.timestamp = timestamp;\n\n                    // paint overlays\n                    for (var i in this._jsPlumb.overlays) {\n                        if (this._jsPlumb.overlays.hasOwnProperty(i)) {\n                            var o = this._jsPlumb.overlays[i];\n                            if (o.isVisible()) {\n                                this._jsPlumb.overlayPlacements[i] = o.draw(this.endpoint, this._jsPlumb.paintStyleInUse);\n                                o.paint(this._jsPlumb.overlayPlacements[i]);\n                            }\n                        }\n                    }\n                }\n            }\n        };\n\n        this.getTypeDescriptor = function () {\n            return \"endpoint\";\n        };\n        this.isVisible = function () {\n            return this._jsPlumb.visible;\n        };\n\n        this.repaint = this.paint;\n\n        var draggingInitialised = false;\n        this.initDraggable = function () {\n\n            // is this a connection source? we make it draggable and have the\n            // drag listener maintain a connection with a floating endpoint.\n            if (!draggingInitialised && _jp.isDragSupported(this.element)) {\n                var placeholderInfo = { id: null, element: null },\n                    jpc = null,\n                    existingJpc = false,\n                    existingJpcParams = null,\n                    _dragHandler = _makeConnectionDragHandler(this, placeholderInfo, _jsPlumb),\n                    dragOptions = params.dragOptions || {},\n                    defaultOpts = {},\n                    startEvent = _jp.dragEvents.start,\n                    stopEvent = _jp.dragEvents.stop,\n                    dragEvent = _jp.dragEvents.drag,\n                    beforeStartEvent = _jp.dragEvents.beforeStart,\n                    payload;\n\n                // respond to beforeStart from katavorio; this will have, optionally, a payload of attribute values\n                // that were placed there by the makeSource mousedown listener.\n                var beforeStart = function(beforeStartParams) {\n                    payload = beforeStartParams.e.payload || {};\n                };\n\n                var start = function (startParams) {\n\n// -------------   first, get a connection to drag. this may be null, in which case we are dragging a new one.\n\n                    jpc = this.connectorSelector();\n\n// -------------------------------- now a bunch of tests about whether or not to proceed -------------------------\n\n                    var _continue = true;\n                    // if not enabled, return\n                    if (!this.isEnabled()) _continue = false;\n                    // if no connection and we're not a source - or temporarily a source, as is the case with makeSource - return.\n                    if (jpc == null && !this.isSource && !this.isTemporarySource) _continue = false;\n                    // otherwise if we're full and not allowed to drag, also return false.\n                    if (this.isSource && this.isFull() && !(jpc != null && this.dragAllowedWhenFull)) _continue = false;\n                    // if the connection was setup as not detachable or one of its endpoints\n                    // was setup as connectionsDetachable = false, or Defaults.ConnectionsDetachable\n                    // is set to false...\n                    if (jpc != null && !jpc.isDetachable(this)) _continue = false;\n\n                    var beforeDrag = _jsPlumb.checkCondition(jpc == null ? \"beforeDrag\" : \"beforeStartDetach\", {\n                        endpoint:this,\n                        source:this.element,\n                        sourceId:this.elementId,\n                        connection:jpc\n                    });\n                    if (beforeDrag === false) _continue = false;\n                    // else we might have been given some data. we'll pass it in to a new connection as 'data'.\n                    // here we also merge in the optional payload we were given on mousedown.\n                    else if (typeof beforeDrag === \"object\") {\n                        jsPlumb.extend(beforeDrag, payload || {});\n                    }\n                    else\n                        // or if no beforeDrag data, maybe use the payload on its own.\n                        beforeDrag = payload || {};\n\n                    if (_continue === false) {\n                        // this is for mootools and yui. returning false from this causes jquery to stop drag.\n                        // the events are wrapped in both mootools and yui anyway, but i don't think returning\n                        // false from the start callback would stop a drag.\n                        if (_jsPlumb.stopDrag) _jsPlumb.stopDrag(this.canvas);\n                        _dragHandler.stopDrag();\n                        return false;\n                    }\n\n// ---------------------------------------------------------------------------------------------------------------------\n\n                    // ok to proceed.\n\n                    // clear hover for all connections for this endpoint before continuing.\n                    for (var i = 0; i < this.connections.length; i++)\n                        this.connections[i].setHover(false);\n\n                    this.addClass(\"endpointDrag\");\n                    _jsPlumb.setConnectionBeingDragged(true);\n\n                    // if we're not full but there was a connection, make it null. we'll create a new one.\n                    if (jpc && !this.isFull() && this.isSource) jpc = null;\n\n                    _jsPlumb.updateOffset({ elId: this.elementId });\n\n// ----------------    make the element we will drag around, and position it -----------------------------\n\n                    var ipco = this._jsPlumb.instance.getOffset(this.canvas),\n                        canvasElement = this.canvas,\n                        ips = this._jsPlumb.instance.getSize(this.canvas);\n\n                    _makeDraggablePlaceholder(placeholderInfo, _jsPlumb, ipco, ips);\n\n                    // store the id of the dragging div and the source element. the drop function will pick these up.                   \n                    _jsPlumb.setAttributes(this.canvas, {\n                        \"dragId\": placeholderInfo.id,\n                        \"elId\": this.elementId\n                    });\n\n// ------------------- create an endpoint that will be our floating endpoint ------------------------------------\n\n                    var endpointToFloat = this.dragProxy || this.endpoint;\n                    if (this.dragProxy == null && this.connectionType != null) {\n                        var aae = this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);\n                        if (aae.endpoints[1]) endpointToFloat = aae.endpoints[1];\n                    }\n                    var centerAnchor = this._jsPlumb.instance.makeAnchor(\"Center\");\n                    centerAnchor.isFloating = true;\n                    this._jsPlumb.floatingEndpoint = _makeFloatingEndpoint(this.getPaintStyle(), centerAnchor, endpointToFloat, this.canvas, placeholderInfo.element, _jsPlumb, _newEndpoint, this.scope);\n                    var _savedAnchor = this._jsPlumb.floatingEndpoint.anchor;\n\n\n                    if (jpc == null) {\n\n                        this.setHover(false, false);\n                        // create a connection. one end is this endpoint, the other is a floating endpoint.                    \n                        jpc = _newConnection({\n                            sourceEndpoint: this,\n                            targetEndpoint: this._jsPlumb.floatingEndpoint,\n                            source: this.element,  // for makeSource with parent option.  ensure source element is represented correctly.\n                            target: placeholderInfo.element,\n                            anchors: [ this.anchor, this._jsPlumb.floatingEndpoint.anchor ],\n                            paintStyle: params.connectorStyle, // this can be null. Connection will use the default.\n                            hoverPaintStyle: params.connectorHoverStyle,\n                            connector: params.connector, // this can also be null. Connection will use the default.\n                            overlays: params.connectorOverlays,\n                            type: this.connectionType,\n                            cssClass: this.connectorClass,\n                            hoverClass: this.connectorHoverClass,\n                            scope:params.scope,\n                            data:beforeDrag\n                        });\n                        jpc.pending = true;\n                        jpc.addClass(_jsPlumb.draggingClass);\n                        this._jsPlumb.floatingEndpoint.addClass(_jsPlumb.draggingClass);\n                        this._jsPlumb.floatingEndpoint.anchor = _savedAnchor;\n                        // fire an event that informs that a connection is being dragged\n                        _jsPlumb.fire(\"connectionDrag\", jpc);\n\n                        // register the new connection on the drag manager. This connection, at this point, is 'pending',\n                        // and has as its target a temporary element (the 'placeholder'). If the connection subsequently\n                        // becomes established, the anchor manager is informed that the target of the connection has\n                        // changed.\n\n                        _jsPlumb.anchorManager.newConnection(jpc);\n\n                    } else {\n                        existingJpc = true;\n                        jpc.setHover(false);\n                        // new anchor idx\n                        var anchorIdx = jpc.endpoints[0].id == this.id ? 0 : 1;\n                        this.detachFromConnection(jpc, null, true);                         // detach from the connection while dragging is occurring. but dont cleanup automatically.\n\n                        // store the original scope (issue 57)\n                        var dragScope = _jsPlumb.getDragScope(canvasElement);\n                        _jsPlumb.setAttribute(this.canvas, \"originalScope\", dragScope);\n\n                        // fire an event that informs that a connection is being dragged. we do this before\n                        // replacing the original target with the floating element info.\n                        _jsPlumb.fire(\"connectionDrag\", jpc);\n\n                        // now we replace ourselves with the temporary div we created above:\n                        if (anchorIdx === 0) {\n                            existingJpcParams = [ jpc.source, jpc.sourceId, canvasElement, dragScope ];\n                            _jsPlumb.anchorManager.sourceChanged(jpc.endpoints[anchorIdx].elementId, placeholderInfo.id, jpc, placeholderInfo.element);\n\n                        } else {\n                            existingJpcParams = [ jpc.target, jpc.targetId, canvasElement, dragScope ];\n                            jpc.target = placeholderInfo.element;\n                            jpc.targetId = placeholderInfo.id;\n\n                            _jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId, jpc.endpoints[anchorIdx].elementId, jpc.targetId, jpc);\n                        }\n\n                        // store the original endpoint and assign the new floating endpoint for the drag.\n                        jpc.suspendedEndpoint = jpc.endpoints[anchorIdx];\n\n                        // PROVIDE THE SUSPENDED ELEMENT, BE IT A SOURCE OR TARGET (ISSUE 39)\n                        jpc.suspendedElement = jpc.endpoints[anchorIdx].getElement();\n                        jpc.suspendedElementId = jpc.endpoints[anchorIdx].elementId;\n                        jpc.suspendedElementType = anchorIdx === 0 ? \"source\" : \"target\";\n\n                        jpc.suspendedEndpoint.setHover(false);\n                        this._jsPlumb.floatingEndpoint.referenceEndpoint = jpc.suspendedEndpoint;\n                        jpc.endpoints[anchorIdx] = this._jsPlumb.floatingEndpoint;\n\n                        jpc.addClass(_jsPlumb.draggingClass);\n                        this._jsPlumb.floatingEndpoint.addClass(_jsPlumb.draggingClass);\n                    }\n\n                    // register it and register connection on it.\n                    _jsPlumb.floatingConnections[placeholderInfo.id] = jpc;\n                    // only register for the target endpoint; we will not be dragging the source at any time\n                    // before this connection is either discarded or made into a permanent connection.\n                    _ju.addToList(params.endpointsByElement, placeholderInfo.id, this._jsPlumb.floatingEndpoint);\n                    // tell jsplumb about it\n                    _jsPlumb.currentlyDragging = true;\n                }.bind(this);\n\n                var stop = function () {\n                    _jsPlumb.setConnectionBeingDragged(false);\n\n                    if (jpc && jpc.endpoints != null) {\n                        // get the actual drop event (decode from library args to stop function)\n                        var originalEvent = _jsPlumb.getDropEvent(arguments);\n                        // unlock the other endpoint (if it is dynamic, it would have been locked at drag start)\n                        var idx = _jsPlumb.getFloatingAnchorIndex(jpc);\n                        jpc.endpoints[idx === 0 ? 1 : 0].anchor.locked = false;\n                        // TODO: Dont want to know about css classes inside jsplumb, ideally.\n                        jpc.removeClass(_jsPlumb.draggingClass);\n\n                        // if we have the floating endpoint then the connection has not been dropped\n                        // on another endpoint.  If it is a new connection we throw it away. If it is an\n                        // existing connection we check to see if we should reattach it, throwing it away\n                        // if not.\n                        if (this._jsPlumb && (jpc.deleteConnectionNow || jpc.endpoints[idx] == this._jsPlumb.floatingEndpoint)) {\n                            // 6a. if the connection was an existing one...\n                            if (existingJpc && jpc.suspendedEndpoint) {\n                                // fix for issue35, thanks Sylvain Gizard: when firing the detach event make sure the\n                                // floating endpoint has been replaced.\n                                if (idx === 0) {\n                                    jpc.floatingElement = jpc.source;\n                                    jpc.floatingId = jpc.sourceId;\n                                    jpc.floatingEndpoint = jpc.endpoints[0];\n                                    jpc.floatingIndex = 0;\n                                    jpc.source = existingJpcParams[0];\n                                    jpc.sourceId = existingJpcParams[1];\n                                } else {\n                                    // keep a copy of the floating element; the anchor manager will want to clean up.\n                                    jpc.floatingElement = jpc.target;\n                                    jpc.floatingId = jpc.targetId;\n                                    jpc.floatingEndpoint = jpc.endpoints[1];\n                                    jpc.floatingIndex = 1;\n                                    jpc.target = existingJpcParams[0];\n                                    jpc.targetId = existingJpcParams[1];\n                                }\n\n                                var fe = this._jsPlumb.floatingEndpoint; // store for later removal.\n                                // restore the original scope (issue 57)\n                                _jsPlumb.setDragScope(existingJpcParams[2], existingJpcParams[3]);\n                                jpc.endpoints[idx] = jpc.suspendedEndpoint;\n                                // IF the connection should be reattached, or the other endpoint refuses detach, then\n                                // reset the connection to its original state\n                                if (jpc.isReattach() || jpc._forceReattach || jpc._forceDetach || !jpc.endpoints[idx === 0 ? 1 : 0].detach({connection:jpc, ignoreTarget:false, forceDetach:false, fireEvent:true, originalEvent:originalEvent, endpointBeingDeleted:true})) {\n\n                                    jpc.setHover(false);\n                                    jpc._forceDetach = null;\n                                    jpc._forceReattach = null;\n                                    this._jsPlumb.floatingEndpoint.detachFromConnection(jpc);\n                                    jpc.suspendedEndpoint.addConnection(jpc);\n\n                                    // TODO this code is duplicated in lots of places...and there is nothing external\n                                    // in the code; it all refers to the connection itself. we could add a\n                                    // `checkSanity(connection)` method to anchorManager that did this.\n                                    if (idx == 1) {\n                                        _jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId, jpc.floatingId, jpc.targetId, jpc);\n                                    }\n                                    else {\n                                        _jsPlumb.anchorManager.sourceChanged(jpc.floatingId, jpc.sourceId, jpc, jpc.source);\n                                    }\n\n                                    _jsPlumb.repaint(existingJpcParams[1]);\n                                }\n                                else {\n                                    _jsPlumb.deleteObject({endpoint: fe});\n                                }\n                            }\n                        }\n\n                        // makeTargets sets this flag, to tell us we have been replaced and should delete this object.\n                        if (this.deleteAfterDragStop) {\n                            _jsPlumb.deleteObject({endpoint: this});\n                        }\n                        else {\n                            if (this._jsPlumb) {\n                                 this.paint({recalc: false});\n                            }\n                        }\n\n                        // although the connection is no longer valid, there are use cases where this is useful.\n                        _jsPlumb.fire(\"connectionDragStop\", jpc, originalEvent);\n                        // fire this event to give people more fine-grained control (connectionDragStop fires a lot)\n                        if (jpc.pending) {\n                            _jsPlumb.fire(\"connectionAborted\", jpc, originalEvent);\n                        }\n                        // tell jsplumb that dragging is finished.\n                        _jsPlumb.currentlyDragging = false;\n                        jpc.suspendedElement = null;\n                        jpc.suspendedEndpoint = null;\n                        jpc = null;\n                    }\n\n                    // if no endpoints, jpc already cleaned up. but still we want to ensure we're reset properly.\n                    // remove the element associated with the floating endpoint\n                    // (and its associated floating endpoint and visual artefacts)\n                    if (placeholderInfo && placeholderInfo.element) {\n                        _jsPlumb.remove(placeholderInfo.element, false, false);\n                    }\n                    // remove the inplace copy\n                    if (inPlaceCopy) {\n                        _jsPlumb.deleteObject({endpoint: inPlaceCopy});\n                    }\n\n                    if (this._jsPlumb) {\n                        // make our canvas visible (TODO: hand off to library; we should not know about DOM)\n                        this.canvas.style.visibility = \"visible\";\n                        // unlock our anchor\n                        this.anchor.locked = false;\n                        // clear floating anchor.\n                        this._jsPlumb.floatingEndpoint = null;\n                    }\n\n                }.bind(this);\n\n                dragOptions = _jp.extend(defaultOpts, dragOptions);\n                dragOptions.scope = this.scope || dragOptions.scope;\n                dragOptions[beforeStartEvent] = _ju.wrap(dragOptions[beforeStartEvent], beforeStart, false);\n                dragOptions[startEvent] = _ju.wrap(dragOptions[startEvent], start, false);\n                // extracted drag handler function so can be used by makeSource\n                dragOptions[dragEvent] = _ju.wrap(dragOptions[dragEvent], _dragHandler.drag);\n                dragOptions[stopEvent] = _ju.wrap(dragOptions[stopEvent], stop);\n                dragOptions.multipleDrop = false;\n\n                dragOptions.canDrag = function () {\n                    return this.isSource || this.isTemporarySource || /*(this.isTarget && */this.connections.length > 0/*)*/;\n                }.bind(this);\n\n                _jsPlumb.initDraggable(this.canvas, dragOptions, \"internal\");\n\n                this.canvas._jsPlumbRelatedElement = this.element;\n\n                draggingInitialised = true;\n            }\n        };\n\n        var ep = params.endpoint || this._jsPlumb.instance.Defaults.Endpoint || _jp.Defaults.Endpoint;\n        this.setEndpoint(ep, true);\n        var anchorParamsToUse = params.anchor ? params.anchor : params.anchors ? params.anchors : (_jsPlumb.Defaults.Anchor || \"Top\");\n        this.setAnchor(anchorParamsToUse, true);\n\n        // finally, set type if it was provided\n        var type = [ \"default\", (params.type || \"\")].join(\" \");\n        this.addType(type, params.data, true);\n        this.canvas = this.endpoint.canvas;\n        this.canvas._jsPlumb = this;\n\n        this.initDraggable();\n\n        // pulled this out into a function so we can reuse it for the inPlaceCopy canvas; you can now drop detached connections\n        // back onto the endpoint you detached it from.\n        var _initDropTarget = function (canvas, isTransient, endpoint, referenceEndpoint) {\n\n            if (_jp.isDropSupported(this.element)) {\n                var dropOptions = params.dropOptions || _jsPlumb.Defaults.DropOptions || _jp.Defaults.DropOptions;\n                dropOptions = _jp.extend({}, dropOptions);\n                dropOptions.scope = dropOptions.scope || this.scope;\n                var dropEvent = _jp.dragEvents.drop,\n                    overEvent = _jp.dragEvents.over,\n                    outEvent = _jp.dragEvents.out,\n                    _ep = this,\n                    drop = _jsPlumb.EndpointDropHandler({\n                        getEndpoint: function () {\n                            return _ep;\n                        },\n                        jsPlumb: _jsPlumb,\n                        enabled: function () {\n                            return endpoint != null ? endpoint.isEnabled() : true;\n                        },\n                        isFull: function () {\n                            return endpoint.isFull();\n                        },\n                        element: this.element,\n                        elementId: this.elementId,\n                        isSource: this.isSource,\n                        isTarget: this.isTarget,\n                        addClass: function (clazz) {\n                            _ep.addClass(clazz);\n                        },\n                        removeClass: function (clazz) {\n                            _ep.removeClass(clazz);\n                        },\n                        isDropAllowed: function () {\n                            return _ep.isDropAllowed.apply(_ep, arguments);\n                        },\n                        reference:referenceEndpoint,\n                        isRedrop:function(jpc, dhParams) {\n                            return jpc.suspendedEndpoint && dhParams.reference && (jpc.suspendedEndpoint.id === dhParams.reference.id);\n                        }\n                    });\n\n                dropOptions[dropEvent] = _ju.wrap(dropOptions[dropEvent], drop, true);\n                dropOptions[overEvent] = _ju.wrap(dropOptions[overEvent], function () {\n                    var draggable = _jp.getDragObject(arguments),\n                        id = _jsPlumb.getAttribute(_jp.getElement(draggable), \"dragId\"),\n                        _jpc = _jsPlumb.floatingConnections[id];\n\n                    if (_jpc != null) {\n                        var idx = _jsPlumb.getFloatingAnchorIndex(_jpc);\n                        // here we should fire the 'over' event if we are a target and this is a new connection,\n                        // or we are the same as the floating endpoint.\n                        var _cont = (this.isTarget && idx !== 0) || (_jpc.suspendedEndpoint && this.referenceEndpoint && this.referenceEndpoint.id == _jpc.suspendedEndpoint.id);\n                        if (_cont) {\n                            var bb = _jsPlumb.checkCondition(\"checkDropAllowed\", {\n                                sourceEndpoint: _jpc.endpoints[idx],\n                                targetEndpoint: this,\n                                connection: _jpc\n                            });\n                            this[(bb ? \"add\" : \"remove\") + \"Class\"](_jsPlumb.endpointDropAllowedClass);\n                            this[(bb ? \"remove\" : \"add\") + \"Class\"](_jsPlumb.endpointDropForbiddenClass);\n                            _jpc.endpoints[idx].anchor.over(this.anchor, this);\n                        }\n                    }\n                }.bind(this));\n\n                dropOptions[outEvent] = _ju.wrap(dropOptions[outEvent], function () {\n                    var draggable = _jp.getDragObject(arguments),\n                        id = draggable == null ? null : _jsPlumb.getAttribute(_jp.getElement(draggable), \"dragId\"),\n                        _jpc = id ? _jsPlumb.floatingConnections[id] : null;\n\n                    if (_jpc != null) {\n                        var idx = _jsPlumb.getFloatingAnchorIndex(_jpc);\n                        var _cont = (this.isTarget && idx !== 0) || (_jpc.suspendedEndpoint && this.referenceEndpoint && this.referenceEndpoint.id == _jpc.suspendedEndpoint.id);\n                        if (_cont) {\n                            this.removeClass(_jsPlumb.endpointDropAllowedClass);\n                            this.removeClass(_jsPlumb.endpointDropForbiddenClass);\n                            _jpc.endpoints[idx].anchor.out();\n                        }\n                    }\n                }.bind(this));\n\n                _jsPlumb.initDroppable(canvas, dropOptions, \"internal\", isTransient);\n            }\n        }.bind(this);\n\n        // Initialise the endpoint's canvas as a drop target. The drop handler will take care of the logic of whether\n        // something can actually be dropped.\n        if (!this.anchor.isFloating)\n            _initDropTarget(this.canvas, !(params._transient || this.anchor.isFloating), this, params.reference);\n\n\n        return this;\n    };\n\n    _ju.extend(_jp.Endpoint, _jp.OverlayCapableJsPlumbUIComponent, {\n\n        setVisible: function (v, doNotChangeConnections, doNotNotifyOtherEndpoint) {\n            this._jsPlumb.visible = v;\n            if (this.canvas) this.canvas.style.display = v ? \"block\" : \"none\";\n            this[v ? \"showOverlays\" : \"hideOverlays\"]();\n            if (!doNotChangeConnections) {\n                for (var i = 0; i < this.connections.length; i++) {\n                    this.connections[i].setVisible(v);\n                    if (!doNotNotifyOtherEndpoint) {\n                        var oIdx = this === this.connections[i].endpoints[0] ? 1 : 0;\n                        // only change the other endpoint if this is its only connection.\n                        if (this.connections[i].endpoints[oIdx].connections.length == 1) this.connections[i].endpoints[oIdx].setVisible(v, true, true);\n                    }\n                }\n            }\n        },\n        getAttachedElements: function () {\n            return this.connections;\n        },\n        applyType: function (t, doNotRepaint) {\n            this.setPaintStyle(t.endpointStyle || t.paintStyle, doNotRepaint);\n            this.setHoverPaintStyle(t.endpointHoverStyle || t.hoverPaintStyle, doNotRepaint);\n            if (t.maxConnections != null) this._jsPlumb.maxConnections = t.maxConnections;\n            if (t.scope) this.scope = t.scope;\n            _jp.extend(this, t, typeParameters);\n            if (t.cssClass != null && this.canvas) this._jsPlumb.instance.addClass(this.canvas, t.cssClass);\n            _jp.OverlayCapableJsPlumbUIComponent.applyType(this, t);\n        },\n        isEnabled: function () {\n            return this._jsPlumb.enabled;\n        },\n        setEnabled: function (e) {\n            this._jsPlumb.enabled = e;\n        },\n        cleanup: function () {\n            var anchorClass = this._jsPlumb.instance.endpointAnchorClassPrefix + (this._jsPlumb.currentAnchorClass ? \"-\" + this._jsPlumb.currentAnchorClass : \"\");\n            jsPlumb.removeClass(this.element, anchorClass);\n            this.anchor = null;\n            this.endpoint.cleanup(true);\n            this.endpoint.destroy();\n            this.endpoint = null;\n            // drag/drop\n            this._jsPlumb.instance.destroyDraggable(this.canvas, \"internal\");\n            this._jsPlumb.instance.destroyDroppable(this.canvas, \"internal\");\n        },\n        setHover: function (h) {\n            if (this.endpoint && this._jsPlumb && !this._jsPlumb.instance.isConnectionBeingDragged())\n                this.endpoint.setHover(h);\n        },\n        isFull: function () {\n            return this._jsPlumb.maxConnections === 0 ? true : !(this.isFloating() || this._jsPlumb.maxConnections < 0 || this.connections.length < this._jsPlumb.maxConnections);\n        },\n        /**\n         * private but needs to be exposed.\n         */\n        isFloating: function () {\n            return this.anchor != null && this.anchor.isFloating;\n        },\n        isConnectedTo: function (endpoint) {\n            var found = false;\n            if (endpoint) {\n                for (var i = 0; i < this.connections.length; i++) {\n                    if (this.connections[i].endpoints[1] == endpoint || this.connections[i].endpoints[0] == endpoint) {\n                        found = true;\n                        break;\n                    }\n                }\n            }\n            return found;\n        },\n        getConnectionCost: function () {\n            return this._jsPlumb.connectionCost;\n        },\n        setConnectionCost: function (c) {\n            this._jsPlumb.connectionCost = c;\n        },\n        areConnectionsDirected: function () {\n            return this._jsPlumb.connectionsDirected;\n        },\n        setConnectionsDirected: function (b) {\n            this._jsPlumb.connectionsDirected = b;\n        },\n        setElementId: function (_elId) {\n            this.elementId = _elId;\n            this.anchor.elementId = _elId;\n        },\n        setReferenceElement: function (_el) {\n            this.element = _jp.getElement(_el);\n        },\n        setDragAllowedWhenFull: function (allowed) {\n            this.dragAllowedWhenFull = allowed;\n        },\n        equals: function (endpoint) {\n            return this.anchor.equals(endpoint.anchor);\n        },\n        getUuid: function () {\n            return this._jsPlumb.uuid;\n        },\n        computeAnchor: function (params) {\n            return this.anchor.compute(params);\n        }\n    });\n\n    root.jsPlumbInstance.prototype.EndpointDropHandler = function (dhParams) {\n        return function (e) {\n\n            var _jsPlumb = dhParams.jsPlumb;\n\n            // remove the classes that are added dynamically. drop is neither forbidden nor allowed now that\n            // the drop is finishing.\n            dhParams.removeClass(_jsPlumb.endpointDropAllowedClass);\n            dhParams.removeClass(_jsPlumb.endpointDropForbiddenClass);\n\n            var originalEvent = _jsPlumb.getDropEvent(arguments),\n                draggable = _jsPlumb.getDragObject(arguments),\n                id = _jsPlumb.getAttribute(draggable, \"dragId\"),\n                elId = _jsPlumb.getAttribute(draggable, \"elId\"),\n                scope = _jsPlumb.getAttribute(draggable, \"originalScope\"),\n                jpc = _jsPlumb.floatingConnections[id];\n\n            // if no active connection, bail.\n            if (jpc == null) return;\n\n            // calculate if this is an existing connection.\n            var existingConnection = jpc.suspendedEndpoint != null;\n\n            // if suspended endpoint exists but has been cleaned up, bail. This means it's an existing connection\n            // that has been detached and will shortly be discarded.\n            if (existingConnection && jpc.suspendedEndpoint._jsPlumb == null) return;\n\n            // get the drop endpoint. for a normal connection this is just the one that would replace the currently\n            // floating endpoint. for a makeTarget this is a new endpoint that is created on drop. But we leave that to\n            // the handler to figure out.\n            var _ep = dhParams.getEndpoint(jpc);\n\n            // If we're not given an endpoint to use, bail.\n            if (_ep == null) return;\n\n            // if this is a drop back where the connection came from, mark it force reattach and\n            // return; the stop handler will reattach. without firing an event.\n            if (dhParams.isRedrop(jpc, dhParams)) {\n                jpc._forceReattach = true;\n                jpc.setHover(false);\n                if (dhParams.maybeCleanup) dhParams.maybeCleanup(_ep);\n                return;\n            }\n\n            // ensure we dont bother trying to drop sources on non-source eps, and same for target.\n            var idx = _jsPlumb.getFloatingAnchorIndex(jpc);\n            if ((idx === 0 && !dhParams.isSource)|| (idx === 1 && !dhParams.isTarget)){\n                if (dhParams.maybeCleanup) dhParams.maybeCleanup(_ep);\n                return;\n            }\n\n            if (dhParams.onDrop) dhParams.onDrop(jpc);\n\n            // restore the original scope if necessary (issue 57)\n            if (scope) _jsPlumb.setDragScope(draggable, scope);\n\n            // if the target of the drop is full, fire an event (we abort below)\n            // makeTarget: keep.\n            var isFull = dhParams.isFull(e);\n            if (isFull) {\n                _ep.fire(\"maxConnections\", {\n                    endpoint: this,\n                    connection: jpc,\n                    maxConnections: _ep._jsPlumb.maxConnections\n                }, originalEvent);\n            }\n            //\n            // if endpoint enabled, not full, and matches the index of the floating endpoint...\n            if (!isFull &&  dhParams.enabled()) {\n                var _doContinue = true;\n\n                // before testing for beforeDrop, reset the connection's source/target to be the actual DOM elements\n                // involved (that is, stash any temporary stuff used for dragging. but we need to keep it around in\n                // order that the anchor manager can clean things up properly).\n                if (idx === 0) {\n                    jpc.floatingElement = jpc.source;\n                    jpc.floatingId = jpc.sourceId;\n                    jpc.floatingEndpoint = jpc.endpoints[0];\n                    jpc.floatingIndex = 0;\n                    jpc.source = dhParams.element;\n                    jpc.sourceId = dhParams.elementId;\n                } else {\n                    jpc.floatingElement = jpc.target;\n                    jpc.floatingId = jpc.targetId;\n                    jpc.floatingEndpoint = jpc.endpoints[1];\n                    jpc.floatingIndex = 1;\n                    jpc.target = dhParams.element;\n                    jpc.targetId = dhParams.elementId;\n                }\n\n                // if this is an existing connection and detach is not allowed we won't continue. The connection's\n                // endpoints have been reinstated; everything is back to how it was.\n                if (existingConnection && jpc.suspendedEndpoint.id != _ep.id) {\n\n                    if (!jpc.isDetachAllowed(jpc) || !jpc.endpoints[idx].isDetachAllowed(jpc) || !jpc.suspendedEndpoint.isDetachAllowed(jpc) || !_jsPlumb.checkCondition(\"beforeDetach\", jpc))\n                        _doContinue = false;\n                }\n\n// ------------ wrap the execution path in a function so we can support asynchronous beforeDrop\n\n                var continueFunction = function (optionalData) {\n                    // remove this jpc from the current endpoint, which is a floating endpoint that we will\n                    // subsequently discard.\n                    jpc.endpoints[idx].detachFromConnection(jpc);\n\n                    // if there's a suspended endpoint, detach it from the connection.\n                    if (jpc.suspendedEndpoint) jpc.suspendedEndpoint.detachFromConnection(jpc);\n\n                    jpc.endpoints[idx] = _ep;\n                    _ep.addConnection(jpc);\n\n                    // copy our parameters in to the connection:\n                    var params = _ep.getParameters();\n                    for (var aParam in params)\n                        jpc.setParameter(aParam, params[aParam]);\n\n                    if (!existingConnection) {\n                        // if not an existing connection and\n                        if (params.draggable)\n                            _jsPlumb.initDraggable(this.element, dragOptions, \"internal\", _jsPlumb);\n                    }\n                    else {\n                        var suspendedElementId = jpc.suspendedEndpoint.elementId;\n                        _jsPlumb.fireMoveEvent({\n                            index: idx,\n                            originalSourceId: idx === 0 ? suspendedElementId : jpc.sourceId,\n                            newSourceId: idx === 0 ? _ep.elementId : jpc.sourceId,\n                            originalTargetId: idx == 1 ? suspendedElementId : jpc.targetId,\n                            newTargetId: idx == 1 ? _ep.elementId : jpc.targetId,\n                            originalSourceEndpoint: idx === 0 ? jpc.suspendedEndpoint : jpc.endpoints[0],\n                            newSourceEndpoint: idx === 0 ? _ep : jpc.endpoints[0],\n                            originalTargetEndpoint: idx == 1 ? jpc.suspendedEndpoint : jpc.endpoints[1],\n                            newTargetEndpoint: idx == 1 ? _ep : jpc.endpoints[1],\n                            connection: jpc\n                        }, originalEvent);\n                    }\n\n                    if (idx == 1) {\n                        _jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId, jpc.floatingId, jpc.targetId, jpc);\n                    }\n                    else {\n                        _jsPlumb.anchorManager.sourceChanged(jpc.floatingId, jpc.sourceId, jpc, jpc.source);\n                    }\n\n                    // when makeSource has uniqueEndpoint:true, we want to create connections with new endpoints\n                    // that are subsequently deleted. So makeSource sets `finalEndpoint`, which is the Endpoint to\n                    // which the connection should be attached. The `detachFromConnection` call below results in the\n                    // temporary endpoint being cleaned up.\n                    if (jpc.endpoints[0].finalEndpoint) {\n                        var _toDelete = jpc.endpoints[0];\n                        _toDelete.detachFromConnection(jpc);\n                        jpc.endpoints[0] = jpc.endpoints[0].finalEndpoint;\n                        jpc.endpoints[0].addConnection(jpc);\n                    }\n\n                    // if optionalData was given, merge it onto the connection's data.\n                    if (_ju.isObject(optionalData)) {\n                        jpc.mergeData(optionalData);\n                    }\n                    // finalise will inform the anchor manager and also add to\n                    // connectionsByScope if necessary.\n                    _jsPlumb.finaliseConnection(jpc, null, originalEvent, false);\n                    jpc.setHover(false);\n\n                }.bind(this);\n\n                var dontContinueFunction = function () {\n                    // otherwise just put it back on the endpoint it was on before the drag.\n                    if (jpc.suspendedEndpoint) {\n                        jpc.endpoints[idx] = jpc.suspendedEndpoint;\n                        jpc.setHover(false);\n                        jpc._forceDetach = true;\n                        if (idx === 0) {\n                            jpc.source = jpc.suspendedEndpoint.element;\n                            jpc.sourceId = jpc.suspendedEndpoint.elementId;\n                        } else {\n                            jpc.target = jpc.suspendedEndpoint.element;\n                            jpc.targetId = jpc.suspendedEndpoint.elementId;\n                        }\n                        jpc.suspendedEndpoint.addConnection(jpc);\n\n                        // TODO checkSanity\n                        if (idx == 1) {\n                            _jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId, jpc.floatingId, jpc.targetId, jpc);\n                        }\n                        else {\n                            _jsPlumb.anchorManager.sourceChanged(jpc.floatingId, jpc.sourceId, jpc, jpc.source);\n                        }\n\n                        _jsPlumb.repaint(jpc.sourceId);\n                        jpc._forceDetach = false;\n                    }\n                };\n\n// --------------------------------------\n                // now check beforeDrop.  this will be available only on Endpoints that are setup to\n                // have a beforeDrop condition (although, secretly, under the hood all Endpoints and\n                // the Connection have them, because they are on jsPlumbUIComponent.  shhh!), because\n                // it only makes sense to have it on a target endpoint.\n                _doContinue = _doContinue && dhParams.isDropAllowed(jpc.sourceId, jpc.targetId, jpc.scope, jpc, _ep);// && jpc.pending;\n\n                if (_doContinue) {\n                    continueFunction(_doContinue);\n                    return true;\n                }\n                else {\n                    dontContinueFunction();\n                }\n            }\n\n            if (dhParams.maybeCleanup) dhParams.maybeCleanup(_ep);\n\n            _jsPlumb.currentlyDragging = false;\n        };\n    };\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.1.1\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the code for Connections.\n *\n * Copyright (c) 2010 - 2015 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * https://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this,\n        _jp = root.jsPlumb,\n        _ju = root.jsPlumbUtil;\n\n    var makeConnector = function (_jsPlumb, renderMode, connectorName, connectorArgs, forComponent) {\n            if (!_jsPlumb.Defaults.DoNotThrowErrors && jsPlumb.Connectors[renderMode][connectorName] == null)\n                throw { msg: \"jsPlumb: unknown connector type '\" + connectorName + \"'\" };\n\n            return new _jp.Connectors[renderMode][connectorName](connectorArgs, forComponent);\n        },\n        _makeAnchor = function (anchorParams, elementId, _jsPlumb) {\n            return (anchorParams) ? _jsPlumb.makeAnchor(anchorParams, elementId, _jsPlumb) : null;\n        },\n        _updateConnectedClass = function (conn, element, _jsPlumb, remove) {\n            if (element != null) {\n                element._jsPlumbConnections = element._jsPlumbConnections || {};\n                if (remove)\n                    delete element._jsPlumbConnections[conn.id];\n                else\n                    element._jsPlumbConnections[conn.id] = true;\n\n                if (_ju.isEmpty(element._jsPlumbConnections)) {\n                    _jsPlumb.removeClass(element, _jsPlumb.connectedClass);\n                }\n                else\n                    _jsPlumb.addClass(element, _jsPlumb.connectedClass);\n            }\n        };\n\n    _jp.Connection = function (params) {\n        var _newEndpoint = params.newEndpoint;\n\n        this.id = params.id;\n        this.connector = null;\n        this.idPrefix = \"_jsplumb_c_\";\n        this.defaultLabelLocation = 0.5;\n        this.defaultOverlayKeys = [\"Overlays\", \"ConnectionOverlays\"];\n        // if a new connection is the result of moving some existing connection, params.previousConnection\n        // will have that Connection in it. listeners for the jsPlumbConnection event can look for that\n        // member and take action if they need to.\n        this.previousConnection = params.previousConnection;\n        this.source = _jp.getElement(params.source);\n        this.target = _jp.getElement(params.target);\n        // sourceEndpoint and targetEndpoint override source/target, if they are present. but \n        // source is not overridden if the Endpoint has declared it is not the final target of a connection;\n        // instead we use the source that the Endpoint declares will be the final source element.\n        if (params.sourceEndpoint) this.source = params.sourceEndpoint.getElement();\n        if (params.targetEndpoint) this.target = params.targetEndpoint.getElement();\n\n        _jp.OverlayCapableJsPlumbUIComponent.apply(this, arguments);\n\n        this.sourceId = this._jsPlumb.instance.getId(this.source);\n        this.targetId = this._jsPlumb.instance.getId(this.target);\n        this.scope = params.scope; // scope may have been passed in to the connect call. if it wasn't, we will pull it from the source endpoint, after having initialised the endpoints.            \n        this.endpoints = [];\n        this.endpointStyles = [];\n\n        var _jsPlumb = this._jsPlumb.instance;\n\n        _jsPlumb.manage(this.sourceId, this.source);\n        _jsPlumb.manage(this.targetId, this.target);\n\n        this._jsPlumb.visible = true;\n        this._jsPlumb.editable = params.editable === true;\n        this._jsPlumb.params = {\n            cssClass: params.cssClass,\n            container: params.container,\n            \"pointer-events\": params[\"pointer-events\"],\n            editorParams: params.editorParams,\n            overlays: params.overlays\n        };\n        this._jsPlumb.lastPaintedAt = null;\n\n        // listen to mouseover and mouseout events passed from the container delegate.\n        this.bind(\"mouseover\", function () {\n            this.setHover(true);\n        }.bind(this));\n        this.bind(\"mouseout\", function () {\n            this.setHover(false);\n        }.bind(this));\n\n        this.editableRequested = params.editable !== false;\n        this.setEditable = function(e) {\n            return this.connector ? this.connector.setEditable(e) : false;\n        };\n        this.isEditable = function() { return this.connector ? this.connector.isEditable() : false; };\n        this.isEditing = function() { return this.connector ? this.connector.isEditing() : false; };\n\n// INITIALISATION CODE\n\n        this.makeEndpoint = function (isSource, el, elId, ep) {\n            elId = elId || this._jsPlumb.instance.getId(el);\n            return this.prepareEndpoint(_jsPlumb, _newEndpoint, this, ep, isSource ? 0 : 1, params, el, elId);\n        };\n\n        // if type given, get the endpoint definitions mapping to that type from the jsplumb instance, and use those.\n        // we apply types at the end of this constructor but endpoints are only honoured in a type definition at\n        // create time.\n        if (params.type) {\n            params.endpoints = this._jsPlumb.instance.deriveEndpointAndAnchorSpec(params.type).endpoints;\n        }\n\n        var eS = this.makeEndpoint(true, this.source, this.sourceId, params.sourceEndpoint),\n            eT = this.makeEndpoint(false, this.target, this.targetId, params.targetEndpoint);\n\n        if (eS) _ju.addToList(params.endpointsByElement, this.sourceId, eS);\n        if (eT) _ju.addToList(params.endpointsByElement, this.targetId, eT);\n        // if scope not set, set it to be the scope for the source endpoint.\n        if (!this.scope) this.scope = this.endpoints[0].scope;\n\n        // if explicitly told to (or not to) delete endpoints on detach, override endpoint's preferences\n        if (params.deleteEndpointsOnDetach != null) {\n            this.endpoints[0]._deleteOnDetach = params.deleteEndpointsOnDetach;\n            this.endpoints[1]._deleteOnDetach = params.deleteEndpointsOnDetach;\n        }\n        else {\n            // otherwise, unless the endpoints say otherwise, mark them for deletion.\n            if (!this.endpoints[0]._doNotDeleteOnDetach) this.endpoints[0]._deleteOnDetach = true;\n            if (!this.endpoints[1]._doNotDeleteOnDetach) this.endpoints[1]._deleteOnDetach = true;\n        }\n\n// -------------------------- DEFAULT TYPE ---------------------------------------------\n\n        // DETACHABLE\n        var _detachable = _jsPlumb.Defaults.ConnectionsDetachable;\n        if (params.detachable === false) _detachable = false;\n        if (this.endpoints[0].connectionsDetachable === false) _detachable = false;\n        if (this.endpoints[1].connectionsDetachable === false) _detachable = false;\n        // REATTACH\n        var _reattach = params.reattach || this.endpoints[0].reattachConnections || this.endpoints[1].reattachConnections || _jsPlumb.Defaults.ReattachConnections;\n\n        this.appendToDefaultType({\n            detachable: _detachable,\n            reattach: _reattach,\n            paintStyle:this.endpoints[0].connectorStyle || this.endpoints[1].connectorStyle || params.paintStyle || _jsPlumb.Defaults.PaintStyle || jsPlumb.Defaults.PaintStyle,\n            hoverPaintStyle:this.endpoints[0].connectorHoverStyle || this.endpoints[1].connectorHoverStyle || params.hoverPaintStyle || _jsPlumb.Defaults.HoverPaintStyle || jsPlumb.Defaults.HoverPaintStyle\n        });\n\n\n        var _suspendedAt = _jsPlumb.getSuspendedAt();\n        if (!_jsPlumb.isSuspendDrawing()) {\n            // paint the endpoints\n            var myInfo = _jsPlumb.getCachedData(this.sourceId),\n                myOffset = myInfo.o, myWH = myInfo.s,\n                otherInfo = _jsPlumb.getCachedData(this.targetId),\n                otherOffset = otherInfo.o,\n                otherWH = otherInfo.s,\n                initialTimestamp = _suspendedAt || _jsPlumb.timestamp(),\n                anchorLoc = this.endpoints[0].anchor.compute({\n                    xy: [ myOffset.left, myOffset.top ], wh: myWH, element: this.endpoints[0],\n                    elementId: this.endpoints[0].elementId,\n                    txy: [ otherOffset.left, otherOffset.top ], twh: otherWH, tElement: this.endpoints[1],\n                    timestamp: initialTimestamp\n                });\n\n            this.endpoints[0].paint({ anchorLoc: anchorLoc, timestamp: initialTimestamp });\n\n            anchorLoc = this.endpoints[1].anchor.compute({\n                xy: [ otherOffset.left, otherOffset.top ], wh: otherWH, element: this.endpoints[1],\n                elementId: this.endpoints[1].elementId,\n                txy: [ myOffset.left, myOffset.top ], twh: myWH, tElement: this.endpoints[0],\n                timestamp: initialTimestamp\n            });\n            this.endpoints[1].paint({ anchorLoc: anchorLoc, timestamp: initialTimestamp });\n        }\n\n        this.getTypeDescriptor = function () {\n            return \"connection\";\n        };\n        this.getAttachedElements = function () {\n            return this.endpoints;\n        };\n\n        this.isDetachable = function () {\n            return this._jsPlumb.detachable === true;\n        };\n        this.setDetachable = function (detachable) {\n            this._jsPlumb.detachable = detachable === true;\n        };\n        this.isReattach = function () {\n            return this._jsPlumb.reattach === true || this.endpoints[0].reattachConnections === true || this.endpoints[1].reattachConnections === true;\n        };\n        this.setReattach = function (reattach) {\n            this._jsPlumb.reattach = reattach === true;\n        };\n\n// END INITIALISATION CODE\n\n\n// COST + DIRECTIONALITY\n        // if cost not supplied, try to inherit from source endpoint\n        this._jsPlumb.cost = params.cost || this.endpoints[0].getConnectionCost();\n        this._jsPlumb.directed = params.directed;\n        // inherit directed flag if set no source endpoint\n        if (params.directed == null) this._jsPlumb.directed = this.endpoints[0].areConnectionsDirected();\n// END COST + DIRECTIONALITY\n\n// PARAMETERS\n        // merge all the parameters objects into the connection.  parameters set\n        // on the connection take precedence; then source endpoint params, then\n        // finally target endpoint params.\n        var _p = jsPlumb.extend({}, this.endpoints[1].getParameters());\n        _jp.extend(_p, this.endpoints[0].getParameters());\n        _jp.extend(_p, this.getParameters());\n        this.setParameters(_p);\n// END PARAMETERS\n\n// PAINTING\n\n        this.setConnector(this.endpoints[0].connector || this.endpoints[1].connector || params.connector || _jsPlumb.Defaults.Connector || _jp.Defaults.Connector, true);\n        if (params.geometry) {\n            this.connector.setGeometry(params.geometry);\n        }\n        var data = params.data == null || !_ju.isObject(params.data) ? {} : params.data;\n        this.getData = function() { return data; };\n        this.setData = function(d) { data = d || {}; };\n        this.mergeData = function(d) { data = jsPlumb.extend(data, d); };\n\n        // the very last thing we do is apply types, if there are any.\n        var _types = [ \"default\", this.endpoints[0].connectionType, this.endpoints[1].connectionType,  params.type ].join(\" \");\n        if (/[^\\s]/.test(_types))\n            this.addType(_types, params.data, true);\n\n        this.updateConnectedClass();\n\n// END PAINTING    \n    };\n\n    _ju.extend(_jp.Connection, _jp.OverlayCapableJsPlumbUIComponent, {\n        applyType: function (t, doNotRepaint, typeMap) {\n\n            // none of these things result in the creation of objects so can be ignored.\n            if (t.detachable != null) this.setDetachable(t.detachable);\n            if (t.reattach != null) this.setReattach(t.reattach);\n            if (t.scope) this.scope = t.scope;\n\n            if (t.cssClass != null && this.canvas) this._jsPlumb.instance.addClass(this.canvas, t.cssClass);\n\n            var _anchors = null;\n            // this also results in the creation of objects.\n            if (t.anchor) {\n                // note that even if the param was anchor, we store `anchors`.\n                _anchors = this.getCachedTypeItem(\"anchors\", typeMap.anchor);\n                if (_anchors == null) {\n                    _anchors = [ this._jsPlumb.instance.makeAnchor(t.anchor), this._jsPlumb.instance.makeAnchor(t.anchor) ];\n                    this.cacheTypeItem(\"anchors\", _anchors, typeMap.anchor);\n                }\n            }\n            else if (t.anchors) {\n                _anchors = this.getCachedTypeItem(\"anchors\", typeMap.anchors);\n                if (_anchors == null) {\n                    _anchors = [\n                        this._jsPlumb.instance.makeAnchor(t.anchors[0]),\n                        this._jsPlumb.instance.makeAnchor(t.anchors[1])\n                    ];\n                    this.cacheTypeItem(\"anchors\", _anchors, typeMap.anchors);\n                }\n            }\n            if (_anchors != null) {\n                this.endpoints[0].anchor = _anchors[0];\n                this.endpoints[1].anchor = _anchors[1];\n                if (this.endpoints[1].anchor.isDynamic) this._jsPlumb.instance.repaint(this.endpoints[1].elementId);\n            }\n\n            _jp.OverlayCapableJsPlumbUIComponent.applyType(this, t);\n        },\n        addClass: function (c, informEndpoints) {\n            if (informEndpoints) {\n                this.endpoints[0].addClass(c);\n                this.endpoints[1].addClass(c);\n                if (this.suspendedEndpoint) this.suspendedEndpoint.addClass(c);\n            }\n            if (this.connector) {\n                this.connector.addClass(c);\n            }\n        },\n        removeClass: function (c, informEndpoints) {\n            if (informEndpoints) {\n                this.endpoints[0].removeClass(c);\n                this.endpoints[1].removeClass(c);\n                if (this.suspendedEndpoint) this.suspendedEndpoint.removeClass(c);\n            }\n            if (this.connector) {\n                this.connector.removeClass(c);\n            }\n        },\n        isVisible: function () {\n            return this._jsPlumb.visible;\n        },\n        setVisible: function (v) {\n            this._jsPlumb.visible = v;\n            if (this.connector)\n                this.connector.setVisible(v);\n            this.repaint();\n        },\n        cleanup: function () {\n            this.updateConnectedClass(true);\n            this.endpoints = null;\n            this.source = null;\n            this.target = null;\n            if (this.connector != null) {\n                this.connector.cleanup(true);\n                this.connector.destroy(true);\n            }\n            this.connector = null;\n        },\n        updateConnectedClass:function(remove) {\n            if (this._jsPlumb) {\n                _updateConnectedClass(this, this.source, this._jsPlumb.instance, remove);\n                _updateConnectedClass(this, this.target, this._jsPlumb.instance, remove);\n            }\n        },\n        setHover: function (state) {\n            if (this.connector && this._jsPlumb && !this._jsPlumb.instance.isConnectionBeingDragged()) {\n                this.connector.setHover(state);\n                root.jsPlumb[state ? \"addClass\" : \"removeClass\"](this.source, this._jsPlumb.instance.hoverSourceClass);\n                root.jsPlumb[state ? \"addClass\" : \"removeClass\"](this.target, this._jsPlumb.instance.hoverTargetClass);\n            }\n        },\n        getUuids:function() {\n            return [ this.endpoints[0].getUuid(), this.endpoints[1].getUuid() ];\n        },\n        getCost: function () {\n            return this._jsPlumb ? this._jsPlumb.cost : -Infinity;\n        },\n        setCost: function (c) {\n            this._jsPlumb.cost = c;\n        },\n        isDirected: function () {\n            return this._jsPlumb.directed === true;\n        },\n        getConnector: function () {\n            return this.connector;\n        },\n        getGeometry : function() { return this.connector ? this.connector.getGeometry() : null; },\n        setGeometry : function(g) { if (this.connector) this.connector.setGeometry(g); },\n        prepareConnector:function(connectorSpec, typeId) {\n            var connectorArgs = {\n                    _jsPlumb: this._jsPlumb.instance,\n                    cssClass: (this._jsPlumb.params.cssClass || \"\") + (this.isEditable() ? this._jsPlumb.instance.editableConnectorClass : \"\"),\n                    container: this._jsPlumb.params.container,\n                    \"pointer-events\": this._jsPlumb.params[\"pointer-events\"],\n                    editable:this.editableRequested\n                },\n                renderMode = this._jsPlumb.instance.getRenderMode(),\n                connector;\n\n            if (_ju.isString(connectorSpec))\n                connector = makeConnector(this._jsPlumb.instance, renderMode, connectorSpec, connectorArgs, this); // lets you use a string as shorthand.\n            else if (_ju.isArray(connectorSpec)) {\n                if (connectorSpec.length == 1)\n                    connector = makeConnector(this._jsPlumb.instance, renderMode, connectorSpec[0], connectorArgs, this);\n                else\n                    connector = makeConnector(this._jsPlumb.instance, renderMode, connectorSpec[0], _ju.merge(connectorSpec[1], connectorArgs), this);\n            }\n            if (typeId != null) connector.typeId = typeId;\n            return connector;\n        },\n        setPreparedConnector: function(connector, doNotRepaint, doNotChangeListenerComponent, typeId) {\n\n            var previous, previousClasses = \"\";\n            // the connector will not be cleaned up if it was set as part of a type, because `typeId` will be set on it\n            // and we havent passed in `true` for \"force\" here.\n            if (this.connector != null) {\n                previous = this.connector;\n                previousClasses = previous.getClass();\n                this.connector.cleanup();\n                this.connector.destroy();\n            }\n\n            this.connector = connector;\n            if (typeId) {\n                this.cacheTypeItem(\"connector\", connector, typeId);\n            }\n\n            this.canvas = this.connector.canvas;\n            this.bgCanvas = this.connector.bgCanvas;\n\n            // put classes from prior connector onto the canvas\n            this.addClass(previousClasses);\n\n            // new: instead of binding listeners per connector, we now just have one delegate on the container.\n            // so for that handler we set the connection as the '_jsPlumb' member of the canvas element, and\n            // bgCanvas, if it exists, which it does right now in the VML renderer, so it won't from v 2.0.0 onwards.\n            if (this.canvas) this.canvas._jsPlumb = this;\n            if (this.bgCanvas) this.bgCanvas._jsPlumb = this;\n\n            if (previous != null) {\n                var o = this.getOverlays();\n                for (var i = 0; i < o.length; i++) {\n                    if (o[i].transfer) o[i].transfer(this.connector);\n                }\n            }\n\n            if (!doNotChangeListenerComponent) this.setListenerComponent(this.connector);\n            if (!doNotRepaint) this.repaint();\n        },\n        setConnector: function (connectorSpec, doNotRepaint, doNotChangeListenerComponent, typeId) {\n            var connector = this.prepareConnector(connectorSpec, typeId);\n            this.setPreparedConnector(connector, doNotRepaint, doNotChangeListenerComponent, typeId);\n        },\n        paint: function (params) {\n\n            if (!this._jsPlumb.instance.isSuspendDrawing() && this._jsPlumb.visible) {\n                params = params || {};\n                var timestamp = params.timestamp,\n                // if the moving object is not the source we must transpose the two references.\n                    swap = false,\n                    tId = swap ? this.sourceId : this.targetId, sId = swap ? this.targetId : this.sourceId,\n                    tIdx = swap ? 0 : 1, sIdx = swap ? 1 : 0;\n\n                if (timestamp == null || timestamp != this._jsPlumb.lastPaintedAt) {\n                    var sourceInfo = this._jsPlumb.instance.updateOffset({elId:sId}).o,\n                        targetInfo = this._jsPlumb.instance.updateOffset({elId:tId}).o,\n                        sE = this.endpoints[sIdx], tE = this.endpoints[tIdx];\n\n                    var sAnchorP = sE.anchor.getCurrentLocation({xy: [sourceInfo.left, sourceInfo.top], wh: [sourceInfo.width, sourceInfo.height], element: sE, timestamp: timestamp}),\n                        tAnchorP = tE.anchor.getCurrentLocation({xy: [targetInfo.left, targetInfo.top], wh: [targetInfo.width, targetInfo.height], element: tE, timestamp: timestamp});\n\n                    this.connector.resetBounds();\n\n                    this.connector.compute({\n                        sourcePos: sAnchorP,\n                        targetPos: tAnchorP,\n                        sourceEndpoint: this.endpoints[sIdx],\n                        targetEndpoint: this.endpoints[tIdx],\n                        lineWidth: this._jsPlumb.paintStyleInUse.lineWidth,\n                        sourceInfo: sourceInfo,\n                        targetInfo: targetInfo\n                    });\n\n                    var overlayExtents = { minX: Infinity, minY: Infinity, maxX: -Infinity, maxY: -Infinity };\n\n                    // compute overlays. we do this first so we can get their placements, and adjust the\n                    // container if needs be (if an overlay would be clipped)\n                    for (var i in this._jsPlumb.overlays) {\n                        if (this._jsPlumb.overlays.hasOwnProperty(i)) {\n                            var o = this._jsPlumb.overlays[i];\n                            if (o.isVisible()) {\n                                this._jsPlumb.overlayPlacements[i] = o.draw(this.connector, this._jsPlumb.paintStyleInUse, this.getAbsoluteOverlayPosition(o));\n                                overlayExtents.minX = Math.min(overlayExtents.minX, this._jsPlumb.overlayPlacements[i].minX);\n                                overlayExtents.maxX = Math.max(overlayExtents.maxX, this._jsPlumb.overlayPlacements[i].maxX);\n                                overlayExtents.minY = Math.min(overlayExtents.minY, this._jsPlumb.overlayPlacements[i].minY);\n                                overlayExtents.maxY = Math.max(overlayExtents.maxY, this._jsPlumb.overlayPlacements[i].maxY);\n                            }\n                        }\n                    }\n\n                    var lineWidth = parseFloat(this._jsPlumb.paintStyleInUse.lineWidth || 1) / 2,\n                        outlineWidth = parseFloat(this._jsPlumb.paintStyleInUse.lineWidth || 0),\n                        extents = {\n                            xmin: Math.min(this.connector.bounds.minX - (lineWidth + outlineWidth), overlayExtents.minX),\n                            ymin: Math.min(this.connector.bounds.minY - (lineWidth + outlineWidth), overlayExtents.minY),\n                            xmax: Math.max(this.connector.bounds.maxX + (lineWidth + outlineWidth), overlayExtents.maxX),\n                            ymax: Math.max(this.connector.bounds.maxY + (lineWidth + outlineWidth), overlayExtents.maxY)\n                        };\n                    // paint the connector.\n                    this.connector.paint(this._jsPlumb.paintStyleInUse, null, extents);\n                    // and then the overlays\n                    for (var j in this._jsPlumb.overlays) {\n                        if (this._jsPlumb.overlays.hasOwnProperty(j)) {\n                            var p = this._jsPlumb.overlays[j];\n                            if (p.isVisible()) {\n                                p.paint(this._jsPlumb.overlayPlacements[j], extents);\n                            }\n                        }\n                    }\n                }\n                this._jsPlumb.lastPaintedAt = timestamp;\n            }\n        },\n        repaint: function (params) {\n            params = params || {};\n            this.paint({ elId: this.sourceId, recalc: !(params.recalc === false), timestamp: params.timestamp});\n        },\n        prepareEndpoint: function (_jsPlumb, _newEndpoint, conn, existing, index, params, element, elementId) {\n            var e;\n            if (existing) {\n                conn.endpoints[index] = existing;\n                existing.addConnection(conn);\n            } else {\n                if (!params.endpoints) params.endpoints = [ null, null ];\n                var ep = params.endpoints[index] || params.endpoint || _jsPlumb.Defaults.Endpoints[index] || jsPlumb.Defaults.Endpoints[index] || _jsPlumb.Defaults.Endpoint || jsPlumb.Defaults.Endpoint;\n                if (!params.endpointStyles) params.endpointStyles = [ null, null ];\n                if (!params.endpointHoverStyles) params.endpointHoverStyles = [ null, null ];\n                var es = params.endpointStyles[index] || params.endpointStyle || _jsPlumb.Defaults.EndpointStyles[index] || jsPlumb.Defaults.EndpointStyles[index] || _jsPlumb.Defaults.EndpointStyle || jsPlumb.Defaults.EndpointStyle;\n                // Endpoints derive their fillStyle from the connector's strokeStyle, if no fillStyle was specified.\n                if (es.fillStyle == null && params.paintStyle != null)\n                    es.fillStyle = params.paintStyle.strokeStyle;\n\n                if (es.outlineColor == null && params.paintStyle != null)\n                    es.outlineColor = params.paintStyle.outlineColor;\n                if (es.outlineWidth == null && params.paintStyle != null)\n                    es.outlineWidth = params.paintStyle.outlineWidth;\n\n                var ehs = params.endpointHoverStyles[index] || params.endpointHoverStyle || _jsPlumb.Defaults.EndpointHoverStyles[index] || jsPlumb.Defaults.EndpointHoverStyles[index] || _jsPlumb.Defaults.EndpointHoverStyle || jsPlumb.Defaults.EndpointHoverStyle;\n                // endpoint hover fill style is derived from connector's hover stroke style\n                if (params.hoverPaintStyle != null) {\n                    if (ehs == null) ehs = {};\n                    if (ehs.fillStyle == null) {\n                        ehs.fillStyle = params.hoverPaintStyle.strokeStyle;\n                    }\n                }\n                var a = params.anchors ? params.anchors[index] :\n                        params.anchor ? params.anchor :\n                            _makeAnchor(_jsPlumb.Defaults.Anchors[index], elementId, _jsPlumb) ||\n                            _makeAnchor(_jp.Defaults.Anchors[index], elementId, _jsPlumb) ||\n                            _makeAnchor(_jsPlumb.Defaults.Anchor, elementId, _jsPlumb) ||\n                            _makeAnchor(_jp.Defaults.Anchor, elementId, _jsPlumb),\n                    u = params.uuids ? params.uuids[index] : null;\n\n                e = _newEndpoint({\n                    paintStyle: es, hoverPaintStyle: ehs, endpoint: ep, connections: [ conn ],\n                    uuid: u, anchor: a, source: element, scope: params.scope,\n                    reattach: params.reattach || _jsPlumb.Defaults.ReattachConnections,\n                    detachable: params.detachable || _jsPlumb.Defaults.ConnectionsDetachable\n                });\n                conn.endpoints[index] = e;\n\n                if (params.drawEndpoints === false) e.setVisible(false, true, true);\n\n            }\n            return e;\n        }\n\n    }); // END Connection class            \n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.1.1\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the code for creating and manipulating anchors.\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n\n    var root = this,\n        _ju = root.jsPlumbUtil,\n        _jp = root.jsPlumb;\n\n    //\n    // manages anchors for all elements.\n    //\n    _jp.AnchorManager = function (params) {\n        var _amEndpoints = {},\n            continuousAnchorLocations = {},\n            userDefinedContinuousAnchorLocations = {},\n            continuousAnchorOrientations = {},\n            Orientation = { HORIZONTAL: \"horizontal\", VERTICAL: \"vertical\", DIAGONAL: \"diagonal\", IDENTITY: \"identity\" },\n            axes = [\"left\", \"top\", \"right\", \"bottom\"],\n            connectionsByElementId = {},\n            self = this,\n            anchorLists = {},\n            jsPlumbInstance = params.jsPlumbInstance,\n            floatingConnections = {},\n            calculateOrientation = function (sourceId, targetId, sd, td, sourceAnchor, targetAnchor) {\n\n                if (sourceId === targetId) return {\n                    orientation: Orientation.IDENTITY,\n                    a: [\"top\", \"top\"]\n                };\n\n                var theta = Math.atan2((td.centery - sd.centery), (td.centerx - sd.centerx)),\n                    theta2 = Math.atan2((sd.centery - td.centery), (sd.centerx - td.centerx));\n\n// --------------------------------------------------------------------------------------\n\n                // improved face calculation. get midpoints of each face for source and target, then put in an array with all combinations of\n                // source/target faces. sort this array by distance between midpoints. the entry at index 0 is our preferred option. we can\n                // go through the array one by one until we find an entry in which each requested face is supported.\n                var candidates = [], midpoints = { };\n                (function (types, dim) {\n                    for (var i = 0; i < types.length; i++) {\n                        midpoints[types[i]] = {\n                            \"left\": [ dim[i].left, dim[i].centery ],\n                            \"right\": [ dim[i].right, dim[i].centery ],\n                            \"top\": [ dim[i].centerx, dim[i].top ],\n                            \"bottom\": [ dim[i].centerx , dim[i].bottom]\n                        };\n                    }\n                })([ \"source\", \"target\" ], [ sd, td ]);\n\n                for (var sf = 0; sf < axes.length; sf++) {\n                    for (var tf = 0; tf < axes.length; tf++) {\n                        candidates.push({\n                            source: axes[sf],\n                            target: axes[tf],\n                            dist: Biltong.lineLength(midpoints.source[axes[sf]], midpoints.target[axes[tf]])\n                        });\n                    }\n                }\n\n                candidates.sort(function (a, b) {\n                    return a.dist < b.dist ? -1 : a.dist > b.dist ? 1 : 0;\n                });\n\n                // now go through this list and try to get an entry that satisfies both (there will be one, unless one of the anchors\n                // declares no available faces)\n                var sourceEdge = candidates[0].source, targetEdge = candidates[0].target;\n                for (var i = 0; i < candidates.length; i++) {\n\n                    if (!sourceAnchor.isContinuous || sourceAnchor.isEdgeSupported(candidates[i].source))\n                        sourceEdge = candidates[i].source;\n                    else\n                        sourceEdge = null;\n\n                    if (!targetAnchor.isContinuous || targetAnchor.isEdgeSupported(candidates[i].target))\n                        targetEdge = candidates[i].target;\n                    else {\n                        targetEdge = null;\n                    }\n\n                    if (sourceEdge != null && targetEdge != null) break;\n                }\n\n// --------------------------------------------------------------------------------------\n\n                return {\n                    a: [ sourceEdge, targetEdge ],\n                    theta: theta,\n                    theta2: theta2\n                };\n            },\n        // used by placeAnchors function\n            placeAnchorsOnLine = function (desc, elementDimensions, elementPosition, connections, horizontal, otherMultiplier, reverse) {\n                var a = [], step = elementDimensions[horizontal ? 0 : 1] / (connections.length + 1);\n\n                for (var i = 0; i < connections.length; i++) {\n                    var val = (i + 1) * step, other = otherMultiplier * elementDimensions[horizontal ? 1 : 0];\n                    if (reverse)\n                        val = elementDimensions[horizontal ? 0 : 1] - val;\n\n                    var dx = (horizontal ? val : other), x = elementPosition[0] + dx, xp = dx / elementDimensions[0],\n                        dy = (horizontal ? other : val), y = elementPosition[1] + dy, yp = dy / elementDimensions[1];\n\n                    a.push([ x, y, xp, yp, connections[i][1], connections[i][2] ]);\n                }\n\n                return a;\n            },\n        // used by edgeSortFunctions\n            currySort = function (reverseAngles) {\n                return function (a, b) {\n                    var r = true;\n                    if (reverseAngles) {\n                        r = a[0][0] < b[0][0];\n                    }\n                    else {\n                        r = a[0][0] > b[0][0];\n                    }\n                    return r === false ? -1 : 1;\n                };\n            },\n        // used by edgeSortFunctions\n            leftSort = function (a, b) {\n                // first get adjusted values\n                var p1 = a[0][0] < 0 ? -Math.PI - a[0][0] : Math.PI - a[0][0],\n                    p2 = b[0][0] < 0 ? -Math.PI - b[0][0] : Math.PI - b[0][0];\n                if (p1 > p2) return 1;\n                else return a[0][1] > b[0][1] ? 1 : -1;\n            },\n        // used by placeAnchors\n            edgeSortFunctions = {\n                \"top\": function (a, b) {\n                    return a[0] > b[0] ? 1 : -1;\n                },\n                \"right\": currySort(true),\n                \"bottom\": currySort(true),\n                \"left\": leftSort\n            },\n        // used by placeAnchors\n            _sortHelper = function (_array, _fn) {\n                return _array.sort(_fn);\n            },\n        // used by AnchorManager.redraw\n            placeAnchors = function (elementId, _anchorLists) {\n                var cd = jsPlumbInstance.getCachedData(elementId), sS = cd.s, sO = cd.o,\n                    placeSomeAnchors = function (desc, elementDimensions, elementPosition, unsortedConnections, isHorizontal, otherMultiplier, orientation) {\n                        if (unsortedConnections.length > 0) {\n                            var sc = _sortHelper(unsortedConnections, edgeSortFunctions[desc]), // puts them in order based on the target element's pos on screen\n                                reverse = desc === \"right\" || desc === \"top\",\n                                anchors = placeAnchorsOnLine(desc, elementDimensions,\n                                    elementPosition, sc,\n                                    isHorizontal, otherMultiplier, reverse);\n\n                            // takes a computed anchor position and adjusts it for parent offset and scroll, then stores it.\n                            var _setAnchorLocation = function (endpoint, anchorPos) {\n                                continuousAnchorLocations[endpoint.id] = [ anchorPos[0], anchorPos[1], anchorPos[2], anchorPos[3] ];\n                                continuousAnchorOrientations[endpoint.id] = orientation;\n                            };\n\n                            for (var i = 0; i < anchors.length; i++) {\n                                var c = anchors[i][4], weAreSource = c.endpoints[0].elementId === elementId, weAreTarget = c.endpoints[1].elementId === elementId;\n                                if (weAreSource)\n                                    _setAnchorLocation(c.endpoints[0], anchors[i]);\n                                if (weAreTarget)\n                                    _setAnchorLocation(c.endpoints[1], anchors[i]);\n                            }\n                        }\n                    };\n\n                placeSomeAnchors(\"bottom\", sS, [sO.left, sO.top], _anchorLists.bottom, true, 1, [0, 1]);\n                placeSomeAnchors(\"top\", sS, [sO.left, sO.top], _anchorLists.top, true, 0, [0, -1]);\n                placeSomeAnchors(\"left\", sS, [sO.left, sO.top], _anchorLists.left, false, 0, [-1, 0]);\n                placeSomeAnchors(\"right\", sS, [sO.left, sO.top], _anchorLists.right, false, 1, [1, 0]);\n            };\n\n        this.reset = function () {\n            _amEndpoints = {};\n            connectionsByElementId = {};\n            anchorLists = {};\n        };\n        this.addFloatingConnection = function (key, conn) {\n            floatingConnections[key] = conn;\n        };\n        this.removeFloatingConnection = function (key) {\n            delete floatingConnections[key];\n        };\n        this.newConnection = function (conn) {\n            var sourceId = conn.sourceId, targetId = conn.targetId,\n                ep = conn.endpoints,\n                doRegisterTarget = true,\n                registerConnection = function (otherIndex, otherEndpoint, otherAnchor, elId, c) {\n                    if ((sourceId == targetId) && otherAnchor.isContinuous) {\n                        // remove the target endpoint's canvas.  we dont need it.\n                        conn._jsPlumb.instance.removeElement(ep[1].canvas);\n                        doRegisterTarget = false;\n                    }\n                    _ju.addToList(connectionsByElementId, elId, [c, otherEndpoint, otherAnchor.constructor == _jp.DynamicAnchor]);\n                };\n\n            registerConnection(0, ep[0], ep[0].anchor, targetId, conn);\n            if (doRegisterTarget)\n                registerConnection(1, ep[1], ep[1].anchor, sourceId, conn);\n        };\n        var removeEndpointFromAnchorLists = function (endpoint) {\n            (function (list, eId) {\n                if (list) {  // transient anchors dont get entries in this list.\n                    var f = function (e) {\n                        return e[4] == eId;\n                    };\n                    _ju.removeWithFunction(list.top, f);\n                    _ju.removeWithFunction(list.left, f);\n                    _ju.removeWithFunction(list.bottom, f);\n                    _ju.removeWithFunction(list.right, f);\n                }\n            })(anchorLists[endpoint.elementId], endpoint.id);\n        };\n        this.connectionDetached = function (connInfo, doNotRedraw) {\n            var connection = connInfo.connection || connInfo,\n                sourceId = connInfo.sourceId,\n                targetId = connInfo.targetId,\n                ep = connection.endpoints,\n                removeConnection = function (otherIndex, otherEndpoint, otherAnchor, elId, c) {\n                   _ju.removeWithFunction(connectionsByElementId[elId], function (_c) {\n                        return _c[0].id == c.id;\n                    });\n                };\n\n            removeConnection(1, ep[1], ep[1].anchor, sourceId, connection);\n            removeConnection(0, ep[0], ep[0].anchor, targetId, connection);\n            if (connection.floatingId) {\n                removeConnection(connection.floatingIndex, connection.floatingEndpoint, connection.floatingEndpoint.anchor, connection.floatingId, connection);\n                removeEndpointFromAnchorLists(connection.floatingEndpoint);\n            }\n\n            // remove from anchorLists            \n            removeEndpointFromAnchorLists(connection.endpoints[0]);\n            removeEndpointFromAnchorLists(connection.endpoints[1]);\n\n            if (!doNotRedraw) {\n                self.redraw(connection.sourceId);\n                if (connection.targetId !== connection.sourceId)\n                    self.redraw(connection.targetId);\n            }\n        };\n        this.add = function (endpoint, elementId) {\n            _ju.addToList(_amEndpoints, elementId, endpoint);\n        };\n        this.changeId = function (oldId, newId) {\n            connectionsByElementId[newId] = connectionsByElementId[oldId];\n            _amEndpoints[newId] = _amEndpoints[oldId];\n            delete connectionsByElementId[oldId];\n            delete _amEndpoints[oldId];\n        };\n        this.getConnectionsFor = function (elementId) {\n            return connectionsByElementId[elementId] || [];\n        };\n        this.getEndpointsFor = function (elementId) {\n            return _amEndpoints[elementId] || [];\n        };\n        this.deleteEndpoint = function (endpoint) {\n            _ju.removeWithFunction(_amEndpoints[endpoint.elementId], function (e) {\n                return e.id == endpoint.id;\n            });\n            removeEndpointFromAnchorLists(endpoint);\n        };\n        this.clearFor = function (elementId) {\n            delete _amEndpoints[elementId];\n            _amEndpoints[elementId] = [];\n        };\n        // updates the given anchor list by either updating an existing anchor's info, or adding it. this function\n        // also removes the anchor from its previous list, if the edge it is on has changed.\n        // all connections found along the way (those that are connected to one of the faces this function\n        // operates on) are added to the connsToPaint list, as are their endpoints. in this way we know to repaint\n        // them wthout having to calculate anything else about them.\n        var _updateAnchorList = function (lists, theta, order, conn, aBoolean, otherElId, idx, reverse, edgeId, elId, connsToPaint, endpointsToPaint) {\n            // first try to find the exact match, but keep track of the first index of a matching element id along the way.s\n            var exactIdx = -1,\n                firstMatchingElIdx = -1,\n                endpoint = conn.endpoints[idx],\n                endpointId = endpoint.id,\n                oIdx = [1, 0][idx],\n                values = [\n                    [ theta, order ],\n                    conn,\n                    aBoolean,\n                    otherElId,\n                    endpointId\n                ],\n                listToAddTo = lists[edgeId],\n                listToRemoveFrom = endpoint._continuousAnchorEdge ? lists[endpoint._continuousAnchorEdge] : null,\n                i,\n                candidate;\n\n            if (listToRemoveFrom) {\n                var rIdx = _ju.findWithFunction(listToRemoveFrom, function (e) {\n                    return e[4] == endpointId;\n                });\n                if (rIdx != -1) {\n                    listToRemoveFrom.splice(rIdx, 1);\n                    // get all connections from this list\n                    for (i = 0; i < listToRemoveFrom.length; i++) {\n                        candidate = listToRemoveFrom[i][1];\n                        _ju.addWithFunction(connsToPaint, candidate, function (c) {\n                            return c.id == candidate.id;\n                        });\n                        _ju.addWithFunction(endpointsToPaint, listToRemoveFrom[i][1].endpoints[idx], function (e) {\n                            return e.id == candidate.endpoints[idx].id;\n                        });\n                        _ju.addWithFunction(endpointsToPaint, listToRemoveFrom[i][1].endpoints[oIdx], function (e) {\n                            return e.id == candidate.endpoints[oIdx].id;\n                        });\n                    }\n                }\n            }\n\n            for (i = 0; i < listToAddTo.length; i++) {\n                candidate = listToAddTo[i][1];\n                if (params.idx == 1 && listToAddTo[i][3] === otherElId && firstMatchingElIdx == -1)\n                    firstMatchingElIdx = i;\n                _ju.addWithFunction(connsToPaint, candidate, function (c) {\n                    return c.id == candidate.id;\n                });\n                _ju.addWithFunction(endpointsToPaint, listToAddTo[i][1].endpoints[idx], function (e) {\n                    return e.id == candidate.endpoints[idx].id;\n                });\n                _ju.addWithFunction(endpointsToPaint, listToAddTo[i][1].endpoints[oIdx], function (e) {\n                    return e.id == candidate.endpoints[oIdx].id;\n                });\n            }\n            if (exactIdx != -1) {\n                listToAddTo[exactIdx] = values;\n            }\n            else {\n                var insertIdx = reverse ? firstMatchingElIdx != -1 ? firstMatchingElIdx : 0 : listToAddTo.length; // of course we will get this from having looked through the array shortly.\n                listToAddTo.splice(insertIdx, 0, values);\n            }\n\n            // store this for next time.\n            endpoint._continuousAnchorEdge = edgeId;\n        };\n\n        //\n        // find the entry in an endpoint's list for this connection and update its target endpoint\n        // with the current target in the connection.\n        // This method and sourceChanged need to be folder into one.\n        //\n        this.updateOtherEndpoint = function (sourceElId, oldTargetId, newTargetId, connection) {\n            var sIndex = _ju.findWithFunction(connectionsByElementId[sourceElId], function (i) {\n                    return i[0].id === connection.id;\n                }),\n                tIndex = _ju.findWithFunction(connectionsByElementId[oldTargetId], function (i) {\n                    return i[0].id === connection.id;\n                });\n\n            // update or add data for source\n            if (sIndex != -1) {\n                connectionsByElementId[sourceElId][sIndex][0] = connection;\n                connectionsByElementId[sourceElId][sIndex][1] = connection.endpoints[1];\n                connectionsByElementId[sourceElId][sIndex][2] = connection.endpoints[1].anchor.constructor == _jp.DynamicAnchor;\n            }\n\n            // remove entry for previous target (if there)\n            if (tIndex > -1) {\n                connectionsByElementId[oldTargetId].splice(tIndex, 1);\n                // add entry for new target\n                _ju.addToList(connectionsByElementId, newTargetId, [connection, connection.endpoints[0], connection.endpoints[0].anchor.constructor == _jp.DynamicAnchor]);\n            }\n\n            connection.updateConnectedClass();\n        };\n\n        //\n        // notification that the connection given has changed source from the originalId to the newId.\n        // This involves:\n        // 1. removing the connection from the list of connections stored for the originalId\n        // 2. updating the source information for the target of the connection\n        // 3. re-registering the connection in connectionsByElementId with the newId\n        //\n        this.sourceChanged = function (originalId, newId, connection, newElement) {\n            if (originalId !== newId) {\n\n                connection.sourceId = newId;\n                connection.source = newElement;\n\n                // remove the entry that points from the old source to the target\n                _ju.removeWithFunction(connectionsByElementId[originalId], function (info) {\n                    return info[0].id === connection.id;\n                });\n                // find entry for target and update it\n                var tIdx = _ju.findWithFunction(connectionsByElementId[connection.targetId], function (i) {\n                    return i[0].id === connection.id;\n                });\n                if (tIdx > -1) {\n                    connectionsByElementId[connection.targetId][tIdx][0] = connection;\n                    connectionsByElementId[connection.targetId][tIdx][1] = connection.endpoints[0];\n                    connectionsByElementId[connection.targetId][tIdx][2] = connection.endpoints[0].anchor.constructor == _jp.DynamicAnchor;\n                }\n                // add entry for new source\n                _ju.addToList(connectionsByElementId, newId, [connection, connection.endpoints[1], connection.endpoints[1].anchor.constructor == _jp.DynamicAnchor]);\n\n                // TODO SP not final on this yet. when a user drags an existing connection and it turns into a self\n                // loop, then this code hides the target endpoint (by removing it from the DOM) But I think this should\n                // occur only if the anchor is Continuous\n                if (connection.endpoints[1].anchor.isContinuous) {\n                    if (connection.source === connection.target) {\n                        connection._jsPlumb.instance.removeElement(connection.endpoints[1].canvas);\n                    }\n                    else {\n                        if (connection.endpoints[1].canvas.parentNode == null) {\n                            connection._jsPlumb.instance.appendElement(connection.endpoints[1].canvas);\n                        }\n                    }\n                }\n\n                connection.updateConnectedClass();\n            }\n        };\n\n        //\n        // moves the given endpoint from `currentId` to `element`.\n        // This involves:\n        //\n        // 1. changing the key in _amEndpoints under which the endpoint is stored\n        // 2. changing the source or target values in all of the endpoint's connections\n        // 3. changing the array in connectionsByElementId in which the endpoint's connections\n        //    are stored (done by either sourceChanged or updateOtherEndpoint)\n        //\n        this.rehomeEndpoint = function (ep, currentId, element) {\n            var eps = _amEndpoints[currentId] || [],\n                elementId = jsPlumbInstance.getId(element);\n\n            if (elementId !== currentId) {\n                var idx = eps.indexOf(ep);\n                if (idx > -1) {\n                    var _ep = eps.splice(idx, 1)[0];\n                    self.add(_ep, elementId);\n                }\n            }\n\n            for (var i = 0; i < ep.connections.length; i++) {\n                if (ep.connections[i].sourceId == currentId) {\n                    //ep.connections[i].sourceId = ep.elementId;\n                    //ep.connections[i].source = ep.element;\n                    self.sourceChanged(currentId, ep.elementId, ep.connections[i], ep.element);\n                }\n                else if (ep.connections[i].targetId == currentId) {\n                    ep.connections[i].targetId = ep.elementId;\n                    ep.connections[i].target = ep.element;\n                    self.updateOtherEndpoint(ep.connections[i].sourceId, currentId, ep.elementId, ep.connections[i]);\n                }\n            }\n        };\n\n        this.redraw = function (elementId, ui, timestamp, offsetToUI, clearEdits, doNotRecalcEndpoint) {\n\n            if (!jsPlumbInstance.isSuspendDrawing()) {\n                // get all the endpoints for this element\n                var ep = _amEndpoints[elementId] || [],\n                    endpointConnections = connectionsByElementId[elementId] || [],\n                    connectionsToPaint = [],\n                    endpointsToPaint = [],\n                    anchorsToUpdate = [];\n\n                timestamp = timestamp || jsPlumbInstance.timestamp();\n                // offsetToUI are values that would have been calculated in the dragManager when registering\n                // an endpoint for an element that had a parent (somewhere in the hierarchy) that had been\n                // registered as draggable.\n                offsetToUI = offsetToUI || {left: 0, top: 0};\n                if (ui) {\n                    ui = {\n                        left: ui.left + offsetToUI.left,\n                        top: ui.top + offsetToUI.top\n                    };\n                }\n\n                // valid for one paint cycle.\n                var myOffset = jsPlumbInstance.updateOffset({ elId: elementId, offset: ui, recalc: false, timestamp: timestamp }),\n                    orientationCache = {};\n\n                // actually, first we should compute the orientation of this element to all other elements to which\n                // this element is connected with a continuous anchor (whether both ends of the connection have\n                // a continuous anchor or just one)\n\n                for (var i = 0; i < endpointConnections.length; i++) {\n                    var conn = endpointConnections[i][0],\n                        sourceId = conn.sourceId,\n                        targetId = conn.targetId,\n                        sourceContinuous = conn.endpoints[0].anchor.isContinuous,\n                        targetContinuous = conn.endpoints[1].anchor.isContinuous;\n\n                    if (sourceContinuous || targetContinuous) {\n                        var oKey = sourceId + \"_\" + targetId,\n                            o = orientationCache[oKey],\n                            oIdx = conn.sourceId == elementId ? 1 : 0;\n\n                        if (sourceContinuous && !anchorLists[sourceId]) anchorLists[sourceId] = { top: [], right: [], bottom: [], left: [] };\n                        if (targetContinuous && !anchorLists[targetId]) anchorLists[targetId] = { top: [], right: [], bottom: [], left: [] };\n\n                        if (elementId != targetId) jsPlumbInstance.updateOffset({ elId: targetId, timestamp: timestamp });\n                        if (elementId != sourceId) jsPlumbInstance.updateOffset({ elId: sourceId, timestamp: timestamp });\n\n                        var td = jsPlumbInstance.getCachedData(targetId),\n                            sd = jsPlumbInstance.getCachedData(sourceId);\n\n                        if (targetId == sourceId && (sourceContinuous || targetContinuous)) {\n                            // here we may want to improve this by somehow determining the face we'd like\n                            // to put the connector on.  ideally, when drawing, the face should be calculated\n                            // by determining which face is closest to the point at which the mouse button\n                            // was released.  for now, we're putting it on the top face.\n                            _updateAnchorList( anchorLists[sourceId], -Math.PI / 2, 0, conn, false, targetId, 0, false, \"top\", sourceId, connectionsToPaint, endpointsToPaint);\n                            _updateAnchorList( anchorLists[targetId], -Math.PI / 2, 0, conn, false, sourceId, 1, false, \"top\", targetId, connectionsToPaint, endpointsToPaint);\n                        }\n                        else {\n                            if (!o) {\n                                o = calculateOrientation(sourceId, targetId, sd.o, td.o, conn.endpoints[0].anchor, conn.endpoints[1].anchor);\n                                orientationCache[oKey] = o;\n                                // this would be a performance enhancement, but the computed angles need to be clamped to\n                                //the (-PI/2 -> PI/2) range in order for the sorting to work properly.\n                                /*  orientationCache[oKey2] = {\n                                 orientation:o.orientation,\n                                 a:[o.a[1], o.a[0]],\n                                 theta:o.theta + Math.PI,\n                                 theta2:o.theta2 + Math.PI\n                                 };*/\n                            }\n                            if (sourceContinuous) _updateAnchorList(anchorLists[sourceId], o.theta, 0, conn, false, targetId, 0, false, o.a[0], sourceId, connectionsToPaint, endpointsToPaint);\n                            if (targetContinuous) _updateAnchorList(anchorLists[targetId], o.theta2, -1, conn, true, sourceId, 1, true, o.a[1], targetId, connectionsToPaint, endpointsToPaint);\n                        }\n\n                        if (sourceContinuous) _ju.addWithFunction(anchorsToUpdate, sourceId, function (a) {\n                            return a === sourceId;\n                        });\n                        if (targetContinuous) _ju.addWithFunction(anchorsToUpdate, targetId, function (a) {\n                            return a === targetId;\n                        });\n                        _ju.addWithFunction(connectionsToPaint, conn, function (c) {\n                            return c.id == conn.id;\n                        });\n                        if ((sourceContinuous && oIdx === 0) || (targetContinuous && oIdx === 1))\n                            _ju.addWithFunction(endpointsToPaint, conn.endpoints[oIdx], function (e) {\n                                return e.id == conn.endpoints[oIdx].id;\n                            });\n                    }\n                }\n\n                // place Endpoints whose anchors are continuous but have no Connections\n                for (i = 0; i < ep.length; i++) {\n                    if (ep[i].connections.length === 0 && ep[i].anchor.isContinuous) {\n                        if (!anchorLists[elementId]) anchorLists[elementId] = { top: [], right: [], bottom: [], left: [] };\n                        _updateAnchorList(anchorLists[elementId], -Math.PI / 2, 0, {endpoints: [ep[i], ep[i]], paint: function () {\n                        }}, false, elementId, 0, false, ep[i].anchor.getDefaultFace(), elementId, connectionsToPaint, endpointsToPaint);\n                        _ju.addWithFunction(anchorsToUpdate, elementId, function (a) {\n                            return a === elementId;\n                        });\n                    }\n                }\n\n\n                // now place all the continuous anchors we need to;\n                for (i = 0; i < anchorsToUpdate.length; i++) {\n                    placeAnchors(anchorsToUpdate[i], anchorLists[anchorsToUpdate[i]]);\n                }\n\n                // now that continuous anchors have been placed, paint all the endpoints for this element\n                // TODO performance: add the endpoint ids to a temp array, and then when iterating in the next\n                // loop, check that we didn't just paint that endpoint. we can probably shave off a few more milliseconds this way.\n                for (i = 0; i < ep.length; i++) {\n                    ep[i].paint({ timestamp: timestamp, offset: myOffset, dimensions: myOffset.s, recalc: doNotRecalcEndpoint !== true });\n                }\n\n                // ... and any other endpoints we came across as a result of the continuous anchors.\n                for (i = 0; i < endpointsToPaint.length; i++) {\n                    var cd = jsPlumbInstance.getCachedData(endpointsToPaint[i].elementId);\n                    endpointsToPaint[i].paint({ timestamp: timestamp, offset: cd, dimensions: cd.s });\n                }\n\n                // paint all the standard and \"dynamic connections\", which are connections whose other anchor is\n                // static and therefore does need to be recomputed; we make sure that happens only one time.\n\n                // TODO we could have compiled a list of these in the first pass through connections; might save some time.\n                for (i = 0; i < endpointConnections.length; i++) {\n                    var otherEndpoint = endpointConnections[i][1];\n                    if (otherEndpoint.anchor.constructor == _jp.DynamicAnchor) {\n                        otherEndpoint.paint({ elementWithPrecedence: elementId, timestamp: timestamp });\n                        _ju.addWithFunction(connectionsToPaint, endpointConnections[i][0], function (c) {\n                            return c.id == endpointConnections[i][0].id;\n                        });\n                        // all the connections for the other endpoint now need to be repainted\n                        for (var k = 0; k < otherEndpoint.connections.length; k++) {\n                            if (otherEndpoint.connections[k] !== endpointConnections[i][0])\n                                _ju.addWithFunction(connectionsToPaint, otherEndpoint.connections[k], function (c) {\n                                    return c.id == otherEndpoint.connections[k].id;\n                                });\n                        }\n                    } else if (otherEndpoint.anchor.constructor == _jp.Anchor) {\n                        _ju.addWithFunction(connectionsToPaint, endpointConnections[i][0], function (c) {\n                            return c.id == endpointConnections[i][0].id;\n                        });\n                    }\n                }\n\n                // paint current floating connection for this element, if there is one.\n                var fc = floatingConnections[elementId];\n                if (fc)\n                    fc.paint({timestamp: timestamp, recalc: false, elId: elementId});\n\n                // paint all the connections\n                for (i = 0; i < connectionsToPaint.length; i++) {\n                    connectionsToPaint[i].paint({elId: elementId, timestamp: timestamp, recalc: false, clearEdits: clearEdits});\n                }\n            }\n        };\n\n        var ContinuousAnchor = function (anchorParams) {\n            _ju.EventGenerator.apply(this);\n            this.type = \"Continuous\";\n            this.isDynamic = true;\n            this.isContinuous = true;\n            var faces = anchorParams.faces || [\"top\", \"right\", \"bottom\", \"left\"],\n                clockwise = !(anchorParams.clockwise === false),\n                availableFaces = { },\n                opposites = { \"top\": \"bottom\", \"right\": \"left\", \"left\": \"right\", \"bottom\": \"top\" },\n                clockwiseOptions = { \"top\": \"right\", \"right\": \"bottom\", \"left\": \"top\", \"bottom\": \"left\" },\n                antiClockwiseOptions = { \"top\": \"left\", \"right\": \"top\", \"left\": \"bottom\", \"bottom\": \"right\" },\n                secondBest = clockwise ? clockwiseOptions : antiClockwiseOptions,\n                lastChoice = clockwise ? antiClockwiseOptions : clockwiseOptions,\n                cssClass = anchorParams.cssClass || \"\";\n\n            for (var i = 0; i < faces.length; i++) {\n                availableFaces[faces[i]] = true;\n            }\n\n            this.getDefaultFace = function () {\n                return faces.length === 0 ? \"top\" : faces[0];\n            };\n\n            // if the given edge is supported, returns it. otherwise looks for a substitute that _is_\n            // supported. if none supported we also return the request edge.\n            this.verifyEdge = function (edge) {\n                if (availableFaces[edge]) return edge;\n                else if (availableFaces[opposites[edge]]) return opposites[edge];\n                else if (availableFaces[secondBest[edge]]) return secondBest[edge];\n                else if (availableFaces[lastChoice[edge]]) return lastChoice[edge];\n                return edge; // we have to give them something.\n            };\n\n            this.isEdgeSupported = function (edge) {\n                return availableFaces[edge] === true;\n            };\n\n            this.compute = function (params) {\n                return userDefinedContinuousAnchorLocations[params.element.id] || continuousAnchorLocations[params.element.id] || [0, 0];\n            };\n            this.getCurrentLocation = function (params) {\n                return userDefinedContinuousAnchorLocations[params.element.id] || continuousAnchorLocations[params.element.id] || [0, 0];\n            };\n            this.getOrientation = function (endpoint) {\n                return continuousAnchorOrientations[endpoint.id] || [0, 0];\n            };\n            this.clearUserDefinedLocation = function () {\n                delete userDefinedContinuousAnchorLocations[anchorParams.elementId];\n            };\n            this.setUserDefinedLocation = function (loc) {\n                userDefinedContinuousAnchorLocations[anchorParams.elementId] = loc;\n            };\n            this.getCssClass = function () {\n                return cssClass;\n            };\n        };\n\n        // continuous anchors\n        jsPlumbInstance.continuousAnchorFactory = {\n            get: function (params) {\n                return new ContinuousAnchor(params);\n            },\n            clear: function (elementId) {\n                delete userDefinedContinuousAnchorLocations[elementId];\n                delete continuousAnchorLocations[elementId];\n            }\n        };\n    };\n\n    /**\n     * Anchors model a position on some element at which an Endpoint may be located.  They began as a first class citizen of jsPlumb, ie. a user\n     * was required to create these themselves, but over time this has been replaced by the concept of referring to them either by name (eg. \"TopMiddle\"),\n     * or by an array describing their coordinates (eg. [ 0, 0.5, 0, -1 ], which is the same as \"TopMiddle\").  jsPlumb now handles all of the\n     * creation of Anchors without user intervention.\n     */\n    _jp.Anchor = function (params) {\n        this.x = params.x || 0;\n        this.y = params.y || 0;\n        this.elementId = params.elementId;\n        this.cssClass = params.cssClass || \"\";\n        this.userDefinedLocation = null;\n        this.orientation = params.orientation || [ 0, 0 ];\n        this.lastReturnValue = null;\n        this.offsets = params.offsets || [ 0, 0 ];\n        this.timestamp = null;\n\n        _ju.EventGenerator.apply(this);\n\n        this.compute = function (params) {\n\n            var xy = params.xy, wh = params.wh, timestamp = params.timestamp;\n\n            if (params.clearUserDefinedLocation)\n                this.userDefinedLocation = null;\n\n            if (timestamp && timestamp === self.timestamp)\n                return this.lastReturnValue;\n\n            if (this.userDefinedLocation != null) {\n                this.lastReturnValue = this.userDefinedLocation;\n            }\n            else {\n                this.lastReturnValue = [ xy[0] + (this.x * wh[0]) + this.offsets[0], xy[1] + (this.y * wh[1]) + this.offsets[1] ];\n            }\n\n            this.timestamp = timestamp;\n            return this.lastReturnValue;\n        };\n\n        this.getCurrentLocation = function (params) {\n            params = params || {};\n            return (this.lastReturnValue == null || (params.timestamp != null && this.timestamp != params.timestamp)) ? this.compute(params) : this.lastReturnValue;\n        };\n    };\n    _ju.extend(_jp.Anchor, _ju.EventGenerator, {\n        equals: function (anchor) {\n            if (!anchor) return false;\n            var ao = anchor.getOrientation(),\n                o = this.getOrientation();\n            return this.x == anchor.x && this.y == anchor.y && this.offsets[0] == anchor.offsets[0] && this.offsets[1] == anchor.offsets[1] && o[0] == ao[0] && o[1] == ao[1];\n        },\n        getUserDefinedLocation: function () {\n            return this.userDefinedLocation;\n        },\n        setUserDefinedLocation: function (l) {\n            this.userDefinedLocation = l;\n        },\n        clearUserDefinedLocation: function () {\n            this.userDefinedLocation = null;\n        },\n        getOrientation: function () {\n            return this.orientation;\n        },\n        getCssClass: function () {\n            return this.cssClass;\n        }\n    });\n\n    /**\n     * An Anchor that floats. its orientation is computed dynamically from\n     * its position relative to the anchor it is floating relative to.  It is used when creating\n     * a connection through drag and drop.\n     *\n     * TODO FloatingAnchor could totally be refactored to extend Anchor just slightly.\n     */\n    _jp.FloatingAnchor = function (params) {\n\n        _jp.Anchor.apply(this, arguments);\n\n        // this is the anchor that this floating anchor is referenced to for\n        // purposes of calculating the orientation.\n        var ref = params.reference,\n            // the canvas this refers to.\n            refCanvas = params.referenceCanvas,\n            size = _jp.getSize(refCanvas),\n            // these are used to store the current relative position of our\n            // anchor wrt the reference anchor. they only indicate\n            // direction, so have a value of 1 or -1 (or, very rarely, 0). these\n            // values are written by the compute method, and read\n            // by the getOrientation method.\n            xDir = 0, yDir = 0,\n            // temporary member used to store an orientation when the floating\n            // anchor is hovering over another anchor.\n            orientation = null,\n            _lastResult = null;\n\n        // clear from parent. we want floating anchor orientation to always be computed.\n        this.orientation = null;\n\n        // set these to 0 each; they are used by certain types of connectors in the loopback case,\n        // when the connector is trying to clear the element it is on. but for floating anchor it's not\n        // very important.\n        this.x = 0;\n        this.y = 0;\n\n        this.isFloating = true;\n\n        this.compute = function (params) {\n            var xy = params.xy,\n                result = [ xy[0] + (size[0] / 2), xy[1] + (size[1] / 2) ]; // return origin of the element. we may wish to improve this so that any object can be the drag proxy.\n            _lastResult = result;\n            return result;\n        };\n\n        this.getOrientation = function (_endpoint) {\n            if (orientation) return orientation;\n            else {\n                var o = ref.getOrientation(_endpoint);\n                // here we take into account the orientation of the other\n                // anchor: if it declares zero for some direction, we declare zero too. this might not be the most awesome. perhaps we can come\n                // up with a better way. it's just so that the line we draw looks like it makes sense. maybe this wont make sense.\n                return [ Math.abs(o[0]) * xDir * -1,\n                        Math.abs(o[1]) * yDir * -1 ];\n            }\n        };\n\n        /**\n         * notification the endpoint associated with this anchor is hovering\n         * over another anchor; we want to assume that anchor's orientation\n         * for the duration of the hover.\n         */\n        this.over = function (anchor, endpoint) {\n            orientation = anchor.getOrientation(endpoint);\n        };\n\n        /**\n         * notification the endpoint associated with this anchor is no\n         * longer hovering over another anchor; we should resume calculating\n         * orientation as we normally do.\n         */\n        this.out = function () {\n            orientation = null;\n        };\n\n        this.getCurrentLocation = function (params) {\n            return _lastResult == null ? this.compute(params) : _lastResult;\n        };\n    };\n    _ju.extend(_jp.FloatingAnchor, _jp.Anchor);\n\n    var _convertAnchor = function (anchor, jsPlumbInstance, elementId) {\n        return anchor.constructor == _jp.Anchor ? anchor : jsPlumbInstance.makeAnchor(anchor, elementId, jsPlumbInstance);\n    };\n\n    /* \n     * A DynamicAnchor is an Anchor that contains a list of other Anchors, which it cycles\n     * through at compute time to find the one that is located closest to\n     * the center of the target element, and returns that Anchor's compute\n     * method result. this causes endpoints to follow each other with\n     * respect to the orientation of their target elements, which is a useful\n     * feature for some applications.\n     * \n     */\n    _jp.DynamicAnchor = function (params) {\n        _jp.Anchor.apply(this, arguments);\n\n        this.isDynamic = true;\n        this.anchors = [];\n        this.elementId = params.elementId;\n        this.jsPlumbInstance = params.jsPlumbInstance;\n\n        for (var i = 0; i < params.anchors.length; i++)\n            this.anchors[i] = _convertAnchor(params.anchors[i], this.jsPlumbInstance, this.elementId);\n\n        this.getAnchors = function () {\n            return this.anchors;\n        };\n        this.locked = false;\n        var _curAnchor = this.anchors.length > 0 ? this.anchors[0] : null,\n            _lastAnchor = _curAnchor,\n            self = this,\n\n        // helper method to calculate the distance between the centers of the two elements.\n            _distance = function (anchor, cx, cy, xy, wh) {\n                var ax = xy[0] + (anchor.x * wh[0]), ay = xy[1] + (anchor.y * wh[1]),\n                    acx = xy[0] + (wh[0] / 2), acy = xy[1] + (wh[1] / 2);\n                return (Math.sqrt(Math.pow(cx - ax, 2) + Math.pow(cy - ay, 2)) +\n                    Math.sqrt(Math.pow(acx - ax, 2) + Math.pow(acy - ay, 2)));\n            },\n        // default method uses distance between element centers.  you can provide your own method in the dynamic anchor\n        // constructor (and also to jsPlumb.makeDynamicAnchor). the arguments to it are four arrays:\n        // xy - xy loc of the anchor's element\n        // wh - anchor's element's dimensions\n        // txy - xy loc of the element of the other anchor in the connection\n        // twh - dimensions of the element of the other anchor in the connection.\n        // anchors - the list of selectable anchors\n            _anchorSelector = params.selector || function (xy, wh, txy, twh, anchors) {\n                var cx = txy[0] + (twh[0] / 2), cy = txy[1] + (twh[1] / 2);\n                var minIdx = -1, minDist = Infinity;\n                for (var i = 0; i < anchors.length; i++) {\n                    var d = _distance(anchors[i], cx, cy, xy, wh);\n                    if (d < minDist) {\n                        minIdx = i + 0;\n                        minDist = d;\n                    }\n                }\n                return anchors[minIdx];\n            };\n\n        this.compute = function (params) {\n            var xy = params.xy, wh = params.wh, txy = params.txy, twh = params.twh;\n\n            this.timestamp = params.timestamp;\n\n            var udl = self.getUserDefinedLocation();\n            if (udl != null) {\n                return udl;\n            }\n\n            // if anchor is locked or an opposite element was not given, we\n            // maintain our state. anchor will be locked\n            // if it is the source of a drag and drop.\n            if (this.locked || txy == null || twh == null)\n                return _curAnchor.compute(params);\n            else\n                params.timestamp = null; // otherwise clear this, i think. we want the anchor to compute.\n\n            _curAnchor = _anchorSelector(xy, wh, txy, twh, this.anchors);\n            this.x = _curAnchor.x;\n            this.y = _curAnchor.y;\n\n            if (_curAnchor != _lastAnchor)\n                this.fire(\"anchorChanged\", _curAnchor);\n\n            _lastAnchor = _curAnchor;\n\n            return _curAnchor.compute(params);\n        };\n\n        this.getCurrentLocation = function (params) {\n            return this.getUserDefinedLocation() || (_curAnchor != null ? _curAnchor.getCurrentLocation(params) : null);\n        };\n\n        this.getOrientation = function (_endpoint) {\n            return _curAnchor != null ? _curAnchor.getOrientation(_endpoint) : [ 0, 0 ];\n        };\n        this.over = function (anchor, endpoint) {\n            if (_curAnchor != null) _curAnchor.over(anchor, endpoint);\n        };\n        this.out = function () {\n            if (_curAnchor != null) _curAnchor.out();\n        };\n\n        this.getCssClass = function () {\n            return (_curAnchor && _curAnchor.getCssClass()) || \"\";\n        };\n    };\n    _ju.extend(_jp.DynamicAnchor, _jp.Anchor);\n\n// -------- basic anchors ------------------    \n    var _curryAnchor = function (x, y, ox, oy, type, fnInit) {\n        _jp.Anchors[type] = function (params) {\n            var a = params.jsPlumbInstance.makeAnchor([ x, y, ox, oy, 0, 0 ], params.elementId, params.jsPlumbInstance);\n            a.type = type;\n            if (fnInit) fnInit(a, params);\n            return a;\n        };\n    };\n\n    _curryAnchor(0.5, 0, 0, -1, \"TopCenter\");\n    _curryAnchor(0.5, 1, 0, 1, \"BottomCenter\");\n    _curryAnchor(0, 0.5, -1, 0, \"LeftMiddle\");\n    _curryAnchor(1, 0.5, 1, 0, \"RightMiddle\");\n\n    _curryAnchor(0.5, 0, 0, -1, \"Top\");\n    _curryAnchor(0.5, 1, 0, 1, \"Bottom\");\n    _curryAnchor(0, 0.5, -1, 0, \"Left\");\n    _curryAnchor(1, 0.5, 1, 0, \"Right\");\n    _curryAnchor(0.5, 0.5, 0, 0, \"Center\");\n    _curryAnchor(1, 0, 0, -1, \"TopRight\");\n    _curryAnchor(1, 1, 0, 1, \"BottomRight\");\n    _curryAnchor(0, 0, 0, -1, \"TopLeft\");\n    _curryAnchor(0, 1, 0, 1, \"BottomLeft\");\n\n// ------- dynamic anchors -------------------    \n\n    // default dynamic anchors chooses from Top, Right, Bottom, Left\n    _jp.Defaults.DynamicAnchors = function (params) {\n        return params.jsPlumbInstance.makeAnchors([\"TopCenter\", \"RightMiddle\", \"BottomCenter\", \"LeftMiddle\"], params.elementId, params.jsPlumbInstance);\n    };\n\n    // default dynamic anchors bound to name 'AutoDefault'\n    _jp.Anchors.AutoDefault = function (params) {\n        var a = params.jsPlumbInstance.makeDynamicAnchor(_jp.Defaults.DynamicAnchors(params));\n        a.type = \"AutoDefault\";\n        return a;\n    };\n\n// ------- continuous anchors -------------------    \n\n    var _curryContinuousAnchor = function (type, faces) {\n        _jp.Anchors[type] = function (params) {\n            var a = params.jsPlumbInstance.makeAnchor([\"Continuous\", { faces: faces }], params.elementId, params.jsPlumbInstance);\n            a.type = type;\n            return a;\n        };\n    };\n\n    _jp.Anchors.Continuous = function (params) {\n        return params.jsPlumbInstance.continuousAnchorFactory.get(params);\n    };\n\n    _curryContinuousAnchor(\"ContinuousLeft\", [\"left\"]);\n    _curryContinuousAnchor(\"ContinuousTop\", [\"top\"]);\n    _curryContinuousAnchor(\"ContinuousBottom\", [\"bottom\"]);\n    _curryContinuousAnchor(\"ContinuousRight\", [\"right\"]);\n\n// ------- position assign anchors -------------------    \n\n    // this anchor type lets you assign the position at connection time.\n    _curryAnchor(0, 0, 0, 0, \"Assign\", function (anchor, params) {\n        // find what to use as the \"position finder\". the user may have supplied a String which represents\n        // the id of a position finder in jsPlumb.AnchorPositionFinders, or the user may have supplied the\n        // position finder as a function.  we find out what to use and then set it on the anchor.\n        var pf = params.position || \"Fixed\";\n        anchor.positionFinder = pf.constructor == String ? params.jsPlumbInstance.AnchorPositionFinders[pf] : pf;\n        // always set the constructor params; the position finder might need them later (the Grid one does,\n        // for example)\n        anchor.constructorParams = params;\n    });\n\n    // these are the default anchor positions finders, which are used by the makeTarget function.  supplying\n    // a position finder argument to that function allows you to specify where the resulting anchor will\n    // be located\n    root.jsPlumbInstance.prototype.AnchorPositionFinders = {\n        \"Fixed\": function (dp, ep, es) {\n            return [ (dp.left - ep.left) / es[0], (dp.top - ep.top) / es[1] ];\n        },\n        \"Grid\": function (dp, ep, es, params) {\n            var dx = dp.left - ep.left, dy = dp.top - ep.top,\n                gx = es[0] / (params.grid[0]), gy = es[1] / (params.grid[1]),\n                mx = Math.floor(dx / gx), my = Math.floor(dy / gy);\n            return [ ((mx * gx) + (gx / 2)) / es[0], ((my * gy) + (gy / 2)) / es[1] ];\n        }\n    };\n\n// ------- perimeter anchors -------------------    \n\n    _jp.Anchors.Perimeter = function (params) {\n        params = params || {};\n        var anchorCount = params.anchorCount || 60,\n            shape = params.shape;\n\n        if (!shape) throw new Error(\"no shape supplied to Perimeter Anchor type\");\n\n        var _circle = function () {\n                var r = 0.5, step = Math.PI * 2 / anchorCount, current = 0, a = [];\n                for (var i = 0; i < anchorCount; i++) {\n                    var x = r + (r * Math.sin(current)),\n                        y = r + (r * Math.cos(current));\n                    a.push([ x, y, 0, 0 ]);\n                    current += step;\n                }\n                return a;\n            },\n            _path = function (segments) {\n                var anchorsPerFace = anchorCount / segments.length, a = [],\n                    _computeFace = function (x1, y1, x2, y2, fractionalLength) {\n                        anchorsPerFace = anchorCount * fractionalLength;\n                        var dx = (x2 - x1) / anchorsPerFace, dy = (y2 - y1) / anchorsPerFace;\n                        for (var i = 0; i < anchorsPerFace; i++) {\n                            a.push([\n                                    x1 + (dx * i),\n                                    y1 + (dy * i),\n                                0,\n                                0\n                            ]);\n                        }\n                    };\n\n                for (var i = 0; i < segments.length; i++)\n                    _computeFace.apply(null, segments[i]);\n\n                return a;\n            },\n            _shape = function (faces) {\n                var s = [];\n                for (var i = 0; i < faces.length; i++) {\n                    s.push([faces[i][0], faces[i][1], faces[i][2], faces[i][3], 1 / faces.length]);\n                }\n                return _path(s);\n            },\n            _rectangle = function () {\n                return _shape([\n                    [ 0, 0, 1, 0 ],\n                    [ 1, 0, 1, 1 ],\n                    [ 1, 1, 0, 1 ],\n                    [ 0, 1, 0, 0 ]\n                ]);\n            };\n\n        var _shapes = {\n                \"Circle\": _circle,\n                \"Ellipse\": _circle,\n                \"Diamond\": function () {\n                    return _shape([\n                        [ 0.5, 0, 1, 0.5 ],\n                        [ 1, 0.5, 0.5, 1 ],\n                        [ 0.5, 1, 0, 0.5 ],\n                        [ 0, 0.5, 0.5, 0 ]\n                    ]);\n                },\n                \"Rectangle\": _rectangle,\n                \"Square\": _rectangle,\n                \"Triangle\": function () {\n                    return _shape([\n                        [ 0.5, 0, 1, 1 ],\n                        [ 1, 1, 0, 1 ],\n                        [ 0, 1, 0.5, 0]\n                    ]);\n                },\n                \"Path\": function (params) {\n                    var points = params.points, p = [], tl = 0;\n                    for (var i = 0; i < points.length - 1; i++) {\n                        var l = Math.sqrt(Math.pow(points[i][2] - points[i][0]) + Math.pow(points[i][3] - points[i][1]));\n                        tl += l;\n                        p.push([points[i][0], points[i][1], points[i + 1][0], points[i + 1][1], l]);\n                    }\n                    for (var j = 0; j < p.length; j++) {\n                        p[j][4] = p[j][4] / tl;\n                    }\n                    return _path(p);\n                }\n            },\n            _rotate = function (points, amountInDegrees) {\n                var o = [], theta = amountInDegrees / 180 * Math.PI;\n                for (var i = 0; i < points.length; i++) {\n                    var _x = points[i][0] - 0.5,\n                        _y = points[i][1] - 0.5;\n\n                    o.push([\n                            0.5 + ((_x * Math.cos(theta)) - (_y * Math.sin(theta))),\n                            0.5 + ((_x * Math.sin(theta)) + (_y * Math.cos(theta))),\n                        points[i][2],\n                        points[i][3]\n                    ]);\n                }\n                return o;\n            };\n\n        if (!_shapes[shape]) throw new Error(\"Shape [\" + shape + \"] is unknown by Perimeter Anchor type\");\n\n        var da = _shapes[shape](params);\n        if (params.rotation) da = _rotate(da, params.rotation);\n        var a = params.jsPlumbInstance.makeDynamicAnchor(da);\n        a.type = \"Perimeter\";\n        return a;\n    };\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.1.1\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the default Connectors, Endpoint and Overlay definitions.\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil, _jg = root.Biltong;\n\n    _jp.Segments = {\n\n        /*\n         * Class: AbstractSegment\n         * A Connector is made up of 1..N Segments, each of which has a Type, such as 'Straight', 'Arc',\n         * 'Bezier'. This is new from 1.4.2, and gives us a lot more flexibility when drawing connections: things such\n         * as rounded corners for flowchart connectors, for example, or a straight line stub for Bezier connections, are\n         * much easier to do now.\n         *\n         * A Segment is responsible for providing coordinates for painting it, and also must be able to report its length.\n         * \n         */\n        AbstractSegment: function (params) {\n            this.params = params;\n\n            /**\n             * Function: findClosestPointOnPath\n             * Finds the closest point on this segment to the given [x, y],\n             * returning both the x and y of the point plus its distance from\n             * the supplied point, and its location along the length of the\n             * path inscribed by the segment.  This implementation returns\n             * Infinity for distance and null values for everything else;\n             * subclasses are expected to override.\n             */\n            this.findClosestPointOnPath = function (x, y) {\n                return {\n                    d: Infinity,\n                    x: null,\n                    y: null,\n                    l: null\n                };\n            };\n\n            this.getBounds = function () {\n                return {\n                    minX: Math.min(params.x1, params.x2),\n                    minY: Math.min(params.y1, params.y2),\n                    maxX: Math.max(params.x1, params.x2),\n                    maxY: Math.max(params.y1, params.y2)\n                };\n            };\n        },\n        Straight: function (params) {\n            var _super = _jp.Segments.AbstractSegment.apply(this, arguments),\n                length, m, m2, x1, x2, y1, y2,\n                _recalc = function () {\n                    length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n                    m = _jg.gradient({x: x1, y: y1}, {x: x2, y: y2});\n                    m2 = -1 / m;\n                };\n\n            this.type = \"Straight\";\n\n            this.getLength = function () {\n                return length;\n            };\n            this.getGradient = function () {\n                return m;\n            };\n\n            this.getCoordinates = function () {\n                return { x1: x1, y1: y1, x2: x2, y2: y2 };\n            };\n            this.setCoordinates = function (coords) {\n                x1 = coords.x1;\n                y1 = coords.y1;\n                x2 = coords.x2;\n                y2 = coords.y2;\n                _recalc();\n            };\n            this.setCoordinates({x1: params.x1, y1: params.y1, x2: params.x2, y2: params.y2});\n\n            this.getBounds = function () {\n                return {\n                    minX: Math.min(x1, x2),\n                    minY: Math.min(y1, y2),\n                    maxX: Math.max(x1, x2),\n                    maxY: Math.max(y1, y2)\n                };\n            };\n\n            /**\n             * returns the point on the segment's path that is 'location' along the length of the path, where 'location' is a decimal from\n             * 0 to 1 inclusive. for the straight line segment this is simple maths.\n             */\n            this.pointOnPath = function (location, absolute) {\n                if (location === 0 && !absolute)\n                    return { x: x1, y: y1 };\n                else if (location == 1 && !absolute)\n                    return { x: x2, y: y2 };\n                else {\n                    var l = absolute ? location > 0 ? location : length + location : location * length;\n                    return _jg.pointOnLine({x: x1, y: y1}, {x: x2, y: y2}, l);\n                }\n            };\n\n            /**\n             * returns the gradient of the segment at the given point - which for us is constant.\n             */\n            this.gradientAtPoint = function (_) {\n                return m;\n            };\n\n            /**\n             * returns the point on the segment's path that is 'distance' along the length of the path from 'location', where\n             * 'location' is a decimal from 0 to 1 inclusive, and 'distance' is a number of pixels.\n             * this hands off to jsPlumbUtil to do the maths, supplying two points and the distance.\n             */\n            this.pointAlongPathFrom = function (location, distance, absolute) {\n                var p = this.pointOnPath(location, absolute),\n                    farAwayPoint = distance <= 0 ? {x: x1, y: y1} : {x: x2, y: y2 };\n\n                /*\n                 location == 1 ? {\n                 x:x1 + ((x2 - x1) * 10),\n                 y:y1 + ((y1 - y2) * 10)\n                 } :\n                 */\n\n                if (distance <= 0 && Math.abs(distance) > 1) distance *= -1;\n\n                return _jg.pointOnLine(p, farAwayPoint, distance);\n            };\n\n            // is c between a and b?\n            var within = function (a, b, c) {\n                return c >= Math.min(a, b) && c <= Math.max(a, b);\n            };\n            // find which of a and b is closest to c\n            var closest = function (a, b, c) {\n                return Math.abs(c - a) < Math.abs(c - b) ? a : b;\n            };\n\n            /**\n             Function: findClosestPointOnPath\n             Finds the closest point on this segment to [x,y]. See\n             notes on this method in AbstractSegment.\n             */\n            this.findClosestPointOnPath = function (x, y) {\n                var out = {\n                    d: Infinity,\n                    x: null,\n                    y: null,\n                    l: null,\n                    x1: x1,\n                    x2: x2,\n                    y1: y1,\n                    y2: y2\n                };\n\n                if (m === 0) {\n                    out.y = y1;\n                    out.x = within(x1, x2, x) ? x : closest(x1, x2, x);\n                }\n                else if (m == Infinity || m == -Infinity) {\n                    out.x = x1;\n                    out.y = within(y1, y2, y) ? y : closest(y1, y2, y);\n                }\n                else {\n                    // closest point lies on normal from given point to this line.  \n                    var b = y1 - (m * x1),\n                        b2 = y - (m2 * x),\n                    // y1 = m.x1 + b and y1 = m2.x1 + b2\n                    // so m.x1 + b = m2.x1 + b2\n                    // x1(m - m2) = b2 - b\n                    // x1 = (b2 - b) / (m - m2)\n                        _x1 = (b2 - b) / (m - m2),\n                        _y1 = (m * _x1) + b;\n\n                    out.x = within(x1, x2, _x1) ? _x1 : closest(x1, x2, _x1);//_x1;\n                    out.y = within(y1, y2, _y1) ? _y1 : closest(y1, y2, _y1);//_y1;\n                }\n\n                var fractionInSegment = _jg.lineLength([ out.x, out.y ], [ x1, y1 ]);\n                out.d = _jg.lineLength([x, y], [out.x, out.y]);\n                out.l = fractionInSegment / length;\n                return out;\n            };\n        },\n\n        /*\n         Arc Segment. You need to supply:\n\n         r   -   radius\n         cx  -   center x for the arc\n         cy  -   center y for the arc\n         ac  -   whether the arc is anticlockwise or not. default is clockwise.\n\n         and then either:\n\n         startAngle  -   startAngle for the arc.\n         endAngle    -   endAngle for the arc.\n\n         or:\n\n         x1          -   x for start point\n         y1          -   y for start point\n         x2          -   x for end point\n         y2          -   y for end point\n\n         */\n        Arc: function (params) {\n            var _super = _jp.Segments.AbstractSegment.apply(this, arguments),\n                _calcAngle = function (_x, _y) {\n                    return _jg.theta([params.cx, params.cy], [_x, _y]);\n                },\n                _calcAngleForLocation = function (segment, location) {\n                    if (segment.anticlockwise) {\n                        var sa = segment.startAngle < segment.endAngle ? segment.startAngle + TWO_PI : segment.startAngle,\n                            s = Math.abs(sa - segment.endAngle);\n                        return sa - (s * location);\n                    }\n                    else {\n                        var ea = segment.endAngle < segment.startAngle ? segment.endAngle + TWO_PI : segment.endAngle,\n                            ss = Math.abs(ea - segment.startAngle);\n\n                        return segment.startAngle + (ss * location);\n                    }\n                },\n                TWO_PI = 2 * Math.PI;\n\n            this.radius = params.r;\n            this.anticlockwise = params.ac;\n            this.type = \"Arc\";\n\n            if (params.startAngle && params.endAngle) {\n                this.startAngle = params.startAngle;\n                this.endAngle = params.endAngle;\n                this.x1 = params.cx + (this.radius * Math.cos(params.startAngle));\n                this.y1 = params.cy + (this.radius * Math.sin(params.startAngle));\n                this.x2 = params.cx + (this.radius * Math.cos(params.endAngle));\n                this.y2 = params.cy + (this.radius * Math.sin(params.endAngle));\n            }\n            else {\n                this.startAngle = _calcAngle(params.x1, params.y1);\n                this.endAngle = _calcAngle(params.x2, params.y2);\n                this.x1 = params.x1;\n                this.y1 = params.y1;\n                this.x2 = params.x2;\n                this.y2 = params.y2;\n            }\n\n            if (this.endAngle < 0) this.endAngle += TWO_PI;\n            if (this.startAngle < 0) this.startAngle += TWO_PI;\n\n            // segment is used by vml     \n            //this.segment = _jg.quadrant([this.x1, this.y1], [this.x2, this.y2]);\n\n            // we now have startAngle and endAngle as positive numbers, meaning the\n            // absolute difference (|d|) between them is the sweep (s) of this arc, unless the\n            // arc is 'anticlockwise' in which case 's' is given by 2PI - |d|.\n\n            var ea = this.endAngle < this.startAngle ? this.endAngle + TWO_PI : this.endAngle;\n            this.sweep = Math.abs(ea - this.startAngle);\n            if (this.anticlockwise) this.sweep = TWO_PI - this.sweep;\n            var circumference = 2 * Math.PI * this.radius,\n                frac = this.sweep / TWO_PI,\n                length = circumference * frac;\n\n            this.getLength = function () {\n                return length;\n            };\n\n            this.getBounds = function () {\n                return {\n                    minX: params.cx - params.r,\n                    maxX: params.cx + params.r,\n                    minY: params.cy - params.r,\n                    maxY: params.cy + params.r\n                };\n            };\n\n            var VERY_SMALL_VALUE = 0.0000000001,\n                gentleRound = function (n) {\n                    var f = Math.floor(n), r = Math.ceil(n);\n                    if (n - f < VERY_SMALL_VALUE)\n                        return f;\n                    else if (r - n < VERY_SMALL_VALUE)\n                        return r;\n                    return n;\n                };\n\n            /**\n             * returns the point on the segment's path that is 'location' along the length of the path, where 'location' is a decimal from\n             * 0 to 1 inclusive.\n             */\n            this.pointOnPath = function (location, absolute) {\n\n                if (location === 0) {\n                    return { x: this.x1, y: this.y1, theta: this.startAngle };\n                }\n                else if (location == 1) {\n                    return { x: this.x2, y: this.y2, theta: this.endAngle };\n                }\n\n                if (absolute) {\n                    location = location / length;\n                }\n\n                var angle = _calcAngleForLocation(this, location),\n                    _x = params.cx + (params.r * Math.cos(angle)),\n                    _y = params.cy + (params.r * Math.sin(angle));\n\n                return { x: gentleRound(_x), y: gentleRound(_y), theta: angle };\n            };\n\n            /**\n             * returns the gradient of the segment at the given point.\n             */\n            this.gradientAtPoint = function (location, absolute) {\n                var p = this.pointOnPath(location, absolute);\n                var m = _jg.normal([ params.cx, params.cy ], [p.x, p.y ]);\n                if (!this.anticlockwise && (m == Infinity || m == -Infinity)) m *= -1;\n                return m;\n            };\n\n            this.pointAlongPathFrom = function (location, distance, absolute) {\n                var p = this.pointOnPath(location, absolute),\n                    arcSpan = distance / circumference * 2 * Math.PI,\n                    dir = this.anticlockwise ? -1 : 1,\n                    startAngle = p.theta + (dir * arcSpan),\n                    startX = params.cx + (this.radius * Math.cos(startAngle)),\n                    startY = params.cy + (this.radius * Math.sin(startAngle));\n\n                return {x: startX, y: startY};\n            };\n        },\n\n        Bezier: function (params) {\n            this.curve = [\n                { x: params.x1, y: params.y1},\n                { x: params.cp1x, y: params.cp1y },\n                { x: params.cp2x, y: params.cp2y },\n                { x: params.x2, y: params.y2 }\n            ];\n\n            var _super = _jp.Segments.AbstractSegment.apply(this, arguments);\n            // although this is not a strictly rigorous determination of bounds\n            // of a bezier curve, it works for the types of curves that this segment\n            // type produces.\n            this.bounds = {\n                minX: Math.min(params.x1, params.x2, params.cp1x, params.cp2x),\n                minY: Math.min(params.y1, params.y2, params.cp1y, params.cp2y),\n                maxX: Math.max(params.x1, params.x2, params.cp1x, params.cp2x),\n                maxY: Math.max(params.y1, params.y2, params.cp1y, params.cp2y)\n            };\n\n            this.type = \"Bezier\";\n\n            var _translateLocation = function (_curve, location, absolute) {\n                if (absolute)\n                    location = root.jsBezier.locationAlongCurveFrom(_curve, location > 0 ? 0 : 1, location);\n\n                return location;\n            };\n\n            /**\n             * returns the point on the segment's path that is 'location' along the length of the path, where 'location' is a decimal from\n             * 0 to 1 inclusive.\n             */\n            this.pointOnPath = function (location, absolute) {\n                location = _translateLocation(this.curve, location, absolute);\n                return root.jsBezier.pointOnCurve(this.curve, location);\n            };\n\n            /**\n             * returns the gradient of the segment at the given point.\n             */\n            this.gradientAtPoint = function (location, absolute) {\n                location = _translateLocation(this.curve, location, absolute);\n                return root.jsBezier.gradientAtPoint(this.curve, location);\n            };\n\n            this.pointAlongPathFrom = function (location, distance, absolute) {\n                location = _translateLocation(this.curve, location, absolute);\n                return root.jsBezier.pointAlongCurveFrom(this.curve, location, distance);\n            };\n\n            this.getLength = function () {\n                return root.jsBezier.getLength(this.curve);\n            };\n\n            this.getBounds = function () {\n                return this.bounds;\n            };\n        }\n    };\n\n    /*\n     Class: AbstractComponent\n     Superclass for AbstractConnector and AbstractEndpoint.\n     */\n    var AbstractComponent = function () {\n        this.resetBounds = function () {\n            this.bounds = { minX: Infinity, minY: Infinity, maxX: -Infinity, maxY: -Infinity };\n        };\n        this.resetBounds();\n    };\n\n    /*\n     * Class: AbstractConnector\n     * Superclass for all Connectors; here is where Segments are managed.  This is exposed on jsPlumb just so it\n     * can be accessed from other files. You should not try to instantiate one of these directly.\n     *\n     * When this class is asked for a pointOnPath, or gradient etc, it must first figure out which segment to dispatch\n     * that request to. This is done by keeping track of the total connector length as segments are added, and also\n     * their cumulative ratios to the total length.  Then when the right segment is found it is a simple case of dispatching\n     * the request to it (and adjusting 'location' so that it is relative to the beginning of that segment.)\n     */\n    _jp.Connectors.AbstractConnector = function (params) {\n\n        AbstractComponent.apply(this, arguments);\n\n        var segments = [],\n            totalLength = 0,\n            segmentProportions = [],\n            segmentProportionalLengths = [],\n            stub = params.stub || 0,\n            sourceStub = _ju.isArray(stub) ? stub[0] : stub,\n            targetStub = _ju.isArray(stub) ? stub[1] : stub,\n            gap = params.gap || 0,\n            sourceGap = _ju.isArray(gap) ? gap[0] : gap,\n            targetGap = _ju.isArray(gap) ? gap[1] : gap,\n            userProvidedSegments = null,\n            edited = false,\n            paintInfo = null,\n            geometry = null,\n            editable = params.editable !== false && jsPlumb.ConnectorEditors != null && jsPlumb.ConnectorEditors[this.type] != null;\n\n        var _setGeometry = this.setGeometry = function(g, internallyComputed) {\n            edited = (!internallyComputed);\n            geometry = g;\n        };\n        var _getGeometry = this.getGeometry = function() {\n            return geometry;\n        };\n\n        this.hasBeenEdited = function() { return edited; };\n        this.isEditing = function() { return this.editor != null && this.editor.isActive(); };\n        this.setEditable = function(e) {\n            // if this connector has an editor already, or\n            // if an editor for this connector's type is available, or\n            // if the child declares an overrideSetEditable and it does not return false, editable is true.\n            if (e && jsPlumb.ConnectorEditors != null && jsPlumb.ConnectorEditors[this.type] != null && (this.overrideSetEditable == null || this.overrideSetEditable())) {\n                editable = e;\n            } else {\n                editable = false;\n            }\n            return editable;\n        };\n        this.isEditable = function() { return editable; };\n\n        /**\n         * Function: findSegmentForPoint\n         * Returns the segment that is closest to the given [x,y],\n         * null if nothing found.  This function returns a JS\n         * object with:\n         *\n         *   d   -   distance from segment\n         *   l   -   proportional location in segment\n         *   x   -   x point on the segment\n         *   y   -   y point on the segment\n         *   s   -   the segment itself.\n         */\n        this.findSegmentForPoint = function (x, y) {\n            var out = { d: Infinity, s: null, x: null, y: null, l: null };\n            for (var i = 0; i < segments.length; i++) {\n                var _s = segments[i].findClosestPointOnPath(x, y);\n                if (_s.d < out.d) {\n                    out.d = _s.d;\n                    out.l = _s.l;\n                    out.x = _s.x;\n                    out.y = _s.y;\n                    out.s = segments[i];\n                    out.x1 = _s.x1;\n                    out.x2 = _s.x2;\n                    out.y1 = _s.y1;\n                    out.y2 = _s.y2;\n                    out.index = i;\n                }\n            }\n\n            return out;\n        };\n\n        var _updateSegmentProportions = function () {\n                var curLoc = 0;\n                for (var i = 0; i < segments.length; i++) {\n                    var sl = segments[i].getLength();\n                    segmentProportionalLengths[i] = sl / totalLength;\n                    segmentProportions[i] = [curLoc, (curLoc += (sl / totalLength)) ];\n                }\n            },\n\n            /**\n             * returns [segment, proportion of travel in segment, segment index] for the segment\n             * that contains the point which is 'location' distance along the entire path, where\n             * 'location' is a decimal between 0 and 1 inclusive. in this connector type, paths\n             * are made up of a list of segments, each of which contributes some fraction to\n             * the total length.\n             * From 1.3.10 this also supports the 'absolute' property, which lets us specify a location\n             * as the absolute distance in pixels, rather than a proportion of the total path.\n             */\n            _findSegmentForLocation = function (location, absolute) {\n                if (absolute) {\n                    location = location > 0 ? location / totalLength : (totalLength + location) / totalLength;\n                }\n                var idx = segmentProportions.length - 1, inSegmentProportion = 1;\n                for (var i = 0; i < segmentProportions.length; i++) {\n                    if (segmentProportions[i][1] >= location) {\n                        idx = i;\n                        // todo is this correct for all connector path types?\n                        inSegmentProportion = location == 1 ? 1 : location === 0 ? 0 : (location - segmentProportions[i][0]) / segmentProportionalLengths[i];\n                        break;\n                    }\n                }\n                return { segment: segments[idx], proportion: inSegmentProportion, index: idx };\n            },\n            _addSegment = function (conn, type, params) {\n                if (params.x1 == params.x2 && params.y1 == params.y2) return;\n                var s = new _jp.Segments[type](params);\n                segments.push(s);\n                totalLength += s.getLength();\n                conn.updateBounds(s);\n            },\n            _clearSegments = function () {\n                totalLength = segments.length = segmentProportions.length = segmentProportionalLengths.length = 0;\n            };\n\n        this.setSegments = function (_segs) {\n            userProvidedSegments = [];\n            totalLength = 0;\n            for (var i = 0; i < _segs.length; i++) {\n                userProvidedSegments.push(_segs[i]);\n                totalLength += _segs[i].getLength();\n            }\n        };\n\n        this.getLength = function() {\n            return totalLength;\n        };\n\n        var _prepareCompute = function (params) {\n            this.lineWidth = params.lineWidth;\n            var segment = _jg.quadrant(params.sourcePos, params.targetPos),\n                swapX = params.targetPos[0] < params.sourcePos[0],\n                swapY = params.targetPos[1] < params.sourcePos[1],\n                lw = params.lineWidth || 1,\n                so = params.sourceEndpoint.anchor.getOrientation(params.sourceEndpoint),\n                to = params.targetEndpoint.anchor.getOrientation(params.targetEndpoint),\n                x = swapX ? params.targetPos[0] : params.sourcePos[0],\n                y = swapY ? params.targetPos[1] : params.sourcePos[1],\n                w = Math.abs(params.targetPos[0] - params.sourcePos[0]),\n                h = Math.abs(params.targetPos[1] - params.sourcePos[1]);\n\n            // if either anchor does not have an orientation set, we derive one from their relative\n            // positions.  we fix the axis to be the one in which the two elements are further apart, and\n            // point each anchor at the other element.  this is also used when dragging a new connection.\n            if (so[0] === 0 && so[1] === 0 || to[0] === 0 && to[1] === 0) {\n                var index = w > h ? 0 : 1, oIndex = [1, 0][index];\n                so = [];\n                to = [];\n                so[index] = params.sourcePos[index] > params.targetPos[index] ? -1 : 1;\n                to[index] = params.sourcePos[index] > params.targetPos[index] ? 1 : -1;\n                so[oIndex] = 0;\n                to[oIndex] = 0;\n            }\n\n            var sx = swapX ? w + (sourceGap * so[0]) : sourceGap * so[0],\n                sy = swapY ? h + (sourceGap * so[1]) : sourceGap * so[1],\n                tx = swapX ? targetGap * to[0] : w + (targetGap * to[0]),\n                ty = swapY ? targetGap * to[1] : h + (targetGap * to[1]),\n                oProduct = ((so[0] * to[0]) + (so[1] * to[1]));\n\n            var result = {\n                sx: sx, sy: sy, tx: tx, ty: ty, lw: lw,\n                xSpan: Math.abs(tx - sx),\n                ySpan: Math.abs(ty - sy),\n                mx: (sx + tx) / 2,\n                my: (sy + ty) / 2,\n                so: so, to: to, x: x, y: y, w: w, h: h,\n                segment: segment,\n                startStubX: sx + (so[0] * sourceStub),\n                startStubY: sy + (so[1] * sourceStub),\n                endStubX: tx + (to[0] * targetStub),\n                endStubY: ty + (to[1] * targetStub),\n                isXGreaterThanStubTimes2: Math.abs(sx - tx) > (sourceStub + targetStub),\n                isYGreaterThanStubTimes2: Math.abs(sy - ty) > (sourceStub + targetStub),\n                opposite: oProduct == -1,\n                perpendicular: oProduct === 0,\n                orthogonal: oProduct == 1,\n                sourceAxis: so[0] === 0 ? \"y\" : \"x\",\n                points: [x, y, w, h, sx, sy, tx, ty ]\n            };\n            result.anchorOrientation = result.opposite ? \"opposite\" : result.orthogonal ? \"orthogonal\" : \"perpendicular\";\n            return result;\n        };\n\n        this.getSegments = function () {\n            return segments;\n        };\n\n        this.updateBounds = function (segment) {\n            var segBounds = segment.getBounds();\n            this.bounds.minX = Math.min(this.bounds.minX, segBounds.minX);\n            this.bounds.maxX = Math.max(this.bounds.maxX, segBounds.maxX);\n            this.bounds.minY = Math.min(this.bounds.minY, segBounds.minY);\n            this.bounds.maxY = Math.max(this.bounds.maxY, segBounds.maxY);\n        };\n\n        var dumpSegmentsToConsole = function () {\n            console.log(\"SEGMENTS:\");\n            for (var i = 0; i < segments.length; i++) {\n                console.log(segments[i].type, segments[i].getLength(), segmentProportions[i]);\n            }\n        };\n\n        this.pointOnPath = function (location, absolute) {\n            var seg = _findSegmentForLocation(location, absolute);\n            return seg.segment && seg.segment.pointOnPath(seg.proportion, false) || [0, 0];\n        };\n\n        this.gradientAtPoint = function (location, absolute) {\n            var seg = _findSegmentForLocation(location, absolute);\n            return seg.segment && seg.segment.gradientAtPoint(seg.proportion, false) || 0;\n        };\n\n        this.pointAlongPathFrom = function (location, distance, absolute) {\n            var seg = _findSegmentForLocation(location, absolute);\n            // TODO what happens if this crosses to the next segment?\n            return seg.segment && seg.segment.pointAlongPathFrom(seg.proportion, distance, false) || [0, 0];\n        };\n\n        this.compute = function (params) {\n            paintInfo = _prepareCompute.call(this, params);\n\n            _clearSegments();\n            this._compute(paintInfo, params);\n            this.x = paintInfo.points[0];\n            this.y = paintInfo.points[1];\n            this.w = paintInfo.points[2];\n            this.h = paintInfo.points[3];\n            this.segment = paintInfo.segment;\n            _updateSegmentProportions();\n        };\n\n        return {\n            addSegment: _addSegment,\n            prepareCompute: _prepareCompute,\n            sourceStub: sourceStub,\n            targetStub: targetStub,\n            maxStub: Math.max(sourceStub, targetStub),\n            sourceGap: sourceGap,\n            targetGap: targetGap,\n            maxGap: Math.max(sourceGap, targetGap),\n            setGeometry:_setGeometry,\n            getGeometry:_getGeometry\n        };\n    };\n    _ju.extend(_jp.Connectors.AbstractConnector, AbstractComponent);\n\n    /**\n     * Class: Connectors.Straight\n     * The Straight connector draws a simple straight line between the two anchor points.  It does not have any constructor parameters.\n     */\n    var Straight = _jp.Connectors.Straight = function () {\n        this.type = \"Straight\";\n        var _super = _jp.Connectors.AbstractConnector.apply(this, arguments);\n\n        this._compute = function (paintInfo, _) {\n            _super.addSegment(this, \"Straight\", {x1: paintInfo.sx, y1: paintInfo.sy, x2: paintInfo.startStubX, y2: paintInfo.startStubY});\n            _super.addSegment(this, \"Straight\", {x1: paintInfo.startStubX, y1: paintInfo.startStubY, x2: paintInfo.endStubX, y2: paintInfo.endStubY});\n            _super.addSegment(this, \"Straight\", {x1: paintInfo.endStubX, y1: paintInfo.endStubY, x2: paintInfo.tx, y2: paintInfo.ty});\n        };\n    };\n    _ju.extend(_jp.Connectors.Straight, _jp.Connectors.AbstractConnector);\n    _jp.registerConnectorType(Straight, \"Straight\");\n\n\n    // ********************************* END OF CONNECTOR TYPES *******************************************************************\n\n    // ********************************* ENDPOINT TYPES *******************************************************************\n\n    _jp.Endpoints.AbstractEndpoint = function (params) {\n        AbstractComponent.apply(this, arguments);\n        var compute = this.compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            var out = this._compute.apply(this, arguments);\n            this.x = out[0];\n            this.y = out[1];\n            this.w = out[2];\n            this.h = out[3];\n            this.bounds.minX = this.x;\n            this.bounds.minY = this.y;\n            this.bounds.maxX = this.x + this.w;\n            this.bounds.maxY = this.y + this.h;\n            return out;\n        };\n        return {\n            compute: compute,\n            cssClass: params.cssClass\n        };\n    };\n    _ju.extend(_jp.Endpoints.AbstractEndpoint, AbstractComponent);\n\n    /**\n     * Class: Endpoints.Dot\n     * A round endpoint, with default radius 10 pixels.\n     */\n\n    /**\n     * Function: Constructor\n     *\n     * Parameters:\n     *\n     *    radius    -    radius of the endpoint.  defaults to 10 pixels.\n     */\n    _jp.Endpoints.Dot = function (params) {\n        this.type = \"Dot\";\n        var _super = _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        params = params || {};\n        this.radius = params.radius || 10;\n        this.defaultOffset = 0.5 * this.radius;\n        this.defaultInnerRadius = this.radius / 3;\n\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            this.radius = endpointStyle.radius || this.radius;\n            var x = anchorPoint[0] - this.radius,\n                y = anchorPoint[1] - this.radius,\n                w = this.radius * 2,\n                h = this.radius * 2;\n\n            if (endpointStyle.strokeStyle) {\n                var lw = endpointStyle.lineWidth || 1;\n                x -= lw;\n                y -= lw;\n                w += (lw * 2);\n                h += (lw * 2);\n            }\n            return [ x, y, w, h, this.radius ];\n        };\n    };\n    _ju.extend(_jp.Endpoints.Dot, _jp.Endpoints.AbstractEndpoint);\n\n    _jp.Endpoints.Rectangle = function (params) {\n        this.type = \"Rectangle\";\n        var _super = _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        params = params || {};\n        this.width = params.width || 20;\n        this.height = params.height || 20;\n\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            var width = endpointStyle.width || this.width,\n                height = endpointStyle.height || this.height,\n                x = anchorPoint[0] - (width / 2),\n                y = anchorPoint[1] - (height / 2);\n\n            return [ x, y, width, height];\n        };\n    };\n    _ju.extend(_jp.Endpoints.Rectangle, _jp.Endpoints.AbstractEndpoint);\n\n    var DOMElementEndpoint = function (params) {\n        _jp.jsPlumbUIComponent.apply(this, arguments);\n        this._jsPlumb.displayElements = [];\n    };\n    _ju.extend(DOMElementEndpoint, _jp.jsPlumbUIComponent, {\n        getDisplayElements: function () {\n            return this._jsPlumb.displayElements;\n        },\n        appendDisplayElement: function (el) {\n            this._jsPlumb.displayElements.push(el);\n        }\n    });\n\n    /**\n     * Class: Endpoints.Image\n     * Draws an image as the Endpoint.\n     */\n    /**\n     * Function: Constructor\n     *\n     * Parameters:\n     *\n     *    src    -    location of the image to use.\n\n     TODO: multiple references to self. not sure quite how to get rid of them entirely. perhaps self = null in the cleanup\n     function will suffice\n\n     TODO this class still might leak memory.\n\n     */\n    _jp.Endpoints.Image = function (params) {\n\n        this.type = \"Image\";\n        DOMElementEndpoint.apply(this, arguments);\n        _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n\n        var _onload = params.onload,\n            src = params.src || params.url,\n            clazz = params.cssClass ? \" \" + params.cssClass : \"\";\n\n        this._jsPlumb.img = new Image();\n        this._jsPlumb.ready = false;\n        this._jsPlumb.initialized = false;\n        this._jsPlumb.deleted = false;\n        this._jsPlumb.widthToUse = params.width;\n        this._jsPlumb.heightToUse = params.height;\n        this._jsPlumb.endpoint = params.endpoint;\n\n        this._jsPlumb.img.onload = function () {\n            if (this._jsPlumb != null) {\n                this._jsPlumb.ready = true;\n                this._jsPlumb.widthToUse = this._jsPlumb.widthToUse || this._jsPlumb.img.width;\n                this._jsPlumb.heightToUse = this._jsPlumb.heightToUse || this._jsPlumb.img.height;\n                if (_onload) {\n                    _onload(this);\n                }\n            }\n        }.bind(this);\n\n        /*\n         Function: setImage\n         Sets the Image to use in this Endpoint.\n\n         Parameters:\n         img         -   may be a URL or an Image object\n         onload      -   optional; a callback to execute once the image has loaded.\n         */\n        this._jsPlumb.endpoint.setImage = function (_img, onload) {\n            var s = _img.constructor == String ? _img : _img.src;\n            _onload = onload;\n            this._jsPlumb.img.src = s;\n\n            if (this.canvas != null)\n                this.canvas.setAttribute(\"src\", this._jsPlumb.img.src);\n        }.bind(this);\n\n        this._jsPlumb.endpoint.setImage(src, _onload);\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            this.anchorPoint = anchorPoint;\n            if (this._jsPlumb.ready) return [anchorPoint[0] - this._jsPlumb.widthToUse / 2, anchorPoint[1] - this._jsPlumb.heightToUse / 2,\n                this._jsPlumb.widthToUse, this._jsPlumb.heightToUse];\n            else return [0, 0, 0, 0];\n        };\n\n        this.canvas = jsPlumb.createElement(\"img\", {\n            position:\"absolute\",\n            margin:0,\n            padding:0,\n            outline:0\n        }, this._jsPlumb.instance.endpointClass + clazz);\n\n        if (this._jsPlumb.widthToUse) this.canvas.setAttribute(\"width\", this._jsPlumb.widthToUse);\n        if (this._jsPlumb.heightToUse) this.canvas.setAttribute(\"height\", this._jsPlumb.heightToUse);\n        this._jsPlumb.instance.appendElement(this.canvas);\n\n        this.actuallyPaint = function (d, style, anchor) {\n            if (!this._jsPlumb.deleted) {\n                if (!this._jsPlumb.initialized) {\n                    this.canvas.setAttribute(\"src\", this._jsPlumb.img.src);\n                    this.appendDisplayElement(this.canvas);\n                    this._jsPlumb.initialized = true;\n                }\n                var x = this.anchorPoint[0] - (this._jsPlumb.widthToUse / 2),\n                    y = this.anchorPoint[1] - (this._jsPlumb.heightToUse / 2);\n                _ju.sizeElement(this.canvas, x, y, this._jsPlumb.widthToUse, this._jsPlumb.heightToUse);\n            }\n        };\n\n        this.paint = function (style, anchor) {\n            if (this._jsPlumb != null) {  // may have been deleted\n                if (this._jsPlumb.ready) {\n                    this.actuallyPaint(style, anchor);\n                }\n                else {\n                    root.setTimeout(function () {\n                        this.paint(style, anchor);\n                    }.bind(this), 200);\n                }\n            }\n        };\n    };\n    _ju.extend(_jp.Endpoints.Image, [ DOMElementEndpoint, _jp.Endpoints.AbstractEndpoint ], {\n        cleanup: function (force) {\n            if (force) {\n                this._jsPlumb.deleted = true;\n                if (this.canvas) this.canvas.parentNode.removeChild(this.canvas);\n                this.canvas = null;\n            }\n        }\n    });\n\n    /*\n     * Class: Endpoints.Blank\n     * An Endpoint that paints nothing (visible) on the screen.  Supports cssClass and hoverClass parameters like all Endpoints.\n     */\n    _jp.Endpoints.Blank = function (params) {\n        var _super = _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        this.type = \"Blank\";\n        DOMElementEndpoint.apply(this, arguments);\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            return [anchorPoint[0], anchorPoint[1], 10, 0];\n        };\n\n        var clazz = params.cssClass ? \" \" + params.cssClass : \"\";\n\n        this.canvas = jsPlumb.createElement(\"div\", {\n            display: \"block\",\n            width: \"1px\",\n            height: \"1px\",\n            background: \"transparent\",\n            position: \"absolute\"\n        }, this._jsPlumb.instance.endpointClass + clazz);\n\n        this._jsPlumb.instance.appendElement(this.canvas);\n\n        this.paint = function (style, anchor) {\n            _ju.sizeElement(this.canvas, this.x, this.y, this.w, this.h);\n        };\n    };\n    _ju.extend(_jp.Endpoints.Blank, [_jp.Endpoints.AbstractEndpoint, DOMElementEndpoint], {\n        cleanup: function () {\n            if (this.canvas && this.canvas.parentNode) {\n                this.canvas.parentNode.removeChild(this.canvas);\n            }\n        }\n    });\n\n    /*\n     * Class: Endpoints.Triangle\n     * A triangular Endpoint.\n     */\n    /*\n     * Function: Constructor\n     *\n     * Parameters:\n     *\n     *     width    -    width of the triangle's base.  defaults to 55 pixels.\n     *     height    -    height of the triangle from base to apex.  defaults to 55 pixels.\n     */\n    _jp.Endpoints.Triangle = function (params) {\n        this.type = \"Triangle\";\n        _jp.Endpoints.AbstractEndpoint.apply(this, arguments);\n        params = params || {  };\n        params.width = params.width || 55;\n        params.height = params.height || 55;\n        this.width = params.width;\n        this.height = params.height;\n        this._compute = function (anchorPoint, orientation, endpointStyle, connectorPaintStyle) {\n            var width = endpointStyle.width || self.width,\n                height = endpointStyle.height || self.height,\n                x = anchorPoint[0] - (width / 2),\n                y = anchorPoint[1] - (height / 2);\n            return [ x, y, width, height ];\n        };\n    };\n// ********************************* END OF ENDPOINT TYPES *******************************************************************\n\n\n// ********************************* OVERLAY DEFINITIONS ***********************************************************************    \n\n    var AbstractOverlay = _jp.Overlays.AbstractOverlay = function (params) {\n        this.visible = true;\n        this.isAppendedAtTopLevel = true;\n        this.component = params.component;\n        this.loc = params.location == null ? 0.5 : params.location;\n        this.endpointLoc = params.endpointLocation == null ? [ 0.5, 0.5] : params.endpointLocation;\n        this.visible = params.visible !== false;\n    };\n    AbstractOverlay.prototype = {\n        cleanup: function (force) {\n            if (force) {\n                this.component = null;\n                this.canvas = null;\n                this.endpointLoc = null;\n            }\n        },\n        reattach:function(instance) {\n\n        },\n        setVisible: function (val) {\n            this.visible = val;\n            this.component.repaint();\n        },\n        isVisible: function () {\n            return this.visible;\n        },\n        hide: function () {\n            this.setVisible(false);\n        },\n        show: function () {\n            this.setVisible(true);\n        },\n        incrementLocation: function (amount) {\n            this.loc += amount;\n            this.component.repaint();\n        },\n        setLocation: function (l) {\n            this.loc = l;\n            this.component.repaint();\n        },\n        getLocation: function () {\n            return this.loc;\n        },\n        updateFrom:function() { }\n    };\n\n\n    /*\n     * Class: Overlays.Arrow\n     *\n     * An arrow overlay, defined by four points: the head, the two sides of the tail, and a 'foldback' point at some distance along the length\n     * of the arrow that lines from each tail point converge into.  The foldback point is defined using a decimal that indicates some fraction\n     * of the length of the arrow and has a default value of 0.623.  A foldback point value of 1 would mean that the arrow had a straight line\n     * across the tail.\n     */\n    /*\n     * Function: Constructor\n     *\n     * Parameters:\n     *\n     *     length - distance in pixels from head to tail baseline. default 20.\n     *     width - width in pixels of the tail baseline. default 20.\n     *     fillStyle - style to use when filling the arrow.  defaults to \"black\".\n     *     strokeStyle - style to use when stroking the arrow. defaults to null, which means the arrow is not stroked.\n     *     lineWidth - line width to use when stroking the arrow. defaults to 1, but only used if strokeStyle is not null.\n     *     foldback - distance (as a decimal from 0 to 1 inclusive) along the length of the arrow marking the point the tail points should fold back to.  defaults to 0.623.\n     *     location - distance (as a decimal from 0 to 1 inclusive) marking where the arrow should sit on the connector. defaults to 0.5.\n     *     direction - indicates the direction the arrow points in. valid values are -1 and 1; 1 is default.\n     */\n    _jp.Overlays.Arrow = function (params) {\n        this.type = \"Arrow\";\n        AbstractOverlay.apply(this, arguments);\n        this.isAppendedAtTopLevel = false;\n        params = params || {};\n\n        this.length = params.length || 20;\n        this.width = params.width || 20;\n        this.id = params.id;\n        var direction = (params.direction || 1) < 0 ? -1 : 1,\n            paintStyle = params.paintStyle || { lineWidth: 1 },\n        // how far along the arrow the lines folding back in come to. default is 62.3%.\n            foldback = params.foldback || 0.623;\n\n        this.computeMaxSize = function () {\n            return self.width * 1.5;\n        };\n\n        this.elementCreated = function(p, component) {\n            this.path = p;\n            if (params.events) {\n                for (var i in params.events) {\n                    jsPlumb.on(p, i, params.events[i]);\n                }\n            }\n        };\n\n        this.draw = function (component, currentConnectionPaintStyle) {\n\n            var hxy, mid, txy, tail, cxy;\n            if (component.pointAlongPathFrom) {\n\n                if (_ju.isString(this.loc) || this.loc > 1 || this.loc < 0) {\n                    var l = parseInt(this.loc, 10),\n                        fromLoc = this.loc < 0 ? 1 : 0;\n                    hxy = component.pointAlongPathFrom(fromLoc, l, false);\n                    mid = component.pointAlongPathFrom(fromLoc, l - (direction * this.length / 2), false);\n                    txy = _jg.pointOnLine(hxy, mid, this.length);\n                }\n                else if (this.loc == 1) {\n                    hxy = component.pointOnPath(this.loc);\n                    mid = component.pointAlongPathFrom(this.loc, -(this.length));\n                    txy = _jg.pointOnLine(hxy, mid, this.length);\n\n                    if (direction == -1) {\n                        var _ = txy;\n                        txy = hxy;\n                        hxy = _;\n                    }\n                }\n                else if (this.loc === 0) {\n                    txy = component.pointOnPath(this.loc);\n                    mid = component.pointAlongPathFrom(this.loc, this.length);\n                    hxy = _jg.pointOnLine(txy, mid, this.length);\n                    if (direction == -1) {\n                        var __ = txy;\n                        txy = hxy;\n                        hxy = __;\n                    }\n                }\n                else {\n                    hxy = component.pointAlongPathFrom(this.loc, direction * this.length / 2);\n                    mid = component.pointOnPath(this.loc);\n                    txy = _jg.pointOnLine(hxy, mid, this.length);\n                }\n\n                tail = _jg.perpendicularLineTo(hxy, txy, this.width);\n                cxy = _jg.pointOnLine(hxy, txy, foldback * this.length);\n\n                var d = { hxy: hxy, tail: tail, cxy: cxy },\n                    strokeStyle = paintStyle.strokeStyle || currentConnectionPaintStyle.strokeStyle,\n                    fillStyle = paintStyle.fillStyle || currentConnectionPaintStyle.strokeStyle,\n                    lineWidth = paintStyle.lineWidth || currentConnectionPaintStyle.lineWidth;\n\n                return {\n                    component: component,\n                    d: d,\n                    lineWidth: lineWidth,\n                    strokeStyle: strokeStyle,\n                    fillStyle: fillStyle,\n                    minX: Math.min(hxy.x, tail[0].x, tail[1].x),\n                    maxX: Math.max(hxy.x, tail[0].x, tail[1].x),\n                    minY: Math.min(hxy.y, tail[0].y, tail[1].y),\n                    maxY: Math.max(hxy.y, tail[0].y, tail[1].y)\n                };\n            }\n            else return {component: component, minX: 0, maxX: 0, minY: 0, maxY: 0};\n        };\n    };\n    _ju.extend(_jp.Overlays.Arrow, AbstractOverlay, {\n        updateFrom:function(d) {\n            this.length = d.length || this.length;\n            this.width = d.width|| this.width;\n            this.direction = d.direction != null ? d.direction : this.direction;\n            this.foldback = d.foldback|| this.foldback;\n        }\n    });\n\n    /*\n     * Class: Overlays.PlainArrow\n     *\n     * A basic arrow.  This is in fact just one instance of the more generic case in which the tail folds back on itself to some\n     * point along the length of the arrow: in this case, that foldback point is the full length of the arrow.  so it just does\n     * a 'call' to Arrow with foldback set appropriately.\n     */\n    /*\n     * Function: Constructor\n     * See <Overlays.Arrow> for allowed parameters for this overlay.\n     */\n    _jp.Overlays.PlainArrow = function (params) {\n        params = params || {};\n        var p = _jp.extend(params, {foldback: 1});\n        _jp.Overlays.Arrow.call(this, p);\n        this.type = \"PlainArrow\";\n    };\n    _ju.extend(_jp.Overlays.PlainArrow, _jp.Overlays.Arrow);\n\n    /*\n     * Class: Overlays.Diamond\n     * \n     * A diamond. Like PlainArrow, this is a concrete case of the more generic case of the tail points converging on some point...it just\n     * happens that in this case, that point is greater than the length of the the arrow.\n     *\n     *      this could probably do with some help with positioning...due to the way it reuses the Arrow paint code, what Arrow thinks is the\n     *      center is actually 1/4 of the way along for this guy.  but we don't have any knowledge of pixels at this point, so we're kind of\n     *      stuck when it comes to helping out the Arrow class. possibly we could pass in a 'transpose' parameter or something. the value\n     *      would be -l/4 in this case - move along one quarter of the total length.\n     */\n    /*\n     * Function: Constructor\n     * See <Overlays.Arrow> for allowed parameters for this overlay.\n     */\n    _jp.Overlays.Diamond = function (params) {\n        params = params || {};\n        var l = params.length || 40,\n            p = jsPlumb.extend(params, {length: l / 2, foldback: 2});\n        _jp.Overlays.Arrow.call(this, p);\n        this.type = \"Diamond\";\n    };\n    _ju.extend(_jp.Overlays.Diamond, _jp.Overlays.Arrow);\n    \n    _jp.Overlays.SingleLine = function (params) {\n        params = params || {};\n        var l = params.length || 40,\n            p = jsPlumb.extend(params, {length: l / 2, foldback: 2});\n        _jp.Overlays.Arrow.call(this, p);\n        this.type = \"SingleLine\";\n    };\n    _ju.extend(_jp.Overlays.SingleLine, _jp.Overlays.Arrow);\n    \n    _jp.Overlays.DoubleLine = function (params) {\n        params = params || {};\n        var l = params.length || 40,\n            p = jsPlumb.extend(params, {length: l / 2, foldback: 2});\n        _jp.Overlays.Arrow.call(this, p);\n        this.type = \"DoubleLine\";\n    };\n    _ju.extend(_jp.Overlays.DoubleLine, _jp.Overlays.Arrow);\n\n    var _getDimensions = function (component, forceRefresh) {\n        if (component._jsPlumb.cachedDimensions == null || forceRefresh)\n            component._jsPlumb.cachedDimensions = component.getDimensions();\n        return component._jsPlumb.cachedDimensions;\n    };\n\n    // abstract superclass for overlays that add an element to the DOM.\n    var AbstractDOMOverlay = function (params) {\n        _jp.jsPlumbUIComponent.apply(this, arguments);\n        AbstractOverlay.apply(this, arguments);\n\n        // hand off fired events to associated component.\n        var _f = this.fire;\n        this.fire = function () {\n            _f.apply(this, arguments);\n            if (this.component) this.component.fire.apply(this.component, arguments);\n        };\n\n        this.detached=false;\n        this.id = params.id;\n        this._jsPlumb.div = null;\n        this._jsPlumb.initialised = false;\n        this._jsPlumb.component = params.component;\n        this._jsPlumb.cachedDimensions = null;\n        this._jsPlumb.create = params.create;\n        this._jsPlumb.initiallyInvisible = params.visible === false;\n\n        this.getElement = function () {\n            if (this._jsPlumb.div == null) {\n                var div = this._jsPlumb.div = jsPlumb.getElement(this._jsPlumb.create(this._jsPlumb.component));\n                div.style.position = \"absolute\";\n                div.className = this._jsPlumb.instance.overlayClass + \" \" +\n                    (this.cssClass ? this.cssClass :\n                        params.cssClass ? params.cssClass : \"\");\n                this._jsPlumb.instance.appendElement(div);\n                this._jsPlumb.instance.getId(div);\n                this.canvas = div;\n\n                // in IE the top left corner is what it placed at the desired location.  This will not\n                // be fixed. IE8 is not going to be supported for much longer.\n                var ts = \"translate(-50%, -50%)\";\n                div.style.webkitTransform = ts;\n                div.style.mozTransform = ts;\n                div.style.msTransform = ts;\n                div.style.oTransform = ts;\n                div.style.transform = ts;\n\n                // write the related component into the created element\n                div._jsPlumb = this;\n\n                if (params.visible === false)\n                    div.style.display = \"none\";\n            }\n            return this._jsPlumb.div;\n        };\n\n        this.draw = function (component, currentConnectionPaintStyle, absolutePosition) {\n            var td = _getDimensions(this);\n            if (td != null && td.length == 2) {\n                var cxy = { x: 0, y: 0 };\n\n                // absolutePosition would have been set by a call to connection.setAbsoluteOverlayPosition.\n                if (absolutePosition) {\n                    cxy = { x: absolutePosition[0], y: absolutePosition[1] };\n                }\n                else if (component.pointOnPath) {\n                    var loc = this.loc, absolute = false;\n                    if (_ju.isString(this.loc) || this.loc < 0 || this.loc > 1) {\n                        loc = parseInt(this.loc, 10);\n                        absolute = true;\n                    }\n                    cxy = component.pointOnPath(loc, absolute);  // a connection\n                }\n                else {\n                    var locToUse = this.loc.constructor == Array ? this.loc : this.endpointLoc;\n                    cxy = { x: locToUse[0] * component.w,\n                        y: locToUse[1] * component.h };\n                }\n\n                var minx = cxy.x - (td[0] / 2),\n                    miny = cxy.y - (td[1] / 2);\n\n                return {\n                    component: component,\n                    d: { minx: minx, miny: miny, td: td, cxy: cxy },\n                    minX: minx,\n                    maxX: minx + td[0],\n                    minY: miny,\n                    maxY: miny + td[1]\n                };\n            }\n            else return {minX: 0, maxX: 0, minY: 0, maxY: 0};\n        };\n    };\n    _ju.extend(AbstractDOMOverlay, [_jp.jsPlumbUIComponent, AbstractOverlay], {\n        getDimensions: function () {\n            return [1,1];\n        },\n        setVisible: function (state) {\n            if (this._jsPlumb.div) {\n                this._jsPlumb.div.style.display = state ? \"block\" : \"none\";\n                // if initially invisible, dimensions are 0,0 and never get updated\n                if (state && this._jsPlumb.initiallyInvisible) {\n                    _getDimensions(this, true);\n                    this.component.repaint();\n                    this._jsPlumb.initiallyInvisible = false;\n                }\n            }\n        },\n        /*\n         * Function: clearCachedDimensions\n         * Clears the cached dimensions for the label. As a performance enhancement, label dimensions are\n         * cached from 1.3.12 onwards. The cache is cleared when you change the label text, of course, but\n         * there are other reasons why the text dimensions might change - if you make a change through CSS, for\n         * example, you might change the font size.  in that case you should explicitly call this method.\n         */\n        clearCachedDimensions: function () {\n            this._jsPlumb.cachedDimensions = null;\n        },\n        cleanup: function (force) {\n            if (force) {\n                if (this._jsPlumb.div != null) {\n                    this._jsPlumb.div._jsPlumb = null;\n                    this._jsPlumb.instance.removeElement(this._jsPlumb.div);\n                }\n            }\n            else {\n                // if not a forced cleanup, just detach child from parent for now.\n                if (this._jsPlumb && this._jsPlumb.div && this._jsPlumb.div.parentNode)\n                    this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div);\n                this.detached = true;\n            }\n\n        },\n        reattach:function(instance) {\n            if (this._jsPlumb.div != null) instance.getContainer().appendChild(this._jsPlumb.div);\n            this.detached = false;\n        },\n        computeMaxSize: function () {\n            var td = _getDimensions(this);\n            return Math.max(td[0], td[1]);\n        },\n        paint: function (p, containerExtents) {\n            if (!this._jsPlumb.initialised) {\n                this.getElement();\n                p.component.appendDisplayElement(this._jsPlumb.div);\n                this._jsPlumb.initialised = true;\n                if (this.detached) this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div);\n            }\n            this._jsPlumb.div.style.left = (p.component.x + p.d.minx) + \"px\";\n            this._jsPlumb.div.style.top = (p.component.y + p.d.miny) + \"px\";\n        }\n    });\n\n    /*\n     * Class: Overlays.Custom\n     * A Custom overlay. You supply a 'create' function which returns some DOM element, and jsPlumb positions it.\n     * The 'create' function is passed a Connection or Endpoint.\n     */\n    /*\n     * Function: Constructor\n     * \n     * Parameters:\n     *     create - function for jsPlumb to call that returns a DOM element.\n     *     location - distance (as a decimal from 0 to 1 inclusive) marking where the label should sit on the connector. defaults to 0.5.\n     *     id - optional id to use for later retrieval of this overlay.\n     *     \n     */\n    _jp.Overlays.Custom = function (params) {\n        this.type = \"Custom\";\n        AbstractDOMOverlay.apply(this, arguments);\n    };\n    _ju.extend(_jp.Overlays.Custom, AbstractDOMOverlay);\n\n    _jp.Overlays.GuideLines = function () {\n        var self = this;\n        self.length = 50;\n        self.lineWidth = 5;\n        this.type = \"GuideLines\";\n        AbstractOverlay.apply(this, arguments);\n        _jp.jsPlumbUIComponent.apply(this, arguments);\n        this.draw = function (connector, currentConnectionPaintStyle) {\n\n            var head = connector.pointAlongPathFrom(self.loc, self.length / 2),\n                mid = connector.pointOnPath(self.loc),\n                tail = _jg.pointOnLine(head, mid, self.length),\n                tailLine = _jg.perpendicularLineTo(head, tail, 40),\n                headLine = _jg.perpendicularLineTo(tail, head, 20);\n\n            return {\n                connector: connector,\n                head: head,\n                tail: tail,\n                headLine: headLine,\n                tailLine: tailLine,\n                minX: Math.min(head.x, tail.x, headLine[0].x, headLine[1].x),\n                minY: Math.min(head.y, tail.y, headLine[0].y, headLine[1].y),\n                maxX: Math.max(head.x, tail.x, headLine[0].x, headLine[1].x),\n                maxY: Math.max(head.y, tail.y, headLine[0].y, headLine[1].y)\n            };\n        };\n\n        // this.cleanup = function() { };  // nothing to clean up for GuideLines\n    };\n\n    /*\n     * Class: Overlays.Label\n\n     */\n    /*\n     * Function: Constructor\n     * \n     * Parameters:\n     *     cssClass - optional css class string to append to css class. This string is appended \"as-is\", so you can of course have multiple classes\n     *             defined.  This parameter is preferred to using labelStyle, borderWidth and borderStyle.\n     *     label - the label to paint.  May be a string or a function that returns a string.  Nothing will be painted if your label is null or your\n     *         label function returns null.  empty strings _will_ be painted.\n     *     location - distance (as a decimal from 0 to 1 inclusive) marking where the label should sit on the connector. defaults to 0.5.\n     *     id - optional id to use for later retrieval of this overlay.\n     * \n     *     \n     */\n    _jp.Overlays.Label = function (params) {\n        this.labelStyle = params.labelStyle;\n\n        var labelWidth = null, labelHeight = null, labelText = null, labelPadding = null;\n        this.cssClass = this.labelStyle != null ? this.labelStyle.cssClass : null;\n        var p = _jp.extend({\n            create: function () {\n                return jsPlumb.createElement(\"div\");\n            }}, params);\n        _jp.Overlays.Custom.call(this, p);\n        this.type = \"Label\";\n        this.label = params.label || \"\";\n        this.labelText = null;\n        if (this.labelStyle) {\n            var el = this.getElement();\n            this.labelStyle.font = this.labelStyle.font || \"12px sans-serif\";\n            el.style.font = this.labelStyle.font;\n            el.style.color = this.labelStyle.color || \"black\";\n            if (this.labelStyle.fillStyle) el.style.background = this.labelStyle.fillStyle;\n            if (this.labelStyle.borderWidth > 0) {\n                var dStyle = this.labelStyle.borderStyle ? this.labelStyle.borderStyle : \"black\";\n                el.style.border = this.labelStyle.borderWidth + \"px solid \" + dStyle;\n            }\n            if (this.labelStyle.padding) el.style.padding = this.labelStyle.padding;\n        }\n\n    };\n    _ju.extend(_jp.Overlays.Label, _jp.Overlays.Custom, {\n        cleanup: function (force) {\n            if (force) {\n                this.div = null;\n                this.label = null;\n                this.labelText = null;\n                this.cssClass = null;\n                this.labelStyle = null;\n            }\n        },\n        getLabel: function () {\n            return this.label;\n        },\n        /*\n         * Function: setLabel\n         * sets the label's, um, label.  you would think i'd call this function\n         * 'setText', but you can pass either a Function or a String to this, so\n         * it makes more sense as 'setLabel'. This uses innerHTML on the label div, so keep\n         * that in mind if you need escaped HTML.\n         */\n        setLabel: function (l) {\n            this.label = l;\n            this.labelText = null;\n            this.clearCachedDimensions();\n            this.update();\n            this.component.repaint();\n        },\n        getDimensions: function () {\n            this.update();\n            return AbstractDOMOverlay.prototype.getDimensions.apply(this, arguments);\n        },\n        update: function () {\n            if (typeof this.label == \"function\") {\n                var lt = this.label(this);\n                this.getElement().innerHTML = lt.replace(/\\r\\n/g, \"<br/>\");\n            }\n            else {\n                if (this.labelText == null) {\n                    this.labelText = this.label;\n                    this.getElement().innerHTML = this.labelText.replace(/\\r\\n/g, \"<br/>\");\n                }\n            }\n        },\n        updateFrom:function(d) {\n            if(d.label) this.setLabel(d.label);\n        }\n    });\n\n    // ********************************* END OF OVERLAY DEFINITIONS ***********************************************************************\n\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n *\n * Title:jsPlumb 2.1.1\n *\n * Provides a way to visually connect elements on an HTML page, using SVG.\n *\n * This file contains the base class for library adapters.\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n *\n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n *\n * Dual licensed under the MIT and GPL2 licenses.\n */\n;(function() {\n    \"use strict\";\n    var root = this,\n        _jp = root.jsPlumb;\n\n    var _getEventManager = function(instance) {\n        var e = instance._mottle;\n        if (!e) {\n            e = instance._mottle = new root.Mottle();\n        }\n        return e;\n    };\n\n    _jp.extend(root.jsPlumbInstance.prototype, {\n        getEventManager:function() {\n            return _getEventManager(this);\n        },\n        on : function(el, event, callback) {\n            // TODO: here we would like to map the tap event if we know its\n            // an internal bind to a click. we have to know its internal because only\n            // then can we be sure that the UP event wont be consumed (tap is a synthesized\n            // event from a mousedown followed by a mouseup).\n            //event = { \"click\":\"tap\", \"dblclick\":\"dbltap\"}[event] || event;\n            this.getEventManager().on.apply(this, arguments);\n            return this;\n        },\n        off : function(el, event, callback) {\n            this.getEventManager().off.apply(this, arguments);\n            return this;\n        }\n    });\n\n\n}).call(typeof window !== 'undefined' ? window : this);\n;(function() {\n    \"use strict\";\n\n    var root = this,\n        _ju = root.jsPlumbUtil,\n        _jpi = root.jsPlumbInstance;\n\n    var GROUP_COLLAPSED_CLASS = \"jsplumb-group-collapsed\";\n    var GROUP_EXPANDED_CLASS = \"jsplumb-group-expanded\";\n    var GROUP_CONTAINER_SELECTOR = \"[jsplumb-group-content]\";\n    var ELEMENT_DRAGGABLE_EVENT = \"elementDraggable\";\n    var STOP = \"stop\";\n    var REVERT = \"revert\";\n    var GROUP_MANAGER = \"_groupManager\";\n    var GROUP = \"_jsPlumbGroup\";\n    var GROUP_DRAG_SCOPE = \"_jsPlumbGroupDrag\";\n    var EVT_CHILD_ADDED = \"group:addMember\";\n    var EVT_CHILD_REMOVED = \"group:removeMember\";\n    var EVT_GROUP_ADDED = \"group:add\";\n    var EVT_GROUP_REMOVED = \"group:remove\";\n    var EVT_EXPAND = \"group:expand\";\n    var EVT_COLLAPSE = \"group:collapse\";\n\n    var GroupManager = function(_jsPlumb) {\n        var _managedGroups = {}, _connectionSourceMap = {}, _connectionTargetMap = {}, self = this;\n\n        _jsPlumb.bind(\"connection\", function(p) {\n            if (p.source[GROUP] != null && p.target[GROUP] != null && p.source[GROUP] === p.target[GROUP]) {\n                _connectionSourceMap[p.connection.id] = p.source[GROUP];\n                _connectionTargetMap[p.connection.id] = p.source[GROUP];\n            }\n            else {\n                if (p.source[GROUP] != null) {\n                    _ju.suggest(p.source[GROUP].connections.source, p.connection);\n                    _connectionSourceMap[p.connection.id] = p.source[GROUP];\n                }\n                if (p.target[GROUP] != null) {\n                    _ju.suggest(p.target[GROUP].connections.target, p.connection);\n                    _connectionTargetMap[p.connection.id] = p.target[GROUP];\n                }\n            }\n        });\n\n        function _cleanupDetachedConnection(conn) {\n            delete conn.proxies;\n            var group = _connectionSourceMap[conn.id], f;\n            if (group != null) {\n                f = function(c) { return c.id === conn.id; };\n                _ju.removeWithFunction(group.connections.source, f);\n                _ju.removeWithFunction(group.connections.target, f);\n                delete _connectionSourceMap[conn.id];\n            }\n\n            group = _connectionTargetMap[conn.id];\n            if (group != null) {\n                f = function(c) { return c.id === conn.id; };\n                _ju.removeWithFunction(group.connections.source, f);\n                _ju.removeWithFunction(group.connections.target, f);\n                delete _connectionTargetMap[conn.id];\n            }\n        }\n\n        _jsPlumb.bind(\"connectionDetached\", function(p) {\n            _cleanupDetachedConnection(p.connection);\n        });\n\n        _jsPlumb.bind(\"connectionMoved\", function(p) {\n            var connMap = p.index === 0 ? _connectionSourceMap : _connectionTargetMap;\n            var group = connMap[p.connection.id];\n            if (group) {\n                var list = group.connections[p.index === 0 ? \"source\" : \"target\"];\n                var idx = list.indexOf(p.connection);\n                if (idx != -1) {\n                    list.splice(idx, 1);\n                }\n            }\n        });\n\n        this.addGroup = function(group) {\n            _jsPlumb.addClass(group.el, GROUP_EXPANDED_CLASS);\n            _managedGroups[group.id] = group;\n            group.manager = this;\n            _updateConnectionsForGroup(group);\n            _jsPlumb.fire(EVT_GROUP_ADDED, { group:group });\n        };\n\n        this.addToGroup = function(group, el, doNotFireEvent) {\n            group = this.getGroup(group);\n            if (group) {\n                group.add(el, doNotFireEvent);\n            }\n        };\n\n        this.removeFromGroup = function(group, el, doNotFireEvent) {\n            group = this.getGroup(group);\n            if (group) {\n                group.remove(el, null, doNotFireEvent);\n            }\n        };\n\n        this.getGroup = function(groupId) {\n            var group = groupId;\n            if (_ju.isString(groupId)) {\n                group = _managedGroups[groupId];\n                if (group == null) throw new TypeError(\"No such group [\" + groupId + \"]\");\n            }\n            return group;\n        };\n\n        this.getGroups = function() {\n            var o = [];\n            for (var g in _managedGroups) {\n                o.push(_managedGroups[g]);\n            }\n            return o;\n        };\n\n        this.removeGroup = function(group, deleteMembers) {\n            group = this.getGroup(group);\n            this.expandGroup(group, true); // this reinstates any original connections and removes all proxies, but does not fire an event.\n            group[deleteMembers ? \"removeAll\" : \"orphanAll\"]();\n            _jsPlumb.remove(group.getEl());\n            delete _managedGroups[group.id];\n            delete _jsPlumb._groups[group.id];\n            _jsPlumb.fire(EVT_GROUP_REMOVED, { group:group });\n        };\n\n        this.removeAllGroups = function(deleteMembers) {\n            for (var g in _managedGroups) {\n                this.removeGroup(_managedGroups[g], deleteMembers);\n            }\n        };\n\n        function _setVisible(group, state) {\n            var m = group.getMembers();\n            for (var i = 0; i < m.length; i++) {\n                _jsPlumb[state ? \"show\" : \"hide\"](m[i], true);\n            }\n        }\n\n        var _collapseConnection = this.collapseConnection = function(c, index, group) {\n\n            var proxyEp, groupEl = group.getEl(), groupElId = _jsPlumb.getId(groupEl),\n                originalElementId = c.endpoints[index].elementId;\n\n            var otherEl = c.endpoints[index === 0 ? 1 : 0].element;\n            if (otherEl[GROUP] && (!otherEl[GROUP].shouldProxy() && otherEl[GROUP].collapsed)) {\n                return;\n            }\n\n            c.proxies = c.proxies || [];\n            if(c.proxies[index]) {\n                proxyEp = c.proxies[index].ep;\n            }else {\n                proxyEp = _jsPlumb.addEndpoint(groupEl, {\n                    endpoint:group.getEndpoint(c, index),\n                    anchor:group.getAnchor(c, index),\n                    parameters:{\n                        isProxyEndpoint:true\n                    }\n                });\n                proxyEp._forceDeleteOnDetach = true;\n            }\n            // for this index, stash proxy info: the new EP, the original EP.\n            c.proxies[index] = { ep:proxyEp, originalEp: c.endpoints[index] };\n\n            // and advise the anchor manager\n            if (index === 0) {\n                // TODO why are there two differently named methods? Why is there not one method that says \"some end of this\n                // connection changed (you give the index), and here's the new element and element id.\"\n                _jsPlumb.anchorManager.sourceChanged(originalElementId, groupElId, c, groupEl);\n            }\n            else {\n                _jsPlumb.anchorManager.updateOtherEndpoint(c.endpoints[0].elementId, originalElementId, groupElId, c);\n                c.target = groupEl;\n                c.targetId = groupElId;\n            }\n\n\n            // detach the original EP from the connection.\n            c.proxies[index].originalEp.detachFromConnection(c, null, true);\n\n            // set the proxy as the new ep\n            proxyEp.connections = [ c ];\n            c.endpoints[index] = proxyEp;\n\n            c.setVisible(true);\n        };\n\n        this.collapseGroup = function(group) {\n            group = this.getGroup(group);\n            if (group == null || group.collapsed) return;\n            var groupEl = group.getEl();\n\n            // todo remove old proxy endpoints first, just in case?\n            //group.proxies.length = 0;\n\n            // hide all connections\n            _setVisible(group, false);\n\n            if (group.shouldProxy()) {\n                // collapses all connections in a group.\n                var _collapseSet = function (conns, index) {\n                    for (var i = 0; i < conns.length; i++) {\n                        var c = conns[i];\n                        _collapseConnection(c, index, group);\n                    }\n                };\n\n                // setup proxies for sources and targets\n                _collapseSet(group.connections.source, 0);\n                _collapseSet(group.connections.target, 1);\n            }\n\n            group.collapsed = true;\n            _jsPlumb.removeClass(groupEl, GROUP_EXPANDED_CLASS);\n            _jsPlumb.addClass(groupEl, GROUP_COLLAPSED_CLASS);\n            _jsPlumb.revalidate(groupEl);\n            _jsPlumb.fire(EVT_COLLAPSE, { group:group  });\n        };\n\n        var _expandConnection = this.expandConnection = function(c, index, group) {\n\n            // if no proxies or none for this end of the connection, abort.\n            if (c.proxies == null || c.proxies[index] == null) return;\n\n            var groupElId = _jsPlumb.getId(group.getEl()),\n                originalElement = c.proxies[index].originalEp.element,\n                originalElementId = c.proxies[index].originalEp.elementId;\n\n            c.endpoints[index] = c.proxies[index].originalEp;\n            // and advise the anchor manager\n            if (index === 0) {\n                // TODO why are there two differently named methods? Why is there not one method that says \"some end of this\n                // connection changed (you give the index), and here's the new element and element id.\"\n                _jsPlumb.anchorManager.sourceChanged(groupElId, originalElementId, c, originalElement);\n            }\n            else {\n                _jsPlumb.anchorManager.updateOtherEndpoint(c.endpoints[0].elementId, groupElId, originalElementId, c);\n                c.target = originalElement;\n                c.targetId = originalElementId;\n            }\n\n            // detach the proxy EP from the connection.\n            c.proxies[index].ep.detachFromConnection(c, null, true);\n\n\n            c.proxies[index].originalEp.addConnection(c);\n\n            // cleanup\n            delete c.proxies[index];\n        };\n\n        this.expandGroup = function(group, doNotFireEvent) {\n\n            group = this.getGroup(group);\n\n            if (group == null || !group.collapsed) return;\n            var groupEl = group.getEl();\n\n            _setVisible(group, true);\n\n            if (group.shouldProxy()) {\n                // collapses all connections in a group.\n                var _expandSet = function (conns, index) {\n                    for (var i = 0; i < conns.length; i++) {\n                        var c = conns[i];\n                        _expandConnection(c, index, group);\n                    }\n                };\n\n                // setup proxies for sources and targets\n                _expandSet(group.connections.source, 0);\n                _expandSet(group.connections.target, 1);\n            }\n\n            group.collapsed = false;\n            _jsPlumb.addClass(groupEl, GROUP_EXPANDED_CLASS);\n            _jsPlumb.removeClass(groupEl, GROUP_COLLAPSED_CLASS);\n            _jsPlumb.revalidate(groupEl);\n            this.repaintGroup(group);\n            if (!doNotFireEvent) {\n                _jsPlumb.fire(EVT_EXPAND, { group: group});\n            }\n        };\n\n        this.repaintGroup = function(group) {\n            group = this.getGroup(group);\n            var m = group.getMembers();\n            for (var i = 0; i < m.length; i++) {\n                _jsPlumb.revalidate(m[i]);\n            }\n        };\n\n        // TODO refactor this with the code that responds to `connection` events.\n        function _updateConnectionsForGroup(group) {\n            var members = group.getMembers();\n            var c1 = _jsPlumb.getConnections({source:members}, true);\n            var c2 = _jsPlumb.getConnections({target:members}, true);\n            var processed = {};\n            group.connections.source.length = 0;\n            group.connections.target.length = 0;\n            var oneSet = function(c) {\n                for (var i = 0; i < c.length; i++) {\n                    if (processed[c[i].id]) continue;\n                    processed[c[i].id] = true;\n                    if (c[i].source._jsPlumbGroup === group) {\n                        if (c[i].target._jsPlumbGroup !== group) {\n                            group.connections.source.push(c[i]);\n                        }\n                        _connectionSourceMap[c[i].id] = group;\n                    }\n                    else if (c[i].target._jsPlumbGroup === group) {\n                        group.connections.target.push(c[i]);\n                        _connectionTargetMap[c[i].id] = group;\n                    }\n                }\n            };\n            oneSet(c1); oneSet(c2);\n        }\n\n        this.updateConnectionsForGroup = _updateConnectionsForGroup;\n        this.refreshAllGroups = function() {\n            for (var g in _managedGroups) {\n                _updateConnectionsForGroup(_managedGroups[g]);\n                _jsPlumb.dragManager.updateOffsets(_jsPlumb.getId(_managedGroups[g].getEl()));\n            }\n        };\n    };\n\n    /**\n     *\n     * @param {jsPlumbInstance} _jsPlumb Associated jsPlumb instance.\n     * @param {Object} params\n     * @param {Element} params.el The DOM element representing the Group.\n     * @param {String} [params.id] Optional ID for the Group. A UUID will be assigned as the Group's ID if you do not provide one.\n     * @param {Boolean} [params.constrain=false] If true, child elements will not be able to be dragged outside of the Group container.\n     * @param {Boolean} [params.revert=true] By default, child elements revert to the container if dragged outside. You can change this by setting `revert:false`. This behaviour is also overridden if you set `orphan` or `prune`.\n     * @param {Boolean} [params.orphan=false] If true, child elements dropped outside of the Group container will be removed from the Group (but not from the DOM).\n     * @param {Boolean} [params.prune=false] If true, child elements dropped outside of the Group container will be removed from the Group and also from the DOM.\n     * @param {Boolean} [params.dropOverride=false] If true, a child element that has been dropped onto some other Group will not be subject to the controls imposed by `prune`, `revert` or `orphan`.\n     * @constructor\n     */\n    var Group = function(_jsPlumb, params) {\n        var self = this;\n        var el = params.el;\n        this.getEl = function() { return el; };\n        this.id = params.id || _ju.uuid();\n        el._isJsPlumbGroup = true;\n        var da = _jsPlumb.getSelector(el, GROUP_CONTAINER_SELECTOR);\n        var dragArea = da && da.length > 0 ? da[0] : el;\n        var ghost = params.ghost === true;\n        var constrain = ghost || (params.constrain === true);\n        var revert = params.revert !== false;\n        var orphan = params.orphan === true;\n        var prune = params.prune === true;\n        var dropOverride = params.dropOverride === true;\n        var proxied = params.proxied !== false;\n        var elements = [];\n        this.connections = { source:[], target:[], internal:[] };\n\n        // this function, and getEndpoint below, are stubs for a future setup in which we can choose endpoint\n        // and anchor based upon the connection and the index (source/target) of the endpoint to be proxied.\n        this.getAnchor = function(conn, endpointIndex) {\n            return params.anchor || \"Continuous\";\n        };\n\n        this.getEndpoint = function(conn, endpointIndex) {\n            return params.endpoint || [ \"Dot\", { radius:10 }];\n        };\n\n        this.collapsed = false;\n        if (params.draggable !== false) {\n            var opts = {\n                stop:function(params) {\n                    _jsPlumb.fire(\"groupDragStop\", jsPlumb.extend(params, {group:self}));\n                },\n                scope:GROUP_DRAG_SCOPE\n            };\n            if (params.dragOptions) {\n                root.jsPlumb.extend(opts, params.dragOptions);\n            }\n            _jsPlumb.draggable(params.el, opts);\n        }\n        if (params.droppable !== false) {\n            _jsPlumb.droppable(params.el, {\n                drop:function(p) {\n                    var groupManager = _jsPlumb.getGroupManager();\n                    var _el = p.drag.el;\n                    if (_el._isJsPlumbGroup) return;\n                    var currentGroup = _el._jsPlumbGroup;\n                    // if already a member of this group, do nothing\n                    if (currentGroup !== self) {\n                        var elpos = _jsPlumb.getOffset(_el, true);\n                        var cpos = self.collapsed ? _jsPlumb.getOffset(el, true) : _jsPlumb.getOffset(dragArea, true);\n\n                        // otherwise, transfer to this group.\n                        if (currentGroup != null) {\n                            if (currentGroup.overrideDrop(_el, self)) {\n                                return;\n                            }\n                            currentGroup.remove(_el, true);\n                            groupManager.updateConnectionsForGroup(currentGroup);\n                        }\n                        self.add(_el, true);\n\n                        var handleDroppedConnections = function(list, index) {\n                            var oidx = index == 0 ? 1 : 0;\n                            list.each(function(c) {\n                                c.setVisible(false);\n                                if (c.endpoints[oidx].element._jsPlumbGroup === self) {\n                                    c.endpoints[oidx].setVisible(false);\n                                    groupManager.expandConnection(c, oidx, self);\n                                }\n                                else {\n                                    c.endpoints[index].setVisible(false);\n                                    groupManager.collapseConnection(c, index, self);\n                                }\n                            });\n                        };\n\n                        if (self.collapsed) {\n                            handleDroppedConnections(_jsPlumb.select({source: _el}), 0);\n                            handleDroppedConnections(_jsPlumb.select({target: _el}), 1);\n                        }\n\n                        var elId = _jsPlumb.getId(_el);\n                        _jsPlumb.dragManager.setParent(_el, elId, el, _jsPlumb.getId(el), elpos);\n                        _jsPlumb.setPosition(_el, {left:elpos.left - cpos.left, top:elpos.top - cpos.top});\n                        _jsPlumb.dragManager.revalidateParent(_el, elId, elpos);\n\n                        groupManager.updateConnectionsForGroup(self);\n\n                        setTimeout(function() {\n                            _jsPlumb.fire(EVT_CHILD_ADDED, {group: self, el: _el});\n                        }, 0);\n                    }\n                }\n            });\n        }\n        var _each = function(_el, fn) {\n            var els = _el.nodeType == null ?  _el : [ _el ];\n            for (var i = 0; i < els.length; i++) {\n                fn(els[i]);\n            }\n        };\n\n        this.overrideDrop = function(_el, targetGroup) {\n            return dropOverride && (revert || prune || orphan);\n        };\n\n        this.add = function(_el, doNotFireEvent) {\n            _each(_el, function(__el) {\n                __el._jsPlumbGroup = self;\n                elements.push(__el);\n                // test if draggable and add handlers if so.\n                if (_jsPlumb.isAlreadyDraggable(__el)) {\n                    _bindDragHandlers(__el);\n                }\n\n                if (__el.parentNode != dragArea) {\n                    dragArea.appendChild(__el);\n                }\n\n                if (!doNotFireEvent) {\n                    _jsPlumb.fire(EVT_CHILD_ADDED, {group: self, el: __el});\n                }\n            });\n        };\n        this.remove = function(el, manipulateDOM, doNotFireEvent) {\n            _each(el, function(__el) {\n                delete __el._jsPlumbGroup;\n                _ju.removeWithFunction(elements, function(e) {\n                    return e === __el;\n                });\n                if (manipulateDOM) {\n                    try { self.getEl().removeChild(__el); }\n                    catch (e) {\n                        jsPlumbUtil.log(\"Could not remove element from Group \" + e);\n                    }\n                }\n                _unbindDragHandlers(__el);\n                if (!doNotFireEvent) {\n                    _jsPlumb.fire(EVT_CHILD_REMOVED, {group: self, el: __el});\n                }\n            });\n        };\n        this.removeAll = function() {\n            for (var i = 0; i < elements.length; i++) {\n                _jsPlumb.remove(elements[i]);\n            }\n            elements.length = 0;\n        };\n        this.orphanAll = function() {\n            for (var i = 0; i < elements.length; i++) {\n                _orphan(elements[i]);\n            }\n            elements.length = 0;\n        };\n        this.getMembers = function() { return elements; };\n\n        el[GROUP] = this;\n\n        _jsPlumb.bind(ELEMENT_DRAGGABLE_EVENT, function(dragParams) {\n            // if its for the current group,\n            if (dragParams.el._jsPlumbGroup == this) {\n                _bindDragHandlers(dragParams.el);\n            }\n        }.bind(this));\n\n        function _findParent(_el) {\n            return _el.offsetParent;\n        }\n\n        function _isInsideParent(_el, pos) {\n            var p = _findParent(_el),\n                s = _jsPlumb.getSize(p),\n                ss = _jsPlumb.getSize(_el),\n                leftEdge = pos[0],\n                rightEdge = leftEdge + ss[0],\n                topEdge = pos[1],\n                bottomEdge = topEdge + ss[1];\n\n            return rightEdge > 0 && leftEdge < s[0] && bottomEdge > 0 && topEdge < s[1];\n        }\n\n        //\n        // orphaning an element means taking it out of the group and adding it to the main jsplumb container.\n        //\n        function _orphan(_el) {\n            var id = _jsPlumb.getId(_el);\n            var pos = _jsPlumb.getOffset(_el);\n            _el.parentNode.removeChild(_el);\n            _jsPlumb.getContainer().appendChild(_el);\n            _jsPlumb.setPosition(_el, pos);\n            delete _el._jsPlumbGroup;\n            _unbindDragHandlers(_el);\n            _jsPlumb.dragManager.clearParent(_el, id);\n        }\n\n        //\n        // remove an element from the group, then either prune it from the jsplumb instance, or just orphan it.\n        //\n        function _pruneOrOrphan(p) {\n            if (!_isInsideParent(p.el, p.pos)) {\n                p.el._jsPlumbGroup.remove(p.el);\n                if (prune) {\n                    _jsPlumb.remove(p.el);\n                } else {\n                    _orphan(p.el);\n                }\n            }\n        }\n\n        //\n        // redraws the element\n        //\n        function _revalidate(_el) {\n            var id = _jsPlumb.getId(_el);\n            _jsPlumb.revalidate(_el);\n            _jsPlumb.dragManager.revalidateParent(_el, id);\n        }\n\n        //\n        // unbind the group specific drag/revert handlers.\n        //\n        function _unbindDragHandlers(_el) {\n            if (prune || orphan) {\n                _el._katavorioDrag.off(STOP, _pruneOrOrphan);\n            }\n            if (!prune && !orphan && revert) {\n                _el._katavorioDrag.off(REVERT, _revalidate);\n                _el._katavorioDrag.setRevert(null);\n            }\n        }\n\n        function _bindDragHandlers(_el) {\n            if (prune || orphan) {\n                _el._katavorioDrag.on(STOP, _pruneOrOrphan);\n            }\n\n            if (constrain) {\n                _el._katavorioDrag.setConstrain(true);\n            }\n\n            if (ghost) {\n                _el._katavorioDrag.setUseGhostProxy(true);\n            }\n\n            if (!prune && !orphan && revert) {\n                _el._katavorioDrag.on(REVERT, _revalidate);\n                _el._katavorioDrag.setRevert(function(__el, pos) {\n                    return !_isInsideParent(__el, pos);\n                });\n            }\n        }\n\n        this.shouldProxy = function() {\n            return proxied;\n        };\n\n        _jsPlumb.getGroupManager().addGroup(this);\n    };\n\n    /**\n     * Adds a group to the jsPlumb instance.\n     * @method addGroup\n     * @param {Object} params\n     * @return {Group} The newly created Group.\n     */\n    _jpi.prototype.addGroup = function(params) {\n        var j = this;\n        j._groups = j._groups || {};\n        if (j._groups[params.id] != null) {\n            throw new TypeError(\"cannot create Group [\" + params.id + \"]; a Group with that ID exists\");\n        }\n        if (params.el[GROUP] != null) {\n            throw new TypeError(\"cannot create Group [\" + params.id + \"]; the given element is already a Group\");\n        }\n        var group = new Group(j, params);\n        j._groups[group.id] = group;\n        return group;\n    };\n\n    /**\n     * Add an element to a group.\n     * @method addToGroup\n     * @param {String} group Group, or ID of the group, to add the element to.\n     * @param {Element} el Element to add to the group.\n     */\n    _jpi.prototype.addToGroup = function(group, el, doNotFireEvent) {\n        this.getGroupManager().addToGroup(group, el, doNotFireEvent);\n    };\n\n    /**\n     * Remove an element from a group.\n     * @method removeFromGroup\n     * @param {String} group Group, or ID of the group, to remove the element from.\n     * @param {Element} el Element to add to the group.\n     */\n    _jpi.prototype.removeFromGroup = function(group, el, doNotFireEvent) {\n        this.getGroupManager().removeFromGroup(group, el, doNotFireEvent);\n    };\n\n    /**\n     * Remove a group, and optionally remove its members from the jsPlumb instance.\n     * @method removeGroup\n     * @param {String|Group} group Group to delete, or ID of Grrup to delete.\n     * @param {Boolean} [deleteMembers=false] If true, group members will be removed along with the group. Otherwise they will\n     * just be 'orphaned' (returned to the main container).\n     */\n    _jpi.prototype.removeGroup = function(group, deleteMembers) {\n        this.getGroupManager().removeGroup(group, deleteMembers);\n    };\n\n    /**\n     * Remove all groups, and optionally remove their members from the jsPlumb instance.\n     * @method removeAllGroup\n     * @param {Boolean} [deleteMembers=false] If true, group members will be removed along with the groups. Otherwise they will\n     * just be 'orphaned' (returned to the main container).\n     */\n    _jpi.prototype.removeAllGroups = function(deleteMembers) {\n        this.getGroupManager().removeAllGroups(deleteMembers);\n    };\n\n    /**\n     * Get a Group\n     * @method getGroup\n     * @param {String} groupId ID of the group to get\n     * @return {Group} Group with the given ID, null if not found.\n     */\n    _jpi.prototype.getGroup = function(groupId) {\n        return this.getGroupManager().getGroup(groupId);\n    };\n\n    /**\n     * Gets all the Groups managed by the jsPlumb instance.\n     * @returns {Group[]} List of Groups. Empty if none.\n     */\n    _jpi.prototype.getGroups = function() {\n        return this.getGroupManager().getGroups();\n    };\n\n    /**\n     * Expands a group element. jsPlumb doesn't do \"everything\" for you here, because what it means to expand a Group\n     * will vary from application to application. jsPlumb does these things:\n     *\n     * - Hides any connections that are internal to the group (connections between members, and connections from member of\n     * the group to the group itself)\n     * - Proxies all connections for which the source or target is a member of the group.\n     * - Hides the proxied connections.\n     * - Adds the jsplumb-group-expanded class to the group's element\n     * - Removes the jsplumb-group-collapsed class from the group's element.\n     *\n     * @method expandGroup\n     * @param {String|Group} group Group to expand, or ID of Group to expand.\n     */\n    _jpi.prototype.expandGroup = function(group) {\n        this.getGroupManager().expandGroup(group);\n    };\n\n    /**\n     * Collapses a group element. jsPlumb doesn't do \"everything\" for you here, because what it means to collapse a Group\n     * will vary from application to application. jsPlumb does these things:\n     *\n     * - Shows any connections that are internal to the group (connections between members, and connections from member of\n     * the group to the group itself)\n     * - Removes proxies for all connections for which the source or target is a member of the group.\n     * - Shows the previously proxied connections.\n     * - Adds the jsplumb-group-collapsed class to the group's element\n     * - Removes the jsplumb-group-expanded class from the group's element.\n     *\n     * @method expandGroup\n     * @param {String|Group} group Group to expand, or ID of Group to expand.\n     */\n    _jpi.prototype.collapseGroup = function(groupId) {\n        this.getGroupManager().collapseGroup(groupId);\n    };\n\n\n    _jpi.prototype.repaintGroup = function(group) {\n        this.getGroupManager().repaintGroup(group);\n    };\n\n    /**\n     * Collapses or expands a group element depending on its current state. See notes in the collapseGroup and expandGroup method.\n     *\n     * @method toggleGroup\n     * @param {String|Group} group Group to expand/collapse, or ID of Group to expand/collapse.\n     */\n    _jpi.prototype.toggleGroup = function(group) {\n        group = this.getGroupManager().getGroup(group);\n        if (group != null) {\n            this.getGroupManager()[group.collapsed ? \"expandGroup\" : \"collapseGroup\"](group);\n        }\n    };\n\n    //\n    // lazy init a group manager for the given jsplumb instance.\n    //\n    _jpi.prototype.getGroupManager = function() {\n        var mgr = this[GROUP_MANAGER];\n        if (mgr == null) {\n            mgr = this[GROUP_MANAGER] = new GroupManager(this);\n        }\n        return mgr;\n    };\n\n    _jpi.prototype.removeGroupManager = function() {\n        delete this[GROUP_MANAGER];\n    };\n\n    /**\n     * Gets the Group that the given element belongs to, null if none.\n     * @method getGroupFor\n     * @param {String|Element} el Element, or element ID.\n     * @returns {Group} A Group, if found, or null.\n     */\n    _jpi.prototype.getGroupFor = function(el) {\n        el = this.getElement(el);\n        if (el) {\n            return el[GROUP];\n        }\n    };\n\n}).call(typeof window !== 'undefined' ? window : this);\n\n\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.1.1\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the 'flowchart' connectors, consisting of vertical and horizontal line segments.\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n\n    var Flowchart = function (params) {\n        this.type = \"Flowchart\";\n        params = params || {};\n        params.stub = params.stub == null ? 30 : params.stub;\n        var segments,\n            _super = _jp.Connectors.AbstractConnector.apply(this, arguments),\n            midpoint = params.midpoint == null ? 0.5 : params.midpoint,\n            alwaysRespectStubs = params.alwaysRespectStubs === true,\n            lastx = null, lasty = null, lastOrientation,\n            cornerRadius = params.cornerRadius != null ? params.cornerRadius : 0,\n\n            // TODO now common between this and AbstractBezierEditor; refactor into superclass?\n            loopbackRadius = params.loopbackRadius || 25,\n            isLoopbackCurrently = false,\n\n            sgn = function (n) {\n                return n < 0 ? -1 : n === 0 ? 0 : 1;\n            },\n            /**\n             * helper method to add a segment.\n             */\n            addSegment = function (segments, x, y, paintInfo) {\n                if (lastx == x && lasty == y) return;\n                var lx = lastx == null ? paintInfo.sx : lastx,\n                    ly = lasty == null ? paintInfo.sy : lasty,\n                    o = lx == x ? \"v\" : \"h\",\n                    sgnx = sgn(x - lx),\n                    sgny = sgn(y - ly);\n\n                lastx = x;\n                lasty = y;\n                segments.push([lx, ly, x, y, o, sgnx, sgny]);\n            },\n            segLength = function (s) {\n                return Math.sqrt(Math.pow(s[0] - s[2], 2) + Math.pow(s[1] - s[3], 2));\n            },\n            _cloneArray = function (a) {\n                var _a = [];\n                _a.push.apply(_a, a);\n                return _a;\n            },\n            writeSegments = function (conn, segments, paintInfo) {\n                var current = null, next;\n                for (var i = 0; i < segments.length - 1; i++) {\n\n                    current = current || _cloneArray(segments[i]);\n                    next = _cloneArray(segments[i + 1]);\n                    if (cornerRadius > 0 && current[4] != next[4]) {\n                        var radiusToUse = Math.min(cornerRadius, segLength(current), segLength(next));\n                        // right angle. adjust current segment's end point, and next segment's start point.\n                        current[2] -= current[5] * radiusToUse;\n                        current[3] -= current[6] * radiusToUse;\n                        next[0] += next[5] * radiusToUse;\n                        next[1] += next[6] * radiusToUse;\n                        var ac = (current[6] == next[5] && next[5] == 1) ||\n                                ((current[6] == next[5] && next[5] === 0) && current[5] != next[6]) ||\n                                (current[6] == next[5] && next[5] == -1),\n                            sgny = next[1] > current[3] ? 1 : -1,\n                            sgnx = next[0] > current[2] ? 1 : -1,\n                            sgnEqual = sgny == sgnx,\n                            cx = (sgnEqual && ac || (!sgnEqual && !ac)) ? next[0] : current[2],\n                            cy = (sgnEqual && ac || (!sgnEqual && !ac)) ? current[3] : next[1];\n\n                        _super.addSegment(conn, \"Straight\", {\n                            x1: current[0], y1: current[1], x2: current[2], y2: current[3]\n                        });\n\n                        _super.addSegment(conn, \"Arc\", {\n                            r: radiusToUse,\n                            x1: current[2],\n                            y1: current[3],\n                            x2: next[0],\n                            y2: next[1],\n                            cx: cx,\n                            cy: cy,\n                            ac: ac\n                        });\n                    }\n                    else {\n                        // dx + dy are used to adjust for line width.\n                        var dx = (current[2] == current[0]) ? 0 : (current[2] > current[0]) ? (paintInfo.lw / 2) : -(paintInfo.lw / 2),\n                            dy = (current[3] == current[1]) ? 0 : (current[3] > current[1]) ? (paintInfo.lw / 2) : -(paintInfo.lw / 2);\n                        _super.addSegment(conn, \"Straight\", {\n                            x1: current[0] - dx, y1: current[1] - dy, x2: current[2] + dx, y2: current[3] + dy\n                        });\n                    }\n                    current = next;\n                }\n                if (next != null) {\n                    // last segment\n                    _super.addSegment(conn, \"Straight\", {\n                        x1: next[0], y1: next[1], x2: next[2], y2: next[3]\n                    });\n                }\n            };\n\n        this._compute = function (paintInfo, params) {\n\n            segments = [];\n            lastx = null;\n            lasty = null;\n            lastOrientation = null;\n\n            var commonStubCalculator = function () {\n                return [ paintInfo.startStubX, paintInfo.startStubY, paintInfo.endStubX, paintInfo.endStubY ];\n            },\n                stubCalculators = {\n                    perpendicular: commonStubCalculator,\n                    orthogonal: commonStubCalculator,\n                    opposite: function (axis) {\n                        var pi = paintInfo,\n                            idx = axis == \"x\" ? 0 : 1,\n                            areInProximity = {\n                                \"x\": function () {\n                                    return ( (pi.so[idx] == 1 && (\n                                        ( (pi.startStubX > pi.endStubX) && (pi.tx > pi.startStubX) ) ||\n                                        ( (pi.sx > pi.endStubX) && (pi.tx > pi.sx))))) ||\n\n                                        ( (pi.so[idx] == -1 && (\n                                            ( (pi.startStubX < pi.endStubX) && (pi.tx < pi.startStubX) ) ||\n                                            ( (pi.sx < pi.endStubX) && (pi.tx < pi.sx)))));\n                                },\n                                \"y\": function () {\n                                    return ( (pi.so[idx] == 1 && (\n                                        ( (pi.startStubY > pi.endStubY) && (pi.ty > pi.startStubY) ) ||\n                                        ( (pi.sy > pi.endStubY) && (pi.ty > pi.sy))))) ||\n\n                                        ( (pi.so[idx] == -1 && (\n                                            ( (pi.startStubY < pi.endStubY) && (pi.ty < pi.startStubY) ) ||\n                                            ( (pi.sy < pi.endStubY) && (pi.ty < pi.sy)))));\n                                }\n                            };\n\n                        if (!alwaysRespectStubs && areInProximity[axis]()) {\n                            return {\n                                \"x\": [(paintInfo.sx + paintInfo.tx) / 2, paintInfo.startStubY, (paintInfo.sx + paintInfo.tx) / 2, paintInfo.endStubY],\n                                \"y\": [paintInfo.startStubX, (paintInfo.sy + paintInfo.ty) / 2, paintInfo.endStubX, (paintInfo.sy + paintInfo.ty) / 2]\n                            }[axis];\n                        }\n                        else {\n                            return [ paintInfo.startStubX, paintInfo.startStubY, paintInfo.endStubX, paintInfo.endStubY ];\n                        }\n                    }\n                };\n\n            // calculate Stubs.\n            var stubs = stubCalculators[paintInfo.anchorOrientation](paintInfo.sourceAxis),\n                idx = paintInfo.sourceAxis == \"x\" ? 0 : 1,\n                oidx = paintInfo.sourceAxis == \"x\" ? 1 : 0,\n                ss = stubs[idx],\n                oss = stubs[oidx],\n                es = stubs[idx + 2],\n                oes = stubs[oidx + 2];\n\n            // add the start stub segment. use stubs for loopback as it will look better, with the loop spaced\n            // away from the element.\n            addSegment(segments, stubs[0], stubs[1], paintInfo);\n\n            // if its a loopback and we should treat it differently.\n            if (false &&params.sourcePos[0] == params.targetPos[0] && params.sourcePos[1] == params.targetPos[1]) {\n\n                // we use loopbackRadius here, as statemachine connectors do.\n                // so we go radius to the left from stubs[0], then upwards by 2*radius, to the right by 2*radius,\n                // down by 2*radius, left by radius.\n                addSegment(segments, stubs[0] - loopbackRadius, stubs[1], paintInfo);\n                addSegment(segments, stubs[0] - loopbackRadius, stubs[1] - (2 * loopbackRadius), paintInfo);\n                addSegment(segments, stubs[0] + loopbackRadius, stubs[1] - (2 * loopbackRadius), paintInfo);\n                addSegment(segments, stubs[0] + loopbackRadius, stubs[1], paintInfo);\n                addSegment(segments, stubs[0], stubs[1], paintInfo);\n\n            }\n            else {\n\n\n                var midx = paintInfo.startStubX + ((paintInfo.endStubX - paintInfo.startStubX) * midpoint),\n                    midy = paintInfo.startStubY + ((paintInfo.endStubY - paintInfo.startStubY) * midpoint);\n\n                var orientations = { x: [ 0, 1 ], y: [ 1, 0 ] },\n                    lineCalculators = {\n                        perpendicular: function (axis) {\n                            var pi = paintInfo,\n                                sis = {\n                                    x: [\n                                        [ [ 1, 2, 3, 4 ], null, [ 2, 1, 4, 3 ] ],\n                                        null,\n                                        [ [ 4, 3, 2, 1 ], null, [ 3, 4, 1, 2 ] ]\n                                    ],\n                                    y: [\n                                        [ [ 3, 2, 1, 4 ], null, [ 2, 3, 4, 1 ] ],\n                                        null,\n                                        [ [ 4, 1, 2, 3 ], null, [ 1, 4, 3, 2 ] ]\n                                    ]\n                                },\n                                stubs = {\n                                    x: [ [ pi.startStubX, pi.endStubX ], null, [ pi.endStubX, pi.startStubX ] ],\n                                    y: [ [ pi.startStubY, pi.endStubY ], null, [ pi.endStubY, pi.startStubY ] ]\n                                },\n                                midLines = {\n                                    x: [ [ midx, pi.startStubY ], [ midx, pi.endStubY ] ],\n                                    y: [ [ pi.startStubX, midy ], [ pi.endStubX, midy ] ]\n                                },\n                                linesToEnd = {\n                                    x: [ [ pi.endStubX, pi.startStubY ] ],\n                                    y: [ [ pi.startStubX, pi.endStubY ] ]\n                                },\n                                startToEnd = {\n                                    x: [ [ pi.startStubX, pi.endStubY ], [ pi.endStubX, pi.endStubY ] ],\n                                    y: [ [ pi.endStubX, pi.startStubY ], [ pi.endStubX, pi.endStubY ] ]\n                                },\n                                startToMidToEnd = {\n                                    x: [ [ pi.startStubX, midy ], [ pi.endStubX, midy ], [ pi.endStubX, pi.endStubY ] ],\n                                    y: [ [ midx, pi.startStubY ], [ midx, pi.endStubY ], [ pi.endStubX, pi.endStubY ] ]\n                                },\n                                otherStubs = {\n                                    x: [ pi.startStubY, pi.endStubY ],\n                                    y: [ pi.startStubX, pi.endStubX ]\n                                },\n                                soIdx = orientations[axis][0], toIdx = orientations[axis][1],\n                                _so = pi.so[soIdx] + 1,\n                                _to = pi.to[toIdx] + 1,\n                                otherFlipped = (pi.to[toIdx] == -1 && (otherStubs[axis][1] < otherStubs[axis][0])) || (pi.to[toIdx] == 1 && (otherStubs[axis][1] > otherStubs[axis][0])),\n                                stub1 = stubs[axis][_so][0],\n                                stub2 = stubs[axis][_so][1],\n                                segmentIndexes = sis[axis][_so][_to];\n\n                            if (pi.segment == segmentIndexes[3] || (pi.segment == segmentIndexes[2] && otherFlipped)) {\n                                return midLines[axis];\n                            }\n                            else if (pi.segment == segmentIndexes[2] && stub2 < stub1) {\n                                return linesToEnd[axis];\n                            }\n                            else if ((pi.segment == segmentIndexes[2] && stub2 >= stub1) || (pi.segment == segmentIndexes[1] && !otherFlipped)) {\n                                return startToMidToEnd[axis];\n                            }\n                            else if (pi.segment == segmentIndexes[0] || (pi.segment == segmentIndexes[1] && otherFlipped)) {\n                                return startToEnd[axis];\n                            }\n                        },\n                        orthogonal: function (axis, startStub, otherStartStub, endStub, otherEndStub) {\n                            var pi = paintInfo,\n                                extent = {\n                                    \"x\": pi.so[0] == -1 ? Math.min(startStub, endStub) : Math.max(startStub, endStub),\n                                    \"y\": pi.so[1] == -1 ? Math.min(startStub, endStub) : Math.max(startStub, endStub)\n                                }[axis];\n\n                            return {\n                                \"x\": [\n                                    [ extent, otherStartStub ],\n                                    [ extent, otherEndStub ],\n                                    [ endStub, otherEndStub ]\n                                ],\n                                \"y\": [\n                                    [ otherStartStub, extent ],\n                                    [ otherEndStub, extent ],\n                                    [ otherEndStub, endStub ]\n                                ]\n                            }[axis];\n                        },\n                        opposite: function (axis, ss, oss, es) {\n                            var pi = paintInfo,\n                                otherAxis = {\"x\": \"y\", \"y\": \"x\"}[axis],\n                                dim = {\"x\": \"height\", \"y\": \"width\"}[axis],\n                                comparator = pi[\"is\" + axis.toUpperCase() + \"GreaterThanStubTimes2\"];\n\n                            if (params.sourceEndpoint.elementId == params.targetEndpoint.elementId) {\n                                var _val = oss + ((1 - params.sourceEndpoint.anchor[otherAxis]) * params.sourceInfo[dim]) + _super.maxStub;\n                                return {\n                                    \"x\": [\n                                        [ ss, _val ],\n                                        [ es, _val ]\n                                    ],\n                                    \"y\": [\n                                        [ _val, ss ],\n                                        [ _val, es ]\n                                    ]\n                                }[axis];\n\n                            }\n                            else if (!comparator || (pi.so[idx] == 1 && ss > es) || (pi.so[idx] == -1 && ss < es)) {\n                                return {\n                                    \"x\": [\n                                        [ ss, midy ],\n                                        [ es, midy ]\n                                    ],\n                                    \"y\": [\n                                        [ midx, ss ],\n                                        [ midx, es ]\n                                    ]\n                                }[axis];\n                            }\n                            else if ((pi.so[idx] == 1 && ss < es) || (pi.so[idx] == -1 && ss > es)) {\n                                return {\n                                    \"x\": [\n                                        [ midx, pi.sy ],\n                                        [ midx, pi.ty ]\n                                    ],\n                                    \"y\": [\n                                        [ pi.sx, midy ],\n                                        [ pi.tx, midy ]\n                                    ]\n                                }[axis];\n                            }\n                        }\n                    };\n\n                // compute the rest of the line\n                var p = lineCalculators[paintInfo.anchorOrientation](paintInfo.sourceAxis, ss, oss, es, oes);\n                if (p) {\n                    for (var i = 0; i < p.length; i++) {\n                        addSegment(segments, p[i][0], p[i][1], paintInfo);\n                    }\n                }\n\n                // line to end stub\n                addSegment(segments, stubs[2], stubs[3], paintInfo);\n\n            }\n\n            // end stub to end (common)\n            addSegment(segments, paintInfo.tx, paintInfo.ty, paintInfo);\n\n            // write out the segments.\n            writeSegments(this, segments, paintInfo);\n        };\n\n        /*this.getPath = function () {\n            var _last = null, _lastAxis = null, s = [], segs = segments;\n            for (var i = 0; i < segs.length; i++) {\n                var seg = segs[i], axis = seg[4], axisIndex = (axis == \"v\" ? 3 : 2);\n                if (_last != null && _lastAxis === axis) {\n                    _last[axisIndex] = seg[axisIndex];\n                }\n                else {\n                    if (seg[0] != seg[2] || seg[1] != seg[3]) {\n                        s.push({\n                            start: [ seg[0], seg[1] ],\n                            end: [ seg[2], seg[3] ]\n                        });\n                        _last = seg;\n                        _lastAxis = seg[4];\n                    }\n                }\n            }\n            return s;\n        };*/\n    };\n\n    _ju.extend(Flowchart, _jp.Connectors.AbstractConnector);\n    _jp.registerConnectorType(Flowchart, \"Flowchart\");\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the code for the Bezier connector type.\n *\n * Copyright (c) 2010 - 2015 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * https://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n\n    _jp.Connectors.AbstractBezierConnector = function(params) {\n        params = params || {};\n        var showLoopback = params.showLoopback !== false,\n            curviness = params.curviness || 10,\n            margin = params.margin || 5,\n            proximityLimit = params.proximityLimit || 80,\n            clockwise = params.orientation && params.orientation === \"clockwise\",\n            loopbackRadius = params.loopbackRadius || 25,\n            isLoopbackCurrently = false,\n            _super;\n\n        this.overrideSetEditable = function() { return !isLoopbackCurrently; };\n\n        this._compute = function (paintInfo, p) {\n\n            var sp = p.sourcePos,\n                tp = p.targetPos,\n                _w = Math.abs(sp[0] - tp[0]),\n                _h = Math.abs(sp[1] - tp[1]);\n\n            if (!showLoopback || (p.sourceEndpoint.elementId !== p.targetEndpoint.elementId)) {\n                isLoopbackCurrently = false;\n                this._computeBezier(paintInfo, p, sp, tp, _w, _h);\n            } else {\n                isLoopbackCurrently = true;\n                // a loopback connector.  draw an arc from one anchor to the other.\n                var x1 = p.sourcePos[0], y1 = p.sourcePos[1] - margin,\n                    cx = x1, cy = y1 - loopbackRadius,\n                // canvas sizing stuff, to ensure the whole painted area is visible.\n                    _x = cx - loopbackRadius,\n                    _y = cy - loopbackRadius;\n\n                _w = 2 * loopbackRadius;\n                _h = 2 * loopbackRadius;\n\n                paintInfo.points[0] = _x;\n                paintInfo.points[1] = _y;\n                paintInfo.points[2] = _w;\n                paintInfo.points[3] = _h;\n\n                // ADD AN ARC SEGMENT.\n                _super.addSegment(this, \"Arc\", {\n                    loopback: true,\n                    x1: (x1 - _x) + 4,\n                    y1: y1 - _y,\n                    startAngle: 0,\n                    endAngle: 2 * Math.PI,\n                    r: loopbackRadius,\n                    ac: !clockwise,\n                    x2: (x1 - _x) - 4,\n                    y2: y1 - _y,\n                    cx: cx - _x,\n                    cy: cy - _y\n                });\n            }\n        };\n\n        _super = _jp.Connectors.AbstractConnector.apply(this, arguments);\n        return _super;\n    };\n    _ju.extend(_jp.Connectors.AbstractBezierConnector, _jp.Connectors.AbstractConnector);\n\n    var Bezier = function (params) {\n        params = params || {};\n        this.type = \"Bezier\";\n\n        var _super = _jp.Connectors.AbstractBezierConnector.apply(this, arguments),\n            majorAnchor = params.curviness || 150,\n            minorAnchor = 10;\n\n        this.getCurviness = function () {\n            return majorAnchor;\n        };\n\n        this._findControlPoint = function (point, sourceAnchorPosition, targetAnchorPosition, sourceEndpoint, targetEndpoint, soo, too) {\n            // determine if the two anchors are perpendicular to each other in their orientation.  we swap the control\n            // points around if so (code could be tightened up)\n            var perpendicular = soo[0] != too[0] || soo[1] == too[1],\n                p = [];\n\n            if (!perpendicular) {\n                if (soo[0] === 0) // X\n                    p.push(sourceAnchorPosition[0] < targetAnchorPosition[0] ? point[0] + minorAnchor : point[0] - minorAnchor);\n                else p.push(point[0] - (majorAnchor * soo[0]));\n\n                if (soo[1] === 0) // Y\n                    p.push(sourceAnchorPosition[1] < targetAnchorPosition[1] ? point[1] + minorAnchor : point[1] - minorAnchor);\n                else p.push(point[1] + (majorAnchor * too[1]));\n            }\n            else {\n                if (too[0] === 0) // X\n                    p.push(targetAnchorPosition[0] < sourceAnchorPosition[0] ? point[0] + minorAnchor : point[0] - minorAnchor);\n                else p.push(point[0] + (majorAnchor * too[0]));\n\n                if (too[1] === 0) // Y\n                    p.push(targetAnchorPosition[1] < sourceAnchorPosition[1] ? point[1] + minorAnchor : point[1] - minorAnchor);\n                else p.push(point[1] + (majorAnchor * soo[1]));\n            }\n\n            return p;\n        };\n\n        this._computeBezier = function (paintInfo, p, sp, tp, _w, _h) {\n\n            var geometry = this.getGeometry(), _CP, _CP2,\n                _sx = sp[0] < tp[0] ? _w : 0,\n                _sy = sp[1] < tp[1] ? _h : 0,\n                _tx = sp[0] < tp[0] ? 0 : _w,\n                _ty = sp[1] < tp[1] ? 0 : _h;\n\n            if ((this.hasBeenEdited() || this.isEditing()) && geometry != null && geometry.controlPoints != null && geometry.controlPoints[0] != null && geometry.controlPoints[1] != null) {\n                _CP = geometry.controlPoints[0];\n                _CP2 = geometry.controlPoints[1];\n            }\n            else {\n                _CP = this._findControlPoint([_sx, _sy], sp, tp, p.sourceEndpoint, p.targetEndpoint, paintInfo.so, paintInfo.to);\n                _CP2 = this._findControlPoint([_tx, _ty], tp, sp, p.targetEndpoint, p.sourceEndpoint, paintInfo.to, paintInfo.so);\n            }\n\n            _super.setGeometry({controlPoints:[_CP, _CP2]}, true);\n\n            _super.addSegment(this, \"Bezier\", {\n                x1: _sx, y1: _sy, x2: _tx, y2: _ty,\n                cp1x: _CP[0], cp1y: _CP[1], cp2x: _CP2[0], cp2y: _CP2[1]\n            });\n        };\n\n\n    };\n\n    _ju.extend(Bezier, _jp.Connectors.AbstractBezierConnector);\n    _jp.registerConnectorType(Bezier, \"Bezier\");\n\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * This file contains the state machine connectors, which extend AbstractBezierConnector.\n *\n * Copyright (c) 2010 - 2015 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * https://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n\n    var _segment = function (x1, y1, x2, y2) {\n            if (x1 <= x2 && y2 <= y1) return 1;\n            else if (x1 <= x2 && y1 <= y2) return 2;\n            else if (x2 <= x1 && y2 >= y1) return 3;\n            return 4;\n        },\n\n    // the control point we will use depends on the faces to which each end of the connection is assigned, specifically whether or not the\n    // two faces are parallel or perpendicular.  if they are parallel then the control point lies on the midpoint of the axis in which they\n    // are parellel and varies only in the other axis; this variation is proportional to the distance that the anchor points lie from the\n    // center of that face.  if the two faces are perpendicular then the control point is at some distance from both the midpoints; the amount and\n    // direction are dependent on the orientation of the two elements. 'seg', passed in to this method, tells you which segment the target element\n    // lies in with respect to the source: 1 is top right, 2 is bottom right, 3 is bottom left, 4 is top left.\n    //\n    // sourcePos and targetPos are arrays of info about where on the source and target each anchor is located.  their contents are:\n    //\n    // 0 - absolute x\n    // 1 - absolute y\n    // 2 - proportional x in element (0 is left edge, 1 is right edge)\n    // 3 - proportional y in element (0 is top edge, 1 is bottom edge)\n    //\n        _findControlPoint = function (midx, midy, segment, sourceEdge, targetEdge, dx, dy, distance, proximityLimit) {\n            // TODO (maybe)\n            // - if anchor pos is 0.5, make the control point take into account the relative position of the elements.\n            if (distance <= proximityLimit) return [midx, midy];\n\n            if (segment === 1) {\n                if (sourceEdge[3] <= 0 && targetEdge[3] >= 1) return [ midx + (sourceEdge[2] < 0.5 ? -1 * dx : dx), midy ];\n                else if (sourceEdge[2] >= 1 && targetEdge[2] <= 0) return [ midx, midy + (sourceEdge[3] < 0.5 ? -1 * dy : dy) ];\n                else return [ midx + (-1 * dx) , midy + (-1 * dy) ];\n            }\n            else if (segment === 2) {\n                if (sourceEdge[3] >= 1 && targetEdge[3] <= 0) return [ midx + (sourceEdge[2] < 0.5 ? -1 * dx : dx), midy ];\n                else if (sourceEdge[2] >= 1 && targetEdge[2] <= 0) return [ midx, midy + (sourceEdge[3] < 0.5 ? -1 * dy : dy) ];\n                else return [ midx + dx, midy + (-1 * dy) ];\n            }\n            else if (segment === 3) {\n                if (sourceEdge[3] >= 1 && targetEdge[3] <= 0) return [ midx + (sourceEdge[2] < 0.5 ? -1 * dx : dx), midy ];\n                else if (sourceEdge[2] <= 0 && targetEdge[2] >= 1) return [ midx, midy + (sourceEdge[3] < 0.5 ? -1 * dy : dy) ];\n                else return [ midx + (-1 * dx) , midy + (-1 * dy) ];\n            }\n            else if (segment === 4) {\n                if (sourceEdge[3] <= 0 && targetEdge[3] >= 1) return [ midx + (sourceEdge[2] < 0.5 ? -1 * dx : dx), midy ];\n                else if (sourceEdge[2] <= 0 && targetEdge[2] >= 1) return [ midx, midy + (sourceEdge[3] < 0.5 ? -1 * dy : dy) ];\n                else return [ midx + dx , midy + (-1 * dy) ];\n            }\n\n        };\n\n    var StateMachine = function (params) {\n        params = params || {};\n        this.type = \"StateMachine\";\n\n        var _super = _jp.Connectors.AbstractBezierConnector.apply(this, arguments),\n            curviness = params.curviness || 10,\n            margin = params.margin || 5,\n            proximityLimit = params.proximityLimit || 80,\n            clockwise = params.orientation && params.orientation === \"clockwise\",\n            _controlPoint;\n\n        this._computeBezier = function(paintInfo, params, sp, tp, w, h) {\n            var _sx = params.sourcePos[0] < params.targetPos[0] ? 0 : w,\n                _sy = params.sourcePos[1] < params.targetPos[1] ? 0 : h,\n                _tx = params.sourcePos[0] < params.targetPos[0] ? w : 0,\n                _ty = params.sourcePos[1] < params.targetPos[1] ? h : 0;\n\n            // now adjust for the margin\n            if (params.sourcePos[2] === 0) _sx -= margin;\n            if (params.sourcePos[2] === 1) _sx += margin;\n            if (params.sourcePos[3] === 0) _sy -= margin;\n            if (params.sourcePos[3] === 1) _sy += margin;\n            if (params.targetPos[2] === 0) _tx -= margin;\n            if (params.targetPos[2] === 1) _tx += margin;\n            if (params.targetPos[3] === 0) _ty -= margin;\n            if (params.targetPos[3] === 1) _ty += margin;\n\n            //\n            // these connectors are quadratic bezier curves, having a single control point. if both anchors\n            // are located at 0.5 on their respective faces, the control point is set to the midpoint and you\n            // get a straight line.  this is also the case if the two anchors are within 'proximityLimit', since\n            // it seems to make good aesthetic sense to do that. outside of that, the control point is positioned\n            // at 'curviness' pixels away along the normal to the straight line connecting the two anchors.\n            //\n            // there may be two improvements to this.  firstly, we might actually support the notion of avoiding nodes\n            // in the UI, or at least making a good effort at doing so.  if a connection would pass underneath some node,\n            // for example, we might increase the distance the control point is away from the midpoint in a bid to\n            // steer it around that node.  this will work within limits, but i think those limits would also be the likely\n            // limits for, once again, aesthetic good sense in the layout of a chart using these connectors.\n            //\n            // the second possible change is actually two possible changes: firstly, it is possible we should gradually\n            // decrease the 'curviness' as the distance between the anchors decreases; start tailing it off to 0 at some\n            // point (which should be configurable).  secondly, we might slightly increase the 'curviness' for connectors\n            // with respect to how far their anchor is from the center of its respective face. this could either look cool,\n            // or stupid, and may indeed work only in a way that is so subtle as to have been a waste of time.\n            //\n\n            var _midx = (_sx + _tx) / 2,\n                _midy = (_sy + _ty) / 2,\n                segment = _segment(_sx, _sy, _tx, _ty),\n                distance = Math.sqrt(Math.pow(_tx - _sx, 2) + Math.pow(_ty - _sy, 2)),\n                cp1x, cp2x, cp1y, cp2y,\n                geometry = _super.getGeometry();\n\n            if ((this.hasBeenEdited() || this.isEditing()) && geometry != null) {\n                cp1x = geometry.controlPoints[0][0];\n                cp1y = geometry.controlPoints[0][1];\n                cp2x = geometry.controlPoints[1][0];\n                cp2y = geometry.controlPoints[1][1];\n            }\n            else {\n                // calculate the control point.  this code will be where we'll put in a rudimentary element avoidance scheme; it\n                // will work by extending the control point to force the curve to be, um, curvier.\n                _controlPoint = _findControlPoint(_midx,\n                    _midy,\n                    segment,\n                    params.sourcePos,\n                    params.targetPos,\n                    curviness, curviness,\n                    distance,\n                    proximityLimit);\n\n                cp1x = _controlPoint[0];\n                cp2x = _controlPoint[0];\n                cp1y = _controlPoint[1];\n                cp2y = _controlPoint[1];\n\n                _super.setGeometry({controlPoints:[_controlPoint, _controlPoint]}, true);\n            }\n\n            _super.addSegment(this, \"Bezier\", {\n                x1: _tx, y1: _ty, x2: _sx, y2: _sy,\n                cp1x: cp1x, cp1y: cp1y,\n                cp2x: cp2x, cp2y: cp2y\n            });\n        };\n    };\n\n    _ju.extend(StateMachine, _jp.Connectors.AbstractBezierConnector);\n    _jp.registerConnectorType(StateMachine, \"StateMachine\");\n\n}).call(typeof window !== 'undefined' ? window : this);\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.1.1\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the SVG renderers.\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n// ************************** SVG utility methods ********************************************    \n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil;\n\n    var svgAttributeMap = {\n            \"stroke-linejoin\": \"stroke-linejoin\",\n            \"stroke-dashoffset\": \"stroke-dashoffset\",\n            \"stroke-linecap\": \"stroke-linecap\"\n        },\n        STROKE_DASHARRAY = \"stroke-dasharray\",\n        DASHSTYLE = \"dashstyle\",\n        LINEAR_GRADIENT = \"linearGradient\",\n        RADIAL_GRADIENT = \"radialGradient\",\n        DEFS = \"defs\",\n        FILL = \"fill\",\n        STOP = \"stop\",\n        STROKE = \"stroke\",\n        STROKE_WIDTH = \"stroke-width\",\n        STYLE = \"style\",\n        NONE = \"none\",\n        JSPLUMB_GRADIENT = \"jsplumb_gradient_\",\n        LINE_WIDTH = \"lineWidth\",\n        ns = {\n            svg: \"http://www.w3.org/2000/svg\",\n            xhtml: \"http://www.w3.org/1999/xhtml\"\n        },\n        _attr = function (node, attributes) {\n            for (var i in attributes)\n                node.setAttribute(i, \"\" + attributes[i]);\n        },\n        _node = function (name, attributes) {\n            attributes = attributes || {};\n            attributes.version = \"1.1\";\n            attributes.xmlns = ns.xhtml;\n            return jsPlumb.createElementNS(ns.svg, name, null, null, attributes);\n        },\n        _pos = function (d) {\n            return \"position:absolute;left:\" + d[0] + \"px;top:\" + d[1] + \"px\";\n        },\n        _clearGradient = function (parent) {\n            var els = parent.querySelectorAll(\" defs,linearGradient,radialGradient\");\n            for (var i = 0; i < els.length; i++)\n                els[i].parentNode.removeChild(els[i]);\n        },\n        _updateGradient = function (parent, node, style, dimensions, uiComponent) {\n            var id = JSPLUMB_GRADIENT + uiComponent._jsPlumb.instance.idstamp();\n            // first clear out any existing gradient\n            _clearGradient(parent);\n            // this checks for an 'offset' property in the gradient, and in the absence of it, assumes\n            // we want a linear gradient. if it's there, we create a radial gradient.\n            // it is possible that a more explicit means of defining the gradient type would be\n            // better. relying on 'offset' means that we can never have a radial gradient that uses\n            // some default offset, for instance.\n            // issue 244 suggested the 'gradientUnits' attribute; without this, straight/flowchart connectors with gradients would\n            // not show gradients when the line was perfectly horizontal or vertical.\n            var g;\n            if (!style.gradient.offset)\n                g = _node(LINEAR_GRADIENT, {id: id, gradientUnits: \"userSpaceOnUse\"});\n            else\n                g = _node(RADIAL_GRADIENT, { id: id });\n\n            var defs = _node(DEFS);\n            parent.appendChild(defs);\n            defs.appendChild(g);\n\n            // the svg radial gradient seems to treat stops in the reverse\n            // order to how canvas does it.  so we want to keep all the maths the same, but\n            // iterate the actual style declarations in reverse order, if the x indexes are not in order.\n            for (var i = 0; i < style.gradient.stops.length; i++) {\n                var styleToUse = uiComponent.segment == 1 || uiComponent.segment == 2 ? i : style.gradient.stops.length - 1 - i,\n                    //stopColor = _ju.convertStyle(style.gradient.stops[styleToUse][1], true),\n                    stopColor = style.gradient.stops[styleToUse][1],\n                    s = _node(STOP, {\"offset\": Math.floor(style.gradient.stops[i][0] * 100) + \"%\", \"stop-color\": stopColor});\n\n                g.appendChild(s);\n            }\n            var applyGradientTo = style.strokeStyle ? STROKE : FILL;\n            node.setAttribute(applyGradientTo, \"url(#\" + id + \")\");\n        },\n        _applyStyles = function (parent, node, style, dimensions, uiComponent) {\n\n            node.setAttribute(FILL, style.fillStyle ? style.fillStyle : NONE);\n            node.setAttribute(STROKE, style.strokeStyle ? style.strokeStyle : NONE);\n\n            if (style.gradient) {\n                _updateGradient(parent, node, style, dimensions, uiComponent);\n            }\n            else {\n                // make sure we clear any existing gradient\n                _clearGradient(parent);\n                node.setAttribute(STYLE, \"\");\n            }\n\n            if (style.lineWidth) {\n                node.setAttribute(STROKE_WIDTH, style.lineWidth);\n            }\n\n            // in SVG there is a stroke-dasharray attribute we can set, and its syntax looks like\n            // the syntax in VML but is actually kind of nasty: values are given in the pixel\n            // coordinate space, whereas in VML they are multiples of the width of the stroked\n            // line, which makes a lot more sense.  for that reason, jsPlumb is supporting both\n            // the native svg 'stroke-dasharray' attribute, and also the 'dashstyle' concept from\n            // VML, which will be the preferred method.  the code below this converts a dashstyle\n            // attribute given in terms of stroke width into a pixel representation, by using the\n            // stroke's lineWidth.\n            if (style[DASHSTYLE] && style[LINE_WIDTH] && !style[STROKE_DASHARRAY]) {\n                var sep = style[DASHSTYLE].indexOf(\",\") == -1 ? \" \" : \",\",\n                    parts = style[DASHSTYLE].split(sep),\n                    styleToUse = \"\";\n                parts.forEach(function (p) {\n                    styleToUse += (Math.floor(p * style.lineWidth) + sep);\n                });\n                node.setAttribute(STROKE_DASHARRAY, styleToUse);\n            }\n            else if (style[STROKE_DASHARRAY]) {\n                node.setAttribute(STROKE_DASHARRAY, style[STROKE_DASHARRAY]);\n            }\n\n            // extra attributes such as join type, dash offset.\n            for (var i in svgAttributeMap) {\n                if (style[i]) {\n                    node.setAttribute(svgAttributeMap[i], style[i]);\n                }\n            }\n        },\n        _appendAtIndex = function (svg, path, idx) {\n            if (svg.childNodes.length > idx) {\n                svg.insertBefore(path, svg.childNodes[idx]);\n            }\n            else svg.appendChild(path);\n        };\n\n    /**\n     utility methods for other objects to use.\n     */\n    _ju.svg = {\n        node: _node,\n        attr: _attr,\n        pos: _pos\n    };\n\n    // ************************** / SVG utility methods ********************************************\n\n    /*\n     * Base class for SVG components.\n     */\n    var SvgComponent = function (params) {\n        var pointerEventsSpec = params.pointerEventsSpec || \"all\", renderer = {};\n\n        _jp.jsPlumbUIComponent.apply(this, params.originalArgs);\n        this.canvas = null;\n        this.path = null;\n        this.svg = null;\n        this.bgCanvas = null;\n\n        var clazz = params.cssClass + \" \" + (params.originalArgs[0].cssClass || \"\"),\n            svgParams = {\n                \"style\": \"\",\n                \"width\": 0,\n                \"height\": 0,\n                \"pointer-events\": pointerEventsSpec,\n                \"position\": \"absolute\"\n            };\n\n        this.svg = _node(\"svg\", svgParams);\n\n        if (params.useDivWrapper) {\n            this.canvas = jsPlumb.createElement(\"div\", { position : \"absolute\" });\n            _ju.sizeElement(this.canvas, 0, 0, 1, 1);\n            this.canvas.className = clazz;\n        }\n        else {\n            _attr(this.svg, { \"class\": clazz });\n            this.canvas = this.svg;\n        }\n\n        params._jsPlumb.appendElement(this.canvas, params.originalArgs[0].parent);\n        if (params.useDivWrapper) this.canvas.appendChild(this.svg);\n\n        var displayElements = [ this.canvas ];\n        this.getDisplayElements = function () {\n            return displayElements;\n        };\n\n        this.appendDisplayElement = function (el) {\n            displayElements.push(el);\n        };\n\n        this.paint = function (style, anchor, extents) {\n            if (style != null) {\n\n                var xy = [ this.x, this.y ], wh = [ this.w, this.h ], p;\n                if (extents != null) {\n                    if (extents.xmin < 0) xy[0] += extents.xmin;\n                    if (extents.ymin < 0) xy[1] += extents.ymin;\n                    wh[0] = extents.xmax + ((extents.xmin < 0) ? -extents.xmin : 0);\n                    wh[1] = extents.ymax + ((extents.ymin < 0) ? -extents.ymin : 0);\n                }\n\n                if (params.useDivWrapper) {\n                    _ju.sizeElement(this.canvas, xy[0], xy[1], wh[0], wh[1]);\n                    xy[0] = 0;\n                    xy[1] = 0;\n                    p = _pos([ 0, 0 ]);\n                }\n                else\n                    p = _pos([ xy[0], xy[1] ]);\n\n                renderer.paint.apply(this, arguments);\n\n                _attr(this.svg, {\n                    \"style\": p,\n                    \"width\": wh[0] || 0,\n                    \"height\": wh[1] || 0\n                });\n            }\n        };\n\n        return {\n            renderer: renderer\n        };\n    };\n\n    _ju.extend(SvgComponent, _jp.jsPlumbUIComponent, {\n        cleanup: function (force) {\n            if (force || this.typeId == null) {\n                if (this.canvas) this.canvas._jsPlumb = null;\n                if (this.svg) this.svg._jsPlumb = null;\n                if (this.bgCanvas) this.bgCanvas._jsPlumb = null;\n\n                if (this.canvas && this.canvas.parentNode)\n                    this.canvas.parentNode.removeChild(this.canvas);\n                if (this.bgCanvas && this.bgCanvas.parentNode)\n                    this.canvas.parentNode.removeChild(this.canvas);\n\n                this.svg = null;\n                this.canvas = null;\n                this.path = null;\n                this.group = null;\n            }\n            else {\n                // if not a forced cleanup, just detach from DOM for now.\n                if (this.canvas && this.canvas.parentNode) this.canvas.parentNode.removeChild(this.canvas);\n                if (this.bgCanvas && this.bgCanvas.parentNode) this.bgCanvas.parentNode.removeChild(this.bgCanvas);\n            }\n        },\n        reattach:function(instance) {\n            var c = instance.getContainer();\n            if (this.canvas && this.canvas.parentNode == null) c.appendChild(this.canvas);\n            if (this.bgCanvas && this.bgCanvas.parentNode == null) c.appendChild(this.bgCanvas);\n        },\n        setVisible: function (v) {\n            if (this.canvas) {\n                this.canvas.style.display = v ? \"block\" : \"none\";\n            }\n        }\n    });\n\n    /*\n     * Base class for SVG connectors.\n     */\n    _jp.ConnectorRenderers.svg = function (params) {\n        var self = this,\n            _super = SvgComponent.apply(this, [\n                {\n                    cssClass: params._jsPlumb.connectorClass + (this.isEditable() ? \" \" + params._jsPlumb.editableConnectorClass : \"\"),\n                    originalArgs: arguments,\n                    pointerEventsSpec: \"none\",\n                    _jsPlumb: params._jsPlumb\n                }\n            ]);\n\n        var _superSetEditable = this.setEditable;\n        this.setEditable = function(e) {\n            var result = _superSetEditable.apply(this, [e]);\n            jsPlumb[result ? \"addClass\" : \"removeClass\"](this.canvas, this._jsPlumb.instance.editableConnectorClass);\n        };\n\n        _super.renderer.paint = function (style, anchor, extents) {\n\n            var segments = self.getSegments(), p = \"\", offset = [0, 0];\n            if (extents.xmin < 0) offset[0] = -extents.xmin;\n            if (extents.ymin < 0) offset[1] = -extents.ymin;\n\n            if (segments.length > 0) {\n\n                // create path from segments.\n                for (var i = 0; i < segments.length; i++) {\n                    p += _jp.Segments.svg.SegmentRenderer.getPath(segments[i]);\n                    p += \" \";\n                }\n\n                var a = {\n                        d: p,\n                        transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\",\n                        \"pointer-events\": params[\"pointer-events\"] || \"visibleStroke\"\n                    },\n                    outlineStyle = null,\n                    d = [self.x, self.y, self.w, self.h];\n\n                // outline style.  actually means drawing an svg object underneath the main one.\n                if (style.outlineColor) {\n                    var outlineWidth = style.outlineWidth || 1,\n                        outlineStrokeWidth = style.lineWidth + (2 * outlineWidth);\n                    outlineStyle = _jp.extend({}, style);\n                    delete outlineStyle.gradient;\n                    outlineStyle.strokeStyle = style.outlineColor;\n                    outlineStyle.lineWidth = outlineStrokeWidth;\n\n                    if (self.bgPath == null) {\n                        self.bgPath = _node(\"path\", a);\n                        _jp.addClass(self.bgPath, _jp.connectorOutlineClass);\n                        _appendAtIndex(self.svg, self.bgPath, 0);\n                    }\n                    else {\n                        _attr(self.bgPath, a);\n                    }\n\n                    _applyStyles(self.svg, self.bgPath, outlineStyle, d, self);\n                }\n\n                if (self.path == null) {\n                    self.path = _node(\"path\", a);\n                    _appendAtIndex(self.svg, self.path, style.outlineColor ? 1 : 0);\n                }\n                else {\n                    _attr(self.path, a);\n                }\n\n                _applyStyles(self.svg, self.path, style, d, self);\n            }\n        };\n    };\n    _ju.extend(_jp.ConnectorRenderers.svg, SvgComponent);\n\n// ******************************* svg segment renderer *****************************************************    \n\n    _jp.Segments.svg = {\n        SegmentRenderer: {\n            getPath: function (segment) {\n                return ({\n                    \"Straight\": function () {\n                        var d = segment.getCoordinates();\n                        return \"M \" + d.x1 + \" \" + d.y1 + \" L \" + d.x2 + \" \" + d.y2;\n                    },\n                    \"Bezier\": function () {\n                        var d = segment.params;\n                        return \"M \" + d.x1 + \" \" + d.y1 +\n                            \" C \" + d.cp1x + \" \" + d.cp1y + \" \" + d.cp2x + \" \" + d.cp2y + \" \" + d.x2 + \" \" + d.y2;\n                    },\n                    \"Arc\": function () {\n                        var d = segment.params,\n                            laf = segment.sweep > Math.PI ? 1 : 0,\n                            sf = segment.anticlockwise ? 0 : 1;\n\n                        return \"M\" + segment.x1 + \" \" + segment.y1 + \" A \" + segment.radius + \" \" + d.r + \" 0 \" + laf + \",\" + sf + \" \" + segment.x2 + \" \" + segment.y2;\n                    }\n                })[segment.type]();\n            }\n        }\n    };\n\n// ******************************* /svg segments *****************************************************\n\n    /*\n     * Base class for SVG endpoints.\n     */\n    var SvgEndpoint = _jp.SvgEndpoint = function (params) {\n        var _super = SvgComponent.apply(this, [\n            {\n                cssClass: params._jsPlumb.endpointClass,\n                originalArgs: arguments,\n                pointerEventsSpec: \"all\",\n                useDivWrapper: true,\n                _jsPlumb: params._jsPlumb\n            }\n        ]);\n\n        _super.renderer.paint = function (style) {\n            var s = _jp.extend({}, style);\n            if (s.outlineColor) {\n                s.strokeWidth = s.outlineWidth;\n                s.strokeStyle = s.outlineColor;\n            }\n\n            if (this.node == null) {\n                this.node = this.makeNode(s);\n                this.svg.appendChild(this.node);\n            }\n            else if (this.updateNode != null) {\n                this.updateNode(this.node);\n            }\n            _applyStyles(this.svg, this.node, s, [ this.x, this.y, this.w, this.h ], this);\n            _pos(this.node, [ this.x, this.y ]);\n        }.bind(this);\n\n    };\n    _ju.extend(SvgEndpoint, SvgComponent);\n\n    /*\n     * SVG Dot Endpoint\n     */\n    _jp.Endpoints.svg.Dot = function () {\n        _jp.Endpoints.Dot.apply(this, arguments);\n        SvgEndpoint.apply(this, arguments);\n        this.makeNode = function (style) {\n            return _node(\"circle\", {\n                \"cx\": this.w / 2,\n                \"cy\": this.h / 2,\n                \"r\": this.radius\n            });\n        };\n        this.updateNode = function (node) {\n            _attr(node, {\n                \"cx\": this.w / 2,\n                \"cy\": this.h / 2,\n                \"r\": this.radius\n            });\n        };\n    };\n    _ju.extend(_jp.Endpoints.svg.Dot, [_jp.Endpoints.Dot, SvgEndpoint]);\n\n    /*\n     * SVG Rectangle Endpoint\n     */\n    _jp.Endpoints.svg.Rectangle = function () {\n        _jp.Endpoints.Rectangle.apply(this, arguments);\n        SvgEndpoint.apply(this, arguments);\n        this.makeNode = function (style) {\n            return _node(\"rect\", {\n                \"width\": this.w,\n                \"height\": this.h\n            });\n        };\n        this.updateNode = function (node) {\n            _attr(node, {\n                \"width\": this.w,\n                \"height\": this.h\n            });\n        };\n    };\n    _ju.extend(_jp.Endpoints.svg.Rectangle, [_jp.Endpoints.Rectangle, SvgEndpoint]);\n\n    /*\n     * SVG Image Endpoint is the default image endpoint.\n     */\n    _jp.Endpoints.svg.Image = _jp.Endpoints.Image;\n    /*\n     * Blank endpoint in svg renderer is the default Blank endpoint.\n     */\n    _jp.Endpoints.svg.Blank = _jp.Endpoints.Blank;\n    /*\n     * Label overlay in svg renderer is the default Label overlay.\n     */\n    _jp.Overlays.svg.Label = _jp.Overlays.Label;\n    /*\n     * Custom overlay in svg renderer is the default Custom overlay.\n     */\n    _jp.Overlays.svg.Custom = _jp.Overlays.Custom;\n\n    var AbstractSvgArrowOverlay = function (superclass, originalArgs) {\n        superclass.apply(this, originalArgs);\n        _jp.jsPlumbUIComponent.apply(this, originalArgs);\n        this.isAppendedAtTopLevel = false;\n        var self = this;\n        this.path = null;\n        this.paint = function (params, containerExtents) {\n            // only draws on connections, not endpoints.\n            if (params.component.svg && containerExtents) {\n                if (this.path == null) {\n                    this.path = _node(\"path\", {\n                        \"pointer-events\": \"all\"\n                    });\n                    params.component.svg.appendChild(this.path);\n                    if (this.elementCreated) {\n                        this.elementCreated(this.path, params.component);\n                    }\n\n                    this.canvas = params.component.svg; // for the sake of completeness; this behaves the same as other overlays\n                }\n                var clazz = originalArgs && (originalArgs.length == 1) ? (originalArgs[0].cssClass || \"\") : \"\",\n                    offset = [0, 0];\n\n                if (containerExtents.xmin < 0) offset[0] = -containerExtents.xmin;\n                if (containerExtents.ymin < 0) offset[1] = -containerExtents.ymin;\n\n                _attr(this.path, {\n                    \"d\": makePath(params.d),\n                    \"class\": clazz,\n                    stroke: params.strokeStyle ? params.strokeStyle : null,\n                    fill: params.fillStyle ? params.fillStyle : null,\n                    transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n                });\n            }\n        };\n        var makePath = function (d) {\n            return (isNaN(d.cxy.x) || isNaN(d.cxy.y)) ? \"\" : \"M\" + d.hxy.x + \",\" + d.hxy.y +\n                \" L\" + d.tail[0].x + \",\" + d.tail[0].y +\n                \" L\" + d.cxy.x + \",\" + d.cxy.y +\n                \" L\" + d.tail[1].x + \",\" + d.tail[1].y +\n                \" L\" + d.hxy.x + \",\" + d.hxy.y;\n        };\n        this.transfer = function(target) {\n            if (target.canvas && this.path && this.path.parentNode) {\n                this.path.parentNode.removeChild(this.path);\n                target.canvas.appendChild(this.path);\n            }\n        };\n    };\n    _ju.extend(AbstractSvgArrowOverlay, [_jp.jsPlumbUIComponent, _jp.Overlays.AbstractOverlay], {\n        cleanup: function (force) {\n            if (this.path != null) {\n                if (force)\n                    this._jsPlumb.instance.removeElement(this.path);\n                else\n                    if (this.path.parentNode)\n                        this.path.parentNode.removeChild(this.path);\n            }\n        },\n        reattach:function(instance) {\n            if (this.path && this.canvas && this.path.parentNode == null)\n                this.canvas.appendChild(this.path);\n        },\n        setVisible: function (v) {\n            if (this.path != null) (this.path.style.display = (v ? \"block\" : \"none\"));\n        }\n    });\n\n    _jp.Overlays.svg.Arrow = function () {\n        AbstractSvgArrowOverlay.apply(this, [_jp.Overlays.Arrow, arguments]);\n    };\n    _ju.extend(_jp.Overlays.svg.Arrow, [ _jp.Overlays.Arrow, AbstractSvgArrowOverlay ]);\n\n    _jp.Overlays.svg.PlainArrow = function () {\n        AbstractSvgArrowOverlay.apply(this, [_jp.Overlays.PlainArrow, arguments]);\n    };\n    _ju.extend(_jp.Overlays.svg.PlainArrow, [ _jp.Overlays.PlainArrow, AbstractSvgArrowOverlay ]);\n\n    _jp.Overlays.svg.Diamond = function () {\n        AbstractSvgArrowOverlay.apply(this, [_jp.Overlays.Diamond, arguments]);\n    };\n    _ju.extend(_jp.Overlays.svg.Diamond, [ _jp.Overlays.Diamond, AbstractSvgArrowOverlay ]);\n    \n    _jp.Overlays.svg.SingleLine = function () {\n        AbstractSvgArrowOverlay.apply(this, [_jp.Overlays.SingleLine, arguments]);\n        \n        var originalArgs = arguments;\n        \n        this.paint = function (params, containerExtents) {\n            // only draws on connections, not endpoints.\n            if (params.component.svg && containerExtents) {\n                if (this.path == null) {\n                    this.path = _node(\"path\", {\n                        \"pointer-events\": \"all\"\n                    });\n                    params.component.svg.appendChild(this.path);\n                    if (this.elementCreated) {\n                        this.elementCreated(this.path, params.component);\n                    }\n    \n                    this.canvas = params.component.svg; // for the sake of completeness; this behaves the same as other overlays\n                }\n                var clazz = originalArgs && (originalArgs.length == 1) ? (originalArgs[0].cssClass || \"\") : \"\",\n                    offset = [0, 0];\n    \n                if (containerExtents.xmin < 0) offset[0] = -containerExtents.xmin;\n                if (containerExtents.ymin < 0) offset[1] = -containerExtents.ymin;\n                \n                var makePath = function (d) {\n                    return \"M\" + d.tail[0].x + \",\" + d.tail[0].y + \" L\" + d.tail[1].x + \",\" + d.tail[1].y;\n                };\n    \n                _attr(this.path, {\n                    \"d\": makePath(params.d),\n                    \"class\": clazz,\n                    stroke: params.strokeStyle ? params.strokeStyle : null,\n                    fill: \"none\",\n                    transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n                });\n            }\n        };\n    };\n    _ju.extend(_jp.Overlays.svg.SingleLine, [ _jp.Overlays.SingleLine, AbstractSvgArrowOverlay ]);\n    \n    _jp.Overlays.svg.DoubleLine = function () {\n        AbstractSvgArrowOverlay.apply(this, [_jp.Overlays.DoubleLine, arguments]);\n        \n        var originalArgs = arguments;\n        \n        this.paint = function (params, containerExtents) {\n            // only draws on connections, not endpoints.\n            if (params.component.svg && containerExtents) {\n                if (this.path == null) {\n                    this.path = _node(\"path\", {\n                        \"pointer-events\": \"all\"\n                    });\n                    params.component.svg.appendChild(this.path);\n                    if (this.elementCreated) {\n                        this.elementCreated(this.path, params.component);\n                    }\n    \n                    this.canvas = params.component.svg; // for the sake of completeness; this behaves the same as other overlays\n                }\n                var clazz = originalArgs && (originalArgs.length == 1) ? (originalArgs[0].cssClass || \"\") : \"\",\n                    offset = [0, 0];\n    \n                if (containerExtents.xmin < 0) offset[0] = -containerExtents.xmin;\n                if (containerExtents.ymin < 0) offset[1] = -containerExtents.ymin;\n                \n                var makePath = function (d) {\n                    var r;\n                    \n                    if (d.tail[0].x - d.tail[0].x < 5)\n                    {\n                        r = \"M\" + d.tail[0].x + \",\" + d.tail[0].y + \" L\" + d.tail[1].x + \",\" + d.tail[1].y\n                            + \" M\" + (d.tail[0].x) + \",\" + (d.tail[0].y + 5) + \"L\" + (d.tail[1].x) + \",\" + (d.tail[1].y + 5);\n                    }\n                    else\n                    {\n                        r = \"M\" + d.tail[0].x + \",\" + d.tail[0].y + \" L\" + d.tail[1].x + \",\" + d.tail[1].y\n                            + \" M\" + (d.tail[0].x + 5) + \",\" + d.tail[0].y + \"L\" + (d.tail[1].x + 5) + \",\" + d.tail[1].y;\n                    }\n                    \n                    return r;\n                };\n    \n                _attr(this.path, {\n                    \"d\": makePath(params.d),\n                    \"class\": clazz,\n                    stroke: params.strokeStyle ? params.strokeStyle : null,\n                    fill: \"none\",\n                    transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n                });\n            }\n        };\n    };\n    _ju.extend(_jp.Overlays.svg.DoubleLine, [ _jp.Overlays.DoubleLine, AbstractSvgArrowOverlay ]);\n\n    // a test\n    _jp.Overlays.svg.GuideLines = function () {\n        var path = null, self = this, p1_1, p1_2;\n        _jp.Overlays.GuideLines.apply(this, arguments);\n        this.paint = function (params, containerExtents) {\n            if (path == null) {\n                path = _node(\"path\");\n                params.connector.svg.appendChild(path);\n                self.attachListeners(path, params.connector);\n                self.attachListeners(path, self);\n\n                p1_1 = _node(\"path\");\n                params.connector.svg.appendChild(p1_1);\n                self.attachListeners(p1_1, params.connector);\n                self.attachListeners(p1_1, self);\n\n                p1_2 = _node(\"path\");\n                params.connector.svg.appendChild(p1_2);\n                self.attachListeners(p1_2, params.connector);\n                self.attachListeners(p1_2, self);\n            }\n\n            var offset = [0, 0];\n            if (containerExtents.xmin < 0) offset[0] = -containerExtents.xmin;\n            if (containerExtents.ymin < 0) offset[1] = -containerExtents.ymin;\n\n            _attr(path, {\n                \"d\": makePath(params.head, params.tail),\n                stroke: \"red\",\n                fill: null,\n                transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n            });\n\n            _attr(p1_1, {\n                \"d\": makePath(params.tailLine[0], params.tailLine[1]),\n                stroke: \"blue\",\n                fill: null,\n                transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n            });\n\n            _attr(p1_2, {\n                \"d\": makePath(params.headLine[0], params.headLine[1]),\n                stroke: \"green\",\n                fill: null,\n                transform: \"translate(\" + offset[0] + \",\" + offset[1] + \")\"\n            });\n        };\n\n        var makePath = function (d1, d2) {\n            return \"M \" + d1.x + \",\" + d1.y +\n                \" L\" + d2.x + \",\" + d2.y;\n        };\n    };\n    _ju.extend(_jp.Overlays.svg.GuideLines, _jp.Overlays.GuideLines);\n}).call(typeof window !== 'undefined' ? window : this);\n\n/*\n * jsPlumb\n * \n * Title:jsPlumb 2.1.1\n * \n * Provides a way to visually connect elements on an HTML page, using SVG.\n * \n * This file contains the 'vanilla' adapter - having no external dependencies other than bundled libs.\n *\n * Copyright (c) 2010 - 2016 jsPlumb (hello@jsplumbtoolkit.com)\n * \n * http://jsplumbtoolkit.com\n * http://github.com/sporritt/jsplumb\n * \n * Dual licensed under the MIT and GPL2 licenses.\n */\n;\n(function () {\n\n    \"use strict\";\n    var root = this, _jp = root.jsPlumb, _ju = root.jsPlumbUtil,\n        _jk = root.Katavorio, _jg = root.Biltong;\n\n    var _getDragManager = function (instance, category) {\n\n        category = category || \"main\";\n        var key = \"_katavorio_\" + category;\n        var k = instance[key],\n            e = instance.getEventManager();\n\n        if (!k) {\n            k = new _jk({\n                bind: e.on,\n                unbind: e.off,\n                getSize: jsPlumb.getSize,\n                getPosition: function (el, relativeToRoot) {\n                    // if this is a nested draggable then compute the offset against its own offsetParent, otherwise\n                    // compute against the Container's origin. see also the getUIPosition method below.\n                    var o = instance.getOffset(el, relativeToRoot, el._katavorioDrag ? el.offsetParent : null);\n                    return [o.left, o.top];\n                },\n                setPosition: function (el, xy) {\n                    el.style.left = xy[0] + \"px\";\n                    el.style.top = xy[1] + \"px\";\n                },\n                addClass: jsPlumb.addClass,\n                removeClass: jsPlumb.removeClass,\n                intersects: _jg.intersects,\n                indexOf: function(l, i) { return l.indexOf(i); },\n                css: {\n                    noSelect: instance.dragSelectClass,\n                    droppable: \"jsplumb-droppable\",\n                    draggable: \"jsplumb-draggable\",\n                    drag: \"jsplumb-drag\",\n                    selected: \"jsplumb-drag-selected\",\n                    active: \"jsplumb-drag-active\",\n                    hover: \"jsplumb-drag-hover\",\n                    ghostProxy:\"jsplumb-ghost-proxy\"\n                }\n            });\n            instance[key] = k;\n            instance.bind(\"zoom\", k.setZoom);\n        }\n        return k;\n    };\n\n    var _animProps = function (o, p) {\n        var _one = function (pName) {\n            if (p[pName] != null) {\n                if (_ju.isString(p[pName])) {\n                    var m = p[pName].match(/-=/) ? -1 : 1,\n                        v = p[pName].substring(2);\n                    return o[pName] + (m * v);\n                }\n                else return p[pName];\n            }\n            else\n                return o[pName];\n        };\n        return [ _one(\"left\"), _one(\"top\") ];\n    };\n\n    _jp.extend(root.jsPlumbInstance.prototype, {\n\n        animationSupported:true,\n        getElement: function (el) {\n            if (el == null) return null;\n            // here we pluck the first entry if el was a list of entries.\n            // this is not my favourite thing to do, but previous versions of\n            // jsplumb supported jquery selectors, and it is possible a selector\n            // will be passed in here.\n            el = typeof el === \"string\" ? el : el.length != null && el.enctype == null ? el[0] : el;\n            return typeof el === \"string\" ? document.getElementById(el) : el;\n        },\n        removeElement: function (element) {\n            _getDragManager(this).elementRemoved(element);\n            this.getEventManager().remove(element);\n        },\n        //\n        // this adapter supports a rudimentary animation function. no easing is supported.  only\n        // left/top properties are supported. property delta args are expected to be in the form\n        //\n        // +=x.xxxx\n        //\n        // or\n        //\n        // -=x.xxxx\n        //\n        doAnimate: function (el, properties, options) {\n            options = options || {};\n            var o = this.getOffset(el),\n                ap = _animProps(o, properties),\n                ldist = ap[0] - o.left,\n                tdist = ap[1] - o.top,\n                d = options.duration || 250,\n                step = 15, steps = d / step,\n                linc = (step / d) * ldist,\n                tinc = (step / d) * tdist,\n                idx = 0,\n                _int = setInterval(function () {\n                    jsPlumb.setPosition(el, {\n                        left: o.left + (linc * (idx + 1)),\n                        top: o.top + (tinc * (idx + 1))\n                    });\n                    if (options.step != null) options.step(idx, Math.ceil(steps));\n                    idx++;\n                    if (idx >= steps) {\n                        window.clearInterval(_int);\n                        if (options.complete != null) options.complete();\n                    }\n                }, step);\n        },\n        // DRAG/DROP\n        destroyDraggable: function (el, category) {\n            _getDragManager(this, category).destroyDraggable(el);\n        },\n        destroyDroppable: function (el, category) {\n            _getDragManager(this, category).destroyDroppable(el);\n        },\n        initDraggable: function (el, options, category) {\n            _getDragManager(this, category).draggable(el, options);\n        },\n        initDroppable: function (el, options, category) {\n            _getDragManager(this, category).droppable(el, options);\n        },\n        isAlreadyDraggable: function (el) {\n            return el._katavorioDrag != null;\n        },\n        isDragSupported: function (el, options) {\n            return true;\n        },\n        isDropSupported: function (el, options) {\n            return true;\n        },\n        isElementDraggable: function (el) {\n            el = jsPlumb.getElement(el);\n            return el._katavorioDrag && el._katavorioDrag.isEnabled();\n        },\n        getDragObject: function (eventArgs) {\n            return eventArgs[0].drag.getDragElement();\n        },\n        getDragScope: function (el) {\n            return el._katavorioDrag && el._katavorioDrag.scopes.join(\" \") || \"\";\n        },\n        getDropEvent: function (args) {\n            return args[0].e;\n        },\n        getUIPosition: function (eventArgs, zoom) {\n            // here the position reported to us by Katavorio is relative to the element's offsetParent. For top\n            // level nodes that is fine, but if we have a nested draggable then its offsetParent is actually\n            // not going to be the jsplumb container; it's going to be some child of that element. In that case\n            // we want to adjust the UI position to account for the offsetParent's position relative to the Container\n            // origin.\n            var el = eventArgs[0].el;\n            if (el.offsetParent == null) {\n                return null;\n            }\n            var finalPos = eventArgs[0].finalPos || eventArgs[0].pos;\n            var p = { left:finalPos[0], top:finalPos[1] };\n            if (el._katavorioDrag && el.offsetParent !== this.getContainer()) {\n                var oc = this.getOffset(el.offsetParent);\n                p.left += oc.left;\n                p.top += oc.top;\n            }\n            return p;\n        },\n        setDragFilter: function (el, filter, _exclude) {\n            if (el._katavorioDrag) {\n                el._katavorioDrag.setFilter(filter, _exclude);\n            }\n        },\n        setElementDraggable: function (el, draggable) {\n            el = jsPlumb.getElement(el);\n            if (el._katavorioDrag)\n                el._katavorioDrag.setEnabled(draggable);\n        },\n        setDragScope: function (el, scope) {\n            if (el._katavorioDrag)\n                el._katavorioDrag.k.setDragScope(el, scope);\n        },\n        setDropScope:function(el, scope) {\n            if (el._katavorioDrop && el._katavorioDrop.length > 0) {\n                el._katavorioDrop[0].k.setDropScope(el, scope);\n            }\n        },\n        addToPosse:function(el, spec) {\n            var specs = Array.prototype.slice.call(arguments, 1);\n            var dm = _getDragManager(this);\n            jsPlumb.each(el, function(_el) {\n                _el = [ jsPlumb.getElement(_el) ];\n                _el.push.apply(_el, specs );\n                dm.addToPosse.apply(dm, _el);\n            });\n        },\n        setPosse:function(el, spec) {\n            var specs = Array.prototype.slice.call(arguments, 1);\n            var dm = _getDragManager(this);\n            jsPlumb.each(el, function(_el) {\n                _el = [ jsPlumb.getElement(_el) ];\n                _el.push.apply(_el, specs );\n                dm.setPosse.apply(dm, _el);\n            });\n        },\n        removeFromPosse:function(el, posseId) {\n            var specs = Array.prototype.slice.call(arguments, 1);\n            var dm = _getDragManager(this);\n            jsPlumb.each(el, function(_el) {\n                _el = [ jsPlumb.getElement(_el) ];\n                _el.push.apply(_el, specs );\n                dm.removeFromPosse.apply(dm, _el);\n            });\n        },\n        removeFromAllPosses:function(el) {\n            var dm = _getDragManager(this);\n            jsPlumb.each(el, function(_el) { dm.removeFromAllPosses(jsPlumb.getElement(_el)); });\n        },\n        setPosseState:function(el, posseId, state) {\n            var dm = _getDragManager(this);\n            jsPlumb.each(el, function(_el) { dm.setPosseState(jsPlumb.getElement(_el), posseId, state); });\n        },\n        dragEvents: {\n            'start': 'start', 'stop': 'stop', 'drag': 'drag', 'step': 'step',\n            'over': 'over', 'out': 'out', 'drop': 'drop', 'complete': 'complete',\n            'beforeStart':'beforeStart'\n        },\n        animEvents: {\n            'step': \"step\", 'complete': 'complete'\n        },\n        stopDrag: function (el) {\n            if (el._katavorioDrag)\n                el._katavorioDrag.abort();\n        },\n        addToDragSelection: function (spec) {\n            _getDragManager(this).select(spec);\n        },\n        removeFromDragSelection: function (spec) {\n            _getDragManager(this).deselect(spec);\n        },\n        clearDragSelection: function () {\n            _getDragManager(this).deselectAll();\n        },\n        trigger: function (el, event, originalEvent, payload) {\n            this.getEventManager().trigger(el, event, originalEvent, payload);\n        },\n        doReset:function() {\n            // look for katavorio instances and reset each one if found.\n            for (var key in this) {\n                if (key.indexOf(\"_katavorio_\") === 0) {\n                    this[key].reset();\n                }\n            }\n        }\n    });\n\n    var ready = function (f) {\n        var _do = function () {\n            if (/complete|loaded|interactive/.test(document.readyState) && typeof(document.body) != \"undefined\" && document.body != null)\n                f();\n            else\n                setTimeout(_do, 9);\n        };\n\n        _do();\n    };\n    ready(_jp.init);\n\n}).call(typeof window !== 'undefined' ? window : this);\n","function node_tree_viewer(container) {\r\n    this.container = container;\r\n}\r\n\r\nnode_tree_viewer.prototype = {\r\n    loadTreeData: function(root) {\r\n        var me = this,\r\n            container = me.container,\r\n            tul, tli,\r\n            treebg,\r\n            tw, th,\r\n            coff;\r\n            \r\n        container.empty();\r\n        \r\n        me._treebgc = $(\"<div class='treebg'></div>\").appendTo(container);\r\n        me._treebg = Raphael(me._treebgc[0], 0, 0, \"100%\", \"100%\"),\r\n        \r\n        me.tul = tul = $(\"<ul></ul>\").appendTo(container);\r\n        \r\n        me.appendNodeTree(root, tul);\r\n        \r\n        tw = tul[0].scrollWidth || tul.width();\r\n        th = tul[0].scrollHeight || tul.height();\r\n        me._treebgc.width(tw).height(th);\r\n        \r\n        coff = container.offset();\r\n        \r\n        me.rootData = root;\r\n        \r\n        me._treebg.setSize(tw, th);\r\n        me.updateLink(root, coff);\r\n    },\r\n    \r\n    appendNodeTree: function(node, ul) {\r\n        var me = this,\r\n            tli = $(\"<li class='gsub-box'></li>\").appendTo(ul),\r\n            i,\r\n            cul,\r\n            tdiv = $(\"<div class='gbox'></div>\").appendTo(tli),\r\n            tdivzone,\r\n            tbtn;\r\n            \r\n        tdivzone = $(\"<div class='gname'><div class='gtext'>\" + node.name + \"</div></div>\").appendTo(tdiv);\r\n        tbtn = $(\"<div class='gbtn'></div>\").appendTo($(\".gtext\", tdivzone));\r\n        \r\n        node.__div = tbtn;\r\n        \r\n        if (node.children && node.children.length)\r\n        {\r\n            cul = $(\"<ul class='gsub'></ul>\").appendTo(tdiv);\r\n            \r\n            tbtn.bind(\"click\", function() {\r\n                tbtn.__v = !tbtn.__v;\r\n                if (tbtn.__v)\r\n                {\r\n                    tbtn.addClass(\"ghide\");\r\n                }\r\n                else\r\n                {\r\n                    tbtn.removeClass(\"ghide\");\r\n                }\r\n                \r\n                me.container.scrollTop(0);\r\n                me.container.scrollLeft(0);\r\n                \r\n                cul.toggle();\r\n                \r\n                me._treebg.clear();\r\n                \r\n                setTimeout(function() {\r\n                    me.validateLinks.call(me);\r\n                }, 50);\r\n            });\r\n            \r\n            $.each(node.children, function(i, cnode) {\r\n                me.appendNodeTree.call(me, cnode, cul);\r\n            });\r\n        }\r\n    },\r\n    \r\n    validateLinks: function() {\r\n        var me = this,\r\n            tul = me.tul,\r\n            tw,\r\n            th,\r\n            coff,\r\n            container = me.container;\r\n            \r\n        tw = tul[0].scrollWidth || tul.width();\r\n        th = tul[0].scrollHeight || tul.height();\r\n        me._treebgc.width(tw).height(th);\r\n        \r\n        coff = container.offset();\r\n        \r\n        me._treebg.clear();\r\n        me._treebg.setSize(tw, th);\r\n        me.updateLink(me.rootData, coff);\r\n    },\r\n    \r\n    updateLink: function(tnode, coff) {\r\n        var me = this,\r\n            i,\r\n            _treebg = me._treebg,\r\n            line,\r\n            st,\r\n            tdiv,\r\n            toff;\r\n            \r\n        if (tnode.__div)\r\n        {\r\n            st = tnode.__div.offset();\r\n            \r\n            if (tnode.children && tnode.children.length)\r\n            {\r\n                for (i=0; i < tnode.children.length; i++)\r\n                {\r\n                    tdiv = tnode.children[i].__div;\r\n                    if (tdiv)\r\n                    {\r\n                        toff = tdiv.offset();\r\n                        line = _treebg.path(\"M\" + (st.left - coff.left + 20) + \" \" + (st.top - coff.top + 10) + \"L\" + (toff.left - coff.left - 100) + \" \" + (toff.top - coff.top + 10));\r\n                        \r\n                        if (tnode.children[i].is_best_decistion == \"T\")\r\n                        {\r\n                        \tline.attr(\"stroke\", \"#ff0000\");\r\n                        \tline.attr(\"stroke-width\", 4);\r\n                        }\r\n                        if (!tdiv.__v)\r\n                        {    \r\n                            me.updateLink(tnode.children[i], coff);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    \r\n    setSize: function(w, h) {\r\n        var me = this;\r\n        \r\n        me.container.width(w).height(h);\r\n    }\r\n}","IG$.BC$ds/*hadoop_datasource*/ = $s.extend(IG$.BC$base/*hadoop_dlg_base*/, {\r\n\t\r\n\tregion:\"center\",\r\n\tlayout: \"fit\",\r\n\t\r\n\tautoHeight: true,\r\n\t\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job;\r\n\t\t\r\n\t\tme.dsmapper = me.down(\"[name=dsmapper]\");\r\n\t\tme.dstype = me.down(\"[name=dstype]\");\r\n\t\tme.dsfname = me.down(\"[name=dsfname]\");\r\n\t\tme.dstname = me.down(\"[name=dstname]\");\r\n\t\tme.dsskipexist = me.down(\"[name=dsskipexist]\");\r\n\t\t\r\n\t\tIG$.BC$ds/*hadoop_datasource*/.superclass.init_f.call(this, arguments);\r\n\t\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tme.dsmapper.setValue(job.dsmapper);\r\n\t\t\tme.dstype.setValue(job.dstype);\r\n\t\t\tme.dsfname.setValue(job.dsfname);\r\n\t\t\tme.dstname.setValue(job.dstname);\r\n\t\t\tme.dsskipexist.setValue(job.dsskipexist == \"T\" ? true : false);\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job;\r\n\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tjob.dsmapper = me.dsmapper.getValue();\r\n\t\t\tjob.dsfname = me.dsfname.getValue();\r\n\t\t\tjob.dstname = me.dstname.getValue();\r\n\t\t\tjob.dsskipexist = me.dsskipexist.getValue() ? \"T\" : \"F\";\r\n\t\t\t\r\n\t\t\tjob.dstype = me.dstype.getValue();\r\n\t\t}\r\n\t\t\r\n\t\tme.closeDlg();\r\n\t},\r\n\t\r\n\tcloseDlg: function() {\r\n\t\tvar me = this;\r\n\t\tme.callback && me.callback.execute(me.job);\r\n\t\tme.fireEvent(\"close_dlg\", me);\r\n\t},\r\n\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this,\r\n\t\t\tlw = 120,\r\n\t\t\t__m/*mode*/ = panel.__m/*mode*/;\r\n\t\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_BG_DS\");\r\n\t\t\r\n\t\tpanel.moption = [\r\n\t\t\t{\r\n\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\ttitle: \"Advanced Option\",\r\n\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\tdefaults: {\r\n\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\tlabelPosition: \"top\"\r\n\t\t\t\t},\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\tname: \"dstype\",\r\n\t\t\t\t\t\tfieldLabel: \"Data Type\",\r\n\t\t\t\t\t\tqueryMode: \"local\",\r\n\t\t\t\t\t\tdisplayField: \"name\",\r\n\t\t\t\t\t\tvalueField: \"type\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\"name\", \"type\"\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t{name: \"File\", type: \"file\", selected: 1},\r\n\t\t\t\t\t\t\t\t{name: \"Stream type\", type: \"stream\"},\r\n\t\t\t\t\t\t\t\t{name: \"Data Query\", type: \"sql\"}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\tchange: function(tobj) {\r\n\t\t\t\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\t\t\t\ttval = tobj.getValue(),\r\n\t\t\t\t\t\t\t\t\tf_f1 = me.down(\"[name=f_f1]\"),\r\n\t\t\t\t\t\t\t\t\tf_f2 = me.down(\"[name=f_f2]\");\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tf_f1.setVisible(tval != \"sql\");\r\n\t\t\t\t\t\t\t\tf_f2.setVisible(tval == \"sql\");\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tname: \"f_f1\",\r\n\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\t\t\tlabelPosition: \"top\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\t\t\tname: \"dsfname\",\r\n\t\t\t\t\t\t\t\tminHeight: 80,\r\n\t\t\t\t\t\t\t\thidden: !__m/*mode*/,\r\n\t\t\t\t\t\t\t\tfieldLabel: \"File/Directory (Server)\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"checkbox\",\r\n\t\t\t\t\t\t\t\tname: \"dsskipexist\",\r\n\t\t\t\t\t\t\t\thidden: __m/*mode*/,\r\n\t\t\t\t\t\t\t\tfieldLabel: \"Skip if exist\",\r\n\t\t\t\t\t\t\t\tboxLabel: IRm$.r1(\"B_ENABLE\")\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\t\tname: \"dstname\",\r\n\t\t\t\t\t\t\t\thidden: __m/*mode*/,\r\n\t\t\t\t\t\t\t\tfieldLabel: \"HDFS name\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tname: \"f_f2\",\r\n\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\t\t\tlabelPosition: \"top\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\t\tname: \"dbpool\",\r\n\t\t\t\t\t\t\t\tfieldLabel: \"DataSource\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\t\t\tname: \"dbsql\",\r\n\t\t\t\t\t\t\t\tfieldLabel: \"SQL Query\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\tfieldLabel: \"MapRed\",\r\n\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\tname: \"dsmapper\",\r\n\t\t\t\t\t\t\t\temptyText: IRm$.r1(\"M_SEL_ITEM\")\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\t// text: \"..\",\r\n\t\t\t\t\t\t\t\ticonCls: \"icon-toolbar-search\",\r\n\t\t\t\t\t\t\t\ttooltip: IRm$.r1(\"B_SEARCH\"),\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tthis.GG1/*getMapClasses*/(this.dsmapper);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\t\tIG$.BC$ds/*hadoop_datasource*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$.BC$hj/*hadoop_hivejob*/ = $s.extend(IG$.BC$base/*hadoop_dlg_base*/, {\r\n\t\r\n\tmodal: true,\r\n\tisWindow: true,\r\n\tregion:\"center\",\r\n\tlayout: \"fit\",\r\n\t\r\n\tclosable: false,\r\n\tresizable:false,\r\n\tautoHeight: true,\r\n\t\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job;\r\n\t\t\r\n\t\tme.dsscript = me.down(\"[name=dsscript]\");\t\r\n\t\tIG$.BC$hj/*hadoop_hivejob*/.superclass.init_f.call(me, arguments);\r\n\t\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tme.dsscript.setValue(Base64.decode(job.dsscript));\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job;\r\n\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tjob.dsscript = Base64.encode(me.dsscript.getValue());\r\n\t\t}\r\n\t\t\r\n\t\tme.closeDlg();\r\n\t},\r\n\t\r\n\tcloseDlg: function() {\r\n\t\tvar me = this;\r\n\t\tme.callback && me.callback.execute(me.job);\r\n\t\tme.fireEvent(\"close_dlg\", me);\r\n\t},\r\n\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this;\r\n\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_BG_HIVEJOB\");\r\n\t\t\r\n\t\tpanel.moption = [\r\n\t\t\t{\r\n\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\ttitle: \"Advanced Option\",\r\n\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\tdefaults: {\r\n\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\tlabelPosition: \"top\"\r\n\t\t\t\t},\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\tfieldLabel: \"Hive SQL\",\r\n\t\t\t\t\t\tname: \"dsscript\",\r\n\t\t\t\t\t\theight: 150\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\t\tIG$.BC$hj/*hadoop_hivejob*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$.BC$scD/*hadoop_shellcommand*/ = $s.extend($s.window, {\r\n\t\r\n\tmodal: true,\r\n\tisWindow: true,\r\n\tregion:\"center\",\r\n\tlayout: \"fit\",\r\n\t\r\n\tclosable: false,\r\n\tresizable:false,\r\n\twidth: 500,\r\n\tautoHeight: true,\r\n\t\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\tmsgresult = me.down(\"[name=msgresult]\");\r\n\t\t\t\r\n\t\tmsgresult.setValue(me.msg);\r\n\t},\r\n\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this;\r\n\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_BG_SCR\");\r\n\t\t\r\n\t\t$s.apply(this, {\r\n\t\t\tdefaults:{bodyStyle:\"padding:10px\"},\r\n\t\t\t\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"form\",\r\n\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\tanchor: \"100%\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\t\tname: \"msgresult\",\r\n\t\t\t\t\t\t\theight: 200\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tbuttons:[\r\n\t\t\t\t\"->\",\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CLOSE\"),\r\n\t\t\t\t\thandler:function() {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tlisteners: {\r\n\t\t\t\tafterrender: function(ui) {\r\n\t\t\t\t\tvar panel = this;\r\n\t\t\t\t\tpanel.init_f();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tIG$.BC$scD/*hadoop_shellcommand*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});\r\n\r\nBC$sc = $s.extend(IG$.BC$base/*hadoop_dlg_base*/, {\r\n\r\n\tregion:\"center\",\r\n\tlayout: \"fit\",\r\n\r\n\tautoHeight: true,\r\n\t\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job;\r\n\t\t\r\n\t\tme.dsscript = me.down(\"[name=dsscript]\");\r\n\t\t\r\n\t\tBC$sc.superclass.init_f.call(me, arguments);\r\n\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tme.dsscript.setValue(Base64.decode(job.dsscript));\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job;\r\n\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tjob.dsscript = Base64.encode(me.dsscript.getValue());\r\n\t\t}\r\n\t\t\r\n\t\tme.closeDlg();\r\n\t},\r\n\t\r\n\tcloseDlg: function() {\r\n\t\tvar me = this;\r\n\t\tme.callback && me.callback.execute(me.job);\r\n\t\tme.fireEvent(\"close_dlg\", me);\r\n\t},\r\n\t\r\n\tts/*testShellCommand*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tpanel = this,\r\n\t\t\tdsscript = me.dsscript.getValue(),\r\n\t\t\treq = new IG$._rpc$(),\r\n\t\t\tcnt = {\r\n\t\t\t\tsid: me.job.sid,\r\n\t\t\t\tcommand: Base64.encode(dsscript)\r\n\t\t\t};\r\n\t\t\r\n\t\treq.init(panel, \r\n\t\t\t{\r\n\t\t\t\tack: \"bizop\",\r\n\t\t\t\tpayload: {sid: me.job.sid, option: \"command\"},\r\n\t\t\t\tmbody: cnt\r\n\t\t\t}, panel, panel.rs_ts/*testShellCommand*/, null);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_ts/*testShellCommand*/: function(xdoc) {\r\n\t\tvar me = this,\r\n\t\t\ttnode = IG$.XGetNode(xdoc, \"/smsg\"),\r\n\t\t\ttnodes = tnode ? IG$.XGetChildNodes(tnode) : null,\r\n\t\t\terrmsg,\r\n\t\t\tsnode,\r\n\t\t\tmsg, i, tmsg,\r\n\t\t\thaserr = false;\r\n\t\t\t\r\n\t\tif (tnodes)\r\n\t\t{\r\n\t\t\tfor (i=0; i < tnodes.length; i++)\r\n\t\t\t{\r\n\t\t\t\tsnode = IG$._I19/*getSubNode*/(tnodes[i], \"errormessage\");\r\n\t\t\t\t\r\n\t\t\t\tif (snode)\r\n\t\t\t\t{\r\n\t\t\t\t\tmsg = IG$.XGetTextVal(snode);\r\n\t\t\t\t\tmsg = Base64.decode(msg);\r\n\t\t\t\t\thaserr = true;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tsnode = IG$._I19/*getSubNode*/(tnodes[i], \"message\");\r\n\t\t\t\t\tif (snode)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmsg = IG$.XGetTextVal(snode);\r\n\t\t\t\t\t\tmsg = Base64.decode(msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttmsg = (tmsg) ? tmsg + \"\\n\" + msg : msg;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar dlg = new IG$.BC$scD/*hadoop_shellcommand*/({\r\n\t\t\t\tmsg: tmsg\r\n\t\t\t});\r\n\t\t\tIG$.checkLogin(this, dlg);\r\n\t\t\t\r\n\t\t\tif (haserr == true)\r\n\t\t\t{\r\n\t\t\t\tIG$.alertmsg(ig$.appname, \"One or more command failed. See log for detail\", null, me, null, null, 1, \"error\");\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this;\r\n\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_BG_SC\");\r\n\t\t\r\n\t\tpanel.moption = [\r\n\t\t\t{\r\n\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\ttitle: \"Advanced Option\",\r\n\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\tdefaults: {\r\n\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\tlabelPosition: \"top\"\r\n\t\t\t\t},\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\tfieldLabel: \"Shell Command\",\r\n\t\t\t\t\t\tname: \"dsscript\",\r\n\t\t\t\t\t\theight: 150\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\ttext: \"Test command\",\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tvar me = this;\r\n\t\t\t\t\t\t\t\t\tme.ts/*testShellCommand*/();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\t\tBC$sc.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$.BC$op/*hadoop_output*/ = $s.extend(IG$.BC$base/*hadoop_dlg_base*/, {\r\n\tregion:\"center\",\r\n\tlayout: \"fit\",\r\n\t\r\n\tautoHeight: true,\r\n\t\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job;\r\n\t\t\r\n\t\tme.dsfname = me.down(\"[name=dsfname]\");\r\n\t\tme.dscnames = me.down(\"[name=dscnames]\");\r\n\t\tme.dsmname = me.down(\"[name=dsmname]\");\r\n\t\tme.dsruntype = me.down(\"[name=dsruntype]\");\r\n\t\tme.dsdelim = me.down(\"[name=dsdelim]\");\r\n\t\tme.dsdelimval = me.down(\"[name=dsdelimval]\");\r\n\t\tme.dstcube = me.down(\"[name=dstcube]\");\r\n\t\tme.dsmeasuredelim = me.down(\"[name=dsmeasuredelim]\");\r\n\t\tme.dsmeasuredelimval = me.down(\"[name=dsmeasuredelimval]\");\r\n\t\tme.dscsdatause = me.down(\"[name=dscsdatause]\");\r\n\t\tme.dscsdatafile = me.down(\"[name=dscsdatafile]\");\r\n\t\t\r\n\t\tIG$.BC$op/*hadoop_output*/.superclass.init_f.call(me, arguments);\r\n\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tme.dsfname.setValue(job.dsfname);\r\n\t\t\tme.dscnames.setValue(job.dscnames);\r\n\t\t\tme.dsmname.setValue(job.dsmname);\r\n\t\t\tme.dsruntype.setValue(job.dsruntype);\r\n\t\t\tme.dsdelim.setValue(job.dsdelim);\r\n\t\t\tme.dsdelimval.setValue(job.dsdelimval);\r\n\t\t\tme.dstcube.setValue(job.dstcube);\r\n\t\t\tme.dstcubeuid = job.dstcubeuid;\r\n\t\t\tme.dsmeasuredelim.setValue(job.dsmeasuredelim);\r\n\t\t\tme.dsmeasuredelimval.setValue(job.dsmeasuredelimval);\r\n\t\t\tme.dscsdatause.setValue(job.dscsdatause == \"T\");\r\n\t\t\tme.dscsdatafile.setValue(job.dscsdatafile);\r\n\t\t\t\r\n\t\t\tme.dscsdatafile.setVisible(job.dscsdatause == \"T\");\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job;\r\n\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tjob.dsfname = me.dsfname.getValue();\r\n\t\t\tjob.dscnames = me.dscnames.getValue();\r\n\t\t\tjob.dsmname = me.dsmname.getValue();\r\n\t\t\tjob.dsruntype = me.dsruntype.getValue();\r\n\t\t\tjob.dsdelim = me.dsdelim.getValue();\r\n\t\t\tjob.dsdelimval = me.dsdelimval.getValue();\r\n\t\t\tjob.dstcube = me.dstcube.getValue();\r\n\t\t\tjob.dstcubeuid = me.dstcubeuid;\r\n\t\t\tjob.dsmeasuredelim = me.dsmeasuredelim.getValue();\r\n\t\t\tjob.dsmeasuredelimval = me.dsmeasuredelimval.getValue();\r\n\t\t\tjob.dscsdatause = me.dscsdatause.getValue() == true ? \"T\" : \"F\";\r\n\t\t\tjob.dscsdatafile = me.dscsdatafile.getValue();\r\n\t\t}\r\n\t\t\r\n\t\tme.closeDlg();\r\n\t},\r\n\t\r\n\tcloseDlg: function() {\r\n\t\tvar me = this;\r\n\t\tme.callback && me.callback.execute(me.job);\r\n\t\tme.fireEvent(\"close_dlg\", me);\r\n\t},\r\n\t\r\n\tm1/*loadCubeSelection*/: function() {\r\n\t\tvar dlgitemsel = new IG$.metaSelectDlg({\r\n\t\t\tmode: \"newitem\"\r\n\t\t});\r\n\t\tdlgitemsel.callback = new IG$.callBackObj(this, this.rs_m1/*loadCubeSelection*/);\r\n\t\tIG$.checkLogin(this, dlgitemsel);\r\n\t},\r\n\t\r\n\trs_m1/*loadCubeSelection*/: function(item) {\r\n\t\tvar panel = this,\r\n\t\t\tcnt = {},\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\r\n\t\treq.init(panel, \r\n\t\t\t{\r\n\t\t\t\tack: \"writecontent\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\taddress: item.nodepath + \"/\" + item.name,\r\n\t\t\t\t\tname: item.name,\r\n\t\t\t\t\ttype: \"MCube\",\r\n\t\t\t\t\tpid: item.uid\r\n\t\t\t\t},\r\n\t\t\t\tmbody: cnt\r\n\t\t\t}, panel, panel.rs_m1b/*loadCubeSelection*/, panel.rs_m1a/*loadCubeSelection*/, [item.name, item.nodepath, item.uid, cnt]);\r\n\t\treq.showerror = false;\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_m1a/*loadCubeSelection*/: function(xdoc, opt) {\r\n\t\tvar panel = this,\r\n\t\t\titemname = opt[0],\r\n\t\t\tnodepath = opt[1],\r\n\t\t\tpitemuid = opt[2],\r\n\t\t\tcnt = opt[3],\r\n\t\t\terrcode = IG$.getErrorCode(xdoc);\r\n\t\t\r\n\t\tif (errcode == \"0x12e0\")\r\n\t\t{\r\n\t\t\tIG$.confirmMessages(ig$.appname, itemname + \" already exist on the server. Would you overwrite existing item with this copy?\", function(e) {\r\n\t\t\t\tif (e == \"yes\")\r\n\t\t\t\t{\r\n\t\t\t\t\tvar req = new IG$._rpc$();\r\n\t\t\t\t\treq.init(panel, \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tack: \"writecontent\",\r\n\t\t\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\t\t\taddress: nodepath + \"/\" + itemname,\r\n\t\t\t\t\t\t\t\tname: itemname,\r\n\t\t\t\t\t\t\t\ttype: \"MCube\",\r\n\t\t\t\t\t\t\t\tpid: pitemuid,\r\n\t\t\t\t\t\t\t\toverwrite: 'T'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmbody: cnt\r\n\t\t\t\t\t\t}, panel, panel.rs_m1b/*loadCubeSelection*/, null, [itemname, nodepath]);\r\n\t\t\t\t\treq.send();\r\n\t\t\t\t}\r\n\t\t\t}, panel, panel);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tIG$.ShowErrorMessage(xdoc, panel);\r\n\t\t}\r\n\t},\r\n\t\r\n\trs_m1b/*loadCubeSelection*/: function(xdoc, prop) {\r\n\t\tvar me = this,\r\n\t\t\ttnode = IG$.XGetNode(xdoc, \"/smsg/item\"),\r\n\t\t\tp = (tnode ? IG$.XGetAttrProp(tnode) : null);\r\n\t\t\t\r\n\t\tif (p)\r\n\t\t{\r\n\t\t\tme.dstcube.setValue(p.nodepath || p.name);\r\n\t\t\tme.dstcubeuid = p.uid;\r\n\t\t}\r\n\t},\r\n\t\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this;\r\n\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_BG_OP\");\r\n\t\t\r\n\t\tpanel.moption = [\r\n\t\t\t{\r\n\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\ttitle: \"Advanced Option\",\r\n\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\tdefaults: {\r\n\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\tlabelPosition: \"top\"\r\n\t\t\t\t},\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\tfieldLabel: \"Data name\",\r\n\t\t\t\t\t\tname: \"dsfname\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\tname: \"dsruntype\",\r\n\t\t\t\t\t\tfieldLabel: \"Run type\",\r\n\t\t\t\t\t\tqueryMode: \"local\",\r\n\t\t\t\t\t\tdisplayField: \"name\",\r\n\t\t\t\t\t\tvalueField: \"value\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\"name\", \"value\",\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t// {name: \"View in Report\", value: \"R_REPORT\"},\r\n\t\t\t\t\t\t\t\t{name: \"Load in database\", value: \"R_LOAD_DB\"},\r\n\t\t\t\t\t\t\t\t{name: \"Create M-Cube\", value: \"R_M_CUBE\"}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\tchange: function() {\r\n\t\t\t\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\t\t\t\tdsruntype = me.dsruntype;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tme.down(\"[name=opt_cube]\").setVisible(dsruntype.getValue() == \"R_M_CUBE\");\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tfieldLabel: \"Custom datafile\",\r\n\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"checkbox\",\r\n\t\t\t\t\t\t\t\tboxLabel: IRm$.r1(\"B_ENABLE\"),\r\n\t\t\t\t\t\t\t\tname: \"dscsdatause\",\r\n\t\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\t\tchange: function() {\r\n\t\t\t\t\t\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\t\t\t\t\t\tdscsdatafile = me.dscsdatafile,\r\n\t\t\t\t\t\t\t\t\t\t\tdscsdatause = me.dscsdatause;\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tdscsdatafile.setVisible(dscsdatause.getValue() == true);\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\tname: \"dscsdatafile\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\tname: \"dscnames\",\r\n\t\t\t\t\t\tfieldLabel: \"Extra column names\",\r\n\t\t\t\t\t\theight: 50\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\tname: \"dsmname\",\r\n\t\t\t\t\t\tfieldLabel: \"Measure column\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\tname: \"dsdelim\",\r\n\t\t\t\t\t\t\t\tfieldLabel: \"Field delimiter\",\r\n\t\t\t\t\t\t\t\tqueryMode: \"local\",\r\n\t\t\t\t\t\t\t\tvalueField: \"value\",\r\n\t\t\t\t\t\t\t\tdisplayField: \"name\",\r\n\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\tlabelPosition: \"top\",\r\n\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t{name: \"Comma\", value: \"comma\"},\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t{name: \"Custom value\", value: \"\"},\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t{name: \"Tab\", value: \"tab\"},\r\n\t\t\t\t\t\t\t\t\t\t{name: \"New line\", value: \"newline\"}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\t\tchange: function() {\r\n\t\t\t\t\t\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\t\t\t\t\t\tdsdelim = me.dsdelim,\r\n\t\t\t\t\t\t\t\t\t\t\tdsdelimval = me.dsdelimval;\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tdsdelimval.setVisible(dsdelim.getValue() == \"\");\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\tname: \"dsdelimval\",\r\n\t\t\t\t\t\t\t\tfieldLabel: \"\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\talign: \"stretch\",\r\n\t\t\t\t\t\t\tlabelPosition: \"top\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\tname: \"dsmeasuredelim\",\r\n\t\t\t\t\t\t\t\tfieldLabel: \"Measure delimiter\",\r\n\t\t\t\t\t\t\t\tqueryMode: \"local\",\r\n\t\t\t\t\t\t\t\tvalueField: \"value\",\r\n\t\t\t\t\t\t\t\tdisplayField: \"name\",\r\n\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t{name: \"Comma\", value: \"comma\"},\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t{name: \"Custom value\", value: \"\"},\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t{name: \"Tab\", value: \"tab\"},\r\n\t\t\t\t\t\t\t\t\t\t{name: \"New line\", value: \"newline\"}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\t\tchange: function() {\r\n\t\t\t\t\t\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\t\t\t\t\t\tdsmeasuredelim = me.dsmeasuredelim,\r\n\t\t\t\t\t\t\t\t\t\t\tdsmeasuredelimval = me.dsmeasuredelimval;\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tdsmeasuredelimval.setVisible(dsmeasuredelim.getValue() == \"\");\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\tname: \"dsmeasuredelimval\",\r\n\t\t\t\t\t\t\t\tfieldLabel: \"\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tname: \"opt_cube\",\r\n\t\t\t\t\t\tfieldLabel: \"Cube\",\r\n\t\t\t\t\t\tlabelPosition: \"top\",\r\n\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\t\tname: \"dstcube\",\r\n\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\tname: \"btn_cube\",\r\n\t\t\t\t\t\t\t\ttext: \"Create Cube\",\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tvar me = this;\r\n\t\t\t\t\t\t\t\t\tme.m1/*loadCubeSelection*/();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\t\t\r\n\t\tIG$.BC$op/*hadoop_output*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$.BC$mr/*hadoop_mapreduce*/ = $s.extend(IG$.BC$base/*hadoop_dlg_base*/, {\r\n\tregion:\"center\",\r\n\tlayout: \"fit\",\r\n\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job,\r\n\t\t\tgrdparams, i, data=[],\r\n\t\t\tparam, n,\r\n\t\t\thinput = false, houtput = false;\r\n\t\t\r\n\t\tme.dsmapper = me.down(\"[name=dsmapper]\");\r\n\t\tme.grdparams = me.down(\"[name=grdparams]\");\r\n\t\t\r\n\t\tIG$.BC$mr/*hadoop_mapreduce*/.superclass.init_f.call(me, arguments);\r\n\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tme.dsmapper.setValue(job.dsmapper);\r\n\t\t\tgrdparams = (job.confparams ? job.confparams.split(\"|\") : null);\r\n\t\t\t\r\n\t\t\tif (grdparams)\r\n\t\t\t{\r\n\t\t\t\tfor (i=0; i < grdparams.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tparam = {};\r\n\t\t\t\t\tn = grdparams[i].indexOf(\"=\");\r\n\t\t\t\t\tparam.name = n > -1 ? grdparams[i].substring(0, n) : \"\";\r\n\t\t\t\t\tparam.value = n > -1 ? grdparams[i].substring(n+1) : \"\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (param.name)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (param.name == \"input\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\thinput = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (param.name == \"output\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\thoutput = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdata.push(param);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!hinput)\r\n\t\t\t{\r\n\t\t\t\tdata.push({\r\n\t\t\t\t\t\"name\": \"input\",\r\n\t\t\t\t\t\"value\": \"\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!houtput)\r\n\t\t\t{\r\n\t\t\t\tdata.push({\r\n\t\t\t\t\t\"name\": \"output\",\r\n\t\t\t\t\t\"value\": \"\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tme.grdparams.store.loadData(data);\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job,\r\n\t\t\tgrdparams = me.grdparams, \r\n\t\t\tp, confparams = [],\r\n\t\t\tparam, i;\r\n\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tjob.dsmapper = me.dsmapper.getValue();\r\n\t\t\t\r\n\t\t\tfor (i=0; i < grdparams.store.data.items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tp = grdparams.store.data.items[i];\r\n\t\t\t\tif (p.get(\"name\")) \r\n\t\t\t\t{\r\n\t\t\t\t\tconfparams.push(p.get(\"name\") + \"=\" + p.get(\"value\"));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tjob.confparams = confparams.join(\"|\");\r\n\t\t}\r\n\t\t\r\n\t\tme.closeDlg();\r\n\t},\r\n\t\r\n\tcloseDlg: function() {\r\n\t\tvar me = this;\r\n\t\tme.callback && me.callback.execute(me.job);\r\n\t\tme.fireEvent(\"close_dlg\", me);\r\n\t},\r\n\t\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this;\r\n\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_BG_MR\");\r\n\t\t\r\n\t\tpanel.moption = [\r\n\t\t\t{\r\n\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\ttitle: \"Advanced Option\",\r\n\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\tdefaults: {\r\n\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\tlabelPosition: \"top\"\r\n\t\t\t\t},\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tfieldLabel: \"MapRed\",\r\n\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\t\tname: \"dsmapper\",\r\n\t\t\t\t\t\t\t\temptyText: IRm$.r1(\"M_SEL_ITEM\"),\r\n\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\t// text: \"..\",\r\n\t\t\t\t\t\t\t\ticonCls: \"icon-toolbar-search\",\r\n\t\t\t\t\t\t\t\ttooltip: IRm$.r1(\"B_SEARCH\"),\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tthis.GG1/*getMapClasses*/(this.dsmapper);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"displayfield\",\r\n\t\t\t\t\t\tvalue: \"Configuration Parameters\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"gridpanel\",\r\n\t\t\t\t\t\tname: \"grdparams\",\r\n\t\t\t\t\t\theight: 120,\r\n\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselType: \"checkboxmodel\",\r\n\t\t\t\t\t\tselModel: {\r\n\t\t\t\t\t\t\tcheckSelector: \".x-grid-cell\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tplugins: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tptype: \"cellediting\",\r\n\t\t\t\t\t\t\t\tclicksToEdit: false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_NAME\"),\r\n\t\t\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t\t\t\tdataIndex: \"name\",\r\n\t\t\t\t\t\t\t\teditor: {\r\n\t\t\t\t\t\t\t\t\tallowBlank: false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_VALUE\"),\r\n\t\t\t\t\t\t\t\tdataIndex: \"value\",\r\n\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\teditor: {\r\n\t\t\t\t\t\t\t\t\tallowBlank: true\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\ttbar: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\ttext: \"Add param\",\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tvar grd = this.grdparams;\r\n\t\t\t\t\t\t\t\t\tgrd.store.add({\r\n\t\t\t\t\t\t\t\t\t\tname: \"\",\r\n\t\t\t\t\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"L_REMOVE_SELECTED\"),\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tvar grd = this.grdparams,\r\n\t\t\t\t\t\t\t\t\t\tselection = grd.getSelectionModel().getSelection();\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (i=selection.length-1; i>=0; i--)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tgrd.store.remove(selection[i]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\t\tIG$.BC$mr/*hadoop_mapreduce*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});\r\n\r\n\r\n\r\n\r\n","IG$.BC$mr1/*mongo_mapreduce*/ = $s.extend(IG$.BC$base/*hadoop_dlg_base*/, {\r\n\tregion:\"center\",\r\n\tlayout: \"fit\",\r\n\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job,\r\n\t\t\tgrdparams, i, data=[],\r\n\t\t\tparam, n,\r\n\t\t\tpval, aval;\r\n\t\t\r\n\t\tme.grdparams = me.down(\"[name=grdparams]\");\r\n\t\tme.rowregex = me.down(\"[name=rowregex]\");\r\n\t\tme.rowsample = me.down(\"[name=rowsample]\");\r\n\t\tme.mrtype = me.down(\"[name=mrtype]\");\r\n\t\t\r\n\t\tIG$.BC$mr1/*mongo_mapreduce*/.superclass.init_f.call(me, arguments);\r\n\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tme.mrtype.setValue(job.mrtype || \"regex\");\r\n\t\t\tme.rowregex.setValue(job.rowregex);\r\n\t\t\tme.rowsample.setValue(job.rowsample);\r\n\t\t\t\r\n\t\t\tgrdparams = (job.cfields ? job.cfields.split(\"|\") : null);\r\n\t\t\t\r\n\t\t\tif (grdparams)\r\n\t\t\t{\r\n\t\t\t\tfor (i=0; i < grdparams.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tparam = {};\r\n\t\t\t\t\tn = grdparams[i].indexOf(\"=\");\r\n\t\t\t\t\tparam.name = n > -1 ? grdparams[i].substring(0, n) : \"\";\r\n\t\t\t\t\tpval = n > -1 ? grdparams[i].substring(n+1) : \"\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (pval.indexOf(\"^\") > -1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\taval = pval.split(\"^\");\r\n\t\t\t\t\t\tparam.value = aval[0];\r\n\t\t\t\t\t\tif (aval.length > 1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tparam.isdate = aval[1] == \"T\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (aval.length > 2)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tparam.dformat = aval[2];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tparam.value = pval;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (param.name)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata.push(param);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tme.grdparams.store.loadData(data);\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job,\r\n\t\t\tgrdparams = me.grdparams, \r\n\t\t\tp, cfields = [],\r\n\t\t\tparam, i;\r\n\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tjob.mrtype = me.mrtype.getValue();\r\n\t\t\tjob.rowregex = me.rowregex.getValue();\r\n\t\t\tjob.rowsample = me.rowsample.getValue();\r\n\t\t\t\r\n\t\t\tfor (i=0; i < grdparams.store.data.items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tp = grdparams.store.data.items[i];\r\n\t\t\t\tif (p.get(\"name\")) \r\n\t\t\t\t{\r\n\t\t\t\t\tcfields.push(p.get(\"name\") + \"=\" + p.get(\"value\") + \"^\" + (p.get(\"isdate\") ? \"T\" : \"F\") + \"^\" + (p.get(\"dformat\") || \"\"));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tjob.cfields = cfields.join(\"|\");\r\n\t\t}\r\n\t\t\r\n\t\tme.closeDlg();\r\n\t},\r\n\t\r\n\tcloseDlg: function() {\r\n\t\tvar me = this;\r\n\t\tme.callback && me.callback.execute(me.job);\r\n\t\tme.fireEvent(\"close_dlg\", me);\r\n\t},\r\n\t\r\n\t_g1/*getSampleData*/: function() {\r\n\t\tvar me = this,\r\n\t\t\treq = new IG$._rpc$(),\r\n\t\t\tcnt = {\r\n\t\t\t\tmrtype: me.mrtype.getValue(),\r\n\t\t\t\trowregex: me.rowregex.getValue(),\r\n\t\t\t\trowsample: me.rowsample.getValue()\r\n\t\t\t};\r\n\t\t\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"helpcontent\",\r\n\t\t\t\tpayload: {},\r\n\t\t\t\tmbody: cnt\r\n\t\t\t}, me, function(xdoc) {\r\n\t\t\t\tvar tnode = IG$.XGetNode(xdoc, \"/smsg/results/fields\"),\r\n\t\t\t\t\ttnodes = IG$.XGetChildNodes(tnode),\r\n\t\t\t\t\ti, dp = [], p, pval,\r\n\t\t\t\t\tgrdparams = me.grdparams;\r\n\t\t\t\t\t\r\n\t\t\t\tfor (i=0; i < tnodes.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tpval = IG$.XGetTextVal(tnodes[i]);\r\n\t\t\t\t\tdp.push({name: pval, value: pval});\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\tgrdparams.store.loadData(dp);\r\n\t\t\t});\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\t_g2/*getDateFormat*/: function(rec) {\r\n\t\tvar me = this,\r\n\t\t\treq = new IG$._rpc$(),\r\n\t\t\tcnt = {\r\n\t\t\t\toption: 'date_format',\r\n\t\t\t\tdate: rec.get(\"value\")\r\n\t\t\t};\r\n\t\t\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"helpcontent\",\r\n\t\t\t\tpayload: {},\r\n\t\t\t\tmbody: cnt\r\n\t\t\t}, me, function(xdoc) {\r\n\t\t\t\tvar tnode = IG$.XGetNode(xdoc, \"/smsg/results\"),\r\n\t\t\t\t\ttnodes = IG$.XGetChildNodes(tnode),\r\n\t\t\t\t\ti, dp = [], p, pval;\r\n\t\t\t\t\t\r\n\t\t\t\tfor (i=0; i < tnodes.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tpval = IG$.XGetTextVal(tnodes[i]);\r\n\t\t\t\t\tdp.push(pval);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (dp.length)\r\n\t\t\t\t{\r\n\t\t\t\t\trec.set(\"dformat\", dp[0]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\treq.send();\r\n\t},\r\n\t\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this;\r\n\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_BG_MR\");\r\n\t\t\r\n\t\tpanel.moption = [\r\n\t\t\t{\r\n\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\ttitle: \"Advanced Option\",\r\n\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\tdefaults: {\r\n\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\tlabelPosition: \"top\"\r\n\t\t\t\t},\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\tname: \"mrtype\",\r\n\t\t\t\t\t\tfieldLabel: \"Data Processor Type\",\r\n\t\t\t\t\t\tqueryMode: \"local\",\r\n\t\t\t\t\t\tdisplayField: \"name\",\r\n\t\t\t\t\t\tvalueField: \"value\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t{name: \"RegEx\", value: \"regex\", selected: 1},\r\n\t\t\t\t\t\t\t\t{name: \"Delimiter\", value: \"delimiter\"}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\tchange: function(tobj) {\r\n\t\t\t\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\t\t\t\ttval = tobj.getValue(),\r\n\t\t\t\t\t\t\t\t\tf_f1 = me.down(\"[name=f_f1]\"),\r\n\t\t\t\t\t\t\t\t\tf_f2 = me.down(\"[name=f_f2]\");\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tf_f1.setVisible(tval == \"regex\");\r\n\t\t\t\t\t\t\t\tf_f2.setVisible(tval != \"regex\");\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\tname: \"f_f1\",\r\n\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\t\t\tlabelPosition: \"top\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\t\t\tname: \"rowregex\",\r\n\t\t\t\t\t\t\t\theight: 80,\r\n\t\t\t\t\t\t\t\tfieldLabel: \"Data Row RegEx\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"displayfield\",\r\n\t\t\t\t\t\t\t\tvalue: \"Ex: ^(\\\\\\\\S+) (\\\\\\\\S+) (\\\\\\\\S+) \\\\\\\\[(.*?)\\\\\\\\] \\\\\\\"(.*?)\\\\\\\" (\\\\\\\\S+) (\\\\\\\\S+)( \\\\\\\"(.*?)\\\" \\\\\\\"(.*?)\\\\\\\")?\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\tname: \"f_f2\",\r\n\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\t\t\tlabelPosition: \"top\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\t\tname: \"m_delim\",\r\n\t\t\t\t\t\t\t\tfieldLabel: \"Delimiter\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\tname: \"rowsample\",\r\n\t\t\t\t\t\theight: 80,\r\n\t\t\t\t\t\tfieldLabel: \"Sample Text\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\tpack: \"right\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\ttext: \"Get\",\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tthis._g1/*getSampleData*/();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"displayfield\",\r\n\t\t\t\t\t\tvalue: \"Output Fields\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"gridpanel\",\r\n\t\t\t\t\t\tname: \"grdparams\",\r\n\t\t\t\t\t\theight: 250,\r\n\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\"name\", \"value\", \"isdate\", \"dformat\"\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselType: \"checkboxmodel\",\r\n\t\t\t\t\t\tselModel: {\r\n\t\t\t\t\t\t\tcheckSelector: \".x-grid-cell\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tplugins: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tptype: \"cellediting\",\r\n\t\t\t\t\t\t\t\tclicksToEdit: false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_NAME\"),\r\n\t\t\t\t\t\t\t\tminWidth: 120,\r\n\t\t\t\t\t\t\t\tdataIndex: \"name\",\r\n\t\t\t\t\t\t\t\teditor: {\r\n\t\t\t\t\t\t\t\t\tallowBlank: false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_VALUE\"),\r\n\t\t\t\t\t\t\t\tdataIndex: \"value\",\r\n\t\t\t\t\t\t\t\tminWidth: 120,\r\n\t\t\t\t\t\t\t\teditor: {\r\n\t\t\t\t\t\t\t\t\tallowBlank: true\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"checkcolumn\",\r\n\t\t\t\t\t\t\t\ttext: \"Date\",\r\n\t\t\t\t\t\t\t\tdataIndex: \"isdate\",\r\n\t\t\t\t\t\t\t\twidth: 30,\r\n\t\t\t\t\t\t\t\tminWidth: 30,\r\n\t\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\t\tcheckchange: function(tobj, rowindex, checked, eopts) {\r\n\t\t\t\t\t\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\t\t\t\t\t\trec = me.grdparams.store.data.items[rowindex];\r\n\t\t\t\t\t\t\t\t\t\tif (checked && rec && !rec.get(\"dformat\") && rec.get(\"value\"))\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tme._g2/*getDateFormat*/(rec);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Format\",\r\n\t\t\t\t\t\t\t\tminWidth: 70,\r\n\t\t\t\t\t\t\t\tdataIndex: \"dformat\",\r\n\t\t\t\t\t\t\t\teditor: {\r\n\t\t\t\t\t\t\t\t\tallowBlank: true,\r\n\t\t\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\t\t\tedit: function(editor, context, eopts) {\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\ttbar: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\ttext: \"Add param\",\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tvar grd = this.grdparams;\r\n\t\t\t\t\t\t\t\t\tgrd.store.add({\r\n\t\t\t\t\t\t\t\t\t\tname: \"\",\r\n\t\t\t\t\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"L_REMOVE_SELECTED\"),\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tvar grd = this.grdparams,\r\n\t\t\t\t\t\t\t\t\t\tselection = grd.getSelectionModel().getSelection();\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (i=selection.length-1; i>=0; i--)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tgrd.store.remove(selection[i]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\t\tIG$.BC$mr1/*mongo_mapreduce*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$.BC$mr2/*mongo_document*/ = $s.extend(IG$.BC$base/*hadoop_dlg_base*/, {\r\n\tregion:\"center\",\r\n\tlayout: \"fit\",\r\n\t\r\n\tautoHeight: true,\r\n\t\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job,\r\n\t\t\tgrdparams, i, data=[],\r\n\t\t\tparam, n;\r\n\t\t\r\n\t\tme.grdparams = me.down(\"[name=grdparams]\");\r\n\t\tme.doctmpl = me.down(\"[name=doctmpl]\");\r\n\t\tme.mrnode = me.down(\"[name=mrnode]\");\r\n\t\tme.mrdb = me.down(\"[name=mrdb]\");\r\n\t\tme.mrcol = me.down(\"[name=mrcol]\");\r\n\t\tme.mrdocname = me.down(\"[name=mrdocname]\");\r\n\t\tme.mrsmode = me.down(\"[name=mrsmode]\");\r\n\t\t\r\n\t\tIG$.BC$mr2/*mongo_document*/.superclass.init_f.call(me, arguments);\r\n\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tme.doctmpl.setValue(job.doctmpl);\r\n\t\t\tme.mrdb.setValue(job.mrdb);\r\n\t\t\tme.mrcol.setValue(job.mrcol);\r\n\t\t\tme.mrdocname.setValue(job.mrdocname);\r\n\t\t\tme.mrsmode.setValue(job.mrsmode || \"\");\r\n\t\t\t\r\n\t\t\tgrdparams = (job.confparams ? job.confparams.split(\"|\") : null);\r\n\t\t\t\r\n\t\t\tif (grdparams)\r\n\t\t\t{\r\n\t\t\t\tfor (i=0; i < grdparams.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tparam = {};\r\n\t\t\t\t\tn = grdparams[i].indexOf(\"=\");\r\n\t\t\t\t\tparam.name = n > -1 ? grdparams[i].substring(0, n) : \"\";\r\n\t\t\t\t\tparam.value = n > -1 ? grdparams[i].substring(n+1) : \"\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (param.name)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata.push(param);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tme.grdparams.store.loadData(data);\r\n\t\t\t\r\n\t\t\tme.l1/*loadMongoDB*/();\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job,\r\n\t\t\tgrdparams = me.grdparams, \r\n\t\t\tp, confparams = [],\r\n\t\t\tparam, i;\r\n\t\t\r\n\t\tif (job)\r\n\t\t{\r\n\t\t\tjob.mrnode = me.mrnode.getValue();\r\n\t\t\tjob.doctmpl = me.doctmpl.getValue();\r\n\t\t\tjob.mrdb = me.mrdb.getValue();\r\n\t\t\tjob.mrcol = me.mrcol.getValue();\r\n\t\t\tjob.mrdocname = me.mrdocname.getValue();\r\n\t\t\tjob.mrsmode = me.mrsmode.getValue();\r\n\t\t\t\r\n\t\t\tfor (i=0; i < grdparams.store.data.items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tp = grdparams.store.data.items[i];\r\n\t\t\t\tif (p.get(\"name\")) \r\n\t\t\t\t{\r\n\t\t\t\t\tconfparams.push(p.get(\"name\") + \"=\" + p.get(\"value\"));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tjob.confparams = confparams.join(\"|\");\r\n\t\t}\r\n\t\t\r\n\t\tme.closeDlg();\r\n\t},\r\n\t\r\n\tcloseDlg: function() {\r\n\t\tvar me = this;\r\n\t\tme.callback && me.callback.execute(me.job);\r\n\t\tme.fireEvent(\"close_dlg\", me);\r\n\t},\r\n\t\r\n\tl1/*loadMongoDB*/: function() {\r\n\t\tvar me = this,\r\n\t\t\treq = new IG$._rpc$(),\r\n\t\t\tmrnode = me.mrnode;\r\n\t\t\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"tablecontent\",\r\n\t\t\t\tpayload: {uid: me.uid, dbtype: \"mongodb\", option: \"nosqldb_node\"},\r\n\t\t\t\tmbody: {}\r\n\t\t\t}, me, function(xdoc) {\r\n\t\t\t\tvar tnode = IG$.XGetNode(xdoc, \"/smsg\"),\r\n\t\t\t\t\ttnodes = IG$.XGetChildNodes(tnode),\r\n\t\t\t\t\ti, dp = [{name: IRm$.r1(\"B_SELECT\"), nodename: \"\"}], p;\r\n\t\t\t\t\t\r\n\t\t\t\tfor (i=0; i < tnodes.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tp = IG$.XGetAttrProp(tnodes[i]);\r\n\t\t\t\t\tp.nodename = p.nodename || p.name;\r\n\t\t\t\t\tdp.push(p);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tmrnode.store.loadData(dp);\r\n\t\t\t\tmrnode.setValue(me.job.mrnode || \"\");\r\n\t\t\t}, null);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\tm1/*getProcessing*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tp = me._p/*editor*/,\r\n\t\t\tmitems,\r\n\t\t\tcfields,\r\n\t\t\tmfields = [],\r\n\t\t\ti, j, n, v, av, mp,\r\n\t\t\tmval,\r\n\t\t\tdoctmpl = me.down(\"[name=doctmpl]\");\r\n\t\t\t\r\n\t\tmitems = p.m2/*getParents*/.call(p, me, \"mongoreduce\");\r\n\t\t\r\n\t\tif (mitems && mitems.length)\r\n\t\t{\r\n\t\t\tcfields = mitems[0].cfields;\r\n\t\t\t\r\n\t\t\tif (cfields)\r\n\t\t\t{\r\n\t\t\t\tcfields = cfields.split(\"|\");\r\n\t\t\t\t\r\n\t\t\t\tfor (i=0; i < cfields.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tn = cfields[i];\r\n\t\t\t\t\tj = n.indexOf(\"=\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (j > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tv = n.substring(j+1);\r\n\t\t\t\t\t\tn = n.substring(0, j);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tav = n.split(\"^\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmp = {\r\n\t\t\t\t\t\t\tname: n,\r\n\t\t\t\t\t\t\tvalue: av[0]\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (av.length > 1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmp.is_date = av[1] == \"T\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (av.length > 2)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmp.dateformat = av[2];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmfields.push(mp);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tmval = \"\";\r\n\t\t\t\t\r\n\t\t\t\tfor (i=0; i < mfields.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tmval = (i == 0) ? mfields[i].name : mval + \"\\n\" + mfields[i].name;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tmval && doctmpl.setValue(mval);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this;\r\n\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_BG_MR\");\r\n\t\t\r\n\t\tpanel.moption = [\r\n\t\t\t{\r\n\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\ttitle: \"Advanced Option\",\r\n\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\tdefaults: {\r\n\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\tlabelPosition: \"top\"\r\n\t\t\t\t},\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\tname: \"mrnode\",\r\n\t\t\t\t\t\tfieldLabel: \"MongoData\",\r\n\t\t\t\t\t\tqueryMode: \"local\",\r\n\t\t\t\t\t\tdisplayField: \"name\",\r\n\t\t\t\t\t\tvalueField: \"nodename\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\"name\", \"nodename\", \"type\"\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\tchange: function(tobj) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\tfieldLabel: \"DB Name\",\r\n\t\t\t\t\t\tname: \"mrdb\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\tfieldLabel: \"Collection Name\",\r\n\t\t\t\t\t\tname: \"mrcol\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\tfieldLabel: \"Document Name\",\r\n\t\t\t\t\t\tname: \"mrdocname\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"displayfield\",\r\n\t\t\t\t\t\t\t\tvalue: \"Document\",\r\n\t\t\t\t\t\t\t\temptyText: IRm$.r1(\"M_SEL_ITEM\"),\r\n\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\t// text: \"..\",\r\n\t\t\t\t\t\t\t\ticonCls: \"icon-toolbar-search\",\r\n\t\t\t\t\t\t\t\ttooltip: IRm$.r1(\"B_SEARCH\"),\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tthis.m1/*getProcessing*/();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\tname: \"doctmpl\",\r\n\t\t\t\t\t\theight: 200\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\tname: \"mrsmode\",\r\n\t\t\t\t\t\tfieldLabel: \"Synchronous Write Policy\",\r\n\t\t\t\t\t\tqueryMode: \"local\",\r\n\t\t\t\t\t\tdisplayField: \"name\",\r\n\t\t\t\t\t\tvalueField: \"value\",\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t{name: \"Disabled\", value: \"\"},\r\n\t\t\t\t\t\t\t\t{name: \"Cache-Flush\", value: \"cf\"},\r\n\t\t\t\t\t\t\t\t{name: \"Direct-Write\", value: \"dw\"},\r\n\t\t\t\t\t\t\t\t{name: \"Direct-Write-With-Cache\", value: \"dwc\"}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"gridpanel\",\r\n\t\t\t\t\t\tname: \"grdparams\",\r\n\t\t\t\t\t\theight: 120,\r\n\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselType: \"checkboxmodel\",\r\n\t\t\t\t\t\tselModel: {\r\n\t\t\t\t\t\t\tcheckSelector: \".x-grid-cell\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tplugins: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tptype: \"cellediting\",\r\n\t\t\t\t\t\t\t\tclicksToEdit: false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_NAME\"),\r\n\t\t\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t\t\t\tdataIndex: \"name\",\r\n\t\t\t\t\t\t\t\teditor: {\r\n\t\t\t\t\t\t\t\t\tallowBlank: false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_VALUE\"),\r\n\t\t\t\t\t\t\t\tdataIndex: \"value\",\r\n\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\teditor: {\r\n\t\t\t\t\t\t\t\t\tallowBlank: true\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\ttbar: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\ttext: \"Add param\",\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tvar grd = this.grdparams;\r\n\t\t\t\t\t\t\t\t\tgrd.store.add({\r\n\t\t\t\t\t\t\t\t\t\tname: \"\",\r\n\t\t\t\t\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"L_REMOVE_SELECTED\"),\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tvar grd = this.grdparams,\r\n\t\t\t\t\t\t\t\t\t\tselection = grd.getSelectionModel().getSelection();\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (i=selection.length-1; i>=0; i--)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tgrd.store.remove(selection[i]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\t\tIG$.BC$mr2/*mongo_document*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$._Ia0/*hadoop_logviewer*/ = $s.extend($s.window, {\r\n\t\r\n\tmodal: false,\r\n\tisWindow: true,\r\n\tregion:\"center\",\r\n\tlayout: \"fit\",\r\n\t\r\n\tclosable: false,\r\n\tresizable:false,\r\n\twidth: 500,\r\n\tautoHeight: true,\r\n\t\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tif (me.uid)\r\n\t\t{\r\n\t\t\tme.rL/*refreshLog*/();\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.closeDlg();\r\n\t},\r\n\t\r\n\tcloseDlg: function() {\r\n\t\tvar me = this;\r\n\t\tme.callback && me.callback.execute(me.job);\r\n\t\tme.fireEvent(\"close_dlg\", me);\r\n\t},\r\n\t\r\n\trL/*refreshLog*/: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tif (me.uid)\r\n\t\t{\r\n\t\t\tvar me = this,\r\n\t\t\t\tlreq = new IG$._rpc$();\r\n\t\t\tlreq.init(me, \r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"hadoophelper\",\r\n\t\t\t\t\tpayload: {uid: me.uid},\r\n\t\t\t\t\tmbody: {option: \"loghistory\"}\r\n\t\t\t\t}, me, me.rs_rL/*refreshLog*/, false);\r\n\t\t\t\t\r\n\t\t\tlreq.send();\r\n\t\t}\r\n\t},\r\n\t\r\n\trs_rL/*refreshLog*/: function(xdoc) {\r\n\t\tvar me = this,\r\n\t\t\ttnode = IG$.XGetNode(xdoc, \"/smsg\"),\r\n\t\t\ttnodes = (tnode ? IG$.XGetChildNodes(tnode) : null),\r\n\t\t\ti, logs = [], l,\r\n\t\t\tgrdloghist = me.down(\"[name=grdloghist]\"),\r\n\t\t\tpdesc,\r\n\t\t\tduration, m, s, ms;\r\n\t\t\t\r\n\t\tif (tnodes)\r\n\t\t{\r\n\t\t\tfor (i=0; i < tnodes.length; i++)\r\n\t\t\t{\r\n\t\t\t\tl = IG$.XGetAttrProp(tnodes[i]);\r\n\t\t\t\tl.pstatus = parseInt(l.pstatus);\r\n\t\t\t\tl.created_desc = IG$.formatDate(l.created);\r\n\t\t\t\tl.updated_desc = IG$.formatDate(l.updated);\r\n\t\t\t\tduration = Number(l.duration);\r\n\t\t\t\tduration = isNaN(duration) ? null : duration;\r\n\t\t\t\tl.duration = me.gg2/*getDuration*/(duration);\r\n\t\t\t\t\r\n\t\t\t\tpdesc = me.gg1/*getStatusDesc*/(l.pstatus);\r\n\t\t\t\t\r\n\t\t\t\tl.pstatus_desc = pdesc;\r\n\t\t\t\tlogs.push(l);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tgrdloghist.store.loadData(logs);\r\n\t},\r\n\t\r\n\tgg1/*getStatusDesc*/: function(s) {\r\n\t\tvar pdesc = \"Unknown\";\r\n\t\tswitch (s)\r\n\t\t{\r\n\t\tcase 1:\r\n\t\t\tpdesc = \"Running\";\r\n\t\t\tbreak;\r\n\t\tcase 10:\r\n\t\t\tpdesc = \"Completed\";\r\n\t\t\tbreak;\r\n\t\tcase 20:\r\n\t\t\tpdesc = \"Error: No result\";\r\n\t\t\tbreak;\r\n\t\tcase 21:\r\n\t\t\tpdesc = \"Error: Dataformat mismatch\";\r\n\t\t\tbreak;\r\n\t\tcase 29:\r\n\t\t\tpdesc = \"Error: Execution failed\";\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\treturn pdesc;\r\n\t},\r\n\t\r\n\tgg2/*getDuration*/: function(duration) {\r\n\t\tvar r = null,\r\n\t\t\tm, s, ms;\r\n\t\t\r\n\t\tif (duration != null)\r\n\t\t{\r\n\t\t\tm = Math.floor(duration / (60*1000));\r\n\t\t\tduration -= m * (60*1000);\r\n\t\t\ts = Math.floor(duration / (1000));\r\n\t\t\tduration -= s * (1000);\r\n\t\t\tms = duration;\r\n\t\t\tr = (m>0 ? m + \"m \" : \"\") + (s>0 ? s + \"s \" : \"\") + (ms>-1 ? ms + \"ms\" : \"\");\r\n\t\t}\r\n\t\t\r\n\t\treturn r;\r\n\t},\r\n\t\r\n\tg1/*getLogDetail*/: function(sid) {\r\n\t\tvar me = this,\r\n\t\t\tlreq = new IG$._rpc$();\r\n\t\tlreq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"hadoophelper\",\r\n\t\t\t\tpayload: {sid: sid},\r\n\t\t\t\tmbody: {option: \"logjoblist\"}\r\n\t\t\t}, me, me.rs_g1/*getLogDetail*/, false);\r\n\t\t\t\r\n\t\tlreq.send();\r\n\t},\r\n\t\r\n\trs_g1/*getLogDetail*/: function(xdoc) {\r\n\t\tvar me = this,\r\n\t\t\ttnode = IG$.XGetNode(xdoc, \"/smsg\"),\r\n\t\t\ttnodes = (tnode ? IG$.XGetChildNodes(tnode) : null),\r\n\t\t\ti, dp = [],\r\n\t\t\tgrdjobhist = me.down(\"[name=grdjobhist]\"),\r\n\t\t\tl, pdesc, duration;\r\n\t\t\t\r\n\t\tif (tnodes)\r\n\t\t{\r\n\t\t\tfor (i=0; i < tnodes.length; i++)\r\n\t\t\t{\r\n\t\t\t\tl = IG$.XGetAttrProp(tnodes[i]);\r\n\t\t\t\tl.pstatus = parseInt(l.pstatus);\r\n\t\t\t\tl.created_desc = IG$.formatDate(l.created);\r\n\t\t\t\tl.updated_desc = IG$.formatDate(l.updated);\r\n\t\t\t\tpdesc = me.gg1/*getStatusDesc*/(l.pstatus);\r\n\t\t\t\tduration = Number(l.duration);\r\n\t\t\t\tduration = isNaN(duration) ? null : duration;\r\n\t\t\t\tl.duration = me.gg2/*getDuration*/(duration);\r\n\t\t\t\t\r\n\t\t\t\tl.pstatus_desc = pdesc;\r\n\t\t\t\t\r\n\t\t\t\tdp.push(l);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tgrdjobhist.store.loadData(dp);\r\n\t},\r\n\t\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this,\r\n\t\t\ti;\r\n\t\t\t\r\n\t\tpanel.title = IRm$.r1(\"L_LOG_VIEW\");\r\n\t\t\r\n\t\t\r\n\t\t$s.apply(this, {\r\n\t\t\tdefaults:{bodyStyle:\"padding:10px\"},\r\n\t\t\t\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\ttype: \"vbox\",\r\n\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\ttitle: \"Execution History\",\r\n\t\t\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"gridpanel\",\r\n\t\t\t\t\t\t\t\t\tname: \"grdloghist\",\r\n\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"store\",\r\n\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\"created\", \"updated\", \"sid\", \"duration\", \"pstatus\", \"created_desc\", \"updated_desc\", \"pstatus_desc\"\r\n\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\theight: 120,\r\n\t\t\t\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Started time\",\r\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"created_desc\",\r\n\t\t\t\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"End time\",\r\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"updated_desc\",\r\n\t\t\t\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Status\",\r\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"pstatus_desc\",\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 120\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\t\t\titemclick: function(view, record, item, index, e) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar sid = record.get(\"sid\");\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tif (sid)\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.g1/*getLogDetail*/(sid);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\ttitle: \"Log detail\",\r\n\t\t\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"gridpanel\",\r\n\t\t\t\t\t\t\t\t\tname: \"grdjobhist\",\r\n\t\t\t\t\t\t\t\t\theight: 240,\r\n\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\"sid\", \"duration\", \"jobtype\", \"pstatus\", \"created\", \"updated\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"pstatus_desc\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"created_desc\", \"updated_desc\"\r\n\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Job type\",\r\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"jobtype\",\r\n\t\t\t\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Duration\",\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 50,\r\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"duration\"\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Started time\",\r\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"created_desc\",\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 80\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"End time\",\r\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"updated_desc\",\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 80\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Status\",\r\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"pstatus_desc\",\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 80\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tbuttons:[\r\n//\t\t\t\t{\r\n//\t\t\t\t\ttext: IRm$.r1(\"B_HELP\"),\r\n//\t\t\t\t\thandler: function() {\r\n//\t\t\t\t\t\tIG$.showHelp(\"P0022\");\r\n//\t\t\t\t\t},\r\n//\t\t\t\t\tscope: this\r\n//\t\t\t\t}, \r\n\t\t\t\t\"->\",\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CLOSE\"),\r\n\t\t\t\t\thandler:function() {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tlisteners: {\r\n\t\t\t\tafterrender: function(ui) {\r\n\t\t\t\t\tvar panel = this;\r\n\t\t\t\t\tpanel.init_f();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tIG$._Ia0/*hadoop_logviewer*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$._I9e/*mr_javaclass*/ = function(xdoc) {\r\n\tthis.xdoc = xdoc;\r\n\tthis.P1/*parseContent*/();\r\n}\r\n\r\nIG$._I9e/*mr_javaclass*/.prototype = {\r\n\tP1/*parseContent*/: function() {\r\n\t\tvar me = this,\r\n\t\t\txdoc = me.xdoc,\r\n\t\t\ttnode;\r\n\t\t\r\n\t\tif (me.xdoc)\r\n\t\t{\r\n\t\t\ttnode = IG$.XGetNode(xdoc, \"/smsg/item\");\r\n\t\t\t\r\n\t\t\tif (tnode)\r\n\t\t\t{\r\n\t\t\t\tme.iteminfo = IG$.XGetAttrProp(tnode);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttnode = IG$.XGetNode(xdoc, \"/smsg/item/SourceCode\");\r\n\t\t\t\r\n\t\t\tif (tnode)\r\n\t\t\t{\r\n\t\t\t\tme.javasource = IG$.XGetTextVal(tnode);\r\n\t\t\t\tme.javasource = Base64.decode(me.javasource);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tP2/*getDefaultScript*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tr = \"\",\r\n\t\t\tpname = me.iteminfo.nodepath.split(\"/\");\r\n\t\t\r\n\t\tpname.splice(0, 2);\r\n\t\tpname.splice(pname.length-1, 1);\r\n\t\t\r\n\t\tr += \"package \" + pname.join(\".\") + \";\\n\\n\";\r\n\t\tr += \"public class \" + me.iteminfo.name + \"\\n\";\r\n\t\tr += \"{ \\n\";\r\n\t\tr += \"} \\n\";\r\n\t\t\r\n\t\treturn r;\r\n\t},\r\n\t\r\n\tl2/*toXMLString*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tr = {\r\n\t\t\t\tuid: me.iteminfo.uid,\r\n\t\t\t\tsourcecode: Base64.encode(me.javasource)\r\n\t\t\t};\r\n\t\t\r\n\t\treturn r;\r\n\t}\r\n}\r\n\r\nIG$.mr_javaeditor = $s.extend($s.panel, {\r\n\t\r\n\tclosable: true,\r\n\t\r\n\tlayout: \"border\",\r\n\tbodyPadding: 0,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.loadItemContent();\r\n\t},\r\n\t\r\n\tloadItemContent: function() {\r\n\t\tvar panel = this,\r\n\t\t\treq;\r\n\t\t\t\r\n\t\treq = new IG$._rpc$();\r\n\t\treq.init(panel, \r\n\t\t\t{\r\n\t\t\t\tack: \"content\",\r\n\t\t\t\tpayload: {uid: panel.uid},\r\n\t\t\t\tmbody: {option: \"standard\"}\r\n\t\t\t}, panel, panel.rs_loadItemContent, false);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_loadItemContent: function(xdoc) {\r\n\t\tvar me = this,\r\n\t\t\titem = new IG$._I9e/*mr_javaclass*/(xdoc),\r\n\t\t\tjdom,\r\n\t\t\tjdomeditor,\r\n\t\t\tjview,\r\n\t\t\tw, h;\r\n\t\t\t\r\n\t\tme.item = item;\r\n\t\tjdom = $(me.down(\"[name=javasrc]\").el.dom);\r\n\t\t// setValue(me.item.javasource || me.item.P2/*getDefaultScript*/());\r\n\t\tjdomeditor = $(\".idv-jcl-edtr\", jdom);\r\n\t\tjdomeditor.empty();\r\n\t\t\r\n\t\tw = IG$.j$ext._w(jdom);\r\n\t\th = IG$.j$ext._h(jdom);\r\n\t\t\r\n\t\tjview = $(\"<div class='idv-jcl-view'></div>\").appendTo(jdomeditor);\r\n\t\tIG$.j$ext._w(jview, w);\r\n\t\tIG$.j$ext._h(jview, h);\r\n\t\t\r\n\t\tif (!window.ace)\r\n\t\t{\r\n\t\t\tIG$.getScriptCache(ig$.bootconfig.scmap.igcg, new IG$.callBackObj(me, function() {\r\n\t\t\t\tvar editor = ace.edit(jview[0]);\r\n\t\t\t\teditor.getSession().setMode(\"ace/mode/java\");\r\n\t\t\t\t\r\n\t\t\t\teditor.setValue(me.item.javasource || me.item.P2/*getDefaultScript*/());\r\n\t\t\t\t\r\n\t\t\t\tme.scriptview = jview;\r\n\t\t\t\tme.scripteditor = editor;\r\n\t\t\t}));\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar editor = ace.edit(jview[0]);\r\n\t\t\teditor.getSession().setMode(\"ace/mode/java\");\r\n\t\t\t\r\n\t\t\teditor.setValue(me.item.javasource || me.item.P2/*getDefaultScript*/());\r\n\t\t\t\r\n\t\t\tme.scriptview = jview;\r\n\t\t\tme.scripteditor = editor;\r\n\t\t}\r\n\t},\r\n\t\r\n\tsaveMetaContent: function(smode) {\r\n\t\tvar panel = this,\r\n\t\t\treq = new IG$._rpc$(),\r\n\t\t\tcnt;\r\n\t\t\r\n\t\tpanel.item.javasource = panel.scripteditor.getValue(); // panel.down(\"[name=javasrc]\").getValue();\r\n\t\t\r\n\t\tcnt = panel.item.l2/*toXMLString*/.call(panel.item);\r\n\t\t\r\n\t\treq.init(panel, \r\n\t\t\t{\r\n\t\t\t\tack: \"writecontent\",\r\n\t\t\t\tpayload: {uid: panel.uid},\r\n\t\t\t\tmbody: cnt\r\n\t\t\t}, panel, panel.rs_saveMetaContent, null, smode);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_saveMetaContent: function(xdoc, smode) {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tif (smode == \"compile\")\r\n\t\t{\r\n\t\t\tme.doCompile();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tIG$.alertmsg(ig$.appname, IRm$.r1(\"M_SAVED\"), null, null, 0, \"success\");\r\n\t\t}\r\n\t},\r\n\t\r\n\tdoCompile: function() {\r\n\t\tvar panel = this,\r\n\t\t\treq = new IG$._rpc$(),\r\n\t\t\tcnt;\r\n\t\t\r\n\t\tcnt = panel.item.l2/*toXMLString*/.call(panel.item);\r\n\t\t\r\n\t\treq.init(panel, \r\n\t\t\t{\r\n\t\t\t\tack: \"bizop\",\r\n\t\t\t\tpayload: {uid: panel.uid, option: \"compile\"},\r\n\t\t\t\tmbody: cnt\r\n\t\t\t}, panel, panel.rs_doCompile, null);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_doCompile: function(xdoc) {\r\n\t\tvar me = this,\r\n\t\t\ttnode = IG$.XGetNode(xdoc, \"/smsg/result/errormessage\"),\r\n\t\t\terrmsg;\r\n\t\t\t\r\n\t\tif (tnode)\r\n\t\t{\r\n\t\t\terrmsg = IG$.XGetTextVal(tnode);\r\n\t\t\terrmsg = Base64.decode(errmsg);\r\n\t\t\tme.down(\"[name=compileres]\").setValue(errmsg);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tme.down(\"[name=compileres]\").setValue(\"Compiled Successfully\");\r\n\t\t}\r\n\t},\r\n\t\r\n\ttoolbarHandler: function(cmd) {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tswitch (cmd)\r\n\t\t{\r\n\t\tcase \"cmd_save\":\r\n\t\t\tme.saveMetaContent();\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_compile\":\r\n\t\t\tme.saveMetaContent(\"compile\");\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\r\n\tinitComponent: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\t$s.apply(this, {\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: \"javasrc\",\r\n\t\t\t\t\tregion: \"center\",\r\n\t\t\t\t\thtml: \"<div class='idv-jcl-edtr'></div>\",\r\n\t\t\t\t\tsplit: true,\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tresize: function(tobj, w, h, ow, oh, opts) {\r\n\t\t\t\t\t\t\tif (me.scriptview && me.scripteditor)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tIG$.j$ext._w(me.scriptview, w);\r\n\t\t\t\t\t\t\t\tIG$.j$ext._h(me.scriptview, h);\r\n\t\t\t\t\t\t\t\tme.scripteditor.resize(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\theight: 120,\r\n\t\t\t\t\tregion: \"south\",\r\n\t\t\t\t\tsplit: true,\r\n\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\ttitle: \"Compile result\",\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\t\tname: \"compileres\",\r\n\t\t\t\t\t\t\theight: 120,\r\n\t\t\t\t\t\t\tregion: \"south\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\ttbar: [\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: 'icon-toolbar-save',\r\n\t\t\t\t\tname: \"t_save\",\r\n\t\t\t\t\ttooltip: IRm$.r1('L_SAVE_CONTENT'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_save'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: 'icon-toolbar-saveas',\r\n\t\t\t\t\tname: \"t_save_as\",\r\n\t\t\t\t\ttooltip: IRm$.r1('L_SAVE_CONTENT_AS'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_compile'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\t\t  \r\n\t\tIG$.mr_javaeditor.superclass.initComponent.call(this);\r\n\t},\r\n\t\r\n\tlisteners: {\r\n\t\tafterrender: function(tobj) {\r\n\t\t\tvar me = this;\r\n\t\t\t\t\t\t\r\n\t\t\tme.init_f();\r\n\t\t}\r\n\t}\r\n\t\r\n});","IG$._baN/*bflowNode*/ = function(tnode) {\r\n\tif (tnode)\r\n\t{\r\n\t\tthis.p1/*parseXML*/(tnode);\r\n\t}\r\n}\r\n\r\nIG$._baN/*bflowNode*/.prototype = {\r\n\tp1/*parseXML*/: function(tnode) {\r\n\t\tvar node = this,\r\n\t\t\tj, lnode,\r\n\t\t\tpnodes,\r\n\t\t\tcoordinates,\r\n\t\t\tlname, lvalue;\r\n\t\t\r\n\t\t$s.apply(node, {\r\n\t\t\tname: tnode.name,\r\n\t\t\tshape: tnode.shape,\r\n\t\t\tsid: tnode.sid,\r\n\t\t\ttype: tnode.type,\r\n\t\t\trole: tnode.role\r\n\t\t});\r\n\t\t\r\n\t\tcoordinates = tnode.coordinates;\r\n\t\t\r\n\t\tif (coordinates)\r\n\t\t{\r\n\t\t\t$s.apply(node, {\r\n\t\t\t\tx: coordinates.x,\r\n\t\t\t\ty: coordinates.y,\r\n\t\t\t\tw: coordinates.w,\r\n\t\t\t\th: coordinates.h\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tnode.text = tnode.label || node.name;\r\n\t\tlnode = tnode.property;\r\n\t\tif (lnode)\r\n\t\t{\r\n\t\t\t$s.apply(node, {\r\n\t\t\t\tdsname: lnode.dsname,\r\n\t\t\t\tdsignoreeror: lnode.dsignoreerror\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tfor (j=0; j < lnode.length; j++)\r\n\t\t\t{\r\n\t\t\t\tnode[lnode[j].name] = lnode[j].value;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tlnode = tnode.comment;\r\n\t\t\r\n\t\tif (lnode)\r\n\t\t{\r\n\t\t\tnode.comment = lnode.comment;\r\n\t\t}\r\n\t\t\r\n\t\tlnode = tnode.additional_properties;\r\n\t\tif (lnode)\r\n\t\t{\r\n\t\t\tnode.additional_properties = [];\r\n\t\t\t\r\n\t\t\tfor (j=0; j < lnode.length; j++)\r\n\t\t\t{\r\n\t\t\t\tnode.additional_properties.push({\r\n\t\t\t\t\tname: lnode[j].name,\r\n\t\t\t\t\tvalue: lnode[j].value\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tlnode = tnode.states;\r\n\t\tif (lnode)\r\n\t\t{\r\n\t\t\tnode.states = [];\r\n\t\t\t\r\n\t\t\tfor (j=0; j < lnode.length; j++)\r\n\t\t\t{\r\n\t\t\t\tnode.states.push({\r\n\t\t\t\t\tname: lnode[j].name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tlnode = tnode.precision;\r\n\t\tif (lnode)\r\n\t\t{\r\n\t\t\tnode.precision = lnode;\r\n\t\t}\r\n\t\tlnode = tnode.unit;\r\n\t\tif (lnode)\r\n\t\t{\r\n\t\t\tnode.unit = {};\r\n\t\t\t\r\n\t\t\tfor (j=0; j < lnode.length; j++)\r\n\t\t\t{\r\n\t\t\t\tlname = lnode[j].name;\r\n\t\t\t\tlvalue = lnode[j].value;\r\n\t\t\t\tnode.unit[lname] = lvalue;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tc1/*clone*/: function(tobj) {\r\n\t\tvar me = this,\r\n\t\t\tp = \"name;shape;x;y;w;h;text;dsname;dsignoreerror;comment\".split(\";\"),\r\n\t\t\ti, l;\r\n\t\t\r\n\t\tfor (i=0; i < p.length; i++)\r\n\t\t{\r\n\t\t\tme[p[i]] = tobj[p[i]];\r\n\t\t}\r\n\t\t\r\n\t\tif (tobj._cs)\r\n\t\t{\r\n\t\t\tme._cs = [];\r\n\t\t\tfor (i=0; i < tobj._cs.length; i++)\r\n\t\t\t{\r\n\t\t\t\tme._cs.push(tobj._cs[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (tobj.additional_properties)\r\n\t\t{\r\n\t\t\tl = tobj.additional_properties;\r\n\t\t\tme.additional_properties = [];\r\n\t\t\tfor (i=0; i < l.length; i++)\r\n\t\t\t{\r\n\t\t\t\tme.additional_properties.push({\r\n\t\t\t\t\tname: l[i].name,\r\n\t\t\t\t\tvalue: l[i].value\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (tobj.states)\r\n\t\t{\r\n\t\t\tl = tobj.states;\r\n\t\t\t\r\n\t\t\tme.states = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < l.length; i++)\r\n\t\t\t{\r\n\t\t\t\tme.states.push({\r\n\t\t\t\t\tname: l[i].name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tme.precision = tobj.precision;\r\n\t\t\r\n\t\tif (tobj.unit)\r\n\t\t{\r\n\t\t\tme.unit = {};\r\n\t\t\t\r\n\t\t\tfor (l in tobj.unit)\r\n\t\t\t{\r\n\t\t\t\tme.unit[l] = tobj.unit[l];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tpaint: function(g, emode) {\r\n\t\tvar me = this,\r\n\t\t\tbox = me.box,\r\n\t\t\tdg = $(\".idv-flw-grp\", box),\r\n\t\t\tdul,\r\n\t\t\tvisualstates = g ? g.visualstates : null,\r\n\t\t\tmw = 102;\r\n\t\t\t\r\n\t\tdg.hide();\r\n\t\tdg.empty();\r\n\t\t\r\n\t\tif (visualstates && emode == 1)\r\n\t\t{\r\n\t\t\tbox.width(150);\r\n\t\t\tdg.show();\r\n\t\t\t\r\n\t\t\tdul = $(\"<ul class='idv-visual-lst'></ul>\").appendTo(dg);\r\n\t\t\t\r\n\t\t\t$.each(visualstates, function(n, states) {\r\n\t\t\t\tvar values = states.values,\r\n\t\t\t\t\ti,\r\n\t\t\t\t\tstatview,\r\n\t\t\t\t\tsviewarea,\r\n\t\t\t\t\tsname,\r\n\t\t\t\t\tsgraph;\r\n\t\t\t\t\r\n\t\t\t\tstatview = $(\"<li class='idv-visual-states'></li>\").appendTo(dul);\r\n\t\t\t\tsviewarea = $(\"<div class='idv-visual-area'></div>\").appendTo(statview);\r\n\t\t\t\tsname = $(\"<div class='idv-visual-statname'><span id='statname'></span></div>\").appendTo(sviewarea);\r\n\t\t\t\t\r\n\t\t\t\t$(\"#statname\", sname).text(states.name);\r\n\r\n\t\t\t\tif (values && values.length)\r\n\t\t\t\t{\r\n\t\t\t\t\t$.each(values, function(i, value) {\r\n\t\t\t\t\t\tvar sgraph = $(\"<div class='idv-visual-graph'><div class='idv-visual-graphval'><span>-</span></div></div>\").appendTo(sviewarea),\r\n\t\t\t\t\t\t\tgval,\r\n\t\t\t\t\t\t\tn = \"\" + value.barlength;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (n.indexOf(\".\") > -1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tn = n.substring(0, n.indexOf(\".\") + 3);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tgval = $(\".idv-visual-graphval\", sgraph).css({width: Number(value.barlength) + \"%\"});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$(\"span\", gval).text(n + \" %\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tgval.attr(\"title\", n + \" %\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsgraph.bind(\"click\", function() {\r\n\t\t\t\t\t\t\tme.visualStateClick.call(me, g, {\r\n\t\t\t\t\t\t\t\tstates: states,\r\n\t\t\t\t\t\t\t\tvalue: value\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tbox.width(100);\r\n\t\t}\r\n\t},\r\n\t\r\n\tvisualStateClick: function(g, value) {\r\n\t\tvar me = this;\r\n\t\tme._bf.container.trigger(\"visual_state_click\", {\r\n\t\t\tgraphic: g,\r\n\t\t\tstate: value\r\n\t\t});\r\n\t}\r\n}\r\n\r\nIG$._I99/*bflowoption*/ = {\r\n\thoverPaintStyle: { strokeStyle:\"#7ec3d9\" }\r\n};\r\n\r\nIG$._I9a/*flowDiagram*/ = function(container, option) {\r\n\tthis.container = container;\r\n\tthis.ptype = option.ptype;\r\n}\r\n\r\nIG$._I9a/*flowDiagram*/.prototype = {\r\n\tinit: function() {\r\n\t\tvar me = this,\r\n\t\t\tcontainer = me.container,\r\n\t\t\tdoc = $(document),\r\n\t\t\tmainarea;\r\n\t\t\r\n\t\tme.mwidth = 0;\r\n\t\tme.mheight = 0;\r\n\t\t\r\n\t\tcontainer.empty();\r\n\t\t\r\n\t\tme.sid = 0;\r\n\t\tme.a_boxes = [];\r\n\t\tme.m_boxes = {};\r\n\t\t\r\n\t\tme.mainarea = mainarea = $(\"<div class='idv-flw-mreg'></div>\").appendTo(container);\r\n\t\t\r\n\t\tme.render = $(\"<div id='render'></div>\").appendTo(mainarea);\r\n\t\t\r\n\t\tme.plumb = jsPlumb.getInstance({\r\n\t\t\tEndpoint: [\"Dot\", {radius: 5}],\r\n\t\t\tHoverPaintStyle: {strokeStyle: \"#42a62c\", lineWidth: 2},\r\n\t\t\tConnectionOverlays: [\r\n\t\t\t\t[\"Arrow\", {\r\n\t\t\t\t\tlocation: 1,\r\n\t\t\t\t\tid: \"arrow\",\r\n\t\t\t\t\tlength: 14,\r\n\t\t\t\t\tfoldback: 0.8\r\n\t\t\t\t}],\r\n\t\t\t\t[\"Label\", {label: \"\", id: \"label\"}]\r\n\t\t\t]\r\n\t\t});\r\n\t\t\r\n\t\tme.plumb.bind(\"connection\", function(info, e) {\r\n\t\t\tvar lnk = info.connection,\r\n\t\t\t\tsrc = lnk.source,\r\n\t\t\t\ttgt = lnk.target;\r\n\t\t\t\r\n\t\t\tsrc = me.getBoxObject.call(me, src);\r\n\t\t\ttgt = me.getBoxObject.call(me, tgt);\r\n\t\t\t\r\n\t\t\tif (src && tgt && e) \r\n\t\t\t{\r\n\t\t\t\tme.container.trigger(\"flow_changed\", {\r\n\t\t\t\t\titem: {\r\n\t\t\t\t\t\tsrc: src,\r\n\t\t\t\t\t\ttgt: tgt\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsource: \"link_node\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tme.plumb.bind(\"connectionDetached\", function(info, e) {\r\n\t\t\tvar lnk = info.connection,\r\n\t\t\t\tsrc = lnk.source,\r\n\t\t\t\ttgt = lnk.target;\r\n\t\t\t\r\n\t\t\tsrc = me.getBoxObject.call(me, src);\r\n\t\t\ttgt = me.getBoxObject.call(me, tgt);\r\n\t\t\t\r\n\t\t\tif (src && tgt && e) \r\n\t\t\t{\r\n\t\t\t\tme.container.trigger(\"flow_changed\", {\r\n\t\t\t\t\titem: {\r\n\t\t\t\t\t\tsrc: src.sid,\r\n\t\t\t\t\t\ttgt: tgt.sid\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsource: \"link_detach\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tme.plumb.bind(\"connectionMoved\", function(info, e) {\r\n\t\t\tvar s1 = info.originalSourceId,\r\n\t\t\t\ts2 = info.newSourceId,\r\n\t\t\t\tt1 = info.originalTargetId,\r\n\t\t\t\tt2 = info.newTargetId;\r\n\t\t\t\r\n\t\t\ts1 = me.getBoxObject.call(me, s1);\r\n\t\t\ts2 = me.getBoxObject.call(me, s2);\r\n\t\t\tt1 = me.getBoxObject.call(me, t1);\r\n\t\t\tt2 = me.getBoxObject.call(me, t2);\r\n\t\t\t\r\n\t\t\tif (s1 && s2 && t1 && t2 && e)\r\n\t\t\t{\r\n\t\t\t\tme.container.trigger(\"flow_changed\", {\r\n\t\t\t\t\titem: {\r\n\t\t\t\t\t\tsource_0: s1.sid,\r\n\t\t\t\t\t\tsource_1: s2.sid,\r\n\t\t\t\t\t\ttarget_0: t1.sid,\r\n\t\t\t\t\t\ttarget_1: t2.sid\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsource: \"move_link\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t\t\t\r\n\t\tvar gpt;\r\n\t\t\r\n\t\tvar gf_mousemove = function(e) {\r\n\t\t\tif (gpt)\r\n\t\t\t{\r\n\t\t\t\tvar mpt = {\r\n\t\t\t\t\tx: e.pageX,\r\n\t\t\t\t\ty: e.pageY\r\n\t\t\t\t}, tx = 0, ty = 0,\r\n\t\t\t\ttw = IG$.j$ext._w(me.container),\r\n\t\t\t\tth = IG$.j$ext._h(me.container),\r\n\t\t\t\tmw = IG$.j$ext._w(me.mainarea),\r\n\t\t\t\tmh = IG$.j$ext._h(me.mainarea),\r\n\t\t\t\tom = gpt.om,\r\n\t\t\t\tot = me.container.offset(),\r\n\t\t\t\tgx = om.left - ot.left,\r\n\t\t\t\tgy = om.top - ot.top,\r\n\t\t\t\tsx, sy;\r\n\t\t\t\t\r\n\t\t\t\tif (mw > tw || mh > th)\r\n\t\t\t\t{\r\n\t\t\t\t\ttx = mpt.x - gpt.x;\r\n\t\t\t\t\tty = mpt.y - gpt.y;\r\n\t\t\t\t\t\r\n\t\t\t\t\tsy = gy + ty;\r\n\t\t\t\t\tsx = gx + tx;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tif (sy < (th - mh))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsy = th - mh;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (sy > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsy = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (sx < (tw - mw))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsx = tw - mw;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (sx > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsx = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tme.mainarea.css({top: sy, left: sx});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tvar gf_mouseup = function(e) {\r\n\t\t\tdoc.unbind(\"mousemove\", gf_mousemove);\r\n\t\t\tdoc.unbind(\"mouseup\", gf_mouseup);\r\n\t\t};\r\n\t\t\r\n\t\tmainarea.bind({\r\n\t\t\tmousedown: function(e) {\r\n\t\t\t\tif (e.srcElement && e.srcElement == mainarea[0])\r\n\t\t\t\t{\r\n\t\t\t\t\tgpt = {\r\n\t\t\t\t\t\tx: e.pageX,\r\n\t\t\t\t\t\ty: e.pageY,\r\n\t\t\t\t\t\tom: me.mainarea.offset()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdoc.bind(\"mousemove\", gf_mousemove);\r\n\t\t\t\t\tdoc.bind(\"mouseup\", gf_mouseup);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmouseup: function(e) {\r\n\t\t\t\tdoc.unbind(\"mousemove\", gf_mousemove);\r\n\t\t\t\tdoc.unbind(\"mouseup\", gf_mouseup);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t\r\n\tgetID: function(sid) {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tif (!sid)\r\n\t\t{\r\n\t\t\tsid = \"uid_\" + me.sid++;\r\n\t\t}\r\n\t\t\r\n\t\twhile (me.m_boxes[sid]) {\r\n\t\t\tsid = \"uid_\" + me.sid++;\r\n\t\t}\r\n\t\t\r\n\t\treturn sid;\r\n\t},\r\n\t\r\n\ts1/*setStatus*/: function(stat) {\r\n\t\tvar me = this,\r\n\t\t\titem = me.m_boxes[stat.lid];\r\n\t\t\t\r\n\t\tif (item && item.statdv)\r\n\t\t{\r\n\t\t\titem.statdv.removeClass(\"idv-flw-shp mec-stat-saved\");\r\n\t\t\titem.statdv.removeClass(\"idv-flw-shp mec-stat-on\");\r\n\t\t\titem.statdv.removeClass(\"idv-flw-shp mec-stat-err\");\r\n\t\t\t\r\n\t\t\tswitch (stat.status)\r\n\t\t\t{\r\n\t\t\tcase 1:\r\n\t\t\t\titem.statdv.addClass(\"idv-flw-shp mec-stat-on\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase 10:\r\n\t\t\t\titem.statdv.addClass(\"idv-flw-shp mec-stat-saved\");\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\titem.statdv.addClass(\"idv-flw-shp mec-stat-err\");\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\ts2/*clearStatus*/: function() {\r\n\t\tvar me = this,\r\n\t\t\ta_boxes = me.a_boxes,\r\n\t\t\ti;\r\n\t\t\t\r\n\t\tfor (i=0; i < a_boxes.length; i++)\r\n\t\t{\r\n\t\t\tif (a_boxes[i].statdv)\r\n\t\t\t{\r\n\t\t\t\ta_boxes[i].statdv.removeClass(\"idv-flw-shp mec-stat-saved\");\r\n\t\t\t\ta_boxes[i].statdv.removeClass(\"idv-flw-shp mec-stat-on\");\r\n\t\t\t\ta_boxes[i].statdv.removeClass(\"idv-flw-shp mec-stat-err\");\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\taddBox: function(item, p, isnew) {\r\n\t\tvar me = this;\r\n\t\tme.a_boxes.push(item);\r\n\t\t\r\n\t\tif (IG$.checkUID(item.sid) == false)\r\n\t\t{\r\n\t\t\tvar me = this,\r\n\t\t\t\tlreq = new IG$._rpc$();\r\n\t\t\tlreq.init(me, \r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"helpcontent\",\r\n\t\t\t\t\tpayload: {},\r\n\t\t\t\t\tmbody: {option: \"newid\"}\r\n\t\t\t\t}, me, function(jdoc) {\r\n\t\t\t\t\tvar suid = jdoc ? jdoc.uid : null;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (suid)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titem.sid = suid;\r\n\t\t\t\t\t\tme.rs_addBox.call(me, item, p, isnew);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, false);\r\n\t\t\t\t\r\n\t\t\tlreq.send();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.rs_addBox(item, p, isnew);\r\n\t\t}\r\n\t},\r\n\t\r\n\trs_addBox: function(item, p, isnew) {\r\n\t\tvar me = this,\r\n\t\t\tdv, dvc, ep, title, dp, i,\r\n\t\t\tdg;\r\n\t\t\r\n\t\tdv = $(\"<div class='idv-flw-shp'></div>\").appendTo(me.mainarea);\r\n\t\tdv.css({left: p.left, top: p.top});\r\n\t\tif (p.w && p.h)\r\n\t\t{\r\n\t\t\tdv.width(p.w);\r\n\t\t\t// dv.height(p.h);\r\n\t\t}\r\n\t\t\r\n\t\tif (item._cs && item._cs.length)\r\n\t\t{\r\n\t\t\tfor (i=0; i < item._cs.length; i++)\r\n\t\t\t{\r\n\t\t\t\tdv.addClass(item._cs[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tbg = $(\"#bgimg\", dv);\r\n\t\tIG$.j$ext._w(bg, IG$.j$ext._w(dv));\r\n\t\tIG$.j$ext._h(bg, IG$.j$ext._h(dv));\r\n\t\titem.box = dv;\r\n\t\titem._bf = me;\r\n\t\titem.dv_dsname = $(\"<div class='idv-bd-dsnm'>\" + (item.dsname || \"\") + \"</div>\").appendTo(dv);\r\n\t\t\r\n\t\tdvc = $(\"<div class='ba_m_title_c'></div>\").appendTo(dv);\r\n\t\ttitle = $(\"<span class='ba_m_title' title='\" + item.text + \"'>\" + item.text + \"</span>\").appendTo(dvc);\r\n\t\t$(\"<div class='mec-ep'></div>\").appendTo(dv);\r\n\t\tdp = $(\"<div class='mec-rp'></div>\").appendTo(dv);\r\n\t\t\r\n\t\titem.statdv = $(\"<div class='mec-stat'></div>\").appendTo(dv);\r\n\t\titem.sid = item.sid || me.getID();\r\n\t\t\r\n\t\titem.__tL/*titleArea*/ = title;\r\n\t\t\r\n\t\ttitle.bind(\"click\", function() {\r\n\t\t\tme.container.trigger(\"boxClicked\", item);\r\n\t\t});\r\n\t\t\r\n\t\tdg = $(\"<div class='idv-flw-grp'></div>\").appendTo(dv).hide();\r\n\t\t\r\n\t\tme.plumb.draggable(dv);\r\n\t\t\r\n\t\tme.plumb.makeSource(dv, {\r\n\t\t\tfilter: \".mec-ep\",\r\n\t\t\tanchor: \"Continuous\",\r\n\t\t\tconnector: [\"StateMachine\", {curviness: 20}],\r\n\t\t\tconnectorStyle: {strokeStyle: \"#efefef\", lineWidth: 2},\r\n\t\t\tmaxConnections: 30,\r\n\t\t\tonMaxConnections: function(info, e) {\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tme.plumb.makeTarget(dv, {\r\n\t\t\tdropOptions: {hoverClass: \"dragHover\"},\r\n\t\t\tanchor: \"Continuous\",\r\n\t\t\tallowLoopback: false\r\n\t\t});\r\n\t\t\r\n\t\tme.m_boxes[item.sid] = item;\r\n\t\t\r\n\t\tdp.bind(\"click\", function() {\r\n\t\t\tme.removeBox.call(me, item, true);\r\n\t\t});\r\n\t\t\r\n\t\tif (isnew)\r\n\t\t{\r\n\t\t\tme.container.trigger(\"flow_changed\", {\r\n\t\t\t\titem: item,\r\n\t\t\t\tsource: \"box_add\"\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tme.u1/*updateSize*/();\r\n\t\t\r\n\t\tme.rs_loadOption.processed = me.rs_loadOption.processed +1;\r\n\t\t\r\n\t\tif (me.rs_loadOption.processed == me.rs_loadOption.nodelength)\r\n\t\t{\r\n\t\t\tme.rs_loadOption.callback && me.rs_loadOption.callback.execute();\r\n\t\t}\r\n\t},\r\n\t\r\n\ts4/*setTitle*/: function(item, txt) {\r\n\t\tvar me = this,\r\n\t\t\ttitlearea = item.__tL/*titleArea*/;\r\n\t\t\r\n\t\ttitlearea.text(txt);\r\n\t\ttitlearea.attr(\"title\", txt);\r\n\t},\r\n\t\r\n\tremoveBox: function(item, bconfirm) {\r\n\t\tvar me = this;\r\n\t\t\t\r\n\t\tif (bconfirm == true)\r\n\t\t{\r\n\t\t\tIG$.confirmMessages(ig$.appname, \"Confirm to delete node!\", function(e) {\r\n\t\t\t\tif (e == \"yes\")\r\n\t\t\t\t{\r\n\t\t\t\t\tme.rs_removeBox.call(me, item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tme.rs_removeBox.call(me, item);\r\n\t\t}\r\n\t},\r\n\t\r\n\trs_removeBox: function(item) {\r\n\t\tvar me = this,\r\n\t\t\ti;\r\n\t\t\t\r\n\t\tme.plumb.detachAllConnections(item.box);\r\n\t\titem.box.remove();\r\n\t\t\r\n\t\tfor (i=0; i < me.a_boxes.length; i++)\r\n\t\t{\r\n\t\t\tif (me.a_boxes[i].sid == item.sid)\r\n\t\t\t{\r\n\t\t\t\tme.a_boxes.splice(i, 1);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tdelete me.m_boxes[item.sid];\r\n\t\t\r\n\t\tme.container.trigger(\"flow_changed\", {\r\n\t\t\titem: item,\r\n\t\t\tsource: \"box_delete\"\r\n\t\t});\r\n\t\t\r\n\t\tme.u1/*updateSize*/();\r\n\t},\r\n\t\r\n\tu1/*updateSize*/: function() {\r\n\t\tvar me = this, \r\n\t\t\tmwidth = 0,\r\n\t\t\tmheight = 0,\r\n\t\t\ttwidth = IG$.j$ext._w(me.container),\r\n\t\t\ttheight = IG$.j$ext._h(me.container),\r\n\t\t\ti, boxes = me.a_boxes;\r\n\t\t\t\r\n\t\tfor (i=0; i < boxes.length; i++)\r\n\t\t{\r\n\t\t\tmwidth = Math.max(mwidth, boxes[i].x + boxes[i].w);\r\n\t\t\tmheight = Math.max(mheight, boxes[i].y + boxes[i].h);\r\n\t\t}\r\n\t\t\r\n\t\tmwidth = Math.max(mwidth+20, twidth);\r\n\t\tmheight = Math.max(mheight+20, theight);\r\n\t\t\r\n\t\tIG$.j$ext._w(me.mainarea, mwidth);\r\n\t\tIG$.j$ext._h(me.mainarea, mheight);\r\n\t},\r\n\t\r\n\taddLink: function(lnk) {\r\n\t\tvar me = this,\r\n\t\t\tdid1 = me.m_boxes[lnk.from] ? me.m_boxes[lnk.from].box : null,\r\n\t\t\tdid2 = me.m_boxes[lnk.to] ? me.m_boxes[lnk.to].box : null,\r\n\t\t\tstroke = \"rgb(189,11,11)\";\r\n\t\t\t\r\n\t\tif (!did1 || !did2)\r\n\t\t\treturn;\r\n\t\t\t\r\n\t\tvar mlink = me.plumb.connect(\r\n\t\t\t{\r\n\t\t\t\tsource: did1, \r\n\t\t\t\ttarget: did2, \r\n\t\t\t\tpaintStyle:{ \r\n\t\t\t\t\tlineWidth:8,\r\n\t\t\t\t\tstrokeStyle: stroke,\r\n\t\t\t\t\toutlineColor:\"#666\",\r\n\t\t\t\t\toutlineWidth:1,\r\n\t\t\t\t\tdashstyle: null\r\n\t\t\t\t},\r\n\t\t\t\tdetachable: true,\r\n\t\t\t\thoverPaintStyle: IG$._I99/*bflowoption*/.hoverPaintStyle, \r\n\t\t\t\tanchors:[ [ 0.3 , 1, 0, 1 ], \"TopCenter\" ], \r\n\t\t\t\toverlays: [\r\n\t\t\t\t\t[\"DoubleLine\", { fillStyle: \"#09098e\", width: 15, length: 15 } ]\r\n//\t\t\t\t\t [\r\n//\t\t\t\t\t\t \"Custom\", {\r\n//\t\t\t\t\t\t\t create: function(component) {\r\n//\t\t\t\t\t\t\t\t return $(\"<div><div class='ba-single-line'></div></div>\");\r\n//\t\t\t\t\t\t\t },\r\n//\t\t\t\t\t\t\t location: 0.5\r\n//\t\t\t\t\t\t }\r\n//\t\t\t\t\t]\r\n\t\t\t\t],\r\n\t\t\t\tendpoint: [\r\n\t\t\t\t\t\"Dot\",\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tradius: 5\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tendpointStyles: {fillStyle: \"#456\"}\r\n\t\t\t}\r\n\t\t);\r\n\t\tmlink.ptr_link = lnk;\r\n\t},\r\n\t\r\n\tL1/*loadOption*/: function(itemobj, rs_loadOption) {\r\n\t\tvar me = this,\r\n\t\t\tnode, lnk,\r\n\t\t\ti;\r\n\t\t\t\r\n\t\tme.itemobj = itemobj;\r\n\t\t\r\n\t\tme.init();\r\n\t\t\r\n\t\tme.rs_loadOption = {\r\n\t\t\tnodes: itemobj.nodes.length,\r\n\t\t\tnodelength: itemobj.nodes.length,\r\n\t\t\tprocessed: 0,\r\n\t\t\tcallback: rs_loadOption,\r\n\t\t};\r\n\t\t\r\n\t\tif (itemobj.nodes.length)\r\n\t\t{\r\n\t\t\t$.each(itemobj.nodes, function(i, node) {\r\n\t\t\t\tme.addBox(node, {\r\n\t\t\t\t\tleft: node.x,\r\n\t\t\t\t\ttop: node.y,\r\n\t\t\t\t\tw: node.w,\r\n\t\t\t\t\th: node.h\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tfor (i=0; i < itemobj.links.length; i++)\r\n\t\t\t{\r\n\t\t\t\tlnk = itemobj.links[i];\r\n\t\t\t\tme.addLink(lnk);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\trs_loadOption && rs_loadOption.execute();\r\n\t\t}\r\n\t},\r\n\t\r\n\tm1/*appProperty*/: function(r, box, params) {\r\n\t\tvar i,\r\n\t\t\tpnames = params.split(\";\");\r\n\t\t\r\n\t\tfor (i=0; i < pnames.length; i++)\r\n\t\t{\r\n\t\t\tif (box[pnames[i]])\r\n\t\t\t{\r\n\t\t\t\tr.property.properties.push({\r\n\t\t\t\t\tname: pnames[i],\r\n\t\t\t\t\tvalue: box[pnames[i]]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tl2/*exportContent*/: function(r, mtype, mtypename) {\r\n\t\tvar me = this,\r\n\t\t\tprobnet = r.probnet,\r\n\t\t\tvariables,\r\n\t\t\tlinks,\r\n\t\t\tvobj, lobj,\r\n\t\t\tvmap = {},\r\n\t\t\ti, j, l, o, box, ab, lnk, ptr_link,\r\n\t\t\ttoffset = me.mainarea.offset(),\r\n\t\t\tptype = me.ptype;\r\n\t\t\r\n\t\tif (ptype == \"bayesmodel\")\r\n\t\t{\r\n\t\t\tvariables = probnet.variables = [];\r\n\t\t\r\n\t\t\tif (mtype && mtypename)\r\n\t\t\t{\r\n\t\t\t\tprobnet.type = mtype;\r\n\t\t\t\tprobnet.typename = mtypename;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (ptype == \"bigdatamodel\")\r\n\t\t{\r\n\t\t\tvariables = r.nodes = [];\r\n\t\t}\r\n\t\t\r\n\t\tfor (i=0; i < me.a_boxes.length; i++)\r\n\t\t{\r\n\t\t\tab = me.a_boxes[i];\r\n\t\t\to = ab.box.offset();\r\n\t\t\tbox = {\r\n\t\t\t\tname: ab.name,\r\n\t\t\t\tshape: ab.shape || \"\",\r\n\t\t\t\tx: o.left - toffset.left,\r\n\t\t\t\ty: o.top - toffset.top,\r\n\t\t\t\tw: IG$.j$ext._w(ab.box),\r\n\t\t\t\th: IG$.j$ext._h(ab.box),\r\n\t\t\t\tsid: ab.sid,\r\n\t\t\t\ttext: ab.text,\r\n\t\t\t\tdsname: ab.dsname,\r\n\t\t\t\tdsdesc: ab.dsdesc,\r\n\t\t\t\tdstype: ab.dstype,\r\n\t\t\t\tdsignoreerror: ab.dsignoreerror,\r\n\t\t\t\tdsmapper: ab.dsmapper,\r\n\t\t\t\tdsreducer: ab.dsreducer,\r\n\t\t\t\tdstname: ab.dstname,\r\n\t\t\t\tdsscript: ab.dsscript,\r\n\t\t\t\tdsfname: ab.dsfname,\r\n\t\t\t\tdsskipexist: ab.dsskipexist,\r\n\t\t\t\tdoctmpl: ab.doctmpl,\r\n\t\t\t\ttype: ab.type,\r\n\t\t\t\trole: ab.role,\r\n\t\t\t\tadditional_properties: ab.additional_properties,\r\n\t\t\t\tstates: ab.states,\r\n\t\t\t\tprecision: ab.precision,\r\n\t\t\t\tunit: ab.unit,\r\n\t\t\t\tcomment: ab.comment\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tvobj = {\r\n\t\t\t\tsid: box.sid,\r\n\t\t\t\tname: box.name,\r\n\t\t\t\tshape: box.shape,\r\n\t\t\t\tcoordinates: {\r\n\t\t\t\t\tx: box.x,\r\n\t\t\t\t\ty: box.y,\r\n\t\t\t\t\tw: box.w,\r\n\t\t\t\t\th: box.h\r\n\t\t\t\t},\r\n\t\t\t\trole: box.role,\r\n\t\t\t\ttype: box.type,\r\n\t\t\t\tlabel: box.text\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tvariables.push(vobj);\r\n\t\t\tvmap[vobj.sid] = vobj;\r\n\t\t\t\t\t\t\r\n\t\t\tif (box.comment)\r\n\t\t\t{\r\n\t\t\t\tvobj.comment = {\r\n\t\t\t\t\tcomment: box.comment\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvobj.property = {\r\n\t\t\t\tdsname: ab.dsname,\r\n\t\t\t\tdsignoreerror: ab.dsignoreerror,\r\n\t\t\t\tproperties: []\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tswitch (box.name)\r\n\t\t\t{\r\n\t\t\tcase \"datasource\":\r\n\t\t\t\tme.m1/*appProperty*/(vobj, ab, \"dsdesc;dstype;dsmapper;dsreducer;dsfname;dstname;dsskipexist\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"shell\":\r\n\t\t\t\tme.m1/*appProperty*/(vobj, ab, \"dsdesc;dsscript\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"hive\":\r\n\t\t\t\tme.m1/*appProperty*/(vobj, ab, \"dsdesc;dsscript\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"mongoreduce\":\r\n\t\t\t\tme.m1/*appProperty*/(vobj, ab, \"dsdesc;rowregex;rowsample;mrtype;m_delim;cfields\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"mongodoc\":\r\n\t\t\t\tme.m1/*appProperty*/(vobj, ab, \"dsdesc;doctmpl;mrnode;mrdb;mrcol;mrdocname;mrsmode\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"mapreduce\":\r\n\t\t\t\tme.m1/*appProperty*/(vobj, ab, \"dsdesc;dsmapper;dsreducer;confparams\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"output\":\r\n\t\t\t\tme.m1/*appProperty*/(vobj, ab, \"dsdesc;dsfname;dscnames;dsruntype;dsdelim;dsdelimval;dstcube;dstcubeuid;dsmeasuredelim;dsmeasuredelimval;dsmname;dscsdatause;dscsdatafile\");\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tme.m1/*appProperty*/(vobj, ab, \"dsdesc\");\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tl = box.additional_properties;\r\n\t\t\r\n\t\t\tif (l && l.length)\r\n\t\t\t{\r\n\t\t\t\tvobj.additional_properties = [];\r\n\t\t\t\t\r\n\t\t\t\tfor (j=0; j < l.length; j++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvobj.additional_properties.push({\r\n\t\t\t\t\t\tname: l[j].name,\r\n\t\t\t\t\t\tvalue: l[j].value\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tl = box.states;\r\n\t\t\t\r\n\t\t\tif (l && l.length)\r\n\t\t\t{\r\n\t\t\t\tvobj.states = [];\r\n\t\t\t\t\r\n\t\t\t\tfor (j=0; j < l.length; j++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvobj.states.push({\r\n\t\t\t\t\t\tname: l[j].name\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (box.precision)\r\n\t\t\t{\r\n\t\t\t\tvobj.precision = box.precision;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (box.unit)\r\n\t\t\t{\r\n\t\t\t\tvobj.unit = [];\r\n\t\t\t\t\r\n\t\t\t\tfor (j in box.unit)\r\n\t\t\t\t{\r\n\t\t\t\t\tvobj.unit.push({\r\n\t\t\t\t\t\tname: \"\" + j,\r\n\t\t\t\t\t\tvalue: box.unit[j]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvar cons = me.plumb.getConnections(),\r\n\t\t\tsrc, tgt,\r\n\t\t\tlinkname,\r\n\t\t\tlinknodes;\r\n\t\t\t\r\n\t\tif (ptype == \"bayesmodel\")\r\n\t\t{\r\n\t\t\tlinks = probnet.links = [];\r\n\t\t\tlinkname = \"variables\";\r\n\t\t}\r\n\t\telse if (ptype == \"bigdatamodel\")\r\n\t\t{\r\n\t\t\tlinks = r.links = [];\r\n\t\t\tlinkname = \"nodes\";\r\n\t\t}\r\n\t\t\r\n\t\tif (cons && cons.length)\r\n\t\t{\r\n\t\t\tfor (i=0; i < cons.length; i++)\r\n\t\t\t{\r\n\t\t\t\tlnk = cons[i];\r\n\t\t\t\tptr_link = lnk.ptr_link;\r\n\t\t\t\tsrc = lnk.source;\r\n\t\t\t\ttgt = lnk.target;\r\n\t\t\t\t\r\n\t\t\t\tsrc = me.getBoxObject(src);\r\n\t\t\t\ttgt = me.getBoxObject(tgt);\r\n\t\t\t\t\r\n\t\t\t\tif (src && tgt) {\r\n\t\t\t\t\tvar p = lnk.getPaintStyle();\r\n\t\t\t\t\tlobj = {\r\n\t\t\t\t\t\tdashstyle: p.dashstyle,\r\n\t\t\t\t\t\tdirected: ptr_link ? ptr_link.directed : true\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tlinknodes = lobj[linkname] = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tlinknodes.push({\r\n\t\t\t\t\t\tsid: src.sid,\r\n\t\t\t\t\t\tname: src.name\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tlinknodes.push({\r\n\t\t\t\t\t\tsid: tgt.sid,\r\n\t\t\t\t\t\tname: tgt.name\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tlinks.push(lobj);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (ptr_link && ptr_link.potential)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlobj.potential = [ptr_link.potential.p2/*toXMLString*/()]; \r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (ptr_link && ptr_link.revealing_condition)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlobj.revealing_condition = [];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (ptr_link.revealing_condition.states)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar lcond = {states: []};\r\n\t\t\t\t\t\t\tlobj.revealing_condition.push(lcond);\r\n\t\t\t\t\t\t\tfor (j=0; j < ptr_link.revealing_condition.states.length; j++)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlcond.states.push({\r\n\t\t\t\t\t\t\t\t\tname: ptr_link.revealing_condition.states[j].name \r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetBoxObject: function(elem) {\r\n\t\tvar me = this,\r\n\t\t\ti, r,\r\n\t\t\tboxes = me.a_boxes,\r\n\t\t\tt = typeof(elem) == \"string\" ? 0 : 1,\r\n\t\t\telem_id = t ? $(elem).attr(\"id\") : null,\r\n\t\t\tbox_id;\r\n\t\t\r\n\t\tfor (i=0; i < boxes.length; i++) \r\n\t\t{\r\n\t\t\tif (!t && boxes[i].sid == elem) \r\n\t\t\t{\r\n\t\t\t\tr = boxes[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\telse if (t) \r\n\t\t\t{\r\n\t\t\t\tbox_id = boxes[i].box.attr(\"id\");\r\n\t\t\t\tif (box_id == elem_id)\r\n\t\t\t\t{\r\n\t\t\t\t\tr = boxes[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn r;\r\n\t}\r\n}","IG$._IB7/*bpeditor*/ = $s.extend($s.window, {\r\n\tmodal: true,\r\n\tlayout: \"fit\",\r\n\tclosable: false,\r\n\tresizable:false,\r\n\twidth: 500,\r\n\theight: 500,\r\n\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t},\r\n\t\r\n\tL1/*runProcess*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tpanel = this,\r\n\t\t\treq = new IG$._rpc$(),\r\n\t\t\tcnt = {\r\n\t\t\t\tuid: me.uid,\r\n\t\t\t\tcommand: Base64.encode(me.down(\"[name=txtcommand]\").getValue())\r\n\t\t\t};\r\n\t\t\r\n\t\treq.init(panel, \r\n\t\t\t{\r\n\t\t\t\tack: \"bizop\",\r\n\t\t\t\tpayload: {uid: panel.uid, option: \"command\"},\r\n\t\t\t\tmbody: cnt\r\n\t\t\t}, panel, panel.rs_L1/*runProcess*/, null);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_L1/*runProcess*/: function(xdoc) {\r\n\t\tvar me = this,\r\n\t\t\ttnode = IG$.XGetNode(xdoc, \"/smsg/errormessage\"),\r\n\t\t\terrmsg,\r\n\t\t\tmsg;\r\n\t\t\t\r\n\t\tif (tnode)\r\n\t\t{\r\n\t\t\terrmsg = IG$.XGetTextVal(tnode);\r\n\t\t\terrmsg = Base64.decode(errmsg);\r\n\t\t\tme.down(\"[name=txtconsole]\").setValue(errmsg);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttnode = IG$.XGetNode(xdoc, \"/smsg/message\");\r\n\t\t\tif (tnode)\r\n\t\t\t{\r\n\t\t\t\tmsg = IG$.XGetTextVal(tnode);\r\n\t\t\t\tmsg = Base64.decode(msg);\r\n\t\t\t\tme.down(\"[name=txtconsole]\").setValue(msg);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tinitComponent: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.title = IRm$.r1('L_MAKEITEM');\r\n\t\t\r\n\t\t$s.apply(this, {\r\n\t\t\tdefaults:{bodyStyle:\"padding:10px\"},\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\tlayout: \"border\",\r\n\t\t\t\t\tautoHeight: true,\r\n\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\tanchor: \"100%\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\t\theight: 300,\r\n\t\t\t\t\t\t\tregion: \"center\",\r\n\t\t\t\t\t\t\tname: \"txtcommand\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\theight: 200,\r\n\t\t\t\t\t\t\tregion: \"south\",\r\n\t\t\t\t\t\t\ttitle: \"Console Output\",\r\n\t\t\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\t\t\t\tname: \"txtconsole\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tbuttons:[\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1('B_CONFIRM'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.L1/*runProcess*/();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}, \r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1('B_CANCEL'),\r\n\t\t\t\t\thandler:function() {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\t\r\n\t\tIG$._IB7/*bpeditor*/.superclass.initComponent.call(this);\r\n\t},\r\n\t\r\n\tlisteners: {\r\n\t\tafterrender: function(tobj) {\r\n\t\t\tvar me = this;\r\n\t\t\tme.init_f();\r\n\t\t}\r\n\t}\r\n\t\r\n});\t\r\n\r\n\r\nIG$._IB8/*bpobject*/ = function(xdoc, bf) {\r\n\tvar me = this;\r\n\tme.bf = bf;\r\n\txdoc && me.L1/*parseContent*/(xdoc);\r\n}\r\n\r\nIG$._IB8/*bpobject*/.prototype = {\r\n\tL1/*parseContent*/: function(xdoc) {\r\n\t\tvar me = this,\r\n\t\t\tpnode,\r\n\t\t\ttnode, tnodes, i, j, pnodes, node, lnode, lnk,\r\n\t\t\tt;\r\n\t\t\r\n\t\tme.nodes = [];\r\n\t\tme.links = [];\r\n\t\t\r\n\t\tpnode = xdoc.content;\r\n\t\t\r\n\t\tif (pnode)\r\n\t\t{\r\n\t\t\tme.item = {\r\n\t\t\t\tuid: xdoc.uid,\r\n\t\t\t\tname: xdoc.name,\r\n\t\t\t\ttype: xdoc.type,\r\n\t\t\t\tnodepath: xdoc.nodepath\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\ttnode = pnode.nodes;\r\n\t\t\tif (tnode)\r\n\t\t\t{\r\n\t\t\t\tfor (i=0; i < tnode.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tnode = new IG$._baN/*bflowNode*/(tnode[i]);\r\n\t\t\t\t\tme.nodes.push(node);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttnode = pnode.links;\r\n\t\t\tif (tnode)\r\n\t\t\t{\r\n\t\t\t\tfor (i=0; i < tnode.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tt = tnode[i];\r\n\t\t\t\t\tlnk = {\r\n\t\t\t\t\t\tfrom: t.nodes[0].sid,\r\n\t\t\t\t\t\tto: t.nodes[1].sid,\r\n\t\t\t\t\t\tdashstyle: t.dashstyle\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tme.links.push(lnk);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tme.bf.L1/*loadOption*/.call(me.bf, me);\r\n\t},\r\n\t\r\n\tL2/*getContent*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tr = {};\r\n\t\t\r\n\t\tif (me.item)\r\n\t\t{\r\n\t\t\tr = {\r\n\t\t\t\tuid: me.item.uid,\r\n\t\t\t\tnodepath: me.item.nodepath,\r\n\t\t\t\tname: me.item.name\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tme.bf.l2/*exportContent*/(r);\r\n\t\t\r\n\t\treturn r;\r\n\t}\r\n}\r\n\t\r\n\r\n/**********\r\n * Main panel : flow editor\r\n */\r\nIG$.flowEditor = $s.extend($s.panel, {\r\n\tclosable: true,\r\n\t\r\n\tlayout: {\r\n\t\ttype: \"vbox\",\r\n\t\talign: \"stretch\"\r\n\t},\r\n\tbodyPadding: 0,\r\n\tsgap: 1000,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\ttopmenu = me.topmenu,\r\n\t\t\tmainarea = me.mainarea,\r\n\t\t\tfmenu,\r\n\t\t\tfarea,\r\n\t\t\tbf,\r\n\t\t\tdt = [],\r\n\t\t\t__m/*mode*/ = me.__m/*mode*/,\r\n\t\t\tbccall;\r\n\t\t\t\r\n\t\tdt = [\r\n\t\t\t{\r\n\t\t\t\tshape: \"rect\",\r\n\t\t\t\tname: \"datasource\",\r\n\t\t\t\ttext: \"Data source\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tshape: \"ellipse\",\r\n\t\t\t\tname: \"mapreduce\",\r\n\t\t\t\ttext: \"Map/Reduce\",\r\n\t\t\t\thidden: __m/*mode*/\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tshape: \"ellipse\",\r\n\t\t\t\tname: \"mongoreduce\",\r\n\t\t\t\ttext: \"Data Processing\",\r\n\t\t\t\thidden: !__m/*mode*/\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tshape: \"ellipse\",\r\n\t\t\t\tname: \"mongodoc\",\r\n\t\t\t\ttext: \"Update Document\",\r\n\t\t\t\thidden: !__m/*mode*/\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tshape: \"ellipse\",\r\n\t\t\t\tname: \"hive\",\r\n\t\t\t\ttext: \"Hive Job\",\r\n\t\t\t\thidden: __m/*mode*/\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tshape: \"triangle\",\r\n\t\t\t\tname: \"shell\",\r\n\t\t\t\ttext: \"Shell Command\",\r\n\t\t\t\thidden: __m/*mode*/\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tshape: \"triangle\",\r\n\t\t\t\tname: \"dataprocess\",\r\n\t\t\t\ttext: \"Data processing\",\r\n\t\t\t\thidden: __m/*mode*/\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tshape: \"diamond\",\r\n\t\t\t\tname: \"output\",\r\n\t\t\t\ttext: \"Output\"\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\t\tfarea = me.farea = $(\"<div class='idv-flw-reg'></div>\").appendTo(mainarea);\r\n\t\t\r\n\t\tbf = me.bf = new IG$._I9a/*flowDiagram*/(farea, {\r\n\t\t\tptype: \"bigdatamodel\"\r\n\t\t});\r\n\t\tbf.init.call(bf);\r\n\t\t\t\r\n\t\ttopmenu.empty();\r\n\t\tfmenu = $(\"<div class='idv-flw-mnu'></div>\").appendTo(topmenu);\r\n\t\t\r\n\t\tme.l1/*initFlowMenu*/(fmenu, dt);\r\n\t\t\r\n\t\tbccall = new IG$.callBackObj(me, me.l4/*onBoxUpdate*/);\r\n\t\t\r\n\t\tbf.container.bind(\"boxClicked\", function(ev, data) {\r\n\t\t\tvar dlg,\r\n\t\t\t\tmoption = me.down(\"[name=moption]\");\r\n\t\t\t\t\r\n\t\t\tmoption.removeAll();\r\n\t\t\t\r\n\t\t\tswitch (data.name)\r\n\t\t\t{\r\n\t\t\tcase \"datasource\":\r\n\t\t\t\tdlg = new IG$.BC$ds/*hadoop_datasource*/({\r\n\t\t\t\t\tjob: data,\r\n\t\t\t\t\t_p/*editor*/: me,\r\n\t\t\t\t\t__m/*mode*/: __m/*mode*/,\r\n\t\t\t\t\tcallback: bccall\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"mapreduce\":\r\n\t\t\t\tdlg = new IG$.BC$mr/*hadoop_mapreduce*/({\r\n\t\t\t\t\tjob: data,\r\n\t\t\t\t\t_p/*editor*/: me,\r\n\t\t\t\t\t__m/*mode*/: __m/*mode*/,\r\n\t\t\t\t\tcallback: bccall\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"mongoreduce\":\r\n\t\t\t\tdlg = new IG$.BC$mr1/*mongo_mapreduce*/({\r\n\t\t\t\t\tjob: data,\r\n\t\t\t\t\t_p/*editor*/: me,\r\n\t\t\t\t\t__m/*mode*/: __m/*mode*/,\r\n\t\t\t\t\tcallback: bccall\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"mongodoc\":\r\n\t\t\t\tdlg = new IG$.BC$mr2/*mongo_document*/({\r\n\t\t\t\t\tjob: data,\r\n\t\t\t\t\t_p/*editor*/: me,\r\n\t\t\t\t\t__m/*mode*/: __m/*mode*/,\r\n\t\t\t\t\tcallback: bccall\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"shell\":\r\n\t\t\t\tdlg = new BC$sc({\r\n\t\t\t\t\tjob: data,\r\n\t\t\t\t\t_p/*editor*/: me,\r\n\t\t\t\t\t__m/*mode*/: __m/*mode*/,\r\n\t\t\t\t\tcallback: bccall\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"hive\":\r\n\t\t\t\tdlg = new IG$.BC$hj/*hadoop_hivejob*/({\r\n\t\t\t\t\tjob: data,\r\n\t\t\t\t\t_p/*editor*/: me,\r\n\t\t\t\t\t__m/*mode*/: __m/*mode*/,\r\n\t\t\t\t\tcallback: bccall\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"output\":\r\n\t\t\t\tdlg = new IG$.BC$op/*hadoop_output*/({\r\n\t\t\t\t\tjob: data,\r\n\t\t\t\t\t_p/*editor*/: me,\r\n\t\t\t\t\t__m/*mode*/: __m/*mode*/,\r\n\t\t\t\t\tcallback: bccall\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (dlg)\r\n\t\t\t{\r\n\t\t\t\tmoption.expand();\r\n\t\t\t\tmoption.add(dlg);\r\n\t\t\t\t\r\n\t\t\t\tdlg.on(\"close_dlg\", function(m) {\r\n\t\t\t\t\tmoption.remove(dlg);\r\n\t\t\t\t\tmoption.collapse();\r\n\t\t\t\t});\r\n\t\t\t\t// IG$.checkLogin(this, dlg);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif (me.uid)\r\n\t\t{\r\n\t\t\tme.M1/*loadContent*/();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tme.rs_M1/*rs_loadContent*/(null);\r\n\t\t}\r\n\t},\r\n\t\r\n\tl4/*onBoxUpdate*/: function(job) {\r\n\t\tjob.dv_dsname.text(job.dsname);\r\n\t},\r\n\t\r\n\tM1/*loadContent*/: function() {\r\n\t\tvar me = this,\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\r\n\t\tif (me.uid)\r\n\t\t{\t\r\n\t\t\treq.init(me, \r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"content\",\r\n\t\t\t\t\tpayload: {uid: me.uid},\r\n\t\t\t\t\tmbody: {option: 'diagnostics'}\r\n\t\t\t\t}, me, me.rs_M1/*rs_loadContent*/, false);\r\n\t\t\treq.send();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tme.itemobj = new IG$._IB8/*bpobject*/(null, me.bf);\r\n\t\t}\r\n\t},\r\n\t\r\n\trs_M1/*rs_loadContent*/: function(xdoc) {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.itemobj = new IG$._IB8/*bpobject*/(xdoc, me.bf);\r\n\t},\r\n\t\r\n\tm2/*getParents*/: function(mobj, pname) {\r\n\t\tvar me = this,\r\n\t\t\tbf = me.bf,\r\n\t\t\ta_boxes = bf.a_boxes,\r\n\t\t\ti,\r\n\t\t\tcobj,\r\n\t\t\tcons = bf.plumb.getConnections(),\r\n\t\t\tsrc, tgt,\r\n\t\t\tconnections = [],\r\n\t\t\tprev = [];\r\n\t\t\t\r\n\t\tfor (i=0; i < a_boxes.length; i++)\r\n\t\t{\r\n\t\t\tif (a_boxes[i].sid == mobj.job.sid)\r\n\t\t\t{\r\n\t\t\t\tcobj = a_boxes[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (cons && cons.length)\r\n\t\t{\r\n\t\t\tfor (i=0; i < cons.length; i++)\r\n\t\t\t{\r\n\t\t\t\tsrc = cons[i].source;\r\n\t\t\t\ttgt = cons[i].target;\r\n\t\t\t\t\r\n\t\t\t\tsrc = bf.getBoxObject.call(bf, src);\r\n\t\t\t\ttgt = bf.getBoxObject.call(bf, tgt);\r\n\t\t\t\t\r\n\t\t\t\tconnections.push({\r\n\t\t\t\t\tsrc: src,\r\n\t\t\t\t\ttgt: tgt\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (tgt && tgt.sid == cobj.sid)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (src && (pname && src.name == pname || !pname))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprev.push(src);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn prev;\r\n\t},\r\n\t\r\n\tl1/*initFlowMenu*/: function(fmenu, dt) {\r\n\t\tvar me = this,\r\n\t\t\ti,\r\n\t\t\tmul,\r\n\t\t\tgap = 10,\r\n\t\t\tsx = gap,\r\n\t\t\tbf = me.bf;\r\n\t\t\t\r\n\t\tfmenu.empty();\r\n\t\t\r\n\t\t$.each(dt, function(n, item) {\r\n\t\t\tvar dv,\r\n\t\t\t\tbg;\r\n\t\t\t\r\n\t\t\tif (!item.hidden)\r\n\t\t\t{\r\n\t\t\t\tvar nitem = new IG$._baN/*bflowNode*/();\r\n\t\t\t\tnitem.c1/*clone*/.call(nitem, item);\r\n\t\t\t\tdv = $(\"<div class='idv-flw-shp-a'><div>\" + nitem.text + \"</div></div>\").appendTo(fmenu);\r\n\t\t\t\tdv.css({left: sx});\r\n\t\t\t\tnitem.div = dv;\r\n\t\t\t\tsx += gap + (IG$.j$ext._w(dv) || 120);\r\n\t\t\t\tdv.draggable({\r\n\t\t\t\t\topacity: 0.7, \r\n\t\t\t\t\thelper: \"clone\",\r\n\t\t\t\t\tstop: function(event, ui) {\r\n\t\t\t\t\t\tvar p = ui.position,\r\n\t\t\t\t\t\t\tfarea = me.farea,\r\n\t\t\t\t\t\t\tmp = $(farea.parent()).offset(),\r\n\t\t\t\t\t\t\tmposition = farea.offset(),\r\n\t\t\t\t\t\t\tmw = IG$.j$ext._w(farea),\r\n\t\t\t\t\t\t\tmh = IG$.j$ext._h(farea);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tmposition.top -= mp.top;\r\n\t\t\t\t\t\tmposition.left -= mp.left;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (mposition.left < p.left && p.left < mposition.left + mw \r\n\t\t\t\t\t\t\t&& mposition.top < p.top && p.top < mposition.top + mh)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbf.addBox.call(bf, nitem, p);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t\r\n\ttoolbarHandler: function(cmd) {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tswitch (cmd)\r\n\t\t{\r\n\t\tcase \"cmd_save\":\r\n\t\t\tif (!me.uid)\r\n\t\t\t{\r\n\t\t\t\tme.fV7/*saveAsMetaContent*/(false);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tme.fV6/*saveMetaContent*/(false);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_saveas\":\r\n\t\t\tme.fV7/*saveAsMetaContent*/(false);\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_run\":\r\n\t\t\tme.lll/*runBusiness*/();\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_favorites\":\r\n\t\t\tif (this.uid)\r\n\t\t\t{\r\n\t\t\t\tvar req = new IG$._rpc$();\r\n\t\t\t\treq.init(me, \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tack: \"helpcontent\",\r\n\t\t\t\t\t\tpayload: {uid: me.uid},\r\n\t\t\t\t\t\tmbody: {option: 'addfavorites'}\r\n\t\t\t\t\t}, me, me.rs_regFavorites, null, null);\r\n\t\t\t\treq.send();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tIG$.alertmsg(ig$.appname, IRm$.r1('M_ERR_NSAVE'), null, me, 1, \"error\");\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_schedule\":\r\n\t\t\tif (me.uid)\r\n\t\t\t{\r\n\t\t\t\tvar mreq = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tack: \"bizop\",\r\n\t\t\t\t\t\tpayload: {uid: me.uid, option: \"execute\"},\r\n\t\t\t\t\t\tmbody: me.itemobj.L2/*getContent*/.call(me.itemobj),\r\n\t\t\t\t\t\tjobkey: \"0\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]; \r\n\t\t\t\t\r\n\t\t\t\tIG$.showScheduler(me, me.uid, me.itemtype, mreq, null);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_log_view\":\r\n\t\t\tif (this.uid)\r\n\t\t\t{\r\n\t\t\t\tvar dlg = new IG$._Ia0/*hadoop_logviewer*/({\r\n\t\t\t\t\tuid: me.uid\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tIG$.checkLogin(this, dlg);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tIG$.alertmsg(ig$.appname, IRm$.r1('M_ERR_NSAVE'), null, me, 1, \"error\");\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\r\n\trs_regFavorites: function(xdoc) {\r\n\t\tIG$.alertmsg(ig$.appname, IRm$.r1(\"M_SAVED_FAV\"), null, null, 0, \"success\");\r\n\t},\r\n\t\r\n\tlll/*runBusiness*/: function() {\r\n\t\tvar panel = this,\r\n\t\t\tme = panel,\r\n\t\t\treq = new IG$._rpc$(),\r\n\t\t\tcontentxml = panel.itemobj.L2/*getContent*/.call(panel.itemobj);\r\n\t\treq.showerror = false;\r\n\t\treq.init(panel, \r\n\t\t\t{\r\n\t\t\t\tack: \"bizop\",\r\n\t\t\t\tpayload: {uid: me.uid, option: \"execute\", type: me.itemtype},\r\n\t\t\t\tmbody: contentxml\r\n\t\t\t}, panel, panel.rs_lll/*runBusiness*/, panel.rs_lllE/*runBusinessError*/);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_lll/*runBusiness*/: function(xdoc) {\r\n\t\tvar me = this,\r\n\t\t\ttnode = IG$.XGetNode(xdoc, \"/smsg/result\");\r\n\t\t\r\n\t\tif (tnode)\r\n\t\t{\r\n\t\t\tme.sid = IG$.XGetAttr(tnode, \"sid\");\r\n\t\t\t\r\n\t\t\tme.ll4/*getStatus*/();\r\n\t\t}\r\n\t},\r\n\t\r\n\tll4/*getStatus*/: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tif (me.stimer)\r\n\t\t{\r\n\t\t\tclearTimeout(me.stimer);\r\n\t\t}\r\n\t\t\r\n\t\tme.stimer = setTimeout(function() {\r\n\t\t\tme.ll3/*getRunStatus*/.call(me);\r\n\t\t}, me.sgap);\r\n\t},\r\n\t\r\n\trs_lllE/*runBusinessError*/: function(xdoc) {\r\n\t\tvar panel = this,\r\n\t\t\tr = true,\r\n\t\t\terrcode = IG$.getErrorCode(xdoc);\r\n\t\t\r\n\t\tif(errcode == \"0x28a0\")\r\n\t\t{\r\n\t\t\tr = false;\r\n\t\t\t\r\n\t\t\tvar tnode = IG$.XGetNode(xdoc, \"/smsg\"),\r\n\t\t\t\tsid = IG$.XGetTextVal(tnode);\r\n\t\t\t\t\r\n\t\t\tif (sid)\r\n\t\t\t{\r\n\t\t\t\tIG$.confirmMessages(ig$.appname, \"Already workflow is running on server. Would you like to stop service?\", function(e) {\r\n\t\t\t\t\tif (e == \"yes\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar req = new IG$._rpc$();\r\n\t\t\t\t\t\treq.init(panel, \r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tack: \"bizop\",\r\n\t\t\t\t\t\t\t\tpayload: {uid: panel.uid, sid: sid, option: \"cancelWorkflow\"},\r\n\t\t\t\t\t\t\t\tmbody: {}\r\n\t\t\t\t\t\t\t}, panel, panel.rs_ll2/*cancelWorkflow*/, null);\r\n\t\t\t\t\t\treq.send();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, panel, panel);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn r;\r\n\t},\r\n\t\r\n\trs_ll2/*cancelWorkflow*/: function(xdoc) {\r\n\t\tvar me = this;\r\n\t\tme.lll/*runBusiness*/();\r\n\t},\r\n\t\r\n\tfV6/*saveMetaContent*/: function(afterclose) {\r\n\t\tvar panel = this,\r\n\t\t\tcontentxml = panel.itemobj.L2/*getContent*/.call(panel.itemobj);\r\n\t\tvar req = new IG$._rpc$();\r\n\t\treq.init(panel, \r\n\t\t\t{\r\n\t\t\t\tack: \"writecontent\",\r\n\t\t\t\tpayload: {uid: panel.uid},\r\n\t\t\t\tmbody: contentxml,\r\n\t\t\t\tmeta_type: \"bigdatamodel\"\r\n\t\t\t}, panel, panel.rs_fV6/*saveMetaContent*/, null, [afterclose]);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_fV6/*saveMetaContent*/: function(xdoc, opt) {\r\n\t\tvar me = this,\r\n\t\t\tafterclose = (opt ? opt[0] : false);\r\n\t\tif (afterclose == true)\r\n\t\t{\r\n\t\t\tme.close();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tme.contentchanged = false;\r\n\t\t\tIG$.alertmsg(ig$.appname, IRm$.r1(\"M_SAVED\"), null, null, 0, \"success\");\r\n\t\t}\r\n\t},\r\n\t\r\n\tfV7/*saveAsMetaContent*/: function(afterclose) {\r\n\t\tvar me = this,\r\n\t\t\tdlgitemsel = new IG$.metaSelectDlg({\r\n\t\t\t\tmode: \"newitem\",\r\n\t\t\t\tinitpath: me.nodepath,\r\n\t\t\t\tcallback: new IG$.callBackObj(me, me.fV8/*saveNewMetaContent*/, afterclose)\r\n\t\t\t});\r\n\t\tIG$.checkLogin(me, dlgitemsel);\r\n\t},\r\n\t\r\n\tfV8/*saveNewMetaContent*/: function(item, afterclose) {\r\n\t\tvar panel = this,\r\n\t\t\tcontentxml = panel.itemobj.L2/*getContent*/.call(panel.itemobj),\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\r\n\t\treq.init(panel, \r\n\t\t\t{\r\n\t\t\t\tack: \"writecontent\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\taddress: item.nodepath + \"/\" + item.name,\r\n\t\t\t\t\tname: item.name,\r\n\t\t\t\t\ttype: this.itemtype || 'BigData',\r\n\t\t\t\t\tpid: item.uid\r\n\t\t\t\t},\r\n\t\t\t\tmbody: contentxml,\r\n\t\t\t\tmeta_type: \"bigdatamodel\"\r\n\t\t\t}, panel, panel._rs_procMakeItem, panel.rs_procMakeItem, [item.name, afterclose, item.nodepath, item.uid, contentxml]);\r\n\t\t   req.showerror = false;\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\t_rs_procMakeItem: function(xdoc, opt) {\r\n\t\tvar me = this,\r\n\t\t\titemobj = me.itemobj,\r\n\t\t\tpnode;\r\n\t\t\t\r\n\t\tpnode = IG$.XGetNode(xdoc, \"/smsg/item\");\r\n\t\t\r\n\t\tif (pnode)\r\n\t\t{\r\n\t\t\titemobj.item = IG$.XGetAttrProp(pnode);\r\n\t\t\tme.setTitle(itemobj.item.name);\r\n\t\t\tme.uid = itemobj.item.uid;\r\n\t\t}\r\n\t},\r\n\t\r\n\trs_procMakeItem: function(xdoc, opt) {\r\n\t\tvar panel = this,\r\n\t\t\titemname = opt[0],\r\n\t\t\tafterclose = opt[1],\r\n\t\t\tnodepath = opt[2],\r\n\t\t\tpitemuid = opt[3],\r\n\t\t\tcontentxml = opt[4],\r\n\t\t\terrcode = IG$.getErrorCode(xdoc);\r\n\t\t\r\n\t\tif (errcode == \"0x12e0\")\r\n\t\t{\r\n\t\t\tIG$.confirmMessages(ig$.appname, itemname + \" already exist on the server. Would you overwrite existing item with this copy?\", function(e) {\r\n\t\t\t\tif (e == \"yes\")\r\n\t\t\t\t{\r\n\t\t\t\t\tvar req = new IG$._rpc$();\r\n\t\t\t\t\treq.init(panel, \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tack: \"writecontent\",\r\n\t\t\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\t\t\taddress: nodepath + \"/\" + itemname,\r\n\t\t\t\t\t\t\t\tname: itemname,\r\n\t\t\t\t\t\t\t\ttype: this.itemtype || 'Report',\r\n\t\t\t\t\t\t\t\tpid: pitemuid,\r\n\t\t\t\t\t\t\t\toverwrite: 'T'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmbody: contentxml\r\n\t\t\t\t\t\t}, panel, panel._rs_procMakeItem, null, [itemname, afterclose, nodepath]);\r\n\t\t\t\t\treq.send();\r\n\t\t\t\t}\r\n\t\t\t}, panel, panel);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tIG$.ShowErrorMessage(xdoc, panel);\r\n\t\t}\r\n\t},\r\n\t\r\n\tll3/*getRunStatus*/: function() {\r\n\t\tvar panel = this,\r\n\t\t\treq = new IG$._rpc$();\r\n\t\treq.init(panel, \r\n\t\t\t{\r\n\t\t\t\tack: \"bizop\",\r\n\t\t\t\tpayload: {uid: panel.uid, sid: panel.sid, option: \"jobstatus\"},\r\n\t\t\t\tmbody: {}\r\n\t\t\t}, panel, panel.rs_ll3/*getRunStatus*/, null);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_ll3/*getRunStatus*/: function(xdoc) {\r\n\t\tvar me = this,\r\n\t\t\ttnode = IG$.XGetNode(xdoc, \"/smsg/item\"),\r\n\t\t\ttnodes,\r\n\t\t\ti,\r\n\t\t\tmstatus, stats={}, stat;\r\n\t\tif (tnode)\r\n\t\t{\r\n\t\t\tmstatus = IG$.XGetAttr(tnode, \"status\");\r\n\t\t\tmstatus = parseInt(mstatus);\r\n\t\t\t\r\n\t\t\ttnodes = IG$.XGetChildNodes(tnode);\r\n\t\t\t\r\n\t\t\tfor (i=0; i < tnodes.length; i++)\r\n\t\t\t{\r\n\t\t\t\tstat = IG$.XGetAttrProp(tnodes[i]);\r\n\t\t\t\tstat.status = parseInt(stat.status);\r\n\t\t\t\tstats[stat.lid] = stat;\r\n\t\t\t\t\r\n\t\t\t\tme.bf.s1/*setStatus*/.call(me.bf, stat);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (mstatus == 1)\r\n\t\t\t{\r\n\t\t\t\tme.ll4/*getStatus*/();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tinitComponent: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.__m/*mode*/ = me.itemtype == \"BigData\" ? 0 : 1;\r\n\t\t\r\n\t\t$s.apply(this, {\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"container\",\r\n\t\t\t\t\tname: \"topmenu\",\r\n\t\t\t\t\theight: 40,\r\n\t\t\t\t\tborder: 1,\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tborderColor: '#efefef',\r\n\t\t\t\t\t\tborderStyle: 'solid'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"container\",\r\n\t\t\t\t\tflex: 1,\r\n\t\t\t\t\tlayout: \"border\",\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"container\",\r\n\t\t\t\t\t\t\tname: \"mainarea\",\r\n\t\t\t\t\t\t\tregion: \"center\",\r\n\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\tname: \"moption\",\r\n\t\t\t\t\t\t\ttitle: \"Properties\",\r\n\t\t\t\t\t\t\tsplit: true,\r\n\t\t\t\t\t\t\tcollapsible: true,\r\n\t\t\t\t\t\t\tcollapsed: true,\r\n\t\t\t\t\t\t\tcollapseMode: \"mini\",\r\n\t\t\t\t\t\t\tregion: \"east\",\r\n\t\t\t\t\t\t\twidth: 420,\r\n\t\t\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"displayfield\",\r\n\t\t\t\t\t\t\t\t\tvalue: \"Click Item to set properties\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\ttbar: [\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: 'icon-toolbar-save',\r\n\t\t\t\t\tname: \"t_save\",\r\n\t\t\t\t\ttooltip: IRm$.r1('L_SAVE_CONTENT'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_save'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: 'icon-toolbar-saveas',\r\n\t\t\t\t\tname: \"t_save_as\",\r\n\t\t\t\t\ttooltip: IRm$.r1('L_SAVE_CONTENTAS'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_saveas'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: 'icon-toolbar-runreport',\r\n\t\t\t\t\tname: \"t_run\",\r\n\t\t\t\t\ttooltip: IRm$.r1('L_RUN'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_run'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: \"icon-toolbar-logview\",\r\n\t\t\t\t\tname: \"t_log\",\r\n\t\t\t\t\ttooltip: IRm$.r1('L_LOG_VIEW'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_log_view'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t\"->\",\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: \"icon-toolbar-schedule\",\r\n\t\t\t\t\tcls: \"ig_r_sch\",\r\n\t\t\t\t\ttooltip: IRm$.r1('B_SCHEDULE'),\r\n\t\t\t\t\thidden: ig$.features && !ig$.features.enable_scheduler ? true : false,\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler.call(this, 'cmd_schedule');\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: \"icon-toolbar-favorites\",\r\n\t\t\t\t\ttooltip: IRm$.r1('B_FAVORITES'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler.call(this, 'cmd_favorites');\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\t\t  \r\n\t\tIG$.flowEditor.superclass.initComponent.call(this);\r\n\t},\r\n\t\r\n\tlisteners: {\r\n\t\tafterrender: function(tobj) {\r\n\t\t\tvar me = this;\r\n\t\t\t\r\n\t\t\tme.topmenu = $(me.down(\"[name=topmenu]\").el.dom);\r\n\t\t\tme.mainarea = $(me.down(\"[name=mainarea]\").el.dom);\r\n\t\t\t\r\n\t\t\tme.init_f();\r\n\t\t}\r\n\t}\r\n\t\r\n});","IG$.BC$hcp/*hadoop_config_items*/ = {};\r\n\r\nIG$.BC$hcp/*hadoop_config_items*/.hconfig = [\r\n\t// \"HADOOP_HOME\", \"JAVA_HOME\", \"CMD_FS_IMPORT\", \"HADOOP_CONF\"\r\n];\r\n\r\nIG$.BC$hcp/*hadoop_config_items*/.dconfig = {\r\n\t\"CURDATE\": \"DATE;yyyyMMdd\",\r\n\t\"PREVDATE\": \"DATE;yyyyMMdd;D;-1\",\r\n\t\"PREVMONTH\": \"DATE;yyyyMMdd;M;-1\",\r\n\t\"PREVYEAR\": \"DATE;yyyyMMdd;Y;-1\",\r\n\t\"USERNAME\": \"USERNAME\",\r\n\t\"GROUPNAME\": \"GROUPNAME\",\r\n\t\"USERID\": \"USERID\",\r\n\t\"USERNAME\": \"USERNAME\",\r\n\t\"DEPTNAME\": \"SQL;IGCBASE;SELECT dname FROM WHERE dname='${GROUPNAME}'\"\r\n}\r\n\r\nIG$.hadoop_config = $s.extend($s.panel, {\r\n\t\r\n\tclosable: true,\r\n\t\r\n\tlayout: \"fit\",\r\n\tbodyPadding: 10,\r\n\t\r\n\ticonCls: \"icon-ing-docdef\",\r\n\t\r\n\t_uid: \"/SYS_Config/systemconfig\",\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\treq,\r\n\t\t\tgrdparams = me.down(\"[name=grdparams]\"),\r\n\t\t\ti,\r\n\t\t\tuid = me._uid;\r\n\t\t\r\n\t\treq = new IG$._rpc$();\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"content\",\r\n\t\t\t\tpayload: {uid: uid},\r\n\t\t\t\tmbody: {}\r\n\t\t\t}, me, me.rs_loadContent, me.rs_F1e/*rs_error*/);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_loadContent: function(jdoc) {\r\n\t\tvar me = this,\r\n\t\t\ttnodes,\r\n\t\t\ti, params = [], param;\r\n\t\t\r\n\t\tif (jdoc && jdoc.data)\r\n\t\t{\r\n\t\t\tparams = jdoc.data;\r\n\t\t}\r\n\t\t\r\n\t\tme.params = params;\r\n\t\t\r\n\t\tme.l1/*loadParam*/();\r\n\t},\r\n\t\r\n\trs_F1e/*rs_error*/: function(xdoc) {\r\n\t\tvar me = this,\r\n\t\t\tr = true,\r\n\t\t\treq,\r\n\t\t\terrcode = IG$.getErrorCode(xdoc),\r\n\t\t\tuid = me._uid;\r\n\t\t\r\n\t\tif (errcode == \"0x1400\")\r\n\t\t{\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\treq.init(me, \r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"writecontent\",\r\n\t\t\t\t\tpayload: {address: uid, name: \"systemconfig\", type: \"PrivateContent\"},\r\n\t\t\t\t\tmbody: {data: []}\r\n\t\t\t\t}, me, me.rs_loadContent, me.rs_F1w/*writeConfig*/);\r\n\t\t\treq.send();\r\n\t\t\tr = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn r\r\n\t},\r\n\t\r\n\trs_F1w/*writeConfig*/: function(xdoc) {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.params = [];\r\n\t\t\t\t\r\n\t\tme.l1/*loadParam*/();\r\n\t},\r\n\t\r\n\tl1/*loadParam*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tbaseparams = IG$.BC$hcp/*hadoop_config_items*/.hconfig,\r\n\t\t\tdconfig = IG$.BC$hcp/*hadoop_config_items*/.dconfig,\r\n\t\t\tparams = [],\r\n\t\t\tgparams = me.params,\r\n\t\t\tgp = {},\r\n\t\t\tgrdparams = me.down(\"[name=grdparams]\"),\r\n\t\t\ti, key;\r\n\r\n\t\tfor (i=0; i < baseparams.length; i++)\r\n\t\t{\r\n\t\t\tgp[baseparams[i]] = baseparams[i];\r\n\t\t}\r\n\t\t\r\n\t\tfor (i=0; i < gparams.length; i++)\r\n\t\t{\r\n\t\t\tif (gp[gparams[i].name])\r\n\t\t\t{\r\n\t\t\t\tdelete gp[gparams[i].name];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (dconfig[gparams[i].name])\r\n\t\t\t{\r\n\t\t\t\tdelete dconfig[gparams[i].name];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tparams.push({\r\n\t\t\t\tname: gparams[i].name,\r\n\t\t\t\ttype: gparams[i].type,\r\n\t\t\t\tvalue: gparams[i].value,\r\n\t\t\t\tdsource: gparams[i].dsource,\r\n\t\t\t\tsql_exec_type: gparams[i].sql_exec_type\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfor (key in gp) {\r\n\t\t\tparams.push({\r\n\t\t\t\tname: key,\r\n\t\t\t\ttype: \"SVAR\",\r\n\t\t\t\tvalue: \"\"\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfor (key in dconfig) {\r\n\t\t\tparams.push({\r\n\t\t\t\ttype: \"DVAR\",\r\n\t\t\t\tname: key,\r\n\t\t\t\tvalue: dconfig[key]\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tgrdparams.store.loadData(params);\r\n\t},\r\n\t\r\n\ttoolbarHandler: function(cmd) {\r\n\t\tvar me = this,\r\n\t\t\tgrdparams = me.down(\"[name=grdparams]\");\r\n\t\t\r\n\t\tswitch (cmd)\r\n\t\t{\r\n\t\tcase \"cmd_save\":\r\n\t\t\tme.save_content();\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_refresh\":\r\n\t\t\tme.init_f();\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_add_param\":\r\n\t\t\t\r\n\t\t\tvar\trow = grdparams.store.add({\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tvalue: \"\"\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tgrdparams.getSelectionModel().select(row);\r\n\t\t\t\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_rm_param\":\r\n\t\t\tvar sel = grdparams.getSelectionModel().selected,\r\n\t\t\t\ti,\r\n\t\t\t\trec;\r\n\t\t\t\t\r\n\t\t\tfor (i=sel.length-1; i>=0; i--)\r\n\t\t\t{\r\n\t\t\t\tgrdparams.store.remove(sel.items[i]);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\r\n\tsave_content: function() {\r\n\t\tvar me = this,\r\n\t\t\tgrdparams = me.down(\"[name=grdparams]\"),\r\n\t\t\ti, rec,\r\n\t\t\treq, cnt = {data: []},\r\n\t\t\tdata = cnt.data;\r\n\t\t\r\n\t\tfor (i=0; i < grdparams.store.data.items.length; i++)\r\n\t\t{\r\n\t\t\trec = grdparams.store.data.items[i];\r\n\t\t\tif (rec.get(\"name\"))\r\n\t\t\t{\r\n\t\t\t\tdata.push({\r\n\t\t\t\t\ttype: (rec.get(\"type\") || \"VAR\"),\r\n\t\t\t\t\tname: rec.get(\"name\"),\r\n\t\t\t\t\tvalue: rec.get(\"value\"),\r\n\t\t\t\t\tsql_exec_type: rec.get(\"sql_exec_type\"),\r\n\t\t\t\t\tdsource: rec.get(\"dsource\")\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treq = new IG$._rpc$();\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"writecontent\",\r\n\t\t\t\tpayload: {address: me._uid},\r\n\t\t\t\tmbody: cnt,\r\n\t\t\t\tmeta_type: \"sysparams\"\r\n\t\t\t}, me, me.rs_save_content, null);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_save_content: function(xdoc) {\r\n\t\tvar panel = this;\r\n\t\tIG$.alertmsg(ig$.appname, IRm$.r1('M_SAVED'), null, panel, 0, \"success\");\r\n\t},\r\n\r\n\tinitComponent: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\t$s.apply(this, {\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"form\",\r\n\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\ttype: \"vbox\",\r\n\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tborder: 0,\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"displayfield\",\r\n\t\t\t\t\t\t\tvalue: IRm$.r1(\"L_V_DESC\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"gridpanel\",\r\n\t\t\t\t\t\t\tname: \"grdparams\",\r\n\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\"name\", \"value\", \"type\"\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\tselType: \"checkboxmodel\",\r\n\t\t\t\t\t\t\tselModel: {\r\n\t\t\t\t\t\t\t\tcheckSelector: \".x-grid-cell\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\tplugins: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tptype: \"cellediting\",\r\n\t\t\t\t\t\t\t\t\tclicksToEdit: false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_TYPE\"),\r\n\t\t\t\t\t\t\t\t\tdataIndex: \"type\",\r\n\t\t\t\t\t\t\t\t\twidth: 80\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_NAME\"),\r\n\t\t\t\t\t\t\t\t\tdataIndex: \"name\",\r\n\t\t\t\t\t\t\t\t\ttdCls: \"igc-td-link\",\r\n\t\t\t\t\t\t\t\t\twidth: 200\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_VALUE\"),\r\n\t\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\t\tdataIndex: \"value\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\tcellclick: function(view, node, c, rec, rindex, e) {\r\n\t\t\t\t\t\t\t\t\tif (c == 2)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tvar dlg = new IG$.$Dhadoop_cfg({\r\n\t\t\t\t\t\t\t\t\t\t\trecord: rec\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tdlg.show();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\ttbar: [\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: \"icon-toolbar-save\",\r\n\t\t\t\t\tname: \"t_save\",\r\n\t\t\t\t\ttooltip: IRm$.r1(\"L_SAVE_CONTENT\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler(\"cmd_save\"); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t\"-\",\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: \"icon-refresh\",\r\n\t\t\t\t\ttooltip: IRm$.r1(\"L_REFRESH\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler(\"cmd_refresh\"); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t\"-\",\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: \"icon-toolbar-add\",\r\n\t\t\t\t\ttext: IRm$.r1(\"L_ADD_VAR\"),\r\n\t\t\t\t\ttooltip: IRm$.r1(\"L_ADD_VAR\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler(\"cmd_add_param\"); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: \"icon-grid-delete\",\r\n\t\t\t\t\ttext: IRm$.r1(\"L_RM_VAR\"),\r\n\t\t\t\t\ttooltip: IRm$.r1(\"L_RM_VAR\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler(\"cmd_rm_param\"); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t\"-\",\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Up\",\r\n\t\t\t\t\ttooltip: \"Up\",\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Down\",\r\n\t\t\t\t\ttooltip: \"Down\",\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\t\t  \r\n\t\tIG$.hadoop_config.superclass.initComponent.call(this);\r\n\t},\r\n\t\r\n\tlisteners: {\r\n\t\tafterrender: function(tobj) {\r\n\t\t\tvar me = this;\r\n\t\t\tme.init_f();\r\n\t\t}\r\n\t}\r\n\t\r\n});\r\n\r\nIG$.$Dhadoop_cfg = $s.extend($s.window, {\r\n\t\r\n\tmodal: true,\r\n\tlayout: \"fit\",\r\n\tclosable: false,\r\n\tresizable:false,\r\n\twidth: 500,\r\n\tautoHeight: true,\r\n\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this\r\n\t\t\r\n\t\tme.load_dbpool();\r\n\t},\r\n\t\r\n\tload_dbpool: function() {\r\n\t\tvar me = this,\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"userdb\",\r\n\t\t\t\tpayload: {address: \"/Connections\", option: \"list\"},\r\n\t\t\t\tmbody: {}\r\n\t\t\t}, me, function(jdoc) {\r\n\t\t\t\tvar me = this,\r\n\t\t\t\t\td,\r\n\t\t\t\t\ti, tnodes, dp = [],\r\n\t\t\t\t\tdsource = me.down(\"[name=dsource]\");\r\n\t\t\t\t\r\n\t\t\t\tdp.push({name: \"-- Select Database --\", uid: \"\"});\r\n\t\t\t\t\r\n\t\t\t\tif (jdoc && jdoc.children)\r\n\t\t\t\t{\r\n\t\t\t\t\ttnodes = jdoc.children;\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (i=0; i < tnodes.length; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\td = tnodes[i];\r\n\t\t\t\t\t\td.name = d.locale_name || d.name;\r\n\t\t\t\t\t\tdp.push(d);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdsource.store.loadData(dp);\r\n\t\t\t\tdsource.setValue(\"\");\r\n\t\t\t\t\r\n\t\t\t\tif (me.record)\r\n\t\t\t\t{\r\n\t\t\t\t\tme.down(\"[name=mform]\").setAllValues(me.record.data);\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\tcommit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\trecord = me.record,\r\n\t\t\terror;\r\n\t\t\r\n\t\tif (record)\r\n\t\t{\r\n\t\t\terror = me.down(\"[name=mform]\").getAllValues(record.data);\r\n\t\t\t\r\n\t\t\tif (error)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\trecord.refresh();\r\n\t\t}\r\n\t\t\r\n\t\tme.callback && me.callback.execute();\r\n\t\tme.close();\r\n\t},\r\n\t\r\n\tinitComponent: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.title = \"System Parameters\";\r\n\t\t\r\n\t\t$s.apply(this, {\r\n\t\t\tdefaults:{bodyStyle:\"padding:10px\"},\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"form\",\r\n\t\t\t\t\tname: \"mform\",\r\n\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\tanchor: \"100%\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\tfieldLabel: IRm$.r1(\"B_NAME\"),\r\n\t\t\t\t\t\t\tname: \"name\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\tfieldLabel: IRm$.r1(\"B_TYPE\"),\r\n\t\t\t\t\t\t\tname: \"type\",\r\n\t\t\t\t\t\t\tdisplayField: \"name\",\r\n\t\t\t\t\t\t\tvalueField: \"value\",\r\n\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\tfields: [\"name\", \"value\"],\r\n\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t{name: \"System\", value: \"SYSTEM\"},\r\n\t\t\t\t\t\t\t\t\t{name: \"Dynamic value\", value: \"DVAR\"},\r\n\t\t\t\t\t\t\t\t\t{name: \"Static value\", value: \"SVAR\"},\r\n\t\t\t\t\t\t\t\t\t{name: \"SQL Execution\", value: \"PKG\"}\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\tfieldLabel: \"Execution Type\",\r\n\t\t\t\t\t\t\tdisplayField: \"name\",\r\n\t\t\t\t\t\t\tvalueField: \"value\",\r\n\t\t\t\t\t\t\tname: \"sql_exec_type\",\r\n\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\tfields: [\"name\", \"value\"],\r\n\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t{name: \"Not available\", value: \"\"},\r\n\t\t\t\t\t\t\t\t\t{name: \"SQL\", value: \"SQL\"},\r\n\t\t\t\t\t\t\t\t\t{name: \"JavaProgram\", value: \"JAVA\"}\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\tfieldLabel: \"Database\",\r\n\t\t\t\t\t\t\tname: \"dsource\",\r\n\t\t\t\t\t\t\tdisplayField: \"name\",\r\n\t\t\t\t\t\t\tvalueField: \"uid\",\r\n\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\tfields: [\"name\", \"uid\"]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\t\tname: \"value\",\r\n\t\t\t\t\t\t\tfieldLabel: \"Value\",\r\n\t\t\t\t\t\t\theight: 300\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tbuttons:[\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1('B_CONFIRM'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.commit_f();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}, \r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1('B_CANCEL'),\r\n\t\t\t\t\thandler:function() {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\t\r\n\t\tIG$.$Dhadoop_cfg.superclass.initComponent.call(this);\r\n\t},\r\n\t\r\n\tlisteners: {\r\n\t\tafterrender: function(tobj) {\r\n\t\t\tvar me = this;\r\n\t\t\tme.init_f();\r\n\t\t}\r\n\t}\r\n});\r\n\r\nIG$.$Dhadoop_cfg_edititem = $s.extend($s.window, {\r\n\t\r\n\tmodal: true,\r\n\tlayout: \"fit\",\r\n\tclosable: false,\r\n\tresizable:false,\r\n\twidth: 300,\r\n\tautoHeight: true,\r\n\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t},\r\n\t\r\n\tinitComponent: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.title = IRm$.r1('L_MAKEITEM');\r\n\t\t\r\n\t\t$s.apply(this, {\r\n\t\t\tdefaults:{bodyStyle:\"padding:10px\"},\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"form\",\r\n\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\tanchor: \"100%\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\tfieldLabel: IRm$.r1(\"B_NAME\"),\r\n\t\t\t\t\t\t\tname: \"i_name\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\tfieldLabel: \"Host address\",\r\n\t\t\t\t\t\t\tname: \"l_address\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tbuttons:[\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1('B_CONFIRM'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.commit_f();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}, \r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1('B_CANCEL'),\r\n\t\t\t\t\thandler:function() {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\t\r\n\t\tIG$.$Dhadoop_cfg_edititem.superclass.initComponent.call(this);\r\n\t},\r\n\t\r\n\tlisteners: {\r\n\t\tafterrender: function(tobj) {\r\n\t\t\tvar me = this;\r\n\t\t\tme.init_f();\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\t\t","IG$.bA_3/*db_generator*/ = $s.extend($s.window, {\r\n\tmodal: true,\r\n\tisWindow: true,\r\n\tregion:\"center\",\r\n\tlayout: {\r\n\t\ttype: \"fit\",\r\n\t\talign: \"stretch\"\r\n\t},\r\n\t\r\n\tclosable: false,\r\n\tresizable:false,\r\n\twidth: 400,\r\n\tautoHeight: true,\r\n\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this;\r\n\t\tme.down(\"[name=filetype]\").setValue(\"csv\");\r\n\t},\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this,\r\n\t\t\tnum_cases = me.down(\"[name=num_cases]\"),\r\n\t\t\tfiletype = me.down(\"[name=filetype]\");\r\n\t\t\t\r\n\t\tme.callback && me.callback.execute({\r\n\t\t\tnum_cases: num_cases.getValue(),\r\n\t\t\tfiletype: filetype.getValue()\r\n\t\t});\r\n\t\t\r\n\t\tme.close();\r\n\t},\r\n\t\t\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this;\r\n\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_DB_GEN\");\r\n\t\t// this.datagrid = Ext.create(\"Ext.grid.Panel\", );\r\n\t\t\r\n\t\t// this.mainpanel = Ext.create(\"Ext.form.Panel\", );\r\n\t\t\t\t \r\n\t\t$s.apply(this, {\r\n\t\t\tdefaults:{bodyStyle:\"padding:0px\"},\r\n\t\t\t\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\tborder: 0,\r\n\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\tbodyPadding: 10\r\n\t\t\t\t\t},\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\tfieldLabel: \"File Type\",\r\n\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\tname: \"filetype\",\r\n\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t{name: \"CSV File\", value: \"csv\"},\r\n\t\t\t\t\t\t\t\t\t\t\t{name: \"Elvira DB File\", value: \"dbc\"},\r\n\t\t\t\t\t\t\t\t\t\t\t{name: \"Excel File\", value: \"xls\"},\r\n\t\t\t\t\t\t\t\t\t\t\t{name: \"Weka DB File\", value: \"arff\"}\r\n\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"numberfield\",\r\n\t\t\t\t\t\t\t\t\tname: \"num_cases\",\r\n\t\t\t\t\t\t\t\t\tfieldLabel: \"Number of cases\",\r\n\t\t\t\t\t\t\t\t\tminValue: 100,\r\n\t\t\t\t\t\t\t\t\tmaxValue: 100000,\r\n\t\t\t\t\t\t\t\t\tvalue: 5000,\r\n\t\t\t\t\t\t\t\t\tstep: 10\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tbuttons:[\r\n\t\t\t\t\"->\",\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CONFIRM\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis._confirm();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CANCEL\"),\r\n\t\t\t\t\thandler:function() {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tlisteners: {\r\n\t\t\t\tafterrender: function(ui) {\r\n\t\t\t\t\tvar panel = this;\r\n\t\t\t\t\tpanel.init_f();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tIG$.bA_3/*db_generator*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$.bA_4/*cost_effectiveness*/ = $s.extend($s.window, {\r\n\tmodal: true,\r\n\tisWindow: true,\r\n\tregion:\"center\",\r\n\tlayout: \"fit\",\r\n\t\r\n\tclosable: false,\r\n\tresizable:false,\r\n\twidth: 600,\r\n\theight: 550,\r\n\t\r\n\tcallback: null,\r\n\tatype: 0, // 0: sensitivity analysis, 1: determistic analysis\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\tparams = ig$.b$Am,\r\n\t\t\tdeterministic_axis_variation_type = params.deterministic_axis_variation_type,\r\n\t\t\tp3 = me.down(\"[name=p3]\");\r\n\t\t\r\n\t\tp3.store.loadData(params.analysis_types);\r\n\t\tme.down(\"[name=p4]\").store.loadData(deterministic_axis_variation_type);\r\n\t\tme.down(\"[name=p5]\").store.loadData(deterministic_axis_variation_type);\r\n\t\tme.down(\"[name=p6]\").store.loadData(params.scope_types);\r\n\t\t\r\n\t\tp3.setValue(\"TORNADO_SPIDER\");\r\n\t},\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this,\r\n\t\t\titemobj = me.itemobj,\r\n\t\t\tatype = me.atype,\r\n\t\t\tmreq = new IG$._rpc$(),\r\n\t\t\thorizontalAxisParam = me.down(\"[name=p4]\"),\r\n\t\t\tmbody = {};\r\n\t\t\r\n\t\tmbody.analysis_type = me.down(\"[name=p3]\").getValue();\r\n\t\t\r\n\t\tif (atype == 1)\r\n\t\t{\r\n\t\t\tmbody.scope_type = me.down(\"[name=pb]\").getValue();\r\n\t\t\tmbody.decision = me.down(\"[name=pc]\").getValue();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tmbody.scope_type = me.down(\"[name=p6]\").getValue();\r\n\t\t\tmbody.decision = me.down(\"[name=p7]\").getValue();\r\n\t\t}\r\n\t\t\r\n\t\tmbody.axis = {\r\n\t\t\thorizontal_axis_parameter: {\r\n\t\t\t\taxitype: horizontalAxisParam.getValue()\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tmreq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"ml\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tuid: me.uid, \r\n\t\t\t\t\tinstanceid: itemobj.instanceid, \r\n\t\t\t\t\taction: \"cost_effectiveness\", \r\n\t\t\t\t\tmethod: (atype == 0 ? \"sensitivity\" : \"determistic\")},\r\n\t\t\t\tmbody: mbody\r\n\t\t\t}, me, function(jdoc) {\r\n\t\t\t\tvar dlg = new IG$.bA_5/*tornado_spider*/({\r\n\t\t\t\t\tresult: jdoc\r\n\t\t\t\t});\r\n\t\t\t\tdlg.show();\r\n\t\t\t}\r\n\t\t); \r\n\t\tmreq.send();\r\n\t},\r\n\t\r\n\ts1/*setAnalysisType*/: function(t) {\r\n\t\tvar me = this,\r\n\t\t\tp1 = me.down(\"[name=p1]\"),\r\n\t\t\tp6 = me.down(\"[name=p6]\"),\r\n\t\t\thorizontalAxisParam = me.down(\"[name=p4]\"),\r\n\t\t\thaxis = \"POPP\";\r\n\t\t\tdecision = me.down(\"[name=p7]\"),\r\n\t\t\tp1v = false,\r\n\t\t\tdecisionV = false;\r\n\t\t\r\n\t\tswitch (t)\r\n\t\t{\r\n\t\tcase \"TORNADO_SPIDER\":\r\n\t\t\tp6.setValue(\"GLOBAL\");\r\n\t\t\tbreak;\r\n\t\tcase \"MAP\":\r\n\t\t\tp1v = true;\r\n\t\t\tdecisionV = true;\r\n\t\t\tbreak;\r\n\t\tcase \"PLOT\":\r\n\t\t\tdecisionV = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tp1.setVisible(p1v);\r\n\t\tdecision.setVisible(decisionV);\r\n\t\thorizontalAxisParam.setValue(haxis);\r\n\t},\r\n\t\t\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this;\r\n\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_COST_EFF\");\r\n\t\t\r\n\t\t// this.datagrid = Ext.create(\"Ext.grid.Panel\", );\r\n\t\t\r\n\t\t// this.mainpanel = Ext.create(\"Ext.form.Panel\", );\r\n\t\t\t\t \r\n\t\t$s.apply(this, {\r\n\t\t\tdefaults:{bodyStyle:\"padding:0px\"},\r\n\t\t\t\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\tborder: 0,\r\n\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\tbodyPadding: 5\r\n\t\t\t\t\t},\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\tautoScroll: true,\r\n\t\t\t\t\t\t\thidden: panel.atype != 0,\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"vbox\",\r\n\t\t\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Analysis type\",\r\n\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"p3\",\r\n\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\t\t\t\t\tchange: function(tobj) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar tval = tobj.getValue();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.s1/*setAnalysisType*/(tval);\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"numberfield\",\r\n\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Points per parameter\",\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"p2\"\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"vbox\",\r\n\t\t\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Parameters\",\r\n\t\t\t\t\t\t\t\t\t\t\theight: 200,\r\n\t\t\t\t\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"gridpanel\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"p0\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_NAME\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"gridpanel\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"p1\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_NAME\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Options\",\r\n\t\t\t\t\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\t\t\t\tbodyPadding: 5,\r\n\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Horizontal axis parameter\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"p4\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"numberfield\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 110,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"p4a\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabelWidth: 20,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"%\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Vertical axis parameter\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"p5\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"numberfield\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 110,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"p5a\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabelWidth: 20,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"%\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Scope\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"p6\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Decision\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"p7\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Percentage of the 2nd order probability\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Percentage over reference value\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Ratio over reference value\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"User defined interval\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"p8\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"When a probability parameter is above 1\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelWidth: 220,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Ignore case\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Throw error message\", value: \"dbc\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Scenario\",\r\n\t\t\t\t\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Do test?\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"p9\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Yes\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"No\", value: \"dbc\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"pa\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Result of test\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"not done\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"done\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\thidden: panel.atype != 1,\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\tname: \"pb\",\r\n\t\t\t\t\t\t\t\t\tfieldLabel: \"Scope\",\r\n\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t{name: \"Global\"},\r\n\t\t\t\t\t\t\t\t\t\t\t{name: \"One decision\"}\r\n\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\tname: \"pc\",\r\n\t\t\t\t\t\t\t\t\tfieldLabel: \"Decision\",\r\n\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t{name: \"Therapy\"},\r\n\t\t\t\t\t\t\t\t\t\t\t{name: \"Percentage over reference value\"},\r\n\t\t\t\t\t\t\t\t\t\t\t{name: \"Ratio over reference value\"},\r\n\t\t\t\t\t\t\t\t\t\t\t{name: \"User defined interval\"}\r\n\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\t\t\ttitle: \"Scenario\",\r\n\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"pd\",\r\n\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Do test?\",\r\n\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"yes\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"no\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"pe\",\r\n\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Result of test\",\r\n\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"not done\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"no\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tbuttons:[\r\n\t\t\t\t\"->\",\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CONFIRM\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis._confirm();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CANCEL\"),\r\n\t\t\t\t\thandler:function() {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tlisteners: {\r\n\t\t\t\tafterrender: function(ui) {\r\n\t\t\t\t\tvar panel = this;\r\n\t\t\t\t\tpanel.init_f();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tIG$.bA_4/*cost_effectiveness*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$.d$MLearn = $s.extend($s.window, {\r\n\tmodal: true,\r\n\tisWindow: true,\r\n\tregion:\"center\",\r\n\tlayout: {\r\n\t\ttype: \"fit\",\r\n\t\talign: \"stretch\"\r\n\t},\r\n\t\r\n\tclosable: false,\r\n\tresizable:false,\r\n\twidth: 500,\r\n\theight: 450,\r\n\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\tjobid = me.jobid,\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\t\r\n\t\tme.lP/*loadParams*/();\r\n\t\t\t\t\t\r\n\t\tif (jobid)\r\n\t\t{\r\n\t\t\treq.init(me, \r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"print\",\r\n\t\t\t\t\tpayload: {uid: me.uid, jobid: jobid, type: \"csv\", option: 'instanceload', appuse: 'T'},\r\n\t\t\t\t\tmbody: {}\r\n\t\t\t\t}, me, function(jdoc) {\r\n\t\t\t\t\tvar mnode = jdoc,\r\n\t\t\t\t\t\thnode = mnode ? jdoc.headers : null,\r\n\t\t\t\t\t\thnodes,\r\n\t\t\t\t\t\tsheader = me.down(\"[name=sheader]\"),\r\n\t\t\t\t\t\tsmodel = sheader.getSelectionModel(),\r\n\t\t\t\t\t\ti, dp = [], p;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (mnode)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tme.__pfile = mnode.downloadurl;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (hnode)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor (i=0; i < hnode.length; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tp = {\r\n\t\t\t\t\t\t\t\tname: hnode[i],\r\n\t\t\t\t\t\t\t\tselected: true\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tdp.push(p);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tsheader.store.loadData(dp);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\treq.send();\r\n\t\t}\r\n\t},\r\n\t\r\n\tlP/*loadParams*/: function() {\r\n\t\tvar me = this,\r\n\t\t\treq;\r\n\t\t\r\n\t\tif (!ig$.b$Am)\r\n\t\t{\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\treq.init(me, \r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"ml\",\r\n\t\t\t\t\tpayload: {action: \"get_var\"},\r\n\t\t\t\t\tmbody: {}\r\n\t\t\t\t}, me, function(jdoc) {\r\n\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\tdata = {},\r\n\t\t\t\t\t\ttnode,\r\n\t\t\t\t\t\ttnodes,\r\n\t\t\t\t\t\tsnodes,\r\n\t\t\t\t\t\ttname,\r\n\t\t\t\t\t\ttdata,\r\n\t\t\t\t\t\ttitem,\r\n\t\t\t\t\t\ti, j;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\ttnode = jdoc;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (tnode)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor (i=0; i < tnode.length; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttname = tnode[i].name;\r\n\t\t\t\t\t\t\ttdata = data[tname] = [];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsnodes = tnode[i].values;\r\n\t\t\t\t\t\t\tfor (j=0; j < snodes.length; j++)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitem = {\r\n\t\t\t\t\t\t\t\t\tvalue: snodes[j].value\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\ttitem.name = titem.name || titem.value;\r\n\t\t\t\t\t\t\t\ttdata.push(titem);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tig$.b$Am = data;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tme._a1/*loadInit*/();\r\n\t\t\t\t}, false);\r\n\t\t\treq.send();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tme._a1/*loadInit*/();\r\n\t\t}\r\n\t},\r\n\t\r\n\t_a1/*loadInit*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tparams = ig$.b$Am,\r\n\t\t\talgorithm = me.down(\"[name=algorithm]\"),\r\n\t\t\ttmissing = me.down(\"[name=tmissing]\");\r\n\t\t\t\r\n\t\talgorithm.store.loadData(params.learn_algorithms);\r\n\t\talgorithm.setValue(params.learn_algorithms[0].value);\r\n\t\t\r\n\t\ttmissing.store.loadData(params.missing_names);\r\n\t\ttmissing.setValue(params.missing_names[0].value);\r\n\t},\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this,\r\n\t\t\tsheader = me.down(\"[name=sheader]\"),\r\n\t\t\tsheader_store = sheader.store,\r\n\t\t\trec,\r\n\t\t\ti,\r\n\t\t\tmodelnet_gr = me.down(\"[name=modelnet_gr]\"),\r\n\t\t\tmodelnet = modelnet_gr.getValue().modelnet,\r\n\t\t\tmuid = null,\r\n\t\t\tbtype = \"BayesNet\",\r\n\t\t\tmp = IG$.mainPanel,\r\n\t\t\t__learn_opt;\r\n\t\t\r\n\t\tif (!me.__pfile)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (modelnet != \"new_model\")\r\n\t\t{\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t__learn_opt = me.__learn_opt = {\r\n\t\t\tpfile: me.__pfile,\r\n\t\t\talgorithm: me.down(\"[name=algorithm]\").getValue(),\r\n\t\t\talg_ind_test: me.down(\"[name=m_pc1]\").getValue(),\r\n\t\t\talg_metric: me.down(\"[name=m_pc2]\").getValue(),\r\n\t\t\talg_sig_level: me.down(\"[name=m_pc3]\").getValue(),\r\n\t\t\talg_alpha: me.down(\"[name=m_pc4]\").getValue(),\r\n\t\t\tlearn_mode: me.down(\"[name=learn_mode_gr]\").getValue().learn_mode,\r\n\t\t\tmodel_net: modelnet,\r\n\t\t\tuse_model_net: me.down(\"[name=use_model_net]\").getValue(),\r\n\t\t\tuse_start_learn: me.down(\"[name=use_start_learn]\").getValue(),\r\n\t\t\tallow_link_addition: me.down(\"[name=_a1]\").getValue(),\r\n\t\t\tallow_link_removal: me.down(\"[name=_a2]\").getValue(),\r\n\t\t\tallow_link_inversion: me.down(\"[name=_a3]\").getValue(),\r\n\t\t\tdescretize: me.down(\"[name=_a4]\").getValue(),\r\n\t\t\ttreat_missing_val: me.down(\"[name=tmissing]\").getValue(),\r\n\t\t\tuse_same_num_interval: me.down(\"[name=_a5]\").getValue(),\r\n\t\t\tsame_num_interval: me.down(\"[name=_a6]\").getValue(),\r\n\t\t\tvariable_use: me.down(\"[name=var_use_gr]\").getValue().var_use,\r\n\t\t\tselected_header: []\r\n\t\t};\r\n\t\t\r\n\t\tfor (i=0; i < sheader_store.data.items.length; i++)\r\n\t\t{\r\n\t\t\trec = sheader_store.data.items[i];\r\n\t\t\t__learn_opt.selected_header.push({\r\n\t\t\t\tselected: rec.get(\"selected\") ? \"T\" : \"F\",\r\n\t\t\t\tname: rec.get(\"name\"),\r\n\t\t\t\tmissing_value: rec.get(\"missing_values\"),\r\n\t\t\t\tdiscretization: rec.get(\"discretization\"),\r\n\t\t\t\tnum_of_interval: rec.get(\"num_of_interval\")\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tmp && mp.navigateApp.call(mp, muid, btype.toLowerCase(), btype, null, null, true, null, {\r\n\t\t\t__learn_opt: __learn_opt\r\n\t\t});\r\n\t\t\r\n\t\tme.callback && me.callback.execute(__learn_opt);\r\n\t\tme.close();\r\n\t},\r\n\t\t\t\t\r\n\tinitComponent : function() {\r\n\t\tvar me = this,\r\n\t\t\tfmode = me.jobid ? true : false;\r\n\t\t\r\n\t\tme.title = IRm$.r1(\"T_ML_LEARN\");\r\n\t\t// this.datagrid = Ext.create(\"Ext.grid.Panel\", );\r\n\t\t\r\n\t\t// this.mainpanel = Ext.create(\"Ext.form.Panel\", );\r\n\t\t\t\t \r\n\t\t$s.apply(this, {\r\n\t\t\tdefaults:{bodyStyle:\"padding:0px\"},\r\n\t\t\t\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\tborder: 0,\r\n\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\tbodyPadding: 5\r\n\t\t\t\t\t},\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"tabpanel\",\r\n\t\t\t\t\t\t\tdeferredRender: false,\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\t\t\ttitle: \"General\",\r\n\t\t\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"vbox\",\r\n\t\t\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tautoScroll: true,\r\n\t\t\t\t\t\t\t\t\tpadding: 5,\r\n\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Database\",\r\n\t\t\t\t\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Database\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"form\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"mform\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborder: 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlayout: \"hbox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'fileuploadfield',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: 'photo',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thidden: fmode,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tallowBlank: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmsgTarget: 'side',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 320,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuttonText: 'Select File...'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thidden: !fmode,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"db_file\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: me.fname || \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  xtype: 'button',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  text: 'Upload',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  hidden: fmode,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  handler: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  var me = this,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  mform = me.down(\"[name=mform]\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  if (mform.getForm().isValid()) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmform.getForm().submit({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: ig$.servlet,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twaitMsg: 'Uploading your data file',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function(fp, o) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tIG$.alertmsg('Success', 'Processed file on the server', null, null, 0, \"success\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar node = fp.errorReader.jsonData,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuid = node.result.uid;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.__pfile = uid;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Algorithm\",\r\n\t\t\t\t\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Algorithm\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"algorithm\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange: function(tobj, nvalue, ovalue, eopt) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tm_p1 = me.down(\"[name=m_p1]\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tm_pc1 = me.down(\"[name=m_pc1]\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tm_pc2 = me.down(\"[name=m_pc2]\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tm_pc3 = me.down(\"[name=m_pc1]\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tc = nvalue == \"PC\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tm_p1.setTitle(nvalue + \" algorithm: Options\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tm_p1.show();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tm_pc1.setVisible(c);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tm_pc2.setVisible(!c);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tm_pc3.setVisible(c);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tanchor: \"100%\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: 60\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"m_p1\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Algorithm: Options\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Independence test\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"m_pc1\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Cross entropy\", value: \"\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Metric\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"m_pc2\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"K2\", value: \"\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Bayesian\", value: \"\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"BD\", value: \"\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"MDLM\", value: \"\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Entropy\", value: \"\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"ALC\", value: \"\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"numberfield\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"m_pc3\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Significance level\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"numberfield\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"m_pc4\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Alpha parameter\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"container\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"displayfield\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: \"(Laplace-like correction)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"container\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Learning type\",\r\n\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"radiogroup\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"learn_mode_gr\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvertical: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tboxLabel: \"Interactive learning\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"learn_mode\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinputValue: \"interactive\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tboxLabel: \"Automatic Learning\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"learn_mode\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinputValue: \"automatic\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked: true\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\t\t\ttitle: \"Model network\",\r\n\t\t\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\t\t\tpadding: 5,\r\n\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Choose Model Net\",\r\n\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"radiogroup\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"modelnet_gr\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvertical: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tboxLabel: \"Make new model network\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"modelnet\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinputValue: \"new_model\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tboxLabel: \"Select model network\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"modelnet\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinputValue: \"modelnet\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Model network use\",\r\n\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"checkbox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"use_model_net\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tboxLabel: \"Use the information of the nodes\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"checkbox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"use_start_learn\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tboxLabel: \"Start learning from model network\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: \"0 0 0 20\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"checkbox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"_a1\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tboxLabel: \"Allow link addition\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"checkbox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"_a2\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tboxLabel: \"Allow link removal\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"checkbox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"_a3\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tboxLabel: \"Allow link inversion\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\t\t\ttitle: \"Preprocessing\",\r\n\t\t\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"vbox\",\r\n\t\t\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tpadding: 5,\r\n\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Discretize\",\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"_a4\",\r\n\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Specify for each variable\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Do not discretize\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Equal frequency intervals\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Equal with intervals\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Treat missing values\",\r\n\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"tmissing\",\r\n\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"checkbox\",\r\n\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Same number of intervals\",\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"_a5\"\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"numberfield\",\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"_a6\",\r\n\t\t\t\t\t\t\t\t\t\t\tlabelWidth: 120,\r\n\t\t\t\t\t\t\t\t\t\t\tlabelAlign: \"right\",\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 160,\r\n\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Number of intervals\"\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"radiogroup\",\r\n\t\t\t\t\t\t\t\t\t\t\tvertical: true,\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"var_use_gr\",\r\n\t\t\t\t\t\t\t\t\t\t\tcolumns: 1,\r\n\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tboxLabel: \"Use all variables\", name: \"var_use\", inputValue: \"all\", checked: true\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tboxLabel: \"Use only the variables in the model network\", name: \"var_use\", inputValue: \"model\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tboxLabel: \"Use selected variables\", name: \"var_use\", inputValue: \"selection\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"gridpanel\",\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"sheader\",\r\n\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tfields: [\"name\", \"selected\", \"missing_values\", \"discretization\", \"num_of_interval\"]\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\t\t\t\tplugins: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tptype: \"cellediting\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclicksToEdit: 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"checkcolumn\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"selected\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 30\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: \"Preprocessing\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"name\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: \"Missing values\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"missing_values\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditor: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Specify for each variable\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Keep records with missing values\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Erase records with missing values\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: \"Discretization\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"discretization\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditor: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Specify for each variable\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Keep records with missing values\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Erase records with missing values\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: \"Number of intervals\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"num_of_interval\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 40,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditor: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"numberfield\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tbuttons:[\r\n\t\t\t\t\"->\",\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CONFIRM\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis._confirm();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CANCEL\"),\r\n\t\t\t\t\thandler:function() {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tlisteners: {\r\n\t\t\t\tafterrender: function(ui) {\r\n\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\tmform = me.down(\"[name=mform]\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tmform.getForm().errorReader = new IG$.m2ER();\r\n\t\t\t\t\t\r\n\t\t\t\t\tme.init_f();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tIG$.d$MLearn.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$.bA_6/*interactive_learning*/ = $s.extend($s.window, {\r\n\tmodal: true,\r\n\tisWindow: true,\r\n\tregion:\"center\",\r\n\tlayout: {\r\n\t\ttype: \"fit\",\r\n\t\talign: \"stretch\"\r\n\t},\r\n\t\r\n\tclosable: false,\r\n\tresizable:false,\r\n\twidth: 400,\r\n\tautoHeight: true,\r\n\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\titemobj = me.itemobj,\r\n\t\t\tg_editor = me.down(\"[name=g_editor]\");\r\n\t\t\r\n\t\tg_editor.store.loadData(itemobj.interactive_learning.showable_edit_proposals || []);\r\n\t},\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this;\r\n\t\t\t\r\n\t\tme.callback && me.callback.execute({\r\n\t\t});\r\n\t\t\r\n\t\tme.close();\r\n\t},\r\n\t\t\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this;\r\n\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_INT_LEARN\");\r\n\t\t\t\t \r\n\t\t$s.apply(this, {\r\n\t\t\t\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\tborder: 0,\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\tbodyPadding: 10,\r\n\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\ttype: \"vbox\",\r\n\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"gridpanel\",\r\n\t\t\t\t\t\t\t\t\tname: \"g_editor\",\r\n\t\t\t\t\t\t\t\t\theight: 300,\r\n\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\tfields: [\"description\", \"motivation\"]\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Edit description\",\r\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"description\",\r\n\t\t\t\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Motivation\",\r\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"motivation\",\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 100\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tbuttons:[\r\n\t\t\t\t\"->\",\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CONFIRM\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis._confirm();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CANCEL\"),\r\n\t\t\t\t\thandler:function() {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tlisteners: {\r\n\t\t\t\tafterrender: function(ui) {\r\n\t\t\t\t\tvar panel = this;\r\n\t\t\t\t\tpanel.init_f();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tIG$.bA_6/*interactive_learning*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$.dlgML_NetProp = $s.extend($s.window, {\r\n\tmodal: true,\r\n\tisWindow: true,\r\n\tregion:\"center\",\r\n\tlayout: {\r\n\t\ttype: \"fit\",\r\n\t\talign: \"stretch\"\r\n\t},\r\n\t\r\n\tclosable: false,\r\n\tresizable:false,\r\n\twidth: 500,\r\n\theight: 450,\r\n\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\ttdata = ig$.b$Am,\r\n\t\t\tnetwork_types = tdata.network_types,\r\n\t\t\tvariable_types = tdata.variable_types,\r\n\t\t\tnet_type = me.down(\"[name=net_type]\"),\r\n\t\t\tvar_type = me.down(\"[name=var_type]\");\r\n\t\t\t\r\n\t\tif (network_types)\r\n\t\t{\r\n\t\t\tnet_type.store.loadData(network_types);\r\n\t\t}\r\n\t\t\r\n\t\tif (variable_types)\r\n\t\t{\r\n\t\t\tvar_type.store.loadData(variable_types);\r\n\t\t}\r\n\t\t\r\n\t\tif (me.itemobj)\r\n\t\t{\r\n\t\t\tnet_type.setValue(me.itemobj.mtype || \"\");\r\n\t\t\tvar_type.setValue(me.itemobj.variable_types || \"\");\r\n\t\t}\r\n\t},\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this,\r\n\t\t\tnet_type = me.down(\"[name=net_type]\"),\r\n\t\t\titemobj = me.itemobj;\r\n\t\t\r\n\t\tnet_type.clearInvalid();\r\n\t\t\r\n\t\tif (!net_type.getValue())\r\n\t\t{\r\n\t\t\tnet_type.markInvalid(\"Empty\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tme.itemobj.mtype = net_type.getValue();\r\n\t\tme.itemobj.mtypename = net_type.getValue();\r\n\t\t\r\n\t\tme.callback && me.callback.execute();\r\n\t\t\r\n\t\tme.close();\r\n\t},\r\n\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this;\r\n\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_NET_PROP\");\r\n\t\t// this.datagrid = Ext.create(\"Ext.grid.Panel\", );\r\n\t\t\r\n\t\t// this.mainpanel = Ext.create(\"Ext.form.Panel\", );\r\n\t\t\t\t \r\n\t\t$s.apply(this, {\r\n\t\t\tdefaults:{bodyStyle:\"padding:0px\"},\r\n\t\t\t\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\tborder: 0,\r\n\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\tbodyPadding: 5\r\n\t\t\t\t\t},\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"tabpanel\",\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\t\t\ttitle: \"Definition\",\r\n\t\t\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Network Type\",\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"net_type\",\r\n\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"checkbox\",\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled: true,\r\n\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Is Object Oriented\"\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\t\t\ttitle: \"Variables\",\r\n\t\t\t\t\t\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Variable Type\",\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"var_type\",\r\n\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"Default States\",\r\n\t\t\t\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Absent - Present\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"No - Yes\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Negative - Positive\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Absent - Mild - Moderate - Severe\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{name: \"Low - Medium - High\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tbuttons:[\r\n\t\t\t\t\"->\",\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CONFIRM\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis._confirm();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CANCEL\"),\r\n\t\t\t\t\thandler:function() {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tlisteners: {\r\n\t\t\t\tafterrender: function(ui) {\r\n\t\t\t\t\tvar panel = this;\r\n\t\t\t\t\tpanel.init_f();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tIG$.dlgML_NetProp.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$.BY_1/*ByayesChance*/ = $s.extend(IG$.BC$base/*hadoop_dlg_base*/, {\r\n\t\r\n\tregion:\"center\",\r\n\tlayout: \"fit\",\r\n\t\r\n\tautoHeight: true,\r\n\t\t\r\n\tcallback: null,\r\n\t\r\n\thide_ierr: 1,\r\n\ts_hist: 0,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job,\r\n\t\t\ttdata = ig$.b$Am,\r\n\t\t\tvariable_types = tdata.variable_types,\r\n\t\t\tpurpose_types = tdata.purpose_types,\r\n\t\t\tpotential_types = tdata.potential_types,\r\n\t\t\t_p/*editor*/ = me._p/*editor*/,\r\n\t\t\titemobj = _p/*editor*/.itemobj,\r\n\t\t\tinstanceid = itemobj.instanceid,\r\n\t\t\treq;\r\n\t\t\r\n\t\t// declare control to variable\r\n\t\t\r\n\t\tme.down(\"[name=variable_type]\").store.loadData(variable_types || []);\r\n\t\tme.down(\"[name=purpose]\").store.loadData(purpose_types || []);\r\n\t\tme.down(\"[name=potential_type]\").store.loadData(potential_types || []);\r\n\t\t\r\n\t\tIG$.BY_1/*ByayesChance*/.superclass.init_f.call(me, arguments);\r\n\t\t\r\n\t\tme._instanceid = instanceid;\r\n\t\t\t\r\n\t\tif (job && instanceid)\r\n\t\t{\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\t\r\n\t\t\treq.init(me, \r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"ml\",\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tinstanceid: instanceid, \r\n\t\t\t\t\t\taction: \"get_property\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmbody: {option: \"node\", name: job.text}\r\n\t\t\t\t}, me, function(jdoc) {\r\n\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\ttnode,\r\n\t\t\t\t\t\tp, c, dnode, dnodes, data, header,\r\n\t\t\t\t\t\tpotential_type,\r\n\t\t\t\t\t\tp_data,\r\n\t\t\t\t\t\ti, row, crow, cols, rows,\r\n\t\t\t\t\t\tj, store, columns, fields, h, column,\r\n\t\t\t\t\t\tg_p1 = me.down(\"[name=g_p1]\"),\r\n\t\t\t\t\t\tuncertain_columns, ucols;\r\n\t\t\t\t\t\r\n\t\t\t\t\tme._prob_value_edit = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (jdoc)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tme.down(\"[name=dsname]\").setValue(jdoc.name);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttnode = jdoc.node_definition;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (tnode)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tme.down(\"[name=relavance]\").setValue(tnode.relavance);\r\n\t\t\t\t\t\t\tme.down(\"[name=purpose]\").setValue(tnode.purpose);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tme.down(\"[name=dsdesc]\").setValue(tnode.comment);\r\n\t\t\t\t\t\t\tme.down(\"[name=decision]\").setValue(tnode.decision);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttnode = jdoc.domain_values_table;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (tnode)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// precision, unit, variable_type\r\n\t\t\t\t\t\t\tme.down(\"[name=variable_type]\").setValue(tnode.variable_type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttnode = jdoc.states;\r\n\t\t\t\t\t\tdata = [];\r\n\t\t\t\t\t\tif (tnode)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdata = me.g1/*getTableData*/(tnode, \"name\".split(\";\"))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tme.down(\"[name=domain_table]\").store.loadData(data);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttnode = jdoc.node_parents;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdata = me.g1/*getTableData*/(tnode, \"key;name\".split(\";\"));\r\n\t\t\t\t\t\tme.down(\"[name=node_parent]\").store.loadData(data);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttnode = jdoc.probability;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tme.$probability = tnode;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (tnode)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpotential_type = tnode.potential_type;\r\n\t\t\t\t\t\t\tme.down(\"[name=potential_type]\").setValue(potential_type);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar get_cell = function(c) {\r\n\t\t\t\t\t\t\t\tif (typeof c == 'object')\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\treturn c.name;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn c;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tswitch(potential_type)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcase \"TABLE\":\r\n\t\t\t\t\t\t\t\tfields = [];\r\n\t\t\t\t\t\t\t\tp_data = [];\r\n\t\t\t\t\t\t\t\tcolumns = [];\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tdnode = tnode.table_result;\r\n\t\t\t\t\t\t\t\tdnode.colmap = {};\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (dnode)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcols = dnode.colcnt;\r\n\t\t\t\t\t\t\t\t\trows = dnode.rowcnt;\r\n\t\t\t\t\t\t\t\t\th = Number(dnode.hc);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tuncertain_columns = dnode.uncertain_columns;\r\n\t\t\t\t\t\t\t\t\tuncertain_columns = uncertain_columns ? uncertain_columns.split(\",\") : [];\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tucols = {};\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (i=0; i < uncertain_columns.length; i++)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tucols[Number(uncertain_columns[i])] = 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tdnodes = dnode.rows;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (i=0; i < cols; i++)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tcolumn = {\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 150,\r\n\t\t\t\t\t\t\t\t\t\t\theader: \"c\" + i,\r\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"c\" + i,\r\n\t\t\t\t\t\t\t\t\t\t\tmenuDisabled: true,\r\n\t\t\t\t\t\t\t\t\t\t\teditor: \"text\"\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tcolumn._lastcolumn = column;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tcolumns.push(column);\r\n\t\t\t\t\t\t\t\t\t\tfields.push(\"c\" + i);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tdnode.colmap[\"c\" + i] = i;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (i=0; i < dnodes.length-1; i++)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\trow = dnodes[i];\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tcrow = {};\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tfor (j=0; j < row.length; j++)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tcrow[\"c\" + j] = get_cell(row[j]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tp_data.push(crow);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (columns.length)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tstore = {\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"store\",\r\n\t\t\t\t\t\t\t\t\t\t\tfields: fields\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\tg_p1.reconfigure(store, columns);\r\n\t\t\t\t\t\t\t\t\t\tg_p1.store.loadData(p_data);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, false);\r\n\t\t\treq.send();\r\n\t\t}\r\n\t},\r\n\t\r\n\tg1/*getTableData*/: function(dnode, dnames) {\r\n\t\tvar i, j,\r\n\t\t\tdata = [],\r\n\t\t\tdnodes, r, rd;\r\n\t\t\r\n\t\tif (dnode && dnode.rows)\r\n\t\t{\r\n\t\t\tfor (i=0; i < dnode.rows.length; i++)\r\n\t\t\t{\r\n\t\t\t\tr = dnode.rows[i]\r\n\t\t\t\trd = {};\r\n\t\t\t\tfor (j=0; j < r.length; j++)\r\n\t\t\t\t{\r\n\t\t\t\t\trd[dnames[j]] = r[j];\r\n\t\t\t\t}\r\n\t\t\t\tdata.push(rd);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn data;\r\n\t},\r\n\t\r\n\t_confirm: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job;\r\n\r\n\t\tif (!me.closedlg())\r\n\t\t\treturn;\r\n\t},\r\n\t\r\n\tclosedlg: function() {\r\n\t\tvar me = this,\r\n\t\t\tjob = me.job,\r\n\t\t\treq,\r\n\t\t\tmbody,\r\n\t\t\tvtype = me.down(\"[name=variable_type]\"),\r\n\t\t\tvariable_type = vtype.getValue(),\r\n\t\t\t_editor = me._p/*editor*/,\r\n\t\t\tr = 1;\r\n\t\t\r\n\t\t$.each([\"variable_type\", \"dsname\"], function(i, k) {\r\n\t\t\tvar ctrl = me.down(\"[name=\" + k + \"]\");\r\n\t\t\t\r\n\t\t\tctrl.clearInvalid();\r\n\t\t\t\r\n\t\t\tif (!ctrl.getValue())\r\n\t\t\t{\r\n\t\t\t\tctrl.markInvalid(\"Required!\");\r\n\t\t\t\tr = 0;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif (!r)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\t\r\n\t\tswitch (variable_type)\r\n\t\t{\r\n\t\tcase \"finitStates\":\r\n\t\t\tbreak;\r\n\t\tcase \"numeric\":\r\n\t\tcase \"descritized\":\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treq = new IG$._rpc$();\r\n\t\t\r\n\t\tmbody = me.job.$variable;\r\n\t\tmbody.name = job.text;\r\n\t\tmbody.description = me.down(\"[name=dsdesc]\").getValue();\r\n\t\tmbody.cname = me.down(\"[name=dsname]\").getValue();\r\n\t\t\r\n\t\tmbody.node_definition = {\r\n\t\t\trelavance: me.down(\"[name=relavance]\").getValue(),\r\n\t\t\tpurpose: me.down(\"[name=purpose]\").getValue(),\r\n\t\t\tcomment: job.dsdesc,\r\n\t\t\tdecision: me.down(\"[name=decision]\").getValue()\r\n\t\t};\r\n\t\t\r\n\t\tmbody.domain_values_table = {\r\n\t\t\tprecision: me.down(\"[name=precision]\").getValue(),\r\n\t\t\tunit: me.down(\"[name=unit]\").getValue(),\r\n\t\t\tvariable_type: variable_type\r\n\t\t};\r\n\t\t\r\n\t\tme._upd_node_prob(mbody);\r\n\t\t\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"ml\",\r\n\t\t\t\tpayload: {instanceid: me._instanceid, action: \"set_property\", target: \"node\"},\r\n\t\t\t\tmbody: mbody,\r\n\t\t\t\tmeta_type: \"bayes_node_property\"\r\n\t\t\t}, me, function(xdoc) {\r\n\t\t\t\tjob.dsname = mbody.cname;\r\n\t\t\t\tme.callback && me.callback.execute(me.job);\r\n\t\t\t\tme.fireEvent(\"close_dlg\", me);\r\n\t\t\t}\r\n\t\t);\r\n\t\t\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\t_upd_node_prob: function(mbody) {\r\n\t\tvar me = this,\r\n\t\t\tdomain_table = me.down(\"[name=domain_table]\"),\r\n\t\t\tstates,\r\n\t\t\tprob,\r\n\t\t\ti, rec, d,\r\n\t\t\t_prob_value_edit = me._prob_value_edit;\r\n\t\t\r\n\t\tstates = mbody.states = {\r\n\t\t\trows: []\r\n\t\t};\r\n\t\t\r\n\t\tfor (i=0; i < domain_table.store.data.items.length; i++)\r\n\t\t{\r\n\t\t\trec = domain_table.store.data.items[i];\r\n\t\t\t\r\n\t\t\tif (rec.get(\"name\"))\r\n\t\t\t{\r\n\t\t\t\td = [];\r\n\t\t\t\td.push(rec.get(\"name\"));\r\n\t\t\t\tstates.rows.push(d);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tprob = mbody.probability = {};\r\n\t\tprob.potential_type = me.down(\"[name=potential_type]\").getValue();\r\n\t},\r\n\t\r\n\t_v1/*variable_type_changed*/: function(tval) {\r\n\t\tvar me = this,\r\n\t\t\tdomain_table = me.down(\"[name=domain_table]\"),\r\n\t\t\tstate_num = me.down(\"[name=state_num]\");\r\n\t\t\r\n\t\tstate_num.hide();\r\n\t\t\r\n\t\tswitch (tval)\r\n\t\t{\r\n\t\tcase \"finiteStates\":\r\n\t\t\tbreak;\r\n\t\tcase \"discretized\":\r\n\t\t\tbreak;\r\n\t\tcase \"numeric\":\r\n\t\t\tstate_num.show();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\r\n\t_std_dom: function(tvalue) {\r\n\t\tvar me = this,\r\n\t\t\tvalues = tvalue.split(\"-\"),\r\n\t\t\tdomain_table = me.down(\"[name=domain_table]\"),\r\n\t\t\tdp = [],\r\n\t\t\ti;\r\n\t\t\r\n\t\tfor (i=0; i < values.length; i++)\r\n\t\t{\r\n\t\t\tdp.push({\r\n\t\t\t\tname: values[i]\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tdomain_table.store.loadData(dp);\r\n\t},\r\n\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this,\r\n\t\t\tlw = 120,\r\n\t\t\t__m/*mode*/ = panel.__m/*mode*/;\r\n\t\t\t\r\n\t\tpanel._job_name = IRm$.r1(\"T_BA_1\");\r\n\t\t\r\n\t\tpanel.moption = [\r\n\t\t\t{\r\n\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\ttitle: \"Definition\",\r\n\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\tdefaults: {\r\n\t\t\t\t\tanchor: \"100%\"\r\n\t\t\t\t},\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tlayout: \"hbox\",\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\t\t\tfieldLabel: \"Purpose\",\r\n\t\t\t\t\t\t\t\tname: \"purpose\",\r\n\t\t\t\t\t\t\t\tlabelWidth: 60,\r\n\t\t\t\t\t\t\t\twidth: 180,\r\n\t\t\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"numberfield\",\r\n\t\t\t\t\t\t\t\tlabelWidth: 50,\r\n\t\t\t\t\t\t\t\twidth: 160,\r\n\t\t\t\t\t\t\t\tname: \"relavance\",\r\n\t\t\t\t\t\t\t\tfieldLabel: \"Relevance\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\tfieldLabel: \"Decision criterion\",\r\n\t\t\t\t\t\tname: \"decision\",\r\n\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\ttitle: \"Domain\",\r\n\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"combobox\",\r\n\t\t\t\t\t\tfieldLabel: \"Variable type\",\r\n\t\t\t\t\t\tname: \"variable_type\",\r\n\t\t\t\t\t\tqueryMode: 'local',\r\n\t\t\t\t\t\tdisplayField: 'name',\r\n\t\t\t\t\t\tvalueField: 'value',\r\n\t\t\t\t\t\teditable: false,\r\n\t\t\t\t\t\tautoSelect: true,\r\n\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\txtype: 'store',\r\n\t\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t\t\"name\", \"value\"\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\tchange: function(tobj) {\r\n\t\t\t\t\t\t\t\tthis._v1/*variable_type_changed*/(tobj.getValue());\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\tfieldLabel: \"Precision\",\r\n\t\t\t\t\t\tlayout: \"hbox\",\r\n\t\t\t\t\t\tname: \"state_num\",\r\n\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"numberfield\",\r\n\t\t\t\t\t\t\t\tname: \"precision\",\r\n\t\t\t\t\t\t\t\twidth: 80\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\t\tfieldLabel: \"Unit\",\r\n\t\t\t\t\t\t\t\tname: \"unit\",\r\n\t\t\t\t\t\t\t\tlabelAlign: \"right\",\r\n\t\t\t\t\t\t\t\tlabelWidth: 80,\r\n\t\t\t\t\t\t\t\twidth: 120\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\txtype: \"container\",\r\n\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"gridpanel\",\r\n\t\t\t\t\t\thideHeaders: true,\r\n\t\t\t\t\t\tname: \"domain_table\",\r\n\t\t\t\t\t\theight: 150,\r\n\t\t\t\t\t\ttbar: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Stanard domains\",\r\n\t\t\t\t\t\t\t\tmenu: {\r\n\t\t\t\t\t\t\t\t\txtype: \"menu\",\r\n\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"absent-present\",\r\n\t\t\t\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tpanel._std_dom(this.text)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"no-yes\",\r\n\t\t\t\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"negative-positive\",\r\n\t\t\t\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"absent-mild-moderate-severe\",\r\n\t\t\t\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"low-medium-high\",\r\n\t\t\t\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_ADD\")\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Delete\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Up\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Down\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\tfields: [\"name\"]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_NAME\"),\r\n\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\tdataIndex: \"name\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Lower\",\r\n\t\t\t\t\t\t\t\twidth: 25,\r\n\t\t\t\t\t\t\t\tdataIndex: \"lower\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Value\",\r\n\t\t\t\t\t\t\t\twidth: 80,\r\n\t\t\t\t\t\t\t\tdataIndex: \"lower_value\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Value\",\r\n\t\t\t\t\t\t\t\twidth: 80,\r\n\t\t\t\t\t\t\t\tdataIndex: \"higher_value\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Higher\",\r\n\t\t\t\t\t\t\t\twidth: 25,\r\n\t\t\t\t\t\t\t\tdataIndex: \"higher\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\ttitle: \"Parents\",\r\n\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\txtype: \"gridpanel\",\r\n\t\t\t\t\t\thideHeaders: true,\r\n\t\t\t\t\t\tname: \"node_parent\",\r\n\t\t\t\t\t\theight: 200,\r\n\t\t\t\t\t\ttbar: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Add\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Delete\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tstore: {\r\n\t\t\t\t\t\t\tfields: [\"name\"]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_NAME\"),\r\n\t\t\t\t\t\t\t\tdataIndex: \"name\",\r\n\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\tlayout: \"anchor\",\r\n\t\t\t\ttitle: \"Other properties\",\r\n\t\t\t\ttbar: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: \"Add\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: \"Delete\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: \"Up\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: \"Down\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\t\tIG$.BY_1/*ByayesChance*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$.bA_5/*tornado_spider*/ = $s.extend($s.window, {\r\n\tmodal: true,\r\n\tisWindow: true,\r\n\tlayout: \"fit\",\r\n\t\r\n\tclosable: false,\r\n\tresizable:true,\r\n\twidth: 600,\r\n\theight: 550,\r\n\t\r\n\t_r: {},\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\tresult = me.result,\r\n\t\t\ttnode = result ? result.cost_effectiveness_results : null,\r\n\t\t\ttnodes;\r\n\t\t\r\n\t\tif (tnode)\r\n\t\t{\r\n\t\t\t$.each(tnode, function(i, node) {\r\n\t\t\t\tme.d1/*drawChart*/.call(me, node);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\t\r\n\td1/*drawChart*/: function(rnode) {\r\n\t\tvar me = this,\r\n\t\t\tcname = tnode.name,\r\n\t\t\tcnode;\r\n\t\t\r\n\t\tswitch(cname)\r\n\t\t{\r\n\t\tcase \"tornado_spider\":\r\n\t\t\tcnode = rnode.tornado;\r\n\t\t\tcnode && me.d2/*drawTornado*/(cnode);\r\n\r\n\t\t\tcnode = rnode.spider_chart;\r\n\t\t\t\r\n\t\t\tif (me._r[\"p_spider\"] == 0)\r\n\t\t\t{\r\n\t\t\t\tcnode && me.d3/*drawSpider*/(cnode, \"p_spider\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tme._r[\"p_spider\"] = cnode;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"plot\":\r\n\t\t\tcnode = rnode.plot_chart;\r\n\t\t\tif (cnode)\r\n\t\t\t{\r\n\t\t\t\tif (me._r[\"p_plot\"] == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tcnode && me.d3/*drawSpider*/(cnode, \"p_plot\");\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tme._r[\"p_plot\"] = cnode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\r\n\td2/*drawTornado*/: function(rnode) {\r\n\t\tvar me = this,\r\n\t\t\tp_tornado = me.down(\"[name=p_tornado]\"),\r\n\t\t\tp_tornado_doc = $(p_tornado.el.dom),\r\n\t\t\ttchart,\r\n\t\t\tcategories = [],\r\n\t\t\tmc, chart = {\r\n\t\t\t\tchart: {\r\n\t\t\t\t\ttype: \"bar\"\r\n\t\t\t\t},\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\ttext: \"Tornado\"\r\n\t\t\t\t},\r\n\t\t\t\txAxis: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treversed: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\topposite: true,\r\n\t\t\t\t\t\treversed: false,\r\n\t\t\t\t\t\tlinkedTo: 0,\r\n\t\t\t\t\t\tlabels: {\r\n\t\t\t\t\t\t\tstep: 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tyAxis: {\r\n\t\t\t\t\tlabels: {\r\n\t\t\t\t\t\tformatter: function() {\r\n\t\t\t\t\t\t\treturn Math.abs(this.value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tplotOptions: {\r\n\t\t\t\t\tseries: {\r\n\t\t\t\t\t\tstacking: \"normal\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tseries: []\r\n\t\t\t},\r\n\t\t\tbnode,\r\n\t\t\tbnodes,\r\n\t\t\ti, minvalues = [], maxvalues = [],\r\n\t\t\ts, e,\r\n\t\t\trval;\r\n\t\t\r\n\t\tp_tornado_doc.empty();\r\n\t\t\r\n\t\ttchart = $(\"<div></div>\").appendTo(p_tornado_doc);\r\n\t\ttchart.css({\r\n\t\t\twidth: p_tornado_doc.width(),\r\n\t\t\theight: p_tornado_doc.height()\r\n\t\t});\r\n\t\t\r\n\t\tcategories = rnode.category_key;\r\n\t\t\r\n\t\tcategories = categories ? categories.split(\"\\t\") : [];\r\n\t\t\r\n\t\tchart.xAxis[0].categories = categories;\r\n\t\tchart.xAxis[1].categories = categories;\r\n\t\t\r\n\t\tchart.chart.renderTo = tchart[0];\r\n\t\t\r\n\t\tbnode = rnode.reference_markers.reference;\r\n\t\trval = bnode.value;\r\n\t\trval = Number(rval);\r\n\t\t\r\n\t\tbnode = rnode.bars;\r\n\t\t\r\n\t\tfor (i=0; i < bnode.length; i++)\r\n\t\t{\r\n\t\t\ts = bnode[i].starts;\r\n\t\t\te = bnode[i].ends;\r\n\t\t\t\r\n\t\t\tminvalues.push(Number(s) - rval);\r\n\t\t\tmaxvalues.push(Number(e) - rval);\r\n\t\t}\r\n\t\t\r\n\t\tchart.series.push({\r\n\t\t\tname: \"Starts\",\r\n\t\t\tdata: minvalues\r\n\t\t});\r\n\t\t\r\n\t\tchart.series.push({\r\n\t\t\tname: \"Ends\",\r\n\t\t\tdata: maxvalues\r\n\t\t});\r\n\t\t\r\n\t\tmc = new Highcharts.Chart(chart);\r\n\t},\r\n\t\r\n\td3/*drawSpider*/: function(rnode, pname) {\r\n\t\tvar me = this,\r\n\t\t\tp_spider = me.down(\"[name=\" + pname + \"]\"),\r\n\t\t\tp_spider_doc = $(p_spider.el.dom),\r\n\t\t\ttchart,\r\n\t\t\tcategories = [],\r\n\t\t\tmc, chart = {\r\n\t\t\t\tchart: {\r\n\t\t\t\t\ttype: \"line\"\r\n\t\t\t\t},\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\ttext: \"Spider\"\r\n\t\t\t\t},\r\n\t\t\t\txAxis: {\r\n\t\t\t\t},\r\n\t\t\t\tyAxis: {\r\n\t\t\t\t\tlabels: {\r\n\t\t\t\t\t\tformatter: function() {\r\n\t\t\t\t\t\t\treturn Math.abs(this.value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tlegend: {\r\n\t\t\t\t\tlayout: \"vertical\",\r\n\t\t\t\t\talign: \"right\",\r\n\t\t\t\t\tverticalAlign: \"middle\",\r\n\t\t\t\t\tborderWidth: 0\r\n\t\t\t\t},\r\n\t\t\t\tseries: []\r\n\t\t\t},\r\n\t\t\tbnode,\r\n\t\t\tbnodes,\r\n\t\t\ti,\r\n\t\t\ts, x, y;\r\n\t\t\r\n\t\tp_spider_doc.empty();\r\n\t\t\r\n\t\ttchart = $(\"<div></div>\").appendTo(p_spider_doc);\r\n\t\ttchart.css({\r\n\t\t\twidth: p_spider_doc.width(),\r\n\t\t\theight: p_spider_doc.height()\r\n\t\t});\r\n\t\t\r\n\t\tbnode = rnode.series;\r\n\t\t\r\n\t\tif (bnode)\r\n\t\t{\r\n\t\t\tfor (i=0; i < bnode.length; i++)\r\n\t\t\t{\r\n\t\t\t\ts = {\r\n\t\t\t\t\tname: bnode[i].name,\r\n\t\t\t\t\tdata: []\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tif (i == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tx = bnode[i].xvalues;\r\n\t\t\t\t\tcategories = x.split(\"\\t\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ty = bnode[i].yvalues;\r\n\t\t\t\ts.data = y.split(\"\\t\");\r\n\t\t\t\t\r\n\t\t\t\tfor (j=0; j < s.data.length; j++)\r\n\t\t\t\t{\r\n\t\t\t\t\ts.data[j] = Number(s.data[j]);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tchart.series.push(s);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tchart.xAxis.categories = categories;\r\n\t\tchart.chart.renderTo = tchart[0];\r\n\t\t\r\n\t\tbnode = rnode.reference_markers.reference;\r\n\t\tif (bnode)\r\n\t\t{\r\n\t\t\trval = bnode.value;\r\n\t\t\trval = Number(rval);\r\n\t\t}\r\n\t\t\r\n\t\tmc = new Highcharts.Chart(chart);\r\n\t},\r\n\t\r\n\tinitComponent : function() {\r\n\t\tvar panel = this;\r\n\t\t\r\n\t\tpanel.title = IRm$.r1(\"T_TORSP_RS\");\r\n\t\t\r\n\t\t$s.apply(this, {\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\tbodyPadding: 10,\r\n\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"tabpanel\",\r\n\t\t\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\t\t\tdeferredRender: false\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\t\t\ttitle: \"Tornado\",\r\n\t\t\t\t\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\t\t\t\t\tname: \"p_tornado\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\t\t\ttitle: \"Spider\",\r\n\t\t\t\t\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\t\t\t\t\tname: \"p_spider\",\r\n\t\t\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\t\t\tafterrender: function(tobj) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (panel._r[\"p_spider\"])\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tpanel.d3/*drawSpider*/.call(panel, panel._r[\"p_spider\"], \"p_spider\");\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tpanel._r[\"p_spider\"] = 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\t\t\ttitle: \"Plot\",\r\n\t\t\t\t\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\t\t\t\t\tname: \"p_plot\",\r\n\t\t\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\t\t\tafterrender: function(tobj) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (panel._r[\"p_plot\"])\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tpanel.d3/*drawSpider*/.call(panel, panel._r[\"p_plot\"], \"p_plot\");\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tpanel._r[\"p_plot\"] = 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tbuttons:[\r\n\t\t\t\t\"->\",\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CONFIRM\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis._confirm();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: IRm$.r1(\"B_CANCEL\"),\r\n\t\t\t\t\thandler:function() {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tlisteners: {\r\n\t\t\t\tafterrender: function(ui) {\r\n\t\t\t\t\tvar panel = this;\r\n\t\t\t\t\tpanel.init_f();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tIG$.bA_5/*tornado_spider*/.superclass.initComponent.apply(this, arguments);\r\n\t}\r\n});","IG$._IB9b/*ml_bayes*/ = $s.extend($s.panel, {\r\n\tclosable: true,\r\n\t\r\n\tlayout: \"fit\",\r\n\tbodyPadding: 0,\r\n\tsgap: 1000,\r\n\t\r\n\titemtype: \"BayesNet\",\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\ttopmenu = me.topmenu,\r\n\t\t\tmainarea = me.mainarea,\r\n\t\t\tfmenu,\r\n\t\t\tfarea,\r\n\t\t\tbf,\r\n\t\t\tdt = [],\r\n\t\t\tbccall,\r\n\t\t\treq;\r\n\t\t\t\r\n\t\tdt = [\r\n\t\t\t{\r\n\t\t\t\tshape: \"circle\",\r\n\t\t\t\tname: \"chance\",\r\n\t\t\t\t_cs: [\"ba_base\", \"ba_circle\"],\r\n\t\t\t\ttext: IRm$.r1(\"L_ML_C1\")\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tshape: \"rect\",\r\n\t\t\t\tname: \"decision\",\r\n\t\t\t\t_cs: [\"ba_base\", \"ba_rect\"],\r\n\t\t\t\ttext: IRm$.r1(\"L_ML_C2\")\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tshape: \"rhombus\",\r\n\t\t\t\tname: \"utility\",\r\n\t\t\t\t_cs: [\"ba_base\", \"ba_rhombus\"],\r\n\t\t\t\ttext: IRm$.r1(\"L_ML_C3\")\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\t\tfarea = me.farea = $(\"<div class='idv-flw-reg'></div>\").appendTo(mainarea);\r\n\t\t\r\n\t\tbf = me.bf = new IG$._I9a/*flowDiagram*/(farea, {\r\n\t\t\tptype: \"bayesmodel\"\r\n\t\t});\r\n\t\tbf.init.call(bf);\r\n\t\t\t\r\n\t\ttopmenu.empty();\r\n\t\tfmenu = $(\"<div class='idv-flw-mnu'></div>\").appendTo(topmenu);\r\n\t\t\r\n\t\tme.l1/*initFlowMenu*/(fmenu, dt);\r\n\t\t\r\n\t\tbccall = new IG$.callBackObj(me, me.l4/*onBoxUpdate*/);\r\n\t\t\r\n\t\tbf.container.bind(\"boxClicked\", function(ev, data) {\r\n\t\t\tvar dlg,\r\n\t\t\t\tmoption = me.down(\"[name=moption]\");\r\n\t\t\t\t\r\n\t\t\t// moption.removeAll();\r\n\t\t\t\r\n\t\t\tdlg = me.__dlg;\r\n\t\t\t\r\n\t\t\tif (!dlg)\r\n\t\t\t{\r\n\t\t\t\tme.__dlg = dlg = new IG$.BY_1/*ByayesChance*/({\r\n\t\t\t\t\tjob: data,\r\n\t\t\t\t\t_sustain: 1,\r\n\t\t\t\t\t_vmode: data.name,\r\n\t\t\t\t\t_p/*editor*/: me,\r\n\t\t\t\t\tcallback: bccall\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tmoption.add(dlg);\r\n\t\t\t\t\r\n\t\t\t\tdlg.on(\"close_dlg\", function(m) {\r\n\t\t\t\t\t// moption.remove(dlg);\r\n\t\t\t\t\tmoption.hide();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdlg.job = data;\r\n\t\t\t\tdlg._vmode = data.name;\r\n\t\t\t\tdlg.init_f.call(dlg);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (dlg)\r\n\t\t\t{\r\n\t\t\t\tmoption.show();\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tbf.container.bind(\"flow_changed\", function(ev, data) {\r\n\t\t\tswitch(data.source)\r\n\t\t\t{\r\n\t\t\tcase \"box_add\":\r\n\t\t\tcase \"box_delete\":\r\n\t\t\tcase \"link_node\":\r\n\t\t\tcase \"move_link\":\r\n\t\t\tcase \"link_detach\":\r\n\t\t\t\tme.updateNetwork.call(me, data.source, data);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tbf.container.bind(\"visual_state_click\", function(ev, data) {\r\n\t\t\tme.setNewFinding.call(me, data);\r\n\t\t});\r\n\t\t\r\n\t\tif (!ig$.b$Am)\r\n\t\t{\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\treq.init(me, \r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"ml\",\r\n\t\t\t\t\tpayload: {action: \"get_var\"},\r\n\t\t\t\t\tmbody: {}\r\n\t\t\t\t}, me, function(jdoc) {\r\n\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\tdata = {},\r\n\t\t\t\t\t\tsnodes,\r\n\t\t\t\t\t\ttname,\r\n\t\t\t\t\t\ttdata,\r\n\t\t\t\t\t\ttitem,\r\n\t\t\t\t\t\ti, key;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif (jdoc)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor (tname in jdoc)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttdata = data[tname] = [];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsnodes = jdoc[tname];\r\n\t\t\t\t\t\t\tfor (i=0; i < snodes.length; i++)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitem = {\r\n\t\t\t\t\t\t\t\t\tname: snodes[i],\r\n\t\t\t\t\t\t\t\t\tvalue: snodes[i]\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\ttdata.push(titem);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tig$.b$Am = data;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tme._a1/*loadInit*/();\r\n\t\t\t\t}, false);\r\n\t\t\treq.send();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tme._a1/*loadInit*/();\r\n\t\t}\r\n\t},\r\n\t\r\n\t_a1/*loadInit*/: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tif (me.uid)\r\n\t\t{\r\n\t\t\tme.M1/*loadContent*/();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tme.rs_M1/*rs_loadContent*/(null);\r\n\t\t}\r\n\t},\r\n\t\r\n\tl4/*onBoxUpdate*/: function(job) {\r\n\t\tvar me = this,\r\n\t\t\tbf = me.bf;\r\n\t\t\r\n\t\tjob.text = job.dsname;\r\n\t\tbf.s4/*setTitle*/(job, job.dsname);\r\n\t},\r\n\t\r\n\tM1/*loadContent*/: function() {\r\n\t\tvar me = this,\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\r\n\t\tif (me.uid)\r\n\t\t{\r\n\t\t\treq.init(me, \r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"content\",\r\n\t\t\t\t\tpayload: {uid: me.uid},\r\n\t\t\t\t\tmbody: {option: 'diagnostics'}\r\n\t\t\t\t}, me, function(jdoc) {\r\n\t\t\t\t\tme.rs_M1/*rs_loadContent*/(jdoc.content, false);\r\n\t\t\t\t});\r\n\t\t\treq.send();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tme.rs_M1/*rs_loadContent*/(null);\r\n\t\t}\r\n\t},\r\n\t\r\n\trs_M1/*rs_loadContent*/: function(jdoc, is_learn) {\r\n\t\tvar me = this,\r\n\t\t\tbf = me.bf,\r\n\t\t\tdlg;\r\n\t\t\r\n\t\tif (!me.itemobj)\r\n\t\t{\r\n\t\t\tme.itemobj = new IG$._IB8b/*BayesObject*/(jdoc, bf);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tme.itemobj.L1/*parseContent*/(jdoc);\r\n\t\t}\r\n\t\t\r\n\t\tif (me.__learn_opt && me.bfirst)\r\n\t\t{\r\n\t\t\tme.do1/*doLearn*/(me.__learn_opt);\r\n\t\t}\r\n\t\t\r\n\t\tif (is_learn && me.itemobj.interactive_learning)\r\n\t\t{\r\n\t\t\tdlg = new IG$.bA_6/*interactive_learning*/({\r\n\t\t\t\titemobj: me.itemobj,\r\n\t\t\t\tcallback: new IG$.callBackObj(me, function(c) {\r\n\t\t\t\t\tme.do1/*doLearn*/(null, {\r\n\t\t\t\t\t\tinteractive_run: true\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tdlg.show();\r\n\t\t}\r\n\t\t\r\n\t\tme.A1/*refreshUI*/();\r\n\t},\r\n\t\r\n\tA1/*refreshUI*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tbf = me.bf,\r\n\t\t\titemobj = me.itemobj,\r\n\t\t\tmtype = itemobj.mtype;\r\n\t\t\t\r\n\t\tbf.L1/*loadOption*/(itemobj, new IG$.callBackObj(me, function() {\r\n\t\t\tif (!mtype)\r\n\t\t\t{\r\n\t\t\t\tme.np/*network_properties*/(!me.bfirst);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (!me.bfirst)\r\n\t\t\t\t{\r\n\t\t\t\t\tme.restore_pgmx();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tswitch (mtype)\r\n\t\t\t{\r\n\t\t\tcase \"\":\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}));\r\n\t},\r\n\t\r\n\trestore_pgmx: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tvar itemobj = me.itemobj,\r\n\t\t\tinstanceid = itemobj.instanceid,\r\n\t\t\tuid = itemobj.uid,\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\t\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"ml\",\r\n\t\t\t\tpayload: {uid: uid, instanceid: instanceid, action: \"restore_pgmx\"},\r\n\t\t\t\tmbody: itemobj.L2/*getContent*/(),\r\n\t\t\t\tmeta_type: \"bayesmodel\"\r\n\t\t\t}, me, function(jdoc) {\r\n\t\t\t\tvar txtpgmx = me.down(\"[name=txtpgmx]\"),\r\n\t\t\t\t\ttval;\r\n\t\t\t\t\t\r\n\t\t\t\tme.bfirst = 1;\r\n\t\t\t\t\r\n\t\t\t\tif (jdoc)\r\n\t\t\t\t{\r\n\t\t\t\t\titemobj.instanceid = jdoc.instanceid;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (me.__learn_opt)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tme.do1/*doLearn*/(me.__learn_opt);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\tm2/*getParents*/: function(mobj, pname) {\r\n\t\tvar me = this,\r\n\t\t\tbf = me.bf,\r\n\t\t\ta_boxes = bf.a_boxes,\r\n\t\t\ti,\r\n\t\t\tcobj,\r\n\t\t\tcons = bf.plumb.getConnections(),\r\n\t\t\tsrc, tgt,\r\n\t\t\tconnections = [],\r\n\t\t\tprev = [];\r\n\t\t\t\r\n\t\tfor (i=0; i < a_boxes.length; i++)\r\n\t\t{\r\n\t\t\tif (a_boxes[i].sid == mobj.job.sid)\r\n\t\t\t{\r\n\t\t\t\tcobj = a_boxes[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (cons && cons.length)\r\n\t\t{\r\n\t\t\tfor (i=0; i < cons.length; i++)\r\n\t\t\t{\r\n\t\t\t\tsrc = cons[i].source;\r\n\t\t\t\ttgt = cons[i].target;\r\n\t\t\t\t\r\n\t\t\t\tsrc = bf.getBoxObject.call(bf, src);\r\n\t\t\t\ttgt = bf.getBoxObject.call(bf, tgt);\r\n\t\t\t\t\r\n\t\t\t\tconnections.push({\r\n\t\t\t\t\tsrc: src,\r\n\t\t\t\t\ttgt: tgt\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (tgt && tgt.sid == cobj.sid)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (src && (pname && src.name == pname || !pname))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprev.push(src);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn prev;\r\n\t},\r\n\t\r\n\tl1/*initFlowMenu*/: function(fmenu, dt) {\r\n\t\tvar me = this,\r\n\t\t\ti,\r\n\t\t\tmul,\r\n\t\t\tgap = 10,\r\n\t\t\tsx = gap,\r\n\t\t\tbf = me.bf;\r\n\t\t\t\r\n\t\tfmenu.empty();\r\n\t\t\r\n\t\t$.each(dt, function(n, item) {\r\n\t\t\tvar dv,\r\n\t\t\t\tbg,\r\n\t\t\t\ti;\r\n\t\t\t\r\n\t\t\tif (!item.hidden)\r\n\t\t\t{\r\n\t\t\t\tdv = $(\"<div class='idv-flw-shp-a'><div>\" + item.text + \"</div></div>\").appendTo(fmenu);\r\n\t\t\t\tdv.css({left: sx});\r\n\t\t\t\t\r\n\t\t\t\tif (item._cs && item._cs.length)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (i=0; i < item._cs.length; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdv.addClass(item._cs[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tsx += gap + (IG$.j$ext._w(dv) || 120);\r\n\t\t\t\tdv.draggable({\r\n\t\t\t\t\topacity: 0.7, \r\n\t\t\t\t\thelper: \"clone\",\r\n\t\t\t\t\tstop: function(event, ui) {\r\n\t\t\t\t\t\tvar p = ui.position,\r\n\t\t\t\t\t\t\tfarea = me.farea,\r\n\t\t\t\t\t\t\tmp = $(farea.parent()).offset(),\r\n\t\t\t\t\t\t\tmposition = farea.offset(),\r\n\t\t\t\t\t\t\tmw = IG$.j$ext._w(farea),\r\n\t\t\t\t\t\t\tmh = IG$.j$ext._h(farea);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar nitem = new IG$._baN/*bflowNode*/();\r\n\t\t\t\t\t\tnitem.c1/*clone*/.call(nitem, item);\r\n\t\t\t\t\t\tnitem.w = 100;\r\n\t\t\t\t\t\tnitem.h = 28;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmposition.top -= mp.top;\r\n\t\t\t\t\t\tmposition.left -= mp.left;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tp.w = nitem.w;\r\n\t\t\t\t\t\tp.h = nitem.h;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tnitem.$variable = {};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (mposition.left < p.left && p.left < mposition.left + mw \r\n\t\t\t\t\t\t\t&& mposition.top < p.top && p.top < mposition.top + mh)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbf.addBox.call(bf, nitem, p, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t\r\n\tm1/*loadPGMX*/: function(c) {\r\n\t\tvar me = this,\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\r\n\t\tme.lv/*changeviewmode*/(0);\r\n\t\t\r\n\t\tc.meta_type = \"bayesmodel\";\r\n\t\t\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"ml\",\r\n\t\t\t\tpayload: {uid: me.uid, action: \"load_pgmx\"},\r\n\t\t\t\tmbody: c,\r\n\t\t\t\tmeta_type: \"bayesmodel\"\r\n\t\t\t}, me, function(jdoc) {\r\n\t\t\t\tthis.rs_M1/*rs_loadContent*/(jdoc);\r\n\t\t\t}, false);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\tnp/*network_properties*/: function(b_first) {\r\n\t\tvar me = this,\r\n\t\t\tdlg = new IG$.dlgML_NetProp({\r\n\t\t\t\titemobj: me.itemobj,\r\n\t\t\t\tcallback: new IG$.callBackObj(me, function(c) {\r\n\t\t\t\t\tme.updateNetwork(\"net_prop\", null, b_first);\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\r\n\t\tdlg.show();\r\n\t},\r\n\t\r\n\tupdateNetwork: function(ptype, data, b_first) {\r\n\t\tvar me = this,\r\n\t\t\titemobj = me.itemobj,\r\n\t\t\tinstanceid = itemobj.instanceid,\r\n\t\t\tuid = itemobj.uid,\r\n\t\t\treq = new IG$._rpc$(),\r\n\t\t\tpayload,\r\n\t\t\tp1 = {\r\n\t\t\t\tuid: uid, \r\n\t\t\t\tinstanceid: instanceid, \r\n\t\t\t\taction: \"update_network\", \r\n\t\t\t\tactiontype: ptype\r\n\t\t\t};\r\n\t\t\t\r\n\t\tswitch (ptype)\r\n\t\t{\r\n\t\tcase \"box_add\":\r\n\t\t\tp1.sid = data.item.sid;\r\n\t\t\tbreak;\r\n\t\tcase \"box_delete\":\r\n\t\t\tp1.sid = data.item.sid;\r\n\t\t\tp1.node_name = data.item.name || data.item.text;\r\n\t\t\tme.down(\"[name=moption]\").hide();\r\n\t\t\tbreak;\r\n\t\tcase \"link_node\":\r\n\t\t\tp1.src = data.item.src.text;\r\n\t\t\tp1.tgt = data.item.tgt.text;\r\n\t\t\tbreak;\r\n\t\tcase \"move_link\":\r\n\t\t\tp1.source_0 = data.item.source_0;\r\n\t\t\tp1.source_1 = data.item.source_1;\r\n\t\t\tp1.target_0 = data.item.target_0;\r\n\t\t\tp1.target_1 = data.item.target_1;\r\n\t\t\tbreak;\r\n\t\tcase \"link_detach\":\r\n\t\t\tp1.src = data.item.src;\r\n\t\t\tp1.tgt = data.item.tgt;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t\t\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"ml\",\r\n\t\t\t\tpayload: p1,\r\n\t\t\t\tmbody: itemobj.L2/*getContent*/(),\r\n\t\t\t\tmeta_type: \"bayesmodel\"\r\n\t\t\t}, me, function(jdoc) {\r\n\t\t\t\tvar i;\r\n\t\t\t\t\r\n\t\t\t\tif (ptype == \"box_add\")\r\n\t\t\t\t{\r\n\t\t\t\t\tif (jdoc.name)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata.item.name = jdoc.name;\r\n\t\t\t\t\t\tdata.item.text = jdoc.name;\r\n\t\t\t\t\t\tdata.item.__tL/*titleArea*/.html(data.item.text);\r\n\t\t\t\t\t\titemobj.nodes.push(data.item);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (ptype == \"box_delete\")\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (i=0; i < itemobj.nodes.length; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (itemobj.nodes[i].sid == data.item.sid)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\titemobj.nodes.splice(i, 1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!instanceid)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar new_inst = (jdoc) ? jdoc.instanceid : null;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif (new_inst)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titemobj.instanceid = new_inst;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (me.__learn_opt && b_first)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tme.do1/*doLearn*/(me.__learn_opt);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\tsetNewFinding: function(item) {\r\n\t\tvar me = this,\r\n\t\t\titemobj = me.itemobj,\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"ml\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tuid: me.uid, \r\n\t\t\t\t\taction: \"set_new_finding\", \r\n\t\t\t\t\tinstanceid: itemobj.instanceid,\r\n\t\t\t\t\ttarget: item.graphic.name,\r\n\t\t\t\t\tstate: item.state.states.name\r\n\t\t\t\t},\r\n\t\t\t\tmbody: {}\r\n\t\t\t}, me, function(jdoc) {\r\n\t\t\t\tvar me = this,\r\n\t\t\t\t\ttnode = jdoc;\r\n\t\t\t\t\t\r\n\t\t\t\tif (tnode)\r\n\t\t\t\t{\r\n\t\t\t\t\tme.paint(tnode, me.emode);\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\ttoolbarHandler: function(cmd) {\r\n\t\tvar me = this,\r\n\t\t\titemobj = me.itemobj,\r\n\t\t\tdlg;\r\n\t\t\r\n\t\tswitch (cmd)\r\n\t\t{\r\n\t\tcase \"cmd_save\":\r\n\t\t\tif (!me.uid)\r\n\t\t\t{\r\n\t\t\t\tme.fV7/*saveAsMetaContent*/(false);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tme.fV6/*saveMetaContent*/(false);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_saveas\":\r\n\t\t\tme.fV7/*saveAsMetaContent*/(false);\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_load_pgmx\":\r\n\t\t\tdlg = new IG$._IB9c/*ml_bayes_pgmx*/({\r\n\t\t\t\titemobj: me.itemobj,\r\n\t\t\t\tcallback: new IG$.callBackObj(me, function(c) {\r\n\t\t\t\t\tvar cobj = JSON.parse(c);\r\n\t\t\t\t\tme.m1/*loadPGMX*/(cobj);\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tdlg.show();\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_net_prop\":\r\n\t\t\tme.np/*network_properties*/();\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_favorites\":\r\n\t\t\tif (this.uid)\r\n\t\t\t{\r\n\t\t\t\tvar req = new IG$._rpc$();\r\n\t\t\t\treq.init(me, \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tack: \"helpcontent\",\r\n\t\t\t\t\t\tpayload: {uid: me.uid},\r\n\t\t\t\t\t\tmbody: {option: 'addfavorites'}\r\n\t\t\t\t\t}, me, me.rs_regFavorites, null, null);\r\n\t\t\t\treq.send();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tIG$.alertmsg(ig$.appname, IRm$.r1('M_ERR_NSAVE'), null, me, 1, \"error\");\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_schedule\":\r\n\t\t\tif (me.uid)\r\n\t\t\t{\r\n\t\t\t\tvar mreq = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tack: \"bizop\",\r\n\t\t\t\t\t\tpayload: {uid: me.uid, option: \"execute\"},\r\n\t\t\t\t\t\tmbody: me.itemobj.L2/*getContent*/.call(me.itemobj),\r\n\t\t\t\t\t\tjobkey: \"0\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]; \r\n\t\t\t\t\r\n\t\t\t\tIG$.showScheduler(me, me.uid, me.itemtype, mreq, null);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_net_mode\":\r\n\t\t\tme.setNewWorkingMode();\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_decision_tree\":\r\n\t\t\tme.toggleDecisionTree();\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_learn\":\r\n\t\t\tvar dlg = new IG$.d$MLearn({\r\n\t\t\t\tcallback: new IG$.callBackObj(me, function(__learn_opt) {\r\n\t\t\t\t\tme.do1/*doLearn*/(__learn_opt);\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tdlg.show();\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_db_generator\":\r\n\t\t\tvar dlg = new IG$.bA_3/*db_generator*/({\r\n\t\t\t\tcallback: new IG$.callBackObj(me, function(param) {\r\n\t\t\t\t\tvar mreq = new IG$._rpc$();\r\n\t\t\t\t\tmreq.init(me, \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tack: \"ml\",\r\n\t\t\t\t\t\t\tpayload: {uid: me.uid, instanceid: itemobj.instanceid, action: \"db_gen\"},\r\n\t\t\t\t\t\t\tmbody: param\r\n\t\t\t\t\t\t}, me, function(jdoc) {\r\n\t\t\t\t\t\t\tvar fpath, filename;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (jdoc)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tfpath = jdoc.luid;\r\n\t\t\t\t\t\t\t\tfilename = jdoc.filename;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (fpath && filename)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t$.download(ig$.servlet, [\r\n\t\t\t\t\t\t\t\t\t\t{name: \"ack\", value: \"download\"},\r\n\t\t\t\t\t\t\t\t\t\t{name: \"_mts_\", value: IG$._g$a || \"\"},\r\n\t\t\t\t\t\t\t\t\t\t{name: \"payload\", value: fpath},\r\n\t\t\t\t\t\t\t\t\t\t{name: \"mbody\", value: filename}\r\n\t\t\t\t\t\t\t\t\t], 'POST');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t); \r\n\t\t\t\t\tmreq.send();\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tdlg.show();\r\n\t\t\tbreak;\r\n\t\tcase \"cmd_cost_effct_sen\":\r\n\t\tcase \"cmd_cost_effct_det\":\r\n\t\t\tvar atype = (cmd == \"cmd_cost_effct_sen\" ? 0 : 1), \r\n\t\t\t\tdlg = new IG$.bA_4/*cost_effectiveness*/({\r\n\t\t\t\tatype: atype, \r\n\t\t\t\tuid: me.uid,\r\n\t\t\t\titemobj: itemobj,\r\n\t\t\t\twidth: atype == 0 ? 600 : 320,\r\n\t\t\t\theight: atype == 0 ? 550 : 300,\r\n\t\t\t\tcallback: new IG$.callBackObj(me, function(param) {\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tdlg.show();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\r\n\tdo1/*doLearn*/: function(learn_opt, interactive_opt) {\r\n\t\tvar me = this,\r\n\t\t\titemobj = me.itemobj,\r\n\t\t\tmreq = new IG$._rpc$(),\r\n\t\t\ts_learn_opt = {},\r\n\t\t\tk, oval, i,\r\n\t\t\topt;\r\n\t\t\r\n\t\tif (interactive_opt && interactive_opt.interactive_run)\r\n\t\t{\r\n\t\t\ts_learn_opt.interactive_do = true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tfor (k in learn_opt)\r\n\t\t\t{\r\n\t\t\t\toval = learn_opt[k];\r\n\t\t\t\t\r\n\t\t\t\tif (k == \"selected_header\")\r\n\t\t\t\t{\r\n\t\t\t\t\topt = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (i=0; i < oval.length; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\topt.push({\r\n\t\t\t\t\t\t\tselected: oval[i].selected,\r\n\t\t\t\t\t\t\tname: oval[i].name,\r\n\t\t\t\t\t\t\tmissing_value: oval[i].missing_value,\r\n\t\t\t\t\t\t\tdiscretization: oval[i].discretization,\r\n\t\t\t\t\t\t\tnum_of_interval: oval[i].num_of_interval\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\ts_learn_opt[k] = opt;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif (oval)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ts_learn_opt[k] = oval;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tmreq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"ml\",\r\n\t\t\t\tpayload: {uid: me.uid, instanceid: itemobj.instanceid, action: \"learn_network\", pfile: (learn_opt ? learn_opt.pfile : null)},\r\n\t\t\t\tmbody: s_learn_opt,\r\n\t\t\t\tmeta_type: \"learning_options\"\r\n\t\t\t}, me, function(xdoc) {\r\n\t\t\t\tme.__learn_opt = null;\r\n\t\t\t\tme.rs_M1/*rs_loadContent*/(xdoc, 1);\r\n\t\t\t}\r\n\t\t); \r\n\t\tmreq.send();\r\n\t},\r\n\t\r\n\ttoggleDecisionTree: function() {\r\n\t\t// INFERENCE_WORKING_MODE, EDITION_WORKING_MODE\r\n\t\tvar me = this,\r\n\t\t\treq = new IG$._rpc$(),\r\n\t\t\titemobj = me.itemobj;\r\n\t\t\r\n\t\tif (itemobj && itemobj.instanceid)\r\n\t\t{\r\n\t\t\tme.lv/*changeviewmode*/(1);\r\n\t\t\treq.init(me, \r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"ml\",\r\n\t\t\t\t\tpayload: {uid: me.uid, action: \"set_decision_tree\", instanceid: itemobj.instanceid},\r\n\t\t\t\t\tmbody: {} \r\n\t\t\t\t}, me, function(jdoc) {\r\n\t\t\t\t\tvar me = this;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif (jdoc)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tme.paint_decision_tree(jdoc);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, false);\r\n\t\t\treq.send();\r\n\t\t}\r\n\t},\r\n\t\r\n\tpaint_decision_tree: function(tnode) {\r\n\t\tvar me = this,\r\n\t\t\tm_decision_tree = me.down(\"[name=m_decision_tree]\"),\r\n\t\t\teldom,\r\n\t\t\tmdom,\r\n\t\t\tdnd_viewer = me.dnd_viewer,\r\n\t\t\ttdata = {};\r\n\t\t\r\n\t\tif (!dnd_viewer)\r\n\t\t{\r\n\t\t\teldom = $(m_decision_tree.el.dom);\r\n\t\t\tmdom = $(\"<div class='ba-decision-viewer'></div>\").appendTo(eldom);\r\n\t\t\tmdom.width(eldom.width()).height(eldom.height());\r\n\t\t\tdnd_viewer = new node_tree_viewer(mdom);\r\n\t\t\tme.dnd_viewer = dnd_viewer;\r\n\t\t}\r\n\t\t\r\n\t\ttdata = tnode ? me.build_decision_data([tnode]) : null;\r\n\t\t\r\n\t\tif (tdata && tdata.length > 0)\r\n\t\t{\r\n\t\t\tdnd_viewer.loadTreeData(tdata[0]);\r\n\t\t}\r\n\t},\r\n\t\r\n\tbuild_decision_data: function(tnode) {\r\n\t\tvar me = this,\r\n\t\t\tsnode, snodes,\r\n\t\t\ti, j, p, k,\r\n\t\t\tndname,\r\n\t\t\ttdata = [],\r\n\t\t\ttobj = {};\r\n\t\t\t\r\n\t\tfor (i=0; i < tnode.length; i++)\r\n\t\t{\r\n\t\t\tndname = tnode[i].name;\r\n\t\t\t\r\n\t\t\tswitch (ndname)\r\n\t\t\t{\r\n\t\t\tcase \"decision_branch\":\r\n\t\t\tcase \"decision_treenode\":\r\n\t\t\t\ttobj = {};\r\n\t\t\t\tsnode = tnode[i].property;\r\n\t\t\t\tif (snode)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (k in snode)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tp = snode[k];\r\n\t\t\t\t\t\ttobj[k] = p;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (ndname == \"decision_branch\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttobj.name = tobj.branch_state || \"top\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttobj.name = tobj.nodename;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsnode = tnode[i].children;\r\n\t\t\t\tif (snode)\r\n\t\t\t\t{\r\n\t\t\t\t\ttobj.children = me.build_decision_data(snode);\r\n\t\t\t\t}\r\n\t\t\t\ttdata.push(tobj);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn tdata;\r\n\t},\r\n\t\r\n\tsetNewWorkingMode: function() {\r\n\t\t// INFERENCE_WORKING_MODE, EDITION_WORKING_MODE\r\n\t\tvar me = this,\r\n\t\t\treq = new IG$._rpc$(),\r\n\t\t\titemobj = me.itemobj,\r\n\t\t\temode = me.emode ? 0 : 1;\r\n\t\t\t\r\n\t\tme.emode = emode;\r\n\t\t\r\n\t\tif (itemobj && itemobj.instanceid)\r\n\t\t{\r\n\t\t\tme.lv/*changeviewmode*/(0);\r\n\t\t\t\r\n\t\t\tif (me.emode)\r\n\t\t\t{\r\n\t\t\t\treq.init(me, \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tack: \"ml\",\r\n\t\t\t\t\t\tpayload: {uid: me.uid, action: \"set_working_mode\", instanceid: itemobj.instanceid},\r\n\t\t\t\t\t\tmbody: {} \r\n\t\t\t\t\t}, me, function(jdoc) {\r\n\t\t\t\t\t\tvar me = this;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (jdoc)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tme.paint(jdoc, me.emode);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, false);\r\n\t\t\t\treq.send();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tme.paint(null, me.emode);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tpaint: function(gnode, emode) {\r\n\t\tvar me = this,\r\n\t\t\ttnode = gnode ? gnode.visualnodes : null,\r\n\t\t\tp, pn, vn, nd,\r\n\t\t\tg = {},\r\n\t\t\ti, j, k, vns, vstat, v1, v2, v3, v4,\r\n\t\t\titemobj = me.itemobj;\r\n\t\t\t\r\n\t\tif (tnode)\r\n\t\t{\r\n\t\t\tfor (i=0; i < tnode.length; i++)\r\n\t\t\t{\r\n\t\t\t\tpn = tnode[i];\r\n\t\t\t\tp = {\r\n\t\t\t\t\tname: pn.name,\r\n\t\t\t\t\tvisualstates: []\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tvn = pn.visualstates;\r\n\t\t\t\t\r\n\t\t\t\tif (vn)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (j=0; j < vn.length; j++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvstat = {\r\n\t\t\t\t\t\t\tname: vn[j].name,\r\n\t\t\t\t\t\t\tvalues: []\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tvstat.position = parseInt(vstat.position);\r\n\t\t\t\t\t\tvstat.ispropagationactive = vstat.ispropagationactive;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tv2 = vn[j].values;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (v2)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tfor (k=0; k < v2.length; k++)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tv4 = v2[k];\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvstat.values.push({\r\n\t\t\t\t\t\t\t\t\tbarlength: v4.barlength,\r\n\t\t\t\t\t\t\t\t\tformatvalue: v4.formatvalue\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tp.visualstates.push(vstat);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tg[p.name] = p;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t$.each(itemobj.nodes, function(i, nd) {\r\n\t\t\tnd.paint.call(nd, g[nd.text], emode);\r\n\t\t});\r\n\t\t\r\n\t\tme.bf.plumb.repaintEverything();\r\n\t},\r\n\t\r\n\trs_regFavorites: function(xdoc) {\r\n\t\tIG$.alertmsg(ig$.appname, IRm$.r1(\"M_SAVED_FAV\"), null, null, 0, \"success\");\r\n\t},\r\n\t\r\n\tll4/*getStatus*/: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tif (me.stimer)\r\n\t\t{\r\n\t\t\tclearTimeout(me.stimer);\r\n\t\t}\r\n\t\t\r\n\t\tme.stimer = setTimeout(function() {\r\n\t\t\tme.ll3/*getRunStatus*/.call(me);\r\n\t\t}, me.sgap);\r\n\t},\r\n\t\r\n\trs_lllE/*runBusinessError*/: function(jdoc) {\r\n\t\tvar panel = this,\r\n\t\t\tr = true,\r\n\t\t\terrcode = jdoc.errcode;\r\n\t\t\r\n\t\tif(errcode == \"0x28a0\")\r\n\t\t{\r\n\t\t\tr = false;\r\n\t\t\t\r\n\t\t\tvar sid = jdoc.errormessage;\r\n\t\t\t\t\r\n\t\t\tif (sid)\r\n\t\t\t{\r\n\t\t\t\tIG$.confirmMessages(ig$.appname, \"Already workflow is running on server. Would you like to stop service?\", function(e) {\r\n\t\t\t\t\tif (e == \"yes\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar req = new IG$._rpc$();\r\n\t\t\t\t\t\treq.init(panel, \r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tack: \"bizop\",\r\n\t\t\t\t\t\t\t\tpayload: {uid: panel.uid, sid: sid, option: \"cancelWorkflow\"},\r\n\t\t\t\t\t\t\t\tmbody: {}\r\n\t\t\t\t\t\t\t}, panel, panel.rs_ll2/*cancelWorkflow*/, null);\r\n\t\t\t\t\t\treq.send();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, panel, panel);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn r;\r\n\t},\r\n\t\r\n\trs_ll2/*cancelWorkflow*/: function(xdoc) {\r\n\t\tvar me = this;\r\n\t\tme.lll/*runBusiness*/();\r\n\t},\r\n\t\r\n\tfV6/*saveMetaContent*/: function(afterclose) {\r\n\t\tvar me = this,\r\n\t\t\tcontentxml = me.itemobj.L2/*getContent*/.call(me.itemobj);\r\n\t\t\r\n\t\tvar req = new IG$._rpc$();\r\n\t\t\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"ml\",\r\n\t\t\t\tpayload: {instanceid: me.itemobj.instanceid, action: \"get_pgmx\"},\r\n\t\t\t\tmbody: {}\r\n\t\t\t}, me, function(xdoc) {\r\n\t\t\t\tvar req = new IG$._rpc$();\r\n\t\t\t\t\r\n\t\t\t\tcontentxml.probnet = xdoc.probnet;\r\n\t\t\t\tcontentxml.evidence = xdoc.evidence;\r\n\t\t\t\tcontentxml.inference_options = xdoc.inference_options;\r\n\r\n\t\t\t\treq.init(me, \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tack: \"writecontent\",\r\n\t\t\t\t\t\tpayload: {uid: me.uid},\r\n\t\t\t\t\t\tmbody: contentxml,\r\n\t\t\t\t\t\tmeta_type: \"bayesmodel\"\r\n\t\t\t\t\t}, me, me.rs_fV6/*saveMetaContent*/, null, [afterclose]);\r\n\t\t\t\treq.send();\r\n\t\t\t}\r\n\t\t);\r\n\t\t\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_fV6/*saveMetaContent*/: function(xdoc, opt) {\r\n\t\tvar me = this,\r\n\t\t\tafterclose = (opt ? opt[0] : false);\r\n\t\tif (afterclose == true)\r\n\t\t{\r\n\t\t\tme.close();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tme.contentchanged = false;\r\n\t\t\tIG$.alertmsg(ig$.appname, IRm$.r1(\"M_SAVED\"), null, null, 0, \"success\");\r\n\t\t}\r\n\t},\r\n\t\r\n\tfV7/*saveAsMetaContent*/: function(afterclose) {\r\n\t\tvar me = this,\r\n\t\t\tdlgitemsel = new IG$.metaSelectDlg({\r\n\t\t\t\tmode: \"newitem\",\r\n\t\t\t\tinitpath: me.nodepath,\r\n\t\t\t\tcallback: new IG$.callBackObj(me, me.fV8/*saveNewMetaContent*/, afterclose)\r\n\t\t\t});\r\n\t\tIG$.checkLogin(me, dlgitemsel);\r\n\t},\r\n\t\r\n\tfV8/*saveNewMetaContent*/: function(item, afterclose) {\r\n\t\tvar panel = this,\r\n\t\t\tcontentxml = panel.itemobj.L2/*getContent*/.call(panel.itemobj),\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\r\n\t\treq.init(panel, \r\n\t\t\t{\r\n\t\t\t\tack: \"writecontent\",\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\taddress: item.nodepath + \"/\" + item.name,\r\n\t\t\t\t\tname: item.name,\r\n\t\t\t\t\ttype: (this.itemtype),\r\n\t\t\t\t\tpid: item.uid\r\n\t\t\t\t},\r\n\t\t\t\tmbody: contentxml,\r\n\t\t\t\tmeta_type: \"bayesmodel\"\r\n\t\t\t}, panel, panel._rs_procMakeItem, panel.rs_procMakeItem, [item.name, afterclose, item.nodepath, item.uid, contentxml]);\r\n\t\t   req.showerror = false;\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\t_rs_procMakeItem: function(jdoc, opt) {\r\n\t\tvar me = this,\r\n\t\t\titemobj = me.itemobj,\r\n\t\t\tpnode;\r\n\t\t\t\r\n\t\tif (jdoc)\r\n\t\t{\r\n\t\t\titemobj.item = {\r\n\t\t\t\tname: jdoc.name,\r\n\t\t\t\tuid: jdoc.uid,\r\n\t\t\t\tnodepath: jdoc.nodepath,\r\n\t\t\t\ttype: jdoc.type\r\n\t\t\t};\r\n\t\t\tme.setTitle(itemobj.item.name);\r\n\t\t\tme.uid = itemobj.item.uid;\r\n\t\t}\r\n\t},\r\n\t\r\n\trs_procMakeItem: function(xdoc, opt) {\r\n\t\tvar panel = this,\r\n\t\t\titemname = opt[0],\r\n\t\t\tafterclose = opt[1],\r\n\t\t\tnodepath = opt[2],\r\n\t\t\tpitemuid = opt[3],\r\n\t\t\tcontentxml = opt[4],\r\n\t\t\terrcode = IG$.getErrorCode(xdoc);\r\n\t\t\r\n\t\tif (errcode == \"0x12e0\")\r\n\t\t{\r\n\t\t\tIG$.confirmMessages(ig$.appname, itemname + \" already exist on the server. Would you overwrite existing item with this copy?\", function(e) {\r\n\t\t\t\tif (e == \"yes\")\r\n\t\t\t\t{\r\n\t\t\t\t\tvar req = new IG$._rpc$();\r\n\t\t\t\t\treq.init(panel, \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tack: \"writecontent\",\r\n\t\t\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\t\t\taddress: nodepath + \"/\" + itemname,\r\n\t\t\t\t\t\t\t\tname: itemname,\r\n\t\t\t\t\t\t\t\ttype: \"BayesNet\",\r\n\t\t\t\t\t\t\t\tpid: pitemuid,\r\n\t\t\t\t\t\t\t\toverwrite: 'T'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmbody: contentxml,\r\n\t\t\t\t\t\t\tmeta_type: \"bayesmodel\"\r\n\t\t\t\t\t\t}, panel, panel._rs_procMakeItem, null, [itemname, afterclose, nodepath]);\r\n\t\t\t\t\treq.send();\r\n\t\t\t\t}\r\n\t\t\t}, panel, panel);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tIG$.ShowErrorMessage(xdoc, panel);\r\n\t\t}\r\n\t},\r\n\t\r\n\tlv/*changeviewmode*/: function(mode) {\r\n\t\tvar me = this,\r\n\t\t\tm_main_card = me.m_main_card;\r\n\t\t\t\r\n\t\tm_main_card.getLayout().setActiveItem(mode);\r\n\t},\r\n\t\r\n\tinitComponent: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\t$s.apply(this, {\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\tlayout: \"card\",\r\n\t\t\t\t\tname: \"m_main_card\",\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\ttype: \"vbox\",\r\n\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"container\",\r\n\t\t\t\t\t\t\t\t\tname: \"topmenu\",\r\n\t\t\t\t\t\t\t\t\theight: 40,\r\n\t\t\t\t\t\t\t\t\tborder: 1,\r\n\t\t\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\t\t\tborderColor: '#efefef',\r\n\t\t\t\t\t\t\t\t\t\tborderStyle: 'solid'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"container\",\r\n\t\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\t\tlayout: \"border\",\r\n\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"container\",\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"mainarea\",\r\n\t\t\t\t\t\t\t\t\t\t\tregion: \"center\",\r\n\t\t\t\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"moption\",\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Properties\",\r\n\t\t\t\t\t\t\t\t\t\t\tsplit: true,\r\n\t\t\t\t\t\t\t\t\t\t\thidden: true,\r\n\t\t\t\t\t\t\t\t\t\t\tcollapsible: true,\r\n\t\t\t\t\t\t\t\t\t\t\tcollapsed: true,\r\n\t\t\t\t\t\t\t\t\t\t\tcollapseMode: \"mini\",\r\n\t\t\t\t\t\t\t\t\t\t\tregion: \"east\",\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 420,\r\n\t\t\t\t\t\t\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\t\t\t\t\t\t\ttools: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"collapse\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"displayfield\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: \"Click Item to set properties\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"container\",\r\n\t\t\t\t\t\t\tname: \"m_decision_tree\",\r\n\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\tresize: function(tobj, w, h) {\r\n\t\t\t\t\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\t\t\t\t\tdnd_viewer = me.dnd_viewer;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (dnd_viewer)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tdnd_viewer.setSize.call(dnd_viewer, w, h);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\ttbar: [\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: 'icon-toolbar-save',\r\n\t\t\t\t\tname: \"t_save\",\r\n\t\t\t\t\ttooltip: IRm$.r1('L_SAVE_CONTENT'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_save'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: 'icon-toolbar-saveas',\r\n\t\t\t\t\tname: \"t_save_as\",\r\n\t\t\t\t\ttooltip: IRm$.r1('L_SAVE_CONTENTAS'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_saveas'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"NetProp\",\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler(\"cmd_net_prop\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"L_ML_C7\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_load_pgmx'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t\"-\",\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"L_ML_C4a\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_net_mode'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"L_ML_C5\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_decision_tree'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t\"-\",\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"L_ML_C6\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_cases'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"L_ML_C6a\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_cases_new'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"L_ML_C6b\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_cases_rm'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t\"-\",\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1(\"L_ML_LEARN\"),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler('cmd_learn'); \r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Tools\",\r\n\t\t\t\t\tmenu: {\r\n\t\t\t\t\t\txtype: \"menu\",\r\n\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Database generator\",\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tthis.toolbarHandler('cmd_db_generator'); \r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"L_ML_CEFF_S\"),\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tthis.toolbarHandler('cmd_cost_effct_sen'); \r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: IRm$.r1(\"L_ML_CEFF_D\"),\r\n\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\tthis.toolbarHandler('cmd_cost_effct_det'); \r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"->\",\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: \"icon-toolbar-schedule\",\r\n\t\t\t\t\tcls: \"ig_r_sch\",\r\n\t\t\t\t\ttooltip: IRm$.r1('B_SCHEDULE'),\r\n\t\t\t\t\thidden: ig$.features && !ig$.features.enable_scheduler ? true : false,\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler.call(this, 'cmd_schedule');\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: \"icon-toolbar-favorites\",\r\n\t\t\t\t\ttooltip: IRm$.r1('B_FAVORITES'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tthis.toolbarHandler.call(this, 'cmd_favorites');\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t},\r\n\t\t\t\t\"-\",\r\n\t\t\t\t{\r\n\t\t\t\t\ticonCls: \"icon-toolbar-config\",\r\n\t\t\t\t\ttooltip: \"Properties\",\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tvar moption = this.down(\"[name=moption]\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (moption.isVisible())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmoption.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmoption.show();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\t\t  \r\n\t\tIG$._IB9b/*ml_bayes*/.superclass.initComponent.call(this);\r\n\t},\r\n\t\r\n\tlisteners: {\r\n\t\tafterrender: function(tobj) {\r\n\t\t\tvar me = this;\r\n\t\t\t\r\n\t\t\tme.m_main_card = me.down(\"[name=m_main_card]\");\r\n\t\t\t\r\n\t\t\tme.topmenu = $(me.down(\"[name=topmenu]\").el.dom);\r\n\t\t\tme.mainarea = $(me.down(\"[name=mainarea]\").el.dom);\r\n\t\t\t\r\n\t\t\tme.init_f();\r\n\t\t},\r\n\t\tbeforeclose: function(panel, opts) {\r\n\t\t\tif (panel.itemobj && panel.itemobj.instanceid)\r\n\t\t\t{\r\n\t\t\t\tvar lreq = new IG$._rpc$();\r\n\t\t\t\tlreq.init(panel,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tack: \"ml\",\r\n\t\t\t\t\t\tpayload: {uid: panel.uid, action: \"ref_down\", instanceid: panel.itemobj.instanceid},\r\n\t\t\t\t\t\tmbody: {}\r\n\t\t\t\t\t}, panel, function(xdoc) {\r\n\t\r\n\t\t\t\t\t}, false);\r\n\t\r\n\t\t\t\tlreq.send();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n","IG$._IB8r/*BayesBranchObject*/ = function(tnode) {\r\n\tif (tnode)\r\n\t{\r\n\t\tthis.p1/*parseNode*/(tnode);\r\n\t}\r\n}\r\n\r\nIG$._IB8r/*BayesBranchObject*/.prototype = {\r\n\tp1/*parseNode*/: function(tnode) {\r\n\t\tvar me = this,\r\n\t\t\ti, vnode, vnodes;\r\n\t\t\r\n\t\tvnode = tnode.thresholds;\r\n\t\tif (vnode)\r\n\t\t{\r\n\t\t\tme.thresholds = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < vnode.length; i++)\r\n\t\t\t{\r\n\t\t\t\tme.thresholds.push({\r\n\t\t\t\t\tvalue: vnode[i].value,\r\n\t\t\t\t\tbelongs_to: vnode[i].belongs_to\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvnode = tnode.states;\r\n\t\tif (vnode)\r\n\t\t{\r\n\t\t\tme.states = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < vnode.length; i++)\r\n\t\t\t{\r\n\t\t\t\tme.states.push({\r\n\t\t\t\t\tname: vnode[i].name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tme.label = tnode.label;\r\n\t\tme.reference = vnode.reference;\r\n\t\t\r\n\t\tvnode = tnode.potential;\r\n\t\t\r\n\t\tif (vnode)\r\n\t\t{\r\n\t\t\tme.potential = new IG$._IB8p/*BayesPotentialObject*/(vnode); \r\n\t\t}\r\n\t},\r\n\tp2/*toXMLString*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tr = {},\r\n\t\t\ti;\r\n\t\t\r\n\t\tif (me.thresholds && me.thresholds.length)\r\n\t\t{\r\n\t\t\tr.thresholds = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < me.thresholds.length; i++)\r\n\t\t\t{\r\n\t\t\t\tr.thresholds.push({\r\n\t\t\t\t\tvalue: me.thresholds[i].value,\r\n\t\t\t\t\tbelongs_to: me.thresholds[i].belongs_to\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (me.states && me.states.length)\r\n\t\t{\r\n\t\t\tr.states = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < me.states.length; i++)\r\n\t\t\t{\r\n\t\t\t\tr.states.push({\r\n\t\t\t\t\tname: me.states[i].name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tr.label = me.label;\r\n\t\tr.reference = me.reference;\r\n\t\t\r\n\t\tif (me.potential)\r\n\t\t{\r\n\t\t\tr.potential = me.potential.p2/*toXMLString*/();\r\n\t\t}\r\n\t\t\r\n\t\treturn r;\r\n\t}\r\n}\r\n\r\nIG$._IB8p/*BayesPotentialObject*/ = function(tnode) {\r\n\tif (tnode)\r\n\t{\r\n\t\tthis.p1/*parseNode*/(tnode);\r\n\t}\r\n}\r\n\r\nIG$._IB8p/*BayesPotentialObject*/.prototype = {\r\n\tp1/*parseNode*/: function(tnode) {\r\n\t\tvar me = this,\r\n\t\t\ti, vnode, vnodes,\r\n\t\t\tuval;\r\n\t\t\r\n\t\tme.type = tnode.type;\r\n\t\tme.role = tnode.role;\r\n\t\t\r\n\t\tme.variables = [];\r\n\t\tvnode = tnode.variables;\r\n\t\tif (vnode)\r\n\t\t{\r\n\t\t\tfor (i=0; i < vnode.length; i++)\r\n\t\t\t{\r\n\t\t\t\tme.variables.push({\r\n\t\t\t\t\tname: vnode[i].name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tme.values = tnode.values;\r\n\t\t\r\n\t\tvnode = tnode.uncertain_values;\r\n\t\t\r\n\t\tif (vnode)\r\n\t\t{\r\n\t\t\tme.uncertain_values = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < vnode.length; i++)\r\n\t\t\t{\r\n\t\t\t\tuval = vnode[i];\r\n\t\t\t\tme.uncertain_values.push(uval);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvnode = tnode.utility_variable;\r\n\t\t\r\n\t\tif (vnode)\r\n\t\t{\r\n\t\t\tme.utility_variable = {\r\n\t\t\t\tname: vnode.name\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tvnode = tnode.top_variable;\r\n\t\t\r\n\t\tif (vnode)\r\n\t\t{\r\n\t\t\tme.top_variable = {\r\n\t\t\t\tname: vnode.name,\r\n\t\t\t\ttimeslice: vnode.timeslice\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tvnode = tnode.branches;\r\n\t\t\r\n\t\tif (vnode)\r\n\t\t{\r\n\t\t\tme.branches = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < vnode.length; i++)\r\n\t\t\t{\r\n\t\t\t\tme.branches.push(new IG$._IB8r/*BayesBranchObject*/(vnode[i]));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tme.model = tnode.model;\r\n\t\t\r\n\t\tvnode = tnode.subpotentials;\r\n\t\t\r\n\t\tif (vnode)\r\n\t\t{\r\n\t\t\tme.subpotentials = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < vnode.length; i++)\r\n\t\t\t{\r\n\t\t\t\tme.subpotentials.push(new IG$._IB8p/*BayesPotentialObject*/(vnode[i]));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvnode = tnode.time_variable;\r\n\t\t\r\n\t\tif (vnode)\r\n\t\t{\r\n\t\t\tme.time_variable = {\r\n\t\t\t\tname: vnode.name,\r\n\t\t\t\ttimeslice: vnode.timeslice\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tme.coefficients = tnode.coefficients;\r\n\t\t\r\n\t\tvnode = tnode.covariates;\r\n\t\t\r\n\t\tif (vnode)\r\n\t\t{\r\n\t\t\tme.covariates = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < vnode.length; i++)\r\n\t\t\t{\r\n\t\t\t\tme.covariates.push(vnode[i].value);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tme.covariance_matrix = tnode.covariance_matrix;\r\n\t\tme.cholesky_decomposition = tnode.cholesky_decomposition;\r\n\t\tme.numeric_value = tnode.numeric_value;\r\n\t\tme.state = tnode.state;\r\n\t},\r\n\t\r\n\tp2/*toXMLString*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tr = {\r\n\t\t\t\ttype: me.type,\r\n\t\t\t\trole: me.role,\r\n\t\t\t\tvariables: []\r\n\t\t\t},\r\n\t\t\ti, \r\n\t\t\tvariables = me.variables,\r\n\t\t\tuncertain_values = me.uncertain_values;\r\n\t\t\r\n\t\tif (variables)\r\n\t\t{\r\n\t\t\tfor (i=0; i < variables.length; i++)\r\n\t\t\t{\r\n\t\t\t\tr.variables.push({\r\n\t\t\t\t\tname: variables[i].name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tr.values = me.values;\r\n\t\t\r\n\t\tif (uncertain_values && uncertain_values.length)\r\n\t\t{\r\n\t\t\tr.uncertain_values = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < uncertain_values.length; i++)\r\n\t\t\t{\r\n\t\t\t\tr.uncertain_values.push({\r\n\t\t\t\t\tdistribution: uncertain_values[i].distribution,\r\n\t\t\t\t\tname: uncertain_values[i].name,\r\n\t\t\t\t\tvalue: uncertain_values[i].value\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (me.utility_variable && me.utility_variable.name)\r\n\t\t{\r\n\t\t\tr.utility_variable = {\r\n\t\t\t\tname: me.utility_variable.name\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tif (me.top_variable && me.top_variable.name)\r\n\t\t{\r\n\t\t\tr.top_variable = {\r\n\t\t\t\tname: me.top_variable.name,\r\n\t\t\t\ttimeslice: me.top_variable.timeslice\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tif (me.time_variable && me.time_variable.name)\r\n\t\t{\r\n\t\t\tr.time_variable = {\r\n\t\t\t\tname: me.time_variable.name,\r\n\t\t\t\ttimeslice: me.time_variable.timeslice\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tif (me.branches && me.branches.length)\r\n\t\t{\r\n\t\t\tr.branches = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < me.branches.length; i++)\r\n\t\t\t{\r\n\t\t\t\tr.branches.push(me.branches[i].p2/*toXMLString*/());\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (me.subpotentials && me.subpotentials.length)\r\n\t\t{\r\n\t\t\tr.subpotentials = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < me.subpotentials.length; i++)\r\n\t\t\t{\r\n\t\t\t\tr.subpotentials.push(me.subpotentials[i].p2/*toXMLString*/());\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (me.model)\r\n\t\t{\r\n\t\t\tr.model = me.model;\r\n\t\t}\r\n\t\t\r\n\t\tif (me.coefficients)\r\n\t\t{\r\n\t\t\tr.coefficients = me.coefficients;\r\n\t\t}\r\n\t\t\r\n\t\tif (me.covariates && me.covariates.length)\r\n\t\t{\r\n\t\t\tr.covariates = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < me.covariates.length; i++)\r\n\t\t\t{\r\n\t\t\t\tr.covariates.push(me.covariates[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (me.covariance_matrix)\r\n\t\t{\r\n\t\t\tr.covariance_matrix = me.covariance_matrix;\r\n\t\t}\r\n\t\t\r\n\t\tif (me.cholesky_decomposition)\r\n\t\t{\r\n\t\t\tr.cholesky_decomposition = me.cholesky_decomposition;\r\n\t\t}\r\n\t\t\r\n\t\tif (me.numeric_value)\r\n\t\t{\r\n\t\t\tr.numeric_value = me.numeric_value;\r\n\t\t}\r\n\t\t\r\n\t\tif (me.state)\r\n\t\t{\r\n\t\t\tr.state = me.state;\r\n\t\t}\r\n\t\t\r\n\t\treturn r;\r\n\t}\r\n};\r\n\r\nIG$._IB8b/*BayesObject*/ = function(xdoc, bf) {\r\n\tvar me = this;\r\n\tme.bf = bf;\r\n\t\r\n\tme.nodes = [];\r\n\tme.links = [];\r\n\tme.potentials = [];\r\n\t\r\n\txdoc && me.L1/*parseContent*/(xdoc);\r\n}\r\n\r\nIG$._IB8b/*BayesObject*/.prototype = {\r\n\tL1/*parseContent*/: function(jdoc) {\r\n\t\tvar me = this,\r\n\t\t\tpnode = jdoc.probnet,\r\n\t\t\ttnode, tnodes, i, j, pnodes, node, lnode, lnk,\r\n\t\t\tuid, snode, potential, mnode,\r\n\t\t\tinstanceid,\r\n\t\t\tcreterion,\r\n\t\t\tarr1 = [], arr2 = [];\r\n\t\t\r\n\t\tme.nodes = [];\r\n\t\tme.links = [];\r\n\t\tme.potentials = [];\r\n\t\tme.decision_criteria = [];\r\n\t\tme.interactive_learning = null;\r\n\t\t\r\n\t\tuid = jdoc.uid;\r\n\t\t\r\n\t\tif (uid)\r\n\t\t{\r\n\t\t\tme.item = {\r\n\t\t\t\tuid: jdoc.uid,\r\n\t\t\t\tname: jdoc.name,\r\n\t\t\t\ttype: jdoc.type,\r\n\t\t\t\tnodepath: jdoc.nodepath\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tinstanceid = jdoc.instanceid;\r\n\t\t\r\n\t\tif (instanceid)\r\n\t\t{\r\n\t\t\tme.instanceid = instanceid;\r\n\t\t}\r\n\t\t\r\n\t\tif (pnode)\r\n\t\t{\r\n\t\t\tme.additional_properties = [];\r\n\t\t\t\r\n\t\t\tsnode = pnode.comment;\r\n\t\t\t\r\n\t\t\tif (snode)\r\n\t\t\t{\r\n\t\t\t\tme.comment = snode.comment;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsnode = pnode.additional_properties;\r\n\t\t\t\r\n\t\t\tif (snode)\r\n\t\t\t{\r\n\t\t\t\tfor (i=0; i < snode.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tme.additional_properties.push({\r\n\t\t\t\t\t\tname: snode[i].name,\r\n\t\t\t\t\t\tvalue: snode[i].value\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tme.mtype = pnode.type;\r\n\t\t\tme.mtypename = pnode.typename;\r\n\t\t\t\r\n\t\t\ttnode = pnode.variables;\r\n\t\t\tif (tnode)\r\n\t\t\t{\r\n\t\t\t\tfor (i=0; i < tnode.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tnode = new IG$._baN/*bflowNode*/(tnode[i]);\r\n\t\t\t\t\tif (!node.shape)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tswitch (node.role)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\tcase \"chance\":\r\n\t\t\t\t\t\t\tnode.shape = \"circle\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"decision\":\r\n\t\t\t\t\t\t\tnode.shape = \"rect\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"utility\":\r\n\t\t\t\t\t\t\tnode.shape = \"rhombus\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode.w = 100;\r\n\t\t\t\t\tnode.h = 28;\r\n\t\t\t\t\tnode._cs = [\"ba_base\", \"ba_\" + node.shape];\r\n\t\t\t\t\tnode.$variable = tnode[i];\r\n\t\t\t\t\tme.nodes.push(node);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttnode = pnode.links;\r\n\t\t\t\r\n\t\t\tif (tnode)\r\n\t\t\t{\r\n\t\t\t\ttnodes = pnode.links;\r\n\t\t\t\tfor (i=0; i < tnodes.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar from_node = tnodes[i].variables[0],\r\n\t\t\t\t\t\tto_node = tnodes[i].variables[1];\r\n\t\t\t\t\t\r\n\t\t\t\t\tlnk = {\r\n\t\t\t\t\t\tfrom: from_node.sid,\r\n\t\t\t\t\t\tto: to_node.sid,\r\n\t\t\t\t\t\tdashstyle: tnodes[i].dashstyle,\r\n\t\t\t\t\t\tdirected: tnodes[i].directed\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tsnode = tnodes[i].potential;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (snode)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlnk.potential = new IG$._IB8p/*BayesPotentialObject*/(snode);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tsnode = tnodes[i].revealing_condition;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (snode)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlnk.revealing_condition = {};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmnode = snode.states;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (mnode)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlnk.revealing_condition.states = [];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsnodes = IG$.XGetChildNodes(mnode);\r\n\t\t\t\t\t\t\tfor (j=0; j < snodes.length; j++)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlnk.revealing_condition.states.push({\r\n\t\t\t\t\t\t\t\t\tname: snodes[j].name\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tme.links.push(lnk);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttnode = pnode.potentials;\r\n\t\t\tif (tnode)\r\n\t\t\t{\r\n\t\t\t\tfor (i=0; i < tnode.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tpotential = new IG$._IB8p/*BayesPotentialObject*/(tnode[i]);\r\n\t\t\t\t\tme.potentials.push(potential);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttnode = pnode.decision_criteria;\r\n\t\t\tif (tnode)\r\n\t\t\t{\r\n\t\t\t\tfor (i=0; i < tnode.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tcriterion = tnode[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tsnode = tnode[i].additional_properties;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (snode && snode.length)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor (j=0; j < snode.length; j++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcriterion[snode[j].name] = snode[j].value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tme.decision_criteria.push(criterion);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttnode = pnode.interactive_learning;\r\n\t\t\t\r\n\t\t\tif (tnode)\r\n\t\t\t{\r\n\t\t\t\t$.each([\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"showable_edit_proposals\",\r\n\t\t\t\t\t\tarr: arr1\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"blocked_edit_proposals\",\r\n\t\t\t\t\t\tarr: arr2\r\n\t\t\t\t\t}\r\n\t\t\t\t], function(n, kobj) {\r\n\t\t\t\t\tvar knode,\r\n\t\t\t\t\t\ti, j, vnodes, vrow,\r\n\t\t\t\t\t\tarr = kobj.arr;\r\n\t\t\t\t\t\r\n\t\t\t\t\tknode = tnode[kobj.name];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (knode)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvnodes = knode;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor (i=0; i < vnodes.length; i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvrow = {};\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tknodes = IG$.XGetChildNodes(vnodes[i]);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (j=0; j < knodes.length; j++)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvname = IG$.XGetNodeName(knodes[j]);\r\n\t\t\t\t\t\t\t\tvrow[vname] = IG$.XGetTextVal(knodes[j]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tarr.push(vrow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (arr1.length + arr2.length > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tme.interactive_learning = {\r\n\t\t\t\t\t\tshowable_edit_proposals: arr1,\r\n\t\t\t\t\t\tblocked_edit_proposals: arr2\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tL2/*getContent*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tr = {},\r\n\t\t\tl,\r\n\t\t\tpotentials = me.potentials,\r\n\t\t\tdecision_criteria = me.decision_criteria,\r\n\t\t\tcriteria;\r\n\t\t\r\n\t\tif (me.item)\r\n\t\t{\r\n\t\t\tr = {\r\n\t\t\t\tuid: me.item.uid,\r\n\t\t\t\tnodepath: me.item.nodepath,\r\n\t\t\t\tname: me.item.name\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tr.probnet = {\r\n\t\t\tcomment: {\r\n\t\t\t\tcomment: me.comment\r\n\t\t\t},\r\n\t\t\ttype: me.mtype,\r\n\t\t\ttypename: me.mtypename\r\n\t\t};\r\n\t\t\r\n\t\tl = me.additional_properties;\r\n\t\t\r\n\t\tif (l && l.length)\r\n\t\t{\r\n\t\t\tr.probnet.additional_properties = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < l.length; i++)\r\n\t\t\t{\r\n\t\t\t\tr.probnet.additional_properties.push({\r\n\t\t\t\t\tname: l[i].name,\r\n\t\t\t\t\tvalue: l[i].value\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tme.bf.l2/*exportContent*/(r, me.mtype, me.mtypename);\r\n\t\t\r\n\t\tif (potentials && potentials.length)\r\n\t\t{\r\n\t\t\tr.probnet.potentials = [];\r\n\t\t\tfor (i=0; i < potentials.length; i++)\r\n\t\t\t{\r\n\t\t\t\tr.probnet.potentials.push(potentials[i].p2/*getXMLString*/());\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (decision_criteria && decision_criteria.length)\r\n\t\t{\r\n\t\t\tr.probnet.decision_criteria = [];\r\n\t\t\t\r\n\t\t\tfor (i=0; i < decision_criteria.length; i++)\r\n\t\t\t{\r\n\t\t\t\tcriteria = {\r\n\t\t\t\t\tname: decision_criteria[i].name,\r\n\t\t\t\t\tadditional_properties: []\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tr.probnet.decision_criteria.push(criteria);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn r;\r\n\t}\r\n}","IG$._IB9c/*ml_bayes_pgmx*/ = $s.extend($s.window, {\r\n\tmodal: true,\r\n\tlayout: \"fit\",\r\n\tclosable: false,\r\n\tresizable:false,\r\n\twidth: 500,\r\n\theight: 500,\r\n\t\r\n\tcallback: null,\r\n\t\r\n\tinit_f: function() {\r\n\t\tvar me = this,\r\n\t\t\titemobj = me.itemobj;\r\n\t\t\r\n\t\tif (itemobj)\r\n\t\t{\r\n\t\t\tvar instanceid = itemobj.instanceid,\r\n\t\t\t\tuid = itemobj.uid,\r\n\t\t\t\treq = new IG$._rpc$();\r\n\t\t\t\t\r\n\t\t\treq.init(me, \r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"ml\",\r\n\t\t\t\t\tpayload: {uid: uid, instanceid: instanceid, action: \"restore_pgmx\"},\r\n\t\t\t\t\tmbody: itemobj.L2/*getContent*/(),\r\n\t\t\t\t\tmeta_type: \"bayesmodel\"\r\n\t\t\t\t}, me, function(jdoc) {\r\n\t\t\t\t\tvar txtpgmx = me.down(\"[name=txtpgmx]\"),\r\n\t\t\t\t\t\ttnode = jdoc,\r\n\t\t\t\t\t\ttval;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (tnode)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttval = JSON.stringify(tnode, null, 2);\r\n\t\t\t\t\t\ttval = tval.replace(/&/g, \"&amp;\");\r\n\t\t\t\t\t\ttxtpgmx.setValue(tval);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, false);\r\n\t\t\treq.send();\r\n\t\t}\r\n\t},\r\n\t\r\n\t_l1/*loadURL*/: function(fuid) {\r\n\t\tvar me = this,\r\n\t\t\tm1 = me.down(\"[name=m1]\"),\r\n\t\t\tm1val = m1.getValue(),\r\n\t\t\titemobj = me.itemobj;\r\n\t\t\r\n\t\tm1.clearInvalid();\r\n\t\t\r\n\t\tif (!fuid && !m1val)\r\n\t\t{\r\n\t\t\tm1.markInvalid(\"Empty\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tvar instanceid = itemobj.instanceid,\r\n\t\t\tuid = itemobj.uid,\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\t\r\n\t\treq.init(me, \r\n\t\t\t{\r\n\t\t\t\tack: \"ml\",\r\n\t\t\t\tpayload: {uid: uid, instanceid: instanceid, action: \"load_url\"},\r\n\t\t\t\tmbody: {\r\n\t\t\t\t\tfuid: fuid,\r\n\t\t\t\t\turl: m1val\r\n\t\t\t\t}\r\n\t\t\t}, me, function(jdoc) {\r\n\t\t\t\tvar txtpgmx = me.down(\"[name=txtpgmx]\"),\r\n\t\t\t\t\ttval;\r\n\t\t\t\t\r\n\t\t\t\tif (jdoc)\r\n\t\t\t\t{\r\n\t\t\t\t\ttval = JSON.stringify(jdoc, null, 2);\r\n\t\t\t\t\ttval = tval.replace(/&/g, \"&amp;\");\r\n\t\t\t\t\ttxtpgmx.setValue(tval);\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\tkm1/*uploadFile*/: function() {\r\n\t\tvar me = this,\r\n\t\t\tmform = me.down(\"[name=mform]\"),\r\n\t\t\ttxtfilename = me.down(\"[name=txtfilename]\");\r\n\t\t\r\n\t\tif (mform.getForm().isValid())\r\n\t\t{\r\n\t\t\tmform.getForm().submit({\r\n\t\t\t\turl: ig$.servlet,\r\n\t\t\t\twaitMsg: 'Uploading your data file',\r\n\t\t\t\tsuccess: function(fp, o) {\r\n\t\t\t\t\tIG$.alertmsg('Success', 'Processed file on the server', null, me, 0, \"success\");\r\n\t\t\t\t\tvar node = fp.errorReader.jsonData,\r\n\t\t\t\t\t\tuid = node ? node.result.uid : null;\r\n\t\t\t\t\t\r\n\t\t\t\t\tuid && me._l1/*loadURL*/.call(me, uid);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\t\r\n\tinitComponent: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.title = IRm$.r1('L_ML_C7');\r\n\t\t\r\n\t\t$s.apply(this, {\r\n\t\t\tdefaults:{\r\n\t\t\t\tbodyStyle: \"padding:10px\"\r\n\t\t\t},\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\ttype: \"vbox\",\r\n\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdefaults: {\r\n\t\t\t\t\t\tanchor: \"100%\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"fieldset\",\r\n\t\t\t\t\t\t\ttitle: \"Open External Resources\",\r\n\t\t\t\t\t\t\tregion: \"north\",\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\ttype: \"vbox\",\r\n\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"fieldcontainer\",\r\n\t\t\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"hbox\",\r\n\t\t\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfieldLabel: \"Open from URL\",\r\n\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"textfield\",\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"m1\",\r\n\t\t\t\t\t\t\t\t\t\t\tflex: 1\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Load\",\r\n\t\t\t\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis._l1/*loadURL*/();\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"container\",\r\n\t\t\t\t\t\t\t\t\tborder: 0,\r\n\t\t\t\t\t\t\t\t\tlayout: \"fit\",\r\n\t\t\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t  xtype: \"form\",\r\n\t\t\t\t\t\t\t\t\t\t\t  name: \"mform\",\r\n\t\t\t\t\t\t\t\t\t\t\t  fieldLabel: \"File Upload\",\r\n\t\t\t\t\t\t\t\t\t\t\t  flex: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t  layout: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t  type: \"hbox\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t  align: \"stretch\"\r\n\t\t\t\t\t\t\t\t\t\t\t  },\r\n\t\t\t\t\t\t\t\t\t\t\t  items: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"hiddenfield\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"_mts_\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: IG$._g$a\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"fileuploadfield\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"fileupload\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbuttonText: IRm$.r1(\"L_SELECT_FILE\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfieldLabel: \"File\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange: function(tobj, value, eopt) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar fname = \"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdval = \"\\\\\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttxtfilename = me.down(\"[name=txtfilename]\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (value.indexOf(\"/\") > -1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdval = \"/\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = value.split(dval);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (value.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfname = value[value.length - 1];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttxtfilename.setValue(fname);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"hiddenfield\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"txtfilename\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"hiddenfield\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"targetfolder\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: \"upload\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"hiddenfield\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"filenamemode\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: \"blank\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\txtype: \"button\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: IRm$.r1(\"L_UPLOAD\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.km1/*uploadFile*/.call(me);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\txtype: \"panel\",\r\n\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t\t\ttype: \"vbox\",\r\n\t\t\t\t\t\t\t\talign: \"stretch\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\txtype: \"textarea\",\r\n\t\t\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\t\t\tlabelPosition: \"top\",\r\n\t\t\t\t\t\t\t\t\tfieldLabel: \"PGMX Content\",\r\n\t\t\t\t\t\t\t\t\tregion: \"center\",\r\n\t\t\t\t\t\t\t\t\tname: \"txtpgmx\"\r\n\t\t\t\t\t\t\t\t}\t\t\t\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tbuttons:[\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1('B_CONFIRM'),\r\n\t\t\t\t\thandler: function() {\r\n\t\t\t\t\t\tvar me = this,\r\n\t\t\t\t\t\t\tcallback = me.callback,\r\n\t\t\t\t\t\t\ttxtpgmx = me.down(\"[name=txtpgmx]\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcallback && callback.execute(txtpgmx.getValue());\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}, \r\n\t\t\t\t{\r\n\t\t\t\t\ttext: IRm$.r1('B_CANCEL'),\r\n\t\t\t\t\thandler:function() {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\t\r\n\t\tIG$._IB9c/*ml_bayes_pgmx*/.superclass.initComponent.call(this);\r\n\t},\r\n\t\r\n\tlisteners: {\r\n\t\tafterrender: function(tobj) {\r\n\t\t\tvar me = this,\r\n\t\t\t\tmform = me.down(\"[name=mform]\");\r\n\t\t\t\t\r\n\t\t\tmform.getForm().errorReader = new IG$.m2ER();\r\n\t\t\tme.init_f();\r\n\t\t}\r\n\t}\r\n\t\r\n});\t"]}