{"version":3,"sources":["meta_upgrade.js","manual_manager.js"],"names":["IG$","mg_meta","$s","extend","v$pnl","layout","_module","autoScroll","initapp","me","this","d_file_el","down","el","dom","m_fileupload","$","d_upfiles","empty","fileupload","appendTo","dropzone","d_progress","url","ig$","servlet","dataType","done","e","data","tnodes","i","p","rec","jdoc","result","errorcode","errormsg","dp","ShowErrorMessage","length","push","show","store","add","selModel","select","progressall","progress","parseInt","loaded","total","bar","css","text","dropZone","bind","toolbarHandler","cmd","d_doc","flists","items","file_lists","checkRequired","setLoading","$imp_cnts","migrate_import","sel","getSelectionModel","selected","doc_lists","execute_upgrade","splice","req","_rpc$","stoploading","init","ack","payload","module","mbody","option","meta_type","concat","send","status_desc","5","9","10","status","loadData","files","selections","get","initComponent","apply","xtype","padding","type","align","flex","title","html","name","height","bodyPadding","hidden","selType","mode","fields","columns","IRm$","r1","dataIndex","width","iconCls","tooltip","handler","grid","rowIndex","colIndex","getAt","remove","bbar","scope","removeAll","hide","minWidth","tbar","superclass","call","listeners","afterrender","tobj","MgrManual","_init_app","t_note_editor","setTimeout","summernote","body","maxHeight","getHeight","_note_editor","_load_menu","lang","window","useLocale","_lang","tf","mroot","children","setRootNode","getRootNode","expand","_save_menus","root","dt","_upd_menus","childNodes","rnode","each","child","dockey","visible","save_content","cnt","editor","_sel_content","uid","_load_content","note_editor","split","region","enableDragDrop","enableDD","useArrows","ddGroup","parentNode","removeChild","n","insertChild","cellclick","td","cellIndex","record"],"mappings":"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","file":"../../../../../../mg_meta.min.js","sourcesContent":["IG$.mg_meta = $s.extend(IG$.v$pnl, {\n    layout: \"fit\",\n    _module: \"com.amplix.migration.upgrade_v3.MetaMigration\",\n    autoScroll: true,\n    initapp: function() {\n        var me = this,\n            d_file = me.down(\"[name=d_file]\"),\n            d_file_el = d_file.el.dom,\n            m_fileupload = $(\".m_fileupload\", d_file_el),\n            \n            d_upfiles = me.down(\"[name=d_upfiles]\");\n        \n        m_fileupload.empty();\n        \n        fileupload = $(\"<input type='file' name='files[]' data-url='upload' multiple></input>\").appendTo(m_fileupload);\n        dropzone = $(\"<div class='filedropzone fade well'>Drop files here</div>\").appendTo(m_fileupload);\n        d_progress = $(\"<div class='file-progress'><div class='bar' style='width: 0%;'></div></div>\").appendTo(m_fileupload);\n        \n        fileupload.fileupload({\n            url: ig$.servlet,\n            dataType: \"json\",\n            done: function (e, data) {\n                var jdoc = data.result || {errorcode: \"0xffff\", errormsg: \"Server incorrect responding\"},\n                    errcode = jdoc.errorcode,\n                    tnodes,\n                    i, dp = [], p, rec;\n                \n                if (errcode)\n                {\n                    IG$.ShowErrorMessage(jdoc, me, null);\n                }\n                else\n                {\n                    if (jdoc.result)\n                    {\n                        tnodes = jdoc.result.length ? jdoc.result : [jdoc.result];\n                        \n                        for (i=0; i < tnodes.length; i++)\n                        {\n                            p = tnodes[i];\n                            dp.push(p);\n                        }\n                    }\n                }\n                \n                if (dp && dp.length)\n                {\n                    d_upfiles.show();\n                    \n                    for (i=0; i < dp.length; i++)\n                    {\n                        rec = d_upfiles.store.add(dp[i]);\n                        d_upfiles.selModel.select(rec, true);\n                    }\n                }\n            },\n            progressall: function (e, data) {\n                var progress = parseInt(data.loaded / data.total * 100, 10),\n                    bar = $(\".bar\", d_progress);\n                bar.css(\n                    \"width\",\n                    progress + \"%\"\n                );\n                bar.text(\"Loaded \" + data.loaded + \" / \" + data.total);\n            },\n     \n            dropZone: dropzone\n        }).bind('fileuploadsubmit', function (e, data) {\n        });\n        \n        fileupload.fileupload(\"option\", \"url\", ig$.servlet);\n    },\n    \n    toolbarHandler: function(cmd) {\n        var me = this,\n            d_upfiles = me.down(\"[name=d_upfiles]\"),\n\t\t\td_doc = me.down(\"[name=d_doc]\"),\n            i, flists = [];\n        \n        switch (cmd)\n        {\n        case \"cmd_c_files\":\n            for (i=0; i < d_upfiles.store.data.items.length; i++)\n            {\n            \tflists.push(d_upfiles.store.data.items[i]);\n            }\n            \n            me.file_lists = flists;\n            \n            if (!me.checkRequired())\n            \treturn;\n            \n            if (flists.length)\n            {\n                me.setLoading(true);\n\t\t\t\tme.$imp_cnts = [];\n                me.migrate_import();\n            }\n            break;\n\t\tcase \"cmd_c_doc\":\n\t\t\tvar sel = d_doc.getSelectionModel().selected;\n\t\t\t\n            me.doc_lists = flists;\n            \n            if (!me.checkRequired())\n            \treturn;\n            \n            if (sel && sel.length)\n            {\n                me.setLoading(true);\n                me.execute_upgrade();\n            }\n            break;\n        }\n    },\n    \n    checkRequired: function() {\n    \tvar me = this,\n    \t\tr = true;\n        \n        return r;\n    },\n    \n    migrate_import: function() {\n        var me = this,\n            d_upfiles = me.down(\"[name=d_upfiles]\");\n        \n        if (me.file_lists && me.file_lists.length)\n        {\n            var rec = me.file_lists.splice(0, 1)[0],\n                req = new IG$._rpc$();\n            \n            req.stoploading = false;\n            \n            req.init(me, \n                {\n                    ack: \"migration\",\n                    payload: {module: me._module},\n                    mbody: {\n                        option: \"migrate_import\",\n                        items: [rec.data]\n                    },\n                    meta_type: \"object\"\n                }, me, function(jdoc) {\n\t\t\t\t\tvar me = this;\n\t\t\t\t\t\n\t\t\t\t\tme.$imp_cnts = me.$imp_cnts.concat(jdoc);\n                    me.migrate_import();\n                }\n            );\n            \n            req.send();\n        }\n        else\n        {\n            me.setLoading(false);\n\n\t\t\tvar d_doc = me.down(\"[name=d_doc]\"),\n\t\t\t\tstatus_desc = {\n\t\t\t\t\t5: \"Missing\",\n\t\t\t\t\t9: \"Exists\",\n\t\t\t\t\t10: \"Node Exists\"\n\t\t\t\t},\n\t\t\t\ti;\n\t\t\t\t\n\t\t\tfor (i=0; i < me.$imp_cnts.length; i++)\n\t\t\t{\n\t\t\t\tme.$imp_cnts[i].status_desc = status_desc[me.$imp_cnts[i].status];\n\t\t\t}\n\t\t\t\n\t\t\td_doc.store.loadData(me.$imp_cnts);\n        }\n    },\n\n\texecute_upgrade: function() {\n\t\tvar i,\n\t\t\tme = this,\n\t\t\td_doc = me.down(\"[name=d_doc]\"),\n\t\t\td_upfiles = me.down(\"[name=d_upfiles]\"),\n\t\t\tsel = d_doc.getSelectionModel().selected,\n\t\t\trec,\n\t\t\tfiles = [],\n\t\t\tselections = [];\n\t\t\t\n\t\tfor (i=0; i < sel.length; i++)\n        {\n\t\t\trec = sel.items[i];\n         \tselections.push(rec.get(\"uid\"));   \n        }\n\n\t\tfor (i=0; i < d_upfiles.store.data.items.length; i++)\n        {\n            rec = d_upfiles.store.data.items[i];\n            files.push(rec.data);\n        }\n\n\t\tvar rec = me.file_lists.splice(0, 1)[0],\n            req = new IG$._rpc$();\n        \n        req.stoploading = false;\n        \n        req.init(me, \n            {\n                ack: \"migration\",\n                payload: {module: me._module},\n                mbody: {\n                    option: \"execute_migrate\",\n                    files: files,\n\t\t\t\t\tselections: selections\n                },\n                meta_type: \"object\"\n            }, me, function(jdoc) {\n            }\n        );\n        \n        req.send();\n\t},\n\t\n    initComponent: function(){\n        var me = this;\n        \n        $s.apply(me, {\n            items: [\n                {\n                    xtype: \"container\",\n                    padding: 5,\n                    layout: {\n                        type: \"vbox\",\n                        align: \"stretch\"\n                    },\n                    items: [\n                        {\n                            xtype: \"fieldset\",\n                            flex: 1,\n                            layout: {\n                                type: \"vbox\",\n                                align: \"stretch\"\n                            },\n                            title: \"Meta file upload\",\n                            items: [\n                                {\n                                    html: \"<div class='m_fileupload'></div>\",\n                                    name: \"d_file\",\n                                    height: 120,\n                                    bodyPadding: 10\n                                },\n                                {\n                                    name: \"d_upfiles\",\n                                    xtype: \"gridpanel\",\n                                    height: 320,\n                                    hidden: true,\n                                    selType: \"checkboxmodel\",\n                                    selModel:  {\n                                        mode: \"MULTI\"\n                                    },\n                                    store: {\n                                        fields: [\n                                            \"uid\", \"filename\", \"fileext\"\n                                        ]\n                                    },\n                                    columns: [\n                                        {\n                                            text: IRm$.r1(\"L_FILENAME\"),\n                                            dataIndex: \"filename\",\n                                            flex: 1\n                                        },\n                                        {\n                                            text: IRm$.r1(\"L_FILEEXT\"),\n                                            dataIndex: \"fileext\",\n                                            flex: 1\n                                        },\n                                        {\n                                            xtype: 'actioncolumn',\n                                            width: 20,\n                                            items: [\n                                                {\n                                                    iconCls: \"icon-grid-delete\",\n                                                    tooltip: 'Delete item',\n                                                    handler: function (grid, rowIndex, colIndex) {\n                                                        var rec = grid.store.getAt(rowIndex);\n                                                        \n                                                        grid.store.remove(rec);\n                                                    }\n                                                }\n                                            ]\n                                        }\n                                    ],\n                                    bbar: [\n                                        \"->\",\n                                        {\n                                            xtype: \"button\",\n                                            text: \"Load Meta Informations\",\n                                            handler: function() {\n                                                this.toolbarHandler(\"cmd_c_files\");\n                                            },\n                                            scope: this\n                                        },\n                                        {\n                                            xtype: \"button\",\n                                            text: \"Cancel All Files\",\n                                            handler: function() {\n                                                var me = this,\n                                                    d_upfiles = me.down(\"[name=d_upfiles]\");\n                                                    \n                                                d_upfiles.store.removeAll();\n                                                d_upfiles.hide();\n                                                \n                                                me.down(\"[name=d_file]\").hide();\n                                            },\n                                            scope: this\n                                        }\n                                    ]\n                                }\n                            ]\n                        },\n\t\t\t\t\t\t{\n                            xtype: \"fieldset\",\n                            flex: 1,\n                            layout: {\n                                type: \"vbox\",\n                                align: \"stretch\"\n                            },\n                            title: \"Backup Items\",\n                            items: [\n                                {\n                                    name: \"d_doc\",\n                                    xtype: \"gridpanel\",\n                                    height: 500,\n                                    selType: \"checkboxmodel\",\n                                    selModel:  {\n                                        mode: \"MULTI\"\n                                    },\n                                    store: {\n                                        fields: [\n                                            \"name\", \"id\", \"description\"\n                                        ]\n                                    },\n                                    columns: [\n                                        {\n                                            text: IRm$.r1(\"B_NAME\"),\n                                            dataIndex: \"name\",\n\t\t\t\t\t\t\t\t\t\t\tminWidth: 180,\n                                            flex: 1\n                                        },\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Node Path\",\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"nodepath_name\",\n\t\t\t\t\t\t\t\t\t\t\tminWidth: 300,\n\t\t\t\t\t\t\t\t\t\t\tflex: 1\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Status\",\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"status_desc\",\n\t\t\t\t\t\t\t\t\t\t\twidth: 80\n\t\t\t\t\t\t\t\t\t\t},\n                                        {\n                                            text: IRm$.r1(\"B_DESC\"),\n                                            dataIndex: \"description\",\n\t\t\t\t\t\t\t\t\t\t\tminWidth: 100,\n                                            flex: 1\n                                        }\n                                    ],\n                                    tbar: [\n                                        \"->\",\n                                        {\n                                            xtype: \"button\",\n                                            text: \"Migrate Selected Items\",\n                                            handler: function() {\n                                                this.toolbarHandler(\"cmd_c_doc\");\n                                            },\n                                            scope: this\n                                        }\n                                    ]\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        })\n        IG$.mg_meta.superclass.initComponent.call(this);\n    },\n    \n    listeners: {\n        afterrender: function(tobj) {\n            tobj.initapp();\n        }\n    }\n});","IG$.MgrManual = $s.extend(IG$.v$pnl, {\n\tlayout: \"fit\",\n\t\n \t_init_app: function() {\n\t\tvar me = this,\n\t\t\tt_note_editor = me.down(\"[name=t_note_editor]\"),\n\t\t\ttdiv, editordiv;\n\t\t\t\n\t\tsetTimeout(function() {\n\t\t\tvar summernote = $(\"#manual_editor_main\", t_note_editor.body.dom).summernote({\n\t\t\t\tmaxHeight: t_note_editor.getHeight() - 80\n\t\t\t});\n\t\t\t\n\t\t\tme._note_editor = summernote;\n\t\t}, 100);\n\t\t\n\t\tme._load_menu();\n\t},\n\t\n\t_load_menu: function() {\n\t\tvar me = this,\n\t\t\treq = new IG$._rpc$(),\n\t\t\tuse_locale = window.useLocale || \"en_US\",\n\t\t\tlang = \"en\";\n\t\t\t\n\t\tif (use_locale == \"ko_KR\")\n\t\t{\n\t\t\tlang = \"ko\";\n\t\t}\n\t\t\n\t\tme._lang = lang;\n\t\t\t\n\t\treq.init(me, \n\t\t\t{\n\t\t\t\tack: \"manual\",\n\t\t\t\tpayload: {lang: lang},\n\t\t\t\tmbody: {option: \"menu\"}\n\t\t\t}, me, function(jdoc) {\n\t\t\t\tvar tf = me.down(\"[name=menus]\"),\n\t\t\t\t\tmroot = {\n\t\t\t\t\t\tname: \"Root\",\n\t\t\t\t\t\tchildren: jdoc.children || []\n\t\t\t\t\t};\n\t\t\t\t// this._r3/*formatData*/(tval, mroot, \"\");\n\t\t\t\ttf.store.setRootNode(mroot);\n\t\t\t\ttf.store.getRootNode().expand(true);\n\t\t\t}, false);\n\t\treq.send();\t\n\t},\n\t\n\t_save_menus: function() {\n\t\tvar me = this,\n\t\t\ttgrid = me.down(\"[name=menus]\"),\n\t\t\troot = tgrid.getRootNode(),\n\t\t\tdt = {\n\t\t\t\tname: \"root\",\n\t\t\t\tchildren: []\n\t\t\t},\n\t\t\tlang = me._lang,\n\t\t\treq = new IG$._rpc$();\n\t\t\n\t\tme._upd_menus(root.childNodes, dt.children);\n\t\t\n\t\treq.init(me, \n\t\t\t{\n\t\t\t\tack: \"manual\",\n\t\t\t\tpayload: {option: \"save_menu\", lang: lang},\n\t\t\t\tmbody: dt,\n\t\t\t\tmeta_type: \"object\"\n\t\t\t}, me, function(jdoc) {\n\t\t\t}\n\t\t);\n\t\t\n\t\treq.send();\n\t},\n\t\n\t_upd_menus: function(rnode, children) {\n\t\tvar me = this;\n\t\t\n\t\tif (rnode)\n\t\t{\n\t\t\t$.each(rnode, function(i, child) {\n\t\t\t\tvar p = {\n\t\t\t\t\tname: child.get(\"name\"),\n\t\t\t\t\tdockey: child.get(\"dockey\"),\n\t\t\t\t\tvisible: child.get(\"visible\")\n\t\t\t\t};\n\t\t\t\tchildren.push(p);\n\t\t\t\t\n\t\t\t\tif (child.childNodes && child.childNodes.length)\n\t\t\t\t{\n\t\t\t\t\tp.children = [];\n\t\t\t\t\tme._upd_menus(child.childNodes, p.children);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t\n\tsave_content: function() {\n\t\tvar me = this,\n\t\t\teditor = me._note_editor,\n\t\t\tcnt,\n\t\t\treq = new IG$._rpc$(),\n\t\t\tlang = me._lang;\n\t\t\n\t\tif (me._sel_content)\n\t\t{\n\t\t\tcnt = {\n\t\t\t\thtml: editor.summernote(\"code\")\n\t\t\t};\n\t\t\t\n\t\t\treq.init(me, \n\t\t\t\t{\n\t\t\t\t\tack: \"manual\",\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tuid: me._sel_content.get(\"dockey\"),\n\t\t\t\t\t\tlang: lang,\n\t\t\t\t\t\toption: \"save\"\n\t\t\t\t\t},\n\t\t\t\t\tmbody: cnt,\n\t\t\t\t\tmeta_type: \"object\"\n\t\t\t\t}, me, function(jdoc) {\n\t\t\n\t\t\t\t}, null);\n\t\t\treq.send();\n\t\t}\n\t},\n\t\n\t_load_content: function() {\n\t\tvar me = this,\n\t\t\tnote_editor = me._note_editor;\n\t\t\t\n\t\tif (me._sel_content)\n\t\t{\n\t\t\tvar me = this,\n\t\t\t\treq = new IG$._rpc$(),\n\t\t\t\tlang = me._lang;\n\t\t\t\n\t\t\treq.init(me, \n\t\t\t\t{\n\t\t\t\t\tack: \"manual\",\n\t\t\t\t\tpayload: {lang: lang, uid: me._sel_content.get(\"dockey\")},\n\t\t\t\t\tmbody: {option: \"get\"}\n\t\t\t\t}, me, function(jdoc) {\n\t\t\t\t\tif (jdoc.html)\n\t\t\t\t\t{\n\t\t\t\t\t\tnote_editor.summernote(\"code\", jdoc.html);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tnote_editor.summernote(\"code\", \"\");\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\t\t\treq.send();\t\n\t\t}\n\t},\n\t\n\tinitComponent: function() {\n\t\tvar me = this;\n\t\t\n\t\t$s.apply(me, {\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\txtype: \"panel\",\n\t\t\t\t\tlayout: \"border\",\n\t\t\t\t\tsplit: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\txtype: \"panel\",\n\t\t\t\t\t\t\tregion: \"north\",\n\t\t\t\t\t\t\twidth: 350,\n\t\t\t\t\t\t\theight: 420,\n\t\t\t\t\t\t\tlayout: \"fit\",\n\t\t\t\t\t\t\ttitle: \"Menu Structures\",\n\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\txtype: \"treepanel\",\n\t\t\t\t\t\t\t\t\tname: \"menus\",\n\t\t\t\t\t\t\t\t\tenableDragDrop: true,\n\t\t\t\t\t\t\t\t\tenableDD: true,\n\t\t\t\t\t\t\t\t\tuseArrows: true,\n\t\t\t\t\t\t\t\t\tddGroup: \"_I$RD_G_\",\n\t\t\t\t\t\t\t\t\t// hidden: true,\n\t\t\t\t\t\t\t\t\tstore: {\n\t\t\t\t\t\t\t\t\t\txtype: \"treestore\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcolumns: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\txtype: \"treecolumn\",\n\t\t\t\t\t\t\t\t\t\t\ttext: IRm$.r1(\"B_NAME\"),\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"name\",\n\t\t\t\t\t\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t\t\t\t\t\t\teditor: {\n\t\t\t\t\t\t\t\t\t\t\t\txtype: \"textfield\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\txtype: \"gridcolumn\",\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"dockey\",\n\t\t\t\t\t\t\t\t\t\t\ttext: \"KEY\",\t\n\t\t\t\t\t\t\t\t\t\t\teditor: {\n\t\t\t\t\t\t\t\t\t\t\t\txtype: \"textfield\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\txtype: \"checkcolumn\",\n\t\t\t\t\t\t\t\t\t\t\tdataIndex: \"visible\",\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Visible\",\n\t\t\t\t\t\t\t\t\t\t\twidth: 40\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\txtype: \"actioncolumn\",\n\t\t\t\t\t\t\t\t\t\t\twidth: 60,\n\t\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonCls: \"icon-grid-delete\",\n\t\t\t\t\t\t\t\t\t\t\t\t\ttooltip: IRm$.r1(\"L_REMOVE\"),\n\t\t\t\t\t\t\t\t\t\t\t\t\thandler: function(grid, rowIndex, colIndex, rec) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trec.parentNode.removeChild(rec);\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ttbar: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Save\",\n\t\t\t\t\t\t\t\t\t\t\tname: \"btn_save\",\n\t\t\t\t\t\t\t\t\t\t\ticonCls: 'icon-toolbar-save',\n\t\t\t\t\t\t\t\t\t\t\thandler: function() {\n\t\t\t\t\t\t\t\t\t\t\t\tvar me = this;\n\t\t\t\t\t\t\t\t\t\t\t\tme._save_menus();\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Add\",\n\t\t\t\t\t\t\t\t\t\t\thandler: function() {\n\t\t\t\t\t\t\t\t\t\t\t\tvar me = this,\n\t\t\t\t\t\t\t\t\t\t\t\t\ttgrid = me.down(\"[name=menus]\"),\n\t\t\t\t\t\t\t\t\t\t\t\t\tsel = tgrid.getSelectionModel().selected,\n\t\t\t\t\t\t\t\t\t\t\t\t\trec,\n\t\t\t\t\t\t\t\t\t\t\t\t\tn = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\tif (sel && sel.length)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\trec = sel.items[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (rec.childNodes && rec.childNodes.length)\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tn = rec.childNodes.length;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\trec.insertChild(n, {});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\t\tcellclick: function(tobj, td, cellIndex, record, rowIndex, e) {\n\t\t\t\t\t\t\t\t\t\t\tvar me = this;\n\t\t\t\t\t\t\t\t\t\t\tif (cellIndex == 0 && record.childNodes && record.childNodes.length)\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\trecord.expand(true);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tme._sel_content = record;\n\t\t\t\t\t\t\t\t\t\t\tme._load_content();\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\txtype: \"panel\",\n\t\t\t\t\t\t\tregion: \"center\",\n\t\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t\t\ttitle: \"Manual Content Editor\",\n\t\t\t\t\t\t\tlayout: \"fit\",\n\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"t_note_editor\",\n\t\t\t\t\t\t\t\t\thtml: \"<div id='manual_editor_main'></div>\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\ttbar: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: \"Save\",\n\t\t\t\t\t\t\t\t\thandler: function() {\n\t\t\t\t\t\t\t\t\t\tthis.save_content();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: \"Refresh\",\n\t\t\t\t\t\t\t\t\thandler: function() {\n\t\t\t\t\t\t\t\t\t\tif (me._sel_content)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tthis._load_content();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t\tIG$.MgrManual.superclass.initComponent.call(this);\n\t},\n\tlisteners: {\n\t\tafterrender: function() {\n\t\t\tvar me = this;\n\t\t\tme._init_app();\n\t\t}\n\t}\n});\n"]}