{"version":3,"sources":["bubble.js","qavis.js","bulletchart.js"],"names":["m$B2","indicator","value","me","this","ind","rowdata","ellipses","label","$","html","container","append","paper","Raphael","invalidate","validateData","call","m$Bl","parent","mv","colorset","initVariables","prototype","i","ellipse","length","remove","text","name","color","push","validateDisplay","clearTimeout","setTimeout","updateDisplay","vgap","mradius","mwall","mvalue","tradius","tsum","ex","ey","er","w","IG$","j$ext","_w","h","_h","vmax","mcalc","max","vmin","min","clear","setSize","Math","sqrt","x","y","radius","hue","circle","set","attr","fill","stroke","opacity","animate","rx","ry","css","top","height","left","mx","bubbles","appendTo","initControl","loadData","dp","j","ncol","sname","nvalue","msum","be","ea","ma","Number","validateControl","bubble","lw","lh","lx","position","m$CompMatrix","xField","xFieldName","yField","yFieldName","compVal","dataSet","toString","compMatrixPlotCell","o","browser","window","bowser","hasSVG","SVGAngle","document","implementation","hasFeature","hasCanvas","msie","compItem","xMin","xMax","yMin","yMax","xRange","yRange","cr1","cr2","selected","width","canvas","updateExtremes","MAX_VALUE","MIN_VALUE","computeX","xFieldValue","computeY","yFieldValue","updatePlot","plotPointX","plotPointY","plotData","drawPlot","innerWidth","innerHeight","dcache","ctx","getContext","scale","fillStyle","fillRect","strokeStyle","lineWidth","key","cx","isNaN","cy","tx","floor","ty","beginPath","arc","PI","closePath","obj","mbody","updateDispList","commitProps","ComparisonMatrix","config","detailviewer","labelhtml","compItems","cells","textFields","showLabels","isDirty","margin","padding","backgroundColor","borderColor","display","bind","fadeOut","detailcontainer","right","bottom","uid","closebtn","click","correlationCoefficient","collection","len","xTotal","yTotal","xSquaredTotal","ySquaredTotal","xYTotal","xValue","yValue","pow","comparisonFunction","generateComparisonStatistics","fields","a","b","item","createOrRemoveCells","cid","ncells","matrixitems","cellToAdd","border","id","each","drawDetailPlot","pop","updateTextFields","textFieldToAdd","fontSize","innerText","textFieldToRemove","layoutTextFields","startY","textField","px","py","actualCellSize","layoutCells","firstTextField","index","cell","selectedItem","tt","toolTip","cellX","cellY","computeCellSize","availableWidthForCells","availableHeightForCells","p","commitProp","matrixowner","plotoption","matrix","Highcharts","chart","renderTo","defaultSeriesType","zoomType","title","xAxis","enabled","startOnTick","endOnTick","showLastLabel","yAxis","tooltip","formatter","legend","layout","align","verticalAlign","floating","borderWidth","plotOptions","scatter","marker","states","hover","lineColor","series","data","echart_theme","type","symbolSize","pw","ph","vs","show","plotdetail","Chart","echarts","init","ig$","echarts_theme","renderer","setOption","randomize","d","randomizer","ranges","map","markers","measures","k","d3","random","bulletRanges","bulletMarkers","bulletMeasures","bulletTranslate","bulletWidth","x0","abs","c$BulChart","owner","bb","initialize","tp","vctrl","c$BullChartV","gtp","mresult","dt","vparent","vis","select","selectAll","getData","enter","subtitle","duration","drawChart","datum","row","val","mmax","mmin","memin","memax","r","_tabledata","fc","colfix","fr","rowfix","tc","measurecol","markercol","code","mrange","orient","reverse","tickFormat","bullet","g","rangez","slice","sort","descending","markerz","measurez","x1","linear","domain","range","__chart__","Infinity","w0","w1","transition","measure","format","tick","ticks","textContent","tickEnter","style","tickUpdate","exit","timer","flush","arguments"],"mappings":"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","file":"../../../../../../igco.min.js","sourcesContent":["function m$B2/*bubbleElement*/(indicator, value) {\r\n    var me = this;\r\n    me.ind = indicator;\r\n    me.rowdata = value;\r\n    me.ellipses = [];\r\n    me.label = $(\"<div class='bblabel'></div>\");\r\n    me.html = $(\"<div class='bbbox'></div>\");\r\n    \r\n    me.ind.container.append(me.html);\r\n    me.paper = new Raphael(me.html[0]);\r\n    me.html.append(me.label);\r\n    me.invalidate = -1;\r\n    me.validateData.call(me);\r\n    \r\n    // IG$.tooltip(me.html, \"\");\r\n}\r\n\r\nm$B2/*bubbleElement*/.prototype = {\r\n    validateData: function() {\r\n        var me = this,\r\n            i,\r\n            ellipses = me.ellipses,\r\n            colorset = me.ind.colorset,\r\n            rowdata = me.rowdata,\r\n            ellipse;\r\n        \r\n        for (i=0; i < ellipses.length; i++)\r\n        {\r\n            ellipses[i].html.remove();\r\n        }\r\n        ellipses = [];\r\n        \r\n        me.label.text(rowdata.name);\r\n        \r\n        for (i=0; i < rowdata.value.length; i++)\r\n        {\r\n            ellipse = {};\r\n            ellipse.color = colorset[i % colorset.length];\r\n            ellipses.push(ellipse);\r\n        }\r\n        \r\n        me.ellipses = ellipses;\r\n        \r\n        me.validateDisplay();\r\n    },\r\n    \r\n    validateDisplay: function() {\r\n        var me = this;\r\n        if (me.invalidate > -1)\r\n        {\r\n            clearTimeout(me.invalidate);\r\n        }\r\n        setTimeout(function() {\r\n            me.updateDisplay.call(me);\r\n        }, 100);\r\n    },\r\n    \r\n    updateDisplay: function() {\r\n        var me = this,\r\n            ind = me.ind,\r\n            html = me.html,\r\n            w = IG$.j$ext._w(html),\r\n            h = IG$.j$ext._h(html),\r\n            rowdata = me.rowdata,\r\n            ellipses = me.ellipses,\r\n            ellipse,\r\n            vmax = ind.mcalc.max,\r\n            vmin = (ind.mv == null ? ind.mcalc.min : (ind.mv > ind.mcalc.min ? ind.mv : ind.mcalc.min)),\r\n            vgap, mradius, mwall, mvalue, tradius, tsum, i, paper,\r\n            ex, ey, er,\r\n            label = me.label;\r\n        \r\n        if (w > 0 && h > 0)\r\n        {\r\n            paper = me.paper;\r\n            paper.clear();\r\n            paper.setSize(w, h);\r\n            \r\n            if (ellipses && ellipses.length > 0)\r\n            {\r\n                mwall = Math.min(w, h);\r\n\r\n                vgap = (vmax == vmin) ? vmax : vmax - vmin;\r\n\r\n                for (i=0; i < ellipses.length; i++)\r\n                {\r\n                    tsum = (i == 0 ? rowdata.value[i] : tsum + rowdata.value[i]);\r\n                }\r\n\r\n                tradius = (tsum - vmin) / vgap * (mwall * .8) + mwall * .1;\r\n\r\n                for (i=0; i < ellipses.length; i++)\r\n                {\r\n                    mvalue = (i == 0 ? rowdata.value[i] : mvalue + rowdata.value[i]);\r\n                    mradius = Math.sqrt(tradius * tradius * mvalue / tsum);\r\n                    ellipse = ellipses[i];\r\n                    ellipse.x = w/2;\r\n                    ellipse.y = h/2;\r\n                    ellipse.radius = mradius/2;\r\n                }\r\n                \r\n                for (i=ellipses.length - 1; i>=0; i--)\r\n                {\r\n                    ellipse = ellipses[i];\r\n                    ex = ellipse.x;\r\n                    ey = ellipse.y;\r\n                    er = ellipse.radius;\r\n                    hue = ellipse.color;\r\n                    ellipse.circle = paper.set(\r\n                        paper.ellipse(ex, ey + er - er / 5, 0, 0)\r\n                            .attr({\r\n                                fill: \"rhsb(\" + hue + \", 1, .25)-hsb(\" + hue + \", 1, .25)\", stroke: \"none\", opacity: 0\r\n                            }).animate({rx: er, ry: er / 2}, 400, \"<\"),\r\n                        paper.ellipse(ex, ey, 0, 0)\r\n                            .attr({\r\n                                fill: \"r(.5,.9)hsb(\" + hue + \", 1, .75)-hsb(\" + hue + \", .5, .25)\", stroke: \"none\"\r\n                            }).animate({rx: er, ry: er}, 400, \"<\"),\r\n                        paper.ellipse(ex, ey, 0, 0)\r\n                            .attr({\r\n                                stroke: \"none\", fill: \"r(.5,.1)#ccc-#ccc\", opacity: 0\r\n                            }).animate({rx: er - er / 5, ry: er - er / 20}, 400, \"<\")\r\n                    );\r\n                }\r\n            }\r\n            \r\n            me.label.css({top: (h - label.height() - 4), left: (w - IG$.j$ext._w(me.label)) / 2});\r\n        }\r\n    }\r\n};\r\n\r\nfunction m$Bl/*bubbleIndicator*/(parent) {\r\n    this.parent = parent;\r\n    this.mv = null;\r\n    this.colorset = [\r\n        0.23, 0.4, 0.3\r\n    ];\r\n    this.initVariables();\r\n}\r\n\r\nm$Bl/*bubbleIndicator*/.prototype = {\r\n    initVariables: function() {\r\n        var me = this;\r\n        me.ex = [];\r\n        me.mx = [];\r\n        me.bubbles = [];\r\n        me.mcalc = {};\r\n        me.container = $(\"<div class='bbmain'></div>\").appendTo(me.parent);\r\n    },\r\n    \r\n    initControl: function() {\r\n        var me = this,\r\n            i,\r\n            bubbles = me.bubbles;\r\n        for (i=0; i < bubbles.length; i++)\r\n        {\r\n            bubbles[i].html.remove();\r\n        }\r\n        bubbles = [];\r\n    },\r\n    \r\n    loadData: function(dp) {\r\n        var me = this,\r\n            ea = me.ea,\r\n            ma = me.ma,\r\n            i, j, ncol,\r\n            dpname,\r\n            sname, nvalue,\r\n            value, msum,\r\n            mcalc = me.mcalc,\r\n            bvalue,\r\n            be;\r\n        \r\n        if (dp && dp.length > 0 && ea && ea.length > 0 && ma && ma.length > 0)\r\n        {\r\n            // initialize\r\n            for (i=0; i < ma.length; i++)\r\n            {\r\n                ma[i].max = 0;\r\n                ma[i].min = 0;\r\n            }\r\n            for (i=0; i < dp.length; i++)\r\n            {\r\n                dpname = \"col_\" & i;\r\n                sname = \"\";\r\n                value = []; \r\n                for (j=0; j < ea.length; j++)\r\n                {\r\n                    ncol = ea[j].i;\r\n                    sname = (j == 0 ? dp[i][ncol] : sname + \" \" + dp[i][ncol]);\r\n                }\r\n                for (j=0; j < ma.length; j++)\r\n                {\r\n                    ncol = ma[j].i;\r\n                    nvalue = Number(dp[i][ncol]);\r\n\r\n                    if (i == 0)\r\n                    {\r\n                        ma[j].min = nvalue;\r\n                        ma[j].max = nvalue;\r\n                    }\r\n                    else\r\n                    {\r\n                        ma[j].min = Math.min(ma[j].min, nvalue);\r\n                        ma[j].max = Math.max(ma[j].max, nvalue);\r\n                    }\r\n\r\n                    msum = (j == 0 ? nvalue : msum + nvalue);\r\n\r\n                    value.push(nvalue);\r\n                }\r\n                \r\n                if (i == 0)\r\n                {\r\n                    mcalc.min = msum;\r\n                    mcalc.max = msum;\r\n                }\r\n                else\r\n                {\r\n                    mcalc.min = Math.min(mcalc.min, msum);\r\n                    mcalc.max = Math.max(mcalc.max, msum);\r\n                }\r\n                \r\n                bvalue = {name: sname, value: value};\r\n                be = new m$B2/*bubbleElement*/(me, bvalue);\r\n                me.bubbles.push(be);\r\n                // me..append(be.html);\r\n            }\r\n            \r\n            me.validateControl();\r\n        }\r\n    },\r\n    \r\n    validateControl: function() {\r\n        var me = this,\r\n            parent = $(me.parent),\r\n            w = IG$.j$ext._w(parent),\r\n            h = IG$.j$ext._h(parent),\r\n            bubbles = me.bubbles,\r\n            bubble,\r\n            i, lw, lh, lx;\r\n        \r\n        if (w > 0 && h > 0 && bubbles && bubbles.length > 0)\r\n        {\r\n            lx = 0;\r\n            lw = w / bubbles.length;\r\n            lh = h;\r\n            for (i=0; i < bubbles.length; i++)\r\n            {\r\n                bubble = bubbles[i];\r\n                bubble.html.css({left: lx, top: 0, position: 'absolute'});\r\n                IG$.j$ext._w(bubble.html, lw);\r\n                IG$.j$ext._h(bubble.html, lh);\r\n                bubble.validateDisplay.call(bubble);\r\n                lx += lw;\r\n            }\r\n        }\r\n    }\r\n};","IG$.m$CompMatrix = function()\r\n{\r\n\tvar me = this;\r\n\t\r\n\t/**\r\n\t * One attribute of the data set captured by this ComparisonItem.\r\n\t */\r\n\tme.xField = null;\r\n\tme.xFieldName = null;\r\n\t\r\n\t/**\r\n\t * The other attribute of the data set captured by this ComparisonItem.\r\n\t */\r\n\tme.yField = null;\r\n\tme.yFieldName = null;\r\n\t\r\n\t/**\r\n\t * The numerical relationship between the xField and the yField. When used in the\r\n\t * default implementation of the ComparisonMatrix, this value is the correlation\r\n\t * coefficent.\r\n\t */\r\n\tme.compVal;\r\n\t\r\n\t/**\r\n\t * The dataProvider of the ComparisonMatrix that created this ComparisonItem.\r\n\t */\r\n\tme.dataSet = null;\r\n\t\r\n\tme.toString = function()\r\n\t{\r\n\t\treturn me.xFieldName + \", \" + me.yFieldName + \" : \" + me.compVal;\r\n\t}\r\n}\r\n\r\nIG$.compMatrixPlotCell = function()\r\n{\r\n\tvar me = this,\r\n\t\ti,\r\n\t\to,\r\n\t\tbrowser = window.bowser,\r\n\t\thasSVG = (window && window.SVGAngle) || document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\");\r\n\t\t\r\n\tme.hasCanvas = (!hasSVG && !browser.msie) ? true : false;\r\n\t\r\n\tme.compItem;\r\n\tme.xMin;\r\n\tme.xMax;\r\n\tme.yMin;\r\n\tme.yMax;\r\n\tme.xRange;\r\n\tme.yRange;\r\n\t\r\n\tme.cr1 = 0;\r\n\tme.cr2 = 0;\r\n\t\r\n\tme.selected;\r\n\t\r\n\tme.width;\r\n\tme.height;\r\n\t\r\n\tme.html = $('<div class=\"matrixchart\"></div>');\r\n\t\r\n\tif (me.hasCanvas == true)\r\n\t{\r\n\t\tme.canvas = $('<canvas></canvas>');\r\n\t\tme.canvas.appendTo(me.html);\r\n\t}\r\n\t\r\n\tme.updateExtremes = function()\r\n\t{\r\n\t\tif(me.compItem && me.compItem.dataSet)\r\n\t\t{\r\n\t\t\tme.xMin = Number.MAX_VALUE;\r\n\t\t\tme.yMin = Number.MAX_VALUE;\r\n\t\t\tme.xMax = Number.MIN_VALUE;\r\n\t\t\tme.yMax = Number.MIN_VALUE;\r\n\t\t\tfor (i=0; i < me.compItem.dataSet.length; i++)\r\n\t\t\t{\r\n\t\t\t\to = me.compItem.dataSet[i];\r\n\t\t\t\t\r\n\t\t\t\tme.xMin = Math.min(me.xMin,o[me.compItem.xField]);\r\n\t\t\t\tme.yMin = Math.min(me.yMin,o[me.compItem.yField]);\r\n\t\t\t\tme.xMax = Math.max(me.xMax,o[me.compItem.xField]);\r\n\t\t\t\tme.yMax = Math.max(me.yMax,o[me.compItem.yField]);\r\n\t\t\t}\r\n\t\t\tme.xRange = me.xMax - me.xMin;\r\n\t\t\tme.yRange = me.yMax - me.yMin;\r\n\t\t}\r\n\t}\r\n\t\r\n\tme.computeX = function(o) {\r\n\t\tvar xFieldValue = o[me.compItem.xField],\r\n\t\t\txPercent = 1 - (me.xMax - xFieldValue) / me.xRange;\r\n\t\treturn xPercent;\r\n\t}\r\n\t\r\n\tme.computeY = function(o) {\r\n\t\tvar yFieldValue = o[me.compItem.yField],\r\n\t\t\tyPercent = 1 - (me.yMax - yFieldValue) / me.yRange;\r\n\t\treturn yPercent;\r\n\t}\r\n\t\r\n\tme.updatePlot = function() {\r\n\t\tvar i,\r\n\t\t\to,\r\n\t\t\tplotPointX,\r\n\t\t\tplotPointY;\r\n\t\t\r\n\t\tme.plotData = [];\r\n\t\t\r\n\t\tfor (i=0; i < me.compItem.dataSet.length; i++)\r\n\t\t{\r\n\t\t\to = me.compItem.dataSet[i];\r\n\t\t\tplotPointX = me.computeX(o);\r\n\t\t\tplotPointY = me.computeY(o);\r\n\r\n\t\t\tme.plotData.push([plotPointX, plotPointY]);\r\n\t\t}\r\n\t\t\r\n\t\tme.drawPlot();\r\n\t}\r\n\t\r\n\tme.drawPlot = function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.width = me.html.innerWidth();\r\n\t\tme.height = me.html.innerHeight();\r\n\t\t\r\n\t\tvar gap = 3,\r\n\t\t\tcolor,\r\n\t\t\tdcache = {};\r\n\t\t\t\r\n\t\tcolor = me.compItem.compVal > me.cr2 ? \"rgba(0,0,255,\" : \r\n\t\t\t\tme.compItem.compVal > me.cr1 ? \"rgba(150,150,150,\" :\r\n\t\t\t\t\"rgba(255,0,0,\";\r\n\t\t\r\n\t\tif (me.hasCanvas == true)\r\n\t\t{\r\n\t\t\tme.canvas.width = me.width;\r\n\t\t\tme.canvas.height = me.height;\r\n\t\t\t\r\n\t\t\tme.ctx = me.canvas[0].getContext('2d');\r\n\t\t\tme.ctx.scale(1, 1);\r\n\t\t\tme.ctx.fillStyle = \"rgb(255,255,255)\";\r\n\t\t\tme.ctx.fillRect (0, 0, me.width, me.height);\r\n\t\t\tme.ctx.strokeStyle = \"#5F5F5F\";\r\n\t\t\tme.ctx.lineWidth = 1;\r\n\t\t\t\r\n\t\t\tme.ctx.fillStyle = color + '.5)';\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif (!me.paper)\r\n\t\t\t{\r\n\t\t\t\tme.paper = Raphael(me.html[0], 0, 0, me.width, me.height);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tme.paper.clear();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (i=0; i < me.plotData.length; i++)\r\n\t\t{\r\n\t\t\tvar o = me.plotData[i],\r\n\t\t\t\tcx = (isNaN(o[0]) == false ? o[0] * me.width : 0),\r\n\t\t\t\tcy = (isNaN(o[1]) == false ? (1-o[1]) * me.height : me.height),\r\n\t\t\t\ttx = Math.floor(cx),\r\n\t\t\t\tty = Math.floor(cy),\r\n\t\t\t\tkey,\r\n\t\t\t\tradius = 2;\r\n\t\t\t\r\n\t\t\ttx = tx - tx % 5;\r\n\t\t\tty = ty - ty % 5;\r\n\t\t\t\r\n\t\t\tkey = '' + tx + ',' + ty;\r\n\t\t\t\r\n\t\t\tif (!dcache[key])\r\n\t\t\t{\r\n\t\t\t\tif (me.hasCanvas == true)\r\n\t\t\t\t{\r\n\t\t\t\t\tme.ctx.beginPath();\r\n\t\t\t\t\tme.ctx.arc(cx, cy, 1, 0, Math.PI*2, true);\r\n\t\t\t\t\tme.ctx.closePath();\r\n\t\t\t\t\tme.ctx.fill();\r\n\t\t\t\t\tdcache[key] = {obj: true, mbody: 0};\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tdcache[key] = {obj: me.paper.circle(cx, cy, radius), mbody: 0};\r\n\t\t\t\t\tdcache[key].obj.attr(\"fill\", color + '0.5)');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tdcache = null;\r\n\t}\r\n\t\r\n\tme.updateDispList = function(w, h) {\r\n\t\tme.drawPlot();\r\n\t}\r\n\r\n\tme.commitProps = function() {\r\n\t\tme.updateExtremes();\r\n\t\tme.updatePlot();\r\n\t}\r\n}\r\n\r\nIG$.ComparisonMatrix = function(parent, config)\r\n{\r\n\tvar me = this,\r\n\t\tdetailviewer,\r\n\t\tlabelhtml;\r\n\t\r\n\tme.compItems = null;\r\n\tme.cells = [];\r\n\tme.parent = parent;\r\n\tme.config = config;\r\n\tme.textFields = [];\r\n\tme.showLabels = config.showLabels || true;\r\n\t\r\n\tme.cr1 = (config.cr1 == null || typeof config.cr1 == 'undefined') ? 0 : config.cr1;\r\n\tme.cr2 = (config.cr2 == null || typeof config.cr2 == 'undefined') ? 0 : config.cr2;\r\n\t\r\n\tme.container = $('<div class=\"matrixcontainer\"></div>');\r\n\tme.container.appendTo(me.parent);\r\n\t\r\n\tlabelhtml = me.labelhtml = $('<div class=\"matrixlabel\"></div>');\r\n\tlabelhtml.css({position: 'absolute', top: '0px', left: '0px', width: '0px', height: '0px'});\r\n\tlabelhtml.appendTo(me.parent);\r\n\tme.isDirty = false;\r\n\t\r\n\tdetailviewer = me.detailviewer = $('<div class=\"detailviewer\"></div>');\r\n\tdetailviewer.css({\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 10,\r\n\t\t\tleft: 10,\r\n\t\t\twidth: 100,\r\n\t\t\theight: 100,\r\n\t\t\tmargin: 0,\r\n\t\t\tpadding: 0,\r\n\t\t\tbackgroundColor: '#ececec',\r\n\t\t\tborderColor: '#222222',\r\n\t\t\tdisplay: 'none'\r\n\t\t}\r\n\t);\r\n\tdetailviewer.appendTo(me.parent);\r\n\tdetailviewer.bind('click', function() {\r\n\t\t$(this).fadeOut();\r\n\t});\r\n\t\r\n\tme.detailcontainer = $('<div class=\"detailmatrixplot\"></div>');\r\n\tme.detailcontainer.css({\r\n\t\t\tposition: 'absolute',\r\n\t\t\tmargin: '20 0 0 0',\r\n\t\t\tpadding: 0,\r\n\t\t\ttop: 0, left: 0, right: 0, bottom: 0\r\n\t\t}\r\n\t);\r\n\t\r\n\tme.uid = 0;\r\n\t\r\n\tme.detailcontainer.appendTo(detailviewer);\r\n\t\r\n\tvar closebtn = $('<div class=\"detailmatrixclosebtn\"></div>');\r\n\r\n\tclosebtn.css({\r\n\t\tposition: 'absolute',\r\n\t\ttop: 2, width: 16, height: 16, right: 2\r\n\t});\r\n\tdetailviewer.append(closebtn);\r\n\tclosebtn.bind({\r\n\t\tclick: function() {\r\n\t\t\tdetailviewer.fadeOut();\r\n\t\t}\r\n\t});\r\n\t\r\n\t/**\r\n\t * Evaluates the correlation coefficent between the xField and yField properties\r\n\t * on the Objects in the collection.\r\n\t */\r\n\tme.correlationCoefficient = function(collection, xField, yField)\r\n\t{\r\n\t\tvar len = collection.length,\r\n\t\t\txTotal = 0,\r\n\t\t\tyTotal = 0,\r\n\t\t\txSquaredTotal = 0,\r\n\t\t\tySquaredTotal = 0,\r\n\t\t\txYTotal = 0,\r\n\t\t\to,\r\n\t\t\ti;\r\n\t\t\t\r\n\t\tfor (i=0; i < collection.length; i++)\r\n\t\t{\r\n\t\t\to = collection[i];\r\n\t\t\tvar xValue = o[xField];\r\n\t\t\tvar yValue = o[yField];\r\n\t\t\txTotal += xValue;\r\n\t\t\tyTotal += yValue;\r\n\t\t\txSquaredTotal += Math.pow(xValue,2);\r\n\t\t\tySquaredTotal += Math.pow(yValue,2);\r\n\t\t\txYTotal += xValue * yValue;\r\n\t\t}\r\n\t\tvar top = (len * xYTotal) - (xTotal * yTotal);\r\n\t\tvar bottomLeft = Math.sqrt( (len * xSquaredTotal) - Math.pow(xTotal,2) );\r\n\t\tvar bottomRight = Math.sqrt( (len * ySquaredTotal) - Math.pow(yTotal,2) );\r\n\t\treturn top/(bottomLeft * bottomRight);\r\n\t}\r\n\t\r\n\tme.comparisonFunction = me.correlationCoefficient;\r\n\r\n\t/**\r\n\t * Evaluate the relationship between each pair of attributes in the fields Array\r\n\t * using the comparisonFunction. \r\n\t */\r\n\tme.generateComparisonStatistics = function()\r\n\t{\r\n\t\tme.compItems = [];\r\n\t\t\r\n\t\tif(me.fields.length == 0 || me.dataSet == null || me.dataSet.length == 0)\r\n\t\t\treturn;\r\n\t\t\r\n\t\tvar len = me.fields.length;\r\n\t\tvar index = 0;\r\n\t\tfor (var a = 0; a < len; a++)\r\n\t\t{\r\n\t\t\tfor (var b = 0; b < a + 1;  b++)\r\n\t\t\t{\r\n\t\t\t\tif(a != b)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar item = new IG$.m$CompMatrix();\r\n\t\t\t\t\titem.xFieldName = me.fields[a];\r\n\t\t\t\t\titem.xField = a;\r\n\t\t\t\t\titem.yFieldName = me.fields[b];\r\n\t\t\t\t\titem.yField = b;\r\n\t\t\t\t\titem.compVal = me.comparisonFunction.call(me, me.dataSet, item.xField, item.yField);\r\n\t\t\t\t\tme.compItems.push(item);\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tme.createOrRemoveCells = function() {\r\n\t\tvar me = this,\r\n\t\t\tlen = me.compItems.length, cid,\r\n\t\t\tncells = [];\r\n\t\t\r\n\t\tme.matrixitems = {};\r\n\t\t\r\n\t\twhile(me.cells.length < len)\r\n\t\t{\r\n\t\t\tvar cellToAdd = new IG$.compMatrixPlotCell();\r\n\t\t\tcellToAdd.html.css({border: '1px solid #a5a5a5', width: 200, height: 200, position: 'absolute', padding: 0});\r\n\t\t\t// cellToAdd.addEventListener(MouseEvent.CLICK, handleCellClick, false, 0, true);\r\n\t\t\tcellToAdd.html.appendTo(me.container);\r\n\t\t\tcid = 'matrixplot' + me.uid;\r\n\t\t\tcellToAdd.html[0].id = cid;\r\n\t\t\tcellToAdd.id = cid;\r\n\t\t\tme.uid++;\r\n\t\t\t\r\n\t\t\tncells.push(cellToAdd);\r\n\t\t\tme.cells.push(cellToAdd);\r\n\t\t\tme.matrixitems[cid] = cellToAdd;\r\n\t\t}\r\n\t\t\r\n\t\t$.each(ncells, function(i, cellToAdd) {\r\n\t\t\tcellToAdd.html.bind({\r\n\t\t\t\tclick: function() {\r\n\t\t\t\t\tme.drawDetailPlot.call(me, cellToAdd);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\twhile(len < me.cells.length)\r\n\t\t{\r\n\t\t\tvar cellToRemove = me.cells.pop();\r\n\t\t\tcellToRemove.remove();\r\n\t\t}\r\n\t}\r\n\t\r\n\tme.updateTextFields = function() {\r\n\t\tvar me = this,\r\n\t\t\tlen = me.fields.length,\r\n\t\t\ta,\r\n\t\t\ttextField,\r\n\t\t\ttextFieldToAdd;\r\n\t\t\r\n\t\tfor(a = 0; a < len; a++)\r\n\t\t{\r\n\t\t\tif(me.textFields.length < a + 1)\r\n\t\t\t{\r\n\t\t\t\ttextFieldToAdd = $('<div class=\"matrixtextfield\"></div>');\r\n\t\t\t\ttextFieldToAdd.css({fontSize: '0.8em', padding: '0 0 0 3', margin: 0, position: 'absolute', width: 130});\r\n\t\t\t\tme.textFields.push(textFieldToAdd);\r\n\t\t\t\ttextFieldToAdd.appendTo(me.labelhtml);\r\n\t\t\t}\r\n\t\t\ttextField = me.textFields[a];\r\n\t\t\ttextField[0].innerText = me.fields[a];\r\n\t\t\t\r\n\t\t\t// var metrics:TextLineMetrics = textField.getLineMetrics(0);\r\n\t\t\t// textField.width = metrics.width + 4;\r\n\t\t\t// textField.height = metrics.height + 2;\r\n\t\t}\r\n\t\twhile(len < me.textFields.length)\r\n\t\t{\r\n\t\t\tvar textFieldToRemove = textFields.pop();\r\n\t\t\tme.textFieldToRemove.remove();\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Position the textFields along the edges of the matrix.\r\n\t */\r\n\tme.layoutTextFields = function() {\r\n\t\tvar me = this,\r\n\t\t\tlen = me.textFields.length,\r\n\t\t\tfirstTextField,\r\n\t\t\tstartY,\r\n\t\t\ta,\r\n\t\t\ttextField,\r\n\t\t\tpx,\r\n\t\t\tpy;\r\n\t\tif(len > 0)\r\n\t\t{\r\n\t\t\tfirstTextField = me.textFields[0];\r\n\t\t\tstartY = firstTextField.height();\r\n\t\t\t\r\n\t\t\tfor(a = 0; a < len; a++)\r\n\t\t\t{\r\n\t\t\t\ttextField = me.textFields[a];\r\n\t\t\t\tpx = a * me.actualCellSize + 1;\r\n\t\t\t\tif(a == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tpy = 0;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tpy = (a - 1) * me.actualCellSize + startY;\r\n\t\t\t\t}\r\n\t\t\t\ttextField.css({left: px, top: py}); \r\n\t\t\t\t// textField.visible = true;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Arrange the cells in a stair-step fashion.\r\n\t */\r\n\tme.layoutCells = function()\r\n\t{\r\n\t\tvar me = this,\r\n\t\t\tstartY = 0;\r\n\t\tif(me.showLabels && me.textFields.length > 0)\r\n\t\t{\r\n\t\t\tvar firstTextField = me.textFields[0];\r\n\t\t\tstartY = firstTextField.position().top + firstTextField.height();\r\n\t\t}\r\n\t\t\r\n\t\tvar len = me.fields.length;\r\n\t\tvar index = 0;\r\n\t\tfor(var a = 0; a < len; a++)\r\n\t\t{\r\n\t\t\tfor(var b = 0; b < a + 1;  b++)\r\n\t\t\t{\r\n\t\t\t\tif(a != b)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar item = me.compItems[index];\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar cell = me.cells[index];\r\n\t\t\t\t\titem.dataSet = me.dataSet;\r\n\t\t\t\t\tcell.compItem = item;\r\n\t\t\t\t\tcell.selected = (item == me.selectedItem);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// toolTip isn't a part of IUIComponent, interesting, eh?\r\n\t\t\t\t\tvar tt = \"\";\r\n\t\t\t\t\ttt = item.xField + \"\\n\" + item.yField + \"\\n\" + item.compVal;\r\n\t\t\t\t\tcell.toolTip = tt;\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar cellX = b * me.actualCellSize;\r\n\t\t\t\t\tvar cellY = (a - 1) * me.actualCellSize + startY;\r\n\t\t\t\t\tcell.html.css({left: cellX, top: cellY, width: me.actualCellSize, height: me.actualCellSize});\r\n\t\t\t\t\t\r\n\t\t\t\t\tcell.cr1 = me.cr1;\r\n\t\t\t\t\tcell.cr2 = me.cr2;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (me.isDirty == true)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcell.commitProps.call(cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcell.updateDispList.call(cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t \r\n\tme.computeCellSize = function(width, height)\r\n\t{\r\n\t\tvar me = this,\r\n\t\t\tavailableWidthForCells = width,\r\n\t\t\tavailableHeightForCells = height;\r\n\t\t\r\n\t\tif(me.showLabels == true && me.textFields.length > 0)\r\n\t\t{\r\n\t\t\tavailableWidthForCells = width - me.textFields[me.textFields.length - 1].width();\r\n\t\t\tavailableHeightForCells = height - me.textFields[0].height();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tavailableWidthForCells = width;\r\n\t\t\tavailableHeightForCells = height;\r\n\t\t}\r\n\t\tvar measuredCellSize = Math.min(availableWidthForCells,availableHeightForCells) / (me.fields.length - 1);\r\n\t\treturn measuredCellSize;\r\n\t}\r\n\t\r\n\tme.updateDispList = function() {\r\n\t\tvar me = this,\r\n\t\t\tp = $(me.parent),\r\n\t\t\tw = p.innerWidth(),\r\n\t\t\th = p.innerHeight();\r\n\t\t\t\r\n\t\tme.container.css({width: w, height: h});\r\n\t\t\r\n\t\tme.actualCellSize = me.computeCellSize(w, h);\r\n\t\tif (me.showLabels && me.textFields.length > 0)\r\n\t\t{\r\n\t\t\tme.layoutTextFields();\r\n\t\t}\r\n\t\tme.layoutCells();\r\n\t}\r\n\t\r\n\tme.commitProp = function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.isDirty = true;\r\n\t\tme.generateComparisonStatistics();\r\n\t\tme.createOrRemoveCells();\r\n\t\tme.updateTextFields();\r\n\t\tme.updateDispList();\r\n\t\tme.isDirty = false;\r\n\t}\t\r\n}\r\n\r\nIG$.ComparisonMatrix.prototype.drawDetailPlot = function(matrixowner) {\r\n\tvar me = this,\r\n\t\tmatrix = me.matrixitems[matrixowner.id],\r\n\t\tcolor = matrix.compItem.compVal > me.cr2 ? \"rgba(0,0,255,.5)\" : \r\n\t\t\t\tmatrix.compItem.compVal > me.cr1 ? \"rgba(150,150,150,.5)\" :\r\n\t\t\t\t\"rgba(255,0,0,0.5)\",\r\n\t\tplotoption;\r\n\t\r\n\tif (matrix)\r\n\t{\r\n\t\tif (window.Highcharts)\r\n\t\t{\r\n\t\t\tplotoption = {\r\n\t\t\t\tchart: {\r\n\t\t\t\t\t renderTo: me.detailcontainer[0], \r\n\t\t\t\t\t defaultSeriesType: 'scatter',\r\n\t\t\t\t\t zoomType: 'xy'\r\n\t\t\t\t},\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\t text: matrix.compItem.xFieldName + \" vs. \" + matrix.compItem.yFieldName\r\n\t\t\t\t},\r\n\t\t\t\txAxis: {\r\n\t\t\t\t\t title: {\r\n\t\t\t\t\t\tenabled: true,\r\n\t\t\t\t\t\ttext: matrix.compItem.xFieldName\r\n\t\t\t\t\t },\r\n\t\t\t\t\t startOnTick: true,\r\n\t\t\t\t\t endOnTick: true,\r\n\t\t\t\t\t showLastLabel: true,\r\n\t\t\t\t\t min: 0,\r\n\t\t\t\t\t max: 1\r\n\t\t\t\t},\r\n\t\t\t\tyAxis: {\r\n\t\t\t\t\t title: {\r\n\t\t\t\t\t\ttext: matrix.compItem.yFieldName\r\n\t\t\t\t\t },\r\n\t\t\t\t\t min: 0,\r\n\t\t\t\t\t max: 1\r\n\t\t\t\t},\r\n\t\t\t\ttooltip: {\r\n\t\t\t\t\t formatter: function() {\r\n\t\t\t\t\t\t   return ''+\r\n\t\t\t\t\t   me.x +', '+ me.y +'';\r\n\t\t\t\t\t }\r\n\t\t\t\t},\r\n\t\t\t\tlegend: {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\t layout: 'vertical',\r\n\t\t\t\t\t align: 'left',\r\n\t\t\t\t\t verticalAlign: 'top',\r\n\t\t\t\t\t floating: true,\r\n\t\t\t\t\t backgroundColor: '#FFFFFF',\r\n\t\t\t\t\t borderWidth: 1\r\n\t\t\t\t},\r\n\t\t\t\tplotOptions: {\r\n\t\t\t\t\tscatter: {\r\n\t\t\t\t\t\tmarker: {\r\n\t\t\t\t\t\t\t   radius: 5,\r\n\t\t\t\t\t\t\t   states: {\r\n\t\t\t\t\t\t\t\t  hover: {\r\n\t\t\t\t\t\t\t\t\t enabled: true,\r\n\t\t\t\t\t\t\t\t\t lineColor: 'rgb(100,100,100)'\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tstates: {\r\n\t\t\t\t\t\t\t   hover: {\r\n\t\t\t\t\t\t\t\t  marker: {\r\n\t\t\t\t\t\t\t\t\t enabled: false\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\tseries: [{\r\n\t\t\t\t\t name: 'comparison',\r\n\t\t\t\t\t color: color,\r\n\t\t\t\t\t data: matrix.plotData\r\n\t\t\t\t}]\r\n\t\t\t};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tplotoption = {\r\n\t\t\t\tchart: {\r\n\t\t\t\t\t renderTo: me.detailcontainer[0], \r\n\t\t\t\t\t defaultSeriesType: 'scatter',\r\n\t\t\t\t\t zoomType: 'xy',\r\n\t\t\t\t\t echart_theme: me.config.echart_theme\r\n\t\t\t\t},\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\t text: matrix.compItem.xFieldName + \" vs. \" + matrix.compItem.yFieldName\r\n\t\t\t\t},\r\n\t\t\t\txAxis: {\r\n\t\t\t\t\t title: {\r\n\t\t\t\t\t\tenabled: true,\r\n\t\t\t\t\t\ttext: matrix.compItem.xFieldName\r\n\t\t\t\t\t },\r\n\t\t\t\t\t startOnTick: true,\r\n\t\t\t\t\t endOnTick: true,\r\n\t\t\t\t\t showLastLabel: true,\r\n\t\t\t\t\t min: 0,\r\n\t\t\t\t\t max: 1\r\n\t\t\t\t},\r\n\t\t\t\tyAxis: {\r\n\t\t\t\t\t title: {\r\n\t\t\t\t\t\ttext: matrix.compItem.yFieldName\r\n\t\t\t\t\t },\r\n\t\t\t\t\t min: 0,\r\n\t\t\t\t\t max: 1\r\n\t\t\t\t},\r\n\t\t\t\ttooltip: {\r\n\t\t\t\t\t formatter: function() {\r\n\t\t\t\t\t\t   return ''+\r\n\t\t\t\t\t   me.x +', '+ me.y +'';\r\n\t\t\t\t\t }\r\n\t\t\t\t},\r\n\t\t\t\tlegend: {\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\t layout: 'vertical',\r\n\t\t\t\t\t align: 'left',\r\n\t\t\t\t\t verticalAlign: 'top',\r\n\t\t\t\t\t floating: true,\r\n\t\t\t\t\t backgroundColor: '#FFFFFF',\r\n\t\t\t\t\t borderWidth: 1\r\n\t\t\t\t},\r\n\t\t\t\tplotOptions: {\r\n\t\t\t\t\tscatter: {\r\n\t\t\t\t\t\tmarker: {\r\n\t\t\t\t\t\t\t   radius: 5,\r\n\t\t\t\t\t\t\t   states: {\r\n\t\t\t\t\t\t\t\t  hover: {\r\n\t\t\t\t\t\t\t\t\t enabled: true,\r\n\t\t\t\t\t\t\t\t\t lineColor: 'rgb(100,100,100)'\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tstates: {\r\n\t\t\t\t\t\t\t   hover: {\r\n\t\t\t\t\t\t\t\t  marker: {\r\n\t\t\t\t\t\t\t\t\t enabled: false\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\tseries: [{\r\n\t\t\t\t\ttype: \"scatter\",\r\n\t\t\t\t\tsymbolSize: 5,\r\n\t\t\t\t\tname: 'comparison',\r\n\t\t\t\t\tcolor: color,\r\n\t\t\t\t\tdata: matrix.plotData\r\n\t\t\t\t}]\r\n\t\t\t};\r\n\t\t}\r\n\t\r\n\t\t// me.detailviewer.css({width: 400, height: 300});\r\n\t\tvar parent = $(me.parent),\r\n\t\t\tpw = parent.width(),\r\n\t\t\tph = parent.height(),\r\n\t\t\tvs = Math.min(ph, pw) * 0.85;\r\n\t\t\t\r\n\t\tme.detailviewer.css({left: (pw - vs - 10), top: 5, width: vs, height: vs});\r\n\t\tme.detailviewer.show();\r\n\t\t\r\n\t\tif (window.Highcharts)\r\n\t\t{\r\n\t\t\tme.plotdetail = new Highcharts.Chart(plotoption);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tme.plotdetail = echarts.init(plotoption.chart.renderTo, plotoption.chart.echart_theme || ig$.echarts_theme || 'amplix', {\r\n\t\t\t\trenderer: \"canvas\" // \"svg\"\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tme.plotdetail.setOption(plotoption);\r\n\t\t}\r\n\t}\r\n}","IG$.c$BulChart = function(owner) {\r\n    this.owner = owner;\r\n    this.bb = null;\r\n    \r\n    this.initialize();\r\n};\r\n\r\nIG$.c$BulChart.prototype = {\r\n    initialize: function() {\r\n        var me = this,\r\n            owner = me.owner,\r\n            vctrl = $(\"<div></div>\").appendTo(owner),\r\n            tp;\r\n            \r\n        me.width = IG$.j$ext._w(owner);\r\n        me.height = IG$.j$ext._h(owner);\r\n        me.margin = {top: 5, right: 40, bottom: 20, left: 120};\r\n        \r\n        if (!me.bb)\r\n        {\r\n            me.bb = IG$.c$BullChartV();\r\n            IG$.j$ext._w(me.bb, me.width - me.margin.right - me.margin.left);\r\n            IG$.j$ext._h(me.bb, me.height - me.margin.top - me.margin.bottom);\r\n        }\r\n        \r\n        tp = $(\"<ul></ul>\").appendTo(vctrl);\r\n        me.gtp = tp;\r\n        \r\n        tp = $(\"<li></li>\").appendTo(me.gtp);\r\n        $(\"<div>Ranges</div>\").appendTo(tp);\r\n        me.ranges = $(\"<combobox></combobox>\").appendTo(tp);\r\n        \r\n        tp = $(\"<li></li>\").appendTo(me.gtp);\r\n        $(\"<div>Measures</div>\").appendTo(tp);\r\n        me.measures = $(\"<combobox></combobox>\").appendTo(tp);\r\n        \r\n        tp = $(\"<li></li>\").appendTo(me.gtp);\r\n        $(\"<div>Markers</div>\").appendTo(tp);\r\n        me.markers = $(\"<combobox></combobox>\").appendTo(tp);\r\n    },\r\n    \r\n    loadData: function(mresult) {\r\n        var me = this,\r\n            owner = me.owner,\r\n            width = me.width,\r\n            height = me.height,\r\n            margin = me.margin,\r\n            vparent = $(\"<div><div>\").appendTo(me.owner),\r\n            vis = d3.select(vparent[0]).selectAll(\"svg\"),\r\n            chart = me.bb,\r\n            dt;\r\n            \r\n        dt = me.getData();\r\n        \r\n        vis.data(dt)\r\n            .enter().append(\"svg\")\r\n                  .attr(\"class\", \"bullet\")\r\n                  .attr(\"width\", width)\r\n                  .attr(\"height\", height)\r\n            .append(\"g\")\r\n                  .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\r\n              .call(chart);\r\n    \r\n          var title = vis.append(\"g\")\r\n              .attr(\"text-anchor\", \"end\")\r\n              .attr(\"transform\", \"translate(-6,\" + (height - margin.top - margin.bottom) / 2 + \")\");\r\n    \r\n          title.append(\"text\")\r\n              .attr(\"class\", \"title\")\r\n              .text(function(d) { return d.title; });\r\n    \r\n          title.append(\"text\")\r\n            .attr(\"class\", \"subtitle\")\r\n              .attr(\"dy\", \"1em\")\r\n              .text(function(d) { return d.subtitle; });\r\n              \r\n           me.vis = vis;\r\n           me.title = title;\r\n    \r\n          chart.duration(1000);\r\n    },\r\n    \r\n    drawChart: function() {\r\n        var me = this,\r\n            chart = me.bb;\r\n        vis.datum(randomize).call(chart);\r\n    },\r\n    \r\n    getData: function() {\r\n        var me = this,\r\n            r = [],\r\n            data = mresult._tabledata,\r\n            fc = mresult.colfix,\r\n            fr = mresult.rowfix,\r\n            tc = (data.length > 0) ? data[0].length : 0,\r\n            measurecol = {},\r\n            markercol = {},\r\n            i, j, mi=0, row, val, mmax, mmin, mrange, memin, memax;\r\n            \r\n        for (i=fc; i < tc; i++)\r\n        {\r\n        }\r\n            \r\n        for (i=fr; i < data.length; i++)\r\n        {\r\n            row = {\r\n                title: null,\r\n                ranges: [],\r\n                measures: [],\r\n                markers: []\r\n            };\r\n            \r\n            memin = null; memax = null;\r\n            \r\n            for (j=0; j < tc; j++)\r\n            {\r\n                if (j < fc)\r\n                {\r\n                    val = data[i][j].text || data[i][j].code;\r\n                    row.title = (i == 0) ? val : row.title + \" \" + val;\r\n                }\r\n                else\r\n                {\r\n                    val = Number(data[i][j].code);\r\n                    mmax = (j == fc) ? val : Math.max(mmax, val);\r\n                    mmin = (j == fc) ? val : Math.min(mmin, val);\r\n                    \r\n                    if (measurecol[j] == true)\r\n                    {\r\n                        if (memin == null)\r\n                        {\r\n                            memin = val;\r\n                            memax = val;\r\n                        }\r\n                        else\r\n                        {\r\n                            memin = Math.min(memin, val);\r\n                            memax = Math.max(memax, val);\r\n                        }\r\n                    }\r\n                    if (markercol[j] == true)\r\n                    {\r\n                        row.markers.push(val);\r\n                    }\r\n                }\r\n            }\r\n            \r\n            row.ranges = [mmin, mrange, mmax];\r\n            row.measures = [memin, memax];\r\n            \r\n            r.push(row);\r\n        }\r\n            \r\n        return r;\r\n    }\r\n};\r\n\r\n\r\nfunction randomize(d) {\r\n  if (!d.randomizer) d.randomizer = randomizer(d);\r\n  d.ranges = d.ranges.map(d.randomizer);\r\n  d.markers = d.markers.map(d.randomizer);\r\n  d.measures = d.measures.map(d.randomizer);\r\n  return d;\r\n}\r\n\r\nfunction randomizer(d) {\r\n  var k = d3.max(d.ranges) * .2;\r\n  return function(d) {\r\n    return Math.max(0, d + k * (Math.random() - .5));\r\n  };\r\n}\r\n\r\n// Chart design based on the recommendations of Stephen Few. Implementation\r\n// based on the work of Clint Ivy, Jamie Love, and Jason Davies.\r\n// http://projects.instantcognition.com/protovis/bulletchart/\r\nIG$.c$BullChartV = function() {\r\n  var orient = \"left\", // TODO top & bottom\r\n      reverse = false,\r\n      duration = 0,\r\n      ranges = bulletRanges,\r\n      markers = bulletMarkers,\r\n      measures = bulletMeasures,\r\n      width = 380,\r\n      height = 30,\r\n      tickFormat = null;\r\n\r\n  // For each small multiple\r\n  function bullet(g) {\r\n    g.each(function(d, i) {\r\n      var rangez = ranges.call(this, d, i).slice().sort(d3.descending),\r\n          markerz = markers.call(this, d, i).slice().sort(d3.descending),\r\n          measurez = measures.call(this, d, i).slice().sort(d3.descending),\r\n          g = d3.select(this);\r\n\r\n      // Compute the new x-scale.\r\n      var x1 = d3.scale.linear()\r\n          .domain([0, Math.max(rangez[0], markerz[0], measurez[0])])\r\n          .range(reverse ? [width, 0] : [0, width]);\r\n\r\n      // Retrieve the old x-scale, if this is an update.\r\n      var x0 = this.__chart__ || d3.scale.linear()\r\n          .domain([0, Infinity])\r\n          .range(x1.range());\r\n\r\n      // Stash the new scale.\r\n      this.__chart__ = x1;\r\n\r\n      // Derive width-scales from the x-scales.\r\n      var w0 = bulletWidth(x0),\r\n          w1 = bulletWidth(x1);\r\n\r\n      // Update the range rects.\r\n      var range = g.selectAll(\"rect.range\")\r\n          .data(rangez);\r\n\r\n      range.enter().append(\"svg:rect\")\r\n          .attr(\"class\", function(d, i) { return \"range s\" + i; })\r\n          .attr(\"width\", w0)\r\n          .attr(\"height\", height)\r\n          .attr(\"x\", reverse ? x0 : 0)\r\n        .transition()\r\n          .duration(duration)\r\n          .attr(\"width\", w1)\r\n          .attr(\"x\", reverse ? x1 : 0);\r\n\r\n      range.transition()\r\n          .duration(duration)\r\n          .attr(\"x\", reverse ? x1 : 0)\r\n          .attr(\"width\", w1)\r\n          .attr(\"height\", height);\r\n\r\n      // Update the measure rects.\r\n      var measure = g.selectAll(\"rect.measure\")\r\n          .data(measurez);\r\n\r\n      measure.enter().append(\"svg:rect\")\r\n          .attr(\"class\", function(d, i) { return \"measure s\" + i; })\r\n          .attr(\"width\", w0)\r\n          .attr(\"height\", height / 3)\r\n          .attr(\"x\", reverse ? x0 : 0)\r\n          .attr(\"y\", height / 3)\r\n        .transition()\r\n          .duration(duration)\r\n          .attr(\"width\", w1)\r\n          .attr(\"x\", reverse ? x1 : 0);\r\n\r\n      measure.transition()\r\n          .duration(duration)\r\n          .attr(\"width\", w1)\r\n          .attr(\"height\", height / 3)\r\n          .attr(\"x\", reverse ? x1 : 0)\r\n          .attr(\"y\", height / 3);\r\n\r\n      // Update the marker lines.\r\n      var marker = g.selectAll(\"line.marker\")\r\n          .data(markerz);\r\n\r\n      marker.enter().append(\"svg:line\")\r\n          .attr(\"class\", \"marker\")\r\n          .attr(\"x1\", x0)\r\n          .attr(\"x2\", x0)\r\n          .attr(\"y1\", height / 6)\r\n          .attr(\"y2\", height * 5 / 6)\r\n        .transition()\r\n          .duration(duration)\r\n          .attr(\"x1\", x1)\r\n          .attr(\"x2\", x1);\r\n\r\n      marker.transition()\r\n          .duration(duration)\r\n          .attr(\"x1\", x1)\r\n          .attr(\"x2\", x1)\r\n          .attr(\"y1\", height / 6)\r\n          .attr(\"y2\", height * 5 / 6);\r\n\r\n      // Compute the tick format.\r\n      var format = tickFormat || x1.tickFormat(8);\r\n\r\n      // Update the tick groups.\r\n      var tick = g.selectAll(\"g.tick\")\r\n          .data(x1.ticks(8), function(d) {\r\n            return this.textContent || format(d);\r\n          });\r\n\r\n      // Initialize the ticks with the old scale, x0.\r\n      var tickEnter = tick.enter().append(\"svg:g\")\r\n          .attr(\"class\", \"tick\")\r\n          .attr(\"transform\", bulletTranslate(x0))\r\n          .style(\"opacity\", 1e-6);\r\n\r\n      tickEnter.append(\"svg:line\")\r\n          .attr(\"y1\", height)\r\n          .attr(\"y2\", height * 7 / 6);\r\n\r\n      tickEnter.append(\"svg:text\")\r\n          .attr(\"text-anchor\", \"middle\")\r\n          .attr(\"dy\", \"1em\")\r\n          .attr(\"y\", height * 7 / 6)\r\n          .text(format);\r\n\r\n      // Transition the entering ticks to the new scale, x1.\r\n      tickEnter.transition()\r\n          .duration(duration)\r\n          .attr(\"transform\", bulletTranslate(x1))\r\n          .style(\"opacity\", 1);\r\n\r\n      // Transition the updating ticks to the new scale, x1.\r\n      var tickUpdate = tick.transition()\r\n          .duration(duration)\r\n          .attr(\"transform\", bulletTranslate(x1))\r\n          .style(\"opacity\", 1);\r\n\r\n      tickUpdate.select(\"line\")\r\n          .attr(\"y1\", height)\r\n          .attr(\"y2\", height * 7 / 6);\r\n\r\n      tickUpdate.select(\"text\")\r\n          .attr(\"y\", height * 7 / 6);\r\n\r\n      // Transition the exiting ticks to the new scale, x1.\r\n      tick.exit().transition()\r\n          .duration(duration)\r\n          .attr(\"transform\", bulletTranslate(x1))\r\n          .style(\"opacity\", 1e-6)\r\n          .remove();\r\n    });\r\n    d3.timer.flush();\r\n  }\r\n\r\n  // left, right, top, bottom\r\n  bullet.orient = function(x) {\r\n    if (!arguments.length) return orient;\r\n    orient = x;\r\n    reverse = orient == \"right\" || orient == \"bottom\";\r\n    return bullet;\r\n  };\r\n\r\n  // ranges (bad, satisfactory, good)\r\n  bullet.ranges = function(x) {\r\n    if (!arguments.length) return ranges;\r\n    ranges = x;\r\n    return bullet;\r\n  };\r\n\r\n  // markers (previous, goal)\r\n  bullet.markers = function(x) {\r\n    if (!arguments.length) return markers;\r\n    markers = x;\r\n    return bullet;\r\n  };\r\n\r\n  // measures (actual, forecast)\r\n  bullet.measures = function(x) {\r\n    if (!arguments.length) return measures;\r\n    measures = x;\r\n    return bullet;\r\n  };\r\n\r\n  bullet.width = function(x) {\r\n    if (!arguments.length) return width;\r\n    width = x;\r\n    return bullet;\r\n  };\r\n\r\n  bullet.height = function(x) {\r\n    if (!arguments.length) return height;\r\n    height = x;\r\n    return bullet;\r\n  };\r\n\r\n  bullet.tickFormat = function(x) {\r\n    if (!arguments.length) return tickFormat;\r\n    tickFormat = x;\r\n    return bullet;\r\n  };\r\n\r\n  bullet.duration = function(x) {\r\n    if (!arguments.length) return duration;\r\n    duration = x;\r\n    return bullet;\r\n  };\r\n\r\n  return bullet;\r\n};\r\n\r\nfunction bulletRanges(d) {\r\n  return d.ranges;\r\n}\r\n\r\nfunction bulletMarkers(d) {\r\n  return d.markers;\r\n}\r\n\r\nfunction bulletMeasures(d) {\r\n  return d.measures;\r\n}\r\n\r\nfunction bulletTranslate(x) {\r\n  return function(d) {\r\n    return \"translate(\" + x(d) + \",0)\";\r\n  };\r\n}\r\n\r\nfunction bulletWidth(x) {\r\n  var x0 = x(0);\r\n  return function(d) {\r\n    return Math.abs(x(d) - x0);\r\n  };\r\n}\r\n"]}