{"version":3,"sources":["roboassist_main.js"],"names":["window","IG$","_wcollab_data","msg_template","cls","items","type","innerHtml","workspace_template","id","attr","placeholder","contenteditable","role","spellcheck","welcome_template","for","handler","e","preventDefault","stopPropagation","this","_connect_channel","_wcollab","settings","_settings","prototype","_init","me","dsub","location","href","split","protocol","url","ws_path","ws","ws_url","_userdetail","userdetail","__ws","WebSocket","onopen","onmessage","onclosed","onclosing","_send_ws","m","JSON","parse","data","mbody","application","action","content","name","email","nodepath","username","$","fadeOut","message","_appendMsg","mdiv","s","messagelist","theight","appendTo","draw_area","actor","self","addClass","height","animate","scrollTop","atag","each","i","tag","dtag","bind","amp","nick","closeSession","close","_channel_info","t","instance","channel","guid","send","stringify","load_app","tdiv","html","rootdiv","empty","_pages","_load_page","template","k","pg","region","show","hide","pname","msg","_draw_sub","setLoading","visible","showErrorMessage","title","popup_error","msg_title","msg_content","fadeIn","_send_ajax","params","callback","uniquekey","_get_uniquekey","Pace","start","ajax","request_url","dataType","async","contentType","timeout","beforeSend","xhr","cache","crossDomain","processData","success","response","status","stop","errcode","errorcode","errormsg","length","rerr","func","apply","scope","error","err","dt","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","tpl","tname","c","push","join","charAt","substring","indexOf","append","txt_nick","val","removeClass","ack","payload","cmd","channel_name","_mts_","resp","iserror","result","_init_ws","keydown","which","_send_msg","lut","_guid_lut","toString","d0","Math","random","d1","d2","d3","document","ready"],"mappings":"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","file":"../../../../../../igccud.min.js","sourcesContent":["if (!window.IG$)\n{\n\twindow.IG$ = {};\n}\n\nIG$._wcollab_data = {\n\tmsg_template: {\n\t\tcls: \"kiwi-messagelist-item\",\n\t\titems: [\n\t\t\t{\n\t\t\t\tcls: \"kiwi-messagelist-message kiwi-messagelist-message--modern kiwi-messagelist-message--authorfirst kiwi-messagelist-message-notice\",\n\t\t\t\t// cls: \"kiwi-messagelist-message kiwi-messagelist-message--modern kiwi-messagelist-message--authorfirst kiwi-messagelist-message-topic kiwi-messagelist-message--highlight\"\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tcls: \"kiwi-messagelist-modern-left\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcls: \"kiwi-messagelist-modern-right\",\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-messagelist-top\",\n\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-messagelist-nick\",\n\t\t\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-messagelist-nick-prefix\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"span\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinnerHtml: \"{actor.nick}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-messagelist-time\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-messagelist-body\",\n\t\t\t\t\t\t\t\t\t\tinnerHtml: \"{message}\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t},\n\tworkspace_template: {\n\t\tcls: \"kiwi-workspace\",\n\t\titems: [\n\t\t\t{\n\t\t\t\tcls: \"kiwi-container kiwi-container--sidebar-open\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tcls: \"kiwi-header kiwi-theme-bg\",\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcls: \"kiwi-header-name\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcls: \"kiwi-header-options\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcls: \"kiwi-container-content\",\n\t\t\t\t\t\tid: \"messagecontainer\",\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcls: \"kiwi-messagelist\",\n\t\t\t\t\t\t\t\tid: \"messagelist\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tcls: \"kiwi-controlinput kiwi-theme-bg\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tcls: \"kiwi-controlinput-selfuser\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcls: \"kiwi-controlinput-inner\",\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcls: \"kiwi-awaystatusindicator kiwi-awaystatusindicator--self\",\n\t\t\t\t\t\t\t\ttype: \"span\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcls: \"kiwi-controlinput-user\",\n\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-controlinput-user-nick\",\n\t\t\t\t\t\t\t\t\t\ttype: \"span\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcls: \"fa fa-caret-square-up\",\n\t\t\t\t\t\t\t\t\t\ttype: \"i\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcls: \"kiwi-controlinput-form\",\n\t\t\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-typinguserslist\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-controlinput-input-wrap\",\n\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-ircinput kiwi-controlinput-input\",\n\t\t\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-ircinput-editor\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: \"ircinput\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tattr: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder: \"Send a message...\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontenteditable: \"true\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole: \"textbox\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tspellcheck: \"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-controlinput-send fa fa-paper-plane\",\n\t\t\t\t\t\t\t\t\t\ttype: \"button\",\n\t\t\t\t\t\t\t\t\t\tid: \"btn_send\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/*,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcls: \"kiwi-controlinput-tools\",\n\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-controlinput-tools-container\",\n\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"a\",\n\t\t\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-controlinput-tool\",\n\t\t\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"i\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcls: \"fa fa-smile-beam\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t},\n\twelcome_template: {\n\t\tcls: \"kiwi-wrap kiwi-theme-bg\",\n\t\titems: [\n\t\t\t{\n\t\t\t\tcls: \"kiwi-startup-common kiwi-welcome-simple kiwi-welcome-simple--recaptcha\",\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tcls: \"kiwi-startup-common-section kiwi-startup-common-section-connection\",\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcls: \"u-form u-form--big kiwi-welcome-simple-form\",\n\t\t\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttype: \"h2\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcls: \"u-input-text\",\n\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"label\",\n\t\t\t\t\t\t\t\t\t\t\t\tattr: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"for\": \"txt_nick\"\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tinnerHtml: \"{nick}\"\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tcls: \"u-input-text-inputs\",\n\t\t\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"input\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: \"txt_nick\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcls: \"u-input\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/*,\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tcls: \"kiwi-welcome-simple-input-container\",\n\t\t\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcls: \"u-input-text\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"label\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcls: \"u-input-text\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"input\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcls: \"u-input\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttype: \"button\",\n\t\t\t\t\t\t\t\t\t\tcls: \"u-button u-button-primary u-submit kiwi-welcome-simple-start\",\n\t\t\t\t\t\t\t\t\t\tinnerHtml: \"{start}\",\n\t\t\t\t\t\t\t\t\t\thandler: function(e) {\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tvar me = this;\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tme._connect_channel();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tcls: \"fn-sponsor\",\n\t\t\t\t\t\t\t\t\t\t\t\tinnerHtml: \"{sponsor}\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcls: \"kiwi-startup-common-section kiwi-startup-common-section-info\",\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcls: \"kiwi-startup-common-section-info-content\",\n\t\t\t\t\t\t\t\tinnerHtml: \"{startup}\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t}\n}\n\nIG$._wcollab = function(settings) {\n\tthis._settings = settings || {};\n};\n\nIG$._wcollab.prototype = {\n\t_init: function() {\n\t\tvar me = this,\n\t\t\tdurl = window.location.href,\n\t\t\tdsub = durl.split(\"/\"),\n\t\t\t_settings;\n\t\t\t\n\t\t_settings = me._settings;\n\t\t\n\t\tif (!_settings.protocol)\n\t\t{\n\t\t\t_settings.protocol = (dsub[0] == \"https:\" ? \"wss\" : \"ws\");\n\t\t}\n\t\t\n\t\tif (!_settings.url)\n\t\t{\n\t\t\t_settings.url = dsub[2];\n\t\t}\n\t\t\n\t\t_settings.ws_path = _settings.ws_path || \"/websocket/collaborate\";\n\t\t\n\t\tvar ws_url = _settings.protocol + \"://\" + _settings.url + _settings.ws_path,\n\t\t\tws;\n\t\t\n\t\tme._userdetail = _settings.userdetail;\n\t\t\n\t\ttry\n\t\t{\n\t\t\tws = me.__ws = new WebSocket(ws_url);\n\t\t\tws.onopen = function (e) {\n\t\t\t\tme.onopen(e);\n\t\t\t};\n\t\t\t\n\t\t\tws.onmessage = function (e) {\n\t\t\t\tme.onmessage(e);\n\t\t\t};\n\t\t\t\n\t\t\tws.onclosed = function(e) {\n\t\t\t\tme.onclosed(e);\n\t\t\t};\n\t\t\t\n\t\t\tws.onclosing = function(e) {\n\t\t\t\tme.onclosing(e);\n\t\t\t}\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t}\n\t},\n\tonopen: function(e) {\n\t\tvar me = this;\n\t\tme._send_ws(\"_call_\", \"login\", {});\n\t},\n\tonmessage: function(e) {\n\t\tvar me = this,\n\t\t\tm = JSON.parse(e.data),\n\t\t\tmsg,\n\t\t\tmbody = {},\n\t\t\ts, mdiv;\n\t\t\n\t\tif (m.application == \"_irc_\")\n\t\t{\n\t\t\tswitch (m.action)\n\t\t\t{\n\t\t\tcase \"login\":\n\t\t\t\tmsg = \"Logged in user <ul><li>\" + m.content.name + \" (\" + m.content.id + \")</li><li>\" + m.content.email + \"</li></ul>\";\n\t\t\t\tbreak;\n\t\t\tcase \"writecontent\":\n\t\t\t\tmsg = \"Content updated on server! <ul><li>\" + m.content.nodepath + \"</li></li>By: \" + m.content.username + \"</li></ul>\";\n\t\t\t\tbreak;\n\t\t\tcase \"message\":\n\t\t\t\t$(\"#main_loading\").fadeOut();\n\t\t\t\tmbody = m.content;\n\t\t\t\tmsg = m.content.message;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tme._appendMsg(mbody);\n\t\t}\n\t},\n\t\n\t_appendMsg: function(mbody) {\n\t\tvar me = this,\n\t\t\tmdiv,\n\t\t\ts,\n\t\t\tmessagecontainer = $(\"#messagecontainer\"),\n\t\t\tmessagelist = $(\"#messagelist\"),\n\t\t\ttheight = me.theight || 0;\n\t\t\n\t\tmdiv = $(\"<div></div>\").appendTo(messagelist);\n\t\ts = me.draw_area(mdiv, IG$._wcollab_data.msg_template, mbody);\n\t\t\n\t\tif (mbody.actor && mbody.actor.self)\n\t\t{\n\t\t\ts.addClass(\"igc_self_msg\");\n\t\t}\n\t\t\n\t\tme.theight = theight = theight + s.height();\n\t\t\n\t\tmessagelist.animate({ scrollTop: theight }, \"slow\");\n\t\t\n\t\tvar atag = $(\"a\", mdiv);\n\t\t\n\t\t$.each(atag, function(i, tag) {\n\t\t\tvar dtag = $(tag);\n\t\t\tdtag.bind(\"click\", function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\t\n\t\t\t\tvar amp = dtag.attr(\"amp_reply\");\n\t\t\t\t\n\t\t\t\tif (amp)\n\t\t\t\t{\n\t\t\t\t\tme._send_ws(\"_call_\", \"message\", {\n\t\t\t\t\t\tmessage: amp,\n\t\t\t\t\t\tactor: {\n\t\t\t\t\t\t\tnick: \"me\",\n\t\t\t\t\t\t\tself: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\t\n\tcloseSession: function() {\n\t\tvar me = this,\n\t\t\tws = me.__ws;\n\t\t\n\t\tif (ws)\n\t\t{\n\t\t\tws.close();\n\t\t}\n\t\t\n\t\tme.__ws = null;\n\t},\n\t\n\t_send_ws: function(application, action, data) {\n\t\tvar me = this,\n\t\t\tws = me.__ws,\n\t\t\t_channel_info = me._channel_info,\n\t\t\tt = {\n\t\t\t\tapplication: application,\n\t\t\t\taction: action,\n\t\t\t\tinstance: _channel_info.instance,\n\t\t\t\tchannel: _channel_info.channel,\n\t\t\t\tid: me.guid(),\n\t\t\t\tcontent: data\n\t\t\t},\n\t\t\tmdiv;\n\t\t\n\t\tws.send(JSON.stringify(t));\n\t\t\n\t\tswitch(action)\n\t\t{\n\t\tcase \"message\":\n\t\t\tme._appendMsg(data);\n\t\t\tbreak;\n\t\t}\n\t},\n\t\n\tload_app: function() { \n\t\tvar me = this,\n\t\t\t_settings = me._settings,\n\t\t\ttdiv = _settings.html,\n\t\t\ts;\n\t\t\n\t\tme.rootdiv = tdiv;\n\t\tme.rootdiv.empty();\n\t\tme._pages = {};\n\t\t\n\t\tme._load_page(\"welcome_template\");\n\t},\n\t\n\t_load_page: function(template) {\n\t\tvar me = this,\n\t\t\ts,\n\t\t\t_settings = me._settings;\n\t\t\n\t\t$.each(me._pages, function(k, pg) {\n\t\t\tif (k == template)\n\t\t\t{\n\t\t\t\tpg.region.show();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpg.region.hide();\n\t\t\t}\n\t\t});\n\t\t\n\t\tif (!me._pages[template])\n\t\t{\n\t\t\ts = me.draw_area(me.rootdiv, IG$._wcollab_data[template], _settings.message);\n\t\t\t\n\t\t\tme._pages[template] = {\n\t\t\t\tpname: template,\n\t\t\t\tregion: s\n\t\t\t};\n\t\t}\n\t},\n\t\n\tdraw_area: function(tdiv, template, msg) {\n\t\tvar me = this,\n\t\t\ts;\n\t\t\n\t\ts = this._draw_sub(tdiv, template, msg);\n\t\t\n\t\treturn s;\n\t},\n\t\n\tsetLoading: function(visible) {\n\t\t$(\"#loading\")[visible ? \"show\" : \"fadeOut\"]();\n\t},\n\t\n\tshowErrorMessage: function(title, msg) {\n\t\tvar popup_error = $(\"#popup_error\");\n\t\t\tmsg_title = $(\"#msg_title\", popup_error),\n\t\t\tmsg_content = $(\"#msg_content\", popup_error);\n\t\t\n\t\tmsg_title.html(title);\n\t\tmsg_content.html(msg);\n\t\t\n\t\tpopup_error.fadeIn();\n\t},\n\t\n\t_send_ajax: function(params, callback) {\n\t\tvar me = this,\n\t\t\t_settings = me._settings,\n\t\t\tret,\n\t\t\tp, k, pnames;\n\t\t\n\t\tparams.uniquekey = me._get_uniquekey();\n\t\t\n\t\twindow.Pace && window.Pace.start();\n\t\t\n\t\tme.setLoading(true);\n\t\t\n\t\t$.ajax({\n\t\t\turl: _settings.request_url,\n\t\t\tdata: JSON.stringify(params),\n\t\t\tdataType: \"json\",\n\t\t\ttype: \"POST\",\n\t\t\tasync: true,\n\t\t\tcontentType: \"application/json; charset=UTF-8\",\n\t\t\ttimeout: 600000,\n\t\t\tbeforeSend: function(xhr, settings) {\n\t\t\t},\n\t\t\tcache: false,\n\t\t\tcrossDomain: false,\n\t\t\tprocessData: true,\n\t\t\tsuccess: function(response, status, xhr) {\n\t\t\t\twindow.Pace && window.Pace.stop();\n\t\t\t\t\n\t\t\t\tresponse = response || {\n\t\t\t\t\terrorcode: \"0xffff\",\n\t\t\t\t\terrormsg: 'Server incorrect responding'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar errcode = response.errorcode,\n\t\t\t\t\tstopprog = false;\n\t\t\t\t\n\t\t\t\tme.setLoading(false);\n\n\t\t\t\tif (errcode != null && errcode.length > 0)\n\t\t\t\t{\n\t\t\t\t\tvar rerr = true;\n\t\t\t\t\t\n\t\t\t\t\tif (callback)\n\t\t\t\t\t{\n\t\t\t\t\t\trerr = callback.func.apply(callback.scope || me, [response, true]);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (rerr !== false)\n\t\t\t\t\t{\n\t\t\t\t\t\tme.showErrorMessage(\"Error!\", response.errormsg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (callback)\n\t\t\t\t\t{\n\t\t\t\t\t\tcallback.func.apply(callback.scope || me, [response, false]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(xhr, status, err) {\n\t\t\t\twindow.Pace && window.Pace.stop();\n\t\t\t\t\n\t\t\t\tme.setLoading(false);\n\t\t\t\t\n\t\t\t\tvar response = {\n\t\t\t\t\terrorcode: '0x9999',\n\t\t\t\t\terrormsg: 'Server URL Connection Failed'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tme.showErrorMessage(\"Error!\", response.errormsg);\n\t\t\t}\n\t\t});\n\t},\n\t\n\t_get_uniquekey: function() {\n\t\tvar dt = new Date(),\n\t\t\tdateStr = \"\" + dt.getFullYear() + \n\t\t\t\t\t  (1+dt.getMonth()) +\n\t\t\t\t\t  dt.getDate() +\n\t\t\t\t\t  dt.getHours() + \n\t\t\t\t\t  dt.getMinutes() +\n\t\t\t\t\t  dt.getSeconds();\n\t\t\n\t\treturn dateStr;\n\t},\n\t\n\t_draw_sub: function(tdiv, tpl, msg) {\n\t\tvar me = this,\n\t\t\ttag = tpl.type || \"div\",\n\t\t\tc = [\"<\" + tag],\n\t\t\ttname, k, i;\n\t\t\n\t\tif (tpl.cls)\n\t\t{\n\t\t\tc.push(\" class='\" + tpl.cls + \"'\");\n\t\t}\n\t\t\n\t\tif (tpl.name)\n\t\t{\n\t\t\tc.push(\" name='\" + tpl.name + \"'\");\n\t\t}\n\t\t\n\t\tif (tpl.id)\n\t\t{\n\t\t\tc.push(\" id='\" + tpl.id + \"'\");\n\t\t}\n\t\t\n\t\tif (tpl.attr)\n\t\t{\n\t\t\t$.each(tpl.attr, function(i, t) {\n\t\t\t\tc.push(\" \" + i + \"='\" + t + \"'\");\n\t\t\t});\n\t\t}\n\t\t\n\t\tc.push(\"></\" + tag + \">\");\n\t\t\n\t\tc = $(c.join(\"\")).appendTo(tdiv);\n\t\t\n\t\tif (tpl.handler)\n\t\t{\n\t\t\tc.bind(\"click\", function(e) {\n\t\t\t\ttpl.handler.apply(tpl.scope || me, [e]);\n\t\t\t});\n\t\t}\n\t\t\n\t\tif (tpl.items)\n\t\t{\n\t\t\t$.each(tpl.items, function(i, t) {\n\t\t\t\tme._draw_sub(c, t, msg);\n\t\t\t});\n\t\t}\n\t\telse if (tpl.innerHtml)\n\t\t{\n\t\t\tif (msg && tpl.innerHtml.charAt(0) == '{' && tpl.innerHtml.charAt(tpl.innerHtml.length - 1) == '}')\n\t\t\t{\n\t\t\t\ttname = tpl.innerHtml.substring(1, tpl.innerHtml.length - 1);\n\t\t\t\t\n\t\t\t\tif (tname.indexOf(\".\") > -1)\n\t\t\t\t{\n\t\t\t\t\ttname = tname.split(\".\");\n\t\t\t\t\tk = msg;\n\t\t\t\t\tfor (i=0; i < tname.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (k[tname[i]])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tk = k[tname[i]];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tk = null;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tc.append(k || \"\");\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tc.append(msg[tname] || \"\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tc.append(tpl.innerHtml);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn c;\n\t},\n\t\n\t_connect_channel: function() {\n\t\tvar me = this,\n\t\t\ttxt_nick = $(\"#txt_nick\");\n\t\t\n\t\tif (!txt_nick.val())\n\t\t{\n\t\t\ttxt_nick.addClass(\"required_field\");\n\t\t\tme.showErrorMessage(\"Field Input\", \"Nick name is required!\");\n\t\t\treturn;\n\t\t}\n\t\t\n\t\ttxt_nick.removeClass(\"required_field\");\n\t\t\n\t\t// loading main background\n\t\t$(\"#main_loading\").show();\n\t\t\n\t\tme._send_ajax({\n\t\t\tack: \"collaborate\",\n\t\t\tpayload: {cmd: \"request_channel\"},\n\t\t\tmbody: me._settings.channel_name ? {\n\t\t\t\tchannel_name: \"#\" + me._settings.channel_name,\n\t\t\t\tnick: txt_nick.val()\n\t\t\t} : {\n\t\t\t\tnick: txt_nick.val()\n\t\t\t},\n\t\t\t_mts_: me._settings._mts_\n\t\t}, {\n\t\t\tfunc: function(resp, iserror) {\n\t\t\t\tif (!iserror)\n\t\t\t\t{\n\t\t\t\t\tme._channel_info = resp.result;\n\t\t\t\t\tme._load_page(\"workspace_template\");\n\t\t\t\t\tme._init_ws();\n\t\t\t\t\tme._init();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t\n\t_init_ws: function() {\n\t\tvar me = this,\n\t\t\tws = me._pages.workspace_template;\n\t\t\n\t\t$(\"#ircinput\", ws.region).keydown(function(e) {\n\t\t\tif (e.which == 13)\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\t\n\t\t\t\tme._send_msg();\n\t\t\t}\n\t\t});\n\t\t\n\t\t$(\"#btn_send\", ws.region).bind(\"click\", function(e) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\t\n\t\t\tme._send_msg();\n\t\t});\n\t},\n\t\n\t_send_msg: function() {\n\t\tvar me = this,\n\t\t\tws = me._pages.workspace_template,\n\t\t\tc = $(\"#ircinput\", ws.region),\n\t\t\tt = c.html();\n\t\t\n\t\tif (!t)\n\t\t\treturn;\n\t\t\n\t\tc.empty();\n\t\t\n\t\tme._send_ws(\"_call_\", \"message\", {\n\t\t\tmessage: t,\n\t\t\tactor: {\n\t\t\t\tnick: \"me\",\n\t\t\t\tself: true\n\t\t\t}\n\t\t});\n\t},\n\t\n\tguid: function() {\n\t\tvar lut,\n\t\t\ti;\n\t\t\n\t\tif (!IG$._guid_lut)\n\t\t{\n\t\t\tlut = IG$._guid_lut = [];\n\n\t\t\tfor (i=0; i<256; i++) { \n\t\t\t\tlut[i] = (i<16?'0':'')+(i).toString(16); \n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlut = IG$._guid_lut;\n\t\t}\n\t\t\n\t\tvar d0 = Math.random()*0xffffffff|0,\n\t\t\td1 = Math.random()*0xffffffff|0,\n\t\t\td2 = Math.random()*0xffffffff|0,\n\t\t\td3 = Math.random()*0xffffffff|0,\n\t\t\tguid;\n\t\t\n\t\tguid = lut[d0&0xff]+lut[d0>>8&0xff]+lut[d0>>16&0xff]+lut[d0>>24&0xff]+'-'+\n\t\tlut[d1&0xff]+lut[d1>>8&0xff]+'-'+lut[d1>>16&0x0f|0x40]+lut[d1>>24&0xff]+'-'+\n\t\tlut[d2&0x3f|0x80]+lut[d2>>8&0xff]+'-'+lut[d2>>16&0xff]+lut[d2>>24&0xff]+\n\t\tlut[d3&0xff]+lut[d3>>8&0xff]+lut[d3>>16&0xff]+lut[d3>>24&0xff];\n\t\t\n\t\treturn guid;\n\t}\n}\n\n$(document).ready(function() {\n\tvar popup_error = $(\"#popup_error\"),\n\t\tbtn_close = $(\"#btn_close\", popup_error);\n\t\n\tbtn_close.bind(\"click\", function() {\n\t\tpopup_error.fadeOut();\n\t});\n});"]}