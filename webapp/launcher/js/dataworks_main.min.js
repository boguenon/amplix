var hist,lastHist;IG$._source="dataworks",IG$.historyManager=function(e){this.instance=e,this.addHistory=function(e){unFocus.History.addHistory(e)},this.hasMenu=function(){var e=unFocus.History.getCurrent();if(e&&""!=e){var t,a,n,i,o,s,l,c=e.split("&");for(n=0;n<c.length;n++)if((s=(l=c[n]).indexOf("="))>0)switch(i=l.substring(0,s),o=l.substring(s+1),i){case"lang":break;case"p1":t=o;break;case"p2":a=o}if(t&&a)return!0}return!1},this.historyListener=function(){var t=unFocus.History.getCurrent();return null!=t&&""!=t&&e.dlgLogin.logininfo&&IG$.navigateMenu(e,t),t},unFocus.History.addEventListener("historyChange",this.historyListener)},IG$.navigateMenu=function(e,t){if(t&&t.length>0&&lastHist!=t){if(IG$.checkUID(t))n=t;else{var a,n,i,o,s,l,c,r=t.split("&");for(i=0;i<r.length;i++)if((l=(c=r[i]).indexOf("="))>0)switch(o=c.substring(0,l),s=c.substring(l+1),o){case"lang":break;case"p1":a=s;break;case"p2":n=s}}n&&IG$.navigateMenuByUID(e,n,a)}},IG$.navigateMenuByUID=function(e,t,a,n,i){var o=new IG$._rpc$;o.init(null,{ack:"helpcontent",payload:{uid:t},mbody:{option:"translate"}},null,(function(t){var o=t[0],s=o.uid,l=o.type.toLowerCase(),c=o.locale_name||o.name,r=o.nodepath,d=o.manage||o.writable,p=!1;if("dashboard"==l&&"dashboardedit"==a?l=a:"export"==l&&(p=!0,l="report"),1==p){var u=$(document),m=$("#main"),h={renderTo:m[0],minHeight:u.height(),address:r,closable:!1,_ts_:!1,hiddenstatusbar:!0,hiddentoolbar:!0,header:!1,title:IG$.getTabTitle(c)};pitem=IG$.createAppPanel(e,s,l,c,r,d,h),pitem.on({_lc0:function(){},_lc1:function(){var e=pitem.calcSize.call(pitem);pitem.setSize(e.width,e.height)},resize:function(e,t,a,n,i,o){var s=$(document.body);IG$.j$ext._w(m,t),IG$.j$ext._h(m,a),IG$.j$ext._w(s,t),IG$.j$ext._h(s,a)}}),pitem.updateLayout(),pitem.setSize(u.width(),u.height()),m.css({minHeight:u.height()+"px"})}else e.mainPanel.navigateApp.call(e.mainPanel,s,l,c,r,void 0===i||i,d,null,n)}),null),o.send(e)},IG$.$ap={bbs_discussion:"357f2c02-456246f0",bbs_competition:"0015723f-ece24e53",_init_home:function(e,t){e.mainPanel.initRecentVisit.call(e.mainPanel)},_init_dataset:function(e,t,a){var n=t,i=$("#dataset_lists",t._page);a&&$("#btn_reg_dataset",n._page).bind("click",(function(t){t.preventDefault(),t.stopPropagation(),IG$.changeApp(e,8)})),function(){i.empty();var t=new IG$._rpc$;t.init(n,{ack:"helpcontent",payload:{uid:null},mbody:{option:"search",metatypes:"DataSet",pid:"2eaa0e1f-3ee446c4"}},n,(function(t){var a=t.children;a&&$.each(a,(function(t,a){var n=["<tr>",'    <td class="client-avatar"><img alt="image" src=""> </td>','    <td><a data-toggle="tab" href="" class="client-link">'+a.name+"</a></td>","    <td> Tellus Institute</td>",'    <td class="contact-type"><i class="fa fa-envelope"> </i></td>',"    <td> gravida@rbisit.com</td>",'    <td class="client-status"><span class="label label-primary">Active</span></td>',"</tr>"].join("\n"),o=$(n).appendTo(i);$("a",o).bind("click",(function(t){t.stopPropagation(),t.preventDefault(),IG$.changeApp(e,8,a)}))}))}),!1),t.send()}()},_init_dataset_detail:function(e,t,a,n,i){var o,s=t,l=$("#dataset_tab",t._page),c=new IG$.callBackObj(this,(function(i){IG$.$ap._init_dataset_detail(e,t,a,n,i)}));a=a||{},s._datasets=s._datasets||{},s._datasets[a.uid]?o=s._datasets[a.uid]:i&&(a.render=$(i).appendTo(l),o=new IG$._dseditor(a),s._datasets[a.uid]=o),o?$.each(s._datasets,(function(e,t){e==a.uid||o==t?t.show():t.hide()})):IG$._load_html("./html/dw_dataset_editor.html?lang="+window.useLocale,c)},_init_dataset_detail_old:function(e,t,a,n){var i,o,s=t,l=$("#dataset_tab",t._page);if(a=a||{},s._datasets=s._datasets||{},s._datasets[a.uid]&&(i=s._datasets[a.uid]),n){var c=function(){var e=l.width(),t=l.height();clearTimeout(s._tabtimer),e==s._tabw&&t==s._tabw||(console.log("resize tab ",e,t),$.each(s._datasets,(function(a,n){n.setSize&&n.setSize(e,t)})),s._tabw=e,s._tabh=t),s._tabtimer=setTimeout((function(){c()}),10)};s._tabtimer=setTimeout((function(){c()}),10)}if(!i){if(o=$("<div style='width:100%;height:100%;min-height:800px'></div>").appendTo(l),!(i=IG$.createAppPanel(e,a.uid,a.type.toLowerCase()||"dataset",a.name,null,!0,{renderTo:o[0]},new IG$.callBackObj(s,(function(){IG$.$ap._init_dataset_detail(e,t,a,n)})))))return void o.remove();a.target_div=o,a.instance=e,s._datasets[a.uid]=i}$.each(s._datasets,(function(e,t){e==a.uid?t.show():t.hide()}))},_init_report_lists:function(e,t){var a=t,n=$("#report_lists",t._page);(function(){n.empty();var t=new IG$._rpc$;t.init(a,{ack:"helpcontent",payload:{uid:null},mbody:{option:"search",typelist:"Report",pid:"2eaa0e1f-3ee446c4"}},a,(function(t){var a=t.children;a&&$.each(a,(function(t,a){var i=['<div class="faq-item">','        <div class="row">','            <div class="col-md-7">','                <a data-toggle="collapse" href="" class="faq-question">'+a.name+"</a>","                <small>Added by <strong>"+a.modifier+'</strong> <i class="fa fa-clock-o"></i> '+a.updatedatefm+"</small>","            </div>",'            <div class="col-md-3">','                <span class="small font-bold">'+a.owner+"</span>",'                <div class="tag-list">','                    <span class="tag-item">General</span>','                    <span class="tag-item">License</span>',"                </div>","            </div>",'            <div class="col-md-2 text-right">','                <span class="small font-bold">Voting </span><br/>',"                42","            </div>","        </div>",'        <div class="row">','            <div class="col-lg-12">','                <div id="faq1" class="panel-collapse collapse ">','                    <div class="faq-answer">',"                        <p>","                            "+a.description,"                        </p>","                    </div>","                </div>","            </div>","        </div>","    </div>"].join("\n"),o=$(i).appendTo(n);$("a",o).bind("click",(function(t){t.stopPropagation(),t.preventDefault(),IG$.changeApp(e,6,a)}))}))}),!1),t.send()})()},_load_report:function(e,t,a){var n,i,o=t,s=$("#reports_tab",t._page);o._reports=o._reports||{},o._reports[a.uid]&&(n=o._reports[a.uid]),n||(i=$("<div></div>").appendTo(s),a.target_div=i,a.instance=e,n=new IG$.ReportView(a),o._reports[a.uid]=n),$.each(o._reports,(function(e,t){e==a.uid?t.show():t.hide()}))},_init_board:function(e,t,a,n,i){var o=t,s=$("#t_bbs",t._page),l=new IG$._rpc$;s.empty(),a&&($("#btn_write",t._page).bind("click",(function(t){t.preventDefault(),t.stopPropagation(),IG$.changeApp(e,7,{btype:n})})),$("#btn_refresh",t._page).bind("click",(function(a){a.preventDefault(),a.stopPropagation(),IG$.$ap._init_board(e,t,!1,n)}))),l.init(o,{ack:"bbs",payload:{option:"list",cuid:IG$.$ap["bbs_"+n]},mbody:{}},o,(function(t){$.each(t,(function(t,a){var i;"discussion"==n?i=["<tr>",'    <td class="project-status">','        <span class="label label-primary">Active</span>',"    </td>",'    <td class="project-title">','        <a href="" id="btn_title">'+a.title+"</a>","        <br/>","        <small><span>"+IRm$.r1("L_MOD_DATE")+"</span> "+a.mdatefm+"</small>","    </td>",'    <td class="project-completion">',"            <small>Completion with: 48%</small>",'            <div class="progress progress-mini">','                <div style="width: 48%;" class="progress-bar"></div>',"            </div>","    </td>",'    <td class="project-people">','        <a href=""><img alt="image" class="img-circle" src=""></a>',"    </td>",'    <td class="project-actions">','        <a href="#" id="btn_view" class="btn btn-white btn-sm"><i class="fa fa-folder"></i> View </a>','        <a href="#" id="btn_modi" class="btn btn-white btn-sm"><i class="fa fa-pencil"></i> Edit </a>',"    </td>","</tr>"]:"competition"==n&&(i=["<tr>","    <td>",'        <span class="label label-primary">Added</span>',"    </td>",'    <td class="issue-info">','        <a href="#" id="btn_title">ISSUE-23</a>',"       <small>"+a.title+"</small>","    </td>","    <td>","        Adrian Novak","    </td>","    <td>"+a.mdatefm+"</td>","    <td>",'        <span class="pie">0.52,1.041</span>',"        2d","    </td>",'    <td class="text-right">','        <button class="btn btn-white btn-xs"> Tag</button>','        <button class="btn btn-white btn-xs"> Mag</button>','        <button class="btn btn-white btn-xs"> Rag</button>',"    </td>","</tr>"]);var o=$(i.join("\n")).appendTo(s);$("#btn_view",o).bind("click",(function(e){e.preventDefault(),e.stopPropagation()})),$("#btn_title",o).bind("click",(function(t){t.preventDefault(),t.stopPropagation(),IG$.changeApp(e,7,{btype:n,uid:a.uid})})),$("#btn_modi",o).bind("click",(function(t){t.preventDefault(),t.stopPropagation(),IG$.changeApp(e,7,{btype:n,uid:a.uid})}))}))})),l.send()},_init_board_write:function(e,t,a,n){var i,o,s=t,l=a.btype;if(s._edit_item=null,i=$("#frm_bbs_write",t._page).hide(),o=$("#dv_bbs_view",t._page).hide(),$("input[name=bbs_title]",i).val(""),t._note&&t._note.summernote("code",""),n&&(i.submit((function(a){a.preventDefault(),a.stopPropagation();var n,i=$("[name=bbs_content]",t._page);return $("[name=_mts_]",t._page).val(IG$._g$a),i.val(t._note.summernote("code")),n=new FormData(this),window.Pace&&window.Pace.start(),$.ajax({url:ig$.servlet,data:n,type:"POST",async:!0,contentType:!1,processData:!1,timeout:0,beforeSend:function(e,t){},cache:!1,crossDomain:!1,success:function(a,n,o){var c=new IG$._rpc$;c.init(s,{ack:"bbs",payload:{option:"save"},mbody:{title:$("input[name=bbs_title]",t._page).val(),content:i.val(),file:a.result.uid,cuid:IG$.$ap["bbs_"+l]}},s,(function(t){IG$.changeApp(e,3)})),c.send()},error:function(e,t,a){window.Pace&&window.Pace.stop(),IG$.ShowConnectionError(s)}}),!0})),$("#btn_cancel",t._page).bind("click",(function(t){t.preventDefault(),t.stopPropagation(),"competition"==l?IG$.changeApp(e,1):"discussion"==l&&IG$.changeApp(e,3)})),t._note=$(".summernote",t._page).summernote({placeholder:"write here...",disableResizeEditor:!0,height:400})),a.uid){var c=new IG$._rpc$;c.init(null,{ack:"bbs",payload:{option:"get",uid:a.uid},mbody:{}},null,(function(e){o.show(),$("input[name=bbs_title]",i).val(e.title),t._note.summernote("code",e.content),$("#dv_bbs_title",o).text(e.title),$("#dv_bbs_content",o).html(e.content),s._edit_item=e})),c.send()}else i.show()}},IG$.changeApp=function(e,t,a,n){var i=ig$.mainmenu.mainmenu,o=$("#tab_wrapper");$.each(i,(function(i,s){if(i==t){if(!s._page){var l=new IG$.callBackObj(this,(function(n){s._page=$(n).appendTo(o),IG$.update_locale(e,s._page),IG$._cmn_ctrl(s._page),IG$.changeApp(e,t,a,!0)}));return void IG$._load_html(s.template+"?lang="+window.useLocale,l)}switch(s._page.show(),i){case 0:IG$.$ap._init_home(e,s);break;case 1:IG$.$ap._init_board(e,s,n,"competition");break;case 2:IG$.$ap._init_dataset(e,s,n);break;case 3:IG$.$ap._init_board(e,s,n,"discussion");break;case 4:IG$.$ap._init_report_lists(e,s);break;case 6:IG$.$ap._load_report(e,s,a);break;case 7:IG$.$ap._init_board_write(e,s,a,n);break;case 8:IG$.$ap._init_dataset_detail(e,s,a,n)}}else s._page&&s._page.hide()}))},IG$.$loadApp=function(e,t){e.viewport;var a,n,i,o=ig$.mainmenu.mainmenu;parseInt($.cookie("lmopt_w"));if(ig$.$l_=ig$.$l_||0,IG$.__1m||1==IG$.__ep)setTimeout((function(){$("#loading").fadeOut({complete:function(){$(this).remove()}}),$("#loading-mask").fadeOut({complete:function(){$(this).remove()}})}),IG$.__ep?0:100);else{if((t=t||{}).mainview=a=t.mainview||{},a.appmenu=n=a.appmenu||{},a.navitab=a.navitab||{},a.navitree=a.navitree||{},ig$.app_tmpl=t,ig$.theme_id&&(ig$.echarts_theme=ig$.theme_id),IG$.__ep=a.appmenu.printmode,IG$.__ep_m=a.appmenu.runmode?a.appmenu.runmode:0,!n.m_explorer&&o)for(i=0;i<o.length;i++)if("ig_mnav"==o[i].acls){o.splice(i,1);break}setTimeout((function(){$("#loading").fadeOut({complete:function(){$(this).remove()}}),$("#loading-mask").fadeOut({complete:function(){$(this).remove()}}),IG$.__ep_l&&IG$.navigateMenuByUID(e,IG$.__ep_l,void 0,void 0,!1)}),IG$.__ep?0:50)}},IG$._init_dw_menus=function(e){$("#btn_login").bind("click",(function(t){t.preventDefault(),t.stopPropagation(),IG$.showLogout(new IG$.callBackObj(this,(function(){IG$.showLoginProc(e)})))}))},IG$._init_dw_app=function(){function e(){var e=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",e+"px");var t=$("nav.navbar-default").height(),a=$("#page-wrapper").height();t>a&&$("#page-wrapper").css("min-height",t+"px"),t<a&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&(t>a?$("#page-wrapper").css("min-height",t+"px"):$("#page-wrapper").css("min-height",$(window).height()-60+"px"))}$(document).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small"),$(".close-canvas-menu").on("click",(function(){$("body").toggleClass("mini-navbar")})),$("body.canvas-menu .sidebar-collapse").slimScroll({height:"100%",railOpacity:.9}),$(".right-sidebar-toggle").on("click",(function(){$("#right-sidebar").toggleClass("sidebar-open")})),$(".sidebar-container").slimScroll({height:"100%",railOpacity:.4,wheelStep:10}),$(".open-small-chat").on("click",(function(){$(this).children().toggleClass("fa-comments").toggleClass("fa-remove"),$(".small-chat-box").toggleClass("active")})),$(".small-chat-box .content").slimScroll({height:"234px",railOpacity:.4}),$(".check-link").on("click",(function(){var e=$(this).find("i"),t=$(this).next("span");return e.toggleClass("fa-check-square").toggleClass("fa-square-o"),t.toggleClass("todo-completed"),!1})),$(".navbar-minimalize").on("click",(function(){$("body").toggleClass("mini-navbar"),!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")?($("#side-menu").hide(),setTimeout((function(){$("#side-menu").fadeIn(400)}),200)):$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout((function(){$("#side-menu").fadeIn(400)}),100)):$("#side-menu").removeAttr("style")})),$(".tooltip-demo").tooltip({selector:"[data-toggle=tooltip]",container:"body"}),e(),$(window).bind("load",(function(){$("body").hasClass("fixed-sidebar")&&$(".sidebar-collapse").slimScroll({height:"100%",railOpacity:.9})})),$(window).scroll((function(){$(window).scrollTop()>0&&!$("body").hasClass("fixed-nav")?$("#right-sidebar").addClass("sidebar-top"):$("#right-sidebar").removeClass("sidebar-top")})),$(window).bind("load resize scroll",(function(){$("body").hasClass("body-small")||e()})),$("[data-toggle=popover]").popover(),IG$._cmn_ctrl($(document))},IG$._cmn_ctrl=function(e){$(".collapse-link",e).on("click",(function(){var e=$(this).closest("div.ibox"),t=$(this).find("i");e.find("div.ibox-content").slideToggle(200),t.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),e.toggleClass("").toggleClass("border-bottom"),setTimeout((function(){e.resize(),e.find("[id^=map-]").resize()}),50)})),$(".close-link",e).on("click",(function(){$(this).closest("div.ibox").remove()})),$(".fullscreen-link",e).on("click",(function(){var e=$(this).closest("div.ibox"),t=$(this).find("i");$("body").toggleClass("fullscreen-ibox-mode"),t.toggleClass("fa-expand").toggleClass("fa-compress"),e.toggleClass("fullscreen"),setTimeout((function(){$(window).trigger("resize")}),100)})),$(".full-height-scroll",e).slimscroll({height:"100%"})},IG$.update_vars=function(e,t){var a=$("div[amp_type=login]",t||"body"),n=$("div[amp_type=logout]",t||"body");$.each(a,(function(e,t){$(t).show()})),$.each(n,(function(e,t){$(t).hide()}))},IG$.update_locale=function(e,t){var a=$("span[amp_type=locale]",t||"body"),n=$("input[amp_type=placeholder]",t||"body");$.each(a,(function(e,t){var a=$(t),n=a.attr("amp_locale");if(n){var i=IRm$.r1(n);a.text(i)}})),$.each(n,(function(e,t){var a=$(t),n=a.attr("amp_locale");if(n){var i=IRm$.r1(n);a.attr("placeholder",i)}})),IG$.update_vars(e,t)},IG$.createInstance=function(e){$("#lpt","#loading").css("width","80%"),ig$.$l_m=1,webix.ui.fullScreen(),webix.env.touch||webix.CustomScroll.init(),IRm$.r2({func:function(){$("#lpt","#loading").css("width","100%"),setTimeout((function(){var t;IG$.loadExtend.rcsloaded=!0,e.dlgLogin=new IG$.sessionUtils({instance:e}),e.mainPanel=new IG$.MainPanel({name:"_I7d",instance:e}),t={closeText:IRm$.r1("L_C_CLOSE"),prevText:IRm$.r1("L_C_PREV"),nextText:IRm$.r1("L_C_NEXT"),currentText:IRm$.r1("L_C_CUR"),monthNames:IRm$.r1("L_C_M_NAMES").split("#"),monthNamesShort:IRm$.r1("L_C_M_NAMES_S").split("#"),dayNames:IRm$.r1("L_C_D_NAMES").split("#"),dayNamesShort:IRm$.r1("L_C_D_NAMES_S").split("#"),dayNamesMin:IRm$.r1("L_C_D_NAMES_M").split("#"),weekHeader:IRm$.r1("L_C_W_H"),firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:IRm$.r1("L_C_YR_SFX"),c1disp:"yyyy-mm-dd",c1format:"yy-mm-dd",c2disp:"yyyy-mm",c2format:"yy-mm"},$.datepicker.setDefaults(t),IG$.calendar_locale=t,e.m_explorer=null,IG$.update_locale(e),$.each(IG$.loadExtend.items,(function(e,t){IG$.extend(t.name,t.base,t.option)})),$.each(IG$.filteropcodes,(function(e,t){var a=t.lcode;t.locale=IRm$.r1(a)}));var a=$.cookie("lui")||"";IG$.createLoginPanel(e,a,"",!0),IG$.loadMapData(),IG$._init_dw_menus(e),IG$._init_dw_app();var n=new IG$._rpc$;n.init(null,{ack:"helpcontent",payload:{},mbody:{option:"loginstatus",mts:window.m$mts||"ROOT",lang:window.useLocale||""}},null,(function(t){var a=!1;if(t.uuid){if(a=!0,e.dlgLogin.callback=new IG$.callBackObj(this,(function(){IG$.showLoginProc(e)})),e.dlgLogin.uuid=t.uuid,e.dlgLogin.mts={sid:t.mts,name:t.mts_name},IG$._g$a=e.dlgLogin.mts.sid,window.m$mts&&e.dlgLogin.mts.name!=window.m$mts&&e.dlgLogin.mts.sid!=window.m$mts)return void IG$.showLogout(new IG$.callBackObj(this,(function(){IG$.showLoginProc(e)})));e.dlgLogin.lastLogin=t,e.mainPanel&&e.mainPanel.updateLoginInfo.call(e.mainPanel),e.dlgLogin.getUserDetail.call(e.dlgLogin,!1),(hist=new IG$.historyManager).historyListener(),IG$.update_vars(e),"function"==typeof window.callPhantom&&window.callPhantom({_proc:"C"})}0==a&&IG$.showLogin(e,new IG$.callBackObj(this,(function(){IG$.showLoginProc(e)})),0)}),(function(t){return IG$.showLogin(e,new IG$.callBackObj(this,(function(){IG$.showLoginProc(e)})),0),!0})),n.send()}),IG$.__ep?10:30)}})},IG$._n5=function(){var e=ig$.session,t=60*ig$.session_expire,a=!1,n=-1;e&&($(document).bind("mousemove",(function(){e.count=0,0==a&&(n>-1&&(clearTimeout(n),n=-1),n=setTimeout((function(){a=!0;var t=new IG$._rpc$;t.init(null,{ack:"helpcontent",payload:{mode:"write"},mbody:{option:"wake"}},null,(function(t){a=!1,e.count=0}),null),t.send()}),2e3))})),e.timer=setInterval((function(){var a,n=t-e.count,i="",o=0;a=n>60?n-60*(o=Math.floor(n/60)):n,i=o>0?o+" min "+a+" sec":a+" sec",n<300?e.text.addClass("warn-sess-timer"):e.text.removeClass("warn-sess-timer"),e.text.html(i),n<0&&(clearInterval(e.timer),IG$.showLogout(instance,new IG$.callBackObj(this,(function(){IG$.showLoginProc(instance)})))),e.count+=1}),1e3))},IG$.refreshMessages=function(){var e=new IG$._rpc$;e.init(null,{ack:"helpcontent",payload:{mode:"read"},mbody:{option:"rsn",readmode:0}},null,IG$.rs_refreshMessages,(function(e){return!0})),e.showerror=!1,e.send()},IG$.rs_refreshMessages=function(e){var t,a,n,i,o=$("#chatsublist"),s=IG$.XGetNode(e,"/smsg"),l=IG$.XGetChildNodes(s);if(!(l&&l.length>0&&IG$.L_SPPL&&(n=IG$.XGetAttrProp(l[0])).msgid==IG$.L_SPPL)&&(o.empty(),o.append($("<li class='view'><span><a href='javascript:f$7(\"CMD_RSN\")'>Write Message</a></span></li>")),l&&l.length>0))for(i=Math.min(5,l.length),IG$.L_SPPL&&$("#alertstext").text("Messages (New)"),t=0;t<i;t++)n=IG$.XGetAttrProp(l[t]),0==t&&(IG$.L_SPPL=n.msgid),a="<li><a href='#' class='delete'>X</a><p><span style='color:#0000ff;'>"+(n.username||"")+": </span><br>"+IG$.XGetTextVal(l[t])+" <br><span style='color:#4d4d4d; font-size: 9px; float: right'>("+(IG$.getFormattedDate(n.updatedate,!0)||"")+")</span></p></li>",o.append($(a))},IG$.setWeb3TopMenu=function(e){var t,a=$("#side-menu"),n=$("#mainFooter",a),i=a,o=$("#innerLogo",a),s=ig$.mainmenu,l=ig$.features;$(".ig-c-button",o);if(ig$.$l_=ig$.$l_||0,s){if(s.footmenu){for(t=0;t<s.footmenu.length;t++)s.footmenu[t].html&&(s.footmenu[t].html.remove(),s.footmenu[t].html=null);$.each(s.footmenu,(function(t,a){if("ig_sw_app"!=a.acls&&"ig_pref"!=a.acls||!(ig$.$l_>5)){var i=$("<li"+(a.acls?" class='"+a.acls+"'":"")+"><span>"+(a.rcs?IRm$.r1(a.rcs):a.text)+"</span></li>");n.prepend(i),i.bind("click",(function(){a.handler?a.handler.call(this):"logout"==a.cmd?IG$.showLogout(e,new IG$.callBackObj(this,(function(){IG$.showLoginProc(e)}))):a.cmd&&IG$.procMenuCommand(e,a.cmd)})),a.html=i}}))}if(s.mainmenu&&l){for(t=0;t<s.mainmenu.length;t++)s.mainmenu[t].html&&(s.mainmenu[t].html.remove(),s.mainmenu[t].html=null);$.each(s.mainmenu,(function(t,a){if((!a.acls||!1===l[a.acls])&&"column"==a.type){var n=$("<li class='"+(a.cls||"")+"'></li>").appendTo(i),o=$("<a href=''><i class='"+(a.icon||"")+"'></i><span class='nav-label'>"+(a.rcs?IRm$.r1(a.rcs):a.text)+"</span></a>").appendTo(n);if(a.info&&(n.info_html=$("<span class='label label-info pull-right'>62</span>").appendTo(o)),a.cmd?IG$.procMenuCommand(e,cmd):a.handler,o.bind("click",(function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1})),o.bind("mousedown",(function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1})),o.bind("mouseup",(function(t){var i,o,l=$(".flyout",n),c=1;return t.preventDefault(),t.stopImmediatePropagation(),l&&l.length>0&&4!=lindex&&(i=a.sv,$(".flyout").hide(),$.each(s.mainmenu,(function(e,t){t!=a&&(t.sv=0)})),i?(a.sv=0,c=1):(a.sv=1,l.show(),$(document).bind("mouseup",void 0),c=0)),1==c&&(o=a,$.each(s.mainmenu,(function(e,t){t==o?t.html&&t.html.addClass("active"):t.html&&t.html.removeClass("active")})),o.handler&&o.handler(e)),!1})),a.html=n,a.menus&&a.menus.length&&"column"==a.type){var c=$("<span class='fa arrow'></span>").appendTo(o),r=$("<ul class='nav nav-second-level collapse'>").appendTo(n);a.handler&&ig$.$l_<5&&$(".rightRaquoBlue",c).bind("click",(function(){a.handler()})),$.each(a.menus,(function(t,a){var n=$("<div class='column"+(a.acls?" "+a.acls:"")+"'><h6>"+(a.rcs?IRm$.r1(a.rcs):a.text)+"</h6></div>").appendTo(r);if("list"==a.type){var i=$("<ul class='"+(a.acls||"")+"'></ul>").appendTo(n);$.each(a.items,(function(t,a){$("<li class='chevronLink"+(a.acls?" "+a.acls:"")+"'><span class='icon'></span><span class='title'>"+(a.rcs?IRm$.r1(a.rcs):a.text)+"</span></li>").appendTo(i).bind("click",(function(){a.cmd&&IG$.procMenuCommand(e,a.cmd)}))}))}else if("image"==a.type){var o,s;o=a.src&&$("<img src='"+a.src+"'></img>").appendTo(n),s=a.desc&&$("<h3>"+a.desc+"</h3>").appendTo(n),a.cmd&&(o.bind("click",(function(){IG$.procMenuCommand(e,a.cmd)})),s.bind("click",(function(){IG$.procMenuCommand(e,a.cmd)})))}}))}}}))}s.afterrender&&s.afterrender.call(this,s)}},IG$.showLoginProc=function(e){var t=$("#loginWindow",e.target),a=$("#userid");t.hide(),$("#logo_txt").html(ig$.application_title_html||ig$.application_title),e.m_explorer&&e.m_explorer.initData.call(e.m_explorer),lastHist=null,hist||(hist=new IG$.historyManager),hist.historyListener(),a&&a.length>0&&(a[0].value=e.dlgLogin.logininfo.userid),IG$.__ep||(IG$.setWeb3TopMenu(e),IG$.changeApp(e,0))};
IG$.MainPanel=$s.extend($s.panel,{margin:"0 0 0 0",resizeTabs:!0,minTabWidth:100,enableTabScroll:!0,activeTab:0,layout:{type:"card",deferredRender:!1},deferredRender:!1,hidemode:"offset",tabPosition:"top",removePanelHeader:!0,plain:!1,minTabWidth:void 0,maxTabWidth:void 0,___tabseq:0,customAddTab:function(t,e){var i=this.getComponent(t);i?(IG$.changeApp(2),this.setActiveTab(i)):(IG$.changeApp(2),e.id=t,i=this.add(e),this.setActiveTab(i))},navigateApp:function(t,e,i,a,n,s,o,l){var c,d=e+"_"+(t||this.___tabseq++),r=this.getComponent(d);if(r){if(IG$.changeApp(2),this.setActiveTab(r),l&&r.applyOption)r.applyOption.call(r,l);else if("dashboard"==e){this.getComponent("dashboardedit_"+t)&&r.uid&&r.uid.length>0&&r.procRunDashboard.call(r)}}else{var p=new IG$.callBackObj(this,(function(){this.navigateApp(t,e,i,a,n,s,o,l)})),m=IG$.createAppPanel(this.instance,t,e,i,a,s,o||null,p);if(m){if(m.address=a,m.title=IG$.getTabTitle(i),o)for(c in o)m[c]=o[c];if(l)for(c in l)m[c]=l[c];if(1==m.isWindow)n=!1,m.title=IG$.getTabTitle(i)+" ("+IRm$.r1("D_"+e.toUpperCase())+")",IG$.ps[m.address]||(IG$.ps[m.address]=m,m.on("close",(function(){delete IG$.ps[m.address]})),m.show());else{IG$.changeApp(2),m.id=d,this.selectedIndex=this.selectedIndex<0?0:this.selectedIndex;var g=this.add(m);this.setActiveTab(g)}}else n=!1}1==n&&t&&e&&(lastHist="&p1="+e+"&p2="+t,setTimeout((function(){hist.addHistory(lastHist)}),10))},initRecentVisit:function(){var t,e,i=this,a=$("#mbutton1"),n=($("#idv_recitems"),$("#welcome"));i.mviewer={mode:"recent",mrecenttext:a.text()},a.unbind("click"),a.bind("click",(function(){i.loadRecentVisit.call(i)}));t=[{title:"Step by Step",cls:"getting_started",handler:function(){IG$.procMenuCommand(instance,"CMD_APP_WIZARD")}},{title:"Navigator",cls:"navigator",handler:function(){var t;((t=i.down("[name=mexplorer]"))&&!t.isVisible()||instance.m_explorer&&ig$.app_tmpl&&ig$.app_tmpl.mainview&&ig$.app_tmpl.mainview.navitree&&!1!==ig$.app_tmpl.mainview.navitree.hidden)&&IG$.changeApp(1)}},{title:"About",cls:"about_app",handler:function(){IG$.procMenuCommand(instance,"CMD_ABOUT")}}],(e=$("#pg_links",n)).empty(),$.each(t,(function(t,i){if(!i.hidden){var a=$("<div class='intro-pg-column'><div class='intro-figure'><div class='image' title='"+i.title+"'><span class='"+i.cls+"'></span></div><div class='intro-figure-caption'><span class='intro-links'>"+i.title+"</span></div></div></div>");a.appendTo(e),a.length>0&&i.handler&&($(".image",a).bind("click",(function(){i.handler()})),$(".intro-links",a).bind("click",(function(){i.handler()}))),i.el=a}})),i.__pg_linksitems=t,i.updateLoginInfo(),i.loadRecentVisit()},initAdminMenu:function(){var t,e=IG$.dmgrmenu.body.dom,i=$(".ig-mgr-body",e),a=$(".ig-mgr-panel-close",e),n=ig$.mainmenu.mainmenu;i.empty(),a.bind("click",(function(){IG$.procMenuCommand(instance,"CMD_HOME")})),n&&$.each(n,(function(e,a){t=$("<ul class='ig-mgr-group'></ul>").appendTo(i),a.tul=t,a.tul.hide(),a.menus&&$.each(a.menus,(function(e,i){var a=$("<li class='ig-mgr-group-item "+(i.acls||"")+" animate-box fadeInLeft animated'><div class='ig-mgr-title'><span class='icon'></span><h3>"+(IRm$.r1(i.rcs)||i.text)+"</h3></div><ul class='ig-mgr-menu'></ul></li>").appendTo(t),n=$(".ig-mgr-menu",a);$.each(i.items,(function(t,e){$("<li class='ig-mgr-menu-item "+(e.acls||"")+"'>"+(IRm$.r1(e.rcs)||e.text)+"</li>").appendTo(n).bind("click",(function(){e.handler?e.handler.call(this):"logout"==e.cmd?IG$.showLogout(instance,new IG$.callBackObj(this,(function(){IG$.showLoginProc(instance)}))):e.cmd&&IG$.procMenuCommand(instance,e.cmd)}))}))}))}))},updateLoginInfo:function(){var t,e,i,a,n,s,o,l=this.instance,c=$("#last_login"),d=(l.viewport,l.dlgLogin?l.dlgLogin.logininfo:null);$("#home_app_title").html(ig$.home_app_title||IRm$.r1("L_HOME_APP_TITLE")),$("#home_app_desc").html(ig$.home_app_desc||IRm$.r1("L_HOME_APP_DESC")),$("#mbutton1").html(IRm$.r1("L_T_RECENT_VISIT")),IG$.update_vars(l),c&&c.length>0&&d&&l.dlgLogin.lastLogin&&(s=$(".last_login_time",c),o=$(".last_login_host",c),n=$(".cur_login_host",c),i=$(".cur_login_user_id",c),a=$(".cur_login_user_nm",c),t=l.dlgLogin.lastLogin.lastaccesstime,i.text(d.userid),a.text(d.username),t&&(e=IG$.formatDate(t),s.text(e),o.text(l.dlgLogin.lastLogin.lastaccessaddr),n.text(l.dlgLogin.lastLogin.accessaddr)))},loadRecentVisit:function(){$("#idv_recitems");var t=new IG$._rpc$;t.init(this,{ack:"helpcontent",payload:{},mbody:{option:"bookmarks"}},this,this.rs_loadContent,null,null),t.send()},rs_loadContent:function(t){var e,i,a=$("#idv_recitems"),n=$("#idv_recitems_ds"),s=[],o={},l=this.instance;if(a.empty(),n.empty(),a){for(e=0;e<t.length;e++)"Report"!=(i=t[e]).type&&"DataSet"!=i.type||(o[i.uid]?o[i.uid].fatype="F"==i.fatype?i.fatype:o[i.uid].fatype:(o[i.uid]=i,s.push(i)));s.sort((function(t,e){var i=0;return t.type!=e.type&&(i=t.type>e.type?1:-1),i})),this.shortcuts={},$.each(s,(function(t,e){var i,s,o=e.type.toUpperCase(),c=e.fab_mdateprd,d=e.fab_mdatefmt;c<60?d=c+" sec":c<3600?d=Math.floor(c/60)+" min":c<86400?d=Math.floor(c/3600)+" hour":c<864e3&&(d=Math.floor(c/86400)+" days"),"REPORT"==o?(i=['<li class="list-group-item" title="'+e.nodepath+'">','    <a href="#">'+e.name+"</a>"+("F"==e.fatype?"<span class='ig-fa-mark'></span>":""),'    <small class="text-muted"><i class="fa fa-clock-o"></i> '+d+"</small>","</li>"],s=$(i.join("")).appendTo(a)):"DATASET"==o&&(i=['<div class="timeline-item">','    <div class="row">','        <div class="col-xs-12 content no-top-border" style="min-height:initial">','            <p class="m-b-xs"><a href=""><strong>'+e.name+'</strong></a> <small class="text-navy"><i class="fa fa-clock-o"></i> '+d+"</small></p>",e.description?"            <p>"+e.description+"</p>":"","        </div>","    </div>","</div>"],s=$(i.join("")).appendTo(n)),$("a",s).bind("click",(function(t){t.preventDefault(),t.stopPropagation(),"REPORT"==o?IG$.changeApp(l,6,e):"DATASET"==o&&IG$.changeApp(l,8,e)}))}))}},deferredRender:!0,onAdd:function(t,e){$s.tabpanel.prototype.onAdd.call(this,t,e)},initComponent:function(){var t=this,e=t.instance,i=([].concat(t.dockedItems||[]),t.activeTab||(t.activeTab=0));t.tabPosition;t.layout={owner:t,type:"card",deferredRender:t.deferredRender,itemCls:t.itemCls,activeItem:i},e.mainPanelTabBar=new $s.tabbar({xtype:"tabbar",ui:t.ui,dock:"top",id:"ig-tabbar",cls:"ig-main-tabbar",flex:1,orientation:"horizontal",plain:!0,cardLayout:t.layout,tabPanel:t,padding:0,margin:0,bodyPadding:0,listeners:{tabclick:function(t,e,i){IG$.changeApp(2)}}}),t.tabBar=e.mainPanelTabBar,IG$.MainPanel.superclass.initComponent.call(this),t.setActiveTab=function(e){IG$.changeApp(2),$s.tabpanel.prototype.setActiveTab.call(t,e)},t.getActiveTab=$s.tabpanel.prototype.getActiveTab,t.getTabBar=$s.tabpanel.prototype.getTabBar,t.onItemEnable=$s.tabpanel.prototype.onItemEnable,t.onItemDisable=$s.tabpanel.prototype.onItemDisable,t.onRemove=function(i,a){if($s.tabpanel.prototype.onRemove.call(t,i,a),0==t.items.length){e.m_explorer;IG$.changeApp(IG$.__atab)}},i&&t.tabBar.setActiveTab(i.tab,!0)},listeners:{beforeadd:function(t,e,i,a){var n,s=this.getTabBar(),o=ig$.maxtapcount||0;o>0&&this.items.length>=o&&(n=this.items.items[0],this.remove(n),s&&s.$ex&&n.tab&&void 0!==n.tab.tabid&&s.$ex.removeOption(n.tab.tabid))}}});
ig$.mainmenu={mainmenu:[{rcs:"S_HOME",type:"column",icon:"fa fa-th-large",template:"html/dw_intro.html",handler:function(t){IG$.procMenuCommand(t,"CMD_HOME")}},{rcs:"L_COMPETITION",type:"column",icon:"fa fa-diamond",template:"html/dw_competition.html",handler:function(t){IG$.procMenuCommand(t,"CMD_COMPETITION")}},{rcs:"B_DATASET",type:"column",icon:"fa fa-bar-chart-o",template:"html/dw_dataset.html",handler:function(t){IG$.procMenuCommand(t,"CMD_DATASET")}},{rcs:"L_DISCUSSIONS",type:"column",icon:"fa fa-magic",template:"html/dw_discussion.html",info:!0,handler:function(t){IG$.procMenuCommand(t,"CMD_DISCUSSION")}},{rcs:"L_WORKS",type:"column",icon:"fa fa-star",template:"html/dw_works.html",handler:function(t){IG$.procMenuCommand(t,"CMD_WORKS")}},{rcs:"L_CREATE",type:"column",cls:"special_link",icon:"fa fa-database",handler:function(t){IG$.procMenuCommand(t,"CMD_BROWSER")}},{type:"app",region:"report",template:"html/dw_report.html"},{type:"app",region:"bbs",template:"html/dw_discusssion_write.html"},{type:"app",region:"dataset",template:"html/dw_dataset_detail.html"}]};
IG$.procMenuCommand=function(e,a,_){var r,n,c,s,i,I,t=a.toLowerCase(),M={},l="igcm",D=e.mainPanel||null;switch(a){case"CMD_PASSWORD_CHANGE":r=new IG$.passwordMgr({instance:me.instance}),IG$.checkLogin(null,r);break;case"CMD_PREF":r=new IG$.userpref({instance:me.instance}),IG$.checkLogin(null,r);break;case"CMD_MAKE_WORKSPACE":r=new IG$.makeItem({instance:me.instance,itemtype:"Folder",parentnodepath:"/",parentuid:"/"}),IG$.checkLogin(null,r);break;case"CMD_SW_APP":r=new IG$.workspace_switcher({instance:me.instance}),IG$.checkLogin(null,r);break;case"CMD_SERVER_CONFIG":break;case"CMD_HELP_MGR":i="helpManage",s=t,c=IRm$.r1("I_HELP_MGR");break;case"CMD_LOCALE":i="resourcemgr",s=t,c=IRm$.r1("I_LOC_MGR");break;case"CMD_DLOCALE":i="resourcemgr",s=t,M.dicmode=1,c=IRm$.r1("I_DLOC_MGR");break;case"CMD_META_IMP":i="metaImport",s=t,c=IRm$.r1("I_META_IMP");break;case"CMD_META_EDIT":i="MetaEditorPanel",s=t,c=IRm$.r1("I_META_EDIT"),M.uid=_.uid;break;case"CMD_META_MIG":i="mgr_deploy",s=t,c=IRm$.r1("I_META_MIG");break;case"CMD_RELATION_VIEW":s=t,i="relationMgr",c=IRm$.r1("L_RELATION_VIEW");break;case"CMD_TABLE_REGISTER":s=t,i="tableManager",c=IRm$.r1("L_MGR_DATABASE"),l="igcn";break;case"CMD_LOOKUP":s=t,i="systemlookup",c=IRm$.r1("L_S_LK");break;case"CMD_CONNECT_DB":s=t,i="mgrdb_config",c=IRm$.r1("L_REG_DATABASE");break;case"CMD_ABOUT":r=new IG$.aboutApp,IG$.checkLogin(null,r);break;case"CMD_USER_MANAGER":s=t,i="mgrUser",c=IRm$.r1("L_MGR_USER");break;case"CMD_SYS_CONFIG":s=t,i="mgrSysCfg",c=IRm$.r1("L_SYS_CONFIG");break;case"CMD_ASSIST_ROBO":s=t,i="mgrColab",c=IRm$.r1("L_ASSIST_ROBO");break;case"CMD_VAR":case"CMD_BD_CONFIG":s=t,i="hadoop_config",l="igc9",c=IRm$.r1("I_BD_CONFIG");break;case"CMD_DBD_MGR":s=t,i="mgr_dashboard",c=IRm$.r1("I_MGR_DBD");break;case"CMD_FEATURES":s=t,i="mgrFeatures";break;case"CMD_REPORT_STYLE":s=t,M.title=IRm$.r1("T_GLOBAL_REPORT_STYLE"),M.styletype="g",i="styleWizard";break;case"CMD_RSN":r=new IG$.rsn_editor({instance:me.instance}),IG$.checkLogin(null,r);break;case"CMD_SYSMON":i="sysmon",s=t,M.title=IRm$.r1("L_SYS_LOG");break;case"CMD_SYSRES":i="sys_resource",s=t;break;case"CMD_SCHEDULE":s=t,i="scheduler",c=IRm$.r1("I_SCHEDULE");break;case"CMD_SCH_PROG":s=t,i="sch_prog",c=IRm$.r1("I_SCHEDULE_MOD"),M.mod_type=_,"single_sign_on"==_&&(c="SingleSignOn");break;case"CMD_CHART_DSGN":s=t,i="chart_dsgn",c="Chart Coder";break;case"CMD_HOME":IG$.changeApp(e,0);break;case"CMD_DATASET":IG$.changeApp(e,2);break;case"CMD_COMPETITION":IG$.changeApp(e,1);break;case"CMD_DISCUSSION":IG$.changeApp(e,3);break;case"CMD_WORKS":IG$.changeApp(e,4);break;case"CMD_BROWSER":var o=e.viewport.down("[name=mexplorer]");o&&!o.isVisible()&&IG$.changeApp(e,1);break;case"CMD_TABPANEL":IG$.changeApp(e,2);break;case"CMD_WIZARD":case"CMD_APP_WIZARD":var m,C=$(document),R=C.width(),b=C.height();if(ig$.$l_>5)return G=(G=window.useLocale).substring(0,G.indexOf("_")),void window.open("../manual/"+G,"_blank");!IG$.app_wizard&&IG$.ltW&&(IG$.app_wizard=new IG$.dlgSmartWizard({instance:e})),(m=IG$.app_wizard)&&(m.setSize(.8*R,.8*b),IG$.showDlg(null,m));break;case"CMD_SYNC_USER":s=t,M.uid=_,i="sync_user",c=IRm$.r1("T_SYNC_USER");break;case"CMD_MN_MENUS":IG$.changeApp(e,4,_);break;case"CMD_HD_BFLOW":case"CMD_MONG_DATA":I="CMD_HD_BFLOW"==a?"BigData":"MongoData",D&&D.navigateApp.call(D,null,I.toLowerCase(),I,null,null,!0);break;case"CMD_MONG_MAPR":case"CMD_HD_MAPR":s=t,i="relationMgr",M._cmode=2,c=IRm$.r1("L_HD_BFLOW");break;case"CMD_ML_BAYES":var E=IG$._app_module_.bayesnet;if(i=E.name,l=E.modetype,c=c||E.opt.itemtype,E.opt)for(k in E.opt)M[k]=E.opt[k];break;case"CMD_D_MENU":s=t,i="dashboardmenu",c=t;break;case"CMD_REVISION":s=t,M.uid=_,i="mgrRevision",c=IRm$.r1("T_REVISION");break;case"CMD_TRASHBIN":s=t,M.uid=_,i="mgr_trashbin",c=IRm$.r1("L_TRASHBIN");break;case"CMD_MG_DISCO":s=t,M.uid=_,i="mg_disco",l="mg_disco",c=IRm$.r1("T_MIG_DISCO");break;case"CMD_MG_UPGRADE":itemuid=t,M.uid=_,i="mg_meta",l="mg_meta",c=IRm$.r1("T_MIG_META_UPGRADE");break;case"CMD_NEW_REPORT":s=t,i="ReportView",c="Report",(M=M||{}).writable=!0,M.opt_editmode=!0;break;case"CMD_NEW_SQL_REPORT":s=t,i="SQLReportView",c="SQLReport",(M=M||{}).writable=!0,M.opt_editmode=!0;break;case"CMD_NEW_DASHBOARD":s=t,i="DashboardEdit",l="igc7",c="Dashboard";break;case"CMD_MANUAL_AUTH":s=t,i="MgrManual",l="mg_meta",c=IRm$.r1("T_MGR_MANUAL");break;case"CMD_NEW_BOBJECT":return void IG$.create_meta(e);case"CMD_APP_HELP":var G="en";return"ko_KR"==window.useLocale&&(G="ko"),void window.open("../manual/"+G+"/","_blank")}if(i&&e.mainPanel){var d=e.mainPanel.getComponent.call(e.mainPanel,s);if(d)e.mainPanel.setActiveTab.call(e.mainPanel,d),"cmd_revision"==t&&d.loadUID.call(d,_);else if(M.instance=e,IG$[i]?(n=new IG$[i](M),c||(c=n.title)):(scripts=ig$.bootconfig.scmap[l],IG$.getScriptCache(scripts,new IG$.callBackObj(this,(function(){if(IG$[i])if(n=new IG$[i](M),c||(c=n.title),n.id=s,n.address=s,n.title=IG$.getTabTitle(c),1==n.isWindow)IG$.checkLogin(null,n);else{var a=e.mainPanel.add.call(e.mainPanel,n);e.mainPanel.setActiveTab.call(e.mainPanel,a)}else IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))})))),n)if(n.id=s,n.address=s,n.title=IG$.getTabTitle(c),1==n.isWindow)IG$.checkLogin(null,n);else{var A=e.mainPanel.add.call(e.mainPanel,n);e.mainPanel.setActiveTab.call(e.mainPanel,A)}}};
IG$._dseditor=function(e){this.opt=e,this.render=e.render,this.uid=e.uid,this._init()},IG$._dseditor.prototype={_init:function(){$("#dataset_form",this.render).steps({bodyTag:"fieldset",onStepChanging:function(e,t,n){return!0},onStepChanged:function(e,t,n){},onFinishing:function(e,t){return!0},onFinished:function(e,t){}}),this.uid&&this.loadContent()},show:function(){this.render&&this.render.show()},hide:function(){this.render&&this.render.hide()},loadContent:function(){var e=new IG$._rpc$;e.init(this,{ack:"content",payload:{uid:this.uid,revision:this.revision},mbody:{option:"content"}},this,(function(e){this._mc=e.content||{},this.loadJoins(),this.loadUserDB(!0)})),e.send()},loadJoins:function(){var e,t,n,a=this._mc.joins,i=[];if(a&&a.length)for(n=0;n<a.length;n++)(t={stable:(e=a[n]).source?e.source.tableuid:null,sfield:e.source?e.source.uid:null,stablename:e.source?e.source.tablename:null,stablelabel:e.source?e.source.tablelabel:null,sfieldname:e.source?e.source.name:null,ttable:e.target?e.target.tableuid:null,tfield:e.target?e.target.uid:null,ttablename:e.target?e.target.tablename:null,ttablelabel:e.target?e.target.tablelabel:null,tfieldname:e.target?e.target.name:null,oprel:e.join}).sdesc=(t.stablelabel||t.stablename)+"."+t.sfieldname,t.tdesc=(t.ttablelabel||t.ttablename)+"."+t.tfieldname,i.push(t)},loadUserDB:function(e){var t=new IG$._rpc$,n=this.bobj_datasource?this.bobj_datasource.uid:null;t.init(this,{ack:"userdb",payload:{address:"/Connections",option:"list"},mbody:{}},this,(function(t){var a,i,l=this,s=t.children,o=[];if(s&&s.length){for(a=0;a<s.length;a++)s[a].attributes&&"T"==s[a].attributes.attrb1&&!s[a].scid&&(o.push(s[a]),n&&n==s[a].uid&&(i=s[a]));if(l.bobj_uid)return l._mc.datasource=i||null,void l._startapp();var r;if(o.length){if(l._mc.datasource)for(a=0;a<o.length;a++)if(o[a].uid==l._mc.datasource.uid){r=o[a];break}if(!r&&l._mc.datasource)return void IG$.ShowError(IRm$.r1("E_DS_NOT_ALLOW_UPLOAD"),l);if(!e||e&&!l._mc.datasource_selected)return dlg=new IG$.dlg_select_ds({instance:l.instance,datasource:l._mc.datasource,callback:new IG$.callBackObj(l,(function(e){l._mc.datasource=e?{uid:e.data.uid,name:e.data.name}:null,l._mc.datasource||IG$.alertmsg(ig$.appname,"File upload will be on temporary filespaces!",null,l,1,"info",null,null,null,0),l._startapp()}))}),void IG$.checkLogin(l,dlg);l._startapp()}else e||(IG$.alertmsg(ig$.appname,"File upload will be on temporary filespaces!",null,l,1,"info",null,null,null,0),l._mc.datasource=null),l._startapp()}else e&&l._startapp()}),!1),t.send()},_startapp:function(){var e=this,t=$("#ds_files",e.render);$.each(e._mc.datafiles,(function(e,n){var a=['<li class="list-group-item" title="'+n.nodepath+'">','    <a href="#">'+n.filename+"</a>",'    <small class="text-muted"><i class="fa fa-clock-o">'+n.sheetname+"</i></small>","</li>"];tdiv=$(a.join("")).appendTo(t)})),e._set_ds(),e.uid?e.getTbls():e.uploadFile()},_set_ds:function(){this._mc},getTbls:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"content",payload:{uid:e.uid},mbody:{subfolder:"T"}},e,(function(t){var n,a,i=t&&t.children?t.children:null,l=$("#m1",e.render),s=$("m1f",e.render),o=[];if(i)for(a=0;a<i.length;a++)n=i[a],o.push(n);$.each(o,(function(t,n){var a,i=['<li class="list-group-item" title="'+n.nodepath+'">','    <a href="#">'+n.name+"</a>",'    <small class="text-muted"><i class="fa fa-clock-o">'+n.sheetname+"</i></small>","</li>"];a=$(i.join("")).appendTo(l),$("a",a).bind("click",(function(t){t.preventDefault(),t.stopPropagation(),e.load_fields(n)}))})),s.empty(),o.length&&e.load_fields(o[0])})),t.send()},load_fields:function(e){var t=this,n=new IG$._rpc$,a=e.uid;a&&(n.init(t,{ack:"content",payload:{uid:a},mbody:{subfolder:"T"}},t,(function(e){var n=e&&e.children?e.children:null,a=$("#m1f",t.render);$.each(n,(function(e,t){t.pname=t.attributes&&t.attributes.attrb3?t.attributes.attrb3:""})),n.sort((function(e,t){return e.pname&&t.pname&&"column_"==e.pname.substring(0,7)&&"column_"==t.pname.substring(0,7)?parseInt(e.pname.substring(7))-parseInt(t.pname.substring(7)):e.pname?1:t.pname?-1:0})),$.each(n,(function(e,t){var n=['<li class="list-group-item" title="'+t.nodepath+'">','    <a href="#">'+t.name+"</a>",'    <small class="text-muted"><i class="fa fa-clock-o">'+t.sheetname+"</i></small>","</li>"];$(n.join("")).appendTo(a)}))})),n.send())}};