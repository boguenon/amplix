var hist,lastHist;IG$.historyManager=function(){this.addHistory=function(e){unFocus.History.addHistory(e)},this.hasMenu=function(){var e=unFocus.History.getCurrent();if(e&&""!=e){var n,i,a,t,o,s,l,r=e.split("&");for(a=0;a<r.length;a++)if((s=(l=r[a]).indexOf("="))>0)switch(t=l.substring(0,s),o=l.substring(s+1),t){case"lang":break;case"p1":n=o;break;case"p2":i=o}if(n&&i)return!0}return!1},this.historyListener=function(){var e=unFocus.History.getCurrent();return null!=e&&""!=e&&IG$.dlgLogin.logininfo&&IG$.navigateMenu(e),e},unFocus.History.addEventListener("historyChange",this.historyListener)},IG$.navigateMenu=function(e){if(e&&e.length>0&&lastHist!=e){if(IG$.checkUID(e))i=e;else{var n,i,a,t,o,s,l,r=e.split("&");for(a=0;a<r.length;a++)if((s=(l=r[a]).indexOf("="))>0)switch(t=l.substring(0,s),o=l.substring(s+1),t){case"lang":break;case"p1":n=o;break;case"p2":i=o}}i&&IG$.navigateMenuByUID(i,n)}},IG$.navigateMenuByUID=function(e,n,i,a){var t=new IG$._rpc$;t.init(null,{ack:"helpcontent",payload:{uid:e},mbody:{option:"translate"}},null,(function(e){var t=e[0],o=t.uid,s=t.type.toLowerCase(),l=t.locale_name||t.name,r=t.nodepath,c=t.manage||t.writable,d=!1;if("dashboard"==s&&"dashboardedit"==n?s=n:"export"==s&&(d=!0,s="report"),1==d){var m=$(document),p=$("#main"),u={renderTo:p[0],minHeight:m.height(),address:r,closable:!1,_ts_:!1,hiddenstatusbar:!0,hiddentoolbar:!0,header:!1,title:IG$.getTabTitle(l)};pitem=IG$.createAppPanel(o,s,l,r,c,u),pitem.on({_lc0:function(){},_lc1:function(){var e=pitem.calcSize.call(pitem);pitem.setSize(e.width,e.height)},resize:function(e,n,i,a,t,o){var s=$(document.body);IG$.j$ext._w(p,n),IG$.j$ext._h(p,i),IG$.j$ext._w(s,n),IG$.j$ext._h(s,i)}}),pitem.updateLayout(),pitem.setSize(m.width(),m.height()),p.css({minHeight:m.height()+"px"})}else IG$.mainPanel.navigateApp.call(IG$.mainPanel,o,s,l,r,void 0===a||a,c,null,i)}),null),t.send()},IG$.changeApp=function(e,n,i){var a,t,o=ig$.mainmenu.mainmenu,s=$("#tab_wrapper");a=function(e){var n=e,i=$("#report_lists",e._page);(function(){i.empty();var e=new IG$._rpc$;e.init(n,{ack:"helpcontent",payload:{uid:null},mbody:{option:"search",typelist:"Report"}},n,(function(e){var n=e.children;n&&$.each(n,(function(e,n){var a=['<div class="faq-item">','        <div class="row">','            <div class="col-md-7">','                <a data-toggle="collapse" href="" class="faq-question">'+n.name+"</a>","                <small>Added by <strong>"+n.modifier+'</strong> <i class="fa fa-clock-o"></i> '+n.updatedatefm+"</small>","            </div>",'            <div class="col-md-3">','                <span class="small font-bold">'+n.owner+"</span>",'                <div class="tag-list">','                    <span class="tag-item">General</span>','                    <span class="tag-item">License</span>',"                </div>","            </div>",'            <div class="col-md-2 text-right">','                <span class="small font-bold">Voting </span><br/>',"                42","            </div>","        </div>",'        <div class="row">','            <div class="col-lg-12">','                <div id="faq1" class="panel-collapse collapse ">','                    <div class="faq-answer">',"                        <p>","                            "+n.description,"                        </p>","                    </div>","                </div>","            </div>","        </div>","    </div>"].join("\n"),t=$(a).appendTo(i);$("a",t).bind("click",(function(e){e.stopPropagation(),e.preventDefault(),IG$.changeApp(6,n)}))}))}),!1),e.send()})()},t=function(e){var i,a,t=e,o=$("#reports_tab",e._page);t._reports=t._reports||{},t._reports[n.uid]&&(i=t._reports[n.uid]),i||(a=$("<div></div>").appendTo(o),n.target_div=a,i=new IG$.report(n),t._reports[n.uid]=i),$.each(t._reports,(function(e,i){e==n.uid?i.show():i.hide()}))},$.each(o,(function(i,o){if(i==e){if(!o._page){var l=new IG$.callBackObj(this,(function(i){o._page=$(i).appendTo(s),IG$._cmn_ctrl(o._page),IG$.changeApp(e,n,!0)}));return void IG$._load_html(o.template+"?lang="+window.useLocale,l)}switch(o._page.show(),i){case 0:case 1:case 2:case 3:break;case 4:a(o);break;case 6:t(o)}}else o._page&&o._page.hide()}))},IG$.$loadApp=function(e){IG$.viewport;var n,i,a,t=ig$.mainmenu.mainmenu;parseInt($.cookie("lmopt_w"));if(ig$.$l_=ig$.$l_||0,IG$.__1m||1==IG$.__ep)setTimeout((function(){$("#loading").fadeOut({complete:function(){$(this).remove()}}),$("#loading-mask").fadeOut({complete:function(){$(this).remove()}})}),IG$.__ep?0:100);else{if((e=e||{}).mainview=n=e.mainview||{},n.appmenu=i=n.appmenu||{},n.navitab=n.navitab||{},n.navitree=n.navitree||{},ig$.app_tmpl=e,ig$.theme_id&&(ig$.echarts_theme=ig$.theme_id),IG$.__ep=n.appmenu.printmode,IG$.__ep_m=n.appmenu.runmode?n.appmenu.runmode:0,!i.m_explorer&&t)for(a=0;a<t.length;a++)if("ig_mnav"==t[a].acls){t.splice(a,1);break}setTimeout((function(){$("#loading").fadeOut({complete:function(){$(this).remove()}}),$("#loading-mask").fadeOut({complete:function(){$(this).remove()}}),IG$.__ep_l&&IG$.navigateMenuByUID(IG$.__ep_l,void 0,void 0,!1)}),IG$.__ep?0:50)}},IG$._init_dw_app=function(){function e(){var e=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",e+"px");var n=$("nav.navbar-default").height(),i=$("#page-wrapper").height();n>i&&$("#page-wrapper").css("min-height",n+"px"),n<i&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&(n>i?$("#page-wrapper").css("min-height",n+"px"):$("#page-wrapper").css("min-height",$(window).height()-60+"px"))}$(document).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small"),$(".close-canvas-menu").on("click",(function(){$("body").toggleClass("mini-navbar"),SmoothlyMenu()})),$("body.canvas-menu .sidebar-collapse").slimScroll({height:"100%",railOpacity:.9}),$(".right-sidebar-toggle").on("click",(function(){$("#right-sidebar").toggleClass("sidebar-open")})),$(".sidebar-container").slimScroll({height:"100%",railOpacity:.4,wheelStep:10}),$(".open-small-chat").on("click",(function(){$(this).children().toggleClass("fa-comments").toggleClass("fa-remove"),$(".small-chat-box").toggleClass("active")})),$(".small-chat-box .content").slimScroll({height:"234px",railOpacity:.4}),$(".check-link").on("click",(function(){var e=$(this).find("i"),n=$(this).next("span");return e.toggleClass("fa-check-square").toggleClass("fa-square-o"),n.toggleClass("todo-completed"),!1})),$(".navbar-minimalize").on("click",(function(){$("body").toggleClass("mini-navbar"),SmoothlyMenu()})),$(".tooltip-demo").tooltip({selector:"[data-toggle=tooltip]",container:"body"}),e(),$(window).bind("load",(function(){$("body").hasClass("fixed-sidebar")&&$(".sidebar-collapse").slimScroll({height:"100%",railOpacity:.9})})),$(window).scroll((function(){$(window).scrollTop()>0&&!$("body").hasClass("fixed-nav")?$("#right-sidebar").addClass("sidebar-top"):$("#right-sidebar").removeClass("sidebar-top")})),$(window).bind("load resize scroll",(function(){$("body").hasClass("body-small")||e()})),$("[data-toggle=popover]").popover(),IG$._cmn_ctrl($(document))},IG$._cmn_ctrl=function(e){$(".collapse-link",e).on("click",(function(){var e=$(this).closest("div.ibox"),n=$(this).find("i");e.find("div.ibox-content").slideToggle(200),n.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),e.toggleClass("").toggleClass("border-bottom"),setTimeout((function(){e.resize(),e.find("[id^=map-]").resize()}),50)})),$(".close-link",e).on("click",(function(){$(this).closest("div.ibox").remove()})),$(".fullscreen-link",e).on("click",(function(){var e=$(this).closest("div.ibox"),n=$(this).find("i");$("body").toggleClass("fullscreen-ibox-mode"),n.toggleClass("fa-expand").toggleClass("fa-compress"),e.toggleClass("fullscreen"),setTimeout((function(){$(window).trigger("resize")}),100)})),$(".full-height-scroll",e).slimscroll({height:"100%"})},$s.ready((function(){$("#lpt","#loading").css("width","80%"),ig$.$l_m=1,webix.ui.fullScreen(),webix.env.touch||webix.CustomScroll.init(),IRm$.r2({func:function(){$("#lpt","#loading").css("width","100%"),setTimeout((function(){var e;IG$.loadExtend.rcsloaded=!0,IG$.mainPanel=new IG$.MainPanel({name:"_I7d"}),IG$.mainPanel.on("tabchange",(function(e,n){})),e={closeText:IRm$.r1("L_C_CLOSE"),prevText:IRm$.r1("L_C_PREV"),nextText:IRm$.r1("L_C_NEXT"),currentText:IRm$.r1("L_C_CUR"),monthNames:IRm$.r1("L_C_M_NAMES").split("#"),monthNamesShort:IRm$.r1("L_C_M_NAMES_S").split("#"),dayNames:IRm$.r1("L_C_D_NAMES").split("#"),dayNamesShort:IRm$.r1("L_C_D_NAMES_S").split("#"),dayNamesMin:IRm$.r1("L_C_D_NAMES_M").split("#"),weekHeader:IRm$.r1("L_C_W_H"),firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:IRm$.r1("L_C_YR_SFX"),c1disp:"yyyy-mm-dd",c1format:"yy-mm-dd",c2disp:"yyyy-mm",c2format:"yy-mm"},$.datepicker.setDefaults(e),IG$.calendar_locale=e,IG$.m_explorer=null,$.each(IG$.loadExtend.items,(function(e,n){IG$.extend(n.name,n.base,n.option)})),$.each(IG$.filteropcodes,(function(e,n){var i=n.lcode;n.locale=IRm$.r1(i)}));var n=$.cookie("lui")||"";IG$.createLoginPanel(n,"",!0),IG$.loadMapData(),IG$._init_dw_app();var i=new IG$._rpc$;i.init(null,{ack:"helpcontent",payload:{},mbody:{option:"ls",mts:window.m$mts||"ROOT",lang:window.useLocale||""}},null,(function(e){var n=!1;if(e.uuid){if(n=!0,IG$.dlgLogin.callback=new IG$.callBackObj(this,IG$.showLoginProc),IG$.dlgLogin.uuid=e.uuid,IG$.dlgLogin.mts={sid:e.mts,name:e.mts_name},IG$._g$a=IG$.dlgLogin.mts.sid,window.m$mts&&IG$.dlgLogin.mts.name!=window.m$mts&&IG$.dlgLogin.mts.sid!=window.m$mts)return void IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc));IG$.dlgLogin.lastLogin=e,IG$.mainPanel&&IG$.mainPanel.updateLoginInfo.call(IG$.mainPanel),IG$.dlgLogin.getUserDetail.call(IG$.dlgLogin,!1),(hist=new IG$.historyManager).historyListener(),"function"==typeof window.callPhantom&&window.callPhantom({_proc:"C"})}0==n&&IG$.showLogin(new IG$.callBackObj(this,IG$.showLoginProc),0)}),(function(e){return IG$.showLogin(new IG$.callBackObj(this,IG$.showLoginProc),0),!0})),i.send()}),IG$.__ep?10:30)}})})),IG$._n5=function(){var e=ig$.session,n=60*ig$.session_expire,i=!1,a=-1;e&&($(document).bind("mousemove",(function(){e.count=0,0==i&&(a>-1&&(clearTimeout(a),a=-1),a=setTimeout((function(){i=!0;var n=new IG$._rpc$;n.init(null,{ack:"helpcontent",payload:{mode:"write"},mbody:{option:"wake"}},null,(function(n){i=!1,e.count=0}),null),n.send()}),2e3))})),e.timer=setInterval((function(){var i,a=n-e.count,t="",o=0;i=a>60?a-60*(o=Math.floor(a/60)):a,t=o>0?o+" min "+i+" sec":i+" sec",a<300?e.text.addClass("warn-sess-timer"):e.text.removeClass("warn-sess-timer"),e.text.html(t),a<0&&(clearInterval(e.timer),IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc))),e.count+=1}),1e3))},IG$.refreshMessages=function(){var e=new IG$._rpc$;e.init(null,{ack:"helpcontent",payload:{mode:"read"},mbody:{option:"rsn",readmode:0}},null,IG$.rs_refreshMessages,(function(e){return!0})),e.showerror=!1,e.send()},IG$.rs_refreshMessages=function(e){var n,i,a,t,o=$("#chatsublist"),s=IG$.XGetNode(e,"/smsg"),l=IG$.XGetChildNodes(s);if(!(l&&l.length>0&&IG$.L_SPPL&&(a=IG$.XGetAttrProp(l[0])).msgid==IG$.L_SPPL)&&(o.empty(),o.append($("<li class='view'><span><a href='javascript:f$7(\"CMD_RSN\")'>Write Message</a></span></li>")),l&&l.length>0))for(t=Math.min(5,l.length),IG$.L_SPPL&&$("#alertstext").text("Messages (New)"),n=0;n<t;n++)a=IG$.XGetAttrProp(l[n]),0==n&&(IG$.L_SPPL=a.msgid),i="<li><a href='#' class='delete'>X</a><p><span style='color:#0000ff;'>"+(a.username||"")+": </span><br>"+IG$.XGetTextVal(l[n])+" <br><span style='color:#4d4d4d; font-size: 9px; float: right'>("+(IG$.getFormattedDate(a.updatedate,!0)||"")+")</span></p></li>",o.append($(i))},IG$.setWeb3TopMenu=function(){var e,n=$("#side-menu"),i=$("#mainFooter",n),a=n,t=$("#innerLogo",n),o=ig$.mainmenu,s=ig$.features;$(".ig-c-button",t);if(ig$.$l_=ig$.$l_||0,console.log("top menu"),o){if(o.footmenu){for(e=0;e<o.footmenu.length;e++)o.footmenu[e].html&&(o.footmenu[e].html.remove(),o.footmenu[e].html=null);$.each(o.footmenu,(function(e,n){if("ig_sw_app"!=n.acls&&"ig_pref"!=n.acls||!(ig$.$l_>5)){var a=$("<li"+(n.acls?" class='"+n.acls+"'":"")+"><span>"+(n.rcs?IRm$.r1(n.rcs):n.text)+"</span></li>");i.prepend(a),a.bind("click",(function(){n.handler?n.handler.call(this):"logout"==n.cmd?IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc)):n.cmd&&IG$.procMenuCommand(n.cmd)})),n.html=a}}))}if(o.mainmenu&&s){for(e=0;e<o.mainmenu.length;e++)o.mainmenu[e].html&&(o.mainmenu[e].html.remove(),o.mainmenu[e].html=null);$.each(o.mainmenu,(function(e,n){if((!n.acls||!1===s[n.acls])&&"column"==n.type){var i=$("<li class='"+(n.cls||"")+"'></li>").appendTo(a),t=$("<a href=''><i class='"+(n.icon||"")+"'></i><span class='nav-label'>"+(n.rcs?IRm$.r1(n.rcs):n.text)+"</span></a>").appendTo(i);if(n.info&&(i.info_html=$("<span class='label label-info pull-right'>62</span>").appendTo(t)),n.cmd?IG$.procMenuCommand(cmd):n.handler,t.bind("click",(function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1})),t.bind("mousedown",(function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1})),t.bind("mouseup",(function(e){var a,t,s=$(".flyout",i),l=1;return e.preventDefault(),e.stopImmediatePropagation(),s&&s.length>0&&4!=lindex&&(a=n.sv,$(".flyout").hide(),$.each(o.mainmenu,(function(e,i){i!=n&&(i.sv=0)})),a?(n.sv=0,l=1):(n.sv=1,s.show(),$(document).bind("mouseup",void 0),l=0)),1==l&&(t=n,$.each(o.mainmenu,(function(e,n){n==t?n.html&&n.html.addClass("active"):n.html&&n.html.removeClass("active")})),t.handler&&t.handler()),!1})),n.html=i,n.menus&&n.menus.length&&"column"==n.type){var l=$("<span class='fa arrow'></span>").appendTo(t),r=$("<ul class='nav nav-second-level collapse'>").appendTo(i);n.handler&&ig$.$l_<5&&$(".rightRaquoBlue",l).bind("click",(function(){n.handler()})),$.each(n.menus,(function(e,n){var i=$("<div class='column"+(n.acls?" "+n.acls:"")+"'><h6>"+(n.rcs?IRm$.r1(n.rcs):n.text)+"</h6></div>").appendTo(r);if("list"==n.type){var a=$("<ul class='"+(n.acls||"")+"'></ul>").appendTo(i);$.each(n.items,(function(e,n){$("<li class='chevronLink"+(n.acls?" "+n.acls:"")+"'><span class='icon'></span><span class='title'>"+(n.rcs?IRm$.r1(n.rcs):n.text)+"</span></li>").appendTo(a).bind("click",(function(){n.cmd&&IG$.procMenuCommand(n.cmd)}))}))}else if("image"==n.type){var t,o;t=n.src&&$("<img src='"+n.src+"'></img>").appendTo(i),o=n.desc&&$("<h3>"+n.desc+"</h3>").appendTo(i),n.cmd&&(t.bind("click",(function(){IG$.procMenuCommand(n.cmd)})),o.bind("click",(function(){IG$.procMenuCommand(n.cmd)})))}}))}}}))}o.afterrender&&o.afterrender.call(this,o)}},IG$.showLoginProc=function(){var e=$("#loginWindow"),n=$("#userid");e.hide(),IG$.m_explorer&&IG$.m_explorer.initData.call(IG$.m_explorer),lastHist=null,hist||(hist=new IG$.historyManager),hist.historyListener(),n&&n.length>0&&(n[0].value=IG$.dlgLogin.logininfo.userid),IG$.__ep||(IG$.setWeb3TopMenu(),IG$.mainPanel.initRecentVisit.call(IG$.mainPanel))};
IG$.MainPanel=$s.extend($s.panel,{margin:"0 0 0 0",resizeTabs:!0,minTabWidth:100,enableTabScroll:!0,activeTab:0,layout:{type:"card",deferredRender:!1},deferredRender:!1,hidemode:"offset",tabPosition:"top",removePanelHeader:!0,plain:!1,minTabWidth:void 0,maxTabWidth:void 0,___tabseq:0,customAddTab:function(e,t){var i=this.getComponent(e);i?(IG$.changeApp(2),this.setActiveTab(i)):(IG$.changeApp(2),t.id=e,i=this.add(t),this.setActiveTab(i))},navigateApp:function(e,t,i,n,a,o,s,l){var d,c=t+"_"+(e||this.___tabseq++),p=this.getComponent(c);if(p){if(IG$.changeApp(2),this.setActiveTab(p),l&&p.applyOption)p.applyOption.call(p,l);else if("dashboard"==t){this.getComponent("dashboardedit_"+e)&&p.uid&&p.uid.length>0&&p.procRunDashboard.call(p)}}else{var r=new IG$.callBackObj(this,(function(){this.navigateApp(e,t,i,n,a,o,s,l)})),m=IG$.createAppPanel(e,t,i,n,o,s||null,r);if(m){if(m.address=n,m.title=IG$.getTabTitle(i),s)for(d in s)m[d]=s[d];if(l)for(d in l)m[d]=l[d];if(1==m.isWindow)a=!1,m.title=IG$.getTabTitle(i)+" ("+IRm$.r1("D_"+t.toUpperCase())+")",IG$.ps[m.address]||(IG$.ps[m.address]=m,m.on("close",(function(){delete IG$.ps[m.address]})),m.show());else{IG$.changeApp(2),m.id=c,this.selectedIndex=this.selectedIndex<0?0:this.selectedIndex;var $=this.add(m);this.setActiveTab($)}}else a=!1}1==a&&e&&t&&(lastHist="&p1="+t+"&p2="+e,setTimeout((function(){hist.addHistory(lastHist)}),10))},initRecentVisit:function(){var e,t,i=this,n=$("#mbutton1"),a=($("#idv_recitems"),$("#welcome"));i.mviewer={mode:"recent",mrecenttext:n.text()},n.unbind("click"),n.bind("click",(function(){i.loadRecentVisit.call(i)}));e=[{title:"Step by Step",cls:"getting_started",handler:function(){IG$.procMenuCommand("CMD_APP_WIZARD")}},{title:"Navigator",cls:"navigator",handler:function(){var e;((e=i.down("[name=mexplorer]"))&&!e.isVisible()||IG$.m_explorer&&ig$.app_tmpl&&ig$.app_tmpl.mainview&&ig$.app_tmpl.mainview.navitree&&!1!==ig$.app_tmpl.mainview.navitree.hidden)&&IG$.changeApp(1)}},{title:"About",cls:"about_app",handler:function(){IG$.procMenuCommand("CMD_ABOUT")}}],(t=$("#pg_links",a)).empty(),$.each(e,(function(e,i){if(!i.hidden){var n=$("<div class='intro-pg-column'><div class='intro-figure'><div class='image' title='"+i.title+"'><span class='"+i.cls+"'></span></div><div class='intro-figure-caption'><span class='intro-links'>"+i.title+"</span></div></div></div>");n.appendTo(t),n.length>0&&i.handler&&($(".image",n).bind("click",(function(){i.handler()})),$(".intro-links",n).bind("click",(function(){i.handler()}))),i.el=n}})),i.__pg_linksitems=e,i.updateLoginInfo(),i.loadRecentVisit()},initAdminMenu:function(){var e,t=IG$.dmgrmenu.body.dom,i=$(".ig-mgr-body",t),n=$(".ig-mgr-panel-close",t),a=ig$.mainmenu.mainmenu;i.empty(),n.bind("click",(function(){IG$.procMenuCommand("CMD_HOME")})),a&&$.each(a,(function(t,n){e=$("<ul class='ig-mgr-group'></ul>").appendTo(i),n.tul=e,n.tul.hide(),n.menus&&$.each(n.menus,(function(t,i){var n=$("<li class='ig-mgr-group-item "+(i.acls||"")+" animate-box fadeInLeft animated'><div class='ig-mgr-title'><span class='icon'></span><h3>"+(IRm$.r1(i.rcs)||i.text)+"</h3></div><ul class='ig-mgr-menu'></ul></li>").appendTo(e),a=$(".ig-mgr-menu",n);$.each(i.items,(function(e,t){$("<li class='ig-mgr-menu-item "+(t.acls||"")+"'>"+(IRm$.r1(t.rcs)||t.text)+"</li>").appendTo(a).bind("click",(function(){t.handler?t.handler.call(this):"logout"==t.cmd?IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc)):t.cmd&&IG$.procMenuCommand(t.cmd)}))}))}))}))},updateLoginInfo:function(){var e,t,i,n,a,o,s,l=$("#last_login"),d=(IG$.viewport,IG$.dlgLogin?IG$.dlgLogin.logininfo:null);$("#home_app_title").html(ig$.home_app_title||IRm$.r1("L_HOME_APP_TITLE")),$("#home_app_desc").html(ig$.home_app_desc||IRm$.r1("L_HOME_APP_DESC")),$("#mbutton1").html(IRm$.r1("L_T_RECENT_VISIT")),l&&l.length>0&&d&&IG$.dlgLogin.lastLogin&&(o=$(".last_login_time",l),s=$(".last_login_host",l),a=$(".cur_login_host",l),i=$(".cur_login_user_id",l),n=$(".cur_login_user_nm",l),e=IG$.dlgLogin.lastLogin.lastaccesstime,i.text(d.userid),n.text(d.username),e&&(t=IG$.formatDate(e),o.text(t),s.text(IG$.dlgLogin.lastLogin.lastaccessaddr),a.text(IG$.dlgLogin.lastLogin.accessaddr)))},loadRecentVisit:function(){$("#idv_recitems");var e=new IG$._rpc$;e.init(this,{ack:"helpcontent",payload:{},mbody:{option:"bookmarks"}},this,this.rs_loadContent,null,null),e.send()},rs_loadContent:function(e){var t,i,n,a=$("#idv_recitems"),o=[],s=[],l={};if(a.empty(),a){for(t=0;t<3;t++)(n=$("<div class='recent-columns'></div>").appendTo(a)).css({width:100/3+"%",float:"left"}),s.push({div:n,di:!1});for(t=0;t<e.length;t++)l[(i=e[t]).uid]?l[i.uid].fatype="F"==i.fatype?i.fatype:l[i.uid].fatype:(l[i.uid]=i,o.push(i));o.sort((function(e,t){var i=0;return e.type!=t.type&&(i=e.type>t.type?1:-1),i})),this.shortcuts={};var d,c=0;$.each(o,(function(e,t){var i,n,a,o=t.type.toUpperCase();0==e?(n=(i=s[0]).div,$("<div class='recent-itemtype'><span>"+IRm$.r1("D_"+o)+"</span></div>").appendTo(n)):d&&d!=t.type?(c=(c+1)%s.length,n=(i=s[c]).div,a=$("<div class='recent-itemtype'><span>"+IRm$.r1("D_"+o)+"</span></div>").appendTo(n),i.di&&a.css({marginTop:"20px"})):n=(i=s[c]).div,i.di=!0;var l=$("<div class='recent-row' title='"+t.nodepath+"'></div>"),p=$("<span>"+t.name+("F"==t.fatype?"<span class='ig-fa-mark'></span>":"")+"</span>");p.bind("click",(function(){IG$.navigateMenu(t.uid)})),"REPORT"!=o&&"DASHBOARD"!=o||p.hover((function(e){var i=o.toLowerCase()+":"+t.uid;IG$._scrshot(p,i,!0)}),(function(e){IG$._scrshot(p,null,!1)})),l.append(p),n.append(l),d=t.type}))}},deferredRender:!0,onAdd:function(e,t){$s.tabpanel.prototype.onAdd.call(this,e,t)},initComponent:function(){var e=this,t=([].concat(e.dockedItems||[]),e.activeTab||(e.activeTab=0));e.tabPosition;e.layout={owner:e,type:"card",deferredRender:e.deferredRender,itemCls:e.itemCls,activeItem:t},IG$.mainPanelTabBar=new $s.tabbar({xtype:"tabbar",ui:e.ui,dock:"top",id:"ig-tabbar",cls:"ig-main-tabbar",flex:1,orientation:"horizontal",plain:!0,cardLayout:e.layout,tabPanel:e,padding:0,margin:0,bodyPadding:0,listeners:{tabclick:function(e,t,i){IG$.changeApp(2)}}}),e.tabBar=IG$.mainPanelTabBar,IG$.MainPanel.superclass.initComponent.call(this),e.setActiveTab=function(t){IG$.changeApp(2),$s.tabpanel.prototype.setActiveTab.call(e,t)},e.getActiveTab=$s.tabpanel.prototype.getActiveTab,e.getTabBar=$s.tabpanel.prototype.getTabBar,e.onItemEnable=$s.tabpanel.prototype.onItemEnable,e.onItemDisable=$s.tabpanel.prototype.onItemDisable,e.onRemove=function(t,i){if($s.tabpanel.prototype.onRemove.call(e,t,i),0==e.items.length){IG$.m_explorer;IG$.changeApp(IG$.__atab)}},t&&e.tabBar.setActiveTab(t.tab,!0)},listeners:{beforeadd:function(e,t,i,n){var a,o=this.getTabBar(),s=ig$.maxtapcount||0;s>0&&this.items.length>=s&&(a=this.items.items[0],this.remove(a),o&&o.$ex&&a.tab&&void 0!==a.tab.tabid&&o.$ex.removeOption(a.tab.tabid))}}});
ig$.mainmenu={mainmenu:[{rcs:"L_HOME",type:"column",icon:"fa fa-th-large",template:"html/dw_intro.jsp",handler:function(){IG$.procMenuCommand("CMD_HOME")}},{rcs:"L_COMPETITION",type:"column",icon:"fa fa-diamond",template:"html/dw_competition.jsp",handler:function(){IG$.procMenuCommand("CMD_COMPETITION")}},{rcs:"L_DATASETS",type:"column",icon:"fa fa-bar-chart-o",template:"html/dw_dataset.jsp",handler:function(){IG$.procMenuCommand("CMD_DATASET")}},{rcs:"L_DISCUSSIONS",type:"column",icon:"fa fa-magic",template:"html/dw_discussion.jsp",info:!0,handler:function(){IG$.procMenuCommand("CMD_DISCUSSION")}},{rcs:"L_WORKS",type:"column",icon:"fa fa-star",template:"html/dw_works.jsp",handler:function(){IG$.procMenuCommand("CMD_WORKS")}},{rcs:"L_CREATE",type:"column",cls:"special_link",icon:"fa fa-database",handler:function(){IG$.procMenuCommand("CMD_BROWSER")}},{type:"app",region:"report",template:"html/dw_report.jsp"}]};
IG$.procMenuCommand=function(e,a){var _,r,I,c,n,s,i=e.toLowerCase(),M={},D="igcm",l=IG$.mainPanel||null;switch(e){case"CMD_PASSWORD_CHANGE":_=new IG$.passwordMgr,IG$.checkLogin(null,_);break;case"CMD_PREF":_=new IG$.userpref,IG$.checkLogin(null,_);break;case"CMD_MAKE_WORKSPACE":_=new IG$.makeItem({itemtype:"Folder",parentnodepath:"/",parentuid:"/"}),IG$.checkLogin(null,_);break;case"CMD_SW_APP":_=new IG$.workspace_switcher({}),IG$.checkLogin(null,_);break;case"CMD_SERVER_CONFIG":break;case"CMD_HELP_MGR":n="helpManage",c=i,I=IRm$.r1("I_HELP_MGR");break;case"CMD_LOCALE":n="resourcemgr",c=i,I=IRm$.r1("I_LOC_MGR");break;case"CMD_DLOCALE":n="resourcemgr",c=i,M.dicmode=1,I=IRm$.r1("I_DLOC_MGR");break;case"CMD_META_IMP":n="metaImport",c=i,I=IRm$.r1("I_META_IMP");break;case"CMD_META_EDIT":n="MetaEditorPanel",c=i,I=IRm$.r1("I_META_EDIT"),M.uid=a.uid;break;case"CMD_META_MIG":n="mgr_deploy",c=i,I=IRm$.r1("I_META_MIG");break;case"CMD_RELATION_VIEW":c=i,n="relationMgr",I=IRm$.r1("L_RELATION_VIEW");break;case"CMD_TABLE_REGISTER":c=i,n="tableManager",I=IRm$.r1("L_MGR_DATABASE"),D="igcn";break;case"CMD_LOOKUP":c=i,n="systemlookup",I=IRm$.r1("L_S_LK");break;case"CMD_CONNECT_DB":c=i,n="mgrdb_config",I=IRm$.r1("L_REG_DATABASE");break;case"CMD_DATASET":c=i,n="p$DataMgr",I=IRm$.r1("L_REG_DATASET");break;case"CMD_ABOUT":_=new IG$.aboutApp,IG$.checkLogin(null,_);break;case"CMD_USER_MANAGER":c=i,n="mgrUser",I=IRm$.r1("L_MGR_USER");break;case"CMD_SYS_CONFIG":c=i,n="mgrSysCfg",I=IRm$.r1("L_SYS_CONFIG");break;case"CMD_ASSIST_ROBO":c=i,n="mgrColab",I=IRm$.r1("L_ASSIST_ROBO");break;case"CMD_VAR":case"CMD_BD_CONFIG":c=i,n="hadoop_config",D="igc9",I=IRm$.r1("I_BD_CONFIG");break;case"CMD_DBD_MGR":c=i,n="mgr_dashboard",I=IRm$.r1("I_MGR_DBD");break;case"CMD_FEATURES":c=i,n="mgrFeatures";break;case"CMD_REPORT_STYLE":c=i,M.title=IRm$.r1("T_GLOBAL_REPORT_STYLE"),M.styletype="g",n="styleWizard";break;case"CMD_RSN":_=new IG$.rsn_editor({}),IG$.checkLogin(null,_);break;case"CMD_SYSMON":n="sysmon",c=i,M.title=IRm$.r1("L_SYS_LOG");break;case"CMD_SYSRES":n="sys_resource",c=i;break;case"CMD_SCHEDULE":c=i,n="scheduler",I=IRm$.r1("I_SCHEDULE");break;case"CMD_SCH_PROG":c=i,n="sch_prog",I=IRm$.r1("I_SCHEDULE_MOD"),M.mod_type=a,"single_sign_on"==a&&(I="SingleSignOn");break;case"CMD_CHART_DSGN":c=i,n="chart_dsgn",I="Chart Coder";break;case"CMD_HOME":IG$.changeApp(0);break;case"CMD_DATASET":IG$.changeApp(2);break;case"CMD_COMPETITION":IG$.changeApp(1);break;case"CMD_DISCUSSION":IG$.changeApp(3);break;case"CMD_WORKS":IG$.changeApp(4);break;case"CMD_BROWSER":var t=IG$.viewport.down("[name=mexplorer]");t&&!t.isVisible()&&IG$.changeApp(1);break;case"CMD_TABPANEL":IG$.changeApp(2);break;case"CMD_WIZARD":case"CMD_APP_WIZARD":var o,C=$(document),m=C.width(),R=C.height();if(ig$.$l_>5)return b=(b=window.useLocale).substring(0,b.indexOf("_")),void window.open("../manual/"+b,"_blank");!IG$.app_wizard&&IG$.ltW&&(IG$.app_wizard=new IG$.dlgSmartWizard({})),(o=IG$.app_wizard)&&(o.setSize(.8*m,.8*R),IG$.showDlg(null,o));break;case"CMD_SYNC_USER":c=i,M.uid=a,n="sync_user",I=IRm$.r1("T_SYNC_USER");break;case"CMD_MN_MENUS":IG$.changeApp(4,a);break;case"CMD_HD_BFLOW":case"CMD_MONG_DATA":s="CMD_HD_BFLOW"==e?"BigData":"MongoData",l&&l.navigateApp.call(l,null,s.toLowerCase(),s,null,null,!0);break;case"CMD_MONG_MAPR":case"CMD_HD_MAPR":c=i,n="relationMgr",M._cmode=2,I=IRm$.r1("L_HD_BFLOW");break;case"CMD_ML_BAYES":var G=IG$._app_module_.bayesnet;if(n=G.name,D=G.modetype,I=I||G.opt.itemtype,G.opt)for(k in G.opt)M[k]=G.opt[k];break;case"CMD_D_MENU":c=i,n="dashboardmenu",I=i;break;case"CMD_REVISION":c=i,M.uid=a,n="mgrRevision",I=IRm$.r1("T_REVISION");break;case"CMD_TRASHBIN":c=i,M.uid=a,n="mgr_trashbin",I=IRm$.r1("L_TRASHBIN");break;case"CMD_MG_DISCO":c=i,M.uid=a,n="mg_disco",D="mg_disco",I=IRm$.r1("T_MIG_DISCO");break;case"CMD_MG_UPGRADE":itemuid=i,M.uid=a,n="mg_meta",D="mg_meta",I=IRm$.r1("T_MIG_META_UPGRADE");break;case"CMD_NEW_REPORT":c=i,n="ReportView",I="Report",(M=M||{}).writable=!0,M.opt_editmode=!0;break;case"CMD_NEW_SQL_REPORT":c=i,n="SQLReportView",I="SQLReport",(M=M||{}).writable=!0,M.opt_editmode=!0;break;case"CMD_NEW_DASHBOARD":c=i,n="DashboardEdit",D="igc7",I="Dashboard";break;case"CMD_MANUAL_AUTH":c=i,n="MgrManual",D="mg_meta",I=IRm$.r1("T_MGR_MANUAL");break;case"CMD_NEW_BOBJECT":return void IG$.create_meta();case"CMD_APP_HELP":var b="en";return"ko_KR"==window.useLocale&&(b="ko"),void window.open("../manual/"+b+"/","_blank")}if(n&&IG$.mainPanel){var E=IG$.mainPanel.getComponent.call(IG$.mainPanel,c);if(E)IG$.mainPanel.setActiveTab.call(IG$.mainPanel,E),"cmd_revision"==i&&E.loadUID.call(E,a);else if(IG$[n]?(r=new IG$[n](M),I||(I=r.title)):(scripts=ig$.bootconfig.scmap[D],IG$.getScriptCache(scripts,new IG$.callBackObj(this,(function(){if(IG$[n])if(r=new IG$[n](M),I||(I=r.title),r.id=c,r.address=c,r.title=IG$.getTabTitle(I),1==r.isWindow)IG$.checkLogin(null,r);else{var e=IG$.mainPanel.add.call(IG$.mainPanel,r);IG$.mainPanel.setActiveTab.call(IG$.mainPanel,e)}else IG$.ShowError(IRm$.r1("L_ERR_L_MOD"))})))),r)if(r.id=c,r.address=c,r.title=IG$.getTabTitle(I),1==r.isWindow)IG$.checkLogin(null,r);else{var A=IG$.mainPanel.add.call(IG$.mainPanel,r);IG$.mainPanel.setActiveTab.call(IG$.mainPanel,A)}}};
IG$.boDockZone=function(e,t){var i=this,o=-1,d=-1;i.items=[],i.splitters=[],i.editmode=!1,i.cobj=t,i.docid=0,i.invalidate=-1,i.sizeapplied=0,i.el_container=e,i._el={dom:e},i.$openmode=t.$openmode,i.body_container=$("<div class='idv-doc-base igc_design_mode'></div>").appendTo(e).css({position:"relative",minHeight:500}),i.box=$("<div></div>").appendTo(i.body_container),e.bind("resize",(function(){var t=IG$.j$ext._h(e),n=IG$.j$ext._w(e);n>0&&t>0&&(o!=n||d!=t)&&(i.sizeapplied=1,i.cW=n,i.cH=t,i.updateDisplay.call(i,!0)),o=n,d=t})),i.init(),i.draggable=null},IG$.boDockZone.prototype={init:function(){var e=this;(e.drop_proxy=$("<div class='dock-inside-wrap'></div>").css({position:"absolute",top:0,left:0}).appendTo(e.body_container).dselect()).hide(),e.dockinsg=$("<div class='dock-inside-guide'></div>").css({position:"absolute"}).appendTo(e.body_container).hide().dselect(),e.bodylist={},e._root={type:"mondrian",draggable:!1,objtype:"_dc",_direction:0,width:null,height:null,children:[],children_float:[]}},configDropZone:function(){var e=this,t=e.body_container[0];$s.create&&$s.dropzone&&(e.dropZone=$s.create($s.dropzone,t,{ddGroup:"_I$RD_G_",nodeouttimer:-1,notifyOut:function(e,t,i){var o=this;o.lastOverNode&&(o.onNodeOut(o.lastOverNode,e,t,i),o.lastOverNode=null),grid.isDragging=!1,grid.hideDropFeedback&&(grid.hideDropFeedback.call(grid,t),1==o.accept&&1==o.pivotmove&&grid.sheetobj&&(o.nodeouttimer>-1&&clearTimeout(o.nodeouttimer),o.nodeouttimer=setTimeout((function(){grid.hideDropFeedback.call(grid,t)}),100)))},onNodeEnter:function(t,i,o,d){var n=!1;d.records&&d.records.length>0?"Report"==d.records[0].get("type")&&(n=!0):d.cellData&&(d.cellData,n=!0),n&&e.showDropProxy.call(e,o,void 0),this.accept=n},onNodeOut:function(e,t,i,o){},onNodeOver:function(t,i,o,d){var n;return n=window.Ext?1==this.accept?Ext.dd.DropZone.prototype.dropAllowed:Ext.dd.DropZone.prototype.dropNotAllowed:this.accept,1==this.accept&&(d.records&&d.records.length>0?d.records[0].data:d.cellData,e.dragOver.call(e,o.browserEvent,void 0)),n},onNodeDrop:function(e,t,i,o){return 1==this.accept&&(o.records&&o.records.length>0?(dt=o.records[0].data,grid.sobj.onDropRecord.call(grid.sobj,i,dt)):dt=o.cellData),this.accept=!1,!0}}))},customLoad:function(e,t){if(1==e){var i,o,d,n=this;if(n._ldo=n._ldo||[],t)for(d=0;d<n._ldo.length;d++)if(n._ldo[d]==t)return;n._ldo.push(t),o={msg:IRm$.r1("B_PROC")+" <button id='m-mec-loader'>"+IRm$.r1("B_PROC_CANCEL")+"</button>"},n._$setLoading(o),i=$(n.rendermask),$("#m-mec-loader",i).bind("click",(function(){var e=n._ldo.length;$.each(n._ldo,(function(t,i){i&&i.cancelQuery&&i.cancelQuery(new IG$.callBackObj(n,(function(){0==--e&&(n._ldo=[],n.setLoading(!1,void 0,!0))})))}))}))}},setLoading:function(e,t){var i,o=this;if(o._ldo){for(i=o._ldo.length-1;i>=0;i--)o._ldo[i]==t&&(o._ldo.splice(i,1),1);0==o._ldo.length&&o._$setLoading(!1)}},_$setLoading:function(e,t){var i=this,o={target:i};return i._el.dom&&(i.loadMask&&i.loadMask.destroy(),o.target.rendermask=null,i.loadMask=null,!1!==e&&(IG$.isObject(e)?IG$.apply(o,e):IG$.isString(e)&&(o.msg=e),i.loadMask=new IG$._mask(o),i.loadMask.show())),i.loadMask},processLayoutWidget:function(e,t,i,o){var d,n,l,r=this;l=(n=o[e.docid]||new IG$.sheetfiltercomp(null)).model,d=r.appendWidgetBox.call(r,e.docid,{width:e.width?parseInt(e.width):null,height:e.height?parseInt(e.height):null,title:l.name||"",close:l.close,hidetitle:l.hidetitle,fixed_width:l.fixed_width,fixed_height:l.fixed_height,panel_css:l.panel_css,is_float:l.is_float,fl_moveable:l.fl_moveable,fl_resizable:l.fl_resizable,hide_maximize:l.hide_maximize,fl_collapsed:l.fl_collapsed,fl_collapsible:l.fl_collapsible,fl_collapse_css:l.fl_collapse_css,showtab:!l.tab_option||"F"!=l.tab_option.showtab,draggable:r.draggable},e.objtype),e.docid=d.docid,d.objtype=e.objtype,n.objtype=d.objtype,n.docid=d.docid,o[d.docid]=n,e.lt={pos:{x:0,y:0,w:0,h:0},ubody:d},d._pc=e,d.validateProperty.call(d),$.each(e.children,(function(e,t){r.processLayoutWidget.call(r,t,!1,i,o)})),e.children_float&&$.each(e.children_float,(function(e,t){r.processLayoutWidget.call(r,t,!1,i,o)}))},processLayoutView:function(e){var t=this,i=t.ctrls,o=[];t._async={c:0,f:0,bd:[]},$.each(t.items,(function(e,i){switch(i._loaded=0,t._async.bd.push(i),i.objtype){case"FILTER":t._async.f++,o.push(i);break;default:t._async.c++}})),$.each(t.items,(function(d,n){i[n.docid];n.box_container.bind("i_ready",(function(e){var i;if(e.stopPropagation(),!n._loaded){switch(n._loaded=1,n.objtype){case"FILTER":t._async.f--;break;default:t._async.c--}0==t._async.c&&0==t._async.f&&0==t.cmode&&(o.length?1==o.length?(i=o[0]).view&&i.view.updateFilterValues.call(i.view,!0,!0):($.each(o,(function(e,t){var o,d,n=t.view;n&&((d=!!(o=n.sheetoption.model.filter_options)&&o.showbutton&&o.f_b_trg?1:0)&&o.f_b_trg_all?1:0,d&&(i=t))})),$.each(o,(function(e,t){t.view&&t.view.updateFilterValues.call(t.view,!0,!0)}))):t.cobj.toolbarHandler.call(t.cobj,"cmd_run",null,null,null,1))}})),t.createWidgetView.call(t,n,e)})),$.each(t.items,(function(e,t){"FILTER"==t.objtype&&t.view.init_f.call(t.view,!0)}))},createWidgetView:function(e,t){var i,o=this,d=o.ctrls[e.docid];"FILTER"==e.objtype?(t.__dreg&&t.__dreg[d.docid]?((i=t.__dreg[d.docid].fobj).report=t,i.sheetoption=d,i.dzone=o,i.init_f.call(i),e.hidden=!0):i=new IG$.dynFilterView(e.box_container,d,t),i.callback=new IG$.callBackObj(t,t.onFilterUpdate)):"TEXT"==e.objtype?(i=new IG$.rfText(e.box_container,d,t),e.box_container.trigger("i_ready")):"NAVI"==e.objtype?(i=new IG$.rfNavi(e.box_container,d),e.box_container.trigger("i_ready")):"PANEL"==e.objtype||""==e.objtype?(i=new IG$.rfBlankPanel(e.box_container,d),e.box_container.trigger("i_ready")):"TAB"==e.objtype?(i=new IG$.rfTabPanel(e.box_container,d,o,t),e.box_container.trigger("i_ready")):"RPT_VIEW"==e.objtype?(i=new IG$.rfReportViewer(e.box_container,d,o,t)).validateItems.call(i,void 0,!0):"SHEET"==e.objtype?i=null:(i=null,e.box_container.trigger("i_ready")),e.objtype&&e.box.addClass("igc-"+e.objtype.toLowerCase()+"-cnt"),i&&(i.sheetoption=d,e.view=i,"FILTER"==e.objtype&&(e.setReportOption.call(e,d),e.box_container.bind("export_sheet",(function(e,t,i){var d=o.cobj;d.exportToFile.call(d,i.filetype.toUpperCase(),!1,t)}))))},isContainer:function(e){return"TAB"==e||"PANEL"==e||"_dc"==e},getNodeSize:function(e){var t,i,o=0,d=0;for(t=0;t<e.children.length;t++)(i=e.children[t]).width&&i.height&&(0==e._direction?(o+=i.width,d=Math.max(d,i.height)):(o=Math.max(o,i.width),d+=i.height));e.width=o,e.height=d},_clean_dc:function(e,t){var i,o,d,n=this._root;if("_dc"==e.objtype&&e.children)if(1==e.children.length&&"_dc"==e.children[0].objtype){for(d=e.children[0],e._direction=d._direction,e.children.splice(0,1),i=0;i<d.children.length;i++)e.children.push(d.children[i]),d.children[i].parent=e;if(delete t[d.docid],n.items)for(i=0;i<n.items.length;i++)if(n.items[i].docid==d.docid){n.items.splice(o,1);break}this._clean_dc(e,t)}else for(i=e.children.length-1;i>=0;i--)if("_dc"==(d=e.children[i]).objtype&&(this._clean_dc(e.children[i],t),d.children&&0==d.children.length&&(e.children.splice(i,1),delete t[d.docid],n&&n.items)))for(o=0;o<n.items.length;o++)if(n.items[o].docid==d.docid){n.items.splice(o,1);break}},makeLayout:function(e,t,i){var o=this;o._root=t,o.ctrls=i,t&&(o._clean_dc(t,i),o.gdoc_id(t),o.processLayoutWidget(t,!0,e,i),o.updateDisplay(!1,!0),o.processLayoutView(e))},gdoc_id:function(e){var t=this;t.doc_id(e.docid),e.children&&$.each(e.children,(function(e,i){t.gdoc_id(i)})),e.children_float&&$.each(e.children_float,(function(e,i){t.gdoc_id(i)}))},doc_id:function(e){var t;e&&e.indexOf("_")>-1&&(t=parseInt(e.substring(e.indexOf("_")+1))+1,this.docid=Math.max(this.docid,t))},showDrop:function(e,t,i){var o=this,d=(o.docitems[e.docid],e.binner),n=IG$.j$ext._w(d),l=IG$.j$ext._h(d),r=o.drop_proxy;o.drawDropProxy(e),IG$.j$ext._w(r,n),IG$.j$ext._h(r,l),t.top+=o.__mpos?o.__mpos.top:0,t.left+=o.__mpos?o.__mpos.left:0,o.dockinsg.css(t),o.dockinsg.show()},drawDropProxy:function(e,t){var i=this,o=i.drop_proxy,d=i.dockinsg,n=e.binner.offset(),l=$(i.body_container),r=l.offset();i.__mpos={top:n.top-r.top+l.scrollTop(),left:n.left-r.left+l.scrollLeft()},o.css({top:i.__mpos.top,left:i.__mpos.left,zIndex:120}),o.show(),d.css({zIndex:122}),d.show()},removeDropProxy:function(e){var t=this.drop_proxy,i=this.dockinsg;t.hide(),i.hide()},titleChangeHandler:function(){$.each(this.items,(function(e,t){"TAB"==t.objtype&&t.view.validateItems.call(t.view)}))},appendWidgetBox:function(e,t,i){var o,d,n,l=this;return e?e.indexOf("_")>-1&&(d=parseInt(e.substring(e.indexOf("_")+1))+1,l.docid=Math.max(l.docid,d)):(e="dock_"+l.docid++,n=!0),l.bodylist[e]?o=l.bodylist[e]:(t&&(t.objtype=t.objtype||i),(o=new IG$.dockingWidget(l,e,t)).box.css({position:"relative",minHeight:300}),l.items.push(o),l.bodylist[e]=o),o.box.bind("titlechange",(function(){l.titleChangeHandler.call(l)})),n||l.updateDisplay.call(l),o},_updLnode:function(e){var t,i,o=this._root;for(o.items=o.items||[],t=0;t<o.items.length;t++)if(o.items[t].docid==e.docid)return;var d=this.getLayout(),n=this._get_layout(d,e.docid);if(i={},$s.defaults(i,{objtype:n.objtype,d:n.d,r:n.r,_direction:n.d,_r:n.r,docid:n.docid,width:n.width,height:n.height,p:n.p,children:[]}),i.lt=e._pc.lt,e._pc.parent)for(t=0;t<o.items.length;t++)if(o.items[t].docid==e._pc.parent.docid){i.p=o.items[t];break}o.items.push(i)},_get_layout:function(e,t){var i=this,o=null;return e.children&&$.each(e.children,(function(d,n){return n.docid==t?(n.p=e,o=n,!1):(!n.children&&!n.children_float||!(o=i._get_layout(n,t)))&&void 0})),e.children_float&&$.each(e.children_float,(function(d,n){return n.docid==t?(n.p=e,o=n,!1):(!n.children&&!n.children_float||!(o=i._get_layout(n,t)))&&void 0})),o},getBox:function(e){var t,i=this.items,o=null;for(t=0;t<i.length;t++)if(i[t].docid==e){o=i[t];break}return o},clearAll:function(){var e,t=this.items;for(e=t.length-1;e>=0;e--)t[e].box.remove(),t.splice(e,1);this.bodylist={},this.docitems={},this.updateDisplay()},floatWidget:function(e){var t,i,o,d,n,l=this;l.items;if((i=l.docitems[e])&&(d=(n=i.lt.ubody).get_sop(),n&&d))if(n.setFloat(d.is_float),n.is_float){if(i.parent){for(i.parent.node,o=i.parent.children,t=0;t<o.length;t++)if(o[t].docid==i.docid){o.splice(t,1);break}i.r=l._root.docid,i._r=i.r,i.parent!=l._root&&"_dc"==i.parent.objtype&&0==i.parent.children.length&&l.removeWidget(i.parent.docid,!0),i.parent=l._root,l._add_float(l._root.children_float,i)}}else{var r;for(t=0;t<l._root.children_float.length;t++)if(l._root.children_float[t].docid==i.docid){r=l._root.children_float[t],l._root.children_float.splice(t,1);break}r&&(l._add_float(l._root.children,r),i._direction=l._root._direction,i.r=l._root.docid,i._r=i.r,i.parent=l._root)}},_add_float:function(e,t){var i,o=0;for(i=0;i<e.length;i++)if(e[i].docid==t.docid){o=1;break}o||e.push(t)},removeWidget:function(e,t,i){var o,d,n,l=this,r=l.items;for(o=0;o<r.length;o++)if(r[o].docid==e){r[o].box.remove(),r.splice(o,1);break}if((d=l.docitems[e])&&d.children&&d.children.length)for(o=d.children.length-1;o>=0;o--)l.removeWidget(d.children[o].docid,1,1);if(!i&&d&&d.parent){for(d.parent.node,n=d.parent.children,o=0;o<n.length;o++)if(n[o].docid==d.docid){n.splice(o,1);break}if(d.parent.children_float)for(o=0;o<d.parent.children_float.length;o++)if(d.parent.children_float[o].docid==d.docid){d.parent.children_float.splice(o,1);break}"_dc"==d.parent.objtype&&0==d.parent.children.length&&l.removeWidget(d.parent.docid,t)}l.box.trigger("remove_widget",e),delete l.bodylist[e],delete l.docitems[e],t||l.updateDisplay.call(l)},closeWidget:function(e){var t,i=this;(1!=(t=i.docitems[e]).container||t.parent)&&IG$.confirmMessages(ig$.appname,IRm$.r1("M_CONFIRM_DELETE"),(function(t){if("yes"==t){var o=!0;i.closeDockNoti&&(o=i.closeDockNoti.f.call(i.closeDockNoti.s,e)),1==o&&i.removeWidget.call(i,e)}}))},maximizeWidget:function(e){var t,i=this,o=!0,d=i.bodylist;i.maximizeDockNotify&&(o=i.maximizeDockNotify.f.call(i.closeDockNotify.s,e)),1==o&&($.each(d,(function(e,t){t._invalidate=1})),(t=d[e]).status="max"==t.status?null:"max",t.btnmap.maximize.el.attr("title","max"==t.status?IRm$.r1("L_MINIMIZE"):IRm$.r1("L_MAXIMIZE")),t.btnmap.maximize.el["max"==t.status?"addClass":"removeClass"]("dock_minimize"),i.updateDisplay.call(i,!0))},collapseWidget:function(e){},configDock:function(e,t){this.box.trigger(t,e)},setLayout:function(e){this.processLayout(e,null)},processLayout:function(e,t){var i,o,d;if(e&&e.length>0)for(i=0;i<e.length;i++)(d=e[i]).draggable=this.draggable,(o=this.appendWidgetBox(d.docid||null,d,d.objtype)).objtype=d.objtype,d.items&&this.processLayout(d.items,o)},getLayout:function(){var e,t=this,i=t._root;return(e={type:"mondrian",children:[],children_float:[]}).children=t.$doLayout(i,null),i.children_float&&$.each(i.children_float,(function(i,o){var d=t.$doLayout(o,null);d&&d.length&&e.children_float.push(d[0])})),e},$doLayout:function(e,t){var i,o=this,d=[];return i={docid:e.docid,objtype:e.objtype,width:e.width,height:e.height,r:t?t.docid:null,p:null,d:e._direction},d.push(i),e.children&&(i.children=[],$.each(e.children,(function(t,d){var n,l;for(l=o.$doLayout.call(o,d,e),n=0;n<l.length;n++)i.children.push(l[n])}))),d},setActive:function(e){var t,i,o=this.items;for(i=0;i<o.length;i++)(t=o[i]).setActive.call(t,e==t);this.box.trigger("activechanged",e)},clearSplitters:function(){},updateDisplay:function(e,t){var i=this;i.invalidate>-1&&clearTimeout(i.invalidate),1==t?(i.validateNow.call(i,e),e||i.box.trigger("updatecomplete"),i.updateScale.call(i)):i.invalidate=setTimeout((function(){i.validateNow.call(i,e),e||i.box.trigger("updatecomplete"),i.updateScale.call(i)}),50)},validateNow:function(e){var t,i,o,d,n,l,r,h,a,c,_,s,f,p,b=this,g=IG$.j$ext._w(b.body_container)-2,u=IG$.j$ext._h(b.body_container)-2,w=null,m={};b.clearSplitters();var y=function(e){$.each(e.children,(function(e,t){m[t.docid]=1,t.children&&y(t)}))};if(b._root&&b._root.lt){for(l in b.bodylist)if("max"==(f=b.bodylist[l]).status&&0!=f.visible){w=l,m[l]=1,"TAB"==f.objtype?(f.activeTab=f.activeTab||0,(p=f._pc&&f._pc.children?f._pc.children[f.activeTab]:null)&&(m[p.docid]=1)):"PANEL"==f.objtype&&f._pc&&f._pc.children&&y(f._pc);break}if(c=(i=b._root).lt.ubody,i.lt.pos.x=0,i.lt.pos.y=0,i.lt.pos.w=g,i.lt.pos.h=u,b._updateNodeSize(i),b._root.children_float&&b._root.children_float.length&&$.each(b._root.children_float,(function(e,t){b._updateNodeSize(t,!0)})),b.docitems={},h=(r=c._measureContainer.call(c)).fixed.w,a=r.fixed.h,w){if(w){for(t=0;t<b._root.items.length;t++)if(b._root.items[t].docid==w){o=b._root.items[t];break}o.lt.pos.x=0,o.lt.pos.y=0,o.lt.pos.w=g,o.lt.pos.h=u}}else g=Math.max(h,g,r.m.w),u=Math.max(a,u,r.m.h),h>b.cW&&a<b.cH?u-=20:a>b.cH&&h<b.cW?g-=20:a>b.cH&&h>b.cW&&(g-=20,u-=20);for(l in _={x:0,y:0,w:g,h:u},i.$box||(i.$box=$("<div></div>").appendTo(b.box),i.lt.ubody.box.appendTo(i.$box)),o?b.updateLayout(o,0,0,g,u,0,r,_,!1):(i.$box.addClass("row"),b.updateLayout(i,0,0,g,u,0,r,_,!1)),b.docitems)n=b.docitems[l],b.bodylist[l]?(d=(0==(d=b.bodylist[l].visible)||1!=b.bodylist[l].hidden)&&d,s=n.lt.ubody.box,n.visible=!w&&0!=d||m[l],n.visible&&"_dc"!=n.objtype?(s.show(),s.trigger("resize"),e||n.lt.ubody.$upd_exec()):s.hide()):delete b.docitems[l];w||b.validateSplitter()}},updateScale:function(){var e,t,i,o,d,n,l,r=this,h={overflowX:"visible",overflowY:"visible"},a=(r.box.offset(),0),c=0;for(d in r.bodylist)if("max"==r.bodylist[d].status&&!1!==r.bodylist[d].visible){l=d;break}if(l)(e=r.docitems[l])&&e.lt&&e.lt.ubody&&(n=e.lt.pos,a=Math.round(n.w),c=Math.round(n.h));else for(d in r.docitems)(e=r.docitems[d])&&e.lt&&e.lt.ubody&&(n=e.lt.pos,t={top:Math.round(n.y),left:Math.round(n.x)},i=Math.round(n.w),o=Math.round(n.h),a=Math.max(a,i+t.left),c=Math.max(c,o+t.top),e.lt.ubody.width=i,e.lt.ubody.height=o,e.width=i,e.height=o);a>0&&c>0&&(r.sizeapplied=1,l&&(h.overflowX="hidden",h.overflowY="hidden"),r.body_container.css(h).animate({scrollTop:0,scrollLeft:0}),l||r.box.trigger("boxresized"))},showTabButton:function(e,t){e.view&&e.view.tabarea&&(e.view.editmode=this.editmode,e.view.tabarea[t?"show":"hide"]())},updateLayout:function(e,t,i,o,d,n,l,r,h,a){var c,_,s,f,p,b,g,u,w,m,y,x,v,j=this,k=e.lt.ubody,L={fixedw:0,fixedh:0,flexw:0,flexh:0},I=0,T="TAB"==k.objtype,N="PANEL"==k.objtype,M="max"==k.status,D=!(1==T&&k.view&&k.view.sheetoption&&k.view.sheetoption.model&&k.view.sheetoption.model.tab_option&&"F"==k.view.sheetoption.model.tab_option.showtab),A=0,z=k.hidden,E=j.editmode?"show":"hide",C=k.btnmap,B=k.is_float;for(k.view&&k.view.sheetoption&&k.view.sheetoption.model&&(s=k.view.sheetoption.model.tb_pivot,k.view.sheetoption.model.tb_chart),"FILTER"==k.objtype||"SHEET"==k.objtype?C.pivot.el[s?"show":E]():C.pivot.el.hide(),C.config.el[E](),C.close.el[E](),m=e.parent;m&&!z;){if(m.hidden){z=1;break}if(0==m.visible){z=1;break}if((y=m.parent)&&"TAB"==y.objtype&&y.active!=m.docid){z=1;break}m=m.parent}if(j.bodylist[k.docid]&&j.bodylist[k.docid].view&&(j.bodylist[k.docid].view._editmode=j.editmode),j.docitems[e.docid]=e,c=e.fixed_width,_=e.fixed_height,L.fixedw=l.fixed.w,L.fixedh=l.fixed.h,L.flexw=l.flex.w,L.flexh=l.flex.h,L.flexw,L.flexh,L.fixedw,L.fixedh,g=e.lt.pos,k.is_float)if(v=k.get_sop()){var W={};$.each(["left","right","width","top","bottom","height"],(function(e,t){var i,n=v["fl_"+t];n&&(i=W[t+"_pct"]="%"==n[n.length-1],W[t]=parseInt(i?n.substring(0,n.length-1):n),!isNaN(W[t])&&i&&(W[t]=Math.floor((e<3?o:d)*W[t]/100)))})),v.fl_en_width?(v.fl_en_left||v.fl_en_right||(v.fl_en_left=!0),v.fl_en_left?(g.x=W.left,g.w=W.width):v.fl_en_right&&(g.x=o-W.right-W.width,g.w=W.width)):(g.x=W.left,g.w=o-W.left-W.right),v.fl_en_height?(v.fl_en_top||v.fl_en_bottom||(v.fl_en_top=!0),v.fl_en_top?(g.y=W.top,g.h=W.height):v.fl_en_bottom&&(g.y=d-W.bottom-W.height,g.h=W.height)):(g.y=W.top,g.h=d-W.top-W.bottom),g.x=isNaN(g.x)?10:g.x,g.y=isNaN(g.y)?10:g.y,g.w=isNaN(g.w)?200:g.w,g.h=isNaN(g.h)?300:g.h,g.x=g.x<0?0:g.x,g.x=g.x>o?o-g.w:g.x,g.y=g.y<0?0:g.y,g.y=g.y>d?d-g.h:g.y}else g.x=10,g.y=10,g.w=200,g.h=300;else h?!h||"PANEL"!=h.objtype&&"TAB"!=h.objtype?h&&"_dc"==h.objtype&&(g.x=t+(0==h._direction?h._g:0),g.y=i+(1==h._direction?h._g:0),1==h._direction?g.w=o:g.w=c?e._fw>o-h._g?o-h._g:e._fw:e._w*(o-l.fixed.w)/l.flex.w,0==h._direction?g.h=d:g.h=_?e._fh>d-h._g?d-h._g:e._fh:e._h*(d-l.fixed.h)/l.flex.h):(w=0,h.__box_off&&(h.lt.ubody.showtitle||h.__tabh)&&(w+=h.__box_off),h.__titleh&&("PANEL"==h.objtype||"TAB"==h.objtype)&&(h.lt.ubody.showtitle||"PANEL"==h.objtype&&j.editmode)&&(w+=h.__titleh),h.__tabh&&"TAB"==h.objtype&&(A=h.__tabh||0),g.x=t,g.y=i+w+A,g.w=o,g.h=d-(w+A)):(g.x=t,g.y=i,g.w=o,g.h=d);if(u=k._measureContainer.call(k),g.w=u.m.w>g.w?u.m.w:g.w,g.h=u.m.h>g.h?u.m.h:g.h,k.lt={x:g.x,y:g.y,w:g.w,h:g.h},e._g=0,(b=k.box).removeClass("ic-top"),b.removeClass("ic-left"),b.removeClass("ic-right"),b.removeClass("ic-bottom"),p=j.isContainer(k.objtype),M||(0==g.x&&b.addClass("ic-left"),0==g.y&&b.addClass("ic-top"),g.x+g.w>r.w-10&&b.addClass("ic-right"),g.y+g.h>r.h-10&&b.addClass("ic-bottom")),x={left:M?r.x:g.x,top:M?r.y:g.y,width:M?r.w:g.w,height:M?r.h:g.h,zIndex:"_dc"==k.objtype?0:p?1:2},B&&"_dc"!=k.objtype?x.zIndex=p?3:4:a&&"_dc"!=k.objtype&&(x.zIndex=p?5:6),e.$box||(e.$box=$("<div></div>"),b.appendTo(e.$box)),h&&(e.$box.appendTo(h.$box),e.$box.addClass("col-lg-12")),(k._invalidate||!b.__ps||b.__ps&&(b.__ps.top!=x.top||b.__ps.left!=x.left||b.__ps.width!=x.width||b.__ps.height!=x.height))&&(k._invalidate=0,k._ps=x,k.__collapsed,z?b.hide():b.show(),b.__ps=x,b._invl=1),j.editmode?(k.showTitle.call(k,!0,!0),T&&j.showTabButton(k,!0)):(k.showTitle.call(k,k.showtitle,!0),T&&D?j.showTabButton(k,!0):T&&j.showTabButton(k,!1)),"_dc"!=k.objtype){var G=k.box.offset(),P=k.binner.offset();e.__box_off=P.top-G.top}if(k._v&&"_dc"!=k.objtype&&(I=IG$.j$ext._h(k.box_title)),"TAB"==k.objtype&&(j.editmode||D?e.__tabh=k.view?k.view.tabHeight():0:e.__tabh=0),e.__titleh=I,"PANEL"==k.objtype){var S=k.box,F=S.width(),O=S.height(),H=S.offset(),R=k.box_container,V=R.offset(),Z=R.width(),X=R.height();Z>0&&X>0&&((f={top:0,bottom:0,left:0,right:0}).left=V.left-H.left,f.right=F-Z-f.left,f.bottom=H.top+O-(V.top+X),f.top=f.bottom)}$.each(e.children,(function(t,i){var o=k.lt;i.lt.ubody;f?j.updateLayout(i,o.x+f.left,o.y+f.top,o.w-f.left-f.right,o.h-f.top-f.bottom,t,u,r,e,a):j.updateLayout(i,o.x,o.y,o.w,o.h,t,u,r,e,a),e._g+=0==e._direction?i.lt.pos.w:i.lt.pos.h})),$.each(e.children,(function(e,t){})),e.children_float&&$.each(e.children_float,(function(t,i){var o=k.lt;i.lt.ubody;j.updateLayout(i,o.x,o.y,o.w,o.h,t,u,r,e,!0),e._g+=0==e._direction?i.lt.pos.w:i.lt.pos.h}))},validateSplitter:function(){},showDropProxy:function(e,t,i){var o,d,n=this;IG$.j$ext._w(n.box),IG$.j$ext._h(n.box),n.drop_proxy;for(o=0;o<n.items.length;o++)(d=n.items[o]).showDropProxy.call(d,i)},hideDropProxy:function(){var e,t,i=this;for(i.drop_proxy&&i.drop_proxy.hide(),i.dockinsg&&i.dockinsg.hide(),e=0;e<i.items.length;e++)(t=i.items[e]).hideDropProxy.call(t)},dragOver:function(e,t,i){var o,d,n,l,r,h,a,c=this,_={x:e.pageX,y:e.pageY},s=$(c.body_container),f={top:s.scrollTop(),left:s.scrollLeft()};for(d=0;d<c.items.length;d++)(a=c.items[d]).dropOut.call(a),1==a.dragging&&(r=a);for(d=0;d<c.items.length;d++)if((o=(a=c.items[d]).dropHit(_,!0,null,f,i))&&"none"!=o&&0==a.dragging){for(l=(n=c.docitems[a.docid]).parent;l;){if("inner"==l.loc&&l.docid==r.docid){o="none";break}l=l.parent}if("_panel_"==o){if(n&&(h=c.getSubHit(n,_,0))&&h.dhit&&"none"!=h.dhit){r.docid!=h.ditem.docid&&h.ditem.dropIn.call(h.ditem,h.dhit);break}}else if("none"!=o){r.docid!=a.docid&&a.dropIn.call(a,o);break}}},getSubHit:function(e,t,i){var o,d,n,l,r={dhit:null,ditem:null},h=$(this.body_container),a={top:h.scrollTop(),left:h.scrollLeft()};if(!e.children)return r;for(o=0;o<e.children.length;o++){if("_dc"==(l=e.children[o]).objtype)r=this.getSubHit(l,t,1);else{if((n=(d=l.lt.ubody).dropHit.call(d,t,!0,!0,a))&&"none"!=n&&"_panel_"!=n){r.dhit=n,r.ditem=d;break}r=this.getSubHit(l,t,1)}if(r.dhit)break}return r},dragStop:function(e,t,i){var o,d,n,l,r,h,a,c,_,s,f,p,b=this,g={x:e.pageX,y:e.pageY},u=$(b.body_container),w={top:u.scrollTop(),left:u.scrollLeft()},m=0;for(o=0;o<b.items.length;o++)if(1==b.items[o].dragging){l=b.items[o],o;break}if(l&&(l._invalidate=1),b.editmode)for(o=0;o<b.items.length;o++)if((n=b.items[o].dropHit(g,!0,null,w,i))&&"none"!=n&&0==b.items[o].dragging){if("_panel_"!=n){d=b.items[o];break}if((h=b.docitems[b.items[o].docid])&&(a=b.getSubHit(h,g,0))&&a.dhit&&"none"!=a.dhit){n=a.dhit,d=a.ditem;break}}if(b.hideDropProxy(),b.editmode&&d&&"none"!=n){switch(r=b.docitems[d.docid],h=b.docitems[l.docid],n){case"top":case"bottom":_=1;break;case"left":case"right":_=0}if("TAB"==h.objtype||"PANEL"==h.objtype)for(c=r.parent;c;){if(c.docid==h.docid)return void b.updateDisplay();c=c.parent}if("top"!=n&&"left"!=n||(m=1),"inner"==n){for(o=0;o<h.parent.children.length;o++)if(h.parent.children[o].docid==h.docid){h.parent.children.splice(o,1);break}if(h.parent.children_float)for(o=0;o<h.parent.children_float.length;o++)if(h.parent.children_float[o].docid==h.docid){h.parent.children_float.splice(o,1),h.lt.ubody&&h.lt.ubody.setFloat(!1,!0);break}"PANEL"==r.objtype?(0==r.children.length?(s={objtype:"_dc",docid:null,iscontainer:!0,_direction:0,children:[],width:0,height:0,parent:r},b.processLayoutWidget(s,!0,null,b.ctrls),r.children.push(s)):s=r.children[0],h.parent=s,s.children.push(h)):"TAB"==r.objtype&&(h.parent=r,r.children.push(h))}else if("TAB"==r.parent.objtype){for(s={objtype:"PANEL",docid:null,iscontainer:!0,_direction:0,children:[],width:0,height:0,parent:r.parent},b.processLayoutWidget(s,!0,null,b.ctrls),b.createWidgetView(s.lt.ubody,null),o=0;o<r.parent.children.length;o++)if(r.parent.children[o].docid==r.docid){r.parent.children.splice(o,1,s);break}for(f={objtype:"_dc",docid:null,iscontainer:!0,_direction:_,children:[],width:0,height:0,parent:s},b.processLayoutWidget(f,!0,null,null),s.children.push(f),o=0;o<h.parent.children.length;o++)if(h.parent.children[o].docid==h.docid){h.parent.children.splice(o,1);break}if(h.parent.children_float)for(o=0;o<h.parent.children_float.length;o++)if(h.parent.children_float[o].docid==h.docid){h.parent.children_float.splice(o,1),h.lt.ubody&&h.lt.ubody.setFloat(!1,!0);break}0==h.parent.children.length&&b.removeWidget(h.parent.docid,1),r.parent=f,h.parent=f,m?(f.children.push(h),f.children.push(r)):(f.children.push(r),f.children.push(h))}else if(r.parent._direction==_){for(o=0;o<h.parent.children.length;o++)if(h.parent.children[o].docid==h.docid){h.parent.children.splice(o,1);break}if(h.parent.children_float)for(o=h.parent.children_float.length-1;o>=0;o--)h.parent.children_float[o].docid==h.docid&&(h.parent.children_float.splice(o,1),h.lt.ubody&&h.lt.ubody.setFloat(!1,!0));for(o=0;o<r.parent.children.length;o++)if(r.parent.children[o].docid==r.docid){r.parent.children.splice(m?o:o+1,0,h);break}"TAB"!=h.parent.objtype&&0==h.parent.children.length&&b.removeWidget(h.parent.docid,1),h.parent=r.parent}else if(r.parent.docid==h.parent.docid&&"_dc"==r.parent.objtype&&r.parent.children.length<3){for(r.parent._direction=_,o=0;o<r.parent.children.length;o++)if(r.parent.children[o].docid==h.docid){r.parent.children.splice(o,1);break}for(o=0;o<r.parent.children.length;o++)if(r.parent.children[o].docid==r.docid){r.parent.children.splice(m?o:o+1,0,h);break}}else{for(s={objtype:"_dc",docid:null,iscontainer:!0,_direction:_,children:[],width:0,height:0,parent:r.parent},b.processLayoutWidget(s,!0,null,b.ctrls),o=0;o<h.parent.children.length;o++)if(h.parent.children[o].docid==h.docid){h.parent.children.splice(o,1);break}if(h.parent.children_float)for(o=0;o<h.parent.children_float.length;o++)if(h.parent.children_float[o].docid==h.docid){h.parent.children_float.splice(o,1),h.lt.ubody&&h.lt.ubody.setFloat(!1,!0);break}for(p=r.parent,o=0;o<p.children.length;o++)if(p.children[o]==r){p.children.splice(o,1,s);break}"TAB"!=h.parent.objtype&&0==h.parent.children.length&&b.removeWidget(h.parent.docid,1),r.parent=s,h.parent=s,0==_?h.lt.ubody.width=r.lt.ubody.width:h.lt.ubody.height=r.lt.ubody.height,m?(s.children.push(h),s.children.push(r)):(s.children.push(r),s.children.push(h))}}else i&&(h=b.docitems[l.docid]).lt.ubody&&h.lt.ubody.val_fl_size();this.updateDisplay()},resizeContainer:function(e){var t=this;$.each(e,(function(e,i){t.changeContainer.call(t,i,i.lt.pos.w,i.lt.pos.h)}))},changeContainer:function(e,t,i){var o,d,n,l,r=e.objtype,h=e.children,a=0,c=0,_=0,s=0;if(this.setSize(e,t,i),"_dc"==r){for(o=0;o<h.length;o++)d=h[o],e._direction?(a=t,d.fixed_height?s+=d.lt.pos.h:c+=d.lt.pos.h):(d.fixed_width?_+=d.lt.pos.w:a+=d.lt.pos.w,c=i);for(o=0;o<h.length;o++)d=h[o],n=0,l=0,e._direction?(n=a,d.fh?l=d._fh:i&&c&&d.lt.pos.h&&(l=d.lt.pos.h/c*(i-s))):(d.fixed_width?n=d._fw:t&&a&&d.lt.pos.w&&(n=d.lt.pos.w/a*(t-_)),l=c),this.changeContainer(h[o],t>0?n:0,i>0?l:0)}else if("PANEL"==r){if(h&&h.length)for(o=0;o<h.length;o++)this.changeContainer(h[o],t,i)}else if("TAB"==r&&h&&h.length)for(o=0;o<h.length;o++)this.changeContainer(h[o],t,i)},setSize:function(e,t,i){t>0&&(e.lt.pos.w=t,e.lt.ubody.width=t),i>0&&(e.lt.pos.h=i,e.lt.ubody.height=i)},_updateNodeSize:function(e,t){var i,o,d,n,l,r=e.lt.ubody;if(e._w=0,e._h=0,e._fw=0,e._fh=0,e._mw=0,e._mh=0,d=r.fixed_width,n=r.fixed_height,e.fixed_width=d,e.fixed_height=n,"_dc"==e.objtype){for(o=e._direction,i=0;i<e.children.length;i++)(l=e.children[i]).lt.ubody,this._updateNodeSize(l,t),0==o?(l.fixed_height&&(e._fh=Math.max(l._fh,e._fh)),l.fixed_width&&e._fw>-1?e._fw+=l._fw:e._fw=-1):1==o&&(l.fixed_width&&(e._fw=Math.max(l._fw,e._fw)),l.fixed_height&&e._fh>-1?e._fh+=l._fh:e._fh=-1);for((e._fw>0||e._fh>0)&&(this.changeContainer(e,1==o&&e._fw>0?e._fw:0,0==o&&e._ff>0?e._fh:0),e.fixed_width=e._fw>0,e.fixed_height=e._fh>0),e._fw=0,e._fh=0,i=0;i<e.children.length;i++)(l=e.children[i]).lt.ubody,this._updateNodeSize(l,t),0==o?(l.fixed_height?e._fh=Math.max(l._fh,e._fh):e.fixed_height||(e._h=Math.max(l._h,e._h,l._fh)),e._mh=Math.max(30,e._mh,l._mh,l._fh),l.fixed_width?(e._fw+=l._fw,e._mw+=l._mw):(e._w+=l._w,e._mw+=30)):1==o&&(l.fixed_width?e._fw=Math.max(l._fw,e._fw):e.fixed_width||(e._w=Math.max(l._w,e._w,l._fw)),e._mw=Math.max(30,e._mw,l._mw,l._fw),l.fixed_height?(e._fh+=l._fh,e._mh+=l._mh):(e._h+=l._h,e._mh+=30))}else if("PANEL"==e.objtype||"TAB"==e.objtype){for(e.children=e.children||[],r.width=r.width>0?r.width:30,r.height=r.height>0?r.height:30,i=0;i<e.children.length;i++)l=e.children[i],this._updateNodeSize(l,t),"TAB"==e.objtype?(e._fw=Math.max(l._fw,e._fw),e._fh=Math.max(l._fh,e._fh),e._w=Math.max(l._w,e._w),e._h=Math.max(l._h,e._h)):(e._fw+=l._fw,e._fh+=l._fh,e._w+=l._w,e._h+=l._h);d?(e._fw=r.width,e._mw=e._fw):(e._w=r.width,e._mw=30),n?(e._fh=r.height,e._mh=e._fh):(e._h=r.height,e._mh=30)}else r.width=r.width>0?r.width:30,r.height=r.height>0?r.height:30,d?(e._fw=r.width,e._mw=e._fw):(e._w=r.width,e._mw=30),n?(e._fh=r.height,e._mh=e._fh):(e._h=r.height,e._mh=30)},_updateNodeSize_responsive:function(e){var t,i,o,d,n=this,l=e.lt.ubody;n.$openmode;if(e._w=0,e._h=0,e._fw=0,e._fh=0,e._mw=0,e._mh=0,i=l.fixed_width,o=l.fixed_height,e.fixed_width=i,e.fixed_height=o,"_dc"==e.objtype){for(t=0;t<e.children.length;t++)(d=e.children[t]).lt.ubody,n._updateNodeSize_responsive(d),d.fixed_height&&(e._fh=Math.max(d._fh,e._fh)),d.fixed_width&&e._fw>-1?e._fw+=d._fw:e._fw=-1;for(e._fh>0&&(n.changeContainer(e,0,e._ff>0?e._fh:0),e.fixed_height=e._fh>0),e._fw=0,e._fh=0,t=0;t<e.children.length;t++)(d=e.children[t]).lt.ubody,n._updateNodeSize_responsive(d),d.fixed_height?e._fh=Math.max(d._fh,e._fh):e.fixed_height||(e._h+=d._h),e._mh=Math.max(30,e._mh,d._mh,d._fh),d.fixed_width?(e._fw+=d._fw,e._mw+=d._mw):(e._w+=d._w,e._mw+=30)}else if("PANEL"==e.objtype||"TAB"==e.objtype){for(e.children=e.children||[],l.width=l.width>0?l.width:30,l.height=l.height>0?l.height:30,t=0;t<e.children.length;t++)d=e.children[t],n._updateNodeSize_responsive(d),"TAB"==e.objtype?(e._fw=Math.max(d._fw,e._fw),e._fh=Math.max(d._fh,e._fh),e._w=Math.max(d._w,e._w),e._h=Math.max(d._h,e._h)):(e._fw+=d._fw,e._fh+=d._fh,e._w+=d._w,e._h+=d._h);e._w=l.width,e._mw=30,o?(e._fh=l.height,e._mh=e._fh):(e._h=l.height,e._mh=30)}else l.width=l.width>0?l.width:30,l.height=l.height>0?l.height:30,i?(e._fw=l.width,e._mw=e._fw):(e._w=l.width,e._mw=30),o?(e._fh=l.height,e._mh=e._fh):(e._h=l.height,e._mh=30)}};
IG$.dockingWidget=function(e,t,i){var o=this;o.owner=e,e.editmode=1,o.container=!1,o.showtitle=!0,o._v=!0,o.visible=!0,o.x=i&&i.x?i.x:null,o.y=i&&i.y?i.y:null,o.width=i&&i.width?i.width:null,o.height=i&&i.height?i.height:null,o.fixed_width=!1,o.fixed_height=!1,o.hidetitle=!1,o.docid=t,o.activeTab=0,o.dragging=!1,o.box=$("<div class='wrapper wrapper-content animated fadeInRight idv-dk-main' "+t+"></div>").css({position:"relative",percentWidth:100,percentHeight:100}),o.binner=$("<div class='ibox float-e-margins'></div>").appendTo(o.box),o.bcollapse=$("<div class='dock_collpase_indicator'></div>").appendTo(o.box).hide(),o.box_title=$("<div class='ibox-title'></div>").appendTo(o.binner).dselect(),o.box_container=$("<div class='ibox-content ibox-widget-container'></div>").appendTo(o.binner).css({minHeight:260}),$("<h5><div class='dock_title_icon'></div><span id='dock_title_text'>&nbsp;</span></h5>").appendTo(o.box_title),o.btnarea=$("<div class='ibox-tools'></div>").appendTo(o.box_title),o.measure_selector=$("<select class='dock_measure_selector'></select>").appendTo(o.box_title),o.measure_selector.bind("change",(function(e){var t,i=o.measure_selector.val(),l=-1;if(i&&o._measures_sel){for(t=0;t<o._measures_sel.length;t++)if(o._measures_sel[t]==i){l=t;break}l>-1&&o.view._refreshMeasureGroup.call(o.view,l)}})),o.btnmap={},0!=(i=i||{}).draggable&&o.box.draggable({handle:o.box_title,delay:300,distance:5,start:function(t,i){if(!e.editmode&&(!o.is_float||o.is_float&&!o.fl_moveable))return!1;o.dragging=!0,e.editmode&&e.showDropProxy.call(e,t,i,o.is_float)},drag:function(t,i){e.editmode&&e.dragOver.call(e,t,i,o.is_float)},stop:function(t,i){(e.editmode||o.is_float&&o.fl_moveable)&&e.dragStop.call(e,t,i,o.is_float),o.dragging=!1}}),o.box.resizable({disabled:!0,start:function(e,t){},stop:function(e,t){o.val_fl_size()}}),o.box.bind("resize",(function(){o.__collapsed||o.resizeH.call(o)})),o.bcollapse.bind("click",(function(){o.set_collapse(!1)})),o._dzid=o.owner._dzid+"_"+o.docid,o.resizeH(),i&&(o.fixed_width=void 0!==i.fixed_width?i.fixed_width:o.fixed_width,o.fixed_height=void 0!==i.fixed_height?i.fixed_height:o.fixed_height,o.showtitle=!i.hidetitle,o.showTitle(o.showtitle),o.setTitle(i.title),o.setPanelCss(i.panel_css),o.fl_resizable=i.fl_resizable,o.fl_moveable=i.fl_moveable,o.hide_maximize=i.hide_maximize,o.fl_collapsed=i.fl_collapsed,o.fl_collapsible=i.is_float&&!0===i.fl_collapsible,o.fl_collapse_css=i.fl_collapse_css,o.setFloat(i.is_float),o.objtype=o.objtype||i.objtype),o.init()},IG$.dockingWidget.prototype={validateProperty:function(e){var t=this;switch(t.objtype){case"SHEET":case"FILTER":case"TEXT":case"RPT_VIEW":t.container=!1,t.children=[];break;case"PANEL":case"_dc":case"TAB":t.container=!0,t._direction=0,t.children=[]}if("_dc"!=t.objtype&&t._pc){for(var i=t._pc.parent;i&&"PANEL"!=i.objtype;)i=i.parent;i&&i.lt&&i.lt.ubody.panel_css&&i.lt.ubody.panel_css.indexOf("no_border_children")>-1?(t.panel_css=t.panel_css||"",t.panel_css.indexOf("no_border")<0&&(t.panel_css+=";no_border",t.setPanelCss(t.panel_css))):i&&i.lt&&t.panel_css&&t.panel_css.indexOf(";no_border")>-1&&(t.panel_css=t.panel_css.replace(";no_border",""),t.setPanelCss(t.panel_css))}e&&t._pc&&t._pc.children&&$.each(t._pc.children,(function(t,i){i.lt&&i.lt.ubody&&i.lt.ubody.validateProperty(e)})),"SHEET"==t.objtype&&t.view&&!t._bind_event&&(t.view.on("_view_changed",(function(e){var i=t.view.sheetoption;i&&i.model&&t.btnmap.selchart.el[i.model.tb_chart&&1==t.view.activeView?"show":"hide"]()})),t._bind_event=1)},$upd_exec:function(){var e=this,t=e.get_sop();e.is_float&&e.owner.editmode||t&&e.is_float&&t.fl_resizable?e.box.resizable("enable"):e.box.resizable("disable")},setToolButtons:function(e){var t,i=this,o=e||[],l=(i.owner,i.btnarea),s=ig$.sheet_toolbar$;t=i.btnmap={},l.empty(),"SHEET"==i.objtype&&(o.push({name:"viewgrid",tooltip:IRm$.r1("L_VIEW_GRID"),hidden:!0,cls:"idv-dk-btn-vgrid",handler:function(e){this.view.updateViewMode.call(this.view,"grid")},scope:i}),o.push({name:"viewchart",tooltip:IRm$.r1("L_VIEW_CHART"),hidden:!0,cls:"idv-dk-btn-vchart",handler:function(e){this.view.updateViewMode.call(this.view,"chart")},scope:i}),o.push({name:"selchart",tooltip:IRm$.r1("L_CHART_SEL"),hidden:!0,cls:"idv-dk-btn-chartsel",handler:function(e){var t=this,i=t.view.sheetoption;i&&i.model&&t.owner.configDock(t.docid,"config_selchart")},scope:i}),o.push({name:"viewrstat",hidden:!0,tooltip:IRm$.r1("L_VIEW_RSTAT"),cls:"idv-dk-btn-vrstat",handler:function(e){this.view.updateViewMode.call(this.view,"r")},scope:i})),o.push({name:"exp_excel",tooltip:IRm$.r1("L_EXPORT_EXCEL"),hidden:!0,cls:"idv-dk-btn-e-xls",handler:function(e){this.view.exportSheet.call(this.view,"EXCEL")},scope:i}),o.push({name:"exp_pdf",hidden:!0,tooltip:IRm$.r1("L_EXPORT_PDF"),cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"PDF")},scope:i}),o.push({name:"jasper_excel",hidden:!0,tooltip:IRm$.r1("L_EXPORT_JASPER_EXCEL"),cls:"idv-dk-btn-e-xls",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_EXCEL")},scope:i}),o.push({name:"jasper_pdf",hidden:!0,tooltip:IRm$.r1("L_EXPORT_JASPER_PDF"),cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_PDF")},scope:i}),o.push({name:"jasper_ppt",hidden:!0,tooltip:IRm$.r1("L_EXPORT_JASPER_PPT"),cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_PPT")},scope:i}),o.push({name:"jasper_docx",hidden:!0,tooltip:IRm$.r1("L_EXPORT_JASPER_DOCX"),cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_DOCX")},scope:i}),o.push({name:"jasper_rtf",hidden:!0,tooltip:IRm$.r1("L_EXPORT_JASPER_RTF"),cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_RTF")},scope:i}),o.push({name:"jasper_html",hidden:!0,tooltip:IRm$.r1("L_EXPORT_JASPER_HTML"),cls:"idv-dk-btn-e-pdf",handler:function(e){this.view.exportSheet.call(this.view,"JASPER_HTML")},scope:i}),o.push({name:"office_0",hidden:!0,tooltip:IRm$.r1("L_EXPORT_OFFICE_0"),cls:"idv-dk-btn-e-off-0",handler:function(e){this.view.exportSheet.call(this.view,"OFFICE_0")},scope:i}),o.push({name:"office_1",hidden:!0,tooltip:IRm$.r1("L_EXPORT_OFFICE_1"),cls:"idv-dk-btn-e-off-1",handler:function(e){this.view.exportSheet.call(this.view,"OFFICE_1")},scope:i}),o.push({name:"office_2",hidden:!0,tooltip:IRm$.r1("L_EXPORT_OFFICE_2"),cls:"idv-dk-btn-e-off-1",handler:function(e){this.view.exportSheet.call(this.view,"OFFICE_2")},scope:i}),o.push({name:"office_3",hidden:!0,tooltip:IRm$.r1("L_EXPORT_OFFICE_3"),cls:"idv-dk-btn-e-off-1",handler:function(e){this.view.exportSheet.call(this.view,"OFFICE_3")},scope:i}),o.push({name:"exp_csv",hidden:!0,tooltip:IRm$.r1("L_EXPORT_CSV"),cls:"idv-dk-btn-e-csv",handler:function(e){this.view.downloadAllCSV.call(this.view,"CSV")},scope:i}),ig$.features&&!1===ig$.features.ml&&"SHEET"==i.objtype&&o.push({name:"ml_learn",cls:"ig_ml_learn",tooltip:IRm$.r1("L_ML"),hidden:!1,handler:function(e){this.view.mlLearn.call(this.view)}}),s&&s.length&&$.each(s,(function(e,t){o.push({name:t.key,label:t.label,tooltip:t.tooltip,hidden:!0,cls:t.cls,handler:function(e){try{t.handler&&t.handler.call(t.scope||i.view,i.view,t.key)}catch(e){}},scope:i})})),o.push({name:"pivot",hidden:!0,tooltip:IRm$.r1("L_PIVOT"),cls:"icon-toolbar-pivot",handler:function(e){var t=this.owner;t.configDock.call(t,e.docid,"config_pivot")},scope:i}),o.push({name:"config",hidden:!0,tooltip:IRm$.r1("L_WIDGET_OPTION"),cls:"icon-grid-config",handler:function(e){var t=this.owner;t.configDock.call(t,e.docid,"config_doc")},scope:i}),o.push({name:"collapse",hidden:!0,tooltip:IRm$.r1("B_COLLAPSE"),cls:"dock_collapse_button",handler:function(e){var t=this.owner;i.set_collapse(!0),t.collapseWidget.call(t,e.docid)},scope:i}),o.push({name:"maximize",tooltip:IRm$.r1("L_MAXIMIZE"),hidden:i.hide_maximize,cls:"dock_maximize_button",handler:function(e){var t=this.owner;t.maximizeWidget.call(t,e.docid)},scope:i}),o.push({name:"close",hidden:!0,tooltip:IRm$.r1("B_CLOSE"),cls:"dock_close_button",handler:function(e){var t=this.owner;t.closeWidget.call(t,e.docid)},scope:i}),$.each(o,(function(e,o){var s=$("<a class='dock_button "+(o.cls||"")+"'></a>").appendTo(l).dselect();o.el=s,o.tooltip&&s.attr("title",o.tooltip),o.label&&s.append("<span>"+o.label+"</span>"),o.hidden&&o.el.hide(),t[o.name||"btn_"+e]=o,s.bind("click",(function(e){o.handler?o.handler.call(o.scope||i,i):i.box.trigger("buttonclick",{panel:i,button:o})}))}))},dropIn:function(e){var t=this.owner,i=this.binner,o=5,l=5,s=IG$.j$ext._w(i)-10,n=IG$.j$ext._h(i)-10;switch(e){case"right":o=s/2;case"left":s/=2;break;case"bottom":l=n/2;case"top":"top"==e&&(l+=20),n/=2}t.showDrop.call(t,this,{top:l,left:o,width:s,height:n},e)},dropOut:function(){this.owner.hideDropProxy.call(this.owner,this)},dropHit:function(e,t,i,o,l){var s,n,a,d,h,c,_,r,p=this,f=p._pc,b=e.x+o.left,v=e.y+o.top,m=0,w=0,u=p.bbox;if(u.x<b&&b<u.x+u.w&&u.y<v&&v<u.y+u.h&&(n="none",t&&"_dc"!=p.objtype)){for(s=f.parent;s&&("PANEL"!=s.objtype&&"TAB"!=s.objtype||(m+=20),!(s=s.parent)||s!=s.parent););w=2*m*.3,"PANEL"==p.objtype||"TAB"==p.objtype?(w=l?10:20,h=u.x+m,_=u.x+m+20,c=u.y+m+20,r=u.y+u.h-2*m-20,c<v&&v<r?h<b&&b<_?n="left":u.x+u.w-2*m-20<b&&b<u.x+u.w-2*m&&(n="right"):h<b&&b<u.x+u.w-2*m&&(u.y+m<v&&v<c?n="top":u.y+u.h-2*m-20<v&&v<u.y+u.h-2*m&&(n="bottom")),"TAB"==p.objtype&&"none"==n?(p._pc.children=p._pc.children||[],p._pc.children.length>0?u.x<b&&b<u.x+u.w&&u.y+20<v&&v<u.y+40&&(n="inner"):n="inner"):"PANEL"==p.objtype&&"none"==n&&(n=p._pc.children.length>0&&"_dc"==p._pc.children[0].objtype&&p._pc.children[0].children.length?"_panel_":"inner")):(w=l?.1:.3,a=u.h-2*m,d=u.w-2*m,h=u.x+m,c=u.y+m+a*w,_=u.x+m+d*w,r=u.y+u.h-a*w-m,c<v&&v<r?h<b&&b<_?n="left":u.x+u.w-d*w-m<b&&b<u.x+u.w-m&&(n="right"):_<b&&b<u.x+u.w-d*w-m&&(u.y+m<v&&v<u.y+m+a*w?n="top":u.y+u.h-a*w-m<v&&v<u.y+u.h-m&&(n="bottom")))}return n},init:function(){var e=this;e.setToolButtons();var t=e.btnmap,i=t.pivot.el,o=t.config.el,l=t.collapse.el,s=t.maximize.el;e.__collapsed=!0===e.is_float&&!0===e.fl_collapsible&&!0===e.fl_collapsed,e.set_collapse(e.__collapsed),e.box_title.bind({click:function(){var t="FILTER"==e.objtype||"SHEET"==e.objtype;e._editmode?(o.show(),t&&i.show()):t&&e._show_pivot&&i.show(),s[e.hide_maximize?"hide":"show"](),l[!0===e.fl_collapsible?"show":"hide"]()},mouseover:function(){var t="FILTER"==e.objtype||"SHEET"==e.objtype;e._editmode?(o.show(),t&&i.show()):t&&e._show_pivot&&i.show(),s[e.hide_maximize?"hide":"show"](),l[!0===e.fl_collapsible?"show":"hide"]()},mouseout:function(){var t="FILTER"==e.objtype||"SHEET"==e.objtype;e._editmode?(o.fadeOut(2e3,(function(){o.hide()})),t&&!e._show_pivot&&i.fadeOut(2e3,(function(){i.hide()}))):t&&e._show_pivot&&i.show(),s[e.hide_maximize?"hide":"show"](),l[!0===e.fl_collapsible?"show":"hide"]()}})},resizeH:function(){var e=this,t=IG$.j$ext._w(e.binner),i=IG$.j$ext._h(e.binner),o=e.box_container,l=o.children(":first");if(t>0&&i>0&&(e.showtitle||e.owner.editmode?e.box_title.show():e.box_title.hide(),e.view)){var s=Math.floor(IG$.j$ext._w(o)),n=Math.floor(IG$.j$ext._h(o)),a=s,d=n;s&&n&&(s!=e._vw||n!=e._vh)&&(e._vw=s,e._vh=n,l&&l.length&&(a=IG$.j$ext._w(l),d=IG$.j$ext._h(l)),"_dc"!=e.objtype&&(e.view.setSize(a,d,!0),o.hide().show(0)))}},setTitle:function(e){this.title=e,this.applyFlt()},getTitle:function(){return $("#dock_title_text",this.box_title).text().trim()},_title:function(e){var t=$("#dock_title_text",this.box_title);t.html(e||"&nbsp;"),e&&"<"!=e.charAt(0)?t.attr("title",e):t.removeAttr("title"),this.box.trigger("titlechange",{panel:this})},formatTitle:function(e){var t,i,o,l,s,n=this._param;for(t=(e=IG$._rrcs(this,e))?e.lastIndexOf("${"):-1;t>-1&&(i=e.indexOf("}",t))>-1;)s="",(o=e.substring(t+2,i))&&n&&(n[o]?s=n[o]:o.indexOf(";")>0&&(s=n[(l=o.split(";"))[0]]||l[1]||"")),t=(e=e.substring(0,t)+s+e.substring(i+1)).lastIndexOf("${",t+2);return e},applyFlt:function(){var e,t=this.title;e=this.formatTitle(t),this.title_disp=e,this._title(e)},showTitle:function(e,t){if(void 0!==e){var i=this;1!=t&&(i.showtitle=e),!i.showtitle&&i.owner.editmode&&"PANEL"!=i.objtype?i.box_title.addClass("dock_title_floating"):i.box_title.removeClass("dock_title_floating"),e!=i._v&&(i._v=!!i.owner.editmode||e,i.box_title[i._v?"show":"hide"](),i.resizeH())}},setPanelCss:function(e){var t,i=this;if(i.$pcss){var o=i.$pcss.split(";");for(t=0;t<o.length;t++)o[t]&&i.box.removeClass(o[t])}if(e){var l=e.split(";");for(t=0;t<l.length;t++)l[t]&&i.box.addClass(l[t])}i.panel_css=e,i.$pcss=e},setFloat:function(e,t){var i=this,o=i.get_sop();i.is_float=e,o&&(i.fl_resizable=o.fl_resizable,i.fl_moveable=o.fl_moveable,i.hide_maximize=o.hide_maximize,i.fl_collapsed=!0===o.fl_collapsed,i.fl_collapsible=!0===i.is_float&&!0===o.fl_collapsible,i.fl_collapse_css=o.fl_collapse_css,i.set_collapse(!0===i.is_float&&!0===i.fl_collapsed)),i.is_float||i.set_collapse(!1),i.is_float&&i.fl_resizable?i.box.resizable("enable"):i.box.resizable("disable"),t&&o&&(o.is_float=e)},set_collapse:function(e){var t=this;if(void 0===e&&(e=!t.__collapsed),t.__collapsed=e,e){if(t.box.addClass("dock_collapsed"),t.fl_collapse_css){var i=t._fl_css,o=t.fl_collapse_css.indexOf(",")>-1?t.fl_collapse_css.split(","):t.fl_collapse_css.split(";");i&&$.each(i,(function(e,i){i&&t.bcollapse.removeClass(i)})),$.each(o,(function(e,i){i&&t.bcollapse.addClass(i)})),t._fl_css=o}t.bcollapse.fadeIn(),t.box.css({width:"auto",height:"auto"})}else t.box.removeClass("dock_collapsed"),t.bcollapse.hide(),t._ps&&t.box.css({width:t._ps.width,height:t._ps.height}),setTimeout((function(){t.resizeH()}),10)},get_sop:function(){var e;return this.view&&this.view.sheetoption&&this.view.sheetoption.model&&(e=this.view.sheetoption.model),e},val_fl_size:function(){var e,t=this,i=t.get_sop(),o=$(t.owner.body_container);if(!t.__collapsed&&i){e=t.box.offset(),boffset=o.offset();var l=Math.round(e.top-boffset.top),s=Math.round(e.left-boffset.left),n=Math.round(o.width()),a=Math.round(o.height()),d=Math.round(t.box.width()),h=Math.round(t.box.height());i.fl_top&&"%"==i.fl_top[i.fl_top.length-1]?i.fl_top=Math.round(l/a*100)+"%":i.fl_top=""+l,i.fl_left&&"%"==i.fl_left[i.fl_left.length-1]?i.fl_left=Math.round(s/n*100)+"%":i.fl_left=""+s,i.fl_right&&"%"==i.fl_right[i.fl_right.length-1]?i.fl_right=Math.round((n-s-d)/n*100)+"%":i.fl_right=""+(n-s-d),i.fl_bottom&&"%"==i.fl_bottom[i.fl_bottom.length-1]?i.fl_bottom=Math.round((a-l-h)/a*100)+"%":i.fl_bottom=""+(a-l-h),i.fl_width&&"%"==i.fl_width[i.fl_width.length-1]?i.fl_width=Math.round(d/n*100)+"%":i.fl_width=""+d,i.fl_height&&"%"==i.fl_height[i.fl_height.length-1]?i.fl_height=Math.round(h/a*100)+"%":i.fl_height=""+h}},showMeasureSelector:function(e,t){var i,o,l=this.measure_selector,s=-1;if(e&&t.length>1)for(this._measures_sel=t,l.show(),(o=l.val())||(o=t[0]),l.empty(),i=0;i<t.length;i++)t[i]==o&&(s=i),$("<option"+(t[i]==o?" selected":"")+">"+t[i]+"</option>").appendTo(l);else this.measures_sel=null,l.hide();return s},hide:function(){this.box.hide()},show:function(){"_dc"!=this.objtype&&this.box.show()},viewchange:function(e,t){var i=this;i.btnmap.viewgrid&&i.btnmap.viewgrid.el[e?"show":"hide"](),i.btnmap.viewchart&&i.btnmap.viewchart.el[e?"show":"hide"](),i.btnmap.viewrstat&&i.btnmap.viewrstat.el[e&&t?"show":"hide"]()},setReportOption:function(e){var t,i,o,l,s,n=this,a=ig$.sheet_toolbar$,d={},h=e.model,c=[];if(n.btnmap.exp_excel.el.hide(),n.btnmap.exp_pdf.el.hide(),n.btnmap.exp_csv.el.hide(),n.btnmap.jasper_excel.el.hide(),n.btnmap.jasper_pdf.el.hide(),n.btnmap.jasper_docx.el.hide(),n.btnmap.jasper_html.el.hide(),n.btnmap.jasper_ppt.el.hide(),n.btnmap.jasper_rtf.el.hide(),n.btnmap.office_0.el.hide(),n.btnmap.office_1.el.hide(),n.btnmap.office_2.el.hide(),n.btnmap.office_3.el.hide(),h&&h.tb_prt_i)for(l=h.tb_prt_i.split(";"),s=h.tb_prt_s?h.tb_prt_s.split(";"):[],o=0;o<l.length;o++)d[l[o]]={icon:s[o]};if(a)for(o=0;o<a.length;o++)t=a[o],(i=n.btnmap[t.key])&&i.el.hide(),d[t.key]&&n.btnmap[t.key].el.show();h&&(n.viewchange(h.tb_vch),n._show_pivot=h.tb_pivot,n._show_chart=h.tb_chart,n._show_pivot&&n.btnmap.pivot.el.show(),h.tb_prt&&h.tb_prt_i&&(c=[{n:"excel",m:"exp_excel"},{n:"pdf",m:"exp_pdf"},{n:"csv",m:"exp_csv"},{n:"jasper_excel",m:"jasper_excel"},{n:"jasper_pdf",m:"jasper_pdf"},{n:"jasper_ppt",m:"jasper_ppt"},{n:"jasper_docx",m:"jasper_docx"},{n:"jasper_rtf",m:"jasper_rtf"},{n:"jasper_html",m:"jasper_html"},{n:"office_0",m:"office_0"},{n:"office_1",m:"office_1"},{n:"office_2",m:"office_2"},{n:"office_3",m:"office_3"}],$.each(c,(function(e,t){d[t.n]&&(n.btnmap[t.m].el.show(),d[t.n].icon&&n.btnmap[t.m].el.addClass(d[t.n].icon))}))))},showDropProxy:function(e){this.owner.drawDropProxy.call(this.owner,this,e),this.$sizeDropProxy(e)},hideDropProxy:function(){this.owner.removeDropProxy.call(this.owner,this)},$sizeDropProxy:function(){var e=this,t=$(e.owner.body_container),i=e.box.offset(),o=IG$.j$ext._w(e.box),l=IG$.j$ext._h(e.box),s=e.drop_proxy;e.bbox={x:i.left+t.scrollLeft(),y:i.top+t.scrollTop(),w:o,h:l},IG$.j$ext._w(s,o),IG$.j$ext._h(s,l)},setActive:function(e){var t=this,i=t.box_title,o=t.box_container;t._active=e,1==e?(i.removeClass("doc_title_normal").addClass("doc_title_selected"),o.removeClass("doc_normal").addClass("doc_active"),t.owner.editmode&&!t.showtitle&&t.box_title.show()):(i.removeClass("doc_title_selected").addClass("doc_title_normal"),o.removeClass("doc_active").addClass("doc_normal"),t.showtitle||t.owner.editmode||t.box_title.hide())},_measureContainer:function(){var e=this._pc;return{fixed:{w:e._fw,h:e._fh},flex:{w:e._w,h:e._h},m:{w:e._mw,h:e._mh}}}};
$s.apply(IG$.reportbase$,{afterinit:function(e){var o=this,t=o._par;o.dzone=new IG$.boDockZone(e,o),o.dzone.cmode=o.cmode||0,t&&(t._dzseq=t._dzseq||0),o._dzid=t?t._dzid+"_"+t._dzseq++:"root",o.dzone._dzid=o._dzid,o.dzone.closeDockNoti={f:o.closeDockNoti,s:o},o.dzone.box.bind({config_doc:function(e,t,n){o.configDockNotify.call(o,t)},config_pivot:function(e,t,n){o.configDockPivot.call(o,t,n)},config_selchart:function(e,t,n){var i=o.dzone.getBox(t);o.setActSheet(i),o.toolbarHandler("cmd_chartwizard")}}),IG$.__ep&&o.dzone.box.bind("boxresized",(function(){var e=o.getWidth(),t=o.getHeight(),n=borderpanel.getWidth(),i=borderpanel.getHeight(),l=IG$.j$ext._w(o.dzone.box),d=IG$.j$ext._h(o.dzone.box);(n<l||i<d)&&(e-n,t-i)})),o.init_f(1==o.vmode||null)},createSheet:function(e,o,t,n){var i,l=this,d=$("<div class='igc-sheet-cntbox'></div>").appendTo(t.box_container),c=$("<div></div>").appendTo(t.box_container),r=t.box_title,a=IG$.j$ext._w(d),s=IG$.j$ext._h(t.box_container);return c.css({position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",overflow:"hidden"}).hide(),i=new IG$.p$SheetView({width:a||(o&&o.model.layoutinfo?o.model.layoutinfo.width||IG$.j$ext._w(d):null),height:s||(o&&o.model.layoutinfo?o.model.layoutinfo.height||IG$.j$ext._h(d):null),renderTo:d[0],rendermask:c,meta_type:l.meta_type,renderBox:t.docid,reportoption:l.reportoption,sheetoption:o,uid:l.uid,sheetindex:e,region:0==e?"center":(o?o.region:null)||"east",collapsible:!1,minSize:100,reportpanel:l,floatable:!1,bindheaderevent:!1,rst:n,border:0,removeObj:function(){this.removeAll(),r.unbind("click")},listeners:{drillreport:function(e){l.doDrillReport.call(l,e)},itemclick:function(e,o){return l.setActSheet.call(l,t),0==e.activeView?l.doCellClick.call(l,e,o):l.doDrillReport.call(l,e),!1},itemdblclick:function(e,o){l.doDrillReport.call(l,e);return l.setActSheet.call(l,t),!1},menu:function(e,o){l.procMenu.call(l,e,o)},pivotchanged:function(e){l.contentchanged=!0},cresized:function(e,o){l._boxresized.call(l,e,o)},result_loaded:function(e){e.executioncode=0,l.refreshParameters.call(l,e),l.updateRptResCnt.call(l,!0),e.sheetoption&&e.sheetoption.model&&"M_SYNC"!=e.sheetoption.model.dataquerymode&&l.runSyncRes(e)},before_result_load:function(e,o,t){l.updateRptMeasureGroup(e,o,t)},export_sheet:function(e,o){l.exportToFile.call(l,o.filetype.toUpperCase(),!1,e)},destroy:function(e,o){e.__dx=!0},afterrender:function(e){t.view=e,$(e.body.dom).bind("click",(function(){l.setActSheet.call(l,t)})),setTimeout((function(){t.box_container.trigger("i_ready")}),10)},_ld_:function(e){l.dzone.customLoad.call(l.dzone,!0,e)},_ldx_:function(e){l.dzone.setLoading.call(l.dzone,!1,e)},scope:this}}),r.bind("click",(function(){l.setActSheet.call(l,t)})),i}});
IG$.report=function(e){var t=this;t.$opt=e,t.uid=e.uid,t.el={dom:e.target_div[0]},setTimeout((function(){t.afterinit(e.target_div)}),10)},IG$.report.prototype={down:function(e){},show:function(){this.setVisible(1)},hide:function(){this.setVisible(0)},setVisible:function(e){this.$opt.target_div[e?"show":"hide"]()},fireEvent:function(e,t){},afterinit:IG$.reportbase$.afterinit,init_f:IG$.reportbase$.init_f,rs_loadContent:IG$.reportbase$.rs_loadContent,applRptCnt:IG$.reportbase$.applRptCnt,updateLayout:IG$.reportbase$.updateLayout,updateExpOpt:IG$.reportbase$.updateExpOpt,createCtrl:IG$.reportbase$.createCtrl,_boxresized:IG$.reportbase$._boxresized,createSheet:IG$.reportbase$.createSheet,runSyncRes:IG$.reportbase$.runSyncRes,updateRptMeasureGroup:IG$.reportbase$.updateRptMeasureGroup,procMenu:IG$.reportbase$.procMenu,showDetailView:IG$.reportbase$.showDetailView,applyOption:IG$.reportbase$.applyOption,doCellClick:IG$.reportbase$.doCellClick,doDrillReport:IG$.reportbase$.doDrillReport,broadcastFilter:IG$.reportbase$.broadcastFilter,updateFormula:IG$.reportbase$.updateFormula,updatePivotCnt:IG$.reportbase$.updatePivotCnt,onFilterUpdate:IG$.reportbase$.onFilterUpdate,rs_showPrompt:IG$.reportbase$.rs_showPrompt,updateFilterChange:IG$.reportbase$.updateFilterChange,updateDataChange:IG$.reportbase$.updateDataChange,toolbarHandler:IG$.reportbase$.toolbarHandler,checkReport:IG$.reportbase$.checkReport,checkPivot:IG$.reportbase$.checkPivot,setActSheet:IG$.reportbase$.setActSheet,updateRptResCnt:IG$.reportbase$.updateRptResCnt,clearAuxFilter:IG$.reportbase$.clearAuxFilter,refreshParameters:IG$.reportbase$.refreshParameters,doDbrdExit:IG$.reportbase$.doDbrdExit,showPivotConfig:IG$.reportbase$.showPivotConfig,clipboardCopy:IG$.reportbase$.clipboardCopy,exportToFile:IG$.reportbase$.exportToFile,getExportData:IG$.reportbase$.getExportData,rexportToFile:IG$.reportbase$.rexportToFile,initTbar:function(){},updateTbarAll:function(){},updatePromptTbar:function(e){},configDockNotify:function(e){var t,r=this.dzone,o=e?r.getBox.call(r,e):null,a=o?o.view:null;this.sheets;a&&(t=a.sheetindex,this.showSheetOpt.call(this,t,a))},configDockPivot:function(e){this.showPivotConfig(e)},showSheetOpt:function(e,t){t.sheetindex=e;var r=this,o=new IG$.sheetobj({dzone:r.dzone,sheets:r.sheets,sheetoption:t.sheetoption,sheetindex:e,reportoption:r.reportoption,callback:new IG$.callBackObj(r,r.rshowSheetOpt,t)});IG$.checkLogin(this,o)}};