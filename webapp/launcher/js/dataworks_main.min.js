var hist,lastHist;IG$.historyManager=function(){this.addHistory=function(e){unFocus.History.addHistory(e)},this.hasMenu=function(){var e=unFocus.History.getCurrent();if(e&&""!=e){var n,i,t,a,o,l,s,r=e.split("&");for(t=0;t<r.length;t++)if((l=(s=r[t]).indexOf("="))>0)switch(a=s.substring(0,l),o=s.substring(l+1),a){case"lang":break;case"p1":n=o;break;case"p2":i=o}if(n&&i)return!0}return!1},this.historyListener=function(){var e=unFocus.History.getCurrent();return null!=e&&""!=e&&IG$.dlgLogin.logininfo&&IG$.navigateMenu(e),e},unFocus.History.addEventListener("historyChange",this.historyListener)},IG$.navigateMenu=function(e){if(e&&e.length>0&&lastHist!=e){if(IG$.checkUID(e))i=e;else{var n,i,t,a,o,l,s,r=e.split("&");for(t=0;t<r.length;t++)if((l=(s=r[t]).indexOf("="))>0)switch(a=s.substring(0,l),o=s.substring(l+1),a){case"lang":break;case"p1":n=o;break;case"p2":i=o}}i&&IG$.navigateMenuByUID(i,n)}},IG$.navigateMenuByUID=function(e,n,i,t){var a=new IG$._rpc$;a.init(null,{ack:"helpcontent",payload:{uid:e},mbody:{option:"translate"}},null,(function(e){var a=e[0],o=a.uid,l=a.type.toLowerCase(),s=a.locale_name||a.name,r=a.nodepath,d=a.manage||a.writable,c=!1;if("dashboard"==l&&"dashboardedit"==n?l=n:"export"==l&&(c=!0,l="report"),1==c){var m=$(document),p=$("#main"),u={renderTo:p[0],minHeight:m.height(),address:r,closable:!1,_ts_:!1,hiddenstatusbar:!0,hiddentoolbar:!0,header:!1,title:IG$.getTabTitle(s)};pitem=IG$.createAppPanel(o,l,s,r,d,u),pitem.on({_lc0:function(){},_lc1:function(){var e=pitem.calcSize.call(pitem);pitem.setSize(e.width,e.height)},resize:function(e,n,i,t,a,o){var l=$(document.body);IG$.j$ext._w(p,n),IG$.j$ext._h(p,i),IG$.j$ext._w(l,n),IG$.j$ext._h(l,i)}}),pitem.updateLayout(),pitem.setSize(m.width(),m.height()),p.css({minHeight:m.height()+"px"})}else IG$.mainPanel.navigateApp.call(IG$.mainPanel,o,l,s,r,void 0===t||t,d,null,i)}),null),a.send()},IG$.changeApp=function(e,n){var i,t,a,o=IG$.appsel,l=o.getLayout(),s=ig$.mainmenu.mainmenu,r=e;switch(e){case 2:for(i=0;i<o.items.items.length;i++)if("_I7d"==o.items.items[i].name){r=i;break}}if(l.setActiveItem(r),a=l.getActiveItem(),1==e&&n&&(a=a.down("[name=mexplorer]")).doSearch.call(a,n),2!=e&&(IG$.__atab=e),a.initComp&&a.initComp.call(a),4==e&&n)for(i=0;i<s.length;i++)(t=s[i]).tul&&t.tul[t.acls==n?"show":"hide"]()},IG$.$loadApp=function(e){var n,i,t,a,o,l,s,r,d=IG$.viewport,c=0,m=ig$.mainmenu.mainmenu,p=!0===ig$.collapse_main_menu?0:parseInt($.cookie("lmopt_w"))||0;if(ig$.$l_=ig$.$l_||0,IG$.__1m||1==IG$.__ep)setTimeout((function(){$("#loading").fadeOut({complete:function(){$(this).remove()}}),$("#loading-mask").fadeOut({complete:function(){$(this).remove()}})}),IG$.__ep?0:100);else{if((e=e||{}).mainview=i=e.mainview||{},i.appmenu=t=i.appmenu||{},i.navitab=a=i.navitab||{},i.navitree=o=i.navitree||{},ig$.app_tmpl=e,ig$.theme_id)switch(ig$.theme_id.toLowerCase()){case"desertlight":ig$.echarts_theme="dark"}if(t.bodyCls=void 0===t.bodyCls?"idv-side-bar":t.bodyCls,void 0===t.html&&(t.html="<div class='mainHeader'><div id='innerLogo' class='innerLogo'><span class='ig-c-text'>$APP_NAME</span><div class='ig-c-button'></div></div><ul class='mainNav' id='mainNav'></ul><div class='searchForm' id='searchForm'><input type='text' id='tsearch' placeholder='Search' class='searchKeyword' maxlength='1000' autocomplete='off'></input><span class='searchGo'></span></div></div><ul class='mainFooter' id='mainFooter'><li class='last'>$APP_COPY</li></ul>"),IG$.__ep=i.appmenu.printmode,IG$.__ep_m=i.appmenu.runmode?i.appmenu.runmode:0,!t.m_explorer&&m)for(r=0;r<m.length;r++)if("ig_mnav"==m[r].acls){m.splice(r,1);break}IG$.__ep_m<1&&(l=[{xtype:"button",border:0,width:30,margin:"0",cls:"ig-top-button",overCls:"ig-top-button-over",focusCls:"ig-top-button-click",text:IRm$.r1("S_HOME"),handler:function(){IG$.changeApp(0)}},{xtype:"button",border:0,hidden:a.hidden,text:IRm$.r1("S_NAVI"),cls:"ig-top-button",overCls:"ig-top-button-over",focusCls:"ig-top-button-click",margin:"0 5 0 0",handler:function(){IG$.changeApp(1)}}]),s=[{name:"app_main",header:!1,title:null,autoLoad:{url:"./html/navi_intro.jsp?lang="+useLocale,callback:IG$.mainPanel.initRecentVisit,scope:IG$.mainPanel},iconCls:"icon-welcome",autoScroll:!0},{xtype:"container",layout:"fit",items:[!1===o.hidden?{xtype:"container"}:new IG$.explorer({name:"mexplorer",vmode:"explorer",show_tree_items:!(!ig$.uiconfig||!ig$.uiconfig.navigator)&&ig$.uiconfig.navigator.show_tree_items})]},IG$.mainPanel,{xtype:"panel",layout:"fit",bodyPadding:20,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:"fit",flex:1,name:"dwizard",autoScroll:!0},{xtype:"container",layout:"fit",height:40,name:"dwizard_bar"}]}]},{xtype:"panel",layout:"fit",bodyPadding:0,items:[{xtype:"html",name:"dmgr",layout:"fit",autoScroll:!0,autoLoad:{url:"./html/menu.jsp",callback:IG$.mainPanel.initAdminMenu,scope:IG$.mainPanel}}]}],a.items&&a.items.length>0&&$.each(a.items,(function(e,n){var i,t;"navitab"==n.mtype&&("Dashboard"!=n.type&&"Report"!=n.type||(i=IG$.createAppPanel(n.uid,n.type.toLowerCase(),n.name,null,!1,{closable:!1,header:!1}),s.push(i),t=s.length-1,0==c&&(c=t),IG$.__ep_m<1&&l.push({xtype:"button",border:0,text:n.name,cls:"ig-top-button",overCls:"ig-top-button-over",focusCls:"ig-top-button-click",margin:"0 5 0 0",handler:function(){IG$.changeApp(t)},scope:this})))})),IG$.__ep_m>0&&(s.splice(0,2),c=0),IG$.__ep_m<1&&l.push(IG$.mainPanelTabBar),IG$.__atab=c,n=new $s.panel({layout:"border",padding:"0 0 0 0",items:[{xtype:"panel",width:t.width||223,ig_width_o:Number(t.o_width)||223,ig_width_c:Number(t.c_width)||30,height:t.height||null,region:t.region||"west",name:"appmenu",collapsible:!1,collapsed:!1,titleCollapse:!1,hidden:t.hidden,header:!1,border:!1,margins:"0 0 0 0",collapseMode:"mini",bodyCls:t.bodyCls||"",html:t.html,toggleSide:function(e){var i,a,o=$(this.body.dom),l=n.down("[name=t_main_amp]");t&&"north"==t.region?l&&(a=i=l.hidden,2===e&&(a=!0),a?(o.removeClass("igc-t-collapsed"),o.addClass("igc-t-expanded"),l.setVisible(!0)):(o.removeClass("igc-t-expanded"),o.addClass("igc-t-collapsed"),l.setVisible(!1))):(i=this.getWidth()<150,(a=2===e?0:i)?($.cookie("lmopt","E"),o.removeClass("igc-t-collapsed"),o.addClass("igc-t-expanded"),this.setWidth(this.ig_width_o)):($.cookie("lmopt","C",{expires:7}),o.removeClass("igc-t-expanded"),o.addClass("igc-t-collapsed"),this.setWidth(this.ig_width_c)))},listeners:{afterrender:function(e){var n=$(e.body.dom),i=$("#mainFooter",n),t=$(".searchGo",n),a=$("#tsearch",n);i.css("position","absolute"),a.bind("keyup",(function(e){if(13==e.keyCode){var n,i=IG$.__1m,t=$(this).val();o.hidden?IG$.changeApp(1,t):(n=i.down("[name=mexplorer]"))&&n.doSearch.call(n,t)}})),t.bind("click",(function(){var e,n=IG$.__1m,i=$(a).val();o.hidden?IG$.changeApp(1,i):(e=n.down("[name=mexplorer]"))&&e.doSearch.call(e,i)}))},resize:function(e,n,i,t,a,o){var l=n<120,s=$(this.body.dom),r=$("#mainFooter",s),d=$("#innerLogo",s),c=$("#searchForm",s),m=l?"hide":"show";r[m](),$(".ig-c-text",d)[m](),c[m]()}}},{xtype:"panel",name:"t_main_amp",region:"west",width:p>100?p:200,border:0,hidden:o.hidden,border:!1,margins:"0 0 0 0",collapseMode:"mini",split:!0,header:!1,collapsible:!0,titleCollapse:!1,layout:{type:"vbox",align:"stretch"},bodyCls:"igc-rounded-border"==o.bodyCls?"igc-no-border":null,padding:o.padding?o.padding:0,items:!1===o.hidden?[new IG$.explorer({name:"mexplorer",vmode:"tree",border:0,flex:1,split:!1,show_tree_items:!0,_meta_move:!0,bodyCls:o.bodyCls})]:null,listeners:{resize:function(e,n,i){n>100&&$.cookie("lmopt_w",""+n)}}},{xtype:"panel",region:"center",border:"igc-rounded-border"==o.bodyCls?0:1,layout:{type:"vbox",align:"stretch"},padding:o.padding?o.padding:2,bodyCls:"igc-rounded-border"==o.bodyCls?"igc-no-border":null,items:[{xtype:"container",layout:"border",bodyCls:"igc-rounded-border"==o.bodyCls?"igc-rounded-border":null,padding:o.padding?o.padding:2,items:[{xtype:"container",region:"north",height:28,hidden:a.tabhidden,layout:{type:"hbox",align:"stretch"},items:l},{xtype:"container",layout:"card",name:"appsel",region:"center",minTabWidth:40,deferredRender:!1,activeItem:c,items:s}]}]}]}),d.add(n),IG$.m_explorer=d.down("[name=mexplorer]"),n.doLayout(),IG$.__1m=n,IG$.appmenu=n.down("[name=appmenu]"),IG$.appsel=n.down("[name=appsel]"),IG$.dwizard={dwizard:n.down("[name=dwizard]"),dwizard_bar:n.down("[name=dwizard_bar]")},IG$.dmgrmenu=n.down("[name=dmgr]"),setTimeout((function(){$("#loading").fadeOut({complete:function(){$(this).remove()}}),$("#loading-mask").fadeOut({complete:function(){$(this).remove()}}),IG$.__ep_l&&IG$.navigateMenuByUID(IG$.__ep_l,void 0,void 0,!1)}),IG$.__ep?0:50)}},$s.ready((function(){$("#lpt","#loading").css("width","80%"),ig$.$l_m=1,webix.ui.fullScreen(),webix.env.touch||webix.CustomScroll.init(),ig$.timer_ping&&ig$.timer_ping>100&&setInterval((function(){var e=new IG$._rpc$;e.init(null,{ack:"ping",payload:{},mbody:{}},null,(function(e){}),!1),e.send()}),ig$.timer_ping),IRm$.r2({func:function(){$("#lpt","#loading").css("width","100%"),setTimeout((function(){var e;IG$.loadExtend.rcsloaded=!0,IG$.mainPanel=new IG$.MainPanel({name:"_I7d"}),IG$.mainPanel.on("tabchange",(function(e,n){})),e={closeText:IRm$.r1("L_C_CLOSE"),prevText:IRm$.r1("L_C_PREV"),nextText:IRm$.r1("L_C_NEXT"),currentText:IRm$.r1("L_C_CUR"),monthNames:IRm$.r1("L_C_M_NAMES").split("#"),monthNamesShort:IRm$.r1("L_C_M_NAMES_S").split("#"),dayNames:IRm$.r1("L_C_D_NAMES").split("#"),dayNamesShort:IRm$.r1("L_C_D_NAMES_S").split("#"),dayNamesMin:IRm$.r1("L_C_D_NAMES_M").split("#"),weekHeader:IRm$.r1("L_C_W_H"),firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:IRm$.r1("L_C_YR_SFX"),c1disp:"yyyy-mm-dd",c1format:"yy-mm-dd",c2disp:"yyyy-mm",c2format:"yy-mm"},$.datepicker.setDefaults(e),IG$.calendar_locale=e,IG$.m_explorer=null,$.each(IG$.loadExtend.items,(function(e,n){IG$.extend(n.name,n.base,n.option)})),$.each(IG$.filteropcodes,(function(e,n){var i=n.lcode;n.locale=IRm$.r1(i)}));var n=new $s.viewport({layout:"fit",id:"mainview"});n.doLayout(),IG$.viewport=n;var i=$.cookie("lui")||"";IG$.createLoginPanel(i,"",!0),IG$.loadMapData();var t=new IG$._rpc$;t.init(null,{ack:"helpcontent",payload:{},mbody:{option:"ls",mts:window.m$mts||"ROOT",lang:window.useLocale||""}},null,(function(e){var n=!1;if(e.uuid){if(n=!0,IG$.dlgLogin.callback=new IG$.callBackObj(this,IG$.showLoginProc),IG$.dlgLogin.uuid=e.uuid,IG$.dlgLogin.mts={sid:e.mts,name:e.mts_name},IG$._g$a=IG$.dlgLogin.mts.sid,window.m$mts&&IG$.dlgLogin.mts.name!=window.m$mts&&IG$.dlgLogin.mts.sid!=window.m$mts)return void IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc));IG$.dlgLogin.lastLogin=e,IG$.mainPanel&&IG$.mainPanel.updateLoginInfo.call(IG$.mainPanel),IG$.dlgLogin.getUserDetail.call(IG$.dlgLogin,!1),(hist=new IG$.historyManager).historyListener(),"function"==typeof window.callPhantom&&window.callPhantom({_proc:"C"})}0==n&&IG$.showLogin(new IG$.callBackObj(this,IG$.showLoginProc),0)}),(function(e){return IG$.showLogin(new IG$.callBackObj(this,IG$.showLoginProc),0),!0})),t.send()}),IG$.__ep?10:30)}})})),IG$._n5=function(){var e=ig$.session,n=60*ig$.session_expire,i=!1,t=-1;e&&($(document).bind("mousemove",(function(){e.count=0,0==i&&(t>-1&&(clearTimeout(t),t=-1),t=setTimeout((function(){i=!0;var n=new IG$._rpc$;n.init(null,{ack:"helpcontent",payload:{mode:"write"},mbody:{option:"wake"}},null,(function(n){i=!1,e.count=0}),null),n.send()}),2e3))})),e.timer=setInterval((function(){var i,t=n-e.count,a="",o=0;i=t>60?t-60*(o=Math.floor(t/60)):t,a=o>0?o+" min "+i+" sec":i+" sec",t<300?e.text.addClass("warn-sess-timer"):e.text.removeClass("warn-sess-timer"),e.text.html(a),t<0&&(clearInterval(e.timer),IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc))),e.count+=1}),1e3))},IG$.refreshMessages=function(){var e=new IG$._rpc$;e.init(null,{ack:"helpcontent",payload:{mode:"read"},mbody:{option:"rsn",readmode:0}},null,IG$.rs_refreshMessages,(function(e){return!0})),e.showerror=!1,e.send()},IG$.rs_refreshMessages=function(e){var n,i,t,a,o=$("#chatsublist"),l=IG$.XGetNode(e,"/smsg"),s=IG$.XGetChildNodes(l);if(!(s&&s.length>0&&IG$.L_SPPL&&(t=IG$.XGetAttrProp(s[0])).msgid==IG$.L_SPPL)&&(o.empty(),o.append($("<li class='view'><span><a href='javascript:f$7(\"CMD_RSN\")'>Write Message</a></span></li>")),s&&s.length>0))for(a=Math.min(5,s.length),IG$.L_SPPL&&$("#alertstext").text("Messages (New)"),n=0;n<a;n++)t=IG$.XGetAttrProp(s[n]),0==n&&(IG$.L_SPPL=t.msgid),i="<li><a href='#' class='delete'>X</a><p><span style='color:#0000ff;'>"+(t.username||"")+": </span><br>"+IG$.XGetTextVal(s[n])+" <br><span style='color:#4d4d4d; font-size: 9px; float: right'>("+(IG$.getFormattedDate(t.updatedate,!0)||"")+")</span></p></li>",o.append($(i))},IG$.setWeb3TopMenu=function(){if(IG$.appmenu){var e,n=IG$.appmenu,i=$(n.body.dom),t=$("#mainFooter",i),a=$("#mainNav",i),o=$("#innerLogo",i),l=ig$.mainmenu,s=ig$.features,r=$(".ig-c-button",o);if("C"!=$.cookie("lmopt")&&1!=ig$.collapse_main_menu||n.toggleSide(2),r.unbind("click"),r.bind("click",(function(){n.toggleSide()})),ig$.$l_=ig$.$l_||0,l){if(l.footmenu){for(e=0;e<l.footmenu.length;e++)l.footmenu[e].html&&(l.footmenu[e].html.remove(),l.footmenu[e].html=null);$.each(l.footmenu,(function(e,n){if("ig_sw_app"!=n.acls&&"ig_pref"!=n.acls||!(ig$.$l_>5)){var i=$("<li"+(n.acls?" class='"+n.acls+"'":"")+"><span>"+(n.rcs?IRm$.r1(n.rcs):n.text)+"</span></li>");t.prepend(i),i.bind("click",(function(){n.handler?n.handler.call(this):"logout"==n.cmd?IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc)):n.cmd&&IG$.procMenuCommand(n.cmd)})),n.html=i}}))}if(l.mainmenu&&s){for(e=0;e<l.mainmenu.length;e++)l.mainmenu[e].html&&(l.mainmenu[e].html.remove(),l.mainmenu[e].html=null);$.each(l.mainmenu,(function(e,n){if(!n.acls||!1===s[n.acls]){var i,t=$("<li class='"+(n.acls||"")+"'></li>").appendTo(a),o=$("<span class='parent'>"+(n.rcs?IRm$.r1(n.rcs):n.text)+"<span class='menuicon'></span></span>").appendTo(t);if(!1===s[n.acls]&&t.show(),n.cmd?IG$.procMenuCommand(cmd):n.handler&&(i=function(e){var n=e.pageX,t=e.pageY,a=$(".flyout"),o=!1;$.each(l.mainmenu,(function(e,i){var a,l,s=i.html;s&&0==o&&(l={x:(a=s.offset()).left,y:a.top,w:IG$.j$ext._w(s),h:IG$.j$ext._h(s)}).x<n&&n<l.x+l.w&&l.y<t&&t<l.y+l.h&&(o=!0)})),0==o&&$.each(l.mainmenu,(function(e,n){n.sv=0})),a.hide(),$(document).unbind("mouseup",i)},o.bind("click",(function(e){var a,o=$(".flyout",t),s=1,r=IG$.appsel.getLayout().selectedIndex;o&&o.length>0&&4!=r&&(a=n.sv,$(".flyout").hide(),$.each(l.mainmenu,(function(e,i){i!=n&&(i.sv=0)})),a?(n.sv=0,s=1):(n.sv=1,o.show(),$(document).bind("mouseup",i),s=0)),1==s&&ig$.$l_<5&&n.handler()}))),n.html=t,n.menus&&"column"==n.type){var r=$("<div class='flyout'><h3><span>"+(n.rcs?IRm$.r1(n.rcs):n.text)+"</span><span class='rightRaquoBlue'></span></h3></div>").appendTo(t),d=$("<div class='colwrapper'>").appendTo(r);n.handler&&ig$.$l_<5&&$(".rightRaquoBlue",r).bind("click",(function(){n.handler()})),$.each(n.menus,(function(e,n){var i=$("<div class='column"+(n.acls?" "+n.acls:"")+"'><h6>"+(n.rcs?IRm$.r1(n.rcs):n.text)+"</h6></div>").appendTo(d);if("list"==n.type){var t=$("<ul class='"+(n.acls||"")+"'></ul>").appendTo(i);$.each(n.items,(function(e,n){$("<li class='chevronLink"+(n.acls?" "+n.acls:"")+"'><span class='icon'></span><span class='title'>"+(n.rcs?IRm$.r1(n.rcs):n.text)+"</span></li>").appendTo(t).bind("click",(function(){n.cmd&&IG$.procMenuCommand(n.cmd)}))}))}else if("image"==n.type){var a,o;a=n.src&&$("<img src='"+n.src+"'></img>").appendTo(i),o=n.desc&&$("<h3>"+n.desc+"</h3>").appendTo(i),n.cmd&&(a.bind("click",(function(){IG$.procMenuCommand(n.cmd)})),o.bind("click",(function(){IG$.procMenuCommand(n.cmd)})))}}))}}}))}l.afterrender&&l.afterrender.call(this,l)}}},IG$.showLoginProc=function(){var e=$("#loginWindow"),n=$("#userid");e.hide(),IG$.m_explorer&&IG$.m_explorer.initData.call(IG$.m_explorer),lastHist=null,hist||(hist=new IG$.historyManager),hist.historyListener(),n&&n.length>0&&(n[0].value=IG$.dlgLogin.logininfo.userid),IG$.__ep||(IG$.setWeb3TopMenu(),IG$.mainPanel.initRecentVisit.call(IG$.mainPanel))};
IG$.MainPanel=$s.extend($s.panel,{margin:"0 0 0 0",resizeTabs:!0,minTabWidth:100,enableTabScroll:!0,activeTab:0,layout:{type:"card",deferredRender:!1},deferredRender:!1,hidemode:"offset",tabPosition:"top",removePanelHeader:!0,plain:!1,minTabWidth:void 0,maxTabWidth:void 0,___tabseq:0,customAddTab:function(e,t){var i=this.getComponent(e);i?(IG$.changeApp(2),this.setActiveTab(i)):(IG$.changeApp(2),t.id=e,i=this.add(t),this.setActiveTab(i))},navigateApp:function(e,t,i,n,a,o,s,l){var d,c=t+"_"+(e||this.___tabseq++),r=this.getComponent(c);if(r){if(IG$.changeApp(2),this.setActiveTab(r),l&&r.applyOption)r.applyOption.call(r,l);else if("dashboard"==t){this.getComponent("dashboardedit_"+e)&&r.uid&&r.uid.length>0&&r.procRunDashboard.call(r)}}else{var p=new IG$.callBackObj(this,(function(){this.navigateApp(e,t,i,n,a,o,s,l)})),m=IG$.createAppPanel(e,t,i,n,o,s||null,p);if(m){if(m.address=n,m.title=IG$.getTabTitle(i),s)for(d in s)m[d]=s[d];if(l)for(d in l)m[d]=l[d];if(1==m.isWindow)a=!1,m.title=IG$.getTabTitle(i)+" ("+IRm$.r1("D_"+t.toUpperCase())+")",IG$.ps[m.address]||(IG$.ps[m.address]=m,m.on("close",(function(){delete IG$.ps[m.address]})),m.show());else{IG$.changeApp(2),m.id=c,this.selectedIndex=this.selectedIndex<0?0:this.selectedIndex;var $=this.add(m);this.setActiveTab($)}}else a=!1}1==a&&e&&t&&(lastHist="&p1="+t+"&p2="+e,setTimeout((function(){hist.addHistory(lastHist)}),10))},initRecentVisit:function(){var e,t,i=this,n=$("#mbutton1"),a=($("#idv_recitems"),$("#welcome"));i.mviewer={mode:"recent",mrecenttext:n.text()},n.unbind("click"),n.bind("click",(function(){i.loadRecentVisit.call(i)}));var o=function(){var e=i.down("[name=mexplorer]");(e&&!e.isVisible()||IG$.m_explorer&&ig$.app_tmpl&&ig$.app_tmpl.mainview&&ig$.app_tmpl.mainview.navitree&&!1!==ig$.app_tmpl.mainview.navitree.hidden)&&IG$.changeApp(1)};e=[{title:"Step by Step",cls:"getting_started",handler:function(){IG$.procMenuCommand("CMD_APP_WIZARD")}},{title:"Navigator",cls:"navigator",handler:function(){o()}},{title:"About",cls:"about_app",handler:function(){IG$.procMenuCommand("CMD_ABOUT")}}],!0===ig$.main_navigator&&o(),(t=$("#pg_links",a)).empty(),$.each(e,(function(e,i){if(!i.hidden){var n=$("<div class='intro-pg-column'><div class='intro-figure'><div class='image' title='"+i.title+"'><span class='"+i.cls+"'></span></div><div class='intro-figure-caption'><span class='intro-links'>"+i.title+"</span></div></div></div>");n.appendTo(t),n.length>0&&i.handler&&($(".image",n).bind("click",(function(){i.handler()})),$(".intro-links",n).bind("click",(function(){i.handler()}))),i.el=n}})),i.__pg_linksitems=e,i.updateLoginInfo(),i.loadRecentVisit()},initAdminMenu:function(){var e,t=IG$.dmgrmenu.body.dom,i=$(".ig-mgr-body",t),n=$(".ig-mgr-panel-close",t),a=ig$.mainmenu.mainmenu;i.empty(),n.bind("click",(function(){IG$.procMenuCommand("CMD_HOME")})),a&&$.each(a,(function(t,n){e=$("<ul class='ig-mgr-group'></ul>").appendTo(i),n.tul=e,n.tul.hide(),n.menus&&$.each(n.menus,(function(t,i){var n=$("<li class='ig-mgr-group-item "+(i.acls||"")+" animate-box fadeInLeft animated'><div class='ig-mgr-title'><span class='icon'></span><h3>"+(IRm$.r1(i.rcs)||i.text)+"</h3></div><ul class='ig-mgr-menu'></ul></li>").appendTo(e),a=$(".ig-mgr-menu",n);$.each(i.items,(function(e,t){$("<li class='ig-mgr-menu-item "+(t.acls||"")+"'>"+(IRm$.r1(t.rcs)||t.text)+"</li>").appendTo(a).bind("click",(function(){t.handler?t.handler.call(this):"logout"==t.cmd?IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc)):t.cmd&&IG$.procMenuCommand(t.cmd)}))}))}))}))},updateLoginInfo:function(){var e,t,i,n,a,o,s,l=$("#last_login"),d=(IG$.viewport,IG$.dlgLogin?IG$.dlgLogin.logininfo:null);$("#home_app_title").html(ig$.home_app_title||IRm$.r1("L_HOME_APP_TITLE")),$("#home_app_desc").html(ig$.home_app_desc||IRm$.r1("L_HOME_APP_DESC")),$("#mbutton1").html(IRm$.r1("L_T_RECENT_VISIT")),l&&l.length>0&&d&&IG$.dlgLogin.lastLogin&&(o=$(".last_login_time",l),s=$(".last_login_host",l),a=$(".cur_login_host",l),i=$(".cur_login_user_id",l),n=$(".cur_login_user_nm",l),e=IG$.dlgLogin.lastLogin.lastaccesstime,i.text(d.userid),n.text(d.username),e&&(t=IG$.formatDate(e),o.text(t),s.text(IG$.dlgLogin.lastLogin.lastaccessaddr),a.text(IG$.dlgLogin.lastLogin.accessaddr)))},loadRecentVisit:function(){$("#idv_recitems");var e=new IG$._rpc$;e.init(this,{ack:"helpcontent",payload:{},mbody:{option:"bookmarks"}},this,this.rs_loadContent,null,null),e.send()},rs_loadContent:function(e){var t,i,n,a=$("#idv_recitems"),o=[],s=[],l={};if(a.empty(),a){for(t=0;t<3;t++)(n=$("<div class='recent-columns'></div>").appendTo(a)).css({width:100/3+"%",float:"left"}),s.push({div:n,di:!1});for(t=0;t<e.length;t++)l[(i=e[t]).uid]?l[i.uid].fatype="F"==i.fatype?i.fatype:l[i.uid].fatype:(l[i.uid]=i,o.push(i));o.sort((function(e,t){var i=0;return e.type!=t.type&&(i=e.type>t.type?1:-1),i})),this.shortcuts={};var d,c=0;$.each(o,(function(e,t){var i,n,a,o=t.type.toUpperCase();0==e?(n=(i=s[0]).div,$("<div class='recent-itemtype'><span>"+IRm$.r1("D_"+o)+"</span></div>").appendTo(n)):d&&d!=t.type?(c=(c+1)%s.length,n=(i=s[c]).div,a=$("<div class='recent-itemtype'><span>"+IRm$.r1("D_"+o)+"</span></div>").appendTo(n),i.di&&a.css({marginTop:"20px"})):n=(i=s[c]).div,i.di=!0;var l=$("<div class='recent-row' title='"+t.nodepath+"'></div>"),r=$("<span>"+t.name+("F"==t.fatype?"<span class='ig-fa-mark'></span>":"")+"</span>");r.bind("click",(function(){IG$.navigateMenu(t.uid)})),"REPORT"!=o&&"DASHBOARD"!=o||r.hover((function(e){var i=o.toLowerCase()+":"+t.uid;IG$._scrshot(r,i,!0)}),(function(e){IG$._scrshot(r,null,!1)})),l.append(r),n.append(l),d=t.type}))}},deferredRender:!0,onAdd:function(e,t){$s.tabpanel.prototype.onAdd.call(this,e,t)},initComponent:function(){var e=this,t=([].concat(e.dockedItems||[]),e.activeTab||(e.activeTab=0));e.tabPosition;e.layout={owner:e,type:"card",deferredRender:e.deferredRender,itemCls:e.itemCls,activeItem:t},IG$.mainPanelTabBar=new $s.tabbar({xtype:"tabbar",ui:e.ui,dock:"top",id:"ig-tabbar",cls:"ig-main-tabbar",flex:1,orientation:"horizontal",plain:!0,cardLayout:e.layout,tabPanel:e,padding:0,margin:0,bodyPadding:0,listeners:{tabclick:function(e,t,i){IG$.changeApp(2)}}}),e.tabBar=IG$.mainPanelTabBar,IG$.MainPanel.superclass.initComponent.call(this),e.setActiveTab=function(t){IG$.changeApp(2),$s.tabpanel.prototype.setActiveTab.call(e,t)},e.getActiveTab=$s.tabpanel.prototype.getActiveTab,e.getTabBar=$s.tabpanel.prototype.getTabBar,e.onItemEnable=$s.tabpanel.prototype.onItemEnable,e.onItemDisable=$s.tabpanel.prototype.onItemDisable,e.onRemove=function(t,i){if($s.tabpanel.prototype.onRemove.call(e,t,i),0==e.items.length){IG$.m_explorer;IG$.changeApp(IG$.__atab)}},t&&e.tabBar.setActiveTab(t.tab,!0)},listeners:{beforeadd:function(e,t,i,n){var a,o=this.getTabBar(),s=ig$.maxtapcount||0;s>0&&this.items.length>=s&&(a=this.items.items[0],this.remove(a),o&&o.$ex&&a.tab&&void 0!==a.tab.tabid&&o.$ex.removeOption(a.tab.tabid))}}});