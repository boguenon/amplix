IG$.showLoginProc=function(){var e=$("#loginWindow");$("#userid");e.hide()},IG$.open_url=function(e){if(e.objid||e.uid){var n=IG$.mainPanel,i=new IG$._rpc$;i.init(this,{ack:"helpcontent",payload:{uid:e.objid||e.uid},mbody:{option:"translate"}},this,function(e){var i=e&&e.length?e[0]:null;i&&n.navigateApp.call(n,i.uid,i.type.toLowerCase(),i.name,i.nodepath,!0,i.writable)}),i.send()}},IG$.$loadApp=function(e){window.load_obj_id&&IG$.open_url({objid:load_obj_id})},$s.ready(function(){$("#lpt","#loading").css("width","80%"),IRm$.r2({func:function(){$("#lpt","#loading").css("width","100%"),setTimeout(function(){var e;IG$.loadExtend.rcsloaded=!0,e={closeText:IRm$.r1("L_C_CLOSE"),prevText:IRm$.r1("L_C_PREV"),nextText:IRm$.r1("L_C_NEXT"),currentText:IRm$.r1("L_C_CUR"),monthNames:IRm$.r1("L_C_M_NAMES").split("#"),monthNamesShort:IRm$.r1("L_C_M_NAMES_S").split("#"),dayNames:IRm$.r1("L_C_D_NAMES").split("#"),dayNamesShort:IRm$.r1("L_C_D_NAMES_S").split("#"),dayNamesMin:IRm$.r1("L_C_D_NAMES_M").split("#"),weekHeader:IRm$.r1("L_C_W_H"),firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:IRm$.r1("L_C_YR_SFX"),c1disp:"yyyy-mm-dd",c1format:"yy-mm-dd",c2disp:"yyyy-mm",c2format:"yy-mm"},$.datepicker.setDefaults(e),IG$.calendar_locale=e,IG$.mainPanel=new IG$.MainPanel({}),$.each(IG$.loadExtend.items,function(e,i){IG$.extend(i.name,i.base,i.option)}),$.each(IG$.filteropcodes,function(e,i){var n=i.lcode;i.locale=IRm$.r1(n)});var i=new $s.viewport({layout:"fit",id:"mainview",renderTo:$("#mainview")[0]}),n={w:$("#mainview").width(),h:$("#mainview").height()};setInterval(function(){var e={w:$("#mainview").width(),h:$("#mainview").height()};e.w&&e.h&&(e.w!=n.w||e.h!=n.h)&&(i.setSize(e.w,e.h),n=e)},100),i.doLayout(),IG$.viewport=i,mainview=new $s.panel({layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",name:"maintab",border:1,flex:1,layout:"fit",items:[IG$.mainPanel]}]}),i.add(mainview),mainview.doLayout(),IG$.viewport=i,setTimeout(function(){$("#loading").fadeOut({remove:!0}),$("#loading-mask").fadeOut({remove:!0})},150);var t=$.cookie("lui")||"";IG$.createLoginPanel(t,"",!0),IG$.loadMapData();var a=new IG$._rpc$;a.init(null,{ack:"helpcontent",payload:{},mbody:{option:"ls",mts:window.m$mts||"",lang:window.useLocale||""}},null,function(e){var i=!1;if(e&&e.uuid){if(i=!0,IG$.dlgLogin.callback=new IG$.callBackObj(this,IG$.showLoginProc),IG$.dlgLogin.uuid=e.uuid,IG$.dlgLogin.mts={sid:e.mts,name:e.mts_name},IG$._g$a=IG$.dlgLogin.mts.sid,window.m$mts&&IG$.dlgLogin.mts.name!=window.m$mts&&IG$.dlgLogin.mts.sid!=window.m$mts)return void IG$.showLogout(new IG$.callBackObj(this,IG$.showLoginProc));if(IG$.dlgLogin.lastLogin={lastaccesstime:e.lastaccesstime,lastaccesshost:e.lastaccesshost,lastaccessaddr:e.lastaccessaddr,accesshost:e.accesshost,accessaddr:e.accessaddr,accesstime:e.accesstime},IG$.mainPanel&&IG$.mainPanel.updateLoginInfo.call(IG$.mainPanel),IG$.dlgLogin.getUserDetail.call(IG$.dlgLogin,!1),!load_obj_id)if(ig$.viewer_menu)$.ajax({type:"GET",url:ig$.viewer_menu+"?_d="+IG$.getUniqueKey(),dataType:"json",timeout:1e4,success:function(e){if(e.menus){var o=$("#d_nav");$("#content").mouseover(function(){$("#slide_menu").slideUp(400),$("#nav > ul > li > ul").fadeOut(300)}),$.each(e.menus,function(e,n){var i=$("<li></li>").appendTo(o),t=$("<a>"+n.name+"</a>").appendTo(i);if(t.mouseover(function(){if(n.menus&&n.menus.length){var e=$(this).parent("li").children("ul").children("li").size()-1,i=0==e?75:20*e+78;$("#slide_menu").css("height",i+"px"),$("#nav > ul > li > ul").hide(),$("#slide_menu").slideDown(300),$(this).parent("li").children("ul").fadeIn(300).siblings().children("ul").fadeOut(200)}else $("#slide_menu").slideUp(400),$("#nav > ul > li > ul").fadeOut(300)}),t.click(function(e){e.preventDefault(),e.stopPropagation(),$("#title_area > h1").text($(this).text()),IG$.open_url(n)}),n.menus&&n.menus.length){var a=$("<ul></ul>").appendTo(i);$.each(n.menus,function(e,i){$("<li><a>"+i.name+"</a></li>").appendTo(a).click(function(e){e.preventDefault(),e.stopPropagation(),$("#title_area > h1").text(n.name+" > "+i.name),$("#slide_menu").slideUp(400),$("#nav > ul > li > ul").fadeOut(300),IG$.open_url(i)})})}})}},error:function(e,i,n){}});else{var n=new IG$._rpc$;n.showerror=!1,n.init(this,{ack:"content",payload:{uid:"/SYS_Config/dashboardmenu"},mbody:{}},this,function(e){if(e.menustructure){var o=$("#d_nav");$("#content").mouseover(function(){$("#slide_menu").slideUp(400),$("#nav > ul > li > ul").fadeOut(300)}),$.each(e.menustructure,function(e,n){var i=$("<li></li>").appendTo(o),t=$("<a>"+n.name+"</a>").appendTo(i);if(t.mouseover(function(){if(n.items&&n.items.length){var e=$(this).parent("li").children("ul").children("li").size()-1,i=0==e?75:20*e+78;$("#slide_menu").css("height",i+"px"),$("#nav > ul > li > ul").hide(),$("#slide_menu").slideDown(300),$(this).parent("li").children("ul").fadeIn(300).siblings().children("ul").fadeOut(200)}else $("#slide_menu").slideUp(400),$("#nav > ul > li > ul").fadeOut(300)}),t.click(function(e){e.preventDefault(),e.stopPropagation(),n.options&&"report"==n.options.ltype&&n.options.rptl_uid&&($("#title_area > h1").text(n.options.rptl||$(this).text()),IG$.open_url({uid:n.options.rptl_uid}))}),n.items&&n.items.length){var a=$("<ul></ul>").appendTo(i);$.each(n.items,function(e,i){$("<li><a>"+i.name+"</a></li>").appendTo(a).click(function(e){e.preventDefault(),e.stopPropagation(),$("#title_area > h1").text(n.name+" > "+i.name),$("#slide_menu").slideUp(400),$("#nav > ul > li > ul").fadeOut(300),IG$.open_url(i)})})}});var i=e.menustructure[0];i&&i.options&&"report"==i.options.ltype&&i.options.rptl_uid&&($("#title_area > h1").text(i.options.rptl),IG$.open_url({uid:i.options.rptl_uid}))}}),n.send()}}0==i&&IG$.showLogin(new IG$.callBackObj(this,IG$.showLoginProc),0)},function(){return IG$.showLogin(new IG$.callBackObj(this,IG$.showLoginProc),0),!0}),a.send()},300)}})});
IG$.changeApp=function(){},IG$.MainPanel=$s.extend($s.panel,{layout:"card",customAddTab:function(t,e){var n=this,i=n.getComponent(t);i?IG$.changeApp(2):(IG$.changeApp(2),e.id=t,i=n.add(e)),n.setActiveTab(i)},navigateApp:function(t,e,n,i,a,o,l,d){var s,c,p=this.getComponent(e+"_"+t);if(p)IG$.changeApp(2),this.setActiveTab(p),d&&p.applyOption&&p.applyOption.call(p,d),"dashboard"!=e||this.getComponent("dashboardedit_"+t)&&p.uid&&0<p.uid.length&&p.procRunDashboard.call(p);else if((d=d||{}).header=!1,d._viewmode="dashboard",c=IG$.createAppPanel(t,e,n,i,o,d)){if(c.address=i,c.title=n,l)for(s in l)c[s]=l[s];if(1==c.isWindow)IG$.ps[c.address]||((IG$.ps[c.address]=c).on("close",function(){delete IG$.ps[c.address]}),c.show());else{IG$.changeApp(2),c.id=e+"_"+t;var r=this.add(c);this.setActiveTab(r)}}else a=!1;1==a&&(lastHist="lang="+useLocale+"&p1="+e+"&p2="+t,window.hist&&hist.addHistory(lastHist))},initRecentVisit:function(){},updateLoginInfo:function(){var t,e,n=IG$.viewport,i=$("#igc_login_user");IG$.dlgLogin&&IG$.dlgLogin.logininfo&&(t=(e=IG$.dlgLogin.logininfo).username,i.html(t),n._1||(n._1=!0,this.L1(n)),IG$.$loadApp(e.tmpl),IG$.dlgLogin.logininfo.__bdmenu||(IG$.dlgLogin.logininfo.__bdmenu=1,i.bind("click",function(){})))},L1:function(t){IG$.dlgLogin.jS2},L2:function(t,e){},L3:function(d,t,s,c){var p=this;$.each([t.children,t.items],function(t,e){e&&$.each(e,function(t,a){var o,e,n=$("<li><div class='indicator'></div></li>").appendTo(d),i=$("<div class='igc-nav-item'>"+a.name+"</div>").appendTo(n);if(i.hover(function(){$(".indicator",n).addClass("igc-hover")},function(){$(".indicator",n).removeClass("igc-hover")}),!!(!c&&a.children&&0<a.children.length||"Folder"==a.type||a.items&&0<a.items.length)){e=$("<div class='igc-submenu-expand'>&gt;</div>").appendTo(n),(o=$("<ul class='submenu'></ul>").appendTo(n)).hide();function l(t){if(t.stopPropagation(),a.loaded||"Folder"!=a.type)o.toggle();else{var e=new IG$._rpc$;e.init(p,{ack:"content",payload:{uid:a.uid},mbody:{}},p,function(t){var e,n,i=t?t.children:null;if(a.items=[],a.loaded=!0,i){for(e=0;e<i.length;e++)n=i[e],/Report|Folder|Dashboard/.test(n.type)&&a.items.push(n);IG$.sortMeta(a.items),p.L3.call(p,o,a,s+1),o.show()}}),e.send()}}e.bind("click",l),i.bind("click",l),p.L3.call(p,o,a,s+1)}else c?i.bind("click",function(t){a.handler&&a.handler.call(this,a)}):a.uid&&i.bind("click",function(t){p.navigateApp.call(p,a.uid,a.type.toLowerCase(),a.name,a.nodepath,!1,!1)})})})},setActiveTab:function(t){this.setActiveItem(t)},_1:function(){var t=new IG$._rpc$;t.init(this,{ack:"helpcontent",payload:{},mbody:{option:"favorites"}},this,this.rs__1,null,null),t.send()},rs__1:function(t){var e,n,i=IG$.viewport.down("[name=sidebar_m1]"),a=IG$.XGetNode(t,"/smsg"),o=a?IG$.XGetChildNodes(a):null,l=[];if(this.floaded=!0,o){for(n=$("#sidebar_fav",i.el.dom),(n=$(".navbar-top-menu",n)).empty(),e=0;e<o.length;e++)l.push(IG$.XGetAttrProp(o[e]));this.L3(n,{children:null,items:l},0)}},_2:function(t){var e,n,i,a=this,o=t.options,l=o?o.ltype:null;if(l)switch(l){case"html":(e=o.html)&&a._3(t,o,e);break;case"report":o.rptl_uid&&(o.rptl_item?(i=o.rptl_item,a.navigateApp.call(a,i.uid,i.type.toLowerCase(),i.name,i.nodepath,!1,!1)):((n=new IG$._rpc$).init(a,{ack:"helpcontent",payload:{uid:o.rptl_uid},mbody:{option:"translate"}},a,function(t){var e=t&&t.length?t[0]:null;e&&(o.rptl_item=e,this.navigateApp.call(this,e.uid,e.type.toLowerCase(),e.name,e.nodepath,!1,!1))},!1),n.send()))}},_3:function(e,n,t){var i=this,a="tpage_"+e.sid,o=this.getComponent(a);IG$.changeApp(2),o||(o=$s.panel({layout:"fit",name:a,id:a,autoScroll:!0,autoLoad:{url:t,callback:function(){if(n.scrp&&window[n.scrp]){var t=this.down("[name="+a+"]");window[n.scrp].call(i,e,t)}},scope:this}}),this.add(o)),this.setActiveTab(o)},initComponent:function(){IG$.MainPanel.superclass.initComponent.call(this)},listeners:{beforeadd:function(t,e,n,i){e.closable=!1,e.setTitle(null)}}}),IG$.navigateMenuByUID=function(t,d,s,c){var e=new IG$._rpc$;e.init(null,{ack:"helpcontent",payload:{uid:t},mbody:{option:"translate"}},null,function(t){var e=IG$.XGetNode(t,"/smsg/item"),n=IG$.XGetAttr(e,"uid"),i=IG$.XGetAttr(e,"type").toLowerCase(),a=IG$.XGetAttr(e,"name"),o=IG$.XGetAttr(e,"nodepath"),l="T"==IG$.XGetAttr(e,"manage")||"T"==IG$.XGetAttr(e,"writable");"dashboard"==i&&"dashboardedit"==d?i=d:"export"==i&&(i="report"),IG$.mainPanel.navigateApp.call(IG$.mainPanel,n,i,a,o,void 0===c||c,l,null,s)},null),e.send()};